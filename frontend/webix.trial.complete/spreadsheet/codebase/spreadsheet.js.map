{"version":3,"file":"spreadsheet.js","sources":["../node_modules/@xbs/muon/dist/muon.es6.js","../sources/locales/en.js","../sources/locale.js","../sources/views/align.js","../sources/views/border.js","../sources/views/color.js","../sources/operations/undo_group.js","../sources/mathematics/methods.js","../sources/views/date.js","../sources/operations/save.js","../sources/views/dialog.js","../sources/views/form.js","../sources/views/formlate.js","../sources/views/icons.js","../sources/views/list_suggest.js","../sources/helpers/column_names.js","../sources/toolbar/defaults.js","../sources/helpers/array.js","../sources/operations/styles.js","../sources/operations/formats.js","../sources/mathematics/parser.js","../sources/helpers/suggest_pos.js","../sources/operations/types.js","../sources/views/suggest_formula.js","../sources/views/button.js","../sources/operations/data.js","../sources/views/live_editor.js","../sources/views/separator.js","../sources/views/sheets.js","../sources/views/toggle.js","../sources/views/toolbar_title.js","../sources/views/multicheckbox.js","../sources/views/formlist.js","../sources/views/ui.js","../sources/views/series.js","../sources/views/bar.js","../sources/sheets.js","../sources/operations/resize.js","../sources/operations/lock_cell.js","../sources/operations/spans.js","../sources/operations/print.js","../sources/operations/zoom.js","../sources/views/zoom.js","../sources/editors/date.js","../sources/editors/richselect.js","../sources/toolbar/actions.js","../sources/toolbar/buttons.js","../sources/toolbar/helpers.js","../sources/toolbar/all_elements.js","../sources/toolbar.js","../sources/operations/column_operations.js","../sources/helpers/conditional.js","../sources/operations/conditional_formats.js","../sources/operations/validation.js","../sources/operations/show_cells.js","../sources/table.js","../sources/hotkeys.js","../sources/editor.js","../sources/dialogs/common.js","../sources/mathematics/writer.js","../sources/dialogs/imagecell.js","../sources/dialogs/imagetop.js","../sources/operations/undo.js","../sources/operations/views.js","../sources/chart.js","../sources/dialogs/sparkline.js","../sources/dialogs/ranges.js","../sources/dialogs/dropdown.js","../sources/mathematics/ranges.js","../sources/operations/filter.js","../sources/dialogs/filter.js","../sources/dialogs/format.js","../sources/dialogs/conditional.js","../sources/dialogs/export.js","../sources/dialogs/link.js","../sources/dialogs/print.js","../sources/dialogs/comments.js","../sources/dialogs/sizing.js","../sources/dialogs/validation.js","../sources/dialogs/index.js","../sources/operations/add_row_col.js","../sources/operations/dropdown.js","../sources/operations/clipboard.js","../sources/operations/hide_row_col.js","../sources/operations/selection.js","../sources/helpers/expand_selection.js","../sources/operations/sorting.js","../sources/mathematics/sheets.js","../sources/operations/hide_gridlines.js","../sources/operations/hide_headers.js","../sources/operations/comments.js","../sources/operations/show_formulas.js","../sources/operations/states.js","../sources/operations/import.js","../sources/operations/export.js","../sources/operations/load.js","../sources/operations/clear_styles.js","../sources/api/row_col_operations.js","../sources/api/lock_cell.js","../sources/api/freeze.js","../sources/api/hide_gridlines.js","../sources/api/hide_headers.js","../sources/api/hide_rows.js","../sources/api/math.js","../sources/api/operations.js","../sources/api/core.js","../sources/api/save.js","../sources/api/dropdown.js","../sources/api/filter.js","../sources/api/confirm.js","../sources/api/undo.js","../sources/api/number_formats.js","../sources/api/show_formulas.js","../sources/api/print.js","../sources/api/zoom.js","../sources/menu.js","../sources/spreadsheet.js","../sources/context.js","../sources/operations/index.js","../sources/api/index.js"],"sourcesContent":["const e=\"#DIV/0!\",t=\"#VALUE!\",r=\"#NUM!\",n=\"#N/A\";function o(e){const t=new Date(e.getFullYear(),0,0),r=e.valueOf()-t.valueOf()+60*(t.getTimezoneOffset()-e.getTimezoneOffset())*1e3;return Math.floor(r/864e5)}function i(e){const t=new Date(Math.round(86400*(e-25569)*1e3));return new Date(t.getTime()+6e4*t.getTimezoneOffset())}function u(e){return 25569+(e.getTime()-6e4*e.getTimezoneOffset())/864e5}function a(e){return!(!e&&0!==e||(e*=1,isNaN(e)))&&e}function s(e){if(1===e.length){const t=e[0];return\"object\"==typeof t?t:[t]}let t=[];for(let r=0;r<e.length;r++)t=t.concat(e[r]);return t}function c(e){return!e&&0!==e}function h(e){return\"string\"==typeof e?\"TRUE\"===e:!!e}function l(e){const t=\"string\"==typeof e?new Date(e):i(e);if(t.getTime())return t;throw`${e} is invalid date`}function f(e){const t=a(e);if(\"number\"!=typeof t)throw`${e} is not a number`;return t}function d(e,n,o,i,u){let s=a(e);s<0&&8==u&&(n=null);let c,h=n?a(n):null;if(\"number\"!=typeof s||\"boolean\"==typeof h)throw t;if(s<o&&(s=o),s>i&&(s=i),h<-1)throw r;h&&(h=Math.floor(+h));const l=e<0&&16===u?\"FF\":\"\";if(c=i<2147483648?(s>>>0&i-o).toString(u):(s>>>0).toString(u),h&&c.length>h)throw r;return(l+c).padStart(h,\"0\").toUpperCase()}function m(...e){return s(e).join(\"\")}function p(e,t){return c(e)?\"\":e.toString().substring(0,t)}function g(e,t,r){return c(e)?\"\":e.toString().substring(t,t+r)}function b(e,t){return c(e)?\"\":e.toString().substring(e.length-t)}function R(e){return c(e)?\"\":e.toString().toLowerCase()}function T(e){return c(e)?\"\":e.toString().toUpperCase()}function _(e){if(c(e))return\"\";const t=e.toString().toLowerCase().split(\" \");e=\"\";for(const r in t)e+=(e?\" \":\"\")+t[r].substring(0,1).toUpperCase()+t[r].substring(1);return e}function y(e){return c(e)?\"\":e.toString().trim()}function N(e){return c(e)?0:e.toString().length}const M=/[\\0-\\x1F]/g;function q(e,t,r=0){const n=a(r);if(\"number\"==typeof n&&t)return`${t}`.indexOf(`${e}`,n-1)+1;throw\"index cannot be string\"}function w(e,t,r=0){const n=a(r);if(\"number\"==typeof n){const r=`${t}`.toLowerCase().indexOf(`${e}`.toLowerCase(),n-1)+1;if(0!==r)return r;throw\"not found\"}}function E(e,t,r,n){if(!e||!t||!r&&\"\"!==r)return`${e}`;if(void 0===n)return`${e}`.replace(new RegExp(`${t}`,\"g\"),`${r}`);{let o=0,i=0;for(;`${e}`.indexOf(`${t}`,o)>0;)if(o=`${e}`.indexOf(`${t}`,o+1),i++,i===n)return`${e}`.substring(0,o)+r+`${e}`.substring(o+`${t}`.length)}}function A(e,t,r,n){const o=a(t),i=a(r);if(\"number\"==typeof o&&\"number\"==typeof i){const t=e.toString(),r=n.toString();return t.replace(t.substr(o-1,i),r)}}var O=Object.freeze({__proto__:null,CONCATENATE:m,LEFT:p,MID:g,RIGHT:b,LOWER:R,UPPER:T,PROPER:_,TRIM:y,LEN:N,CHAR:function(e){const t=a(e);if(\"number\"==typeof t)return String.fromCharCode(t)},CLEAN:function(e=\"\"){return`${e}`.replace(M,\"\")},CODE:function(e=\"\"){return`${e}`.charCodeAt(0)},EXACT:function(e,t){return e===t},FIND:q,FIXED:function(e,t=2,r=!1){const n=a(e),o=a(t);if(\"number\"==typeof n&&\"number\"==typeof o){const e=n.toFixed(o);if(h(r))return`${e}`;const[t,i]=`${e}`.split(\".\");return t.replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\")+\".\"+i}},NUMBERVALUE:function(e,t=\".\",r=\",\"){if(\"string\"==typeof e&&\"string\"==typeof t&&\"string\"==typeof r)return Number(e.replace(t,\".\").replace(r,\"\"))},REGEXEXTRACT:function(e,t){if(\"string\"==typeof e&&\"string\"==typeof t){const r=e.match(new RegExp(t));return r?r[r.length>1?r.length-1:0]:null}},REGEXMATCH:function(e,t){if(\"string\"==typeof e&&\"string\"==typeof t){return!!e.match(new RegExp(t))}},REGEXREPLACE:function(e,t,r){if(\"string\"==typeof e&&\"string\"==typeof t)return e.replace(new RegExp(t),`${r}`)},REPT:function(e,t){const r=a(t);if(\"number\"==typeof r)return new Array(r+1).join(`${e}`)},SEARCH:w,SUBSTITUTE:E,T:function(e){return\"string\"==typeof e&&\"TRUE\"!==e&&\"FALSE\"!==e?`${e}`:\"\"},JOIN:function(e,...t){const r=[];return t.forEach((t=>{\"object\"==typeof t?r.push(t.join(`${e}`)):r.push(t)})),r.join(`${e}`)},REPLACE:A,ARRAYTOTEXT:function(e,t){return t?`{${e.map((e=>\"string\"==typeof e?`\"${e}\"`:e)).join(\"; \")}}`:e.join(\"; \")}});const v=[[],[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],[],[],[],[],[],[],[],[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],I=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],S=[[],[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]];function C(e,t,r){return u(new Date(e,t-1,r))}function D(e,t,r){const n=u(new Date(1900,0,1,e,t,r,0));return n-Math.trunc(n)}function x(e){return i(e).getDate()}function L(e){return i(e).getMonth()+1}function P(e){return i(e).getFullYear()}function F(e){return i(e).getHours()}function U(e){return i(e).getMinutes()}function V(e){return i(e).getSeconds()}function k(){return u(new Date)}function $(e,t,r){const n=r.toLowerCase();if(\"d\"===n)return t-e;const u=i(e),a=i(t);switch(n){case\"y\":return a.getFullYear()-u.getFullYear();case\"m\":return 12*(a.getFullYear()-u.getFullYear())+a.getMonth()-u.getMonth();case\"d\":return Math.floor(t-e);case\"md\":{const e=a.getDate()-u.getDate();if(e<0){const e=new Date(u.getFullYear(),u.getMonth()+1,0).getDate();return a.getDate()+e-u.getDate()}return e}case\"ym\":{const e=a.getMonth()-u.getMonth();return e<0?12+e:e}case\"yd\":{const e=o(a)-o(u);return e<0?365+e:e}}}function B(e,t){const r=l(e),n=l(t);if(r&&n)return Math.round((r.getTime()-n.getTime())/864e5)}function H(e){const t=l(e);if(t){t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7));const e=new Date(t.getFullYear(),0,1);return Math.ceil(((t.getTime()-e.getTime())/864e5+1)/7)}}function X(e,t,r,n){const o=l(e),u=l(t);if(o&&u){const e=void 0===r?S[1]:S[r],t=n||[];for(let e=0;e<t.length;e++){const r=i(t[e]);if(r instanceof Error)throw`The ${t[e]} is not a  number`;t[e]=r}const a=(u.getTime()-o.getTime())/864e5+1;let s=Math.round(a);const c=o;for(let r=0;r<a;r++){const r=(new Date).getTimezoneOffset()>0?c.getUTCDay():c.getDay();let n=!1;r!==e[0]&&r!==e[1]||(n=!0);for(let e=0;e<t.length;e++){const r=t[e];if(r.getDate()===c.getDate()&&r.getMonth()===c.getMonth()&&r.getFullYear()===c.getFullYear()){n=!0;break}}n&&s--,c.setDate(c.getDate()+1)}return s}}function j(e,t,r,n){const o=l(e),s=a(t);if(o&&\"number\"==typeof s){const e=void 0===r?S[1]:S[r],t=n||[];for(let e=0;e<t.length;e++){const r=i(t[e]);if(r instanceof Error)throw`The ${t[e]} is not a  number`;t[e]=r}let a=0;for(;a<s;){o.setDate(o.getDate()+1);const r=o.getDay();if(r!==e[0]&&r!==e[1]){for(let e=0;e<t.length;e++){const r=t[e];if(r.getDate()===o.getDate()&&r.getMonth()===o.getMonth()&&r.getFullYear()===o.getFullYear()){a--;break}}a++}}return u(o)}}function Y(e){return 1===new Date(e,1,29).getMonth()}function G(e,t,r=0){const n=l(e),o=l(t);if(n&&o){let e=n.getDate();const t=n.getMonth()+1,i=n.getFullYear();let u=o.getDate();const a=o.getMonth()+1,s=o.getFullYear();let c=365;const h=s-i+1,l=(new Date(s+1,0,1).getTime()-new Date(i,0,1).getTime())/1e3/60/60/24/h;switch(r){case 0:return 31===e&&31===u?(e=30,u=30):31===e?e=30:30===e&&31===u&&(u=30),(u+30*a+360*s-(e+30*t+360*i))/360;case 1:return i===s||i+1===s&&(t>a||t===a&&e>=u)?((i===s&&Y(i)||function(e,t){const r=e.getFullYear(),n=new Date(r,2,1);if(Y(r)&&e<n&&t>=n)return!0;const o=t.getFullYear(),i=new Date(o,2,1);return Y(o)&&t>=i&&e<i}(n,o)||1===a&&29===u)&&(c=366),B(o.toDateString(),n.toDateString())/c):B(o.toDateString(),n.toDateString())/l;case 2:return B(o.toDateString(),n.toDateString())/360;case 3:return B(o.toDateString(),n.toDateString())/365;case 4:return(u+30*a+360*s-(e+30*t+360*i))/360}}}const z={DATE:C,TIME:D,DAY:x,MONTH:L,YEAR:P,HOUR:F,MINUTE:U,SECOND:V,NOW:k,DATEDIF:$,DATEVALUE:function(e){if(\"string\"==typeof e){return u(new Date(new Date(e).toDateString()))}},DAYS:B,DAYS360:function(e,t,r=0){const n=l(e),o=l(t);if(n&&o){const e=n.getMonth();let t,i,u=o.getMonth();if(h(r))t=31===n.getDate()?30:n.getDate(),i=31===o.getDate()?30:o.getDate();else{const r=new Date(n.getFullYear(),e+1,0).getDate(),a=new Date(o.getFullYear(),u+1,0).getDate();t=n.getDate()===r?30:n.getDate(),o.getDate()===a?t<30?(u++,i=1):i=30:i=o.getDate()}return 360*(o.getFullYear()-n.getFullYear())+30*(u-e)+(i-t)}},EDATE:function(e,t){const r=l(e),n=a(t);if(r&&\"number\"==typeof n)return r.setMonth(r.getMonth()+n),u(r)},EOMONTH:function(e,t){const r=l(e),n=a(t);if(r&&\"number\"==typeof n)return u(new Date(r.getFullYear(),r.getMonth()+n+1,0))},ISOWEEKNUM:H,NETWORKDAYS:function(e,t,r){return X(e,t,1,r)},\"NETWORKDAYS.INTL\":X,TIMEVALUE:function(e){if(\"string\"==typeof e){const t=e.split(\" \"),r=t[1],n=t[0].split(\":\"),o=new Date;return o.setHours(+n[0]),r&&\"PM\"===r.toUpperCase()&&o.setHours(o.getHours()+12),o.setMinutes(+n[1]),n[2]&&o.setSeconds(+n[2]),(3600*o.getHours()+60*o.getMinutes()+o.getSeconds())/86400}},WEEKNUM:function(e,t=1){const r=l(e);if(21===t)return H(t);const n=I[t],o=new Date(r.getFullYear(),0,1),i=o.getDay()<n?1:0,u=o.getTime()-24*Math.abs(o.getDay()-n)*60*60*1e3;return Math.floor((r.getTime()-u)/864e5/7+1)+i},WEEKDAY:function(e,t=1){const r=l(e).getDay();return v[t][r]},WORKDAY:function(e,t,r){return j(e,t,1,r)},\"WORKDAY.INTL\":j,YEARFRAC:G};function W(e,t,r,n=0,o=0){const i=f(e),u=f(t),a=f(r),s=f(n);let c;if(0===i)c=(a+s)/u;else{const e=Math.pow(1+i,u);c=i*(a*e+s)/(e-1),1===o&&(c/=1+i)}return-c}function K(e,t,r,n=0,o=0){const i=f(e),u=f(t),a=f(r),s=f(n);let c;if(0!==i){const e=Math.pow(1+i,u);return c=s*e+a*(e-1)/i,1===o&&(c=s*e+a*(1+i)*(e-1)/i),-c}c=s+a*u}function Q(e,t,r,n,o=0,i=0){const u=f(e),a=f(r),s=f(t),c=f(n),h=W(u,a,c,f(o),i);let l;return l=1===s?1===i?0:-c:1===i?K(u,s-2,h,c,1)-h:K(u,s-1,h,c,0),l*u}var J=Object.freeze({__proto__:null,ACCRINT:function(e,t,r,n,o=0,i,u=0){const a=l(e),s=l(r),c=f(n),h=f(o),d=f(i),m=f(u);if(1!==d)throw\"This function is only supported with frequency 1\";if(-1===[0,1,2,3,4].indexOf(m))throw`Basis is ${u}. It's should be 0, 1, 2, 3 or 4`;if(s<=a)throw\"Settlement canot be before or equal to issue\";return h*c*G(e,r,m)},PMT:W,FV:K,DB:function(e,t,r,n,o=12){const i=f(e),u=f(t),a=f(r),s=f(n),c=f(o);if(i<0||u<0||a<0||s<0)throw\"Parameters cannot be negative\";if(-1===[1,2,3,4,5,6,7,8,9,10,11,12].indexOf(c))throw`Month is ${o}. It's should be beetwen 1 and 12`;if(s>a)throw\"Period cannot be greater than life\";if(u>=i)return 0;const h=+(1-Math.pow(u/i,1/a)).toFixed(3),l=i*h*c/12;let d=l,m=0;const p=n===a?a-1:n;for(let e=2;e<=+p;e++)m=(i-d)*h,d+=m;return 1===n?l:n===a?(i-d)*h:m},DDB:function(e,t,r,n,o=2){const i=f(e),u=f(t),a=f(r),s=f(n),c=f(o);if(i<0||u<0||a<0||s<0||c<0)throw\"Parameters cannot be negative\";if(s>a)throw\"Period cannot be greater than life\";if(u>=i)return 0;let h=0,l=0;for(let e=1;e<=+n;e++)l=Math.min(c/a*(i-h),i-u-h),h+=l;return l},DOLLAR:function(e,t=2){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n){if(n>=0)return`$${r.toFixed(n)}`;const e=Math.pow(10,-n);return\"$\"+Math.trunc(r/e)*e}},DOLLARDE:function(e,t){const r=f(e);let n=f(t);if(n<0)throw\"Fraction cannot be negative\";if(n>=0&&n<1)throw\"Fraction cannot be zero\";n=parseInt(`${n}`,10);let o=parseInt(`${e}`,10);o+=r%1*Math.pow(10,Math.ceil(Math.log(n)/Math.LN10))/n;const i=Math.pow(10,Math.ceil(Math.log(n)/Math.LN2)+1);return o=Math.round(o*i)/i,o},DOLLARFR:function(e,t){const r=f(e);let n=f(t);if(n<0)throw\"Fraction cannot be negative\";if(n>=0&&n<1)throw\"Fraction cannot be zero\";n=parseInt(`${n}`,10);let o=parseInt(`${e}`,10);return o+=r%1*Math.pow(10,-Math.ceil(Math.log(n)/Math.LN10))*n,o},EFFECT:function(e,t){const r=f(e);let n=f(t);if(r<=0)throw\"Rate cannot be less than or equal to zero\";if(n<1)throw\"Periods cannot be less than 1\";return n=parseInt(`${n}`,10),Math.pow(1+r/n,n)-1},FVSCHEDULE:function(e,t){const r=f(e),n=t.map((e=>f(e))),o=n.length;let i=r;for(let e=0;e<o;e++)i*=1+n[e];return i},IRR:function(e,t=0){const r=s(e).map((e=>f(e)));let n=f(t);const o=function(e,t,r){const n=r+1;let o=e[0];for(let r=1;r<e.length;r++)o+=e[r]/Math.pow(n,(t[r]-t[0])/365);return o},i=function(e,t,r){const n=r+1;let o=0;for(let r=1;r<e.length;r++){const i=(t[r]-t[0])/365;o-=i*e[r]/Math.pow(n,i+1)}return o},u=[];let a=!1,c=!1;for(let e=0;e<r.length;e++)u[e]=0===e?0:u[e-1]+365,r[e]>0&&(a=!0),r[e]<0&&(c=!0);if(!a||!c)throw\"Values should contain at least one positive value and one negative value\";n=void 0===t?.1:n;let h,l,d,m=n,p=!0;do{d=o(r,u,m),h=m-d/i(r,u,m),l=Math.abs(h-m),m=h,p=l>1e-10&&Math.abs(d)>1e-10}while(p);return m},IPMT:Q,ISPMT:function(e,t,r,n){const o=f(e),i=f(t),u=f(r);return f(n)*o*(i/u-1)},NPV:function(...e){const t=s(e).map((e=>f(e))),r=f(t[0]);let n=0;for(let e=1;e<t.length;e++)n+=t[e]/Math.pow(1+r,e);return n},NOMINAL:function(e,t){const r=f(e);let n=f(t);if(r<=0)throw\"Rate cannot be less then or equal to zero\";if(n<1)throw\"Periods cannot be less then 1\";return n=parseInt(`${n}`,10),(Math.pow(r+1,1/n)-1)*n},NPER:function(e,t,r,n=0,o=0){const i=f(e),u=f(t),a=f(r),s=f(n),c=f(o),h=u*(1+i*c)-s*i,l=a*i+u*(1+i*c);return Math.log(h/l)/Math.log(1+i)},PDURATION:function(e,t,r){const n=f(e),o=f(t),i=f(r);if(n<=0)throw\"Rate cannot be less then or equal to zero\";return(Math.log(i)-Math.log(o))/Math.log(1+n)},PPMT:function(e,t,r,n,o=0,i=0){const u=f(e),a=f(t),s=f(r),c=f(n),h=f(o),l=f(i);return W(u,s,c,h,l)-Q(u,a,s,c,h,l)},PV:function(e,t,r,n=0,o=0){const i=f(e),u=f(t),a=f(r),s=f(n),c=f(o);return 0===i?-a*u-s:((1-Math.pow(1+i,u))/i*a*(1+i*c)-s)/Math.pow(1+i,u)},SYD:function(e,t,r,n){const o=f(e),i=f(t),u=f(r);return(o-i)*(u-f(n)+1)*2/(u*(u+1))},TBILLPRICE:function(e,t,r){const n=l(e),o=l(t),i=f(r);if(\"number\"==typeof i&&o>n){return 100*(1-i*Math.round((o.getTime()-n.getTime())/864e5)/360)}},TBILLYIELD:function(e,t,r){const n=l(e),o=l(t),i=f(r);if(\"number\"==typeof i&&o>n){return(100-i)/i*360/Math.round((o.getTime()-n.getTime())/864e5)}}});const Z=1,ee=2,te=3,re=4,ne=5,oe=6,ie=7,ue=8,ae=9,se=10,ce=11,he=12,le={1:\"#ERROR\",2:\"#ERROR\",3:\"#REF!\",4:\"#SPILL!\"},fe=0,de=1,me=0,pe=1,ge=2,be=1,Re=255;function Te(e,t,r){return r+64*t+64*e*4096}function _e(e){return[e<2147483648?e>>18:e/262144&16777215,e>>6&4095,63&e]}function ye(e){return e<2147483648?e>>18:e/262144&16777215}function Ne(e){return e>>6&4095}function Me(e){return 63&e}function qe(e,t,r){const[n,o]=_e(e),[i,u]=_e(t),a=i-n,s=u-o;for(let t=0;t<=a;t++)for(let n=0;n<=s;n++)r(e+64*n+4096*t*64)}function we(e,t,r,n){let o=0;for(let i=0;i<r;i++)for(let r=0;r<t;r++)n(e+64*r+4096*i*64,o),o++}function Ee(e,t){const r=e.code,n=e.source;let o,i,u,a,s,c=\"\";const h=r.length;for(let l=0;l<h;l+=3){switch(r[l]){case 5:{let n;9===r[l+6]&&(n=t.pageName(Me(r[l+7]))),c+=Oe(n||e.source.substr(r[l+1],r[l+2]))+\"!\";break}case 7:[o,u,s]=_e(r[l+4]),t.z!==s&&5!==r[l-3]&&(c+=Oe(t.pageName(s))+\"!\"),c+=Ae(o,u,r[l+5]);break;case 4:c+=n.substr(r[l+1],r[l+2]).toUpperCase();break;case 8:[o,u,s]=_e(r[l+4]),[i,a]=_e(r[l+7]),t.z!==s&&5!==r[l-3]&&(c+=Oe(t.pageName(s))+\"!\"),c+=Ae(o,u,r[l+5]),c+=\":\",c+=Ae(i,a,r[l+8]);break;case 9:break;case 2:c+=\"{{\"+n.substr(r[l+1],r[l+2])+\"}}\";break;case 3:c+=\"#REF!\";break;case 1:c+='\"'+n.substr(r[l+1],r[l+2])+'\"';break;case 13:{c+=\"{\";const e=r[l+1],t=r[l+2];l+=3;for(let o=0;o<t;o++){for(let t=0;t<e;t++){t>0&&(c+=\",\");const e=r[l];1===e?c+='\"'+n.substr(r[l+1],r[l+2])+'\"':11===e&&(c+=n.substr(r[l+1],r[l+2])),l+=3}o<t-1&&(c+=\";\")}l-=3,c+=\"}\";break}default:c+=n.substr(r[l+1],r[l+2])}}return c}function Ae(e,t,r){let n=\"\";2&r&&(n+=\"$\");let o=\"\";for(t+=1;t>0;){let e=t%26;0===e&&(e=26),o=String.fromCharCode(64+e)+o,t=(t-e)/26}return n+=o,1&r&&(n+=\"$\"),n+=e+1,n}function Oe(e){return-1!==e.indexOf(\" \")?`'${e}'`:e}let ve;function Ie(e){return e<=122}function Se(e){return e<=122?e>=65&&94!=e||35===e||36===e||46===e:e>191}function Ce(e){return e>=97}function De(e){const t=e.charCodeAt(0);return t>=48&&t<=57}function xe(e,t){let r;do{t++,r=e.charCodeAt(t)}while(r>=48&&r<=57);return t}function Le(e,t){let r;do{r=e[++t]}while('\"'!==r);return t}function Pe(e){return\" \"===e||\"\\t\"===e||\"\\n\"===e||\"\\r\"===e}function Fe(e,t){let r;do{r=e[++t]}while(Pe(r));return t}function Ue(e,t){if(\"<\"===e[t]){const r=e[t+1];\">\"!==r&&\"=\"!==r||t++}else\">\"===e[t]&&\"=\"===e[t+1]&&t++;return t+1}function Ve(e,t,r){const n=e.length;let o=!0,i=t,u=!1,a=!1,s=!1,c=0;for(;i<n;i++){const t=e[i];if(\"'\"!==t){if(!u){s=!0;const e=t.charCodeAt(0);if(Se(e)){Ie(e)?Ce(e)&&(a=!0):o=!1,1==c&&c++;continue}if(De(t)){0==c&&c++;continue}break}}else{if(s)break;if(u){i++;break}u=!0}}const h=e[i];let l=t,f=i-t;return u&&(f-=1+(\"'\"===e[i-1]?1:0),f<0&&(f=0),l++,r=5),0===r&&(\":\"===h&&o?1!==c?r=3:(r=8,a&&(ve=!0)):\"!\"===h?r=\"#\"===e[l]?3:5:\"(\"===h?(function(e,t,r){const n=e.substr(t,r);return n.toUpperCase()!==n}(e,l,f)&&(ve=!0),r=4):\"}\"===h&&\"}\"===e[i-1]?r=2:1===c&&o?(r=7,a&&(ve=!0)):r=6),[l,f,i,r]}function ke(e,t,r){let n=0,o=0,i=1,u=1,a=0,s=!1;for(let e=t.length-1;e>=0;e--){const r=t[e].charCodeAt(0);36!==r?r<58?(o+=(r-48)*i,i*=10):(s||(i=1,n=o,o=0,s=!0,u+=1),o+=(r-(r>96?96:64))*i,i*=26):a+=u}o>4095?e.push(3,0,0):e.push(9,Te(n-1,o-1,r),a)}function $e(e,t){const r=[];ve=!1;let n=-1,o=-1,i=0;for(let a=0;a<e.length;a++){const s=e[a];if(o>-1){if(\"}\"==s){const e=r[o+2]+=1,t=r[o+1]=i/e;t-Math.round(t)!=0&&r.push(3,0,0),o=-1}else if('\"'===s){const t=Le(e,a);a++,r.push(1,a,t-a),i++,a=t}else if(\"-\"===s){const t=xe(e,a+1);r.push(11,a,t-a),i++,a=t-1}else if(De(s)){const t=xe(e,a);r.push(11,a,t-a),i++,a=t-1}else\" \"===s||\"\\t\"===s||\",\"===s||(\";\"===s?r[o+2]+=1:r.push(3,0,0));continue}if('\"'==s){n>-1?(r.push(1,n+1,a-n-1),n=-1):n=a;continue}if(n>-1)continue;if(\"{\"==s){if(\"{\"==e[a+1]){const[t,n,o]=Ve(e,a+2,2);r.push(2,t,n),a=o+2-1;continue}o=r.length,i=0,r.push(13,0,0);continue}if(\"'\"==s||((u=s.charCodeAt(0))<=122?u>=65&&94!=u||35===u||36===u:u>191)){let n,[o,i,u,s]=Ve(e,a,0);const c=r.length;if(7!==s&&8!==s||5!==r[r.length-3])n=t.z,r.push(s,o,i);else{const u=\"'\"===e[o-2]?1:0,a=r[c-2],h=r[c-1];n=t.page(e.substr(a,h)),void 0===n&&(r.push(3,0,0),n=0),r.push(s,o-h-2*u-1,i+h+2*u+1)}if(a=u-1,6===s)t.name(r,e,t);else if(8===s){const t=r.length;if(ke(r,e.substr(o,i),n),[o,i,u,s]=Ve(e,a+2,0),5===s&&([o,i,u,s]=Ve(e,u+1,0)),7!==s){r[t-3]=7;continue}ke(r,e.substr(o,i),n);const c=r[t+1],h=r[t+4];(c>h||ye(c)>ye(h))&&(r[t+1]=h,r[t+4]=c),r[t-1]+=i+1,a=u-1}else 7===s?ke(r,e.substr(o,i),n):3!==s&&5!==s||a++;continue}if(Pe(s)){const t=Fe(e,a);r.push(12,a,t-a),a=t-1;continue}if(De(s)){const t=xe(e,a);r.push(11,a,t-a),a=t-1;continue}const c=Ue(e,a);r.push(10,a,c-a),a=c-1}var u;const a={code:r,source:e,exec:null,broken:0,triggers:null};return ve&&(a.source=Ee(a,t)),a}function Be(e){return\"            \".substr(0,10-e.length)}const He=[\">\",\"<\",\"=\",\"+\"];function Xe(e,t){const r=function(e,t){const r=e.code,n=e.source;let o=\"\",i=0;const u=[],a=r.length;for(let s=0;s<a;s+=3){switch(r[s]){case 4:o+=`ctx.m[\"${n.substr(r[s+1],r[s+2]).toUpperCase()}\"]`;break;case 1:o+='\"'+n.substr(r[s+1],r[s+2])+'\"';break;case 2:o+=`ctx.p(\"${n.substr(r[s+1],r[s+2])}\")`;break;case 6:case 7:{let e,t;if(10===r[s-3]?e=s-3:12===r[s-3]&&10===r[s-6]&&(e=s-6),10===r[s+6]?t=s+6:12===r[s+6]&&10===r[s+9]&&(t=s+9),e||t){const i=e?n[r[e+1]]:null,u=t?n[r[t+1]]:null;if(\"&\"==i||\"&\"==u){o+=`(ctx.v(${r[s+4]}) === null ? \"\" : ctx.v(${r[s+4]}))`;break}if(-1!=He.indexOf(i)||-1!=He.indexOf(u)){o+=`(ctx.v(${r[s+4]}) === null ? 0 : ctx.v(${r[s+4]}))`;break}}o+=`ctx.v(${r[s+4]})`;break}case 8:o+=`ctx.r(${r[s+4]}, ${r[s+7]})`;break;case 10:if(1===r[s+2]){const e=n[r[s+1]];\"&\"===e?o+='+\"\"+':t&&\"+\"==e?o+=\"*1+1*\":\"=\"===e?o+=\"==\":\";\"===e?o+=\",\":\"{\"===e?o+=\"[\":\"}\"===e?o+=\"]\":\"^\"===e?o+=\"**\":\"%\"===e?r[s+3]&&10!==r[s+3]?o+=t?\"/0+\":e:o+=(\"/\"==u[i]?\"*\":\"/\")+\"100\":(\"(\"==e?(i++,u.push(\"+\")):\")\"==e&&(i--,u.pop()),o+=e),\"+\"!=e&&\"-\"!=e&&\"*\"!=e&&\"/\"!=e&&\"&\"!=e||(u[i]=e)}else if(2===r[s+2]){const e=n.substr(r[s+1],r[s+2]);o+=\"<>\"===e?\"!=\":e}else o+=n.substr(r[s+1],r[s+2]);break;case 11:o+=n.substr(r[s+1],r[s+2]);break;case 3:return\"\";case 9:case 5:case 12:break;case 13:{o+=\"ctx.a([\";const t=r[s+1],i=r[s+2];s+=3;const u=s+t*i*3;let a=!1;for(;s<u;s+=3){a&&(o+=\",\");const t=r[s];if(11===t)o+=n.substr(r[s+1],r[s+2]);else if(1===t)o+='\"'+n.substr(r[s+1],r[s+2])+'\"';else if(3===t)return e.broken=3,\"\";a=!0}s-=3,o+=`],${t}, ${i})`;break}}}return o}(e,t);if(!r)return e.broken=3,void(e.exec=null);try{e.exec=new Function(\"ctx\",`return ${r}`)}catch(t){e.broken=1,e.exec=null}}function je(e,t){const r=+Ut(e),n=+Vt(e),o=+Ut(t),i=+Vt(t);return Ot(r*o-n*i,r*i+n*o)}function Ye(e,t){const r=+Ut(e),n=+Vt(e);return Ot(r+ +Ut(t),n+ +Vt(t))}function Ge(e){return e>0?Math.floor(e):Math.ceil(e)}function ze(e){return e<0?Math.floor(e):Math.ceil(e)}function We(...e){let t=0;const r=s(e);for(let e=0;e<r.length;e++){const n=a(r[e]);\"number\"==typeof n&&(t+=n)}return t}function Ke(...e){let t=0,r=0;const n=s(e);for(let e=0;e<n.length;e++){const o=a(n[e]);\"number\"==typeof o&&(t+=o,r++)}return r?t/r:0}function Qe(...e){const t=s(e);let r=0,n=0;for(let e=0;e<t.length;e++){const o=t[e],i=a(t[e]);\"number\"==typeof i?(r+=i,n++):(!0===o&&r++,(o||!1===o)&&n++)}return n?r/n:0}function Je(...e){let t=0;const r=s(e);for(let e=0;e<r.length;e++){\"number\"==typeof a(r[e])&&t++}return t}function Ze(...e){let t=0;const r=s(e);for(let e=0;e<r.length;e++)r[e]&&1*r[e]!=0&&t++;return t}function et(...e){let t=-1/0;const r=s(e);for(let e=0;e<r.length;e++){const n=a(r[e]);\"number\"==typeof n&&n>t&&(t=n)}return t===-1/0?0:t}function tt(...e){let t=1/0;const r=s(e);for(let e=0;e<r.length;e++){const n=a(r[e]);\"number\"==typeof n&&n<t&&(t=n)}return t===1/0?0:t}function rt(...e){let t=!1,r=1;const n=s(e);for(let e=0;e<n.length;e++){const o=a(n[e]);\"number\"==typeof o&&(t=!0,r*=o)}return t?r:null}function nt(...e){const t=e[0].length;for(const r in e)if(e[r].length!==t)return;let r=0;for(let t=0;t<e[0].length;t++){let n=!1,o=1;for(const r in e){const i=a(e[r][t]);\"number\"==typeof i&&(o*=i,n=!0)}n&&(r+=o)}return r}function ot(e,t,r){const n=s(e);let o=t?0:-1;const i=r?Qe(...e):Ke(...e);let u=0;for(let e=0;e<n.length;e++){const t=n[e];let s=a(n[e]);if(\"number\"!=typeof s){if(!r||\"boolean\"!=typeof t&&!t)continue;s=!0===t?1:0}o++,u+=Math.pow(s-i,2)}return o?u/o:0}function it(...e){return ot(e,!1,!1)}function ut(...e){return ot(e,!1,!0)}function at(...e){return ot(e,!0,!1)}function st(...e){return ot(e,!0,!0)}function ct(...e){return Math.sqrt(it(...e))}function ht(...e){return Math.sqrt(at(...e))}function lt(e,t){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n)return Math.pow(r,n)}function ft(e){const t=a(e);if(\"number\"==typeof t&&t>=0)return Math.sqrt(t)}function dt(e){const t=a(e);if(\"number\"==typeof t)return Math.abs(t)}function mt(){return Math.random()}function pt(e){const t=a(e);if(\"number\"==typeof t)return Math.floor(t)}function gt(e,t){const r=a(e),n=a(t)||0;if(\"number\"==typeof r&&\"number\"==typeof n)return n<0?Math.round(r/Math.pow(10,Math.abs(n)))*Math.pow(10,Math.abs(n)):parseFloat(r.toFixed(n))}function bt(e,t){const r=a(e),n=a(t)||0;if(\"number\"==typeof r&&\"number\"==typeof n)return Math.floor(r*Math.pow(10,n))/Math.pow(10,n)}function Rt(e,t){const r=a(e),n=a(t)||0;if(\"number\"==typeof r&&\"number\"==typeof n)return Math.ceil(r*Math.pow(10,n))/Math.pow(10,n)}const Tt={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1};function _t(e,t=1,r=0){const n=a(e);let o=a(t);const i=a(r);if(\"number\"==typeof n&&\"number\"==typeof o&&\"number\"==typeof i)return 0===o?0:(o=Math.abs(o),n>=0?Math.ceil(n/o)*o:0===r?-1*Math.floor(Math.abs(n)/o)*o:-1*Math.ceil(Math.abs(n)/o)*o)}const yt=[];function Nt(e){const t=a(e);if(\"number\"==typeof t&&t>-1){const e=Math.floor(t);return 0===e||1===e?1:(yt[e]>0||(yt[e]=Nt(e-1)*e),yt[e])}}function Mt(e,t){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n)return Nt(r)/(Nt(n)*Nt(r-n))}function qt(e,t){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n){const e=Math.abs(n);return r>=0?Math.floor(r/e)*e:-1*Math.ceil(Math.abs(r)/e)*e}}function wt(e,t=10){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n)return Math.log(r)/Math.log(n)}function Et(e,t){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n)return r+Math.ceil((n-r+1)*Math.random())-1}const At=[\"\",\"C\",\"CC\",\"CCC\",\"CD\",\"D\",\"DC\",\"DCC\",\"DCCC\",\"CM\",\"\",\"X\",\"XX\",\"XXX\",\"XL\",\"L\",\"LX\",\"LXX\",\"LXXX\",\"XC\",\"\",\"I\",\"II\",\"III\",\"IV\",\"V\",\"VI\",\"VII\",\"VIII\",\"IX\"];function Ot(e,t,n=\"i\"){const o=a(e),i=a(t);if(\"number\"!=typeof o&&\"number\"!=typeof i)throw r;let u=\"\",s=\"\";return e&&(u=e.toString()),t&&1!==t?s=t+n:1===t&&(s=n),t>0?`${u?`${u}+`:\"\"}${s}`:u+s}function vt(e,t=null){return d(e,t,-512,511,2)}function It(e,t=null){return d(e,t,-274877906944,274877906943,16)}function St(e,t=null){return d(e,t,-536870912,536870911,8)}const Ct=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17];function Dt(e){const t=e<0;let r,n=0,o=0;const i=2/(2+(e=Math.abs(e))),u=4*i-2;for(let e=Ct.length-1;e>0;e--)r=u*n-o+Ct[e],o=n,n=r;const a=i*Math.exp(-e*e+.5*(Ct[0]+u*n)-o);return t?a-1:1-a}function xt(e,r){const n=a(e),o=a(r);if(\"number\"==typeof n)return\"number\"==typeof o?Dt(o)-Dt(n):Dt(n);throw t}function Lt(e){const r=a(e);if(\"number\"==typeof r)return Math.exp(r);throw t}const Pt=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];const Ft=Math.pow(2,39);function Ut(e){if(\"string\"!=typeof e)throw t;if([\"i\",\"+i\",\"1i\",\"+1i\",\"-i\",\"-1i\",\"j\",\"+j\",\"1j\",\"+1j\",\"-j\",\"-1j\"].indexOf(e)>=0)return 0;let n=e.indexOf(\"+\"),o=e.indexOf(\"-\");0===n&&(n=e.indexOf(\"+\",1)),0===o&&(o=e.indexOf(\"-\",1));const i=e.substring(e.length-1,e.length),u=\"i\"===i||\"j\"===i;if(n>=0||o>=0){if(!u)throw r;if(n>=0){if(isNaN(+e.substring(0,n))||isNaN(+e.substring(n+1,e.length-1)))throw r;return Number(e.substring(0,n))}if(isNaN(+e.substring(0,o))||isNaN(+e.substring(o+1,e.length-1)))throw r;return Number(e.substring(0,o))}if(u){if(isNaN(+e.substring(0,e.length-1)))throw r;return 0}if(isNaN(+e))throw r;return+e}function Vt(e){if(\"string\"!=typeof e)throw t;if([\"i\",\"j\"].indexOf(e)>=0)return 1;let n=(e=e.replace(\"+i\",\"+1i\").replace(\"-i\",\"-1i\").replace(\"+j\",\"+1j\").replace(\"-j\",\"-1j\")).indexOf(\"+\"),o=e.indexOf(\"-\");0===n&&(n=e.indexOf(\"+\",1)),0===o&&(o=e.indexOf(\"-\",1));const i=e.substring(e.length-1,e.length),u=\"i\"===i||\"j\"===i;if(n>=0||o>=0){if(!u)throw r;if(n>=0){if(isNaN(+e.substring(0,n))||isNaN(+e.substring(n+1,e.length-1)))throw r;return Number(e.substring(n+1,e.length-1))}if(isNaN(+e.substring(0,o))||isNaN(+e.substring(o+1,e.length-1)))throw r;return-Number(e.substring(o+1,e.length-1))}if(u){const t=+e.substring(0,e.length-1);if(isNaN(t))throw r;return t}if(isNaN(+e))throw r;return 0}function kt(e){const t=+Ut(e),r=+Vt(e);return Ot(Math.cos(t)*Math.cosh(r),-Math.sin(t)*Math.sinh(r))}function $t(e){const t=+Ut(e),r=+Vt(e);return Ot(Math.cos(r)*(Math.exp(t)+Math.exp(-t))/2,Math.sin(r)*(Math.exp(t)-Math.exp(-t))/2)}function Bt(e,t){const r=+Ut(e),n=+Vt(e),o=+Ut(t),i=+Vt(t),u=Math.pow(o,2)+Math.pow(i,2);return Ot((r*o+n*i)/u,(n*o-r*i)/u)}function Ht(e){const t=+Ut(e),r=+Vt(e);return Ot(Math.sin(t)*Math.cosh(r),Math.cos(t)*Math.sinh(r))}function Xt(e){const t=+Ut(e),r=+Vt(e);return Ot(Math.cos(r)*(Math.exp(t)-Math.exp(-t))/2,Math.sin(r)*(Math.exp(t)+Math.exp(-t))/2)}const jt=Math.pow(2,29);function Yt(e,r,n){const o=a(r);if(\"number\"!=typeof o||r<0||r>1||n&&(0===r||1===r))throw t;let i=s(e).sort(((e,t)=>e-t));n&&(i=[0,...i]);const u=(i.length+(n?0:-1))*o,c=Math.floor(u);if(void 0===i[c+1])return i[c];const h=i[c+1]-i[c];return i[c]+h*(u-c)}function Gt(e,n,o){const i=a(n);if(\"number\"!=typeof i)throw t;switch(i){case 0:if(o)throw t;return tt(...e);case 1:return Yt(e,.25,o);case 2:return Yt(e,.5,o);case 3:return Yt(e,.75,o);case 4:if(o)throw t;return et(...e);default:throw r}}function zt(e,t,r,n){const o=f(e),i=f(t),u=f(r);if(1==t)return 1/u;const a=Math.exp(-Math.pow(o/u,i));return n?1-a:i/Math.pow(u,i)*Math.pow(o,i-1)*a}function Wt(e,t,r,n=!1){const o=f(e),i=f(t),u=f(r),a=(e,t,r)=>Mt(t,e)*Math.pow(r,e)*Math.pow(1-r,t-e);if(!n)return a(o,i,u);let s=0;for(let e=0;e<o+1;e++)s+=a(e,i,u);return s}function Kt(t,r,o){const i=t.filter((e=>\"number\"==typeof e)),u=r.filter((e=>\"number\"==typeof e));if(i.length!==u.length)throw n;const a=i.length;if(0===a)throw e;const s=i.reduce(((e,t)=>e+t),0)/a,c=u.reduce(((e,t)=>e+t),0)/a;let h=0;for(let e=0;e<a;e++)h+=(i[e]-s)*(u[e]-c);return h/(o?a-1:a)}function Qt(e,t){return Kt(e,t,!1)}const Jt={ABS:dt,ACOS:function(e){const t=a(e);if(\"number\"==typeof t)return Math.acos(t)},ACOSH:function(e){const t=a(e);if(\"number\"==typeof t)return Math.acosh(t)},ACOT:function(e){const t=a(e);if(\"number\"==typeof t)return Math.atan(1/t)},ACOTH:function(e){const t=a(e);if(\"number\"==typeof t)return.5*Math.log((t+1)/(t-1))},ADD:function(e,t){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n)return r+n},ARABIC:function(e){if(!a(e)&&/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(`${e}`)){let t=0;return`${e}`.replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,(function(e){return t+=Tt[e],e})),+t}},ASIN:function(e){const t=a(e);if(\"number\"==typeof t)return Math.asin(t)},ASINH:function(e){const t=a(e);if(\"number\"==typeof t)return Math.asinh(t)},ATAN:function(e){const t=a(e);if(\"number\"==typeof t)return Math.atan(t)},ATAN2:function(e,t){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n)return Math.atan2(n,r)},ATANH:function(e){const t=a(e);if(\"number\"==typeof t)return Math.log((1+t)/(1-t))/2},AVEDEV:function(...t){const r=s(t).filter((e=>\"number\"==typeof e)),n=r.length;if(0===n)throw e;const o=r.reduce(((e,t)=>e+t),0)/n;return r.reduce(((e,t)=>e+Math.abs(t-o)),0)/n},AVERAGE:Ke,AVERAGEA:Qe,BASE:function(e,t,r=0){const n=a(e),o=a(t),i=a(r);if(\"number\"==typeof n&&\"number\"==typeof o&&\"number\"==typeof i){const e=n.toString(o);return new Array(Math.max(i+1-e.length,0)).join(\"0\")+e.toUpperCase()}},BINOMDIST:Wt,\"BINOM.INV\":function(e,t,r){const n=f(e),o=f(t),i=f(r);for(let e=0;e<=n;e++){if(Wt(e,n,o,!0)>=i)return e}},\"BINOM.DIST.RANGE\":function(e,t,r,n){const o=f(e),i=f(t),u=f(r);let s=a(n);\"number\"!=typeof s&&(s=u);let c=0;for(let e=u;e<=s;e++){c+=Mt(o,e)*Math.pow(i,e)*Math.pow(1-i,o-e)}return c},\"BINOM.DIST\":Wt,BITAND:function(e,r){const n=a(e),o=a(r);if(\"number\"==typeof n&&\"number\"==typeof o)return n&o;throw t},BITLSHIFT:function(e,r){const n=a(e),o=a(r);if(\"number\"==typeof n&&\"number\"==typeof o)return o>0?n<<o:n>>-o;throw t},BITOR:function(e,r){const n=a(e),o=a(r);if(\"number\"==typeof n&&\"number\"==typeof o)return n|o;throw t},BITRSHIFT:function(e,r){const n=a(e),o=a(r);if(\"number\"==typeof n&&\"number\"==typeof o)return o>0?n>>o:n<<-o;throw t},BITXOR:function(e,r){const n=a(e),o=a(r);if(\"number\"==typeof n&&\"number\"==typeof o)return n^o;throw t},CEILING:_t,COMBIN:Mt,COMBINA:function(e,t){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n)return 0===r&&0===n?1:Mt(r+n-1,r-1)},COMPLEX:Ot,CORREL:function(t,r){if(t.length!==r.length)throw n;const o=t.filter((e=>\"number\"==typeof e)),i=r.filter((e=>\"number\"==typeof e)),u=o.length,a=o.reduce(((e,t)=>e+t),0)/u,s=i.reduce(((e,t)=>e+t),0)/u;let c=0,h=0,l=0;for(let e=0;e<u;e++)c+=(o[e]-a)*(i[e]-s),h+=Math.pow(o[e]-a,2),l+=Math.pow(i[e]-s,2);const f=Math.sqrt(h*l);if(!f)throw e;return c/f},COS:function(e){const t=a(e);if(\"number\"==typeof t)return Math.cos(t)},COSH:function(e){const t=a(e);if(\"number\"==typeof t)return Math.cosh(t)},COT:function(e){const t=a(e);if(\"number\"==typeof t)return 1/Math.tan(t)},COTH:function(e){const t=a(e);if(\"number\"==typeof t){const e=Math.exp(2*t);return(e+1)/(e-1)}},COUNT:Je,COUNTA:Ze,COUNTBLANK:function(...e){let t=0;const r=s(e);for(let e=0;e<r.length;e++)0===r[e]||r[e]||t++;return t},COVAR:Qt,\"COVARIANCE.P\":Qt,\"COVARIANCE.S\":function(e,t){return Kt(e,t,!0)},CSC:function(e){const t=a(e);if(\"number\"==typeof t)return 1/Math.sin(t)},CSCH:function(e){const t=a(e);if(\"number\"==typeof t)return 2/(Math.exp(t)-Math.exp(-t))},DEC2BIN:vt,DEC2HEX:It,DEC2OCT:St,DECIMAL:function(e,t){const r=a(e),n=a(t);if(!`${r}`.match(\"/[2-9]/\")&&\"number\"==typeof r&&\"number\"==typeof n&&n>1&&n<37)return parseInt(`${r}`,n)},DEGREES:function(e){const t=a(e);if(\"number\"==typeof t)return 180*t/Math.PI},DELTA:function(e,r){const n=a(e),o=a(r);if(\"number\"==typeof n||\"number\"==typeof n)return+(n===o);throw t},DEVSQ:function(...e){const t=s(e),r=[];t.forEach((e=>{\"number\"==typeof e&&r.push(e)}));const n=r.reduce(((e,t)=>e+t),0)/r.length;return r.reduce(((e,t)=>e+Math.pow(t-n,2)),0)},DIVIDE:function(e,t){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n&&0!==n)return r/n},EQ:function(e,t){return typeof e==typeof t&&e==t},ERF:xt,ERFC:function(e,r){const n=a(e);if(\"number\"==typeof n)return 1-xt(n,r);throw t},EVEN:function(e){const t=a(e);if(\"number\"==typeof t){const e=ze(t);return e%2?e+Math.sign(t):e}},EXP:Lt,FACT:Nt,FACTDOUBLE:function e(t){const r=a(t);if(\"number\"==typeof r){const t=Math.floor(r);return t<=0?1:t*e(t-2)}},FISHER:function(e){const r=a(e);if(\"number\"==typeof r&&r>-1&&r<1)return.5*Math.log((1+r)/(1-r));throw t},FISHERINV:function(e){const r=a(e);if(\"number\"==typeof r){const e=Math.exp(2*r);return(e-1)/(e+1)}throw t},FLOOR:qt,GAMMA:function e(n){let o=a(n);if(\"number\"!=typeof o)throw t;if(!(Number.isInteger(o)&&o<=0)){if(o<.5)return Math.PI/(Math.sin(Math.PI*o)*e(1-o));{o-=1;let e=Pt[0];for(let t=1;t<9;t++)e+=Pt[t]/(o+t);const t=o+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(t,o+.5)*Math.exp(-t)*e}}throw r},GCD:function(...e){const t=s(e),r=t.length;if(!r)return 1;let n=t[0],o=1;for(;\"number\"!=typeof n;){if(n=t[o],o>t.length)throw\"The arguments should contain at least one numeric value\";o++}let i=n<0?-n:n;for(;o<r;o++){const e=a(t[o]);if(\"number\"==typeof e){let t=e<0?-e:e;for(;i&&t;)i>t?i%=t:t%=i;i+=t}}return i},GEOMEAN:function(...e){const t=s(e);if(t.some((e=>!Number.isFinite(e)||e<=0)))throw r;return Math.pow(t.reduce(((e,t)=>t*e),1),1/t.length)},GESTEP:function(e,r=0){const n=a(e),o=a(r);if(\"number\"==typeof n&&\"number\"==typeof o)return+(e>=r);throw t},GT:function(e,t){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n)return r>n},GTE:function(e,t){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n)return r>=n},HARMEAN:function(...e){const t=s(e);if(t.some((e=>!Number.isFinite(e)||e<=0)))throw r;const n=t.reduce(((e,t)=>e+1/t),0);return 1/(1/t.length*n)},HEX2BIN:function(e,t){return vt(parseInt(e.toString(),16),t)},HEX2DEC:function(e,r){let n=parseInt(e.toString(),16);if(!Number.isFinite(n))throw t;const o=n>Ft;o&&(n=-(n-2*Ft));const i=r?a(r):null,u=n.toString();return(o?\"-\":\"\")+(i?u.padStart(i,\"0\"):u)},HEX2OCT:function(e,t=null){let r=parseInt(e.toString(),16);return r>Ft&&(r^=Ft),St(r,t)},IMABS:function(e){const r=Ut(e),n=Vt(e);if(!Number.isFinite(+r)||!Number.isFinite(+n))throw t;return Math.sqrt(Math.pow(+r,2)+Math.pow(+n,2))},IMAGINARY:Vt,IMCONJUGATE:function(e){return Ot(+Ut(e),-+Vt(e))},IMCOS:kt,IMCOSH:$t,IMCOT:function(e){return Bt(kt(e),Ht(e))},IMCSC:function(e){return Bt(\"1\",Ht(e))},IMCSCH:function(e){return Bt(\"1\",Xt(e))},IMDIV:Bt,IMEXP:function(e){const t=+Ut(e),r=+Vt(e),n=Math.exp(t);return Ot(n*Math.cos(r),n*Math.sin(t))},IMLN:function(e){const t=+Ut(e),r=+Vt(e);return Ot(Math.log(Math.sqrt(t*t+r*r)),Math.atan(r/t))},IMPOWER:function(e,r){const n=a(r);if(\"number\"!=typeof n)throw t;const o=+Ut(e),i=+Vt(e),u=Math.sqrt(o*o+i*i),s=Math.pow(u,n),c=Math.atan(i/o);return Ot(s*Math.cos(n*c),s*Math.sin(n*c))},IMPRODUCT:function(...e){if(0===e.length)throw t;let r=e[0];for(const t of e.slice(1))r=je(r.toString(),t.toString());return r.toString()},IMREAL:Ut,IMSEC:function(e){return Bt(\"1\",kt(e))},IMSECH:function(e){return Bt(\"1\",$t(e))},IMSIN:Ht,IMSINH:Xt,IMSQRT:function(e){const t=+Ut(e),r=+Vt(e),n=Math.sqrt(Math.sqrt(t*t+r*r)),o=Math.atan(r/t)/2;return Ot(n*Math.cos(o),n*Math.sin(o))},IMSUB:function(e,t){const r=+Ut(e),n=+Vt(e);return Ot(r-+Ut(t),n-+Vt(t))},IMSUM:function(...e){if(0===e.length)throw t;let r=e[0];for(const t of e.slice(1))r=Ye(r.toString(),t.toString());return r.toString()},IMTAN:function(e){return Bt(Ht(e),kt(e))},INT:pt,LARGE:function(e,r){const n=a(r),o=e.sort(((e,t)=>e-t));if(\"number\"==typeof n&&!e.some((e=>\"number\"!=typeof a(e))))return o[o.length-n];throw t},LN:function(e){const t=a(e);if(\"number\"==typeof t)return Math.log(t)},LOG:wt,LOG10:function(e){const t=a(e);if(\"number\"==typeof t)return Math.log(t)/Math.log(10)},LT:function(e,t){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n)return r<n},LTE:function(e,t){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n)return r<=n},MAX:et,MEDIAN:function(...e){const t=s(e);t.sort((function(e,t){return e-t}));const r=Math.floor(t.length/2);return t.length%2?t[r]:(t[r-1]+t[r])/2},MIN:tt,MINUS:function(e,t){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n)return r-n},MOD:function(e,t){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n&&0!==n){const e=Math.abs(r%n);return t>0?e:-e}},MROUND:function(e,t){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n&&r*n>-1)return Math.round(r/n)*n},MULTINOMIAL:function(...e){const t=s(e);let r=0,n=1;for(let e=0;e<t.length;e++){const o=a(t[e]);\"number\"==typeof o&&(r+=o,n*=Nt(t[e]))}return Nt(r)/n},MULTIPLY:function(e,t){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n)return r*n},NE:function(e,t){return typeof e!=typeof t||e!=t},OCT2BIN:function(e,t=null){let r=parseInt(e.toString(),8);return r&jt&&(r=-(2*jt-r)),vt(r,t)},OCT2DEC:function(e,r=null){const n=r?a(r):null;let o=parseInt(e.toString(),8);if(o&jt&&(o=-(2*jt-o)),!Number.isFinite(o)||\"boolean\"==typeof n)throw t;return o.toString().padStart(n||0,\"0\")},OCT2HEX:function(e,t=null){let r=parseInt(e.toString(),8);return r&jt&&(r=-(2*jt-r)),It(r,t)},ODD:function(e){const t=a(e);if(\"number\"==typeof t){const e=ze(t);return e%2?e:e+Math.sign(t)}},PERCENTILE:Yt,\"PERCENTILE.INC\":Yt,\"PERCENTILE.EXC\":function(e,t){return Yt(e,t,!0)},PERMUT:function(e,r){const n=a(e),o=a(r);if(\"number\"==typeof n&&\"number\"==typeof o)return Nt(n)/Nt(n-o);throw t},PI:function(){return Math.PI},POW:function(e,t){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n)return lt(e,t)},POWER:lt,PRODUCT:rt,QUARTILE:Gt,\"QUARTILE.INC\":Gt,\"QUARTILE.EXC\":function(e,t){return Gt(e,t,!0)},QUOTIENT:function(e,t){const r=a(e),n=a(t);if(\"number\"==typeof r&&\"number\"==typeof n)return Ge(r/n)},RADIANS:function(e){const t=a(e);if(\"number\"==typeof t)return t*Math.PI/180},RAND:mt,RANDBETWEEN:Et,ROMAN:function(e){const t=a(e);if(\"number\"==typeof t){const e=String(t).split(\"\");let r=\"\",n=3;for(;n--;)r=(At[+e.pop()+10*n]||\"\")+r;return new Array(+e.join(\"\")+1).join(\"M\")+r}},ROUND:gt,ROUNDDOWN:bt,ROUNDUP:Rt,SEC:function(e){const t=a(e);if(\"number\"==typeof t)return 1/Math.cos(t)},SECH:function(e){const t=a(e);if(\"number\"==typeof t)return 2/(Math.exp(t)+Math.exp(-t))},SIGN:function(e){const r=a(e);if(\"number\"==typeof r)return 0===r?0:r/Math.abs(r);throw t},SIN:function(e){const t=a(e);if(\"number\"==typeof t)return Math.sin(t)},SINH:function(e){const t=a(e);if(\"number\"==typeof t)return Math.sinh(t)},SMALL:function(e,r){const n=a(r),o=e.sort(((e,t)=>e-t));if(\"number\"==typeof n&&!e.some((e=>\"number\"!=typeof a(e))))return o[n-1];throw t},SQRT:ft,SQRTPI:function(e){const t=a(e);if(\"number\"==typeof t&&t>-1)return Math.sqrt(t*Math.PI)},STDEV:ct,\"STDEV.S\":ct,\"STDEV.P\":ht,STDEVA:function(...e){return Math.sqrt(ut(...e))},STDEVP:ht,STDEVPA:function(...e){return Math.sqrt(st(...e))},STEYX:function(t,r){if(t.length!==r.length)throw n;const o=t.filter((e=>\"number\"==typeof e)),i=r.filter((e=>\"number\"==typeof e)),u=o.length;if(2===u)throw e;const a=o.reduce(((e,t)=>e+t),0)/u,s=i.reduce(((e,t)=>e+t),0)/u;let c=0,h=0,l=0;for(let e=0;e<u;e++)c+=(o[e]-a)*(i[e]-s),h+=Math.pow(o[e]-a,2),l+=Math.pow(i[e]-s,2);if(2===l)throw e;return Math.sqrt((h-Math.pow(c,2)/l)/(u-2))},SUBTOTAL:function(e,...t){const r=a(e),n=s(t);if(\"number\"==typeof r)switch(r){case 1:case 101:return Ke(...n);case 102:case 2:return Je(...n);case 103:case 3:return Ze(...n);case 104:case 4:return et(...n);case 105:case 5:return tt(...n);case 106:case 6:return rt(...n);case 107:case 7:case 110:case 10:return;case 108:case 8:return ht(...n);case 109:case 9:return We(...n);case 111:case 11:return at(...n)}},SUM:We,SUMPRODUCT:nt,SUMSQ:function(...e){let t=0;const r=s(e);for(let e=0;e<r.length;e++){const n=a(r[e]);\"number\"==typeof n&&(t+=Math.pow(n,2))}return t},SUMX2MY2:function(e,t){if(!e.find((e=>\"number\"!=typeof a(e)))&&!t.find((e=>\"number\"!=typeof a(e)))){let r=0;for(let n=0;n<e.length;n++)r+=e[n]*e[n]-t[n]*t[n];return r}},SUMX2PY2:function(e,t){if(!e.find((e=>\"number\"!=typeof a(e)))&&!t.find((e=>\"number\"!=typeof a(e)))){let r=0;for(let n=0;n<e.length;n++)r+=e[n]*e[n]+t[n]*t[n];return r}},SUMXMY2:function(e,t){if(!e.find((e=>\"number\"!=typeof a(e)))&&!t.find((e=>\"number\"!=typeof a(e)))){let r=0;for(let n=0;n<e.length;n++)r+=Math.pow(e[n]-t[n],2);return r}},TAN:function(e){const t=a(e);if(\"number\"==typeof t)return Math.tan(t)},TANH:function(e){const t=a(e);if(\"number\"==typeof t)return Math.tanh(t)},TRUNC:function(e){const t=a(e);if(\"number\"==typeof t)return Ge(t)},VAR:it,\"VAR.S\":it,\"VAR.P\":at,VARA:ut,VARP:at,VARPA:st,WEIBULL:zt,\"WEIBULL.DIST\":zt};function Zt(e){return void 0===e?null:e}function er(e,t,r,n){void 0===r&&(r=0);let o=-1;if(0===r)o=t.indexOf(e);else{let n=\"string\"==typeof e?\"\":-1/0*r;1===r?t.forEach(((t,r)=>{t<=e&&t>n&&(n=t,o=r)})):-1===r&&t.forEach(((t,r)=>{t>=e&&t<n&&(n=t,o=r)}))}return o+1}const tr={LOOKUP:function(e,t,r){const n=er(e,t,1);if(0===n)throw\"#N/A\";return(r||t)[n-1]},HLOOKUP:function(e,t,r,n){let o=!0;void 0!==n&&(o=h(n));const i=t.$width?t.$width:t.length,u=er(e,t.slice(0,i),o?1:0);if(0===u)throw\"#N/A\";return Zt(t[i*((r||1)-1)+u-1])},VLOOKUP:function(e,t,r,n){let o=!0;void 0!==n&&(o=h(n));const i=t.$width?t.$width:1,u=t.length/i;let a;if(1===u)a=t;else{a=[];for(let e=0;e<u;e++)a.push(t[i*e])}const s=r,c=er(e,a,o?1:0);if(0===c)throw\"#N/A\";return Zt(t[i*(c-1)+(s||1)-1])},XLOOKUP:function(e,t,r,n,o,i){const u=er(e,t,o);if(0===u){if(void 0!==n)return n;throw\"#N/A\"}return(r||t)[u-1]},INDEX:function(e,t,r){const n=t,o=r;return Zt(e[(e.$width?e.$width:1)*(n-1)+(o||1)-1])},MATCH:function(e,t,r){let n=r;void 0===r&&(n=1);const o=er(e,t,n);if(0===o)throw\"#N/A\";return o},XMATCH:function(e,t,r,n){const o=er(e,t,r);if(0===o)throw\"#N/A\";return o},CHOOSE:function(e,...t){let r=a(e);if(t.length>1&&\"number\"==typeof r){if(t.length<r)throw\"the index number is greater than the length of the array of values\";if(r<=0)throw\"index cannot be less than or equal to 0\";return r--,t[r]}}};var rr=Object.freeze({__proto__:null,IF:function(e,t,r){return e?t:r},AND:function(...e){for(let t=0;t<e.length;t++)if(!h(e[t]))return!1;return!0},NOT:function(e){return!h(e)},OR:function(...e){for(let t=0;t<e.length;t++)if(e[t])return!0;return!1},FALSE:function(){return!1},TRUE:function(){return!0}});var nr=Object.freeze({__proto__:null,ISBLANK:function(e){return c(e)},ISBINARY:function(e){return/^[01]{1,10}$/.test(`${e}`)},ISEVEN:function(e){const t=a(e);return\"number\"==typeof t&&t%2==0},ISODD:function(e){const t=a(e);return\"number\"==typeof t&&t%2!=0},ISNONTEXT:function(e){return\"string\"!=typeof e},ISNUMBER:function(e){return\"number\"==typeof a(e)},ISTEXT:function(e){return\"string\"==typeof e},N:function(e){const t=a(e);if(\"number\"==typeof t)return t;const r=new Date(e);return r.getTime()?u(r):\"TRUE\"===e||!0===e?1:0}});const or={SUM:We,AVERAGE:Ke,AVERAGEA:Qe,COUNT:Je,COUNTA:Ze,MIN:tt,MAX:et,SQRT:ft,POWER:lt,LOG:wt,EXP:Lt,PRODUCT:rt,SUMPRODUCT:nt,ABS:dt,RAND:mt,RANDBETWEEN:Et,ROUND:gt,ROUNDUP:Rt,ROUNDDOWN:bt,INT:pt,CEILING:_t,FLOOR:qt},ir={CONCATENATE:m,MID:g,LEFT:p,RIGHT:b,LOWER:R,UPPER:T,PROPER:_,TRIM:y,LEN:N,SEARCH:w,FIND:q,REPLACE:A,SUBSTITUTE:E,NOW:k},ur={DATE:C,TIME:D,YEAR:P,MONTH:L,DAY:x,HOUR:F,MINUTE:U,SECOND:V,DATEDIF:$},ar=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},or),ir),ur),tr),nr),rr),sr=Object.assign({},ar),cr=()=>Object.keys(sr);function hr(e,t){sr[e]=t}function lr(e){Object.assign(sr,e)}function fr(e){const t=[];return ke(t,e,0),t[1]}function dr(e){const t=[];return ke(t,e,0),_e(t[1]).slice(0,2)}function mr(e){const t=[];e.split(\":\").map((e=>ke(t,e,0)));const[r,n]=_e(t[1]),[o,i]=_e(t[4]);return[r,n,o,i]}function pr(e,t,r,n,o,i){const[u,a,s]=_e(e),[c,h,l]=_e(n);return s===l&&(!(u>=c+o)&&(!(u+t<=c)&&(!(a>=h+i)&&!(a+r<=h))))}Object.assign({},or),Object.assign({},ir),Object.assign({},ur);const gr=Math.pow(10,8);function br(e,t,r){r.add?e.has(t)||r.add(t):e.add(t)}function Rr(e){if(e.keys)return Array.from(e.keys());const t=[];return e.forEach(((e,r)=>t.push(r))),t}function Tr(e){if(e.values)return e.values();const t=[];e.forEach(((e,r)=>t.push(r)));let r=0;return{add:e=>{t.push(e)},next:()=>{const e=t[r];return r++,{done:r>t.length,value:e}}}}class _r{constructor(e){(e=e||{get:null,set:null,strict:!1})&&(this._getter=e.get,this._setter=e.set,this._strict=e.strict),this._parser=$e,this._printer=Xe,this._parseContext={name:function(){},pageName:()=>\"\",pageObj:()=>null,page:function(){return 0},z:0},this.$count=0,this._data=new Map,this._triggers=new Map,this._holders={},this._context={a:(e,t,r)=>(e.$width=t,e.$height=r,e),v:e=>{if(-1===e)throw new Error;const t=this._getter(e);return void 0===t?null:t},r:(e,t)=>{const[r,n]=_e(e),[o,i]=_e(t),u=o-r,a=i-n+1,s=[];s.$width=a,s.$height=u+1;for(let t=0;t<=u;t++)for(let r=0;r<a;r++)s[t*a+r]=this._getter(e+64*r+4096*t*64);return s},m:sr,e:e=>{throw e},p:e=>this.getPlaceholder(e)}}getTriggerList(e){return this._triggers.get(e)}setValue(e,t,r,n){\"\"===t&&(t=null),this._removeTriggers(e,null),this._setter(e,t,r)&&(n||this.trigger(e))}clean(e){this._removeTriggers(e,null)}getValue(e){return this._getter(e)}getMeta(){return this._meta}setMeta(e){this._meta=Object.assign(Object.assign({},this._meta),e)}setPlaceholder(e,t){\"*\"===e?Object.entries(t).forEach((e=>this.setPlaceholder(e[0],e[1]))):(null===t?delete this._holders[e]:this._holders[e]=t,this.each(((t,r)=>{(function(e,t,r){for(let n=0;n<e.length;n+=3)if(2===e[n]&&t.substr(e[n+1],e[n+2])==r)return!0;return!1})(r.code,r.source,e)&&this.setMath(t,r.source,this._parseContext)})))}getPlaceholder(e){if(\"*\"===e)return this._holders;const t=this._holders[e];return void 0===t?null:t}setMath(e,t,r,n){const o=this._generate(t,r),i=this._setMathAt(e,o);n||this._execAndTrigger(i)}refresh(e){this._execAndTrigger(e)}getMath(e){return this._data.get(e)}trigger(e,t){const r=this._triggers.get(e);if(r){const e=!t;t||(t=new Set);for(let e=0;e<r.length;e++)t.add(r[e]);e&&this.triggerSet(t)}return null}triggerSet(e){const t=new Map;for(;e.size;){const r=Tr(e);let n=!1;e:for(let o=r.next();!o.done;o=r.next()){const r=this._data.get(o.value);let i=t.get(o.value);if(i&&(1==i&&(i=this._check_for_loops(o.value,r.triggers,t)),2==i))continue;const u=r.triggers;if(u)for(let t=0;t<u.length;t++)if(e.has(u[t]))continue e;this._execAndTrigger(o.value,e),i||t.set(o.value,1),e.delete(o.value),n=!0}if(!n)return void e.forEach((t=>this._errorAndTrigger(t,e)))}}getStats(){return{math:this._data.size,trigger:this._triggers.size}}_check_for_loops(e,t,r){const n=new Set;t.forEach((e=>n.add(e)));const o=Tr(n);for(let t=o.next();!t.done;t=o.next()){if(t.value==e)return r.set(e,2),2;const i=r.get(t.value);if(i&&i>1)return r.set(e,i),i;const u=this._data.get(t.value);u&&u.triggers&&u.triggers.forEach((e=>br(n,e,o)))}return r.set(e,3),3}_setMathAt(e,t){if(this._removeTriggers(e,t)){if(t.triggers)if(-1===t.triggers.indexOf(e)&&3!==t.broken)for(let r=0;r<t.triggers.length;r++){const n=t.triggers[r];let o=this._triggers.get(n);void 0===o&&(o=[],this._triggers.set(n,o)),o.push(e)}else t=Object.assign(Object.assign({},t),{broken:3});return this._data.set(e,t),e}}_removeTriggers(e,t){const r=this._data.get(e);if(!r)return!0;if(r===t)return!1;r.$width&&this._clearArea(e,!1);const n=r.triggers;if(n&&3!==r.broken)for(let t=0;t<n.length;t++){const r=n[t],o=this._triggers.get(r);if(o){const t=o.filter((t=>t!==e));t.length?this._triggers.set(r,t):this._triggers.delete(r)}}return this._data.delete(e),!0}parse(e,t){return this._parser(e,t||this._parseContext)}exec(e,t){const r=this._generate(e,t);return this._exec(r)}each(e){Rr(this._data).forEach((t=>e(t,this._data.get(t))))}setLogger(e){this._err_handler=e}_setErr(e,t){return e.broken=2,t&&this._err_handler&&this._err_handler(t),le[e.broken]}_exec(e){if(e.broken>0&&2!==e.broken)return le[e.broken];try{const t=e.exec(this._context);return e.broken=0,\"number\"==typeof t?isFinite(t)?Math.round(t*gr)/gr:this._setErr(e):t}catch(t){return this._setErr(e,t)}}toString(e,t){return Ee(e,t||this._parseContext)}regenerate(e,t,r){r=Object.assign({},r||this._parseContext),Rr(this._data).forEach((n=>{let o=!1;const i=this._data.get(n),u=Me(n);if(t&&u===e)this._removeTriggers(n,null);else{for(let t=0;t<i.code.length;t+=3)if(9===i.code[t]&&Me(i.code[t+1])===e){o=!0;break}o&&(r.z=u,t?this.setMath(n,i.source,r):(i.source=Ee(i,r),i.code=this._parser(i.source,r).code))}}))}recalculate(e,t){t=Object.assign({},t||this._parseContext);const r=new Set;this.each((n=>{if(e){const e=this._data.get(n);if(e.broken&&2!==e.broken)return t.z=Me(n),void this.setMath(n,e.source,t)}r.add(n)})),this.triggerSet(r)}_generate(e,t,r){const n=r||this._parser(e,t||this._parseContext);return this._printer(n,this._strict),n.triggers=function(e){let t=[];const r=e.code,n=r.length;for(let e=0;e<n;e+=3){switch(r[e]){case 7:case 6:{const n=r[e+4];t.push(n);break}case 8:qe(r[e+4],r[e+7],(e=>t.push(e)))}}if(t.length>10){const e=new Set;t=t.filter((t=>!e.has(t)&&(e.add(t),!0)))}return t.length?t:null}(n),n}_execAndTrigger(e,t){this.$count+=1;const r=this._data.get(e);if(r){const n=this._exec(r);if(Array.isArray(n)){if(63!==Me(e))return void this._complexSetter(e,n,t)}this._setter(e,n,2)&&this.trigger(e,t)}}_complexSetter(e,t,r){const{$width:n,$height:o}=t,i=this._data.get(e);i.$width=n,i.$height=o;try{we(e,n,o,((n,o)=>{this._setter(n,t[o],2,0===o?null:e)&&this.trigger(n,r)}))}catch(t){this._clearArea(e,!0)}}_clearArea(e,t){const{$width:r,$height:n}=this._data.get(e);we(e,r,n,((r,n)=>{if(0===n&&t)this._setter(r,le[4],1)&&this.trigger(r);else{(t?this._setter(r,null,3,e):this._setter(r,null,3,-1))&&this.trigger(r)}}))}_errorAndTrigger(e,t){const r=this._data.get(e),n=this._setErr(r);this._setter(e,n,2)&&this.trigger(e,t)}debug(e,t=!1){const r=function(e){const t=e.code,r=e.source;let n=\"\";const o=t.length;for(let e=0;e<o;e+=3){const o=t[e];let i;switch(o){case 4:i=\"method\";break;case 1:i=\"text\";break;case 5:i=\"page\";break;case 2:i=\"holder\";break;case 6:i=\"name\";break;case 7:i=\"arg\";break;case 8:i=\"range\";break;case 9:i=\"data\";break;case 10:i=\"op\";break;case 11:i=\"number\";break;case 3:i=\"error\";break;case 12:i=\"extra\";break;case 13:i=\"arr\"}n+=9===o?`            ${t[e+1]}.${t[e+2]}\\n`:13===o?`[${i}]${Be(i)}${t[e+1]} x ${t[e+2]}\\n`:`[${i}]${Be(i)}${r.substr(t[e+1],t[e+2])}\\n`}return n}(this.parse(e));if(t)return r;console.log(r)}transpose(e,t,r,n){n=n||this._parseContext;const[o,i,u]=_e(e),a=new Map,s=new Map,c=new Set;Rr(this._data).forEach((e=>{const[h,l,f]=_e(e),d=this._data.get(e),m=f===n.z?n:Object.assign(Object.assign({},n),{z:f}),p=this._transpose(d,o,i,t,r,n,m);let g=e;if(f===u&&(l>=i||h>=o)&&(g=Te(h>=o?h+t:h,l>=i?l+r:l,f)),d!==p||e!==g){if(s.set(e,p),f===u&&(r<0&&l>=i&&l<i-r||t<0&&h>=o&&h<o-t))return;a.set(g,p),d.broken!==p.broken&&c.add(g)}})),Rr(a).forEach((e=>this._setMathAt(e,a.get(e)))),Array.from(s.keys()).forEach((e=>{a.has(e)||this._removeTriggers(e,null)})),t>0&&this._triggerRow(o,t,c),r>0&&this._triggerColumn(i,r,c),t<0&&this._triggerColumn(o-1,2,c),r<0&&this._triggerColumn(i-1,2,c),this.triggerSet(c)}_triggerColumn(e,t,r){const n=t?e+t:e;Rr(this._triggers).forEach((t=>{const o=Ne(t);o>=e&&o<n&&this.trigger(t,r)}))}_triggerRow(e,t,r){const n=t?e+t:e;Rr(this._triggers).forEach((t=>{const o=ye(t);o>=e&&o<n&&this.trigger(t,r)}))}moveMath(e,t,r,n,o,i,u){\"string\"==typeof e&&(e=this.parse(e,i));return this._moveMath(e,t,r,n,o,u||i).source}_moveMath(e,t,r,n,o,i){const u=e.code;for(let e=0;e<u.length;e+=3)if(7===u[e]){let[i,a]=_e(u[e+4]);pr(o.id,o.h,o.w,u[e+4],1,1)&&(i+=t,a+=r,u[e+4]=Te(i,a,n)),e+=3}else if(8===u[e]){let[i,a]=_e(u[e+4]),[s,c]=_e(u[e+7]);pr(o.id,o.h,o.w,u[e+4],s-i+1,c-a+1)&&(i+=t,a+=r,s+=t,c+=r,u[e+4]=Te(i,a,n),u[e+7]=Te(s,c,n)),e+=6}let a={code:u,broken:e.broken,source:e.source,triggers:null,exec:null};return a=this._parser(Ee(a,i),i),this._generate(a.source,i,a)}transposeMath(e,t,r,n){\"string\"==typeof e&&(e=this.parse(e,n)),n=n||this._parseContext;return this._transpose(e,-1,-1,t,r,n,n).source}_transpose(e,t,r,n,o,i,u){let a=!0,s=e.code;const c=!(t<0||r<0);for(let e=0;e<s.length;e+=3)if(7===s[e]){let[u,h,l]=_e(s[e+4]);if(i.z!==l)continue;const f=s[e+5];if(!c&&3==f)continue;(c||0==(1&f))&&0!==n&&u>=t&&(a&&(s=[].concat(s),a=!1),u+=n,(u<t||u<0)&&(s[e]=3)),(c||0==(2&f))&&0!==o&&h>=r&&(a&&(s=[].concat(s),a=!1),h+=o,(h<r||h<0)&&(s[e]=3)),a||(s[e+4]=Te(u,h,l)),e+=3}else if(8===s[e]){const u=s[e+5],h=s[e+8];if(!c&&3===u&&3===h)continue;let[l,f,d]=_e(s[e+4]),[m,p]=_e(s[e+7]);if(i.z!==d)continue;0!==n&&((c||0==(1&u))&&(n>0?l>=t:l>t)&&(a&&(s=[].concat(s),a=!1),l+=n,l<0&&(s[e]=3)),(c||0==(1&h))&&m>=t&&(a&&(s=[].concat(s),a=!1),m+=n,m<l&&(s[e]=3))),0!==o&&((c||0==(2&u))&&(o>0?f>=r:f>r)&&(a&&(s=[].concat(s),a=!1),f+=o,f<0&&(s[e]=3)),(c||0==(2&h))&&p>=r&&(a&&(s=[].concat(s),a=!1),p+=o,p<f&&(s[e]=3))),a||(s[e+4]=Te(l,f,d),s[e+7]=Te(m,p,d)),e+=6}if(a)return e;let h={code:s,broken:e.broken,source:e.source,triggers:null,exec:null};return h=this._parser(Ee(h,u),u),this._generate(h.source,u,h)}}class yr{constructor(e,t,r){this._id=e,this._store=t,this._meta={},this._parseContext=Object.assign(Object.assign({},r),{z:e}),this.reset(),this._parseMode=!1}reset(){this._data=[],this._rows=[],this._cols=[],this._spans=[]}getMeta(){return this._meta}setMeta(e){this._meta=Object.assign(Object.assign({},this._meta),e)}getID(){return this._id}cellID(e,t){return Te(e,t,this._id)}getSize(){const e=this._data.length;let t=0;return this._data.forEach((e=>{e&&e.length>t&&(t=e.length)})),[e,t]}getContext(){return this._parseContext}addRow(e,t){this._data.splice.apply(this._data,Nr(e,t)),this._store.transpose(Te(e,0,this._id),t,0,this._parseContext),this._rows.splice.apply(this._rows,Nr(e,t)),this._recalculateSpans(e,t,0)}removeRow(e,t){return this._data.splice(e,t),this._store.transpose(Te(e,0,this._id),-t,0,this._parseContext),this._rows.splice(e,t),this._recalculateSpans(e,-t,0)}addColumn(e,t){const r=Nr(e,t);this._data.forEach((e=>{e&&e.splice.apply(e,r)})),this._store.transpose(Te(0,e,this._id),0,t,this._parseContext),this._cols.splice.apply(this._cols,Nr(e,t)),this._recalculateSpans(e,0,t)}removeColumn(e,t){this._data.forEach((r=>{r&&r.splice(e,t)})),this._store.transpose(Te(0,e,this._id),0,-t,this._parseContext),this._cols.splice(e,t),this._recalculateSpans(e,0,-t)}setCell(e,t,r){let n=this._data[e];n||(n=this._data[e]=[]);const o=n[t];n[t]=o?Object.assign(Object.assign(Object.assign({},o),r),{value:o.value}):r,void 0!==r.value&&this.setValue(e,t,r.value)}clearCell(e,t){const r=this._data[e];r&&r[t]&&(r[t]=null,this._store.setValue(Te(e,t,this._id),\"\"))}setValue(e,t,r,n){const o=Te(e,t,this._id);\"string\"==typeof r&&r.length>1&&\"=\"===r[0]?this._store.setMath(o,r.substr(1),this._parseContext):this._store.setValue(o,r,n)}getCell(e,t,r){let n=this._data[e],o=n?n[t]:null;return o||!r||(n||(n=this._data[e]=[]),o=n[t],o||(o=n[t]={value:null})),o}getValue(e,t,r){if(r){const r=this._store.getMath(Te(e,t,this._id));if(r)return\"=\"+r.source}const n=this.getCell(e,t,!1);return n?n.value:null}getRange(e,t,r,n){const o=[];for(let i=e;i<=r;i++)for(let e=t;e<=n;e++)o.push(this.getValue(i,e,!1));return o}getCellRange(e,t,r,n){const o=[];for(let i=e;i<=r;i++)for(let e=t;e<=n;e++)o.push(this.getCell(i,e));return o}eachCell(e){this._data.forEach(((t,r)=>{t&&t.forEach(((t,n)=>{t&&e(r,n,t)}))}))}serialize(e){const t=[];return this.eachCell(((r,n,o)=>{if(o=Object.assign({},o),e){const e=this._store.getMath(Te(r,n,this.getID()));e&&(o.value=\"=\"+e.source)}t.push([r,n,o])})),t}parse(e,t){this.reset(),this._store.each((e=>{Me(e)===this._id&&this._store.clean(e)})),this.parseBlock(e,t,!0)}parseBlock(e,t,r){const n=new Set;this._parseMode=!0,e.forEach((([e,o,i])=>{const u=Te(e,o,this._id);r||this._store.clean(u);let a=this._data[e];a||(a=this._data[e]=[]);const s=(i=a[o]=Object.assign({},i)).value;if(s)if(\"string\"==typeof s&&s.length>1&&\"=\"===s[0]){const e=s.substr(1);this._store.setMath(u,e,this.getContext(),!0),n.add(u)}else t&&(i.value=null,this._store.setValue(u,s,null,!0),this._store.trigger(u,n))})),this._store.triggerSet(n),this._parseMode=!1}throwError(e){if(!this._parseMode)throw e}setRowMeta(e,t){const r=this._rows[e]||{};this._rows[e]=r?Object.assign(Object.assign({},r),t):t}getRowMeta(e,t){const r=this._rows[e];if(t&&!r){const t={};return this._rows[e]=t,t}return r||null}setColumnMeta(e,t){const r=this._cols[e]||{};this._cols[e]=r?Object.assign(Object.assign({},r),t):t}getColumnMeta(e,t){const r=this._cols[e];if(t&&!r){const t={};return this._cols[e]=t,t}return r||null}sort(e,t,r=0,n=\"asc\"){const[o,i]=_e(e),[u,a]=_e(t),s=\"asc\"===n,c=[],h=[];for(let e=o;e<=u;e++){const t=[];for(let r=i;r<=a;r++){const n=this._store.getMath(this.cellID(e,r));t.push({value:this.getValue(e,r),row:e,math:n||null})}c.push(t)}c.sort(((e,t)=>{const n=e[r].value,o=t[r].value;return\"string\"==typeof n&&\"string\"==typeof o||\"number\"==typeof n&&\"number\"==typeof o?n<o?s?-1:1:n>o?s?1:-1:0:\"number\"==typeof n?-1:1}));for(let e=o;e<=u;e++)for(let t=i;t<=a;t++){const r=c[e-o][t-i];if(r.math){const t=r.row-e,n=this._store.transposeMath(r.math,-t,0,this._parseContext);r.value=`=${n}`}h.push([e,t,{value:r.value}])}this.parseBlock(h)}addSpan(e,t,r){let n;if(!(t>1||r>1))return n=this._spans.findIndex((t=>t.id===e)),void(-1!==n&&this._spans.splice(n,1));for(let n=0;n<=this._spans.length-1;n++){const o=this._spans[n];pr(e,t,r,o.id,o.info.width,o.info.height)&&this._spans.splice(n,1)}this._spans.push({id:e,info:{width:t,height:r}})}getSpan(e){return this._spans.find((t=>t.id===e))||null}getSpans(){return this._spans}_recalculateSpans(e,t,r){if(this._spans.length)for(let n=this._spans.length-1;n>=0;n--){const o=this._spans[n];let{height:i,width:u}=o.info,[a,s]=_e(o.id);t&&([a,i]=this._adjustSpan(a,i,e,t)),r&&([s,u]=this._adjustSpan(s,u,e,r)),u<1||i<1||u+i<=2?this._spans.splice(n,1):(o.id=Te(a,s,this._id),o.info.height=i,o.info.width=u)}}_adjustSpan(e,t,r,n){const o=e+t;if(n<0){const i=r+(n=-n);r>e?r<=o&&(t-=Math.min(n,e+t-r)):i>e?(t-=i-e,e=n-(i-e)):e-=n}else r<=e?e+=n:r<=o&&(t+=n);return[e,t]}}function Nr(e,t){const r=[e,0];for(let e=0;e<t;e++)r.push(null);return r}class Mr{constructor(e,t,r){this._ranges=new Map,this._counter=1,this._rangeOrder=[],this._store=e,this._page=t,this._pageGetter=r}get(e){return this._store.getMath(this._ranges.get(e))}toId(e){return this._ranges.get(e)}add(e,t){const r=this._ranges.get(e)||this._next_id();this._store.setMath(r,t,this._page.getContext()),this._ranges.set(e,r),this._refresh(e)}remove(e){this._ranges.delete(e),this._counter=1,this._refresh(e)}serialize(){return Array.from(this._ranges.keys()).map((e=>[e,this.get(e).source]))}parse(e){e.forEach((e=>this.add(e[0],e[1])))}_refresh(e){const t=e.indexOf(\"!\");let r=\"\";-1!==t&&(r=e.substr(0,t),e=e.substr(t+1)),this._store.each(((t,n)=>{if(function(e,t,r,n){for(let o=0;o<e.length;o+=3)if(6===e[o]){if(\"\"!==r){if(5===e[o-3]&&t.substr(e[o-2],e[o-1])!==r)continue;return!0}if(t.substr(e[o+1],e[o+2])===n)return!0}return!1}(n.code,n.source,r,e)){const e=Me(t);this._store.setMath(t,n.source,this._pageGetter(e).getContext())}}))}_next_id(){for(;this._rangeOrder[this._counter];)this._counter++;return this._rangeOrder[this._counter]=!0,Te(this._counter,0,this._page.getID())}renamePage(e,t){e+=\"!\",t&&(t+=\"!\"),this._ranges.forEach(((r,n,o)=>{0===n.indexOf(e)&&(t?o.set(n.replace(e,t),r):this._store.clean(r),o.delete(n))}))}}class qr{constructor(e,t){this._store=e,this._pageGetter=t}copy(e,t){t||(t=e);const r=this._serialize(e,t);return this._store.setMeta({$clipboard:r}),r}paste(e,t,r,n,o=this._updateCurrentCell){var i;if(n=n||0,!(null===(i=r=r||this._store.getMeta().$clipboard)||void 0===i?void 0:i.data.length))return;const[u,a,s]=_e(e),[c,h]=_e(t),l=this._pageGetter(s),[f,d]=_e(r.from||0),m=r.data,p=[],g=u-f,b=a-d;if(0===n){const e=m[0].length-1;for(let t=0;t<=m.length-1;t++)for(let r=0;r<=e;r++){const e=m[t][r],n=u+t,i=a+r,c=this._updateCell(n,i,s,e,g,b,o);c&&p.push(c)}}if(1===n)for(let e=u;e<=c;e++)for(let t=a;t<=h;t++){const r=t-a,n=m[e-u][r],i=this._updateCell(e,t,s,n,g,b,o);i&&p.push(i)}if(2===n){let e=0;for(let t=u;t<=c;t++){let r=0;e===m.length&&(e=0);for(let n=a;n<=h;n++){r===m[0].length&&(r=0);const i=m[e][r],u=t-(f+e),a=n-(d+r),c=this._updateCell(t,n,s,i,u,a,o);c&&p.push(c),r++}e++}}l.parseBlock(p)}clean(e,t,r){r=r||255;const[n,o,i]=_e(e),[u,a]=_e(t),s=this._pageGetter(i),c=[],h=[];for(let e=n;e<=u;e++)for(let t=o;t<=a;t++){const n=s.getCell(e,t),o=Te(e,t,i),u=255===r?{}:Object.assign({},n);if(1&r){const e=this._store.getTriggerList(o);e&&h.push(...e),delete u.value}c.push([e,t,u])}s.parseBlock(c),this._refreshRelatedFormulas(h)}_refreshRelatedFormulas(e){wr(e).forEach((e=>this._store.refresh(e)))}_serialize(e,t){const[r,n,o]=_e(e),[i,u]=_e(t),a=this._pageGetter(o),s={from:e,data:[]};for(let e=r;e<=i;e++){const t=[];for(let r=n;r<=u;r++){const n=a.getCell(e,r),i=this._store.getMath(Te(e,r,o));let u;i&&(u=i.source);const s=[n?Object.assign({},n):null];u&&s.push(u),t.push(s)}s.data.push(t)}return s}reset(){this._store.setMeta({$clipboard:null})}move(e,t){const{data:r,from:n}=t||this._store.getMeta().$clipboard,[o,i,u]=_e(n),a=r.length,s=r[0].length,[c,h,l]=_e(e),f=[],d=[],m=this._pageGetter(l),p={id:n,h:a,w:s};for(let e=0;e<a;e++)for(let t=0;t<s;t++){const g=r[e][t],[b,R]=g,T=Te(o+e,i+t,u),_=this._store.getTriggerList(T);if(_){const e=this._getTriggersOutsideCutRange(_,n,a,s);e.length&&f.push(...e)}const y=c+e,N=h+t;if(b){if(R){const e=this._pageGetter(u).getContext(),t=this._store.moveMath(R,c-o,h-i,l,p,e,m.getContext());b.value=`=${t}`}d.push([y,N,b])}else d.push([y,N,{}])}m.parseBlock(d),this._updateRelatedFormulas(f,c-o,h-i,l,p)}_updateRelatedFormulas(e,t,r,n,o){wr(e).forEach((e=>{const[,,i]=_e(e),u=this._store.getMath(e),a=this._pageGetter(i).getContext(),s=this._store.moveMath(u,t,r,n,o,a);this._store.setMath(e,s,a)}))}_getTriggersOutsideCutRange(e,t,r,n){const o=[];return e.forEach((e=>{pr(t,r,n,e,1,1)||o.push(e)})),o}_updateCell(e,t,r,n,o,i,u){const[a,s]=n,c=this._pageGetter(r),h=a?Object.assign({},a):{value:null};h.formula=s?`=${this._store.transposeMath(s,o,i)}`:null;const l=u(c.getCell(e,t)||{},h);return l?[e,t,l]:null}_updateCurrentCell(e,t){return t.formula&&(t.value=t.formula),t}fromCSV(e,t=\"\\n\",r=\"\\t\"){return{data:e.split(t).map((e=>e.split(r).map((e=>[{value:e}]))))}}}function wr(e){const t=new Set(e);return Array.from(t)}class Er{constructor(e){this._cfg=e||{strict:!1},this._pages=[],this._pageNames=[],this._pageName2ID=new Map,this._pCounter=0,this._parseContext={page:e=>this._pageName2ID.get(e),pageName:e=>this._pageNames[e],pageObj:e=>this._pages[e],name:(e,t,r)=>{const n=e.length,o=t.substr(e[n-2],e[n-1]);let i;if(5===e[n-6]){const r=t.substr(e[n-5],e[n-4]);i=this._ranges.toId(r+\"!\"+o)||this._ranges.toId(o)}else i=this._ranges.toId(r.pageName(r.z)+\"!\"+o)||this._ranges.toId(o);e.push(9,i||-1,0)},z:0};const t=this._store=new _r(Object.assign(Object.assign({},this._cfg),{get:e=>{const[t,r,n]=_e(e);return this._pages[n].getValue(t,r)},set:(e,r,n,o)=>{const[i,u,a]=_e(e),s=this._pages[a].getCell(i,u,!0),c=o?null:\"number\"==typeof s.spill?s.spill:r||0===r?s.source:null;if(3===n){if(o>=0&&(s.spill=o,s.source!==o))return!1;s.source=o=null}else if(null===r&&!o&&s.source)return!1;if(o&&e!==o&&s.source!==o&&(s.value||0===s.value||\"number\"==typeof s.source&&s.source!==o)){this._pages[a].throwError(\"spill error\")}s.source!==o&&(s.source=o);const h=2===n||3===n;if((null==n||h)&&(n=s.$format||0),s.$format=n,\"string\"==typeof r&&1!=n&&r){let e=parseFloat(r);h&&(e=e.toString()),e==r&&(r=parseFloat(r))}const l=s.value!==r;return l&&(s.value=r),\"number\"==typeof c&&t.triggerSet(new Set([c])),l}})),r=this._pages[63]=new yr(63,this._store,this._parseContext);this._ranges=new Mr(this._store,r,this.getPage.bind(this)),this._cm=new qr(this._store,this.getPage.bind(this))}addPage(e){for(;this._pages[this._pCounter];)this._pCounter++;const t=this._pCounter,r=new yr(t,this._store,this._parseContext);return this._pageName2ID.set(e,t),this._pages[t]=r,this._pageNames[t]=e,r}renamePage(e,t){if(e===t)return;const r=this._pageName2ID.get(e);this._pageName2ID.delete(e),this._pageName2ID.set(t,r),this._pageNames[r]=t,this._ranges.renamePage(e,t);const n=this._pages[r].getContext();this._store.regenerate(r,!1,n)}removePage(e){const t=this._pageName2ID.get(e),r=this._pages[t].getContext();this._pageName2ID.delete(e),this._pages[t]=this._pageNames[t]=null,this._pCounter=0,this._ranges.renamePage(e,null),this._store.regenerate(t,!0,r)}getPage(e){return\"string\"==typeof e&&(e=this._pageName2ID.get(e)),this._pages[e]}getRanges(){return this._ranges}getStore(){return this._store}find(e,{firstOnly:t,resultsLimit:r=100}){const n=[];return this._pages.forEach(((o,i)=>{o.eachCell(((o,u,a)=>{const s=a.value;e(s)&&(t&&0===n.length||!t&&n.length<r)&&n.push({id:Te(o,u,i),value:s})}))})),n}getCopyManager(){return this._cm}}const Ar=()=>({SUM:[[\"Number1\",\"Required. The first value to sum.\"],[\"Number2\",\"Optional. The second value to sum.\"],[\"Number3\",\"Optional. The third value to sum.\"]],AVERAGE:[[\"Number1\",\"Required. A number or cell reference that refers to numeric values.\"],[\"Number2\",\"Optional. A number or cell reference that refers to numeric values.\"]],AVERAGEA:[[\"Value1\",\"Required. A value or reference to a value that can be evaluated as a number.\"],[\"Value2\",\"Optional. A value or reference to a value that can be evaluated as a number.\"]],COUNT:[[\"Value1\",\"Required. An item, cell reference, or range.\"],[\"Value2\",\"Optional. An item, cell reference, or range.\"]],COUNTA:[[\"Value1\",\"Required. An item, cell reference, or range.\"],[\"Value2\",\"Optional. An item, cell reference, or range.\"]],MIN:[[\"Number1\",\"Required. Number, reference to numeric value, or range that contains numeric values.\"],[\"Number2\",\"Optional. Number, reference to numeric value, or range that contains numeric values.\"]],MAX:[[\"Number1\",\"Required. Number, reference to numeric value, or range that contains numeric values.\"],[\"Number2\",\"Optional. Number, reference to numeric value, or range that contains numeric values.\"]],SQRT:[[\"Number\",\"Required. The number to get the square root of.\"]],POWER:[[\"Number\",\"Required. Number to raise to a power.\"],[\"Power\",\"Required. Power to raise number to (the exponent).\"]],LOG:[[\"Number\",\"Required. Number for which you want the logarithm.\"],[\"Base\",\"Optional. Base of the logarithm. Defaults to 10.\"]],EXP:[[\"Number\",\"Required. The power that e is raised to.\"]],PRODUCT:[[\"Number1\",\"Required. The first number or range to multiply.\"],[\"Number2\",\"Optional. The second number or range to multiply.\"]],SUMPRODUCT:[[\"Array1\",\"Required. The first array or range to multiply, then add.\"],[\"Array2\",\"Optional. The second array or range to multiply, then add.\"]],ABS:[[\"Number\",\"Required. The number to get the absolute value of.\"]],RAND:[],RANDBETWEEN:[[\"Bottom\",\"Required. An integer representing the lower value of the range.\"],[\"Top\",\"Required. An integer representing the upper value of the range.\"]],ROUND:[[\"Number\",\"Required. The number to round.\"],[\"Num_digits\",\"Required. The place at which number should be rounded.\"]],ROUNDUP:[[\"Number\",\"Required. The number to round up.\"],[\"Num_digits\",\"Required. The place at which number should be rounded.\"]],ROUNDDOWN:[[\"Number\",\"Required. The number to round down.\"],[\"Num_digits\",\"Required. The place at which number should be rounded.\"]],INT:[[\"Number\",\"Required. The number from which you want an integer.\"]],CEILING:[[\"Number\",\"Required. The number that should be rounded.\"],[\"Significance\",\"Required. The multiple to use when rounding.\"]],FLOOR:[[\"Number\",\"Required. The number that should be rounded.\"],[\"Significance\",\"Required. The multiple to use when rounding.\"]],CONCATENATE:[[\"Text1\",\"Required. The first text value to join together.\"],[\"Text2\",\"Required. The second text value to join together.\"],[\"Text3\",\"Optional. The third text value to join together.\"]],MID:[[\"Text\",\"Required. The text to extract from.\"],[\"Start_num\",\"Required. The location of the first character to extract.\"],[\"Num_chars\",\"Required. The number of characters to extract.\"]],LEFT:[[\"Text\",\"Required. The text from which to extract characters.\"],[\"Num_chars\",\"Optional. The number of characters to extract, starting on the left side of text. Default = 1.\"]],RIGHT:[[\"Text\",\"Required. The text from which to extract characters on the right.\"],[\"Num_chars\",\"Optional. The number of characters to extract, starting on the right. Optional, default = 1.\"]],LOWER:[[\"Text\",\"Required. The text that should be converted to lower case.\"]],UPPER:[[\"Text\",\"Required. The text thatto convert to upper case.\"]],PROPER:[[\"Text\",\"Required. The text that should be converted to proper case.\"]],TRIM:[[\"Text\",\"Required. The text from which to remove extra space.\"]],LEN:[[\"Text\",\"Required. The text for which to calculate length.\"]],SEARCH:[[\"Find_text\",\"Required. The substring to find.\"],[\"Within_text\",\"Required. The text to search within.\"],[\"Start_num\",\"Optional. Starting position. Optional, defaults to 1.\"]],FIND:[[\"Find_text\",\"Required. The substring to find.\"],[\"Within_text\",\"Required. The text to search within.\"],[\"Start_num\",\"Optional. The starting position in the text to search. Optional, defaults to 1.\"]],REPLACE:[[\"Old_text\",\"Required. The text to replace.\"],[\"Start_num\",\"Required. The starting location in the text to search.\"],[\"Num_chars\",\"Required. The number of characters to replace.\"],[\"New_text\",\"Required. The text to replace old_text with.\"]],SUBSTITUTE:[[\"Text\",\"Required. The text to change.\"],[\"Old_text\",\"Required. The text to replace.\"],[\"New_text\",\"Required. The text to replace with.\"],[\"Instance\",\"Optional. The instance to replace. If not supplied, all instances are replaced.\"]],NOW:[],DATE:[[\"Year\",\"Required. Number for year.\"],[\"Month\",\"Required. Number for month.\"],[\"Day\",\"Required. Number for day.\"]],TIME:[[\"Hour\",\"Required. The hour for the time you wish to create.\"],[\"Minute\",\"Required. The minute for the time you wish to create.\"],[\"Second\",\"Required. The second for the time you wish to create.\"]],YEAR:[[\"Date\",\"Required. A valid Excel date.\"]],MONTH:[[\"Serial_number\",\"Required. A valid Excel date.\"]],DAY:[[\"Date\",\"Required. A valid Excel date.\"]],HOUR:[[\"Serial_number\",\"Required. A valid Excel time.\"]],MINUTE:[[\"Serial_number\",\"Required. A valid date or time.\"]],SECOND:[[\"Serial_number\",\"Required. A valid time in a format Excel recognizes.\"]],DATEDIF:[[\"Start_date\",\"Required. Start date in Excel date serial number format.\"],[\"End_date\",\"Required. End date in Excel date serial number format.\"],[\"Unit\",\"Required. The time unit to use (years, months, or days).\"]],LOOKUP:[[\"Lookup_value\",\"Required. The value to search for.\"],[\"Lookup_vector\",\"Required. The one-row, or one-column range to search.\"],[\"Result_vector\",\"Optional. The one-row, or one-column range of results.\"]],HLOOKUP:[[\"Lookup_value\",\"Required. The value to look up.\"],[\"Table_array\",\"Required. The table from which to retrieve data.\"],[\"Row_index\",\"Required. The row number from which to retrieve data.\"],[\"Range_lookup\",\"Optional. A Boolean to indicate exact match or approximate match. Default = TRUE = approximate match.\"]],VLOOKUP:[[\"Lookup_value\",\"Required. The value to look for in the first column of a table.\"],[\"Table_array\",\"Required. The table from which to retrieve a value.\"],[\"Column_index_num\",\"Required. The column in the table from which to retrieve a value.\"],[\"Range_lookup\",\"Optional. TRUE = approximate match (default). FALSE = exact match.\"]],XLOOKUP:[[\"Lookup\",\"Required. The lookup value.\"],[\"Lookup_array\",\"Required. The array or range to search.\"],[\"Return_array\",\"Required. The array or range to return.\"],[\"Not_found\",\"Optional. Value to return if no match found.\"],[\"Match_mode\",\"Optional. 0 = exact match (default), -1 = exact match or next smallest, 1 = exact match or next larger, 2 = wildcard match.\"],[\"Search_mode\",\"Optional. 1 = search from first (default), -1 = search from last, 2 = binary search ascending, -2 = binary search descending.\"]],INDEX:[[\"Array\",\"Required. A range of cells, or an array constant.\"],[\"Row_num\",\"Required. The row position in the reference or array.\"],[\"Col_num\",\"Optional. The column position in the reference or array.\"],[\"Area_num\",\"Optional. The range in reference that should be used.\"]],MATCH:[[\"Lookup_value\",\"Required. The value to match in lookup_array.\"],[\"Lookup_array\",\"Required. A range of cells or an array reference.\"],[\"Match_type\",\"Optional. 1 = exact or next smallest (default), 0 = exact match, -1 = exact or next largest.\"]],XMATCH:[[\"Lookup_value\",\"Required. The lookup value.\"],[\"Lookup_array\",\"Required. The array or range to search.\"],[\"Match_mode\",\"Optional. 0 = exact match (default), -1 = exact match or next smallest, 1 = exact match or next larger, 2 = wildcard match.\"],[\"Search_mode\",\"Optional. 1 = search from first (default), -1 = search from last, 2 = binary search ascending, -2 = binary search descending.\"]],CHOOSE:[[\"Index_num\",\"Required. The value to choose. A number between 1 and 254.\"],[\"Value1\",\"Required. The first value from which to choose.\"],[\"Value2\",\"Optional. The second value from which to choose.\"]],ISBLANK:[[\"Value\",\"Required. The value to check.\"]],ISBINARY:[[\"Value\",\"Required. The value to check.\"]],ISEVEN:[[\"Value\",\"Required. The numeric value to check.\"]],ISODD:[[\"Value\",\"Required. The numeric value to check.\"]],ISNONTEXT:[[\"Value\",\"Required. The value to check.\"]],ISNUMBER:[[\"Value\",\"Required. The value to check.\"]],ISTEXT:[[\"Value\",\"Required. The value to check.\"]],N:[[\"Value\",\"Required. The value to convert to a number.\"]],IF:[[\"Logical_test\",\"Required. A value or logical expression that can be evaluated as TRUE or FALSE.\"],[\"Value_if_true\",\"Optional. The value to return when logical_test evaluates to TRUE.\"],[\"Value_if_false\",\"Optional. The value to return when logical_test evaluates to FALSE.\"]],AND:[[\"Logical1\",\"Required. The first condition or logical value to evaluate.\"],[\"Logical2\",\"Optional. The second condition or logical value to evaluate.\"]],NOT:[[\"Logical\",\"Required. A value or logical expression that can be evaluated as TRUE or FALSE.\"]],OR:[[\"Logical1\",\"Required. The first condition or logical value to evaluate.\"],[\"Logical2\",\"Optional. The second condition or logical value to evaluate.\"]],FALSE:[],TRUE:[],ACOS:[[\"Number\",\"Required. The value to get the inverse cosine of. The number must be between -1 and 1 inclusive.\"]],ACOSH:[[\"Number\",\"Required. Any real number equal to or greater than 1.\"]],ACOT:[[\"Number\",\"Required. Number is the cotangent of the angle you want. This must be a real number.\"]],ACOTH:[[\"Number\",\"Required. The absolute value of Number must be greater than 1.\"]],ADD:[[\"Number1\",\"Required. The first value to sum.\"],[\"Number2\",\"Required. The second value to sum.\"]],ARABIC:[[\"Roman_text\",\"Required. The Roman numeral in text that you want to convert.\"]],ASIN:[[\"Number\",\"Required. The value to get the inverse sine of. The number must be between -1 and 1 inclusive.\"]],ASINH:[[\"Number\",\"Required. Any real number.\"]],ATAN:[[\"Number\",\"Required. The value to get the inverse tangent of.\"]],ATAN2:[[\"X_num\",\"Required. The x coordinate of the input point.\"],[\"Y_num\",\"Required. The y coordinate of the input point.\"]],ATANH:[[\"Number\",\"Required. Any real number between 1 and -1.\"]],AVEDEV:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Optional. Second value or reference.\"]],BASE:[[\"Number\",\"Required. The number to convert to a given base.\"],[\"Radix\",\"Required. The base to convert to.\"],[\"Min_length\",\"Optional. The minimum string length to return, achieved by padding with zeros.\"]],BINOMDIST:[[\"Number_s\",\"Required. The number of successes.\"],[\"Trials\",\"Required. The number of independent trials.\"],[\"Probability_s\",\"Required. The probability of success on each trial.\"],[\"Cumulative\",\"Required. TRUE = cumulative distribution function, FALSE=probability mass function.\"]],\"BINOM.INV\":[[\"Trials\",\"Required. The number of Bernoulli trials.\"],[\"Probability_s\",\"Required. The probability of a success on each trial.\"],[\"Alpha\",\"Required. The criterion value.\"]],\"BINOM.DIST.RANGE\":[[\"Trials\",\"Required. The number of independent trials. Must be greater than or equal to 0.\"],[\"Probability_s\",\"Required. The probability of success in each trial. Must be greater than or equal to 0 and less than or equal to 1.\"],[\"Number_s\",\"Required. The number of successes in trials. Must be greater than or equal to 0 and less than or equal to Trials.\"],[\"Number_s2\",\"Optional. If provided, returns the probability that the number of successful trials will fall between Number_s and number_s2. Must be greater than or equal to Number_s and less than or equal to Trials.\"]],\"BINOM.DIST\":[[\"Number_s\",\"Required. The number of successes.\"],[\"Trials\",\"Required. The number of independent trials.\"],[\"Probability_s\",\"Required. The probability of success on each trial.\"],[\"Cumulative\",\"Required. TRUE = cumulative distribution function, FALSE=probability mass function.\"]],BITAND:[[\"Number1\",\"Required. A positive decimal number.\"],[\"Number2\",\"Required. A positive decimal number.\"]],BITLSHIFT:[[\"Number\",\"Required. The number to be bit shifted.\"],[\"Shift_amount\",\"Required. The amount of bits to shift, if negative shifts bits to the right instead.\"]],BITOR:[[\"Number1\",\"Required. A positive decimal number.\"],[\"Number2\",\"Required. A positive decimal number.\"]],BITRSHIFT:[[\"Number\",\"Required. The number to be bit shifted.\"],[\"Shift_amount\",\"Required. The amount of bits to shift to the right, if negative shifts bits to the left instead.\"]],BITXOR:[[\"Number1\",\"Required. A positive decimal number.\"],[\"Number2\",\"Required. A positive decimal number.\"]],COMBIN:[[\"Number\",\"Required. The total number of items.\"],[\"Number_chosen\",\"Required. The number of items in each combination.\"]],COMBINA:[[\"Number\",\"Required. The total number of items.\"],[\"Number_chosen\",\"Required. The number of items in each combination.\"]],COMPLEX:[[\"Real_num\",\"Required. The real number.\"],[\"I_num\",\"Required. The imaginary number.\"],[\"Suffix\",'Optional. The suffix, either \"i\" or \"j\".']],CORREL:[[\"Array1\",\"Required. A range of cell values.\"],[\"Array2\",\"Required. A second range of cell values.\"]],COS:[[\"Number\",\"Required. The angle in radians for which you want the cosine.\"]],COSH:[[\"Number\",\"Required. The hyperbolic angle.\"]],COT:[[\"Number\",\"Required. The angle provided in radians.\"]],COTH:[[\"Number\",\"Required.\"]],COUNTBLANK:[[\"Range\",\"Required. The range in which to count blank cells.\"]],COVAR:[[\"Array1\",\"Required. The first cell range of integers.\"],[\"Array2\",\"Required. The second cell range of integers.\"]],\"COVARIANCE.P\":[[\"Array1\",\"Required. The first cell range of integers.\"],[\"Array2\",\"Required. The second cell range of integers.\"]],\"COVARIANCE.S\":[[\"Array1\",\"Required. The first cell range of integers.\"],[\"Array2\",\"Required. The second cell range of integers.\"]],CSC:[[\"Number\",\"Required. The angle provided in radians.\"]],CSCH:[[\"Number\",\"Required.\"]],DEC2BIN:[[\"Number\",\"Required. The decimal number you want to convert to binary.\"],[\"Places\",\"Optional. Pads the resulting binary number with zeros up to the specified number of digits. If omitted returns the least number of characters required to represent the number.\"]],DEC2HEX:[[\"Number\",\"Required. The decimal number you want to convert to hexadecimal.\"],[\"Places\",\"Optional. Pads the resulting number with zeros up to the specified number of digits. If omitted returns the least number of characters required to represent the number.\"]],DEC2OCT:[[\"Number\",\"Required. The decimal number you want to convert to octal.\"],[\"Places\",\"Optional. Pads the resulting octal number with zeros up to the specified number of digits. If omitted returns the least number of characters required to represent the number.\"]],DECIMAL:[[\"Number\",\"Required. A text string representing a number.\"],[\"Radix\",\"Required. The base of the number to be converted, an integer between 2-36.\"]],DEGREES:[[\"Angle\",\"Required. Angle in radians that you want to convert to degrees.\"]],DELTA:[[\"Number1\",\"Required. The first number.\"],[\"Number2\",\"Optional. The second number.\"]],DEVSQ:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Optional. Second value or reference.\"]],DIVIDE:[[\"Number1\",\"Required. The number we are dividing.\"],[\"Number2\",\"Required. The number by which we divide.\"]],EQ:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Required. Second value or reference.\"]],ERF:[[\"Lower_limit\",\"Required. The lower bound for integrating ERF.\"],[\"Upper_limit\",\"Optional. The upper bound for integrating ERF. If omitted, ERF integrates between zero and lower_limit.\"]],ERFC:[[\"X\",\"Required. The lower bound for integrating ERFC.\"]],EVEN:[[\"Number\",\"Required. The number to round up to an even integer.\"]],FACT:[[\"Number\",\"Required. The number to get the factorial of.\"]],FACTDOUBLE:[[\"Number\",\"Required. A number greater than or equal to -1.\"]],FISHER:[[\"X\",\"Required. A numeric value for which you want the transformation.\"]],FISHERINV:[[\"Y\",\"Required. The value for which you want to perform the inverse of the transformation.\"]],GAMMA:[[\"Number\",\"Required. Returns a number.\"]],GCD:[[\"Number1\",\"Required. The first number.\"],[\"Number2\",\"Optional. The second number.\"]],GEOMEAN:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Optional. Second value or reference.\"]],GESTEP:[[\"Number\",\"Required. The value to test against step.\"],[\"Step\",\"Optional. The threshold value. If you omit a value for step, GESTEP uses zero.\"]],GT:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Required. Second value or reference.\"]],GTE:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Required. Second value or reference.\"]],HARMEAN:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Optional. Second value or reference.\"]],HEX2BIN:[[\"Number\",\"Required. The hexadecimal number you want to convert to binary.\"],[\"Places\",\"Optional. Pads the resulting binary number with zeros up to the specified number of digits. If omitted returns the least number of characters required to represent the number.\"]],HEX2DEC:[[\"Number\",\"Required. The hexadecimal number you want to convert to decimal.\"]],HEX2OCT:[[\"Number\",\"Required. The hexadecimal number you want to convert to octal.\"],[\"Places\",\"Optional. Pads the resulting binary number with zeros up to the specified number of digits. If omitted returns the least number of characters required to represent the number.\"]],IMABS:[[\"Inumber\",\"Required. A complex number.\"]],IMAGINARY:[[\"Inumber\",\"Required. A complex number.\"]],IMCONJUGATE:[[\"Inumber\",\"Required. A complex number for which you want the conjugate.\"]],IMCOS:[[\"Inumber\",\"Required. A complex number for which you want the cosine.\"]],IMCOSH:[[\"Inumber\",\"Required. A complex number for which you want the hyperbolic cosine.\"]],IMCOT:[],IMCSC:[[\"Inumber\",\"Required. A complex number for which you want the cosecant.\"]],IMCSCH:[[\"Inumber\",\"Required. A complex number for which you want the hyperbolic cosecant.\"]],IMDIV:[[\"Inumber1\",\"Required. The complex numerator or dividend.\"],[\"Inumber2\",\"Required. The complex denominator or divisor.\"]],IMEXP:[[\"Inumber\",\"Required. A complex number for which you want the exponential.\"]],IMLN:[[\"Inumber\",\"Required. A complex number for which you want the natural logarithm.\"]],IMPOWER:[[\"Inumber\",\"Required. A complex number.\"],[\"Number\",\"Required. Power to raise number.\"]],IMPRODUCT:[[\"Inumber1\",\"Required. Complex number 1.\"],[\"Inumber2\",\"Optional. Complex number 2.\"]],IMREAL:[[\"Inumber\",\"Required. A complex number.\"]],IMSEC:[[\"Inumber\",\"Required. A complex number for which you want the secant.\"]],IMSECH:[[\"Inumber\",\"Required. A complex number for which you want the hyperbolic secant.\"]],IMSIN:[[\"Inumber\",\"Required. A complex number for which you want the sine.\"]],IMSINH:[[\"Inumber\",\"Required. A complex number for which you want the hyperbolic sine.\"]],IMSQRT:[[\"Inumber\",\"Required. A complex number for which you want the square root.\"]],IMSUB:[[\"Inumber1\",\"Required. Complex number 1.\"],[\"Inumber2\",\"Required. Complex number 2.\"]],IMSUM:[[\"Inumber1\",\"Required. Complex number 1.\"],[\"Inumber2\",\"Optional. Complex number 2.\"]],IMTAN:[[\"Inumber\",\"Required. A complex number for which you want the tangent.\"]],LARGE:[[\"Array\",\"Required. An array or range of numeric values.\"],[\"K\",\"Required. Position as an integer, where 1 corresponds to the largest value.\"]],LN:[[\"Number\",\"Required. A number to take the natural logarithm of.\"]],LOG10:[[\"Number\",\"Required. Number for which you want the logarithm.\"]],LT:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Required. Second value or reference.\"]],LTE:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Required. Second value or reference.\"]],MEDIAN:[[\"Number1\",\"Required. A number or cell reference that refers to numeric values.\"],[\"Number2\",\"Optional. A number or cell reference that refers to numeric values.\"]],MINUS:[[\"Number1\",\"Required. The number from which we subtract.\"],[\"Number2\",\"Required. The number by which we subtract.\"]],MOD:[[\"Number\",\"Required. The number to be divided.\"],[\"Divisor\",\"Required. The number to divide with.\"]],MROUND:[[\"Number\",\"Required. The number that should be rounded.\"],[\"Significance\",\"Required. The multiple to use when rounding.\"]],MULTINOMIAL:[[\"Number1, number2, ...\",\"Required. Number1 is required, subsequent numbers are optional. 1 to 255 values for which you want the multinomial.\"]],MULTIPLY:[[\"Number1\",\"Required. The number to multiply.\"],[\"Number2\",\"Required. The number to multiply by.\"]],NE:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Required. Second value or reference.\"]],OCT2BIN:[[\"Number\",\"Required. The octal number you want to convert. Number may not contain more than 10 characters. The most significant bit of number is the sign bit. The remaining 29 bits are magnitude bits. Negative numbers are represented using two's-complement notation.\"],[\"Places\",\"Optional. The number of characters to use. If places is omitted, OCT2BIN uses the minimum number of characters necessary. Places is useful for padding the return value with leading 0s (zeros).\"]],OCT2DEC:[[\"Number\",\"Required. The octal number you want to convert. Number may not contain more than 10 octal characters (30 bits). The most significant bit of number is the sign bit. The remaining 29 bits are magnitude bits. Negative numbers are represented using two's-complement notation.\"]],OCT2HEX:[[\"Number\",\"Required. The octal number you want to convert. Number may not contain more than 10 octal characters (30 bits). The most significant bit of number is the sign bit. The remaining 29 bits are magnitude bits. Negative numbers are represented using two's-complement notation.\"],[\"Places\",\"Optional. The number of characters to use. If places is omitted, OCT2HEX uses the minimum number of characters necessary. Places is useful for padding the return value with leading 0s (zeros).\"]],ODD:[[\"Number\",\"Required. The number to round up to an odd integer.\"]],PERCENTILE:[[\"Array\",\"Required. Data values.\"],[\"K\",\"Required. Number representing kth percentile.\"]],\"PERCENTILE.INC\":[[\"Array\",\"Required. Data values.\"],[\"K\",\"Required. Number representing kth percentile.\"]],\"PERCENTILE.EXC\":[[\"Array\",\"Required. Data values.\"],[\"K\",\"Required. A value between 0 and 1 that represents the k:th percentile.\"]],PERMUT:[[\"Number\",\"Required. The total number of items.\"],[\"Number_chosen\",\"Required. The number of items in each combination.\"]],PI:[],POW:[[\"Number\",\"Required. Number to raise to a power.\"],[\"Power\",\"Required. Power to raise number to (the exponent).\"]],QUARTILE:[[\"Array\",\"Required. A reference containing data to analyze.\"],[\"Quart\",\"Required. The quartile value to return.\"]],\"QUARTILE.INC\":[[\"Array\",\"Required. A reference containing data to analyze.\"],[\"Quart\",\"Required. The quartile value to return.\"]],\"QUARTILE.EXC\":[[\"Array\",\"Required. A reference containing data to analyze.\"],[\"Quart\",\"Required. The quartile value to return, 1-3.\"]],QUOTIENT:[[\"Numerator\",\"Required. The number to be divided.\"],[\"Denominator\",\"Required. The number to divide by.\"]],RADIANS:[[\"Angle\",\"Required. Angle in degrees to convert to radians.\"]],ROMAN:[[\"Number\",\"Required. Number (in Arabic numeral) you want to convert to Roman numeral.\"],[\"Form\",\"Optional. The type of Roman numeral you want.\"]],SEC:[[\"Number\",\"Required. The angle in radians for which you want the secant.\"]],SECH:[],SIGN:[[\"Number\",\"Required. The number to get the sign of.\"]],SIN:[[\"Number\",\"Required. The angle in radians for which you want the sine.\"]],SINH:[[\"Number\",\"Required. The hyperbolic angle.\"]],SMALL:[[\"Array\",\"Required. An array or range of numeric values.\"],[\"K\",\"Required. Position as an integer, where 1 corresponds to the smallest value.\"]],SQRTPI:[[\"Number\",\"Required. The number by which pi is multiplied.\"]],STDEV:[[\"Number1\",\"Required. First number or reference in the sample.\"],[\"Number2\",\"Optional. Second number or reference.\"]],\"STDEV.S\":[[\"Number1\",\"Required. First number or reference in the sample.\"],[\"Number2\",\"Optional. Second number or reference.\"]],\"STDEV.P\":[[\"Number1\",\"Required. First number or reference in the sample.\"],[\"Number2\",\"Optional. Second number or reference.\"]],STDEVA:[[\"Number1\",\"Required. First number or reference in the sample.\"],[\"Number2\",\"Optional. Second number or reference.\"]],STDEVP:[[\"Number1\",\"Required. First number or reference in the sample.\"],[\"Number2\",\"Optional. Second number or reference.\"]],STDEVPA:[[\"Number1\",\"Required. First number or reference in the sample.\"],[\"Number2\",\"Optional. Second number or reference.\"]],STEYX:[[\"Known_y's\",\"Required. An array or range of dependent data points.\"],[\"Known_x's\",\"Required. An array or range of independent data points.\"]],SUBTOTAL:[[\"Function_num\",\"Required. A number that specifies which function to use in calculating subtotals within a list. See table below for full list.\"],[\"Ref1\",\"Required. A named range or reference to subtotal.\"],[\"Ref2\",\"Optional. A named range or reference to subtotal.\"]],SUMSQ:[[\"Number1\",\"Required. The first argument containing numeric values.\"],[\"Number2\",\"Optional. The first argument containing numeric values.\"]],SUMX2MY2:[[\"Array_x\",\"Required. The first range or array containing numeric values.\"],[\"Array_y\",\"Required. The second range or array containing numeric values.\"]],SUMX2PY2:[[\"Array_x\",\"Required. The first range or array containing numeric values.\"],[\"Array_y\",\"Required. The second range or array containing numeric values.\"]],SUMXMY2:[[\"Array_x\",\"Required. The first range or array containing numeric values.\"],[\"Array_y\",\"Required. The second range or array containing numeric values.\"]],TAN:[[\"Number\",\"Required. The angle in radians for which you want the tangent.\"]],TANH:[[\"Number\",\"Required. Any real number.\"]],TRUNC:[[\"Number\",\"Required. The number to truncate.\"],[\"Num_digits\",\"Optional. The precision of the truncation (default is 0).\"]],VAR:[[\"Number1\",\"Required. First number or reference.\"],[\"Number2\",\"Optional. Second number or reference.\"]],\"VAR.S\":[[\"Number1\",\"Required. First number or reference.\"],[\"Number2\",\"Optional. Second number or reference.\"]],\"VAR.P\":[[\"Number1\",\"Required. First number or reference.\"],[\"Number2\",\"Optional. Second number or reference.\"]],VARA:[[\"Number1\",\"Required. First number or reference.\"],[\"Number2\",\"Optional. Second number or reference.\"]],VARP:[[\"Number1\",\"Required. First number or reference.\"],[\"Number2\",\"Optional. Second number or reference.\"]],VARPA:[[\"Number1\",\"Required. First number or reference.\"],[\"Number2\",\"Optional. Second number or reference.\"]],WEIBULL:[[\"X\",\"Required. The value at which to evaluate the function.\"],[\"Alpha\",\"Required. A parameter to the distribution.\"],[\"Beta\",\"Required. A parameter to the distribution.\"],[\"Cumulative\",\"Required. Determines the form of the function.\"]],\"WEIBULL.DIST\":[[\"X\",\"Required. The value at which to evaluate the function.\"],[\"Alpha\",\"Required. A parameter to the distribution.\"],[\"Beta\",\"Required. A parameter to the distribution.\"],[\"Cumulative\",\"Required. Determines the form of the function.\"]],CHAR:[[\"Number\",\"Required. A number between 1 and 255.\"]],CLEAN:[[\"Text\",\"Required. The text to clean.\"]],CODE:[[\"Text\",\"Required. The text for which you want a numeric code.\"]],EXACT:[[\"Text1\",\"Required. The first text string to compare.\"],[\"Text2\",\"Required. The second text string to compare.\"]],FIXED:[[\"Number\",\"Required. The number to round and format.\"],[\"Decimals\",\"Optional. Number of decimals to use. Default is 2.\"],[\"No_commas\",\"Optional. Suppress commas. TRUE = no commas, FALSE = commas. Default is FALSE.\"]],NUMBERVALUE:[[\"Text\",\"Required. The text to convert to a number.\"],[\"Decimal_separator\",\"Optional. The character for decimal values.\"],[\"Group_separator\",\"Optional. The character for grouping by thousands.\"]],REGEXEXTRACT:[[\"Text\",\"Required. The input text.\"],[\"Regular_expression\",\"Required. The first part of text that matches this expression will be returned.\"]],REGEXMATCH:[[\"Text\",\"Required. The text to be tested against the regular expression.\"],[\"Regular_expression\",\"Required. The regular expression to test the text against.\"]],REGEXREPLACE:[[\"Text\",\"Required. The text, a part of which will be replaced.\"],[\"Regular_expression\",\"Required. The regular expression. All matching instances in text will be replaced.\"],[\"Replacement\",\"Required. The text which will be inserted into the original text.\"]],REPT:[[\"Text\",\"Required. The text to repeat.\"],[\"Number_times\",\"Required. The number of times to repeat text.\"]],T:[[\"Value\",\"Required. The value to return as text.\"]],JOIN:[[\"Text1, text2, ...\"],[\"Text you want to combine\"]],ARRAYTOTEXT:[[\"Array\",\"Required. The array or range to convert to text.\"],[\"Format\",\"Optional. Output format. 0 = concise (default), and 1 = strict.\"]],DATEVALUE:[[\"Date_text\",\"Required. A valid date in text format.\"]],DAYS:[[\"End_date\",\"Required. The end date.\"],[\"Start_date\",\"Required. The start date.\"]],DAYS360:[[\"Start_date\",\"Required. The start date.\"],[\"End_date\",\"Required. The end date.\"],[\"Method\",\"Optional. Day count method. FALSE (default) = US method, TRUE = European method.\"]],EDATE:[[\"Start_date\",\"Required. Start date as a valid Excel date.\"],[\"Months\",\"Required. Number of months before or after start_date.\"]],EOMONTH:[[\"Start_date\",\"Required. A date that represents the start date in a valid Excel serial number format.\"],[\"Months\",\"Required. The number of months before or after start_date.\"]],ISOWEEKNUM:[[\"Date\",\"Required. A valid Excel date in serial number format.\"]],NETWORKDAYS:[[\"Start_date\",\"Required. The start date.\"],[\"End_date\",\"Required. The end date.\"],[\"Holidays\",\"Optional. A list of non-work days as dates.\"]],\"NETWORKDAYS.INTL\":[[\"Start_date\",\"Required. The start date.\"],[\"End_date\",\"Required. The end date.\"],[\"Weekend\",\"Optional. Setting for which days of the week should be considered weekends.\"],[\"Holidays\",\"Optional. A reference to dates that should be considered non-work days.\"]],TIMEVALUE:[[\"Time_text\",\"Required. A date and/or time in a text format recognized by Excel.\"]],WEEKNUM:[[\"Serial_num\",\"Required. A valid Excel date in serial number format.\"],[\"Return_type\",\"Optional. The day the week begins. Default is 1.\"]],WEEKDAY:[[\"Serial_number\",\"Required. The date for which you want to get the day of week.\"],[\"Return_type\",\"Optional. A number representing day of week mapping scheme. Default is 1.\"]],WORKDAY:[[\"Start_date\",\"Required. The date from which to start.\"],[\"Days\",\"Required. The working days before or after start_date.\"],[\"Holidays\",\"Optional. A list dates that should be considered non-work days.\"]],\"WORKDAY.INTL\":[[\"Start_date\",\"Required. The start date.\"],[\"Days\",\"Required. The end date.\"],[\"Weekend\",\"Optional. Setting for which days of the week should be considered weekends.\"],[\"Holidays\",\"Optional. A list of one or more dates that should be considered non-work days.\"]],YEARFRAC:[[\"Start_date\",\"Required. The start date.\"],[\"End_date\",\"Required. The end date.\"],[\"Basis\",\"Optional. The type of day count basis to use (see below).\"]],ACCRINT:[[\"Id\",\"Required. Issue date of the security.\"],[\"Fd\",\"Required. First interest date of security.\"],[\"Sd\",\"Required. Settlement date of security.\"],[\"Rate\",\"Required. Interest rate of security.\"],[\"Par\",\"Required. Par value of security.\"],[\"Freq\",\"Required. Coupon payments per year (annual = 1, semiannual = 2; quarterly = 4).\"],[\"Basis\",\"Optional. Day count basis (see below, default =0).\"],[\"Calc\",\"Optional. Calculation method (see below, default = TRUE).\"]],PMT:[[\"Rate\",\"Required. The interest rate for the loan.\"],[\"Nper\",\"Required. The total number of payments for the loan.\"],[\"Pv\",\"Required. The present value, or total value of all loan payments now.\"],[\"Fv\",\"Optional. The future value, or a cash balance you want after the last payment is made. Defaults to 0 (zero).\"],[\"Type\",\"Optional. When payments are due. 0 = end of period. 1 = beginning of period. Default is 0.\"]],FV:[[\"Rate\",\"Required. The interest rate per period.\"],[\"Nper\",\"Required. The total number of payment periods.\"],[\"Pmt\",\"Required. The payment made each period. Must be entered as a negative number.\"],[\"Pv\",\"Optional. The present value of future payments. If omitted, assumed to be zero. Must be entered as a negative number.\"],[\"Type\",\"Optional. When payments are due. 0 = end of period, 1 = beginning of period. Default is 0.\"]],DB:[[\"Cost\",\"Required. Initial cost of asset.\"],[\"Salvage\",\"Required. Asset value at the end of the depreciation.\"],[\"Life\",\"Required. Periods over which asset is depreciated.\"],[\"Period\",\"Required. Period to calculation depreciation for.\"],[\"Month\",\"Optional. Number of months in the first year. Defaults to 12.\"]],DDB:[[\"Cost\",\"Required. Initial cost of asset.\"],[\"Salvage\",\"Required. Asset value at the end of the depreciation.\"],[\"Life\",\"Required. Periods over which asset is depreciated.\"],[\"Period\",\"Required. Period to calculation depreciation for.\"],[\"Factor\",\"Optional. Rate at which the balance declines. If omitted, defaults to 2.\"]],DOLLAR:[[\"Number\",\"Required. The number to convert.\"],[\"Decimals\",\"Required. The number of digits to the right of the decimal point. Default is 2.\"]],DOLLARDE:[[\"Fractional_dollar\",\"Required. Dollar component in special fractional notation.\"],[\"Fraction\",\"Required. The denominator in the fractional unit. 8 = 1/8, 16 = 1/16, 32 = 1/32, etc.\"]],DOLLARFR:[[\"Decimal_dollar\",\"Required. Pricing as a normal decimal number.\"],[\"Fraction\",\"Required. The denominator in the fractional unit. 8 = 1/8, 16 = 1/16, 32 = 1/32, etc.\"]],EFFECT:[[\"Nominal_rate\",\"Required. The nominal or stated interest rate.\"],[\"Npery\",\"Required. Number of compounding periods per year.\"]],FVSCHEDULE:[[\"Principal\",\"Required. The initial investment sum.\"],[\"Schedule\",\"Required. Schedule of interest rates, provided as range or array.\"]],IRR:[[\"Values\",\"Required. Array or reference to cells that contain values.\"],[\"Guess\",\"Optional. An estimate for expected IRR. Default is .1 (10%).\"]],IPMT:[[\"Rate\",\"Required. The interest rate per period.\"],[\"Per\",\"Required. The payment period of interest.\"],[\"Nper\",\"Required. The total number of payment periods.\"],[\"Pv\",\"Required. The present value, or total value of all payments now.\"],[\"Fv\",\"Optional. The cash balance desired after last payment is made. Defaults to 0.\"],[\"Type\",\"Optional. When payments are due. 0 = end of period. 1 = beginning of period. Default is 0.\"]],ISPMT:[[\"Rate\",\"Required. Interest rate.\"],[\"Per\",\"Required. Period (starts with zero, not 1).\"],[\"Nper\",\"Required. Number of periods.\"],[\"Pv\",\"Required. Present value.\"]],NPV:[[\"Rate\",\"Required. Discount rate over one period.\"],[\"Value1\",\"Required. First value(s) representing cash flows.\"],[\"Value2\",\"Optional. Second value(s) representing cash flows.\"]],NOMINAL:[[\"Effect_rate\",\"Required. The effective annual interest rate.\"],[\"Npery\",\"Required. Number of compounding periods per year.\"]],NPER:[[\"Rate\",\"Required. The interest rate per period.\"],[\"Pmt\",\"Required. The payment made each period.\"],[\"Pv\",\"Required. The present value, or total value of all payments now.\"],[\"Fv\",\"Optional. The future value, or a cash balance you want after the last payment is made. Defaults to 0.\"],[\"Type\",\"Optional. When payments are due. 0 = end of period. 1 = beginning of period. Default is 0.\"]],PDURATION:[[\"Rate\",\"Required. Interest rate per period.\"],[\"Pv\",\"Required. Present value of the investment.\"],[\"Fv\",\"Required. Future value of the investment.\"]],PPMT:[[\"Rate\",\"Required. The interest rate per period.\"],[\"Per\",\"Required. The payment period of interest.\"],[\"Nper\",\"Required. The total number of payments for the loan.\"],[\"Pv\",\"Required. The present value, or total value of all payments now.\"],[\"Fv\",\"Optional. The cash balance desired after last payment is made. Defaults to 0.\"],[\"Type\",\"Optional. When payments are due. 0 = end of period. 1 = beginning of period. Default is 0.\"]],PV:[[\"Rate\",\"Required. The interest rate per period.\"],[\"Nper\",\"Required. The number of payment periods.\"],[\"Pmt\",\"Required. The payment made each period.\"],[\"Fv\",\"Optional. Future value. If omitted, defaults to zero.\"],[\"Type\",\"Optional. Payment type, 0 = end of period, 1 = beginning of period. Default is 0.\"]],SYD:[[\"Cost\",\"Required. Initial cost of asset.\"],[\"Salvage\",\"Required. Asset value at the end of the depreciation.\"],[\"Life\",\"Required. Periods over which asset is depreciated.\"],[\"Period\",\"Required. Period to calculation depreciation for.\"]],TBILLPRICE:[[\"Settlement\",\"Required. Settlement date of the security.\"],[\"Maturity\",\"Required. Maturity date of the security.\"],[\"Discount\",\"Required. The discount rate for the security.\"]],TBILLYIELD:[[\"Settlement\",\"Required. Settlement date of the security.\"],[\"Maturity\",\"Required. Maturity date of the security.\"],[\"Price\",\"Required. Price per $100.\"]]});export{Re as CLEAN_MODE_ALL,be as CLEAN_MODE_DATA,fe as D_COMMON,de as D_STRING,yr as DataPage,Er as DataStore,me as PASTE_MODE_OVERLAP,pe as PASTE_MODE_RANGE,ge as PASTE_MODE_REPEAT,_r as Store,ie as T_ARG,ae as T_DATA,te as T_ERROR,re as T_METHOD,oe as T_NAME,ce as T_NUMBER,se as T_OPERATOR,ne as T_PAGE,ee as T_PLACEHOLDER,ue as T_RANGE,he as T_SPACE,Z as T_TEXT,hr as addMethod,lr as addMethodBatch,Ne as column,z as dateMethods,J as financialMethods,_e as fromId,Ar as getMethodParams,cr as getMethods,Jt as numberMethods,Me as page,ye as row,fr as str2id,dr as str2pos,mr as str2range,O as textMethods,Te as toId};\n//# sourceMappingURL=muon.es6.js.map\n","import {getMethodParams} from \"@xbs/muon\";\n\nexport default {\n\tlabels:{\n\t\t// formats\n\t\t\"common\": \"Common\",\n\t\t\"currency\": \"Currency\",\n\t\t\"number\": \"Number\",\n\t\t\"percent\": \"Percent\",\n\t\t\"date\": \"Date\",\n\t\t\"string\": \"Text\",\n\t\t\"custom-format\": \"Custom\",\n\t\t\"decimal-places\":\"Decimal places\",\n\t\t\"separator\":\"Group separator\",\n\t\t\"negative\":\"Negative number\",\n\t\t\"currency-symbol\":\"Сurrency\",\n\t\t\"date-format\":\"Date format\",\n\t\t\"format-docs\":\"How to create a format\",\n\t\t// titles\n\t\t\"undo-redo\": \"Undo/Redo\",\n\t\t\"font\": \"Font\",\n\t\t\"text\": \"Text\",\n\t\t\"cell\": \"Cell\",\n\t\t\"align\": \"Align\",\n\t\t\"format\": \"Number\",\n\t\t\"column\": \"Column\",\n\t\t\"borders\": \"Borders\",\n\t\t\"px\": \"px\",\n\t\t\"apply\": \"Apply\",\n\t\t// popups and dialogs\n\t\t\"cancel\": \"Cancel\",\n\t\t\"save\": \"Save\",\n\t\t// multisheets\n\t\t\"sheet\": \"Sheet\",\n\t\t// conditions\n\t\t\"conditional-format\": \"Conditional Format\",\n\t\t\"conditional-common\": \"Common\",\n\t\t\"conditional-text\": \"Text\",\n\t\t\"condition\": \"Condition\",\n\t\t\"conditional-style\": \"Style\",\n\t\t\"conditional-operator\": \"Operator\",\n\t\t\"conditional-between\":\"between\",\n\t\t\"conditional-not-equal\":\"not equal\",\n\t\t// ranges\n\t\t\"range\": \"Range\",\n\t\t\"range-title\": \"Named ranges\",\n\t\t\"range-name\": \"Name\",\n\t\t\"range-cells\": \"Range\",\n\t\t\"range-scope\": \"Scope\",\n\t\t\"range-global\": \"Book\",\n\t\t// images\n\t\t\"image-or\": \"or\",\n\t\t\"image-title\": \"Add image\",\n\t\t\"image-upload\": \"Select file for upload\",\n\t\t\"image-url\": \"URL (e.g. http://*)\",\n\t\t// sparklines\n\t\t\"sparkline-title\": \"Add sparkline\",\n\t\t\"sparkline-type\": \"Type\",\n\t\t\"sparkline-range\": \"Range\",\n\t\t\"sparkline-color\": \"Color\",\n\t\t\"sparkline-positive\": \"Positive\",\n\t\t\"sparkline-negative\": \"Negative\",\n\t\t// custom format\n\t\t\"format-title\": \"Set format\",\n\t\t\"format-pattern\": \"Format pattern\",\n\t\t//dropdown\n\t\t\"dropdown-empty\": \"Empty cells\",\n\t\t\"dropdown-empty-option\": \"Empty option\",\n\t\t\"dropdown-title\": \"Add dropdown\",\n\t\t\"dropdown-range\": \"Range\",\n\t\t// confirm\n\t\t\"ok\": \"OK\",\n\t\t// import/export\n\t\t\"import-title\": \"Import\",\n\t\t\"import-not-support\": \"Sorry, your browser does not support import\",\n\t\t\"export-title\": \"Export\",\n\t\t\"export-name\": \"Name of xslx file\",\n\t\t\"export-all-sheets\":\"Export all sheets\",\n\t\t// add link\n\t\t\"link-title\": \"Add Link\",\n\t\t\"link-name\": \"Text\",\n\t\t\"link-url\": \"URL\",\n\t\t//images\n\t\t\"image\": \"Image\",\n\t\t\"add-image-cell\":\"Add to cell\",\n\t\t\"add-image-top\":\"Add above cells\",\n\t\t//charts\n\t\t\"graph\": \"Graph\",\n\t\t\"add-sparkline\":\"Add to cell\",\n\t\t\"add-chart\":\"Add above cells\",\n\t\t//controls\n\t\t\"controls\":\"Controls\",\n\t\t\"add-checkbox\":\"Add checkbox\",\n\t\t\"add-radio\":\"Add radio group\",\n\t\t//conditional format labels\n\t\t\"display\" : \"Display\",\n\t\t\"value\" : \"Value\",\n\t\t// confirm messages\n\t\t\"range-remove-confirm\": \"Are you sure you want to remove the range permanently?\",\n\t\t\"sheet-remove-confirm\": \"Are you sure you want to remove the sheet permanently?\",\n\t\t\"merge-cell-confirm\":\"Only the left top value will remain after merging. Continue?\",\n\t\t\"error-range\": \"The range is incorrect!\",\n\t\t\"error-link\": \"The link is incorrect!\",\n\t\t//print\n\t\t\"print\":\"Print\",\n\t\t\"print-title\":\"Before you print..\",\n\t\t\"print-settings\":\"General settings\",\n\t\t\"print-paper\":\"Paper size\",\n\t\t\"print-layout\":\"Layout\",\n\t\t\"sheets\":\"Sheets:\",\n\t\t\"selection\":\"Selected cells\",\n\t\t\"borderless\":\"Hide gridlines\",\n\t\t\"sheet-names\":\"Show sheet names\",\n\t\t\"skip-rows\":\"Skip empty rows\",\n\t\t\"margin\":\"Hide margins\",\n\t\t\"page-letter\":\"Letter\",\n\t\t\"page-a4\":\"A4 (210x297mm)\",\n\t\t\"page-a3\":\"A3 (297x420mm)\",\n\t\t\"page-width\":\"Page width\",\n\t\t\"page-actual\":\"Actual Size\",\n\t\t\"page-portrait\":\"Portrait\",\n\t\t\"page-landscape\":\"Landscape\",\n\t\t\"external-ui\":\"External UI\",\n\t\t\"print-borders\": \"Show print borders\",\n\t\t//comment\n\t\t\"comment\":\"Comment\",\n\t\t//resize\n\t\t\"width\":\"Width\",\n\t\t\"height\":\"Height\",\n\t\t\"fit-content\": \"Fit to content\",\n\t\t\"default-size\":\"Reset to default\",\n\t\t//views\n\t\t\"edit-view\":\"Edit\",\n\t\t\"remove-view\":\"Remove\",\n\t\t\"chart-edit\":\"Edit chart\",\n\n\t\t\"chart-common\":\"Common\",\n\t\t\"chart-series\":\"Series\",\n\t\t\"chart-extras\":\"Extras\",\n\n\t\t\"export-view\":\"Download\",\n\t\t\"export-view-pdf\":\"PDF document\",\n\t\t\"export-view-png\":\"PNG image\",\n\t\t\"export-view-excel\":\"Excel file\",\n\n\t\t\"line-chart\":\"Line\",\n\t\t\"area-chart\":\"Area\",\n\t\t\"bar-chart\":\"Bar\",\n\t\t\"donut-chart\":\"Donut\",\n\t\t\"pie-chart\":\"Pie\",\n\t\t\"radar-chart\":\"Radar\",\n\t\t\"spline-chart\":\"Spline\",\n\t\t\"splinearea-chart\":\"Spline Area\",\n\t\t\"scatter-chart\":\"Scatter\",\n\n\t\t\"chart-scale\":\"Scale\",\n\t\t\"chart-x-axis\":\"X axis\",\n\t\t\"chart-y-axis\":\"Y axis\",\n\t\t\"chart-lines\":\"Lines\",\n\t\t\"chart-scale-color\":\"Scale color\",\n\t\t\"chart-xAxis-title\":\"Title\",\n\t\t\"chart-yAxis-title\":\"Title\",\n\t\t\"chart-col-xAxis\":\"Use left column as xAxis\",\n\t\t\"chart-col-yAxis\":\"Use left column as yAxis\",\n\t\t\"chart-row-xAxis\":\"Use top row as xAxis\",\n\t\t\"chart-row-yAxis\":\"Use top row as yAxis\",\n\t\t\"chart-xAxis-range\":\"Range\",\n\t\t\"chart-yAxis-origin\":\"Origin\",\n\t\t\"chart-yAxis-start\":\"Start\",\n\t\t\"chart-yAxis-end\":\"End\",\n\t\t\"chart-yAxis-step\":\"Step\",\n\t\t\"chart-yAxis-note\":\"* Set all the following parameters to see the effect\",\n\n\t\t\"chart-legend\":\"Legend\",\n\t\t\"chart-row-legend\":\"Use top row as legend\",\n\t\t\"chart-col-legend\":\"Use left column as legend\",\n\t\t\"chart-legend-range\":\"Legend range\",\n\t\t\"chart-legend-align\":\"Align\",\n\t\t\"chart-legend-left\":\"Left\",\n\t\t\"chart-legend-right\":\"Right\",\n\t\t\"chart-legend-center\":\"Center\",\n\t\t\"chart-legend-valign\":\"Vertical align\",\n\t\t\"chart-legend-top\":\"Top\",\n\t\t\"chart-legend-middle\":\"Middle\",\n\t\t\"chart-legend-bottom\":\"Bottom\",\n\n\t\t\"chart-item\":\"Data\",\n\t\t\"stacked-chart\":\"Stacked\",\n\t\t\"horizontal-chart\":\"Horizontal\",\n\t\t\"chart-range\":\"Range\",\n\t\t\"chart-series-color\":\"Color\",\n\t\t\"add-line\":\"Add line\",\n\t\t\"chart-type\":\"Type\",\n\t\t\"chart-tooltip\":\"Tooltips\",\n\t\t\"chart-label\":\"Labels\",\n\n\t\t\"chart-data-from\":\"Data series from\",\n\t\t\"chart-columns\":\"columns\",\n\t\t\"chart-rows\":\"rows\",\n\n\t\t\"chart-markers\":\"Markers\",\n\t\t\"chart-markers-square\":\"Square\",\n\t\t\"chart-markers-triangle\":\"Triangle\",\n\t\t\"chart-markers-diamond\":\"Diamond\",\n\t\t\"chart-markers-round\":\"Round\",\n\n\t\t\"chart-pie-3d\":\"3D\",\n\n\t\t\"chart-radar-circle\":\"Circled lines\",\n\n\t\t//validation\n\t\t\"add-cell-validation\": \"Add data validation\",\n\t\t\"remove-cell-validation\": \"Remove data validation\",\n\t\t\"highlight-invalid-data\": \"Highlight invalid data\",\n\t\t\"remove-highlight-invalid-data\": \"Remove highlighting of invalid data\",\n\t\t\"validation-placeholder-text\": \"Some text\",\n\t\t\"validation-type\": \"Type\",\n\t\t\"validation-any\": \"Any\",\n\t\t\"validation-date\": \"Date\",\n\t\t\"validation-number\": \"Number\",\n\t\t\"validation-text\": \"Text\",\n\t\t\"validation-text-length\": \"Text length\",\n\t\t\"validation-range\": \"Range\",\n\t\t\"validation-integer\": \"Integers only\",\n\t\t\"validation-ignore-empty\": \"Ignore empty\",\n\t\t\"validation-input-message\": \"Input message\",\n\t\t\"validation-error-title\": \"Error title\",\n\t\t\"validation-error-message\": \"Error message\",\n\t\t\"validation-error-handle\": \"Error handle\",\n\t\t\"validation-error-stop\": \"Stop\",\n\t\t\"validation-error-warning\": \"Warning\",\n\t\t\"validation-error-information\": \"Information\",\n\t\t\"validation-error-title-text\": \"Error\",\n\t\t\"validation-error-message-text\": \"Invalid data\",\n\t\t\"validation-error-save\": \"Save\",\n\t\t\"validation-error-restore\": \"Restore\"\n\t},\n\ttooltips: {\n\t\t\"color\": \"Font color\",\n\t\t\"background\": \"Background color\",\n\t\t\"font-family\": \"Font family\",\n\t\t\"font-size\": \"Font size\",\n\t\t\"text-align\": \"Horizontal align\",\n\t\t\"vertical-align\": \"Vertical align\",\n\t\t\"borders\": \"Borders\",\n\t\t\"borders-no\": \"Clear borders\",\n\t\t\"borders-left\": \"Left border\",\n\t\t\"borders-top\": \"Top border\",\n\t\t\"borders-right\": \"Right border\",\n\t\t\"borders-bottom\": \"Bottom border\",\n\t\t\"borders-all\": \"All borders\",\n\t\t\"borders-outer\": \"Outer borders\",\n\t\t\"borders-top-bottom\": \"Top and bottom borders\",\n\t\t\"borders-color\": \"Border color\",\n\t\t\"align-left\": \"Left align\",\n\t\t\"align-center\": \"Center align\",\n\t\t\"align-right\": \"Right align\",\n\t\t\"align-top\": \"Top align\",\n\t\t\"align-middle\": \"Middle align\",\n\t\t\"align-bottom\": \"Bottom align\",\n\t\t\"span\": \"Merge\",\n\t\t\"wrap\": \"Text wrap\",\n\t\t\"undo\": \"Undo\",\n\t\t\"redo\": \"Redo\",\n\t\t\"format\": \"Number format\",\n\t\t\"increase-decimals\":\"Increase decimal places\",\n\t\t\"decrease-decimals\":\"Decrease decimal places\",\n\t\t\"font-weight\": \"Bold\",\n\t\t\"font-style\": \"Italic\",\n\t\t\"underline\": \"Underline\",\n\t\t\"strike\": \"Strike\",\n\t\t\"hide-gridlines\": \"Hide/show gridlines\",\n\t\t\"hide-headers\": \"Hide/show headers\",\n\t\t\"show-formulas\": \"Hide/show formulas\",\n\t\t\"print-borders\": \"Hide/show print borders\",\n\t\t\"create-filter\": \"Create/remove filters\",\n\t\t\"freeze-columns\" : \"Freeze/unfreeze columns\",\n\t\t\"add-range\": \"Set name for the selected range\",\n\t\t\"conditional\": \"Conditional formatting\",\n\t\t\"add-sheet\": \"Add Sheet\",\n\t\t\"lock-cell\": \"Lock/unlock cell\",\n\t\t\"clear\": \"Clear\",\n\t\t\"add-link\": \"Add link\",\n\t\t\"row\": \"Rows\",\n\t\t\"column\": \"Columns\",\n\t\t\"sheet\": \"Sheet\",\n\t\t\"add-image\": \"Image\",\n\t\t\"add-sparkline\": \"Graph\",\n\t\t\"add-comment\": \"Comment\",\n\t\t\"increase-indent\" : \"Increase indent\",\n\t\t\"decrease-indent\": \"Decrease indent\",\n\t\t\"scale\": \"Scale\",\n\t\t\"show-sheet\": \"Show sheet\",\n\t\t\"validation\": \"Validation\",\n\t\t\"controls\":\"Controls\",\n\t\t\"graph\": \"Graph\",\n\t\t\"image\": \"Image\"\n\t},\n\tmenus:{\n\t\t\"remove-sheet\": \"Remove sheet\",\n\t\t\"rename-sheet\": \"Rename sheet\",\n\t\t\"hide-sheet\": \"Hide sheet\",\n\t\t\"file\": \"File\",\n\t\t\"new\": \"New\",\n\t\t\"new-sheet\": \"New sheet\",\n\t\t\"excel-import\": \"Import from Excel\",\n\t\t\"excel-export\": \"Export to Excel\",\n\t\t\"sheet\": \"Sheets\",\n\t\t\"copy-sheet\": \"Copy to new sheet\",\n\t\t\"edit\": \"Edit\",\n\t\t\"undo\": \"Undo\",\n\t\t\"redo\": \"Redo\",\n\t\t\"columns\": \"Columns\",\n\t\t\"insert-column\": \"Insert column\",\n\t\t\"delete-column\": \"Delete column\",\n\t\t\"show-column\": \"Show column\",\n\t\t\"hide-column\": \"Hide column\",\n\t\t\"resize-column\": \"Resize column\",\n\t\t\"rows\": \"Rows\",\n\t\t\"insert-row\": \"Insert row\",\n\t\t\"delete-row\": \"Delete row\",\n\t\t\"show-row\": \"Show row\",\n\t\t\"hide-row\": \"Hide row\",\n\t\t\"resize-row\": \"Resize row\",\n\t\t\"insert\": \"Insert\",\n\t\t\"conditional-format\": \"Conditional format\",\n\t\t\"common\": \"common\",\n\t\t\"text\": \"text\",\n\t\t\"clear\": \"Clear\",\n\t\t\"clear-value\":\"Values\",\n\t\t\"clear-style\":\"Styles\",\n\t\t\"clear-conditional-formats\":\"Conditional formats\",\n\t\t\"clear-dropdown-editors\":\"Dropdowns\",\n\t\t\"clear-filters\":\"Filters\",\n\t\t\"clear-comments\":\"Comments\",\n\t\t\"clear-all\":\"All\",\n\t\t\"image\": \"Image\",\n\t\t\"add-image-cell\":\"Add to cell\",\n\t\t\"add-image-top\":\"Add above cells\",\n\t\t\"graph\": \"Graph\",\n\t\t\"add-sparkline\":\"Add to cell\",\n\t\t\"add-chart\":\"Add above cells\",\n\t\t\"controls\":\"Controls\",\n\t\t\"add-checkbox\":\"Add checkbox\",\n\t\t\"add-radio\":\"Add radio group\",\n\t\t\"data\": \"Data\",\n\t\t\"add-link\": \"Add link\",\n\t\t\"add-range\": \"Named ranges\",\n\t\t\"sort\": \"Sort\",\n\t\t\"sort-asc\": \"Sort A to Z\",\n\t\t\"sort-desc\": \"Sort Z to A\",\n\t\t\"view\": \"View\",\n\t\t\"freeze-columns\": \"Freeze/unfreeze columns\",\n\t\t\"freeze-rows\": \"Freeze/unfreeze rows\",\n\t\t\"hide-gridlines\": \"Hide/show gridlines\",\n\t\t\"hide-headers\": \"Hide/show headers\",\n\t\t\"show-formulas\": \"Hide/show formulas\",\n\t\t\"create-filter\": \"Create/remove filters\",\n\t\t\"add-dropdown\": \"Add dropdown\",\n\t\t\"lock-cell\": \"Lock/unlock cell\",\n\t\t\"print\": \"Print\",\n\t\t\"print-borders\": \"Hide/show print borders\",\n\t\t\"add-comment\":\"Comment\",\n\t\t\"cut\": \"Cut\",\n\t\t\"copy\": \"Copy\",\n\t\t\"paste\": \"Paste\",\n\t\t\"special-paste\": \"Special paste\",\n\t\t\"paste-values\": \"Values\",\n\t\t\"paste-formulas\": \"Formulas\",\n\t\t\"paste-styles\": \"Styles\",\n\t\t\"paste-conditions\": \"Conditional formats\",\n\t\t\"paste-validation\": \"Validation\",\n\t\t\"add-cell-validation\": \"Add data validation\",\n\t\t\"remove-cell-validation\": \"Remove data validation\",\n\t\t\"highlight-invalid-data\": \"Highlight invalid data\",\n\t\t\"remove-highlight-invalid-data\": \"Remove highlighting of invalid data\",\n\t\t\"validation\": \"Validation\"\n\t},\n\ttable:{\n\t\t\"math-error\":\"#ERROR!\",\n\t\t\"math-ref-error\":\"#REF!\",\n\t\t\"format-error\":\"INCORRECT FORMAT\"\n\t},\n\tliveEditor:{\n\t\t\"edit\":\"Edit:\",\n\t\t\"functions-syntax\": Object.assign(getMethodParams() , {\n\t\t\t\"IMAGE\": [\n\t\t\t\t[\n\t\t\t\t\t\"Url\",\n\t\t\t\t\t\"Required. Image link\"\n\t\t\t\t]\n\t\t\t],\n\t\t\t\"HYPERLINK\": [\n\t\t\t\t[\n\t\t\t\t\t\"Link_location\",\n\t\t\t\t\t\"Required. The path and file name to the document to be opened. Link_location can refer to a place in a document — such as a specific cell or named range.\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"Friendly_name\",\n\t\t\t\t\t\"Optional. The jump text or numeric value that is displayed in the cell. Friendly_name is displayed in blue and is underlined. If friendly_name is omitted, the cell displays the link_location as the jump text.\"\n\t\t\t\t]\n\t\t\t],\n\t\t\t\"SPARKLINE\": [\n\t\t\t\t[\n\t\t\t\t\t\"Range\",\n\t\t\t\t\t\"Required. Range or named range\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"Type\",\n\t\t\t\t\t\"Required. Sparkline type\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"Positive_color\",\n\t\t\t\t\t\"Required. Positive color\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"Negative_color\",\n\t\t\t\t\t\"Required. Negative color\"\n\t\t\t\t]\n\t\t\t],\n\t\t\t\"CHECKBOX\": [\n\t\t\t\t[\n\t\t\t\t\t\"State\",\n\t\t\t\t\t\"Optional. Сheckbox state\"\n\t\t\t\t]\n\t\t\t],\n\t\t\t\"RADIO\": [\n\t\t\t\t[\n\t\t\t\t\t\"Y_position\",\n\t\t\t\t\t\"Required. Y-axis position in radio group\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"X_position\",\n\t\t\t\t\t\"Required. X-axis position in radio group\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"Row_count\",\n\t\t\t\t\t\"Required. Rows count in radio group\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"Col_count\",\n\t\t\t\t\t\"Required. Сolumns count in radio group\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"State\",\n\t\t\t\t\t\"Optional. Radio button state\"\n\t\t\t\t]\n\t\t\t]\n\t\t})\n\t},\n\tformats:{\n\t\t\"dateFormat\": \"mm/dd/yyyy\",\n\t\t\"timeFormat\": \"hh:mm AM/PM\",\n\t\t\"longDateFormat\": \"dd mmmm yyyy\",\n\t\t\"fullDateFormat\": \"mm/dd/yyyy hh:mm AM/PM\",\n\t\t\"parseDateTime\": \"%m/%d/%Y %G:%i:%s\",\n\t\t\"parseDate\": \"%m/%d/%Y\",\n\t\t\"currencies\": [\n\t\t\t\"{obj} €\",\n\t\t\t\"¥{obj}\",\n\t\t\t\"R$ {obj}\",\n\t\t\t\"{obj} rub.\"\n\t\t]\n\t}\n};\n","import en from \"./locales/en\";\nwebix.i18n.spreadsheet = en;","webix.protoUI({\n\tname: \"ssheet-align\",\n\t$cssName:\"richselect\",\n\t$init: function(config){\n\t\tconfig.options =  {\n\t\t\tview:\"datasuggest\",\n\t\t\tbody:{\n\t\t\t\tview: \"ssheet-icons\",\n\t\t\t\ttooltip: {\n\t\t\t\t\ttemplate:\"#tooltip#\"\n\t\t\t\t},\n\t\t\t\txCount:3, yCount:1\n\t\t\t},\n\t\t\tdata: config.data\n\t\t};\n\t}\n},webix.ui.richselect);","webix.protoUI({\n\tname: \"ssheet-borders-suggest\",\n\tdefaults:{\n\t\twidth: 300\n\t},\n\t$init: function(config){\n\t\tconst skin = webix.skin.$name;\n\t\tconfig.body = {\n\t\t\tmargin: 6,\n\t\t\tcols:[\n\t\t\t\t{ view: \"ssheet-icons\", scroll: false, select: true,\n\t\t\t\t\txCount: 4,\n\t\t\t\t\tyCount: 2,\n\t\t\t\t\ttooltip: {\n\t\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\t\treturn webix.i18n.spreadsheet.tooltips[\"borders-\"+obj.id];\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ton:{\n\t\t\t\t\t\tonAfterSelect: function(){\n\t\t\t\t\t\t\tvar suggest = this.getParentView().getParentView();\n\t\t\t\t\t\t\tsuggest.updateMasterValue(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\tvar css = \"webix_ssheet_button_icon webix_ssheet_icon ssi-borders-\"+obj.value;\n\t\t\t\t\t\treturn \"<span class='\"+css+\"'></span>\";\n\t\t\t\t\t},\n\t\t\t\t\tdata: config.data\n\t\t\t\t},\n\t\t\t\t{ view: \"ssheet-separator\"},\n\t\t\t\t{\n\t\t\t\t\trows:[\n\t\t\t\t\t\t{ view: \"ssheet-color\", css: config.css, name: config.name, width: 68,\n\t\t\t\t\t\t\tvalue: (skin == \"contrast\" || skin == \"dark\") ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[\"borders-color\"],\n\t\t\t\t\t\t\ttitle: \"<span class='webix_icon wxi-pencil'></span>\",\n\t\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\t\tonChange: function(){\n\t\t\t\t\t\t\t\t\tvar suggest = this.getParentView().getParentView().getParentView();\n\t\t\t\t\t\t\t\t\tsuggest.updateMasterValue(false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"richselect\", css:\"webix_ssheet_border_type\", value:\"thin\", suggest:{\n\t\t\t\t\t\t\t\tfitMaster:false,\n\t\t\t\t\t\t\t\twidth:130,\n\t\t\t\t\t\t\t\tcss: \"webix_ssheet_suggest\",\n\t\t\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\t\t\ttemplate:\"<div class='webix_ssheet_border webix_ssheet_border_#id#'></div>\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdata:[\n\t\t\t\t\t\t\t\t\t{ id:\"thin\" },\n\t\t\t\t\t\t\t\t\t{ id:\"medium\" },\n\t\t\t\t\t\t\t\t\t{ id:\"thick\" },\n\t\t\t\t\t\t\t\t\t{ id:\"dashed\" }, \n\t\t\t\t\t\t\t\t\t{ id:\"dotted\" },\n\t\t\t\t\t\t\t\t\t{ id:\"double\" }\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ }\n\t\t\t\t\t]\n\t\t\t\t}\n\n\t\t\t]\n\t\t};\n\t},\n\tupdateMasterValue: function(hide){\n\t\tconst value = this.getValue();\n\t\tconst master = webix.$$(this.config.master);\n\t\tmaster.setValue(value, \"user\");\n\t\tif(hide)\n\t\t\tthis.hide();\n\t},\n\tsetValue: function(value){\n\t\tif(value[0])\n\t\t\tthis.getList().select(value[0]);\n\t\tif(value[1])\n\t\t\tthis.getColorView().setValue(value[1]);\n\t\tif(value[2])\n\t\t\tthis.getTypeView().setValue(value[2]);\n\t},\n\tgetValue: function(){\n\t\treturn [this.getList().getSelectedId(), this.getColorView().getValue()||\"\", this.getTypeView().getValue()||\"\"];\n\t},\n\tgetList: function(){\n\t\treturn this.getBody().getChildViews()[0];\n\t},\n\tgetColorView: function(){\n\t\treturn this.getBody().getChildViews()[2].getChildViews()[0];\n\t},\n\tgetTypeView: function(){\n\t\treturn this.getBody().getChildViews()[2].getChildViews()[1];\n\t},\n\tgetItemText:function(){\n\t\treturn \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-borders-all'>\";\n\t}\n},webix.ui.suggest);\n\nwebix.protoUI({\n\tname: \"ssheet-borders\",\n\t$cssName: \"richselect\",\n\t$init: function(config){\n\t\tconfig.options = {\n\t\t\tview: \"ssheet-borders-suggest\",\n\t\t\tfitMaster: false,\n\t\t\tdata: config.data\n\t\t};\n\n\t\tthis.$ready.push(webix.bind(function(){\n\t\t\tthis.getPopup().config.master = this.config.id;\n\t\t},this));\n\n\t},\n\tsetValue: function(value, config){\n\t\tif(webix.isArray(value)){\n\t\t\tif(!this.config.value || value[0] !=  this.config.value[0] || value[1] !=  this.config.value[1]){\n\t\t\t\tthis.getPopup().setValue(value);\n\t\t\t}\n\t\t\tconst old = this.config.value;\n\t\t\tthis.config.value = value;\n\t\t\tif (value[0])\n\t\t\t\tthis.callEvent(\"onChange\", [this.getValue(), old, config]);\n\t\t}\n\t\treturn value;\n\t},\n\tgetValue: function(){\n\t\treturn  this.getPopup().getValue().join(\",\");\n\t},\n\tgetList: function(){\n\t\treturn this.getPopup().getBody().getChildViews()[0];\n\t},\n\tgetColorView: function(){\n\t\treturn this.getPopup().getBody().getChildViews()[1].getChildViews()[0];\n\t}\n},webix.ui.richselect);","// toolbar: color selector\nwebix.protoUI({\n\t$cssName: \"colorboard\",\n\tname: \"ssheet-colorboard\",\n\tdefaults:{\n\t\theight: 196,\n\t\twidth: 244,\n\t\tcss: \"webix_ssheet_colorboard\",\n\t\tpalette: [\n\t\t\t[\"#000000\", \"#434343\", \"#666666\", \"#999999\", \"#b7b7b7\", \"#cccccc\", \"#d9d9d9\", \"#efefef\", \"#f3f3f3\", \"#ffffff\"],\n\t\t\t[\"#980000\", \"#ff0000\", \"#ff9900\", \"#ffff00\", \"#00ff00\", \"#00ffff\", \"#4a86e8\", \"#0000ff\", \"#9900ff\", \"#ff00ff\"],\n\t\t\t[\"#e6b8af\", \"#f4cccc\", \"#fce5cd\", \"#fff2cc\", \"#d9ead3\", \"#d0e0e3\", \"#c9daf8\", \"#cfe2f3\", \"#d9d2e9\", \"#ead1dc\"],\n\t\t\t[\"#dd7e6b\", \"#ea9999\", \"#f9cb9c\", \"#ffe599\", \"#b6d7a8\", \"#a2c4c9\", \"#a4c2f4\", \"#9fc5e8\", \"#b4a7d6\", \"#d5a6bd\"],\n\t\t\t[\"#cc4125\", \"#e06666\", \"#f6b26b\", \"#ffd966\", \"#93c47d\", \"#76a5af\", \"#6d9eeb\", \"#6fa8dc\", \"#8e7cc3\", \"#c27ba0\"],\n\t\t\t[\"#a61c00\", \"#cc0000\", \"#e69138\", \"#f1c232\", \"#6aa84f\", \"#45818e\", \"#3c78d8\", \"#3d85c6\", \"#674ea7\", \"#a64d79\"],\n\t\t\t[\"#85200c\", \"#990000\", \"#b45f06\", \"#bf9000\", \"#38761d\", \"#134f5c\", \"#1155cc\", \"#0b5394\", \"#351c75\", \"#741b47\"],\n\t\t\t[\"#5b0f00\", \"#660000\", \"#783f04\", \"#7f6000\", \"#274e13\", \"#0c343d\", \"#1c4587\", \"#073763\", \"#20124d\", \"#4c1130\"]\n\t\t]\n\t},\n\t$init:function(){\n\t\tthis.attachEvent(\"onSelect\", function(value){\n\t\t\tthis.getParentView().setMasterValue({ value }, false, \"user\");\n\t\t});\n\t}\n}, webix.ui.colorboard);\n\nwebix.protoUI({\n\t$cssName: \"richselect\",\n\tname: \"ssheet-color\",\n\tdefaults:{\n\t\tcss: \"webix_ssheet_color\",\n\t\ticon: \"wxi-menu-down\",\n\t\tsuggest:{\n\t\t\tborderless: true,\n\t\t\tbody:{\n\t\t\t\tview: \"ssheet-colorboard\"\n\t\t\t}\n\t\t}\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_color\";\n\t},\n\t$renderInput: function(config, divStart, id){\n\t\tconst color  = this.renderColor.call(this);\n\t\tdivStart = divStart.replace(/([^>]>)(.*)(<\\/div)/, function(match, p1, p2, p3){\n\t\t\treturn p1+config.title +color+p3;\n\t\t});\n\n\t\treturn webix.ui.colorpicker.prototype.$renderInput.call(this,config, divStart, id);\n\t},\n\t$setValue: function(value){\n\t\tvalue = value || \"\";\n\t\tthis.getColorNode().style.backgroundColor = value;\n\t},\n\trenderColor: function(){\n\t\treturn \"<div class='webix_ssheet_cp_color' style='background-color:\"+this.config.value+\";'> </div>\";\n\t},\n\tgetColorNode: function(){\n\t\treturn this.$view.firstChild.firstChild.childNodes[1];\n\t},\n\t$renderIcon:function(){\n\t\treturn webix.ui.text.prototype.$renderIcon.apply(this,arguments);\n\t}\n},webix.ui.colorpicker);","const group = {\n\tvalue: null,\n\tset: function(method, master){\n\t\tif(!this.value){\n\t\t\tthis.start();\n\t\t\tmethod.call(master);\n\t\t\tthis.end();\n\t\t}\n\t\telse\n\t\t\tmethod.call(master);\n\t},\n\tstart(){\n\t\tthis.value = webix.uid();\n\t},\n\tend(){\n\t\tthis.value = null;\n\t}\n};\n\nexport default group;","import {addMethod, addMethodBatch, numberMethods, dateMethods, textMethods, financialMethods} from \"@xbs/muon\";\nimport group from \"../operations/undo_group\";\n\nexport function addMathMethods(){\n\taddMethodBatch(dateMethods);\n\taddMethodBatch(financialMethods);\n\taddMethodBatch(numberMethods);\n\taddMethodBatch(textMethods);\n}\n\nexport function init(view){\n\tconst math = {\n\t\tIMAGE: url => `<img class=\"webix_ssheet_cimage\" src=\"${webix.template.escape(url)}\">`,\n\t\tHYPERLINK: (url, text) => {\n\t\t\tconst escape = webix.template.escape;\n\t\t\tlet attrs;\n\n\t\t\tif(url[0] == \"#\")\n\t\t\t\tattrs = `href=\"javascript:void(0);\" class=\"webix_ssheet_ref\" data-ref=\"${escape(url.substr(1))}\"`;\n\t\t\telse\n\t\t\t\tattrs = `target=\"blank\" href=\"${escape(url)}\"`;\n\n\t\t\treturn `<a ${attrs}>${escape(text || url)}</a>`;\n\t\t},\n\t\tSPARKLINE: (arr, type, color1, color2) => {\n\t\t\tconst config = { type, color: color1, negativeColor:color2, paddingX:2, paddingY:2 };\n\n\t\t\tif(type == \"donut\")\n\t\t\t\twebix.extend(config, {type:\"pie\", donut:1}, true);\n\t\t\telse if(type == \"barH\")\n\t\t\t\twebix.extend(config, {type:\"bar\", horizontal:1}, true);\n\n\t\t\tfor(let i = 0 ; i < arr.length; i++)\n\t\t\t\tarr[i] = arr[i]||0;\n\n\t\t\tconst tableConfig = view.$$(\"cells\").config;\n\n\t\t\t//[FIXME] we do not know from which cell the method was called, so this is not the real width and height\n\t\t\tconst isCircle = config.type == \"pie\" || type == \"radar\";\n\t\t\tconst width = isCircle ? 100 : tableConfig.columnWidth;\n\t\t\tconst height = isCircle ? 100 : tableConfig.rowHeight;\n\t\t\treturn webix.Sparklines.getTemplate(config)(arr, { width, height });\n\t\t},\n\t\tCHECKBOX: state => !!state,\n\t\tRADIO: (rowPos, colPos, rowCount, colCount, state) => !!state\n\t};\n\n\tconst keys = Object.keys(math);\n\tkeys.forEach((key, i) => addMath(view, key, math[key], i == keys.length - 1));\n\n\tconst grid = view.$$(\"cells\");\n\tgrid.on_click[\"ssheet_checkbox\"] = function(ev, cell){\n\t\tconst value = view.getCellValue(cell.row, cell.column, false);\n\t\tview.setCellValue(cell.row, cell.column, `=checkbox(${value ? 0 : 1})`);\n\t\tview.refresh();\n\t};\n\tgrid.on_click[\"ssheet_radio\"] = function(ev, cell){\n\t\tsetRadioState(view, cell.row, cell.column);\n\t};\n\n\tview.attachEvent(\"onCommand\", action =>{\n\t\tif(action.id == \"add-radio\")\n\t\t\tview.addRadio();\n\t\telse if(action.id == \"add-checkbox\")\n\t\t\tview.addCheckbox();\n\t});\n}\n\nexport function setRadioState(view, row, column, state, page){\n\tconst math = view.getCellValue(row, column, true, page);\n\tif(/^=(radio)\\(/i.test(math)){\n\t\tconst [rowPos, colPos, rowCount, colCount] = math.match(/\\((.+?)\\)/)[1].split(\",\").map(v => v.trim());\n\n\t\tif(state === false){\n\t\t\tview.setCellValue(row, column, `=radio(${rowPos}, ${colPos}, ${rowCount}, ${colPos}, 0)`, page);\n\t\t\tview.refresh();\n\t\t}\n\t\telse{\n\t\t\tconst value = view.getCellValue(row, column, false);\n\t\t\tif(!value)\n\t\t\t\tgroup.set(()=>{\n\t\t\t\t\tfor(let r = 1; r <= rowCount; r++)\n\t\t\t\t\t\tfor(let c = 1; c <= colCount; c++)\n\t\t\t\t\t\t\tview.setCellValue(\n\t\t\t\t\t\t\t\trow - rowPos + r,\n\t\t\t\t\t\t\t\tcolumn - colPos + c,\n\t\t\t\t\t\t\t\t`=radio(${r}, ${c}, ${rowCount}, ${colCount}, ${r == rowPos && c == colPos ? 1 : 0})`,\n\t\t\t\t\t\t\t\tpage\n\t\t\t\t\t\t\t);\n\t\t\t\t\tview.refresh();\n\t\t\t\t});\n\t\t}\n\t}\n}\n\nexport function addMath(view, name, handler, sort){\n\tname = name.toUpperCase();\n\taddMethod(name, handler);\n\tif(view.$$(\"liveEditor\")){\n\t\t[\n\t\t\twebix.$$(view.$$(\"liveEditor\").config.suggest).getList(),\n\t\t\twebix.$$(view.$$(\"formulaButton\").config.popup).getBody()\n\t\t].forEach(list => {\n\t\t\tif(!list.exists(name)){\n\t\t\t\tlist.add({id:name, value:name});\n\t\t\t\tif(sort)\n\t\t\t\t\tlist.sort(\"value\", \"asc\", \"string\");\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport function getJsDateFromExcel(excelDate) {\n\tconst date = new Date(Math.round((excelDate - 25569) * 86400 * 1000));\n\treturn new Date(date.getTime() + date.getTimezoneOffset() * 60000);\n}\n\nexport function getExcelDateFromJs(jsDate) {\n\tconst returnDateTime = 25569 + ((jsDate.getTime() - (jsDate.getTimezoneOffset() * 60000)) / (86400 * 1000));\n\treturn returnDateTime.toString();\n}\n\nexport function getMathTemplate(math, value){\n\tif(typeof math == \"string\"){\n\t\tif(/^=(checkbox)\\(/i.test(math))\n\t\t\treturn `<span class='webix_icon ssheet_checkbox wxi-checkbox-${value ? \"marked\" : \"blank\"}'></span>`;\n\t\telse if(/^=(radio)\\(/i.test(math))\n\t\t\treturn `<span class='webix_icon ssheet_radio wxi-radiobox-${value ? \"marked\" : \"blank\"}'></span>`;\n\t}\n\treturn value;\n}","import {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\n\nfunction getJsDate(value){\n\tif ((value || value === 0) && !(value instanceof Date) && !isNaN(value)){\n\t\tvalue = getJsDateFromExcel(value);\n\t}\n\treturn value;\n}\n\nfunction getExcelDate(value){\n\tif (value && value instanceof Date){\n\t\tvalue = getExcelDateFromJs(value);\n\t}\n\treturn value;\n}\n\nwebix.protoUI({\n\t$cssName: \"datepicker\",\n\tname: \"ssheet-datepicker\",\n\tgetValue:function(){\n\t\tconst value = webix.ui.datepicker.prototype.getValue.apply(this);\n\t\treturn getExcelDate(value) || \"\";\n\t},\n\t$prepareValue:function(value){\n\t\tvalue = getJsDate(value);\n\t\treturn webix.ui.datepicker.prototype.$prepareValue.apply(this, [value]);\n\t}\n}, webix.ui.datepicker);\n\nwebix.protoUI({\n\t$cssName: \"daterangepicker\",\n\tname: \"ssheet-daterangepicker\",\n\tgetValue:function(){\n\t\tlet value = webix.ui.datepicker.prototype.getValue.apply(this);\n\t\tif (value){\n\t\t\tvalue = webix.copy(value);\n\t\t\tvalue.start = getExcelDate(value.start);\n\t\t\tvalue.end = getExcelDate(value.end);\n\t\t}\n\t\treturn value || \"\";\n\t},\n\t$prepareValue:function(value){\n\t\tif (!value){\n\t\t\tvalue = { start:null, end:null };\n\t\t}\n\t\telse if (!value.start && !value.end)\n\t\t\tvalue = { start:value };\n\n\t\tvalue.start = getJsDate(value.start);\n\t\tvalue.end = getJsDate(value.end);\n\n\t\treturn webix.ui.daterangepicker.prototype.$prepareValue.apply(this, [value]);\n\t}\n}, webix.ui.daterangepicker);","export function init(view){\n\tconst events = [\n\t\t{name:\"onSheetAdd\", type:\"insert\"},\n\t\t{name:\"onSheetRemove\", type:\"remove\"},\n\t\t{name:\"onSheetRename\", type:\"rename\"},\n\t\t{name:\"onSheetStateChange\", type:\"state\"},\n\t\t{name:\"onCellChange\"},\n\t\t{name:\"onStyleChange\"},\n\t\t{name:\"onAction\"},\n\t\t{name:\"onRowOperation\"},\n\t\t{name:\"onColumnOperation\"},\n\t\t{name:\"onAfterConditionSet\"},\n\t\t{name:\"onAfterRangeSet\"},\n\t\t{name:\"onAfterSpan\"},\n\t\t{name:\"onAfterSplit\"},\n\t\t{name:\"onZoom\"},\n\t\t{name:\"onAfterFilter\", view: \"cells\"},\n\t\t{name:\"onRowResize\", view: \"cells\"},\n\t\t{name:\"onColumnResize\", view: \"cells\"}\n\t];\n\n\tlet thread;\n\tfor (let i = 0; i < events.length; i++){\n\t\tconst handler = events[i];\n\t\t(handler.view ? view.$$(handler.view) : view).attachEvent(handler.name, function(name, newName, _, p1, p2){\n\t\t\tif (view._loading_data || view._type_change) return;\n\n\t\t\tlet params;\n\t\t\tif(handler.type)\n\t\t\t\tparams = handler.type == \"rename\" ? [handler.type, newName, name] : [handler.type, name];\n\t\t\telse{\n\t\t\t\tlet activeSheet = view.getActiveSheet();\n\t\t\t\tif(handler.name == \"onAction\" && newName.page && newName.page != activeSheet)\n\t\t\t\t\tactiveSheet = newName.page;\n\t\t\t\telse if([\"onAfterSplit\", \"onAfterSpan\", \"onCellChange\", \"onColumnOperation\", \"onRowOperation\"].indexOf(handler.name) != -1 && p1 != activeSheet)\n\t\t\t\t\tactiveSheet = p1;\n\t\t\t\telse if([\"onStyleChange\", \"onAfterConditionSet\"].indexOf(handler.name) != -1 && p2 != activeSheet)\n\t\t\t\t\tactiveSheet = p2;\n\t\t\t\telse if(handler.name == \"onZoom\")\n\t\t\t\t\tactiveSheet = _;\n\t\t\t\tparams = [\"update\", activeSheet];\n\t\t\t}\n\n\t\t\tclearTimeout(thread);\n\t\t\tthread = webix.delay(() => view.callEvent(\"onChange\", params));\n\t\t});\n\t}\n\n\tview.attachEvent(\"onChange\", function(){\n\t\tsave(view, \"all\");\n\t});\n}\n\nexport function save(view, name, data){\n\tvar save = view.config.save;\n\tvar url;\n\tif (!save) return;\n\n\tif(name == \"all\"){\n\t\tif(!save.all)\n\t\t\treturn;\n\t\tdata = { data: view.serialize({ sheets: true }) };\n\t\turl = save.all;\n\t}\n\telse{\n\t\turl = typeof save === \"string\" ? save + \"/\" + name : save[name];\n\t}\n\n\turl = webix.proxy.$parse(url);\n\n\tif(url){\n\t\tif (typeof url === \"function\")\n\t\t\treturn url(name, data);\n\n\t\tif (url.$proxy && url.save)\n\t\t\treturn url.save(view, data, null, null);\n\n\t\tvar ajax = webix.ajax();\n\t\tif (name === \"all\")\n\t\t\tajax.headers({ \"Content-type\" : \"application/json\" });\n\t\tajax.post(url, data);\n\t}\n}","webix.protoUI({\n\t$cssName: \"window\",\n\tname: \"ssheet-dialog\",\n\t$init: function(config){\n\t\tthis.$view.className += \" webix_ssheet_dialog\";\n\t\tthis.config.buttons = config.buttons;\n\t\tthis.config.close = true;\n\t},\n\tgetBodyConfig: function(content){\n\t\tcontent.borderless = true;\n\t\tvar elements = this.getFormElements(content);\n\t\tvar config = {\n\t\t\tview: \"form\",\n\t\t\tcss: \"webix_ssheet_form\",\n\t\t\tpadding: webix.skin.$active.layoutPadding.form,\n\t\t\telements: elements\n\t\t};\n\t\treturn config;\n\t},\n\tgetFormElements: function(content){\n\t\tvar elements;\n\t\tif(webix.isArray(content))\n\t\t\telements= content;\n\t\telse{\n\t\t\telements = [];\n\t\t\telements.push(content);\n\t\t}\n\t\tif(this.config.buttons){\n\t\t\telements.push({height:1});\n\t\t\telements.push( {\n\t\t\t\tmargin: 10,\n\t\t\t\tcols:[\n\t\t\t\t\t{},\n\t\t\t\t\t{view: \"button\", css: \"ssheet_cancel_button\", label: webix.i18n.spreadsheet.labels.cancel, autowidth:true, click: function(){\n\t\t\t\t\t\tvar parentView = this.getTopParentView();\n\t\t\t\t\t\tparentView.callEvent(\"onCancelClick\",[]);\n\t\t\t\t\t}},\n\t\t\t\t\t{view: \"button\", label: webix.i18n.spreadsheet.labels.save, hotkey: \"enter\", autowidth:true, click: function(){\n\t\t\t\t\t\tvar parentView = this.getTopParentView();\n\t\t\t\t\t\tparentView.callEvent(\"onSaveClick\",[]);\n\t\t\t\t\t}}\n\t\t\t\t]\n\t\t\t});\n\t\t}\n\t\treturn elements;\n\t},\n\tbody_setter: function(value){\n\t\tif(typeof value == \"object\"){\n\t\t\tif(webix.isUndefined(value.padding))\n\t\t\t\tvalue.padding = webix.skin.$active.layoutPadding.form;\n\t\t\tif(value.view == \"form\" && value.elements){\n\t\t\t\tvalue.elements = this.getFormElements(value.elements);\n\t\t\t\tif(!value.css)\n\t\t\t\t\tvalue.css = \"webix_ssheet_form\";\n\t\t\t}\n\t\t\telse\n\t\t\t\tvalue = this.getBodyConfig(value);\n\t\t}\n\n\t\treturn webix.ui.window.prototype.body_setter.call(this,value);\n\t},\n\tdefaults:{\n\t\tmove:true,\n\t\thead: \"Dialog\",\n\t\tbuttons: true,\n\t\tclose:true,\n\t\t//we need to retain focus in table area, so disabling the autofocusing feature\n\t\tautofocus:false,\n\t\twidth: 350\n\t}\n}, webix.ui.window, webix.IdSpace);\n\n\n\nwebix.protoUI({\n\t$cssName: \"datatable\",\n\tname: \"ssheet-dialog-table\",\n\t$init: function(config){\n\t\tif(!config.headerRowHeight)\n\t\t\tconfig.headerRowHeight = 34;\n\t\tthis.$view.className += \" webix_ssheet_dialog_table\";\n\t}\n},webix.ui.datatable);","webix.protoUI({\n\tname: \"ssheet-suggest-labels\",\n\tdefaults:{\n\t\tfitMaster:false,\n\t\tpadding:0,\n\t\tborderless: true\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_suggest\";\n\t},\n\tgetItemText: function(id){\n\t\treturn this.getList().getItem(id).value;\n\t}\n}, webix.ui.suggest);\n\nwebix.protoUI({\n\tname: \"ssheet-form-suggest\",\n\tdefaults:{\n\t\tpadding:0,\n\t\tborderless: true\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_suggest\";\n\t}\n}, webix.ui.suggest);\n\nwebix.protoUI({\n\t$cssName: \"colorpicker\",\n\tname: \"ssheet-colorpicker\",\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_colorpicker\";\n\t},\n\tdefaults:{\n\t\tsuggest:{\n\t\t\tborderless: true,\n\t\t\tbody:{\n\t\t\t\tview: \"ssheet-colorboard\",\n\t\t\t}\n\t\t}\n\t}\n}, webix.ui.colorpicker);","webix.protoUI({\n\tname:\"formlate\",\n\tsetValue:function(a){ return this.setHTML(a); },\n\tgetValue:function(){ return \"\"; }\n}, webix.ui.template);","webix.protoUI({\n\tname:\"ssheet-icons\",\n\t$cssName: \"dataview\",\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_dataview\";\n\t},\n\tdefaults:{\n\t\tborderless: true,\n\t\ttemplate: \"<span class='webix_ssheet_button_icon #css#' ></span>\",\n\t\ttype:{\n\t\t\twidth: 36,\n\t\t\theight: 36\n\t\t}\n\t}\n},webix.ui.dataview);","webix.protoUI({\n\tname: \"ssheet-suggest\",\n\tdefaults:{\n\t\tpadding:0,\n\t\tcss: \"webix_ssheet_suggest\"\n\t}\n},webix.ui.contextmenu);","export const decode = {};\nexport const encode = {};\n\nconst alpha = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\nfunction indexToHeader(index){\n\tconst chars = alpha.length;\n\tconst quotient = Math.floor(--index / chars);\n\tif (quotient > 0)\n\t\treturn indexToHeader(quotient) + alpha[index % chars];\n\n\treturn alpha[index % chars];\n}\n\nexport function updateMaxColumn(maxColumn){\n\tconst lastColumn = Object.keys(encode).length;\n\n\tfor(let i = lastColumn + 1; i <= maxColumn; i++){\n\t\tlet str = indexToHeader(i);\n\n\t\tdecode[str] = i;\n\t\tencode[i] = str;\n\t}\n}\n\nexport function adress(text){\n\tlet size;\n\tfor(let i = 0; i < text.length; i++)\n\t\tif(text.charCodeAt(i) < 59){\n\t\t\tsize = i;\n\t\t\tbreak;\n\t\t}\n\n\tconst col = text.substr(0, size);\n\tconst row = text.substr(size);\n\n\treturn [row*1, decode[col]];\n}\n\nexport function range(text, view, page){\n\tconst nind = text.indexOf(\"!\");\n\tlet sheet = page || \"\";\n\n\t//parse sheet names\n\tif (nind !== -1){\n\t\tsheet = text.substr(0, nind);\n\t\tif (sheet[0] === \"'\")\n\t\t\tsheet = sheet.substr(1, sheet.length-2);\n\t\ttext = text.substr(nind+1);\n\t}\n\n\tlet parts = text.split(\":\");\n\tif (parts.length != 2){\n\t\tif(view){\n\t\t\tlet code = view.ranges.getCode(text, sheet);\n\t\t\tif(!code){\n\t\t\t\t// global named range\n\t\t\t\tcode = view.ranges.getCode(text, true);\n\t\t\t\tif(!code)\n\t\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst rangeParts = code.split(\"!\");\n\t\t\tif(rangeParts[0] != page || view.getActiveSheet())\n\t\t\t\tsheet = rangeParts[0].replace(/'/g,\"\");\n\t\t\tcode = rangeParts[1];\n\t\t\tparts = code.split(\":\");\n\t\t}\n\t\telse\n\t\t\treturn null;\n\t} \n\n\tconst d1 = adress(parts[0]);\n\tconst d2 = adress(parts[1]);\n\n\tif(d1[0] && d1[1] && d2[0] && d2[1])\n\t\treturn [d1[0], d1[1], d2[0], d2[1], sheet];\n}\n\n\nexport function escapeSheet(sheet){\n\treturn sheet.indexOf(\" \") == -1 ? sheet : `'${sheet}'`;\n}\n\nexport function toRange(x,y,x2,y2,sheet){\n\treturn (sheet?(escapeSheet(sheet)+\"!\"):\"\")+encode[y]+x+\":\"+encode[y2]+x2;\n}\nexport function toSheetRange(x,y,sheet){\n\treturn (sheet?(escapeSheet(sheet)+\"!\"):\"\")+x+\":\"+y;\n}\n\nexport function rangeObj(text, view){\n\tif (typeof text === \"object\") return text;\n\tconst a = range(text, view);\n\treturn { start:{ row:a[0], column:a[1]}, end:{ row:a[2], column:a[3] }, sheet: a[4] };\n}\n\nexport function eachRange(text, view, callback, data){\n\tconst range = rangeObj(text);\n\tfor (let row = range.start.row; row <= range.end.row; row++) {\n\t\tfor (let column = range.start.column; column <=  range.end.column; column++) {\n\t\t\tcallback(view, {row: row, column: column}, data);\n\t\t}\n\t}\n}\n\nexport function isRange(text){\n\tif(typeof text == \"string\"){\n\t\tconst cells = text.split(\":\");\n\t\tif(cells.length == 2){\n\t\t\tfor(let i = 0; i < cells.length; i++){\n\t\t\t\tconst parts = cells[i].split(\"!\");\n\t\t\t\tif(!isCell(parts.pop()))\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t}\n}\n\nconst cellTest = /^[A-Z]+[0-9]+$/;\nexport function isCell(text){\n\treturn cellTest.test(text);\n}\n\nexport function changeRange(text,name,inc,start){\n\tlet updated = false;\n\n\tif(isRange(text)){\n\t\tlet [r1,c1,r2,c2,sheet] = range(text);\n\n\t\t//ranges like B2:A1\n\t\tif(r1 > r2)\n\t\t\t[r1, r2] = [r2, r1];\n\t\tif(c1 > c2)\n\t\t\t[c1, c2] = [c2, c1];\n\n\t\tif (name === \"row\" && start.row <= r2){\n\t\t\tif((inc < 0 && start.row < r1) || (inc > 0 && start.row <= r1))\n\t\t\t\tr1 += inc;\n\t\t\tr2 += inc;\n\n\t\t\tif(r2<r1)\n\t\t\t\treturn \"\";\n\n\t\t\tupdated = true;\n\t\t}\n\t\telse if (name === \"column\" && start.column <= c2){\n\t\t\tif((inc < 0 && start.column < c1) || (inc > 0 && start.column <= c1))\n\t\t\t\tc1 += inc;\n\t\t\tc2 += inc;\n\n\t\t\tif(c2<c1)\n\t\t\t\treturn \"\";\n\n\t\t\tupdated = true;\n\t\t}\n\t\tif(updated)\n\t\t\ttext = toRange(r1,c1,r2,c2,sheet);\n\t}\n\n\treturn text;\n}","export const toolbarSizes = {\n\twidth:38,\n\tmargin: 7,\n\tpaddingY: 1,\n\tsectorPadding: 5,\n\tsectorMargin: 0\n};\n\n// default styles for toolbar elements\nexport let defaultStyles = {\n\t\"color\"         : \"#666666\",\n\t\"background\"    : \"#ffffff\",\n\t\"font-family\"   : \"'PT Sans', Tahoma\",\n\t\"font-size\" : \"15\",\n\t\"text-align\": \"left\",\n\t\"vertical-align\": \"middle\",\n\t\"white-space\": \"nowrap\",\n};\n\nconst fonts = {\n\tmaterial: \"'Roboto', sans-serif\",\n\tmini: \"'Roboto', sans-serif\",\n\tflat: \"'PT Sans', Tahoma\",\n\tcompact: \"'PT Sans', Tahoma\",\n\tcontrast: \"'PT Sans', Tahoma\",\n\twillow: \"'Open Sans', sans-serif\",\n\tdark: \"'Open Sans', sans-serif\",\n};\n\nexport function setSkinDefaults(){\n\tconst skin = webix.skin.$name;\n\ttoolbarSizes.width = webix.skin.$active.inputHeight + 2;\n\ttoolbarSizes.titleHeight = (skin == \"mini\" || skin == \"compact\") ? 18 : 20;\n\n\tif(webix.skin.$active.spreadsheet)\n\t\treturn defaultStyles = webix.skin.$active.spreadsheet;\n\n\tdefaultStyles[\"font-family\"] = fonts[skin];\n\n\tif (skin == \"contrast\"){\n\t\tdefaultStyles.background = \"#393939\";\n\t\tdefaultStyles.color = \"#ffffff\";\n\t} else if (skin == \"material\" || skin == \"mini\"){\n\t\tdefaultStyles.color = \"#475466\";\n\t} else if (skin == \"willow\"){\n\t\tdefaultStyles.color = \"#2C2F3C\";\n\t} else if (skin == \"dark\"){\n\t\tdefaultStyles.background = \"#2A2B2D\";\n\t\tdefaultStyles.color = \"#ffffff\";\n\t}\n}","export function find(arr, func){\n\tvar result = findIndex(arr, func);\n\treturn arr[result];\n}\n\nexport function findIndex(arr, func){\n\tvar result = -1;\n\tfor(var i =0; result<0 && i < arr.length; i++){\n\t\tif(func(arr[i]))\n\t\t\tresult = i;\n\t}\n\treturn result;\n}\n\nexport function getDimension(data, spans, rows, cols){\n\tfor(let i=0; i<data.length; i++){\n\t\t// data[i] - [ row, column, value, style]\n\t\tlet line = data[i];\n\t\tif (line[0]>rows) rows=line[0];\n\t\tif (line[1]>cols) cols=line[1];\n\t}\n\n\tif(spans)\n\t\tfor(let i = 0; i < spans.length; i++){\n\t\t\t// spans[i] - [ row, column, colCount, rowCount ]\n\t\t\tconst spanEndRow = spans[i][0] + spans[i][3] - 1;\n\t\t\tconst spanEndCol = spans[i][1] + spans[i][2] - 1;\n\n\t\t\tif(spanEndRow > rows) rows = spanEndRow;\n\t\t\tif(spanEndCol > cols) cols = spanEndCol;\n\t\t}\n\n\treturn [rows*1, cols*1];\n}","import group from \"./undo_group\";\nimport {save} from \"./save\";\nimport {eachRange} from \"../helpers/column_names\";\nimport {defaultStyles} from \"../toolbar/defaults\";\nimport {find} from \"../helpers/array\";\n\n//do not change order, it will break server side compatibility\n//add new options to the end of this list\nexport const style_names = [\n\t\"color\",\"background\",\"text-align\",\n\t\"font-family\",\"font-size\",\n\t\"font-style\",\"underline\",\"font-weight\",\n\t\"vertical-align\", \"wrap\", \"borders\", \"format\",\n\t\"border-right\", \"border-bottom\",\"border-left\", \"border-top\",\n\t\"strike\", \"indent\"\n];\n\nconst _style_map = {\n\tformat: ()=> \"\",\n\t\"text-align\": {\n\t\tleft: () => \"justify-content:flex-start;\",\n\t\tcenter: () => \"justify-content:center;text-align:center;\",\n\t\tright: () => \"justify-content:flex-end;text-align:right;\"\n\t},\n\t\"vertical-align\": {\n\t\ttop: () => \"align-items:flex-start;\",\n\t\tmiddle: () => \"align-items:center;\",\n\t\tbottom: () => \"align-items:flex-end;\"\n\t},\n\twrap: {\n\t\twrap: ()=> {\n\t\t\treturn \"white-space: normal !important;\";\n\t\t}\n\t},\n\t\"border-left\": (obj, zoom) => {\n\t\treturn getBorderCss(\"border-left\", obj, zoom);\n\t},\n\t\"border-top\": (obj, zoom) => {\n\t\treturn getBorderCss(\"border-top\", obj, zoom);\n\t},\n\t\"border-right\": (obj, zoom) => {\n\t\treturn getBorderCss(\"border-right\", obj, zoom);\n\t},\n\t\"border-bottom\": (obj, zoom) => {\n\t\treturn getBorderCss(\"border-bottom\", obj, zoom);\n\t},\n\t\"font-weight\": obj => {\n\t\t//Roboto bold - font-weight:500 (looks better, than 700). Roboto is default font for material skins.\n\t\tif(obj[\"font-weight\"] == \"bold\"){\n\t\t\tconst family = obj[\"font-family\"] || defaultStyles[\"font-family\"];\n\t\t\treturn \"font-weight:\" + (family == \"'Roboto', sans-serif\" ? 500 : 700) + \";\";\n\t\t}\n\t\treturn \"\";\n\t},\n\tunderline: obj => {\n\t\tconst underline = obj.underline == \"underline\" ? \"underline\" : \"\";\n\t\tif(underline){\n\t\t\tconst strike = obj.strike == \"strike\" ? \"line-through\" : \"\";\n\t\t\treturn `text-decoration: ${underline} ${strike};`;\n\t\t}\n\t\treturn \"\";\n\t},\n\tstrike: obj => {\n\t\tif(obj.underline != \"underline\" && obj.strike == \"strike\")\n\t\t\treturn \"text-decoration: line-through;\";\n\t\treturn \"\";\n\t},\n\tindent: (obj, zoom) => {\n\t\tconst count = obj.indent * 1;\n\t\tif(count > 0){\n\t\t\tconst pos = obj[\"text-align\"] == \"right\" ? \"right\" : \"left\";\n\t\t\treturn { innerCss: `margin-${pos}:${(count * 8 + 12)*zoom}px;` }; // 12 - default cell margin\n\t\t}\n\t},\n\t\"font-size\": (obj, zoom) => {\n\t\tlet fontSize = obj[\"font-size\"];\n\n\t\tif(zoom != 1)\n\t\t\tfontSize = obj[\"font-size\"].replace(\"px\",\"\") * zoom + \"px\";\n\n\t\treturn \"font-size:\"+fontSize+\";\";\n\t},\n};\n\nfunction getBorderCss(pos, obj, zoom){\n\tlet border = obj[pos];\n\tif(border){\n\t\tlet [color, type] = border.split(\",\");\n\n\t\ttype = type || \"thin\";\n\t\tlet size = 1;\n\t\tif(type == \"medium\")\n\t\t\tsize = 2;\n\t\telse if(type == \"thick\" || type == \"double\")\n\t\t\tsize = 3;\n\n\t\tsize = size * zoom + \"px\";\n\n\n\t\tif([\"thin\", \"medium\", \"thick\"].indexOf(type) != -1)\n\t\t\ttype = \"solid\";\n\n\t\treturn `${pos}: ${size} ${type} ${color} !important;`;\n\t}\n\treturn \"\";\n}\n\nconst border_checks = {\n\t\"border-left\":\t\tfunction(cell, area, mode){ return cell.column == area.start.column || mode ==\"no\"; },\n\t\"border-right\":\t\tfunction(cell, area, mode){ return cell.column == area.end.column || mode == \"all\" || mode ==\"no\"; },\n\t\"border-top\":\t\tfunction(cell, area , mode){ return cell.row == area.start.row || mode ==\"no\"; },\n\t\"border-bottom\":\tfunction(cell, area, mode){ return cell.row == area.end.row || mode == \"all\"|| mode ==\"no\"; }\n};\n\nconst _style_handlers = {\n\t\"borders\": function(view, style, value, cell){\n\t\tconst area = view.$$(\"cells\").getSelectArea();\n\t\tvalue = value.split(\",\");\n\t\tconst type = value[0];\n\t\tlet color = value[1];\n\t\tlet lineStyle = value[2];\n\n\t\tvar modes = [\"border-left\", \"border-right\", \"border-bottom\", \"border-top\"];\n\n\t\tif(type == \"top-bottom\"){\n\t\t\tmodes = [\"border-top\",\"border-bottom\"];\n\t\t}\n\t\telse if (type != \"no\" && type != \"all\" && type != \"outer\")\n\t\t\tmodes = [\"border-\"+type];\n\n\t\tfor (var i = 0; i < modes.length; i++){\n\t\t\tvar mode = modes[i];\n\t\t\tlet result = view.callEvent(\"onAction\", [\"check-borders\", {row:cell.row, column:cell.column, area, type, mode}]);\n\t\t\tif (result === true || border_checks[mode](cell, area, type)){\n\t\t\t\tconst border = type == \"no\" ? \"\" : `${color},${lineStyle}`;\n\t\t\t\tstyle = _updateStyle(view, style, mode, border, cell);\n\t\t\t}\n\t\t}\n\t\treturn style;\n\t}\n};\n\nvar sizeEl;\nexport function init(view){\n\tview.attachEvent(\"onStyleSet\", (name, value) => _applyStyles(view, name, value));\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data) => _serialize(view, data));\n\tview.attachEvent(\"onReset\", () => reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, style) => {\n\t\tif(type == \"style\")\n\t\t\t_undoStyle(view, row, column, style);\n\t});\n\n\treset(view);\n\n\tif (!sizeEl)\n\t\tsizeEl = webix.html.create(\"DIV\", { style:\"visibility:hidden; position:absolute; top:0px; left:0px; height:auto;\"}, \"\");\n}\n\nfunction reset(view){\n\tview._styles = {};\n\tview._styles_cache = {};\n\tview._styles_max = 1;\n\n\tlet prefix = \".wss_\"+view.$index;\n\twebix.html.removeStyle(prefix);\n}\n\nexport function zoomStyles(view){\n\tconst data = {};\n\t_serialize(view, data);\n\treset(view);\n\t_parse(view, data, true);\n}\n\nexport function getStyle(view, cell, page, exportStyles){\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = view._mData.getPage(page);\n\t\tif(sheet){\n\t\t\tconst obj = sheet.getCell(cell.row-1, cell.column-1);\n\t\t\tif (obj && obj.style){\n\t\t\t\tconst styles = find(view._sheets, sheet => sheet.name == page).content.styles || [];\n\t\t\t\tconst style = find(styles, stl => stl[0] == obj.style);\n\t\t\t\tif(style)\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: obj.style,\n\t\t\t\t\t\ttext: style[1],\n\t\t\t\t\t\tprops: styleFromText(style[1])\n\t\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\telse{\n\t\tconst obj = view._mPage.getCell(cell.row-1, cell.column-1);\n\t\tconst span = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\n\t\tif(span && (exportStyles || (span[0] == cell.row && span[1] == cell.column))){\n\t\t\tconst spanStyles = span[5].split(\" \");\n\t\t\tfor (let i = 0; i < spanStyles.length; i++){\n\t\t\t\tconst spanStyle = view._styles[spanStyles[i]];\n\t\t\t\tif(spanStyle)\n\t\t\t\t\treturn spanStyle;\n\t\t\t}\n\t\t}\n\n\t\tif (obj && obj.style)\n\t\t\treturn view._styles[obj.style];\n\t}\n\n\treturn null;\n}\n\nexport function getFormat(view, row, column){\n\tvar obj = view._mPage.getCell(row-1, column-1);\n\treturn (obj && obj.format) || \"\";\n}\n\n// undo\nfunction _undoStyle(view, row, column, style){\n\tvar cell = {row: row, column: column};\n\tsetStyle(view, cell, style);\n}\n\nfunction _serialize(view, obj){\n\tvar styles = [];\n\n\tfor (var key in view._styles_cache)\n\t\tstyles.push([view._styles_cache[key].id, key]);\n\n\tobj.styles = styles;\n}\n\nexport function addStyle(view, props, origin, page){\n\tconst style = {\n\t\tprops: styleFromText( style_names.map(()=>\"\").join(\";\") )\n\t};\n\n\tif (origin)\n\t\tfor (let key in origin.props)\n\t\t\tstyle.props[key] = origin.props[key];\n\n\tfor (let  key in props)\n\t\tstyle.props[key] = props[key];\n\n\tstyle.text = styleToText(style);\n\n\tlet sheet;\n\tif(page && page != view.getActiveSheet()){\n\t\tsheet = find(view._sheets, sheet => sheet.name == page);\n\t\tif(!sheet)\n\t\t\treturn null;\n\t\tif(sheet.content.styles){\n\t\t\tconst sameStyle = find(sheet.content.styles, stl => stl[1] == style.text);\n\t\t\tif(sameStyle)\n\t\t\t\treturn webix.extend(style, {id: sameStyle[0]});\n\t\t}\n\t\telse\n\t\t\tsheet.content.styles = [];\n\t}\n\telse{\n\t\tconst cache = view._styles_cache[style.text];\n\t\tif (cache)\n\t\t\treturn cache;\n\t}\n\n\t_addStyle(view, style, false, sheet);\n\n\treturn style;\n}\n\nfunction _parse(view, obj, zoom){\n\tif (obj.styles)\n\t\tfor (let i=0; i < obj.styles.length; i++){\n\t\t\tvar styleObj = obj.styles[i];\n\t\t\tvar style = {\n\t\t\t\tid: styleObj[0],\n\t\t\t\ttext:styleObj[1],\n\t\t\t\tprops: styleFromText(styleObj[1])\n\t\t\t};\n\n\t\t\t_addStyle(view, style, true);\n\t\t}\n\n\tif(!zoom)\n\t\tfor (let i = 0; i < obj.data.length; i++){\n\t\t\tvar [row, column, , css] = obj.data[i];\n\n\t\t\tif (css)\n\t\t\t\tupdate_style_data(view, row, column, view._styles[css]);\n\t\t}\n}\n\nfunction _applyStyles(view, name, value){\n\tgroup.set(function(){\n\t\tview.eachSelectedCell(function(cell){\n\t\t\tconst span = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\t\t\tif(!span || (span && span[0] == cell.row && span[1] == cell.column))\n\t\t\t\t_applyCellStyles(view, cell, name, value);\n\t\t});\n\t});\n\tview.refresh();\n}\n\nfunction _applyCellStyles(view, cell, name, value){\n\tconst ostyle = getStyle(view, cell);\n\n\tif(name == \"indent\"){\n\t\tconst oldVal = ((ostyle && ostyle.props[name]) || 0) * 1;\n\n\t\tif(!oldVal && value == -1)\n\t\t\treturn;\n\n\t\tvalue += oldVal;\n\t}\n\n\tconst nstyle = _updateStyle(view, ostyle, name, value, cell);\n\n\tif (nstyle && nstyle != ostyle)\n\t\t_setStyle(view, cell, nstyle);\n}\n\nfunction _updateStyle(view, style, name, value, cell){\n\tif(_style_handlers[name]){\n\t\treturn _style_handlers[name](view, style, value, cell);\n\t}\n\n\tif (style && style.props[name] == value) return style;\n\n\tvar nstyle = { text:\"\", id:0, props: (style?webix.copy(style.props):{}) };\n\tnstyle.props[name] = value;\n\tnstyle.text = styleToText(nstyle);\n\n\tvar cache = view._styles_cache[nstyle.text];\n\tif (cache)\n\t\treturn cache;\n\n\t_addStyle(view,nstyle);\n\n\treturn nstyle;\n}\n\nfunction update_style_data(view, row, column, style, page){\n\tconst isActiveSheet = !page || page == view.getActiveSheet();\n\tconst sheet = isActiveSheet ? view._mPage : view._mData.getPage(page);\n\tif(sheet){\n\t\tconst obj = sheet.getCell(row-1, column-1, true);\n\t\tobj.style = style && style.id;\n\t\tobj.format = style && style.props.format;\n\t\tif(!isActiveSheet){\n\t\t\tconst data = find(view._sheets, sheet => sheet.name == page).content.data;\n\t\t\tconst item = find(data, item => item[0] == row && item[1] == column);\n\t\t\tif(item) item[3] = obj.style;\n\t\t\telse data.push([row, column, \"\", obj.style]);\n\t\t}\n\t}\n}\n\nexport function setStyle(view, cell, style, page){\n\treturn _setStyle(view, cell, style, page);\n}\n\nexport function setRangeStyle(view, range, style, page) {\n\teachRange(range, view, (view, cell, data) => _setStyle(view, cell, data.style, data.page), {style, page});\n}\n\nexport function getTextSize(view, text, css, baseWidth){\n\tsizeEl.innerHTML = text;\n\tsizeEl.style.width = baseWidth ? baseWidth+\"px\" : \"auto\";\n\n\tsizeEl.className = \"webix_table_cell webix_cell \"+css;\n\tview._table.$view.appendChild(sizeEl);\n\n\tconst width = Math.max(0, sizeEl.offsetWidth+1);\n\tconst height = Math.max(0, sizeEl.offsetHeight+1);\n\n\tview._table.$view.removeChild(sizeEl);\n\tsizeEl.innerHTML = \"\";\n\n\treturn { width, height };\n}\n\nfunction _setStyle(view, cell, style, page){\n\tconst old = getStyle(view, cell, page);\n\tconst activeSheet = view.getActiveSheet();\n\tif(!page)\n\t\tpage = activeSheet;\n\tif(view.callEvent(\"onBeforeStyleChange\", [cell.row, cell.column, style, old, page])){\n\t\tgroup.set(()=>{\n\t\t\tconst format = style && style.props.format || null;\n\t\t\tconst oldFormat = old && old.props.format || null;\n\t\t\tconst formatChanged = format != oldFormat;\n\t\t\tif(!formatChanged || (formatChanged && view.callEvent(\"onBeforeFormatChange\", [cell.row, cell.column, format, oldFormat, page]))){\n\t\t\t\tupdate_style_data(view, cell.row, cell.column, style, page);\n\t\t\t\tview.callEvent(\"onStyleChange\", [cell.row, cell.column, style, old, page]);\n\n\t\t\t\tif(formatChanged)\n\t\t\t\t\tview.callEvent(\"onFormatChange\", [cell.row, cell.column, format, oldFormat, page ]);\n\n\t\t\t\tview.saveCell(cell.row,cell.column,page);\n\n\t\t\t\tif(page == activeSheet){\n\t\t\t\t\tconst sel = view.getSelectedId();\n\t\t\t\t\tif(sel && sel.row == cell.row && sel.column == cell.column)\n\t\t\t\t\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\"}]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction _buildCssString(view, style) {\n\tlet css = \"\";\n\tlet innerCss = \"\";\n\n\tfor (var key in style){\n\t\tif (style[key]){\n\t\t\tif( _style_map[key]){\n\t\t\t\tif(_style_map[key][style[key]])\n\t\t\t\t\tcss += _style_map[key][style[key]](style);\n\t\t\t\telse if(typeof  _style_map[key] == \"function\"){\n\t\t\t\t\tconst outCss = _style_map[key](style, view._zoom);\n\n\t\t\t\t\tif(typeof outCss == \"object\"){\n\t\t\t\t\t\tcss += outCss.css || \"\";\n\t\t\t\t\t\tinnerCss += outCss.innerCss || \"\";\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tcss += outCss;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t\tcss+= key+\":\"+style[key]+\";\";\n\t\t}\n\t}\n\n\treturn {css, innerCss};\n}\n\nfunction _addStyle(view, style, silent, sheet){\n\tif(sheet && sheet.name != view.getActiveSheet()){\n\t\tlet index = 1;\n\t\twhile(!style.id || find(sheet.content.styles, stl => stl[0] == style.id))\n\t\t\tstyle.id = \"wss\"+(index++);\n\t\tsheet.content.styles.push([style.id, style.text]);\n\t}\n\telse {\n\t\tview._styles_cache[style.text] = style;\n\n\t\twhile (!style.id || view._styles[style.id])\n\t\t\tstyle.id = \"wss\"+(view._styles_max++);\n\t\tview._styles[style.id] = style;\n\n\t\tconst {css, innerCss} = _buildCssString(view, style.props);\n\t\tconst prefix = \".wss_\"+view.$index;\n\t\twebix.html.addStyle(prefix+\" .\"+style.id+\"{\"+css+\"}\", prefix);\n\t\twebix.html.addStyle(prefix+\" .\"+style.id+\" div:first-child{\"+innerCss+\"}\", prefix);\n\t}\n\n\tif (!silent)\n\t\tsave(view, \"styles\", {\n\t\t\tname: style.id,\n\t\t\ttext: style.text,\n\t\t\tpage: sheet ? sheet.name : view.getActiveSheet()\n\t\t});\n}\n\nexport function styleToText(style){\n\tvar id = [];\n\tfor (var i=0; i<style_names.length; i++)\n\t\tid.push(style.props[style_names[i]]);\n\treturn id.join(\";\");\n}\n\nexport function styleFromText(text){\n\tvar parts = text.split(\";\");\n\tvar props = {};\n\tfor (var i=0; i<style_names.length; i++)\n\t\tprops[style_names[i]] = parts[i];\n\treturn props;\n}\n\n\n\nexport function clearRangeStyle(view, range, page){\n\tgroup.set(function(){\n\t\teachRange(range, view, function(view, cell){\n\t\t\tlet style = getStyle(view, cell, page);\n\t\t\tif (style)\n\t\t\t\tsetStyle(view, cell, null, page);\n\t\t});\n\t});\n}\n\nexport function compactStyles(view){\n\tconst serialized = view.serialize();\n\tserialized.styles = removeUnusedStyles(serialized);\n\n\treset(view);\n\t_parse(view, serialized);\n}\n\nexport function removeUnusedStyles(serialized){\n\tconst data = serialized.data;\n\tconst styles = serialized.styles;\n\n\tconst used = {};\n\tfor (let i=0; i<data.length; i++){\n\t\tconst name = data[i][3];\n\t\tif (name)\n\t\t\tused[name] = 1;\n\t}\n\n\tconst newStyles = [];\n\tfor(let i = 0; i<styles.length; i++){\n\t\tconst name = styles[i][0];\n\t\tif (used[name])\n\t\t\tnewStyles.push(styles[i]);\n\t}\n\n\treturn newStyles;\n}","import {addStyle, styleFromText} from \"./styles\";\nimport {getJsDateFromExcel} from \"../mathematics/methods\";\nimport group from \"./undo_group\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\tview.attachEvent(\"onDataParse\", (data) => load(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data, config) => serialize(view, data, config));\n}\n\nexport let formatHelpers = {};\nexport let currencies = [];\nconst defaultFormats = {common:1};\n\n\nexport let formatsCount;\nexport let formatCache;\n\nlet formats;\nlet formatSources;\n\nfunction getCurrencySymbol(format){\n\treturn webix.template(format)(\"\");\n}\n\nexport function setDefaultFormats(){\n\tconst formatsLocale = webix.i18n.spreadsheet.formats;\n\n\tcurrencies = [ webix.i18n.price ];\n\tcurrencies = currencies.concat(webix.copy(formatsLocale.currencies));\n\n\tcurrencies = currencies.map(format => {\n\t\tconst id = getCurrencySymbol(format);\n\t\treturn {\n\t\t\tformat,\n\t\t\tid,\n\t\t\tvalue: id.trim()\n\t\t};\n\t});\n\n\tformats = {};\n\tformatsCount = 0;\n\tformatSources = {};\n\tformatCache = {};\n\tformatHelpers = {\n\t\tprice : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_price\";\n\t\t\t\treturn webix.i18n.priceFormat(value);\n\t\t\t},\n\t\t\tvalues:webix.extend({\n\t\t\t\tzeros: webix.i18n.priceSettings.decimalSize, \n\t\t\t\tsymbol: webix.i18n.price.replace(\"{obj}\",\"\"),\n\t\t\t\tseparator: 1, negative:1, type: \"price\"\n\t\t\t}, getDelimiters(\"price\"))\n\t\t},\n\t\t\"int\" : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_int\";\n\t\t\t\treturn webix.i18n.numberFormat(value);\n\t\t\t},\n\t\t\tvalues:webix.extend({\n\t\t\t\tzeros: webix.i18n.decimalSize,\n\t\t\t\tseparator: 1, negative:1, type: \"int\",\n\t\t\t}, getDelimiters(\"int\"))\n\t\t},\n\t\tpercent : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_percent\";\n\t\t\t\treturn Math.round(value*100)+\"%\";\n\t\t\t},\n\t\t\tvalues:webix.extend({\n\t\t\t\tzeros: 0, separator: 0, negative:1, type: \"percent\",\n\t\t\t}, getDelimiters(\"percent\"))\n\t\t},\n\t\tdate : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_date\";\n\t\t\t\treturn format2code(formatsLocale.dateFormat, getDelimiters(\"date\"))(value);\n\t\t\t},\n\t\t\tvalues: { type:\"date\", date:formatsLocale.dateFormat }\n\t\t},\n\t\tstring : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_text\";\n\t\t\t\treturn value;\n\t\t\t},\n\t\t\tvalues: { type:\"string\" }\n\t\t}\n\t};\n\n\tfor(let i in formatHelpers){\n\t\tdefaultFormats[i] = 1;\n\t\tformatSources[i] = serializeFormat(formToValues(i, formatHelpers[i].values));\n\t\tformatCache[formatSources[i]] = i;\n\t}\n}\n\nexport function getDelimiters(type){\n\tif(type == \"price\")\n\t\treturn { groupSign:webix.i18n.priceSettings.groupDelimiter, decimalSign:webix.i18n.priceSettings.decimalDelimiter };\n\telse \n\t\treturn { groupSign:webix.i18n.groupDelimiter, decimalSign:webix.i18n.decimalDelimiter };\n}\n\nfunction serialize(view, data){\n\tconst formats = [];\n\n\tfor(let i in formatSources){\n\t\tif(!defaultFormats[i]) //exclude default formats\n\t\t\tformats.push([i,formatSources[i]]);\n\t}\n\tdata.formats = formats;\n}\n\nfunction load(view,data){\n\tvar i,\n\t\tformats = data.formats;\n\n\tif(formats)\n\t\tfor(i = 0; i < formats.length; i++)\n\t\t\tcreateFormatName(formats[i][1],formats[i][0]);\n}\n\nexport function getFormat(name){\n\treturn formatHelpers[name] ? formatHelpers[name].getFormat : formatHelpers[name];\n}\n\nexport function getFormatSource(name, toexcel){\n\tif(toexcel){\n\t\tlet parsed = parseFormat({values: formatHelpers[name].values, format: formatSources[name]});\n\t\treturn serializeFormat(parsed, true);\n\t}\n\telse\n\t\treturn formatSources[name];\n}\n\nfunction createFormatName(str, values){\n\tif (formatCache[str]) return formatCache[str];\n\n\tlet name = typeof(values) == \"object\" ? \"fmt\"+(formatsCount) : values;\n\tformatsCount++;\n\n\tformats[name] = str;\n\n\tif(typeof(values) == \"string\")\n\t\tvalues = formatToForm(str);\n\n\twebix.extend(\n\t\tvalues,\n\t\tgetDelimiters(\"custom\")\n\t);\n\n\tformatHelpers[name] = {\n\t\tgetFormat:format2code(str, {decimalSign: values.decimalSign, groupSign: values.groupSign}),\n\t\tvalues: values\n\t};\n\n\tformatSources[name] = str;\n\tformatCache[str] = name;\n\n\treturn name;\n}\n\nexport function addFormat(view, row, column, format, type, page){\n\tif(!type)\n\t\ttype = {format, type: \"custom\"};\n\n\tconst old = view.getStyle(row, column, page);\n\tconst name = createFormatName(format, type);\n\n\tview._sheets.map(sheet => {\n\t\tif(!sheet.content.formats)\n\t\t\tsheet.content.formats = [];\n\t\tif(!arr.find(sheet.content.formats, format => format[0] == name))\n\t\t\tsheet.content.formats.push([name, format]);\t\n\t});\n\n\tconst nev = addStyle(view, { format: name }, old, page);\n\tview.setStyle(row, column, nev, page);\n}\n\nexport function removeFormat(view, row, column){\n\tconst old = view.getStyle(row, column);\n\tconst nev = addStyle(view, { format:\"\" }, old);\n\tview.setStyle(row, column, nev);\n}\n\nfunction splitFormat(str){\n\tvar conditional = str.match(/.*\\[[><=].*/g);\n\tvar parts = str.split(\";\");\n\tif (!conditional){\n\t\tif (parts.length > 1){\n\t\t\tparts[0] = (parts.length > 2 ? \"[>0]\" : \"[>=0]\")+parts[0];\n\t\t\tparts[1] = \"[<0]\"+parts[1];\n\t\t\tif (parts[2])\n\t\t\t\tparts[2] = \"[=0]\"+parts[2];\n\t\t}\n\t}\n\treturn parts;\n}\n\nexport function format2code(str, delimiters){\n\tconst errorMessage = webix.i18n.spreadsheet.table[\"format-error\"];\n\tlet parts = splitFormat(str);\n\tlet code = [\"var spaces = \\\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\\\";\"];\n\tfor (var i=0; i<parts.length; i++){\n\t\tvar separated = separateFmt(parts[i]);\n\t\tcode.push(genCode(separated.condition, separated.color.toLowerCase(), separated.symbol, separated.fmt, i, parts.length > 0, delimiters));\n\t}\n\n\tlet method;\n\ttry {\n\t\tmethod = new Function(\"val\",\"extra\", `try{ ${code.join(\"\\n\")} return val; } catch(err) { return \"${errorMessage}\"; }`);\n\t}\n\tcatch(err){\n\t\tmethod = function(){return errorMessage;};\n\t}\n\treturn method;\n}\n\nfunction genCode(check, color, symbol, line, ind, isAbs, delimiters){\n\tvar str = \"\";\n\tif (check){\n\t\tif (!ind) str+=\"if\"; else str+=\"else if\";\n\t\tif (check[0] === \"=\") check = \"=\"+check;\n\t\tstr+=\"(val\"+check+\"){\";\n\t\tif (isAbs) str+=\"val = Math.abs(val);\";\n\t}\n\tif (color)\n\t\tstr+=\"extra.css = \\\"webix_ssheet_format_\"+color+\"\\\";\";\n\n\tstr += genFormatCode(line, delimiters, symbol);\n\n\treturn str+(check?\"}\":\"\");\n}\n\nconst dateTypes = {\n\t\"yy\": \"%y\",\n\t\"yyyy\": \"%Y\",\n\t\"m\": \"%n\",\n\t\"mm\": \"%m\",\n\t\"mmm\": \"%M\",\n\t\"mmmm\": \"%F\",\n\t\"mmmmm\":\"%F\", //not supported by webix\n\t\"d\": \"%j\",\n\t\"dd\": \"%d\",\n\t\"ddd\": \"%D\",\n\t\"dddd\": \"%l\"\n};\n\nconst timeTypes = {\n\t\"h\": \"%G\",\n\t\"hh\": \"%H\",\n\t\"m\": \"%i\", //not supported by webix\n\t\"mm\": \"%i\",\n\t\"s\": \"%s\", //not supported by webix\n\t\"ss\": \"%s\",\n\t\"AM/PM\": \"%A\"\n};\n\nconst dateOrder = Object.keys(dateTypes).sort((a, b) => b.length - a.length);\nconst timeOrder = Object.keys(timeTypes).sort((a, b) => b.length - a.length);\n\nfunction excelDateToWebix(text, lastDateType){\n\tconst typesOrder = [\n\t\t{name:\"date\", order:dateOrder, types:dateTypes}, \n\t\t{name:\"time\", order:timeOrder, types:timeTypes}\n\t];\n\n\t// \"m\"/\"mm\" format can be either date (%n/%m) or time (%i), so check last date type\n\tconst basedOnLast = /^m{1,2}(?!m)/.test(text);\n\tif(basedOnLast && lastDateType != \"date\")\n\t\ttypesOrder.reverse();\n\n\tfor(let i = 0; i < typesOrder.length; i++){\n\t\tconst type = typesOrder[i];\n\t\tfor(let j = 0; j < type.order.length; j++)\n\t\t\tif(text.indexOf(type.order[j]) == 0)\n\t\t\t\treturn {\n\t\t\t\t\tformat: type.types[type.order[j]],\n\t\t\t\t\tlength: type.order[j].length,\n\t\t\t\t\ttype: type.name\n\t\t\t\t};\n\t}\n}\n\nfunction genFormatCode(line, delimiters, symbol){\n\tif (!line)\n\t\treturn \"return val;\";\n\n\tlet str = \"return \\\"\\\"\";\n\n\tlet isQuote;\n\tlet fmt = \"\";\n\tlet multiply = 1;\n\tlet comma, numberPlaceholder, textPlaceholder;\n\tlet date = [];\n\tlet lastDateType = \"date\";\n\n\tlet symbolPos;\n\tif(symbol){\n\t\tconst currency = arr.find(currencies, val => val.id == symbol);\n\t\tsymbolPos = \"left\";\n\n\t\tif(currency)\n\t\t\tsymbolPos = arr.findIndex(currency.format.split(\"{obj}\"), val => val) ? \"right\" : \"left\";\n\t}\n\n\tfor (var i=0; i<line.length; i++){\n\t\tvar betweenPlaceholders = placeholder(line[i-1])&&placeholder(line[i+1]);\n\t\tif (line[i] == \"\\\"\"){\n\t\t\tif(webix.isUndefined(isQuote))\n\t\t\t\tisQuote = i;\n\t\t\telse {\n\t\t\t\tstr += `+\"${line.substr(isQuote+1, i-isQuote-1)}\"`;\n\t\t\t\tisQuote = undefined;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tif (!webix.isUndefined(isQuote))\n\t\t\tcontinue;\n\t\tif(line[i] == \"%\")\n\t\t\tmultiply = multiply*100;\n\n\t\tif(/[a-zA-Z]/.test(line[i])){\n\t\t\tconst datePart = excelDateToWebix(line.substr(i), lastDateType);\n\t\t\tif(datePart){\n\t\t\t\tif(numberPlaceholder || textPlaceholder)\n\t\t\t\t\treturn \"throw \\\"unexpected number placeholder\\\";\";\n\t\t\t\tdate.push(datePart.format);\n\t\t\t\tstr += \"/*date*/\"; //update this value after date format is ready\n\t\t\t\tlastDateType = datePart.type;\n\t\t\t\ti += datePart.length-1;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse\n\t\t\t\tstr += `+\"${line[i]}\"`;\n\t\t}\n\t\telse if (line[i] === delimiters.decimalSign && betweenPlaceholders){\n\t\t\tfmt+= delimiters.decimalSign;\n\t\t}\n\t\telse if(line[i]==\"@\"){\n\t\t\tif(numberPlaceholder || date.length)\n\t\t\t\treturn \"throw \\\"unexpected number placeholder\\\";\";\n\t\t\tif(!textPlaceholder){\n\t\t\t\tstr+=\"+fmt\";\n\t\t\t\ttextPlaceholder = true;\n\t\t\t}\n\t\t\tfmt+=line[i];\t\t\n\t\t}\n\t\telse if (placeholder(line[i])){\n\t\t\tif(textPlaceholder || date.length)\n\t\t\t\treturn \"throw \\\"unexpected text placeholder\\\";\";\n\t\t\tif (!numberPlaceholder) {\n\t\t\t\tif(symbolPos == \"left\")\n\t\t\t\t\tstr += `+\"${symbol}\"`;\n\t\t\t\tstr+=\"+fmt\";\n\t\t\t\tif(symbolPos == \"right\")\n\t\t\t\t\tstr += `+\"${symbol}\"`;\n\t\t\t\tnumberPlaceholder=true;\n\t\t\t}\n\t\t\tfmt+=line[i];\n\t\t}\n\t\telse if (line[i] === delimiters.groupSign && betweenPlaceholders)\n\t\t\tcomma = true;\n\t\telse\n\t\t\tstr += `+\"${line[i]}\"`;\n\t}\n\n\tif(date.length){\n\t\t// 12-hour or 24-hour clock depends on AM/PM in format\n\t\tif(date.indexOf(\"%A\") != -1)\n\t\t\tdate = date.map(datePart => {\n\t\t\t\tswitch(datePart){\n\t\t\t\t\tcase \"%G\": return \"%g\";\n\t\t\t\t\tcase \"%H\": return \"%h\";\n\t\t\t\t\tdefault: return datePart;\n\t\t\t\t}\n\t\t\t});\n\n\t\tfor(let i = 0; i < date.length; i++)\n\t\t\tstr = str.replace(\"/*date*/\", `+dateParts[${i}]`);\n\t}\n\n\treturn `\n\t\t${date.length ? `val = (${getJsDateFromExcel})(val); var dateParts = webix.Date.dateToStr(\"${date.join(\";\")}\")(val).split(\";\");` : \"\"}\n\t\t${fmt ? `${numberFormat(fmt, comma, delimiters, multiply)};` : \"\"}\n\t\t${str};`;\n}\n\nfunction numberFormat(fmt, comma, delimiters, multiply){\n\tvar str = `if(/^@+$/.test(\"${fmt}\") || isNaN(val)){ var fmt = val; }else {`;\n\tvar decimal = delimiters.decimalSign;\n\tvar [left, right] = getParts(fmt, decimal);\n\tright = (right || \"\").split(\"\").reverse().join(\"\");\n\n\t//calculate indexes in mask\n\tvar lzeros = left.indexOf(\"0\"); if (lzeros>=0) lzeros = left.length - lzeros;\n\tvar lfills = left.indexOf(\"?\"); if (lfills>=0) lfills = left.length - lfills;\n\tvar rzeros = right.indexOf(\"0\"); if (rzeros>=0) rzeros = right.length - rzeros;\n\tvar rfills = right.indexOf(\"?\"); if (rfills>=0) rfills = right.length - rfills;\n\tvar rmax = right.length;\n\n\tstr += `\n\tval = val*${multiply};\n\tvar parts = val.toFixed(${rmax}).split(\".\");\n\tvar left = parts[0];\n\tvar lsize = left.length; \n\tvar right = parts[1] || \"\";\n\tif (left.length < ${lzeros}) left = \"0000000000\".substr(0, ${lzeros} - left.length)+left;\n\tif (left.length < ${lfills}) left = spaces.substr(0, 6*(${lfills} - left.length))+left;\n\tif (${comma}) {\n\t\tvar buf = [];\n\t\tvar start = 3;\n\t\twhile (lsize > start) { buf.push(left.substr(left.length-start,3)); start+=3; }\n\t\tvar last = left.substr(0,left.length-start+3);\n\t\tif (last !== \"-\")\n\t\t\tbuf.push(last);\n\t\telse\n\t\t\tbuf.push(\"-\"+buf.pop());\n\n\t\tleft = buf.reverse().join(\"${delimiters.groupSign}\");\n\t}\n\tif (right){\n\t\tvar zpoint = right.length-1;\n\t\twhile (zpoint >= ${rzeros}){\n\t\t\tif (right[zpoint] !== \"0\"){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tzpoint--;\n\t\t}\n\n\t\tif (zpoint <= right.length)\n\t\t\tright = right.substr(0, zpoint+1);\n\n\t\tif (right.length < ${rfills}){\n\t\t\tright += spaces.substr(0, 6*(${rfills} - right.length));\n\t\t}\n\t}\n\tvar fmt = left+(right?\"${decimal}\":\"\")+right;\n\t`;\n\n\treturn str+\"}\\n\";\n}\n\nfunction updateDecimals(fmt, inc, val){\n\tlet parsed = parseFormat(fmt);\n\tfor(let i = 0; i < parsed.length; i++){\n\t\tif(parsed[i].decimals){\n\t\t\tif(inc>0)\n\t\t\t\tparsed[i].right.placeholders += Array(inc+1).join(\"0\");\n\t\t\telse\n\t\t\t\tparsed[i].right.placeholders = parsed[i].right.placeholders.slice(0, inc);\n\t\t}\n\t\telse{\n\t\t\tconst withoutText = !parsed[i].left.text && !parsed[i].right.text;\n\t\t\tconst withoutPlaceholders = !parsed[i].left.placeholders && !parsed[i].right.placeholders;\n\t\t\t//check if cell value have decimals (not cell format)\n\t\t\tif(inc < 0 && withoutText && withoutPlaceholders && webix.rules.isNumber(val) && val.indexOf(\".\") > -1){\n\t\t\t\tparsed[i].left.placeholders = \"0\";\n\t\t\t\tparsed[i].right.placeholders = Array(val.split(\".\")[1].length).join(Array(inc+1).join(\"0\"));\n\t\t\t}\n\t\t\t//ignore text\n\t\t\telse if(inc > 0 && (parsed[i].left.placeholders || withoutText)){\n\t\t\t\tparsed[i].left.placeholders = parsed[i].left.placeholders || \"0\";\n\t\t\t\tparsed[i].right.placeholders = Array(inc+1).join(\"0\");\n\t\t\t\tparsed[i].decimals = true;\n\t\t\t}\n\t\t}\n\t\tparsed[i].decimals = parsed[i].right.placeholders.length > 0;\n\t}\n\n\treturn serializeFormat(parsed);\n}\n\nexport function changeAreaDecimals(view, inc, row, column, page){\n\tconst isActiveSheet = !page || page == view.getActiveSheet();\n\tconst sheet = isActiveSheet ? view._mPage : view._mData.getPage(page);\n\tif(!sheet)\n\t\treturn;\n\n\tconst cells = getCells(view, row, column);\n\tif(cells.length == 0)\n\t\treturn;\n\n\tconst obj = sheet.getCell(cells[0].row-1, cells[0].column-1);\n\tconst oldFormat = obj && obj.format;\n\tconst value = (obj && obj.value) ? obj.value.toString() : \"\";\n\t\n\tif(webix.rules.isNumber(value) || oldFormat){\n\t\tgroup.set(function(){\n\t\t\tfor(let i = 0; i < cells.length; i++)\n\t\t\t\tchangeCellDecimals(view, inc, cells[i], page, sheet);\n\t\t});\n\n\t\tif(isActiveSheet){\n\t\t\tview.refresh();\n\n\t\t\tlet format = getFormatName(view, cells[0].row, cells[0].column) || \"common\";\n\t\t\tformat = isCustom(format) ? \"custom\" : format;\n\t\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"format\", value:format}]);\n\t\t}\n\t}\n}\n\nfunction changeCellDecimals(view, inc, cell, page, sheet){\n\tlet format;\n\tconst obj = sheet.getCell(cell.row-1, cell.column-1);\n\tconst oldFormat = obj && obj.format;\n\tconst value = (obj && obj.value) ? obj.value.toString() : \"\";\n\n\tif(oldFormat){\n\t\tformat = webix.copy({values:formatHelpers[oldFormat].values, format:getFormatSource(oldFormat)});\n\t\tformat.format = updateDecimals(format, inc, value);\n\n\t\tif(format.values && Object.prototype.hasOwnProperty.call(format.values, \"zeros\"))\n\t\t\tformat.values.zeros = Math.max(format.values.zeros+inc, 0);\n\t}\n\t//add format for cell without format\n\telse{\n\t\tconst zeros = webix.rules.isNumber(value) && value.split(\".\")[1] ? Math.max(value.split(\".\")[1].length+inc, 0) : Math.max(inc, 0);\n\n\t\tformat = {values:{negative:1, zeros:zeros, separator:0, type:\"int\"}};\n\t\tformat.format = serializeFormat(formToValues(format.values.type, format.values));\n\t}\n\taddFormat(view, cell.row, cell.column, format.format, format.values, page);\n}\n\nexport function isCustom(name){\n\treturn !defaultFormats[name];\n}\n\nexport function formToValues(type, formValues){\n\tif(type == \"string\")\n\t\treturn [{left:{text:\"@\"}}];\n\tif(formValues.date)\n\t\treturn [{left:{text:formValues.date}}];\n\n\tlet values = [{condition:\">=0\", left:{text:\"\"},right:{text:\"\"}}, {condition:\"<0\", left:{text:\"\"}, right:{text:\"\"}}];\n\twebix.extend(values, getDelimiters(type));\n\tvalues[0].right.placeholders = values[1].right.placeholders = formValues.zeros ? Array(formValues.zeros + 1).join(\"0\") : \"\";\n\tvalues[0].separator = values[1].separator = formValues.separator && type != \"percent\";\n\tvalues[0].left.placeholders = values[1].left.placeholders = values[0].separator ? \"#\"+values.groupSign +\"0\" : \"0\";\n\tvalues[0].decimals = values[1].decimals = formValues.zeros ? true : false;\n\tvalues[1].color = formValues.negative != 1 ? \"red\" : \"\";\n\tvalues[1].left.text += formValues.negative < 3 ? \"-\" : \"\";\n\tif(formValues.negative == 4)\n\t\tvalues[1].left.text += \"(\";\n\n\tif(type === \"percent\")\n\t\tvalues[0].right.text = values[1].right.text += \"%\";\n\telse if(type === \"price\"){\n\t\tconst symbolId = formValues.symbol;\n\t\tconst currency = arr.find(currencies, val => val.id == symbolId);\n\t\tconst pos = arr.findIndex(currency.format.split(\"{obj}\"), val => val) ? \"right\" : \"left\";\n\n\t\tvalues[0][pos].symbol = values[1][pos].symbol = symbolId;\n\t}\n\n\tif(formValues.negative == 4)\n\t\tvalues[1].right.text += \")\";\n\n\treturn values;\n}\n\nfunction formatToForm(format){\n\tconst formatsLocale = webix.i18n.spreadsheet.formats;\n\tconst dates = [\n\t\tformatsLocale.dateFormat,\n\t\tformatsLocale.timeFormat,\n\t\tformatsLocale.fullDateFormat,\n\t\tformatsLocale.longDateFormat\n\t];\n\tconst form = {format, type:\"custom\"};\n\n\tif(arr.find(dates, date => date == format)){\n\t\twebix.extend(form, {\n\t\t\ttype:\"date\", date:format\n\t\t}, true);\n\t}\n\telse{\n\t\tlet [first, second] = format.split(\";\");\n\t\tif(first && second){\n\t\t\tif(first.indexOf(\"[>=0]\") == 0 && second.indexOf(\"[<0]\") == 0){\n\t\t\t\tfirst = first.replace(\"[>=0]\", \"\");\n\t\t\t\tsecond = second.replace(\"[<0]\", \"\");\n\n\t\t\t\tlet red;\n\t\t\t\tif(second.indexOf(\"[red]\") == 0){\n\t\t\t\t\tsecond = second.replace(\"[red]\", \"\");\n\t\t\t\t\tred = true;\n\t\t\t\t}\n\n\t\t\t\tif(second[0] == \"-\"){\n\t\t\t\t\tsecond = second.substring(1);\n\t\t\t\t\tform.negative = red ? 2 : 1;\n\t\t\t\t}\n\t\t\t\telse if(red){\n\t\t\t\t\tif(second[0] == \"(\" && second[second.length-1] == \")\"){\n\t\t\t\t\t\tform.negative = 4;\n\t\t\t\t\t\tsecond = second.substring(1, second.length-1);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tform.negative = 3;\n\t\t\t\t}\n\n\t\t\t\tif(form.negative && first == second){\n\t\t\t\t\tlet type = \"int\";\n\t\t\t\t\tlet priceBrackets = first.indexOf(\"[$\") != -1;\n\n\t\t\t\t\tif(first[first.length-1] == \"%\"){\n\t\t\t\t\t\tfirst = first.substring(0, first.length-1);\n\t\t\t\t\t\ttype = \"percent\";\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tfor(let i = 0; i < currencies.length; i++){\n\t\t\t\t\t\t\tconst currency = currencies[i].id;\n\t\t\t\t\t\t\tlet isPrice;\n\n\t\t\t\t\t\t\tif(priceBrackets){\n\t\t\t\t\t\t\t\tif(first.indexOf(`[$${currency}]`) != -1){\n\t\t\t\t\t\t\t\t\tfirst = first.replace(`[$${currency}]`, \"\");\n\t\t\t\t\t\t\t\t\tisPrice = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(first.indexOf(currency) != -1){\n\t\t\t\t\t\t\t\tfirst = first.replace(currency, \"\");\n\t\t\t\t\t\t\t\tisPrice = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif(isPrice){\n\t\t\t\t\t\t\t\ttype = \"price\";\n\t\t\t\t\t\t\t\tform.symbol = currency;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst delimiters = getDelimiters(type);\n\n\t\t\t\t\tif(first.indexOf(\"#\"+delimiters.groupSign) == 0){\n\t\t\t\t\t\tfirst = first.replace(\"#\"+delimiters.groupSign, \"\");\n\t\t\t\t\t\tform.separator = 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst [integer, decimal] = first.split(delimiters.decimalSign);\n\t\t\t\t\tif((!integer || integer == \"0\") && (!decimal || /^[0]+$/.test(decimal))){\n\t\t\t\t\t\tform.type = type;\n\t\t\t\t\t\tform.delimiters = delimiters;\n\t\t\t\t\t\tform.zeros = decimal ? decimal.length : 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn form;\n}\n\nexport function serializeFormat(values, toExcel){\n\tlet fmt = \"\";\n\tfor(let i = 0; i < values.length; i++){\n\t\tif(values[i].condition)\n\t\t\tfmt += \"[\"+values[i].condition+\"]\";\n\t\tif(values[i].color)\n\t\t\tfmt += \"[\"+values[i].color+\"]\";\n\n\t\tif(values[i].left){\n\t\t\tif(values[i].left.text){\n\t\t\t\tlet leftText = values[i].left.text;\n\t\t\t\tfmt += leftText;\n\t\t\t}\n\t\t\tif(values[i].left.symbol)\n\t\t\t\tfmt += \"[$\"+values[i].left.symbol+\"]\";\n\t\t\tif(values[i].left.placeholders){\n\t\t\t\tlet leftPlaceholders = values[i].left.placeholders;\n\t\t\t\tfmt += toExcel ? leftPlaceholders.replace(values.groupSign, \",\") : leftPlaceholders;\n\t\t\t}\n\t\t}\n\n\t\tif(values[i].decimals)\n\t\t\tfmt += toExcel ? \".\" : values.decimalSign;\n\n\t\tif(values[i].right){\n\t\t\tif(values[i].right.placeholders)\n\t\t\t\tfmt += values[i].right.placeholders;\n\t\t\tif(values[i].right.symbol)\n\t\t\t\tfmt += \"[$\"+values[i].right.symbol+\"]\";\n\t\t\tif(values[i].right.text){\n\t\t\t\tlet rightText = values[i].right.text;\n\n\t\t\t\tfmt += rightText;\n\t\t\t}\n\t\t}\n\t\tif(i != values.length - 1)\n\t\t\tfmt += \";\";\n\t}\n\treturn fmt;\n}\n\nfunction parseFormat(fmt){\n\tconst fmtParts = fmt.format.split(\";\");\n\tlet values = [];\n\n\tfor(let i = 0; i < fmtParts.length; i++){\n\t\tlet separated = separateFmt(fmtParts[i]);\n\t\tvalues[i] = {color:separated.color, condition:separated.condition ,left:{}, right:{}};\n\n\t\tconst format = separated.fmt;\n\n\t\tvalues.groupSign = fmt.values.groupSign;\n\t\tvalues.decimalSign = fmt.values.decimalSign;\n\n\t\tif(format.indexOf(values.groupSign) > -1)\n\t\t\tvalues[i].separator = true;\n\n\t\tconst sepFmtParts = getParts(format, values.decimalSign);\n\n\t\tlet left = sepFmtParts[0];\n\t\tlet right = sepFmtParts[1] || \"\";\n\n\t\tif(sepFmtParts[1])\n\t\t\tvalues[i].decimals = true;\n\n\t\tleft = getFmtPartValues(left, \"left\", values.groupSign);\n\t\tright = getFmtPartValues(right, \"right\", values.groupSign);\n\n\t\tvalues[i].left = {\n\t\t\ttext: left.leftText,\n\t\t\tplaceholders: left.placeholders\n\t\t};\n\n\t\tvalues[i].right = {\n\t\t\ttext: left.rightText + right.rightText,\n\t\t\tplaceholders: right.placeholders\n\t\t};\n\n\t\tconst symbol = separated.symbol;\n\t\tif(symbol){\n\t\t\tconst currency = arr.find(currencies, val => val.id == symbol);\n\t\t\tlet pos = \"left\";\n\n\t\t\tif(currency)\n\t\t\t\tpos = arr.findIndex(currency.format.split(\"{obj}\"), val => val) ? \"right\" : \"left\";\n\n\t\t\tvalues[i][pos].symbol = symbol;\n\t\t}\n\t}\n\treturn values;\n}\n\nfunction getFmtPartValues(fmtPart, type, groupSign){\n\tlet firstPlaceholder;\n\tif(type == \"left\"){\n\t\tfirstPlaceholder = fmtPart.match(/[#?0]/);\n\t\tfirstPlaceholder = firstPlaceholder ? firstPlaceholder.index : Infinity;\n\t}\n\n\tlet leftText = \"\";\n\tlet rightText = \"\";\n\tlet placeholders = \"\";\n\tfor(let k = 0; k < fmtPart.length; k++){\n\t\tif(!placeholder(fmtPart[k])){\n\t\t\tif(fmtPart[k] == groupSign && placeholder(fmtPart[k+1]) && placeholder(fmtPart[k-1])){\n\t\t\t\tplaceholders += fmtPart[k];\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(type == \"left\")\n\t\t\t\tif(k < firstPlaceholder){\n\t\t\t\t\tleftText += fmtPart[k];\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\trightText += fmtPart[k];\n\t\t}\n\t\telse\n\t\t\tplaceholders += fmtPart[k];\n\t}\n\treturn {leftText: leftText, rightText: rightText, placeholders: placeholders};\n}\n\nfunction separateFmt(line){\n\tlet color = \"\";\n\tlet check = \"\";\n\tlet symbol = \"\";\n\n\tlet start = line.indexOf(\"[\");\n\tif (start != -1){\n\t\tif (line[1].match(/[><=]/)){\n\t\t\tlet end = line.indexOf(\"]\");\n\t\t\tcheck = line.substr(start+1, end-start-1);\n\t\t\tline = line.substr(end+1);\n\t\t}\n\t}\n\n\tstart = line.indexOf(\"[$\");\n\tif(start != -1){\n\t\tlet end = start + line.substr(start).indexOf(\"]\");\n\t\tsymbol = line.substr(start+2, end-start-2);\n\t\tline = line.substr(0, start)+line.substr(end+1);\n\t}\n\n\tstart = line.indexOf(\"[\");\n\tif (start != -1){\n\t\tlet end = line.indexOf(\"]\");\n\t\tcolor = line.substr(start+1, end-start-1);\n\t\tline = line.substr(end+1);\n\t}\n\treturn {condition:check, color, symbol, fmt:line};\n}\n\nfunction getCells(view, row, column){\n\tif(row && column){\n\t\tif (typeof row === \"object\" && typeof column === \"object\"){\n\t\t\tlet cells = [];\n\t\t\tfor (let r = row.row; r<=column.row; r++)\n\t\t\t\tfor (let c = row.column; c<=column.column; c++)\n\t\t\t\t\tcells.push({row: r, column: c});\n\t\t\treturn cells;\n\t\t}\n\t\telse\n\t\t\treturn [{row: row, column: column}];\n\t}\n\telse\n\t\treturn view.getSelectedId(true);\n}\n\nfunction placeholder(val){\n\treturn val === \"0\" || val === \"#\" || val === \"?\";\n}\n\nfunction getParts(str, decimal){\n\t// it is nessesary to use \"/\" before decimal to escape regex special characters\n\tconst match = str.match(\"[#?0][/\"+decimal+\"][#?0]\");\n\tif(match)\n\t\treturn [str.substring(0, match.index+1), str.substring(match.index+2)];\n\telse\n\t\treturn [str];\n}\n\n//simple check: take into account only first condition\nexport function checkFormat(format, type, checkTime){\n\tformat = format && format.fmt ? format.fmt : getFormatSource(format);\n\tif(!format) return;\n\tconst parts = splitFormat(format);\n\tconst separated = separateFmt(parts[0]).fmt;\n\n\tlet quot;\n\tif(separated)\n\t\tfor(let i = 0; i < separated.length; i++){\n\t\t\tif(separated[i] == \"\\\"\")\n\t\t\t\tquot = !quot;\n\t\t\tif(quot) continue;\n\n\t\t\tif(type == \"date\" && /[a-zA-Z]/.test(separated)){\n\t\t\t\tconst datePart = excelDateToWebix(separated.substr(i), \"date\");\n\t\t\t\tif(datePart){\n\t\t\t\t\tif(checkTime){\n\t\t\t\t\t\tif(datePart.type == \"time\")\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(type == \"string\" && separated[i] == \"@\")\n\t\t\t\treturn true;\n\t\t}\n}\n\nexport function getFormatName(view, row, col){\n\tconst item = view._mPage.getCell(row-1, col-1);\n\treturn (item && item.format) || null;\n}\n\nexport function isDateInvalid(value){\n\treturn value < -99974430.925 || value > 100025569.125;\n}\n\nexport function getDateEditFormat(view, row, col){\n\tconst formatName = getFormatName(view, row, col);\n\tconst locale = webix.i18n.spreadsheet.formats;\n\tconst isTime = checkFormat(formatName, \"date\", true);\n\n\treturn webix.Date.dateToStr( locale[isTime ? \"parseDateTime\" : \"parseDate\"] );\n}\n\nexport function getFormatFromData(data, array){\n\tconst styleName = array[3];\n\tlet fmt;\n\tif(styleName){\n\t\tlet style = arr.find(data.styles, arr => arr[0] == styleName);\n\t\tif(style){\n\t\t\tstyle = style[1];\n\t\t\tconst fmtName = styleFromText(style).format;\n\t\t\tif(fmtName){\n\t\t\t\tif(data.formats)\n\t\t\t\t\tfmt = arr.find(data.formats, arr => arr[0] == fmtName);\n\n\t\t\t\tif(fmt)\n\t\t\t\t\tfmt = fmt[1];\n\t\t\t\telse\n\t\t\t\t\tfmt = getFormatSource(fmtName); //default formats (int, percent, etc.)\n\t\t\t}\n\t\t}\n\t}\n\treturn fmt;\n}","import {getFormatName, getFormatSource} from \"../operations/formats\";\n\nexport function isChar(char) {\n\tconst code = char.charCodeAt(0);\n\treturn code <= 122 ? code >= 65 || code == 35 || code == 36 || code == 46 : code > 191;\n}\n\nexport function getLastCharIndex(str, includeNumbers){\n\tlet lastChar = str.length;\n\tfor(let i = lastChar - 1; i >= 0; i--){\n\t\tif(!isChar(str[i])){\n\t\t\tif(includeNumbers && isNumber(str[i]))\n\t\t\t\tcontinue;\n\t\t\treturn lastChar;\n\t\t}\n\t\telse\n\t\t\tlastChar = i;\n\t}\n}\n\nfunction isNumber(char){\n\tvar code = char.charCodeAt(0);\n\treturn code>=48 && code<=57;\n}\n\nfunction getWord(formula, i){\n\tlet sheet = \"\";\n\tlet quotes = false;\n\n\tlet j;\n\tfor(j=i; j<formula.length; j++){\n\t\tconst key =  formula[j];\n\t\tif (key === \"'\"){\n\t\t\tquotes = !quotes;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (!quotes){\n\t\t\tif (key == \"!\"){\n\t\t\t\tif(formula[i] == \"#\") //error\n\t\t\t\t\tcontinue;\n\t\t\t\telse{\n\t\t\t\t\t//multi-sheet math\n\t\t\t\t\tsheet = formula.substr(i, j-i);\n\t\t\t\t\tif (sheet[0] === \"'\")\n\t\t\t\t\t\tsheet = sheet.substr(1, sheet.length-2);\n\t\t\t\t\ti=j+1;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!isChar(key) && !isNumber(key)){\n\t\t\t\treturn [formula.substr(i, j-i), j, i, sheet];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn [formula.substr(i), j, i, sheet];\n}\n\nvar operand = /^[A-Z$]+[0-9]+$/;\nfunction isPosition(text){\n\treturn operand.test(text);\n}\n\nexport function position(word){\n\tvar row = 0, sum = 0, x = 1, mode = 1, flags = 0;  \n\tvar chars = false;\n\n\tfor (var j =word.length-1; j>=0; j--){\n\t\tvar key = word[j].charCodeAt(0);\n\t\tif (key === 36) {\n\t\t\tflags = flags+mode;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (key < 58){\n\t\t\t//numeric\n\t\t\tsum += (key - 48)*x;\n\t\t\tx *= 10;\n\t\t} else {\n\t\t\tif (!chars){\n\t\t\t\tx = 1; row = sum; sum = 0; chars = true; mode += 1;\n\t\t\t}\n\t\t\t//alpha\n\t\t\tsum += (key - 64)*x;\n\t\t\tx*=26;\n\t\t}\n\t}\n\n\t/*\n\t\t$X$Y => flags = 3\n\t\t$XY  => flags = 2\n\t\tX$Y  => flags = 1\n\t\tXY   => flags = 0\n\t*/\n\treturn [row, sum, flags];\n}\n\nexport function split(formula, view, crosssheet, fromSheet){\n\tconst activeSheet = view.getActiveSheet();\n\tvar lines = [];\n\tvar index = 0;\n\tvar quotes = false, ph = false;\n\tfor (var i = formula[i] === \"=\" ? 1 : 0; i < formula.length; i++){\n\t\tvar key = formula[i];\n\t\tif (key == \"\\\"\"){\n\t\t\tquotes = !quotes;\n\t\t} else if (!quotes){\n\t\t\tif (key == \"{\" && formula[i+1] == \"{\"){\n\t\t\t\tph = true;\n\t\t\t} else if (key == \"}\" && formula[i+1] == \"}\"){\n\t\t\t\tph = false;\n\t\t\t} else if (!ph){\n\t\t\t\tconst escaped = key === \"'\";\n\t\t\t\tif (escaped || isChar(key)){\n\t\t\t\t\tlet [word, end, ,sheet] = getWord(formula, i);\n\t\t\t\t\tlet next = end - 1;\n\t\t\t\t\tlet value;\n\n\t\t\t\t\tif(formula[next+1] !== \"(\"){\n\t\t\t\t\t\tif(isPosition(word)){\n\t\t\t\t\t\t\tif(!sheet || sheet == activeSheet || crosssheet){\n\t\t\t\t\t\t\t\tvalue = sheet ? [sheet, word, escaped] : word;\n\t\t\t\t\t\t\t\tpushLine(lines, formula, i, index, value);\n\t\t\t\t\t\t\t\tindex = next+1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(crosssheet){\n\t\t\t\t\t\t\t\tvalue = sheet ? [sheet, word, escaped] : word;\n\t\t\t\t\t\t\t\tpushLine(lines, formula, i, index, value);\n\t\t\t\t\t\t\t\tindex = next+1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t//specified sheet or active sheet (if not specified) range\n\t\t\t\t\t\t\t\tlet range = view.ranges.getCode(word, sheet || fromSheet);\n\n\t\t\t\t\t\t\t\t//global range\n\t\t\t\t\t\t\t\tif(!range)\n\t\t\t\t\t\t\t\t\trange = view.ranges.getCode(word, true);\n\n\t\t\t\t\t\t\t\tif(range){\n\t\t\t\t\t\t\t\t\tconst parts = range.split(\"!\");\n\t\t\t\t\t\t\t\t\tif(parts[0] == activeSheet){\n\t\t\t\t\t\t\t\t\t\tvalue = [sheet, word, escaped, parts[1]];\n\t\t\t\t\t\t\t\t\t\tpushLine(lines, formula, i, index, value);\n\t\t\t\t\t\t\t\t\t\tindex = next+1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ti = next;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (index!=formula.length)\n\t\tlines.push(formula.substr(index));\n\treturn lines;\n}\n\nfunction pushLine(lines, formula, i, index, value){\n\tif (i!==0)\n\t\tlines.push(formula.substr(index, i-index));\n\tlines.push(value);\n}\n\nexport function getMathFormat(view, value){\n\tlet level = 0;\n\tlet blockLevel;\n\n\tconst parts = split(value, view);\n\n\tfor(let i = 0; i < parts.length; i++){\n\t\t// parts[i] can contain numbers, math operators, formulas, etc.\n\t\tif(i%2 === 0){\n\t\t\t// check formulas and round brackets which are not in quotes\n\t\t\tconst methods = parts[i].match(/(([a-zA-Z]*\\()|\\))(?=(?:[^\"]|\"[^\"]*\")*$)/g);\n\t\t\tif(methods)\n\t\t\t\tmethods.forEach(part => {\n\t\t\t\t\tif(part.indexOf(\"(\") > -1){\n\t\t\t\t\t\tlevel++;\n\t\t\t\t\t\t// some methods block format addition (like count,odd,etc.)\n\t\t\t\t\t\tconst safeMethods = /^(SUM|AVERAGE|MAX|MIN|INT|ROUND|ROUNDDOWN|ROUNDUP|TRUNC)?\\($/gi;\n\t\t\t\t\t\tif(!blockLevel && !safeMethods.test(part))\n\t\t\t\t\t\t\tblockLevel = level;\n\t\t\t\t\t}\n\t\t\t\t\telse if(--level < blockLevel)\n\t\t\t\t\t\tblockLevel = null;\n\t\t\t\t});\n\t\t}\n\t\t// parts[i] can be named range, cell from the active / non-active sheet\n\t\telse if(!blockLevel){\n\t\t\tif(webix.isArray(parts[i])){\n\t\t\t\tif(/^[A-Za-z]+$/.test(parts[i][1]))\n\t\t\t\t\tparts[i] = parts[i][3].split(\":\")[0];\n\t\t\t\telse if(parts[i][0] == view.getActiveSheet())\n\t\t\t\t\tparts[i] = parts[i][1];\n\t\t\t\telse\n\t\t\t\t\tcontinue; // ignore non-active sheets\n\t\t\t}\n\n\t\t\t// if range - check first cell position\n\t\t\tconst cell = position(parts[i]);\n\t\t\tconst name = getFormatName(view, cell[0], cell[1]);\n\n\t\t\t// first cell with number format\n\t\t\tif(name)\n\t\t\t\treturn {fmt: getFormatSource(name)};\n\t\t}\n\t}\n}","export function getSuggestPos(editor){\n\tconst text = editor.getValue();\n\tconst node = editor.getInputNode();\n\n\tconst sizes = webix.html.offset(node);\n\n\tconst selectionStart = node.selectionStart;\n\tconst textWidth = webix.html.getTextSize(text.substring(0, selectionStart), \"webix_ssheet_formula\").width;\n\n\treturn {\n\t\tx: sizes.x + textWidth,\n\t\ty: sizes.y + sizes.height\n\t};\n}","import {getFormatName, checkFormat, isDateInvalid, getFormatFromData, getFormatSource} from \"./formats\";\nimport {getExcelDateFromJs} from \"../mathematics/methods\";\nimport {getMathFormat} from \"../mathematics/parser\";\n\nexport function init(view){\n\tview.attachEvent(\"onCellChange\", function(row, col, value, page){\n\t\tif(page == this.getActiveSheet() && !this._setType){\n\t\t\tconst formatName = getFormatName(this, row, col);\n\t\t\tconst cell = {\n\t\t\t\trow,\n\t\t\t\tcol,\n\t\t\t\tvalue,\n\t\t\t\tfmt: formatName ? {fmt: getFormatSource(formatName)} : null\n\t\t\t};\n\t\t\tsetType(this, cell);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onBeforeFormatChange\", function(row, col, formatName, oldFormat, page){\n\t\tif(!this._setType){\n\t\t\tconst cell = {\n\t\t\t\trow,\n\t\t\t\tcol,\n\t\t\t\tvalue: view.getCellValue(row, col, true, page),\n\t\t\t\tfmt: {fmt:getFormatSource(formatName)}\n\t\t\t};\n\t\t\tsetType(this, cell, true, page);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAction\", function(action, values){\n\t\tif(action == \"dropdown\" && values.newValue && values.newValue.editor == \"excel_date\"){\n\t\t\tconst format = getFormatName(this, values.row, values.column, values.page);\n\t\t\tif(getFormatType(format) != \"date\")\n\t\t\t\tthis.setFormat(values.row, values.column, webix.i18n.spreadsheet.formats.dateFormat, values.page);\n\t\t}\n\t});\n}\n\nexport function loadCell(view, data, item){\n\tconst fmt = getFormatFromData(data, item);\n\tconst cell = {\n\t\tvalue: item[2],\n\t\tfmt: fmt ? {fmt} : null,\n\t\ttype: item[4]\n\t};\n\tsetType(view, cell);\n\treturn cell;\n}\n\nfunction getExpectType(view, cell, parseDate, isFormula, formatType, style, page){\n\t//date based math\n\tlet type = \"string\";\n\tif(!webix.isUndefined(cell.value)){\n\t\tif(isFormula){\n\t\t\ttype = \"number\";\n\n\t\t\tif(/^=(now|date|time)\\(/i.test(cell.value))\n\t\t\t\ttype = \"date\";\n\t\t\telse if(/^=(sparkline|image)\\(/i.test(cell.value))\n\t\t\t\ttype = \"string\";\n\t\t}\n\t\telse if(!isNaN(cell.value))\n\t\t\ttype = \"number\";\n\t\telse if(formatType != \"string\" && parseDate){\n\t\t\t//if user types a date string, or it comes from Excel import\n\t\t\t//set date type and convert string to Excel date\n\t\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\t\tconst value  = parser(cell.value);\n\t\t\tif(value != \"\" && !isNaN(value)){\n\t\t\t\t//change cell style - value changes once (some value -> 35767.5)\n\t\t\t\t//change cell value - value changes twice (some value -> \"12/03/97\" -> 35767.5)\n\t\t\t\t//so ignore undo for cell value change\n\t\t\t\tif(style)\n\t\t\t\t\tdateToExcel(view, cell, value, page);\n\t\t\t\telse\n\t\t\t\t\tview.ignoreUndo(() => dateToExcel(view, cell, value));\n\n\t\t\t\ttype = \"date\";\n\t\t\t}\n\t\t}\n\t}\n\treturn type;\n}\n\nfunction dateToExcel(view, cell, date, page){\n\tdate = getExcelDateFromJs(date);\n\tcell.value = date;\n\n\tif(!(view._loading_data || view._page_value_set))\n\t\tview.setCellValue(cell.row, cell.col, date, page);\n}\n\nfunction checkType(type, expectType, formatType, isFormula, value){\n\ttype = type || expectType;\n\n\t//strings will always have string type regardless of format\n\tif(expectType == \"string\")\n\t\ttype = \"string\";\n\telse if(formatType)\n\t\ttype = formatType;\n\n\tif(type == \"date\" && !isFormula && isDateInvalid(value))\n\t\ttype = \"number\";\n\n\treturn type;\n}\n\nfunction getFormatType(format){\n\tlet formatType = format ? \"number\" : null;\n\tif(checkFormat(format, \"string\"))\n\t\tformatType = \"string\";\n\telse if(checkFormat(format, \"date\"))\n\t\tformatType = \"date\";\n\treturn formatType;\n}\n\nexport function getType(view, row, column, page){\n\tpage = page ? view._mData.getPage(page) : view._mPage;\n\tconst item = page.getCell(row-1, column-1);\n\treturn (item && item.type) || null;\n}\n\nfunction setType(view, cell, style, page){\n\tconst parseToStore = !(cell.row && cell.col);\n\n\t//prevent type change during value or format change\n\tview._setType = true;\n\n\tconst isFormula = typeof cell.value == \"string\" && cell.value[0] == \"=\";\n\tconst parseDate = (!style || cell.fmt == getFormatSource(\"date\")) && (!view._loading_data || view._page_value_set || cell.type == \"date\");\n\n\tlet mathFormat;\n\tif(!parseToStore && (!page || page == view.getActiveSheet()))\n\t\tmathFormat = isFormula && !cell.fmt ? getMathFormat(view, cell.value) : null;\n\n\tconst formatType = getFormatType(cell.fmt || mathFormat);\n\tconst expectType = getExpectType(view, cell, parseDate, isFormula, formatType, style, page);\n\n\tcell.type = checkType(cell.type, expectType, formatType, isFormula, cell.value);\n\n\tif(!parseToStore){\n\t\tconst sheet = !page || page == view.getActiveSheet() ? view._mPage : view._mData.getPage(page);\n\t\tconst item = sheet.getCell(cell.row-1, cell.col-1, true);\n\t\titem.$format = formatType == \"string\" ? 1 : 0;\n\t\tupdateCell(view, cell, expectType, formatType, mathFormat, page);\n\t\titem.type = cell.type;\n\t}\n\n\tdelete view._setType;\n}\n\nfunction updateCell(view, cell, expectType, formatType, mathFormat, page){\n\tconst row = cell.row;\n\tconst col = cell.col;\n\tconst isString = typeof cell.value == \"string\";\n\n\tconst isFormula = isString && cell.value[0] == \"=\";\n\tconst cellEditor = view.getCellEditor(row, col);\n\tconst isActiveSheet = !page || page == view.getActiveSheet();\n\n\t//update cell value if set number format (5e5 -> 500000, 005 -> 5)\n\tif(!(view._loading_data || view._page_value_set) && cell.type === \"number\" && isString && !isFormula && cell.value !== \"\")\n\t\tview.setCellValue(row, col, cell.value*1, page);\n\n\tif(mathFormat)\n\t\tview.setFormat(row, col, mathFormat.fmt);\n\telse if(cell.type == \"date\"){\n\t\t// add default date format\n\t\tif(formatType != \"date\"){\n\t\t\tconst isTime = isFormula && cell.value.toUpperCase().indexOf(\"=TIME(\") == 0;\n\t\t\tconst locale = webix.i18n.spreadsheet.formats;\n\t\t\tconst format = isTime ? locale.timeFormat : locale.dateFormat;\n\t\t\tview.setFormat(row, col, format, page);\n\t\t}\n\n\t\t//set date editor for cells with date type\n\t\tif(!isFormula && !cellEditor && isActiveSheet)\n\t\t\tview.setCellEditor(row, col, {editor: \"excel_date\"}, page);\n\t}\n\telse if(formatType != \"string\" && cell.type == \"string\" && expectType != \"string\"){\n\t\t//force text format for numbers typed as strings\n\t\tview.setFormat(row, col, \"@\", page);\n\t}\n\n\t//remove date editor\n\tif(isActiveSheet && (cell.type != \"date\" || isFormula) && cellEditor && cellEditor.editor == \"excel_date\")\n\t\tview.setCellEditor(row, col, null);\n}\n","import {isChar, getLastCharIndex} from \"../mathematics/parser\";\nimport {getSuggestPos} from \"../helpers/suggest_pos\";\n\nwebix.protoUI({\n\tname: \"suggest-formula\",\n\tdefaults: {\n\t\tfitMaster: false,\n\t\tfilter(item, value) {\n\t\t\tconst editor = webix.$$(this.config.master);\n\t\t\tconst cursor = editor.getInputNode().selectionStart;\n\t\t\tconst val = editor.getValue();\n\n\t\t\tif(val.charAt(0) !== \"=\") return;\n\n\t\t\tconst str = val.substring(0, cursor);\n\t\t\tconst search = str.substring( getLastCharIndex(str, true) );\n\t\t\tconst nextSymbol = val.charAt(cursor);\n\n\t\t\tif(search && (cursor === val.length || !(isChar(nextSymbol) || /^[0-9]/.test(nextSymbol))))\n\t\t\t\tvalue = search;\n\n\t\t\treturn item.value.toString().toLowerCase().indexOf(value.toLowerCase()) === 0;\n\t\t}\n\t},\n\t$init() {\n\t\tthis.attachEvent(\"onBeforeShow\", (node) => {\n\t\t\tif(node.tagName){\n\t\t\t\tconst editor = webix.$$(this.config.master);\n\t\t\t\tconst text = editor.getValue();\n\n\t\t\t\t//only for formulas\n\t\t\t\tif(!text || text.charAt(0) !== \"=\") return false;\n\n\t\t\t\twebix.ui.popup.prototype.show.apply(this, [getSuggestPos(editor)]);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t},\n\tsetMasterValue(data, refresh) {\n\t\tconst text = data.id ? this.getItemText(data.id) : (data.text||data.value);\n\t\twebix.$$(this.config.master).setValueHere(text);\n\n\t\tif (!refresh)\n\t\t\tthis.hide(true);\n\n\t\tthis.callEvent(\"onValueSuggest\", [data, text]);\n\t},\n\t$enterKey: function() {\n\t\tif (this.isVisible())\n\t\t\treturn webix.ui.suggest.prototype.$enterKey.apply(this, arguments);\n\t}\n}, webix.ui.suggest);","webix.protoUI({\n\tname: \"ssheet-button\",\n\t$cssName: \"button\",\n\tdefaults:{\n\t\ttype:\"htmlbutton\",\n\t\twidth: 40\n\t},\n\t$init: function(config){\n\t\tconst arrowCss = config.arrow ? \" webix_ssheet_button_menu\" : \"\";\n\t\tconst iconCss = config.label ? \"\" : \" webix_ssheet_icon_only\";\n\t\tthis.$view.className += \" webix_ssheet_button\"+arrowCss+iconCss;\n\t\tif(config.label || config.icon){\n\t\t\tlet icon = (config.icon||config.name),\n\t\t\t\ttext = config.label||\"\";\n\t\t\tif(config.arrow){\n\t\t\t\tconst right = webix.skin.$active.inputSpacing/2;\n\t\t\t\ttext += \"<span class='webix_ssheet_button_icon webix_ssheet_icon_arrow webix_icon wxi-menu-down' style='right:\"+right+\"px;'></span>\";\n\t\t\t}\n\t\t\tconfig.label = \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\"+icon+\"'></span> \"+text;\n\t\t\tconfig.tooltip = webix.i18n.spreadsheet.tooltips[config.name]||\"\";\n\t\t}\n\t\tif(config.options && !config.popup)\n\t\t\tconfig.popup = getPopupConfig(config.options);\n\t}\n},webix.ui.button);\n\n\nwebix.protoUI({\n\tname: \"ssheet-button-icon-top\",\n\t$cssName: \"button\",\n\tdefaults:{\n\t\ttype:\"htmlbutton\",\n\t\twidth: 70,\n\t\theight: 70\n\t},\n\t$init: function(config){\n\t\tthis.$view.className += \" ssheet_button_icon_top\";\n\t\tif(config.label) {\n\t\t\tlet icon = (config.icon || config.name||\"\"),\n\t\t\t\ttext = config.label;\n\t\t\tconfig.label = \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\" + icon + \"'></span><br/>\";\n\t\t\tconfig.label += \"<span class='ssheet_button_icon_top_text'>\"+text+\"</span>\";\n\t\t\tif (config.arrow)\n\t\t\t\tconfig.label += \"<br/><span class='ssheet_button_icon_top_arrow webix_icon wxi-menu-down'></span>\";\n\t\t\tconfig.tooltip = webix.i18n.spreadsheet.tooltips[config.name]||\"\";\n\t\t}\n\t\tif(config.options && !config.popup)\n\t\t\tconfig.popup = getPopupConfig(config.options);\n\t}\n},webix.ui.button);\n\n\nfunction getPopupConfig(options){\n\treturn {\n\t\tview: \"ssheet-suggest\",\n\t\tcss: \"webix_ssheet_suggest\",\n\t\tautowidth:true,\n\t\ttemplate: function(obj){\n\t\t\tvar text = \"\";\n\t\t\tif(obj.icon)\n\t\t\t\ttext += \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\" + obj.icon + \"'></span> \";\n\t\t\ttext += obj.value || webix.i18n.spreadsheet.menus[obj.id] || obj.id;\n\t\t\treturn text;\n\t\t},\n\t\tdata: options,\n\t\ton:{\n\t\t\tonItemClick: function(id){\n\t\t\t\tvar button = this.config.master;\n\t\t\t\tif(button){\n\t\t\t\t\tlet view = webix.$$(button).getTopParentView();\n\t\t\t\t\tvar params = [this.getItem(id)];\n\t\t\t\t\tif(webix.$$(button).config.area){\n\t\t\t\t\t\tlet area = view.$$(\"cells\").getSelectArea();\n\t\t\t\t\t\tif(area)\n\t\t\t\t\t\t\tparams = params.concat([area.start,area.end]);\n\t\t\t\t\t}\n\t\t\t\t\tview.callEvent(\"onCommand\",params);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}","export function init(view){\n\t//parsing initial data\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data, config) => _serialize(view, data, config));\n\n\t// undo\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif(type == \"value\")\n\t\t\t_undoValue(view, row, column, value);\n\t});\n}\n\nfunction _serialize(view, obj, config){\n\tvar math = !config || config.math!==false;\n\n\tvar grid = view.$$(\"cells\");\n\tvar state = grid.getState();\n\tvar columns = state.ids.concat(state.hidden);\n\n\t// remove \"rowId\" column\n\tcolumns.splice(columns.indexOf(\"rowId\"), 1);\n\n\tobj.data = getSheetData(view, math);\n\n\twebix.extend(\n\t\tobj.table,\n\t\t{\n\t\t\tfrozenColumns : (view._frozenColumns || 0),\n\t\t\tfrozenRows : (view._frozenRows || 0)\n\t\t}\n\t);\n}\n\nfunction _parse(view, obj){\n\tconst tconfig = obj.table || { frozenColumns : 0, frozenRows : 0 };\n\tview._frozenColumns = view._frozenRows = 0;\n\tif (tconfig){\n\t\tif (!webix.isUndefined(tconfig.frozenColumns))\n\t\t\tview.freezeColumns(tconfig.frozenColumns);\n\t\tif (!webix.isUndefined(tconfig.frozenRows))\n\t\t\tview.freezeRows(tconfig.frozenRows);\n\t}\n\n\tif(obj.sizes)\n\t\tview.$$(\"cells\").define(\"fixedRowHeight\", false);\n}\n\nfunction _undoValue(view, row, column, value){\n\tview.setCellValue(row, column, value);\n}\n\nexport function getSheetData(view, math, page){\n\tpage = page ? view._mData.getPage(page) : view._mPage;\n\treturn page.serialize(math)\n\t\t.map(arr =>{\n\t\t\tlet value = arr[2].value;\n\t\t\tif(value === null)\n\t\t\t\tvalue = \"\";\n\t\t\treturn [ ++arr[0], ++arr[1], value, arr[2].style||\"\", arr[2].type];\n\t\t})\n\t\t.filter(arr => {\n\t\t\treturn arr[2] || arr[2] === 0 || arr[3];\n\t\t});\n}","import \"./suggest_formula\";\nimport {getJsDateFromExcel} from \"../mathematics/methods\";\nimport {getType} from \"../operations/types\";\nimport {getDateEditFormat} from \"../operations/formats\";\nimport {split, position, getLastCharIndex} from \"../mathematics/parser\";\nimport {getSuggestPos} from \"../helpers/suggest_pos\";\n\nwebix.protoUI({\n\tname: \"live-editor\",\n\t$cssName:\"texthighlight\",\n\t$init(config){\n\t\tconst master = this.getTopParentView();\n\n\t\tthis.paramsPopup = webix.ui({\n\t\t\tview: \"popup\",\n\t\t\twidth: 350,\n\t\t\tmaxHeight: 300,\n\t\t\tbody:{\n\t\t\t\tscroll: \"auto\",\n\t\t\t\tautoheight: true,\n\t\t\t\ttemplate: obj => {\n\t\t\t\t\tlet html = `<p class = \"webix_ssheet_method_name\">${obj.method}</p>`;\n\n\t\t\t\t\tconst params = obj.params;\n\t\t\t\t\tfor(let i = 0; i < params.length; i++){\n\t\t\t\t\t\tconst param = `<span class = \"webix_ssheet_method_param_name\">${params[i][0]+\": \"}</span>`;\n\t\t\t\t\t\thtml += `<p${obj.number == i ? \" class = 'webix_ssheet_method_param_active'\":\"\"}>${param}<span class=\"webix_ssheet_method_param_description\">${params[i][1]}</p>`;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn html;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tmaster._destroy_with_me.push(this.paramsPopup);\n\n\t\tconfig.suggest = {\n\t\t\twidth: 350,\n\t\t\theight: 200,\n\t\t\tview: \"suggest-formula\",\n\t\t\tcss: \"webix_ssheet_math_suggest\",\n\t\t\tdata: config.suggestData,\n\t\t\ttemplate: obj => obj.pos ? obj.id : obj.value,\n\t\t\tbody: {\n\t\t\t\ttemplate: obj => {\n\t\t\t\t\tif(obj.id.indexOf(\"$range_\") == 0)\n\t\t\t\t\t\treturn `<span class=\"webix_ssheet_left\">${obj.value}</span><span class=\"webix_ssheet_range webix_ssheet_right\">${obj.pos}</span>`;\n\t\t\t\t\telse\n\t\t\t\t\t\treturn obj.value;\n\t\t\t\t}\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonBeforeShow: function(){\n\t\t\t\t\tconst list = this.getList();\n\n\t\t\t\t\tconst oldRanges = list.find(obj => obj.id.indexOf(\"$range_\") == 0);\n\t\t\t\t\tif(oldRanges)\n\t\t\t\t\t\toldRanges.forEach(obj => list.remove(obj.id));\n\n\t\t\t\t\tconst allRanges = master.ranges.serialize(master.getActiveSheet()).map(r => ({\n\t\t\t\t\t\tid: \"$range_\" + r[0],\n\t\t\t\t\t\tvalue: r[0],\n\t\t\t\t\t\tpos: r[1],\n\t\t\t\t\t\tglobal: r[2]\n\t\t\t\t\t}));\n\n\t\t\t\t\tconst suggestRanges = allRanges.filter(range => !range.global);\n\t\t\t\t\t\n\t\t\t\t\tallRanges.filter(range => range.global).forEach(range => {\n\t\t\t\t\t\tif(!suggestRanges.find(sRange => sRange.value == range.value))\n\t\t\t\t\t\t\tsuggestRanges.push(range);\n\t\t\t\t\t});\n\n\t\t\t\t\tsuggestRanges.forEach(range => list.add(range));\n\n\t\t\t\t\tlist.filter(item => this.config.filter.apply(this, [item, this.getMasterValue()]));\n\t\t\t\t\tlist.sort(\"value\", \"asc\", \"string\");\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tconfig.highlight = this.highlight;\n\n\t\tthis._highlightedCells = {};\n\t\tthis.$view.className += \" webix_ssheet_formula\";\n\n\t\tthis.attachEvent(\"onKeyPress\", (code, e) => {\n\t\t\tdelete this._update_range;\n\t\t\tif(code == 13) {\n\t\t\t\t//ignore Enter key if it was pressed to select some value from suggest\n\t\t\t\tif ((new Date() - (this._last_value_set || 0)) > 300){\n\t\t\t\t\tconst cell = this.config.activeCell;\n\t\t\t\t\tthis.showActiveSheet(true);\n\t\t\t\t\tthis.updateCellValue(cell);\n\t\t\t\t\t//blur to avoid calling highlight function after selection move\n\t\t\t\t\tthis.getInputNode().blur();\n\t\t\t\t\t//we have 'enter' hot key to activate editor\n\t\t\t\t}\n\t\t\t\twebix.html.preventEvent(e);\n\t\t\t}\n\t\t\t//esc - cancel editing\n\t\t\telse if(code == 27){\n\t\t\t\tthis.showActiveSheet();\n\n\t\t\t\twebix.delay(()=>{\n\t\t\t\t\tconst cell = master.getSelectedId();\n\t\t\t\t\tconst oldVal = this.getCellValue(cell.row, cell.column);\n\n\t\t\t\t\tif(this.getValue() == oldVal)\n\t\t\t\t\t\tmaster.$$(\"cells\").refresh(cell.row);\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.setValue(oldVal);\n\n\t\t\t\t\tdelete master.$handleSelection;\n\n\t\t\t\t\twebix.UIManager.setFocus(master.$$(\"cells\"));\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if(code >= 33 && code <= 40) // arrow navigation\n\t\t\t\tthis.showParamsPopup();\n\t\t});\n\n\t\t// caret move\n\t\tthis.attachEvent(\"onItemClick\", function(){\n\t\t\tthis.showParamsPopup();\n\t\t});\n\n\t\tthis.attachEvent(\"onAfterRender\", function(){\n\t\t\twebix.eventRemove(this.keydownEv);\n\n\t\t\tthis.keydownEv = webix.event(this.getInputNode(), \"keydown\", e => {\n\t\t\t\tthis.endEdit(e);\n\t\t\t});\n\t\t});\n\t},\n\tshowParamsPopup(){\n\t\twebix.delay(()=>{\n\t\t\tconst popup = this.paramsPopup;\n\t\t\tconst text = this.getValue();\n\n\t\t\tif(text[0] == \"=\"){\n\t\t\t\tconst cursor = this.getInputNode().selectionStart;\n\n\t\t\t\tlet number = 0;\n\t\t\t\tlet brackets = 0;\n\t\t\t\tfor(let i = cursor-1; i > 0; i--){\n\t\t\t\t\tswitch (text[i]){\n\t\t\t\t\t\tcase \",\":\n\t\t\t\t\t\t\tif(!brackets)\n\t\t\t\t\t\t\t\tnumber++;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \")\":\n\t\t\t\t\t\t\tbrackets++;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"(\":\n\t\t\t\t\t\t\tif(!brackets){\n\t\t\t\t\t\t\t\tconst str = text.substring(0, i);\n\t\t\t\t\t\t\t\tlet method = str.substring(getLastCharIndex(str, true));\n\t\t\t\t\t\t\t\tif(method){\n\t\t\t\t\t\t\t\t\tmethod = method.toUpperCase();\n\t\t\t\t\t\t\t\t\tconst params = webix.i18n.spreadsheet.liveEditor[\"functions-syntax\"][method];\n\t\t\t\t\t\t\t\t\tif(params && params.length){\n\t\t\t\t\t\t\t\t\t\tconst template = popup.getBody();\n\t\t\t\t\t\t\t\t\t\ttemplate.setValues({\n\t\t\t\t\t\t\t\t\t\t\tparams,\n\t\t\t\t\t\t\t\t\t\t\tnumber,\n\t\t\t\t\t\t\t\t\t\t\tmethod\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tconst suggest = webix.$$(this.config.suggest);\n\n\t\t\t\t\t\t\t\t\t\tlet pos;\n\t\t\t\t\t\t\t\t\t\tif(suggest.isVisible()){\n\t\t\t\t\t\t\t\t\t\t\tconst suggestConfig = suggest.config;\n\t\t\t\t\t\t\t\t\t\t\tpos = {\n\t\t\t\t\t\t\t\t\t\t\t\tx: suggestConfig.left,\n\t\t\t\t\t\t\t\t\t\t\t\ty: suggestConfig.top + suggest.$height + 10\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\tpos = getSuggestPos(this);\n\n\t\t\t\t\t\t\t\t\t\tpopup.show(pos);\n\n\t\t\t\t\t\t\t\t\t\tconst activeParam = template.$view.querySelector(\".webix_ssheet_method_param_active\");\n\t\t\t\t\t\t\t\t\t\tif(activeParam){\n\t\t\t\t\t\t\t\t\t\t\tconst scrollTop = activeParam.offsetTop + activeParam.offsetHeight - template.$height;\n\t\t\t\t\t\t\t\t\t\t\ttemplate.scrollTo(0, scrollTop > 0 ? scrollTop : 0);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\tpopup.hide();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tbrackets--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tpopup.hide();\n\t\t});\n\t},\n\thighlight(value){\n\t\tthis.showParamsPopup();\n\t\tlet html = \"\";\n\t\tconst master = this.getTopParentView();\n\t\tconst escapeText = webix.template.escape;\n\n\t\tfor(let area in this._highlightedCells){\n\t\t\tconst cells = this._highlightedCells[area];\n\t\t\tthis.changeCellCss(cells[0], cells[1], cells[2], true);\n\t\t}\n\t\tthis._highlightedCells = {};\n\n\t\t//value can be null\n\t\tif(value && value[0]==\"=\"){\n\t\t\tconst parts = split(value, master, null, this._activeMath);\n\t\t\tconst sheet = master.getActiveSheet();\n\n\t\t\tlet colorIndex = 1;\n\n\t\t\tfor(let i = 0; i < parts.length; i++){\n\t\t\t\tif(i%2 === 0)\n\t\t\t\t\thtml += escapeText(parts[i]);\n\t\t\t\telse{\n\t\t\t\t\tconst crossheet = webix.isArray(parts[i]);\n\t\t\t\t\tconst cellSheet = crossheet ? this.prepareSheet(parts[i][0], parts[i][2]) : \"\";\n\t\t\t\t\tconst activeMath = this._activeMath;\n\n\t\t\t\t\tconst activeSheet = !crossheet && (!activeMath || activeMath == sheet);\n\t\t\t\t\tlet cell = position(crossheet ? parts[i][1] : parts[i]);\n\t\t\t\t\tconst cellText = crossheet ? cellSheet+parts[i][1] : parts[i];\n\n\t\t\t\t\tconst rangeName = crossheet && !getLastCharIndex(parts[i][1]);\n\n\t\t\t\t\tif(rangeName || activeSheet || (crossheet && parts[i][0] == sheet)){\n\t\t\t\t\t\tlet repeatedColor;\n\t\t\t\t\t\t//range\n\t\t\t\t\t\tif((parts[i+1] == \":\" && parts[i+2]) || rangeName){\n\t\t\t\t\t\t\tlet nextCell, nextCellText;\n\n\t\t\t\t\t\t\tif(rangeName){\n\t\t\t\t\t\t\t\tconst cells = parts[i][3].split(\":\");\n\n\t\t\t\t\t\t\t\tcell = position(cells[0]);\n\t\t\t\t\t\t\t\tnextCell = position(cells[1]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tnextCell = position(webix.isArray(parts[i+2]) ? parts[i+2][1] : parts[i+2]);\n\t\t\t\t\t\t\t\tnextCellText = webix.isArray(parts[i+2]) ? cellSheet+parts[i+2][1] : parts[i+2];\n\t\t\t\t\t\t\t\ti+=2;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\trepeatedColor = this.setColor(cell[0], cell[1], nextCell[0], nextCell[1], colorIndex);\n\t\t\t\t\t\t\thtml += `<span class=\"webix_ssheet_highlight_color_${repeatedColor||colorIndex}\">${rangeName ? cellText : cellText+\":\"+nextCellText}</span>`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//OtherSheet!A1:A3 - do not highlight A3\n\t\t\t\t\t\telse if(parts[i-1] && parts[i-1][ parts[i-1].length-1 ] == \":\"){\n\t\t\t\t\t\t\thtml += cellText;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//cell\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\trepeatedColor = this.setColor(cell[0], cell[1], cell[0], cell[1], colorIndex);\n\t\t\t\t\t\t\thtml += `<span class=\"webix_ssheet_highlight_color_${repeatedColor||colorIndex}\">${cellText}</span>`;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst colors = 7;\n\t\t\t\t\t\tif(!repeatedColor)\n\t\t\t\t\t\t\tcolorIndex += colorIndex == colors ? -1*(colors-1) : 1;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\thtml += cellText;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\thtml = escapeText(value);\n\n\t\tmaster.$$(\"cells\").refresh();\n\n\t\tif(document.activeElement == this.getInputNode())\n\t\t\tthis.paintValue();\n\t\treturn html;\n\t},\n\tshowActiveSheet(enter){\n\t\tconst master = this.getTopParentView();\n\t\tconst grid = master._table;\n\n\t\tif(this._activeMath){\n\t\t\tif(this._activeMath != master.getActiveSheet()){\n\t\t\t\tconst cell = this.config.activeCell;\n\n\t\t\t\tthis.define({activeCell:null});\n\n\t\t\t\tmaster.showSheet(this._activeMath);\n\n\t\t\t\twebix.delay(()=>{\n\t\t\t\t\tgrid.select(cell.row + (enter ? 1 : 0), cell.column);\n\t\t\t\t});\n\t\t\t}\n\t\t\tdelete this._activeMath;\n\t\t}\n\t\telse if(enter){\n\t\t\twebix.delay(()=>{\n\t\t\t\tgrid.moveSelection(\"down\");\n\t\t\t});\n\t\t}\n\t},\n\tchangeCellCss(row, col, index, remove){\n\t\tconst css = `webix_ssheet_highlight_background_${index}`;\n\t\tfor (let r = row.start; r <= row.end; r++)\n\t\t\tfor (let c = col.start; c <=  col.end; c++)\n\t\t\t\tthis.getTopParentView().$$(\"cells\")[remove?\"removeCellCss\":\"addCellCss\"](r, c, css, true);\n\t},\n\tendEdit(e){\n\t\tconst code = e.which || e.keyCode;\n\n\t\t//if it is a formula - force user to finish it by click outside or 'enter'\n\t\tif(code == 9){\n\t\t\twebix.html.preventEvent(e);\n\n\t\t\tthis.getInputNode().blur();\n\t\t\tthis.updateCellValue();\n\t\t\tthis.getTopParentView()._table.moveSelection(e.shiftKey ? \"left\" : \"right\");\n\t\t}\n\t},\n\tpaintValue(){\n\t\tconst master = this.getTopParentView();\n\t\tif(!this._activeMath || this._activeMath == master.getActiveSheet()){\n\t\t\tconst cell = this.config.activeCell;\n\t\t\tconst node = master._table.getItemNode(cell);\n\t\t\tif(cell && node) \n\t\t\t\tnode.innerHTML = `<div>${webix.template.escape(this.getValue())}</div>`;\n\t\t}\n\t},\n\tupdateCellValue(cell) {\n\t\tconst newv = this.getValue();\n\t\tconst master = this.getTopParentView();\n\t\tcell = cell || this.config.activeCell;\n\n\t\tif (!cell)\n\t\t\tthis.setValue(\"\");\n\t\telse{\n\t\t\tconst val = master.getCellValue(cell.row, cell.column);\n\n\t\t\tif(newv !== val){\n\t\t\t\tthis.config.value = newv;\n\t\t\t\tmaster.setCellValue(cell.row, cell.column, newv);\n\t\t\t\tmaster.refresh();\n\t\t\t}\n\t\t}\n\n\t\tdelete master.$handleSelection;\n\t},\n\t$setValueHere(value){\n\t\tthis.setValueHere(value);\n\t},\n\tsetValueHere(value) {\n\t\tthis._last_value_set = new Date();\n\n\t\tconst formula = this.getValue();\n\t\tif(formula && formula.charAt(0)===\"=\"){\n\t\t\tconst cursor = this.getInputNode().selectionStart;\n\t\t\tlet str1 = formula.substring(0, cursor);\n\t\t\tconst str2 = formula.substring(cursor);\n\n\t\t\tif(str1[str1.length-1] == \"(\")\n\t\t\t\tstr1 = str1.substring(0, str1.length-1);\n\n\t\t\tstr1 = str1.substring(0, getLastCharIndex(str1, true));\n\n\t\t\tconst range = value.indexOf(\"$range_\") == 0;\n\t\t\tif(range)\n\t\t\t\tvalue = value.substr(7);\n\n\t\t\t//suggest called via up/down key\n\t\t\tstr1 += value + (range || str2[0] == \"(\" ? \"\" : \"(\");\n\n\t\t\tthis.setValue(str1 + str2);\n\t\t\tthis.getInputNode().setSelectionRange(str1.length, str1.length);\n\t\t}\n\t},\n\texpectOperator(ignoreSel){\n\t\tconst text = this.getValue();\n\n\t\tif(text[0] == \"=\"){\n\t\t\tlet cursor = ignoreSel ? text.length : this.getInputNode().selectionStart;\n\t\t\twhile(text[cursor-1] == \" \")\n\t\t\t\tcursor--;\n\t\t\treturn text[cursor-1] && text[cursor-1].match(/[+&\\-/*=(:,]/);\n\t\t}\n\t},\n\tsetRange(range, replace){\n\t\tconst cursor = this.getInputNode().selectionStart;\n\t\tconst formula = this.getValue();\n\n\t\tlet str1, str2;\n\n\t\t//check if range was added by click\n\t\tif(replace)\n\t\t\treplace = this._update_range && cursor == this._update_range.pos + this._update_range.len;\n\n\t\tconst lastPos = replace ? this._update_range.pos : cursor;\n\n\t\tstr1 = formula.substring(0, lastPos) + range;\n\t\tstr2 = formula.substring(cursor);\n\n\t\tthis._update_range = {pos: lastPos, len: range.length};\n\n\t\tthis.setValue(str1 + str2);\n\t},\n\tprepareSheet(sheet, escaped){\n\t\tif(!sheet)\n\t\t\treturn \"\";\n\t\tconst condition = webix.isUndefined(escaped) ? sheet.indexOf(\" \") != -1 : escaped;\n\t\treturn (condition ? `'${sheet}'` : sheet) + \"!\";\n\t},\n\tprepareArea(first, second){\n\t\treturn {\n\t\t\tstart: Math.min(first, second),\n\t\t\tend: Math.max(first, second)\n\t\t};\n\t},\n\tsetColor(row1, col1, row2, col2, color){\n\t\tconst row = this.prepareArea(row1, row2);\n\t\tconst col = this.prepareArea(col1, col2);\n\t\tconst index = [row.start, row.end, col.start, col.end].join(\",\");\n\t\tconst coloredArea = this._highlightedCells[index];\n\n\t\tif(!coloredArea){\n\t\t\tthis._highlightedCells[index] = [row, col, color];\n\t\t\tthis.changeCellCss(row, col, color);\n\t\t}\n\t\telse\n\t\t\treturn coloredArea[2];\n\t},\n\tgetCellValue(row, column){\n\t\tconst master = this.getTopParentView();\n\t\tlet value = master.getCellValue(row, column);\n\t\tif(getType(master, row, column) == \"date\" && value[0] != \"=\"){\n\t\t\tconst format = getDateEditFormat(master, row, column);\n\t\t\tvalue = format(getJsDateFromExcel(value));\n\t\t}\n\t\treturn value;\n\t}\n}, webix.ui.texthighlight);","webix.protoUI({\n\tname: \"ssheet-separator\",\n\tdefaults:{\n\t\tcss: \"webix_ssheet_toolbar_spacer\",\n\t\ttemplate: \" \",\n\t\twidth: 1,\n\t\tborderless: true\n\t}\n},webix.ui.view);","webix.protoUI({\n\tname: \"sheets\",\n\tdefaults:{\n\t\tlayout: \"x\",\n\t\tborderless: true,\n\t\tcss:\"ssheet_list_sheets\",\n\t\tselect: true,\n\t\tdrag: \"order\",\n\t\tdragscroll:\"x\",\n\t\tscroll:false\n\t}\n},webix.EditAbility,webix.ui.list);","// toolbar: toogle button\nwebix.protoUI({\n\t$cssName: \"toggle\",\n\tname:\"ssheet-toggle\",\n\ttoggle:function(){\n\t\tconst old = this.getValue();\n\n\t\tif(!old || old == this.config.offValue)\n\t\t\tthis.config.value = this.config.onValue || true;\n\t\telse\n\t\t\tthis.config.value = this.config.offValue || false;\n\n\t\tconst val = this.getValue();\n\t\tthis.$setValue(val);\n\t\tthis.callEvent(\"onChange\", [val, old, \"user\"]);\n\t},\n\t$setValue:function(value){\n\t\tif(value == this.config.offValue)\n\t\t\tvalue = false;\n\t\telse if(value == this.config.onValue)\n\t\t\tvalue = true;\n\t\twebix.ui.toggle.prototype.$setValue.call(this,value);\n\t},\n\tgetValue:function(){\n\t\tvar config = this.config;\n\t\tvar value = config.value;\n\t\treturn  !value || value==config.offValue?(config.offValue||false):(config.onValue||true);\n\t},\n\tdefaults:{\n\t\ttemplate:function(obj, common){\n\t\t\tvar css = (obj.value === true || obj.value == obj.onValue) ? \" webix_pressed\" : \"\";\n\t\t\tvar inp = common.$renderInput(obj, common);\n\t\t\treturn \"<div class='webix_el_box\"+css+\"' style='width:\"+obj.awidth+\"px; height:\"+obj.aheight+\"px'>\"+inp+\"</div>\";\n\t\t}\n\t}\n}, webix.ui.toggle);\n\n\n// toolbar: silent toggle button\nwebix.protoUI({\n\tname:\"ssheet-toggle-silent\",\n\t$cssName:\"toggle\",\n\t$allowsClear:false,\n\tsetValue:function(){\n\t\tthis.blockEvent();\n\t\twebix.ui.toggle.prototype.setValue.apply(this, arguments);\n\t\tthis.unblockEvent();\n\t}\n}, webix.ui.toggle);","webix.protoUI({\n\tname: \"ssheet-bar-title\",\n\tdefaults:{\n\t\tborderless: true\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_subbar_title\";\n\t}\n},webix.ui.template);","import * as arr from \"../helpers/array\";\n\nwebix.protoUI({\n\tname:\"multicheckbox\",\n\tdefaults:{\n\t\tpadding:0,\n\t\ttype:\"clean\",\n\t\tborderless:true,\n\t\telementsConfig:{\n\t\t\tlabelWidth:0\n\t\t}\n\t},\n\t$init:function(config){\n\t\tconfig.rows = [{height:0.000001}];\n\t\tthis.$ready.push(function(){\n\t\t\tthis._initOnChange();\n\t\t});\n\t},\n\t_initOnChange(){\n\t\tthis.attachEvent(\"onChange\", function(newv){\n\t\t\tconst name = this.$eventSource.config.name;\n\n\t\t\tthis.blockEvent();\n\t\t\tif(name == \"$all\"){\n\t\t\t\tfor(let i in this.elements)\n\t\t\t\t\tthis.elements[i].setValue(newv);\n\t\t\t\tif(!newv)\n\t\t\t\t\tthis._getCheckboxes()[0].setValue(1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tconst value = this.getValue(true);\n\n\t\t\t\tif(webix.isArray(value) && (!value.length || !arr.find(value, config => !config.$hiddenSheet))){\n\t\t\t\t\tconst checkboxes = this._getCheckboxes();\n\t\t\t\t\tarr.find(checkboxes, c => !c.config.$hiddenSheet).setValue(1);\n\t\t\t\t}\n\n\t\t\t\tthis.elements.$all.setValue(this.getValue(true) === true ? 1 : 0);\n\t\t\t}\n\t\t\tthis.unblockEvent();\n\t\t});\n\t},\n\tsetValue:function(value){\n\t\tthis.elements = {};\n\t\tthis._count = value.length;\n\n\t\tif(value.length > 1){\n\t\t\tlet elements = [];\n\t\t\tlet base = [];\n\t\t\tconst maxHeight = 400;\n\n\t\t\tvalue.forEach(sheet => {\n\t\t\t\tconst icon = `<span class=\"webix_icon wxi-eye${sheet.hidden ? \"-slash\" : \"\"}\"></span>`;\n\t\t\t\tbase.push({ view: \"checkbox\", labelRight: icon + sheet.name, name: sheet.name, value: sheet.active, $hiddenSheet: sheet.hidden });\n\t\t\t});\n\n\t\t\tconst baseHeight = base.length * webix.skin.$active.inputHeight;\n\t\t\tconst scroll = baseHeight > maxHeight;\n\n\t\t\telements.push({\n\t\t\t\tview:\"scrollview\", body:{rows:base},\n\t\t\t\tscroll: scroll,\n\t\t\t\theight: scroll ? maxHeight : baseHeight\n\t\t\t});\n\n\t\t\telements.push({ template:\"<div class='ss_sep_line'></div>\", height:10 });\n\t\t\telements.push({ view:\"checkbox\", labelRight:webix.i18n.spreadsheet.labels[\"export-all-sheets\"], name:\"$all\", value:0 });\n\n\t\t\twebix.ui(elements, this);\n\t\t}\n\t\telse if(this.getChildViews().length > 1){\n\t\t\twebix.ui([{height:0.000001}], this);\n\t\t}\n\t},\n\tgetValue:function(config){\n\t\tconst checkboxes = this._getCheckboxes();\n\t\tlet output = [];\n\n\t\t//save order\n\t\tfor(let i = 0; i < checkboxes.length; i++)\n\t\t\tif(checkboxes[i].getValue()){\n\t\t\t\tconst cfg = checkboxes[i].config;\n\t\t\t\toutput.push(config ? cfg : cfg.name);\n\t\t\t}\n\n\t\tif(output.length == this._count)\n\t\t\treturn true;\n\n\t\treturn output;\n\t},\n\t_getCheckboxes(){\n\t\tconst scrollview = this.queryView(\"scrollview\");\n\t\treturn scrollview ? scrollview.getBody().getChildViews() : [];\n\t}\n}, webix.ui.form);","webix.protoUI({\n\tname:\"formlist\",\n\tdefaults:{\n\t\tpaddingY: 5,\n\t\theight: 120,\n\t},\n\t$init:function(config){\n\n\t\tconfig.cols = [\n\t\t\t{\n\t\t\t\tcss:\"webix_inp_label\",\n\t\t\t\ttemplate:config.label,\n\t\t\t\twidth:config.labelWidth,\n\t\t\t\tborderless:true\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"list\",\n\t\t\t\tdata:config.data,\n\t\t\t\tcss:config.css,\n\t\t\t\ttemplate:config.template,\n\t\t\t\tselect: true,\n\t\t\t\tscroll:false,\n\t\t\t\tborderless:true,\n\t\t\t\ton:{\n\t\t\t\t\tonSelectChange:()=>{\n\t\t\t\t\t\tthis.getParentView().callEvent(\"onChange\", []);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t},\n\tsetValue:function(value){this.getChildViews()[1].select(value);},\n\tgetValue:function(){return this.getChildViews()[1].getSelectedId();},\n\trefresh: function(){this.getChildViews()[1].refresh();},\n\tfocus:function(){}\n}, webix.ui.layout);","webix.protoUI({\n\tname: \"ssheet-ui\",\n\tdefaults:{\n\t\tmove:true,\n\t\tcss:\"webix_shadow_none webix_ssheet_ui\",\n\t\thead:false,\n\t\tresize:true,\n\t\ttoFront:true,\n\t\tminWidth:50,\n\t\tminHeight:200,\n\t\tescHide:false,\n\t\tautofit:false\n\t},\n\t$init:function(){\n\t\t// prevent block selection\n\t\tthis.$view.setAttribute(\"webixignore\", \"1\");\n\n\t\tthis.$ready.push(function(){\n\t\t\twebix.UIManager.addHotKey(\"delete\", webix.bind(this._removeView, this));\n\t\t\twebix.UIManager.addHotKey(\"backspace\", webix.bind(this._removeView, this));\n\t\t\tthis.getMenu();\n\t\t});\n\t\tthis.attachEvent(\"onDestruct\", function(){\n\t\t\twebix.eventRemove(this._clickEv);\n\t\t\tthis._menu.destructor();\n\t\t});\n\t},\n\tmove_setter:function(value){\n\t\tif (value){\n\t\t\twebix.DragControl.addDrag(this.$view, this);\n\t\t}\n\t\treturn value;\n\t},\n\t$dragPos:function(pos, e){\n\t\tthis.callEvent(\"onViewMove\", [pos, e]);\n\t\treturn pos;\n\t},\n\t$dragCreate:function(object, e){\n\t\tconst trg = e.target;\n\t\tif (!trg.getAttribute || trg.getAttribute(\"webix_disable_drag\") || trg.getAttribute(\"webixignore\"))\n\t\t\treturn;\n\n\t\tthis.getMenu().hide();\n\t\tconst elOffset = webix.html.offset(object);\n\t\tconst elPos = webix.html.pos(e);\n\t\tconst pOffset = webix.html.offset(object.parentNode);\n\t\tconst state = webix.$$(this.config.master).getScrollState();\n\n\t\twebix.DragControl.top = elOffset.y - elPos.y - pOffset.y;\n\t\twebix.DragControl.left = elOffset.x - elPos.x - pOffset.x + state.x;\n\n\t\treturn webix.toNode(this.$view);\n\t},\n\t$dragDestroy:function(node, drag){\n\t\tconst x = this.config.left = parseInt(drag.style.left,10);\n\t\tconst y = this.config.top = parseInt(drag.style.top,10);\n\n\t\twebix.DragControl.top = webix.DragControl.left = 0;\n\n\t\tthis.callEvent(\"onViewMoveEnd\", [x, y]);\n\t\treturn;\n\t},\n\tgetMenu:function(){\n\t\tconst labels = webix.i18n.spreadsheet.labels;\n\t\tif(!this._menu){\n\t\t\tlet data = [\n\t\t\t\t{ value:labels[\"export-view\"], submenu:[\n\t\t\t\t\t{ id:\"pdf\", value:labels[\"export-view-pdf\"] },\n\t\t\t\t\t{ id:\"png\", value:labels[\"export-view-png\"] },\n\t\t\t\t\t{ id:\"excel\", value:labels[\"export-view-excel\"] }\n\t\t\t\t] }\n\t\t\t];\n\n\t\t\tif(!webix.$$(this.config.master).getTopParentView().config.readonly)\n\t\t\t\tdata = [\n\t\t\t\t\t{ id:\"edit\", value:labels[\"edit-view\"] },\n\t\t\t\t\t...data,\n\t\t\t\t\t{ id:\"del\", value:labels[\"remove-view\"] }\n\t\t\t\t];\n\n\t\t\tthis._menu = webix.ui({\n\t\t\t\tview:\"contextmenu\",\n\t\t\t\tsubmenuConfig:{\n\t\t\t\t\texternalUI: this.config.id\n\t\t\t\t},\n\t\t\t\tdata:data,\n\t\t\t\ton:{\n\t\t\t\t\tonMenuItemClick: id => this._menuActions(id),\n\t\t\t\t\tonBeforeShow: () => this._toggleExcel()\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst dots = webix.html.create(\"span\", {\"class\":\"webix_ssheet_view_menu webix_icon wxi-dots\"});\n\t\t\tthis._clickEv = webix.event(dots, \"click\", ()=> {\n\t\t\t\tif(this._menu.isVisible())\n\t\t\t\t\tthis._menu.hide();\n\t\t\t\telse\n\t\t\t\t\tthis._menu.show(dots);\n\t\t\t});\n\t\t\tthis.$view.firstChild.appendChild(dots);\n\t\t}\n\t\treturn this._menu;\n\t},\n\t_menuActions:function(id){\n\t\tswitch(id){\n\t\t\tcase \"del\":\n\t\t\t\tthis.callEvent(\"onViewRemove\", []);\n\t\t\t\tbreak;\n\t\t\tcase \"edit\":\n\t\t\t\tthis.callEvent(\"onViewEdit\", []);\n\t\t\t\tbreak;\n\t\t\tcase \"pdf\":\n\t\t\t\twebix.toPDF(this.getBody(), {display:\"image\"});\n\t\t\t\tbreak;\n\t\t\tcase \"png\":\n\t\t\t\twebix.toPNG(this.getBody());\n\t\t\t\tbreak;\n\t\t\tcase \"excel\":\n\t\t\t\twebix.toExcel(this.getBody(), {header: false});\n\t\t\t\tbreak;\n\t\t}\n\t},\n\t_toggleExcel:function(){\n\t\tconst view = this.getBody();\n\t\tif(view.data && view.data.pull)\n\t\t\tthis._menu.showMenuItem(\"excel\");\n\t\telse\n\t\t\tthis._menu.hideMenuItem(\"excel\");\n\t},\n\t_removeView:function(view){\n\t\tif(view && view.getTopParentView() == this)\n\t\t\tthis.callEvent(\"onViewRemove\", []);\n\t}\n}, webix.ui.window);","webix.protoUI({\n\tname: \"ssheet-series\",\n\t$init: function(config){\n\t\tthis.hidden = {};\n\t\tconfig.rows = [\n\t\t\t{\n\t\t\t\tview: \"scrollview\",\n\t\t\t\tborderless: true,\n\t\t\t\tbody: {\n\t\t\t\t\tview: \"accordion\",\n\t\t\t\t\tcss: \"webix_ssheet_accordion\",\n\t\t\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\t\t\tmulti: true,\n\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\trows: [\n\t\t\t\t\t\tthis.getSectionConfig()\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonAfterScroll:function(){\n\t\t\t\t\t\t//close possibly open selector popups\n\t\t\t\t\t\twebix.callEvent(\"onClick\", []);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{ view:\"button\", label:webix.i18n.spreadsheet.labels[\"add-line\"], click:()=>{\n\t\t\t\tthis.addSection();\n\t\t\t}}\n\t\t];\n\t},\n\tgetSectionConfig: function(i){\n\t\tconst view = this;\n\t\tconst labels = webix.i18n.spreadsheet.labels;\n\t\tconst trashIcon = \"<span class='webix_icon webix_ssheet_series_icon wxi-trash'></span>\";\n\t\tconst padding = webix.skin.$active.dataPadding-2;\n\n\t\treturn {\n\t\t\tview:\"accordionitem\",\n\t\t\theader:`${labels[\"chart-item\"]} ${i ? i+1 : 1} ${trashIcon}`,\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\tpadding,\n\t\t\t\telementsConfig:{\n\t\t\t\t\tlabelWidth:180\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonChange: () => {\n\t\t\t\t\t\tthis.callEvent(\"onChange\", []);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", label:labels[\"chart-range\"], name:\"range\", range:true, on:{\n\t\t\t\t\t\tonChange: function(val, oldVal) {\n\t\t\t\t\t\t\tconst upper = val.toUpperCase();\n\t\t\t\t\t\t\tif(val != upper){\n\t\t\t\t\t\t\t\tthis.blockEvent();\n\t\t\t\t\t\t\t\tthis.setValue(upper);\n\t\t\t\t\t\t\t\tthis.unblockEvent();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tview.callEvent(\"onRangeChange\", [upper, oldVal]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"chart-series-color\"], name:\"color\", hidden: this.hidden.color},\n\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-tooltip\"], name:\"tooltip\" },\n\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-label\"], name:\"label\", hidden: this.hidden.label },\n\t\t\t\t\t{ view:\"richselect\", label:labels[\"chart-markers\"], value:\"square\", name:\"marker\", hidden: this.hidden.marker,\n\t\t\t\t\t\tsuggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t\t{id:\"square\", value:labels[\"chart-markers-square\"]},\n\t\t\t\t\t\t\t\t{id:\"triangle\", value:labels[\"chart-markers-triangle\"]},\n\t\t\t\t\t\t\t\t{id:\"diamond\", value:labels[\"chart-markers-diamond\"]},\n\t\t\t\t\t\t\t\t{id:\"round\", value:labels[\"chart-markers-round\"]}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\tonClick:{\n\t\t\t\t\"wxi-trash\": function(){\n\t\t\t\t\tconst layout = this.getParentView();\n\t\t\t\t\tlayout.removeView(this);\n\n\t\t\t\t\tconst childs = layout.getChildViews();\n\n\t\t\t\t\tfor (let i = 0; i < childs.length; i++) {\n\t\t\t\t\t\tchilds[i].define({header:`${labels[\"chart-item\"]} ${i+1} ${trashIcon}`});\n\t\t\t\t\t\tchilds[i].refresh();\n\t\t\t\t\t}\n\n\t\t\t\t\tview.callEvent(\"onChange\", []);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n\taddSection: function(){\n\t\tconst layout = this.getLayout();\n\t\tconst lastIndex = layout.getChildViews().length;\n\t\tconst layoutId = layout.addView(this.getSectionConfig(lastIndex));\n\n\t\twebix.$$(layoutId).queryView({name: \"range\"}).focus();\n\t},\n\tsetValue: function(value){\n\t\tvalue = value || [];\n\n\t\tconst layout = this.getLayout();\n\t\tconst childs = layout.getChildViews();\n\t\tconst count = childs.length;\n\n\t\tif(count > value.length)\n\t\t\tfor(let i = count; i > value.length; i--)\n\t\t\t\tthis.getLayout().removeView(childs[i-1]);\n\t\telse if(value.length > count)\n\t\t\tfor(let i = value.length; i > count; i--)\n\t\t\t\tthis.addSection();\n\n\t\tfor(let i = 0; i < childs.length; i++){\n\t\t\tconst form = childs[i].getChildViews()[0];\n\t\t\tconst range = form.queryView({name: \"range\"});\n\n\t\t\t//block range events to ignore onRangeChange\n\t\t\trange.blockEvent();\n\t\t\tform.setValues(value[i]);\n\t\t\trange.unblockEvent();\n\t\t}\n\t},\n\tsetSubValue: function(sub, value){\n\t\tsub.blockEvent();\n\t\tsub.setValue(value);\n\t\tsub.unblockEvent();\n\t},\n\tgetLayout(){\n\t\treturn this.queryView(\"scrollview\").getBody();\n\t},\n\thideSubviews(name, show){\n\t\tthis.hidden[name] = !show;\n\n\t\tthis.queryView({ name }, \"all\").forEach(view => {\n\t\t\tif(show)\n\t\t\t\tview.show();\n\t\t\telse\n\t\t\t\tview.hide();\n\t\t});\n\t},\n\tgetValue: function(){\n\t\tconst value = [];\n\n\t\tconst layout = this.getLayout();\n\t\tlayout.getChildViews().forEach(child => {\n\t\t\tvalue.push(child.getChildViews()[0].getValues());\n\t\t});\n\t\treturn value;\n\t}\n}, webix.ui.layout);","webix.protoUI({\n\tname: \"ssheet-toolbar-scrollview\",\n\t$getSize: function(){\n\t\tconst size = webix.ui.scrollview.prototype.$getSize.apply(this, arguments);\n\t\tconst bodySize = this.getBody().$getSize(0, 0);\n\n\t\tlet scroll = 0;\n\t\tif(this.config.scroll)\n\t\t\tscroll = webix.env.scrollSize;\n\t\telse\n\t\t\tthis.$view.style[\"overflow-x\"] = \"hidden\";\n\n\t\tsize[2] = size[3] = bodySize[2] + scroll;\n\n\t\treturn size;\n\t},\n\t$setSize: function(x,y){\n\t\tconst bodySize = this.getBody().$getSize(0, 0);\n\t\tconst oldScroll = this.config.scroll;\n\t\tconst scroll = x < bodySize[0] ? \"x\" : false;\n\n\t\tif(scroll != oldScroll){\n\t\t\tthis.define({scroll});\n\t\t\treturn webix.delay(()=>{\n\t\t\t\tthis.resize();\n\t\t\t});\n\t\t}\n\n\t\twebix.ui.scrollview.prototype.$setSize.apply(this, [x, y]);\n\t}\n},webix.ui.scrollview);","import * as arr from \"./helpers/array\";\nimport {getSheetData} from \"./operations/data\";\nimport {DataStore} from \"@xbs/muon\";\nimport {loadCell} from \"./operations/types\";\nimport {removeUnusedStyles, styleFromText, styleToText} from \"./operations/styles\";\nimport {getFormatFromData, checkFormat} from \"./operations/formats\";\nimport {updateMaxColumn, encode, escapeSheet} from \"./helpers/column_names\";\n\nconst options = [\n\t\"rename-sheet\",\n\t\"remove-sheet\",\n\t\"copy-sheet\",\n\t\"hide-sheet\"\n];\n\nconst actionMap = {\n\t\"remove-sheet\": view => _remove(view),\n\t\"rename-sheet\": view => edit(view),\n\t\"new-sheet\": view => add(view),\n\t\"copy-sheet\": view => copy(view),\n\t\"hide-sheet\": view => setState(view, view._activeSheet, \"hidden\")\n};\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n}\n\nexport const numbers = [0.5, 0.75, 0.9, 1, 1.1, 1.25, 1.5, 1.75, 2, 3, 4];\n\nexport function defaultBottom(view){\n\tconst locale = webix.i18n.spreadsheet.tooltips;\n\tconst readonly = view.config.readonly;\n\tconst tabWidth = view.config.sheetTabWidth;\n\tconst minTabWidth = tabWidth == \"auto\" ? view.defaults.sheetTabWidth : tabWidth;\n\n\tconst toolbar =  {\n\t\tview: \"toolbar\",\n\t\tid: \"bottom-toolbar\",\n\t\tcss: \"webix_ssheet_bottom_toolbar webix_layout_toolbar\",\n\t\tpaddingY: 0,\n\t\theight: 34,\n\t\telements:[\n\t\t\t{\n\t\t\t\thidden:readonly,\n\t\t\t\tpadding: {\n\t\t\t\t\ttop: 2,\n\t\t\t\t\tbottom: 2,\n\t\t\t\t\tleft: 4\n\t\t\t\t},\n\t\t\t\tcols:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"icon\", icon:\"wxi-plus\", width:30, id: \"add-sheet\", click: ()=> add(view),\n\t\t\t\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[\"add-sheet\"]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"icon\", icon:\"wxi-dots\", width:30, id: \"show-sheet\", popup: getSheetsPopup(view),\n\t\t\t\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[\"show-sheet\"]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid:\"sheets\",\n\t\t\t\tview:\"sheets\",\n\t\t\t\tmaxWidth: 5 * minTabWidth,\n\t\t\t\tminWidth: minTabWidth,\n\t\t\t\teditable:!readonly,\n\t\t\t\teditaction: \"dblclick\",\n\t\t\t\teditor:\"text\",\n\t\t\t\teditValue:\"value\",\n\t\t\t\ttype:{\n\t\t\t\t\twidth: tabWidth,\n\t\t\t\t\theight: 32,\n\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\treturn \"<div style='\"+(readonly ? \"width: 100%;padding-right:9px;\" : \"width:calc(100% - 20px);\")+\"'>\"+obj.value+\"</div>\"+\n\t\t\t\t\t\t\t(!readonly?\"<div class='webix_input_icon wxi-menu-down webix_ssheet_sheet_arrow'></div>\":\"\");\n\t\t\t\t\t},\n\t\t\t\t\t//remove skin selection css on dnd\n\t\t\t\t\tcss:\"ssheet_order_sheets\"\n\t\t\t\t},\n\t\t\t\tonClick:{\n\t\t\t\t\twebix_ssheet_sheet_arrow: function(e, id){\n\t\t\t\t\t\tinitSheetMenu(view, e, id);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonItemClick: function(id){\n\t\t\t\t\t\tif(id != view._activeSheet)\n\t\t\t\t\t\t\tview.showSheet(id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"button\", type:\"htmlbutton\", width: 34, id: \"prev-sheet\", disabled:true, hidden:true,\n\t\t\t\tlabel: \"<span class='webix_icon wxi-menu-left'></span>\", batch:\"pager\",\n\t\t\t\tclick:function(){scrollSheets(view, -1);}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"button\", type:\"htmlbutton\", width: 34, id: \"next-sheet\", hidden:true,\n\t\t\t\tlabel: \"<span class='webix_icon wxi-menu-right'></span>\", batch:\"pager\",\n\t\t\t\tclick:function(){scrollSheets(view, 1);}\n\t\t\t},\n\t\t\t{gravity:0.000001},\n\t\t\t{\n\t\t\t\tview: \"ssheet-zoom\",\n\t\t\t\tnumbers,\n\t\t\t\tvalue: 1,\n\t\t\t\twidth: 108,\n\t\t\t\ttooltip: locale[\"scale\"],\n\t\t\t\tid: \"zoom\",\n\t\t\t\ton: {\n\t\t\t\t\tonChange: (v, oldV, config) => {\n\t\t\t\t\t\tif (config == \"user\") view.zoom(v);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}\n\t\t]\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"bottom-toolbar\", toolbar]);\n\n\treturn toolbar;\n}\n\nfunction scrollSheets(view, direction){\n\tconst sheets = view.$$(\"sheets\");\n\tlet step = view.config.sheetTabWidth;\n\tif(step == \"auto\")\n\t\tstep = view.defaults.sheetTabWidth;\n\tsheets.scrollTo(sheets.getScrollState().x+(direction*step), 0);\n}\n\nfunction menuInit(view){\n\tvar data = [];\n\tfor(var i=0; i < options.length;i++)\n\t\tdata.push({id: options[i], value:webix.i18n.spreadsheet.menus[options[i]]||options[i]});\n\n\tvar menu =  {\n\t\tview: \"ssheet-suggest\",\n\t\tdata: data\n\t};\n\tview.callEvent(\"onViewInit\", [\"sheet-menu\", menu]);\n\treturn menu;\n}\n\nexport function reset(view, obj){\n\tconst tabs = view.$$(\"sheets\");\n\tif (tabs){\n\t\ttabs.clearAll();\n\t\tconst set = [];\n\t\tobj.sheets.forEach(function(sheet){\n\t\t\tset.push({id:sheet.name, value: sheet.name});\n\t\t});\n\t\ttabs.parse(set);\n\t\t_filterTabs(view);\n\t}\n}\n\nfunction ready(view){\n\tprepare(view);\n\n\tview.attachEvent(\"onAfterSheetShow\", (name) => selectSheet(view,name));\n\n\tview.attachEvent(\"onCommand\", function(command){\n\t\tif(actionMap[command.id])\n\t\t\tactionMap[command.id](this);\n\t});\n\n\tif(view.$$(\"sheets\")){\n\t\tview.$$(\"sheets\").data.attachEvent(\"onStoreUpdated\", () => {\n\t\t\tchangePagerVisability(view);\n\t\t\tchangePagerStatus(view);\n\t\t});\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterRender\", webix.once(() => {\n\t\t\twebix.delay(()=> changePagerVisability(view));\n\t\t}));\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterScroll\", () => changePagerStatus(view));\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterDrop\", (context) => dataOrder(view,context.start,context.index));\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterEditStop\", (state) => rename(view,state.old,state.value));\n\t}\n}\n\nfunction getSheetsPopup(view){\n\treturn {\n\t\tview: \"popup\",\n\t\tcss: \"webix_ssheet_suggest\",\n\t\twidth: 125,\n\t\tbody:{\n\t\t\tview: \"list\",\n\t\t\tselect: true,\n\t\t\tcss: \"webix_ssheet_show_list\",\n\t\t\ttemplate: \"<span class='webix_icon wxi-#icon#'></span>#id#\",\n\t\t\ton:{\n\t\t\t\tonAfterSelect: function(id) {\n\t\t\t\t\tsetState(view, id, \"visible\");\n\t\t\t\t\tview.showSheet(id);\n\t\t\t\t\tthis.getParentView().hide();\n\t\t\t\t}\n\t\t\t},\n\t\t\tmaxHeight: 200,\n\t\t\tautoheight: true\n\t\t},\n\t\ton:{\n\t\t\tonShow: function(){\n\t\t\t\tthis.getBody().showItem(view.getActiveSheet());\n\t\t\t},\n\t\t\tonBeforeShow: function(){\n\t\t\t\tconst data = view._sheets\n\t\t\t\t\t.filter(sheet => sheet.state != \"veryHidden\")\n\t\t\t\t\t.map(sheet => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: sheet.name,\n\t\t\t\t\t\t\ticon: sheet.state == \"hidden\" ? \"eye-slash\" : \"eye\"\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\n\t\t\t\tconst list = this.getBody();\n\t\t\t\tlist.clearAll();\n\t\t\t\tlist.parse(data);\n\t\t\t\tlist.select(view.getActiveSheet());\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction initSheetMenu(view, e, id){\n\tif(!view.$sheetMenu){\n\t\tview.$sheetMenu = webix.ui(menuInit(view));\n\t\tview._destroy_with_me.push(view.$sheetMenu);\n\t\tview.$sheetMenu.attachEvent(\"onItemClick\", id => callAction(view,id));\n\t}\n\n\tconst oneSheet = view.$$(\"sheets\").count() == 1;\n\n\tif(view.$sheetMenu.getItem(\"remove-sheet\"))\n\t\tview.$sheetMenu[oneSheet ? \"disableItem\" : \"enableItem\"](\"remove-sheet\");\n\n\tif(view.$sheetMenu.getItem(\"hide-sheet\"))\n\t\tview.$sheetMenu[oneSheet ? \"disableItem\" : \"enableItem\"](\"hide-sheet\");\n\n\tif(view.callEvent(\"onBeforeSheetMenu\", [id]))\n\t\tview.$sheetMenu.show(e);\n}\n\nfunction changePagerStatus(view){\n\tconst sheets = view.$$(\"sheets\");\n\tconst scrollPos = sheets.getScrollState().x;\n\tif(scrollPos == 0)\n\t\tview.$$(\"prev-sheet\").disable();\n\telse{\n\t\tview.$$(\"prev-sheet\").enable();\n\t\tif(sheets.$view.scrollWidth - scrollPos == sheets.$width)\n\t\t\treturn view.$$(\"next-sheet\").disable();\n\t}\n\tview.$$(\"next-sheet\").enable();\n}\n\nfunction changePagerVisability(view){\n\tconst sheets = view.$$(\"sheets\");\n\tview.$$(\"bottom-toolbar\").showBatch(\"pager\", sheets.$width != sheets.$view.scrollWidth);\n}\n\nfunction dataOrder(view, name, num){\n\tfor (let id in view._sheets) {\n\t\tif (view._sheets[id].name == name) {\n\t\t\tconst item = view._sheets.splice(id, 1);\n\t\t\tview._sheets.splice(num, 0, item[0]);\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nexport function setState(view, sheet, state){\n\tconst tab = getSheet(view, sheet);\n\n\tif(state == tab.state || (state == \"visible\" && !tab.state))\n\t\treturn;\n\n\tif(state != \"visible\"){\n\t\tconst visibleSheets = getVisible(view);\n\n\t\t//don't hide last visible tab\n\t\tif(visibleSheets.length == 1 && visibleSheets[0] === tab)\n\t\t\treturn;\n\n\t\t//select the previous sheet in case we hide the selected sheet\n\t\tif(sheet == view._activeSheet)\n\t\t\tshowPrevious(view, sheet);\n\t}\n\n\ttab.state = state;\n\t_filterTabs(view);\n\n\tview.callEvent(\"onSheetStateChange\", [sheet, state]);\n}\n\nfunction _filterTabs(view){\n\tconst tabs = view.$$(\"sheets\");\n\tif(tabs)\n\t\ttabs.filter(obj => {\n\t\t\tconst state = getSheet(view, obj.id).state;\n\t\t\treturn state != \"hidden\" && state != \"veryHidden\";\n\t\t});\n}\n\nexport function add(view, content, name, show){\n\tvar index, newIndex;\n\n\tindex = arr.findIndex(view._sheets, x => x.name == view._activeSheet);\n\tnewIndex = index>-1?index+1:view._sheets.length;\n\n\tif(!name || arr.find(view._sheets, sheet => sheet.name == name))\n\t\tname = getNewTitle(view);\n\n\tcontent = content || {data:[]};\n\tview._sheets.splice(newIndex, 0, {\n\t\tname,\n\t\tcontent\n\t});\n\n\tif(view.$$(\"sheets\"))\n\t\tview.$$(\"sheets\").add({id: name, value: name},newIndex);\n\n\tview._mData.addPage(name);\n\n\tparseToStore(view, name, content, view.config.prepareData);\n\n\tif(show !== false)\n\t\tview.showSheet(name);\n\tview.callEvent(\"onSheetAdd\", [name]);\n\n\treturn name;\n}\n\nfunction getNewTitle(view){\n\tvar index = view._sheets.length+1;\n\twhile(getSheet(view, (webix.i18n.spreadsheet.labels.sheet+index)))\n\t\tindex++;\n\tvar name = webix.i18n.spreadsheet.labels.sheet+index;\n\treturn name;\n}\n\nfunction selectSheet(view,name){\n\tif(view.$$(\"sheets\")){\n\t\tview.$$(\"sheets\").select(name);\n\t\tview.$$(\"sheets\").showItem(name);\n\t}\n}\n\nexport function edit(view,name){\n\tif(!name)\n\t\tname = view._activeSheet;\n\tview.$$(\"sheets\").edit(name);\n}\n\nfunction _remove(view){\n\tview.confirm({\n\t\ttext: webix.i18n.spreadsheet.labels[\"sheet-remove-confirm\"]\n\t}).then(()=>{\n\t\tremove(view, view._activeSheet);\n\t});\n}\n\nfunction getVisible(view){\n\treturn view._sheets.filter(s => s.state != \"hidden\" && s.state != \"veryHidden\");\n}\n\nfunction showPrevious(view, name){\n\tconst visibleSheets = getVisible(view);\n\n\tlet index = arr.findIndex(visibleSheets, x => x.name == name);\n\t\t\t\n\tlet prevIndex = index - 1;\n\tif(!visibleSheets[prevIndex])\n\t\tprevIndex = 0;\n\tvisibleSheets.splice(index, 1);\n\n\tview.showSheet(visibleSheets[prevIndex].name);\n}\n\nexport function remove(view, name){\n\tif(view._sheets.length > 1){\n\t\tconst visibleSheets = getVisible(view);\n\n\t\t//don't remove last visible tab\n\t\tif(visibleSheets.length == 1 && visibleSheets[0] === getSheet(view, name))\n\t\t\treturn;\n\n\t\t//select the previous sheet in case we remove the selected sheet\n\t\tif(view._activeSheet == name)\n\t\t\tshowPrevious(view, name);\n\n\t\tconst index = arr.findIndex(view._sheets, x => x.name == name);\n\t\tview._sheets.splice(index, 1);\n\t\tview._mData.removePage(name);\n\n\t\tif(view.$$(\"sheets\")){\n\t\t\tview.$$(\"sheets\").remove(name);\n\t\t\tview.$$(\"sheets\").refresh();\n\t\t}\n\n\t\tview.callEvent(\"onSheetRemove\", [name]);\n\t}\n}\n\nexport function rename(view,name,newName){\n\tif (name == newName) return;\n\n\t//correct sheet name\n\tvar i = 1;\n\twhile (!newName || getSheet(view, newName)){\n\t\tnewName = webix.i18n.spreadsheet.labels.sheet + i;\n\t\ti++;\n\t}\n\tnewName = newName.replace(/[*?:[\\]\\\\/]/g,\"\").substring(0, 31);\n\n\tvar sheet = getSheet(view, name);\n\tvar sheets = view.$$(\"sheets\");\n\n\tsheet.name = newName;\n\tif(view._activeSheet == name)\n\t\tview._activeSheet = newName;\n\n\tif(sheets){\n\t\tlet item = sheets.getItem(name);\n\t\titem.value = newName;\n\t\tsheets.data.changeId(name,newName);\n\t\tsheets.refresh(newName);\n\t}\n\n\tview._mData.renamePage(name, newName);\n\tview.callEvent(\"onSheetRename\", [name, newName]);\n}\n\nexport function serialize(view, obj, config){\n\tconst active = getSheet(view, view._activeSheet);\n\tactive.content = obj;\n\tactive.state = active.state || \"visible\";\n\n\tconst sheets = webix.copy(view._sheets);\n\n\tconst math = !config || config.math!==false;\n\tconst compactStyles = config && config.compactStyles;\n\n\tsheets.forEach(sheet => {\n\t\tif(sheet.name != view._activeSheet){\n\t\t\tsheet.content.data = getSheetData(view, math, sheet.name);\n\t\t\tsheet.state = sheet.state || \"visible\";\n\t\t\tif(compactStyles)\n\t\t\t\tsheet.content.styles = removeUnusedStyles(sheet.content);\n\t\t\tsheet.content.ranges = view.ranges.serialize(sheet.name);\n\t\t}\n\t});\n\n\treturn sheets;\n}\n\nfunction parseToStore(view, name, obj, prepareData){\n\tview.ranges.parse(obj.ranges, name);\n\n\twebix.extend(obj, {\n\t\tstyles: [],\n\t\tformats: [],\n\t\teditors: []\n\t});\n\n\tconst page = view._mData.getPage(name);\n\tconst data = obj.data.map(arr => {\n\t\tconst invalidValue = webix.isUndefined(arr[2]) || arr[2] === null;\n\n\t\tif(prepareData){\n\t\t\tif(invalidValue)\n\t\t\t\tarr[2] = \"\";\n\t\t\telse {\n\t\t\t\tconst linkRegex = /^=link\\(/i;\n\t\t\t\tif(typeof arr[2] == \"string\" && linkRegex.test(arr[2])){\n\t\t\t\t\t// LINK is deprecated\n\t\t\t\t\tarr[2] = arr[2].replace(linkRegex, \"=HYPERLINK(\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst cell = loadCell(view, obj, arr);\n\t\t\t//cell value and type can be changed via types module\n\t\t\tarr[2] = cell.value;\n\t\t\tarr[3] = arr[3] || \"\";\n\t\t\tarr[4] = cell.type;\n\n\t\t\tprepareCell(arr, obj);\n\t\t}\n\t\telse if(invalidValue)\n\t\t\tthrow `unsupported value in ${escapeSheet(name)}!${encode[arr[0]]}${arr[1]}`;\n\n\t\treturn [ arr[0]-1, arr[1]-1, {\n\t\t\tvalue: arr[2],\n\t\t\ttype: arr[4],\n\t\t\tstyle: arr[3],\n\t\t\t$format: checkFormat({ fmt: getFormatFromData(obj, arr) }, \"string\") ? 1 : 0\n\t\t}];\n\t});\n\n\tpage.parse(data, true);\n}\n\nexport function prepareCell(cell, data, update){\n\tconst isDate = cell[4] == \"date\";\n\tif(isDate || update){\n\t\tconst isString = typeof cell[2] == \"string\";\n\n\t\tconst link = update && isString && /^=hyperlink\\(/i.test(cell[2]);\n\n\t\tconst styleProperties = cell[3] ? arr.find(data.styles, style => style[0] == cell[3]) : null;\n\t\tconst styleObj = styleProperties ? styleFromText(styleProperties[1]) : {};\n\n\t\tconst editor = isDate && data.editors ? arr.find(data.editors, editor => editor[0] == cell[0] && editor[1] == cell[1]) : null;\n\n\t\tif((isDate && (!styleProperties || !styleObj.format)) || link){\n\t\t\tlet props = {};\n\n\t\t\tif(link){\n\t\t\t\tcell[3] = \"wss_link\" + (styleProperties ? \"_\"+cell[3] : \"\");\n\t\t\t\tprops = { color: \"#0000ff\", underline: \"underline\" };\n\t\t\t}\n\t\t\telse if(isString && /^=time\\(/i.test(cell[2])){\n\t\t\t\tcell[3] = \"wss_load_time\" + (styleProperties ? \"_\"+cell[3] : \"\");\n\t\t\t\tprops.format = cell[3]+\"_fmt\";\n\t\t\t\tdata.formats.push([props.format, webix.i18n.spreadsheet.formats.timeFormat]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tcell[3] = \"wss_load_date\" + (styleProperties ? \"_\"+cell[3] : \"\");\n\t\t\t\tprops.format = \"date\";\n\t\t\t}\n\n\t\t\tif(isDate && !editor){\n\t\t\t\tif(!data.editors)\n\t\t\t\t\tdata.editors = [];\n\t\t\t\tdata.editors.push([cell[0], cell[1], {editor: \"excel_date\"}]);\n\t\t\t}\n\n\t\t\tif(!arr.find(data.styles, style => style[0] == cell[3]))\n\t\t\t\tdata.styles.push([\n\t\t\t\t\tcell[3],\n\t\t\t\t\tstyleToText({props: webix.extend(styleObj, props, true)})\n\t\t\t\t]);\n\t\t}\n\t}\n}\n\nexport function load(view, obj, excel){\n\tview._loading_data = true;\n\tobj = webix.isArray(obj)?{sheets:obj}:obj;\n\tconst prepareData = view.config.prepareData || excel;\n\n\tif(!obj.sheets && view._activeSheet){\n\t\t//loading into active sheet\n\t\tconst name = view._activeSheet;\n\t\tgetSheet(view, name).content = obj;\n\t\tparseToStore(view, name, obj, prepareData);\n\t\trefresh(view, obj);\n\t} else {\n\t\t//creating new set of sheets\n\t\tprepare(view, obj, prepareData);\n\t}\n\tview._loading_data = false;\n}\n\nexport function prepare(view, obj, prepareData){\n\tif(!obj) obj = {data:[]}; \n\tif(!obj.sheets){\n\t\tobj = newSheet(obj);\n\t}\n\n\tview._activeSheet = \"\";\n\tview._sheets = obj.sheets;\n\tview._mData = new DataStore({strict: view.config.strict});\n\n\t// first add all pages then parse data in them\n\tobj.sheets.forEach(sheet => {\n\t\tview._mData.addPage(sheet.name);\n\t});\n\n\tobj.sheets.forEach(sheet => {\n\t\tconst content = sheet.content;\n\t\tconst sheetName = sheet.name;\n\n\t\tparseToStore(view, sheetName, content, prepareData);\n\t});\n\n\treset(view, obj);\n\tshow(view, getVisible(view)[0].name);\n}\n\nexport function newSheet(obj){\n\treturn {\n\t\tsheets:[{\n\t\t\tname: webix.i18n.spreadsheet.labels.sheet + 1,\n\t\t\tcontent: obj\n\t\t}]\n\t};\n}\n\nexport function show(view, name){\n\tif (name == view._activeSheet) return;\n\n\tif(view.callEvent(\"onBeforeSheetShow\", [name])){\n\t\tif (view._activeSheet)\n\t\t\tgetSheet(view, view._activeSheet).content = view.serialize();\n\n\t\tview._activeSheet = name;\n\t\tconst obj = getSheet(view, name).content;\n\n\t\tview._mPage = view._mData.getPage(name);\n\n\t\trefresh(view, obj);\n\n\t\tview.callEvent(\"onAfterSheetShow\", [name]);\n\t}\n}\n\nexport function getSheet(view, name){\n\treturn arr.find(view._sheets, x => x.name == name);\n}\n\nexport function isVisible(view, sheet){\n\tsheet = getSheet(view, sheet);\n\treturn sheet.state != \"hidden\" && sheet.state != \"veryHidden\";\n}\n\nexport function eachSheet(view, callback){\n\tfor (var i=0; i<view._sheets.length; i++)\n\t\tcallback(view._sheets[i].name);\n}\n\nexport function getActive(view){\n\treturn view._activeSheet;\n}\n\nfunction refresh(view, obj){\n\tconst data = getSheetData(view);\n\n\tlet [rows, cols] = arr.getDimension(data, obj.spans, view.config.rowCount, view.config.columnCount);\n\n\tif (rows != view.config.rowCount || cols != view.config.columnCount){\n\t\tview.config.rowCount = rows;\n\t\tview.config.columnCount = cols;\n\t\tview._resetTable();\n\t}\n\n\tupdateMaxColumn(cols);\n\n\tview.callEvent(\"onReset\", []);\n\n\tview._loading_data = true;\n\tview.callEvent(\"onDataParse\", [obj]);\n\tview._loading_data = false;\n\n\tview._table.refresh();\n\tif(view.config.bottombar)\n\t\tview.$$(\"sheets\").refresh();\n}\n\nfunction copy(view){\n\tadd(view, view.serialize());\n}\n\nfunction callAction(view, id){\n\tif(!view.$sheetMenu.data.getMark(id, \"webix_disabled\")){\n\t\tif(actionMap[id])\n\t\t\tactionMap[id](view);\n\t\telse\n\t\t\tview.callEvent(\"onCommand\", [{id}]);\n\t}\n}\n\n","import {getStyle, getTextSize} from \"./styles\";\nimport {save} from \"./save\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\n\tif (view.config.resizeCell){\n\t\tvar grid = view.$$(\"cells\");\n\t\tgrid.define(\"resizeRow\", { headerOnly: true, size: 10 });\n\t\tgrid.define(\"resizeColumn\", { headerOnly: true, size: 10 });\n\t\tgrid.define(\"fixedRowHeight\", false);\n\n\t\tgrid.attachEvent(\"onRowResize\", (id) => {\n\t\t\tview.$$(\"cells\").refreshSelectArea();\n\t\t\tsave(view, \"sizes\", { row: id, column: 0, size: view.$$(\"cells\").getItem(id).$height, page: view.getActiveSheet() });\n\t\t});\n\t\tgrid.attachEvent(\"onColumnResize\", (id) => {\n\t\t\tview.$$(\"cells\").refreshSelectArea();\n\t\t\tsave(view, \"sizes\", { row: 0, column: id, size: view.getColumn(id).width, page: view.getActiveSheet() });\n\t\t});\n\n\t\t// undo\n\t\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\t\tif(type == \"c-resize\" || type == \"r-resize\")\n\t\t\t\t_undoResize(view, row, column, value);\n\t\t});\n\t}\n\n\tview.attachEvent(\"onDataParse\", (data) => {\n\t\tload(view,data);\n\t});\n\n\t\n\tview.attachEvent(\"onDataSerialize\", (data) => {\n\t\tserialize(view,data);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n\n\tview.attachEvent(\"onBeforeStyleChange\", function(row, column, n, o){\n\t\tif (o && o.props.wrap === \"wrap\" && (!n || n.props.wrap != o.props.wrap)){\n\t\t\tdelete view._table.getItem(row).$height;\n\t\t}\n\t});\n\tview.attachEvent(\"onStyleChange\", (r,c) => _adjustRowHeight(view,r,c));\n\tview.attachEvent(\"onCellChange\", (r,c,v,p)=> {\n\t\tif(p == view.getActiveSheet())\n\t\t\t_adjustRowHeight(view,r,c);\n\t});\n}\n\nfunction serialize(view, data, oldZoom){\n\tconst sizes = [];\n\tconst grid = view.$$(\"cells\");\n\tconst columns = grid.getState().order;\n\tconst order = grid.data.order;\n\n\tconst zoom = oldZoom || view._zoom;\n\n\tconst defWidth = grid.config.columnWidth;\n\tconst defHeight = grid.config.rowHeight;\n\n\tfor (let i = 1; i < columns.length; i++){\n\t\tconst width = Math.ceil(grid.getColumnConfig(columns[i]).width / zoom);\n\t\tif (width && width != defWidth)\n\t\t\tsizes.push([0, i, width]);\n\t}\n\n\tfor (let i = 0; i < order.length; i++){\n\t\tconst height = Math.ceil(grid.getItem(order[i]).$height / zoom);\n\t\tif (height && height != defHeight)\n\t\t\tsizes.push([order[i]*1, 0, height]);\n\t}\n\t\n\tdata.sizes = sizes;\n}\n\nexport function load(view, data){\n\tlet zoom = 1;\n\tif(data.table && data.table.zoom)\n\t\tzoom = data.table.zoom;\n\n\tconst grid = view.$$(\"cells\");\n\tconst defWidth = grid.config.columnWidth;\n\tconst defHeight = grid.config.rowHeight;\n\n\tfor(let i = 1; i <= view.config.rowCount; i++){\n\t\tconst row = view.$$(\"cells\").getItem(i);\n\t\trow.$height = defHeight*zoom;\n\t}\n\n\tconst rowHeight = (webix.skin.$name == \"contrast\" || webix.skin.$name == \"flat\" ? 24 : 20) * zoom;\n\tconst rowId = view.getColumn(\"rowId\");\n\trowId.width = 40 * zoom;\n\trowId.header[0].height = rowHeight;\n\n\tfor(let i = 1; i <= view.config.columnCount; i++){\n\t\tconst col = view.getColumn(i);\n\t\tcol.header[0].height = rowHeight;\n\t\tcol.width = defWidth*zoom;\n\t}\n\n\tif (data.sizes){\n\t\tfor (let i=0; i<data.sizes.length; i++){\n\t\t\tconst size = data.sizes[i];\n\t\t\tif (size[0]*1 !== 0){\n\t\t\t\tconst row = view.$$(\"cells\").getItem(size[0]);\n\t\t\t\tif(row) row.$height = size[2]*zoom;\n\t\t\t} else {\n\t\t\t\tconst col = view.getColumn(size[1]);\n\t\t\t\tif(col) col.width = size[2]*zoom;\n\t\t\t}\n\t\t}\n\t}\n\n\tview.refresh(true);\n}\n\nexport function zoomSizes(view, oldZoom){\n\tconst data = {table:{zoom:view._zoom}};\n\tserialize(view, data, oldZoom);\n\tload(view, data);\n}\n\nfunction _undoResize(view, row, column, value){\n\tconst table = view.$$(\"cells\");\n\tif(row){\n\t\ttable.getItem(row).$height = value;\n\t\tsave(view, \"sizes\", { row:row, column: 0, size: value, page: view.getActiveSheet() });\n\t}\n\telse{\n\t\ttable.setColumnWidth(column, value);\n\t}\n\t// update area selection\n\ttable.refreshSelectArea();\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet i,\n\t\tsizes = data.sizes,\n\t\tnsizes = [];\n\n\tif(inc){\n\t\tfor(i = sizes.length - 1; i >= 0; i--){\n\t\t\tlet [row, column, size] = sizes[i];\n\n\t\t\tif(row && name == \"row\" && row >= start.row){\n\t\t\t\tif(inc < 0 && row < start.row - inc)\n\t\t\t\t\tcontinue;\n\t\t\t\tnsizes.push([row*1 + inc, column, size]);\n\t\t\t}\n\t\t\telse if(column && name == \"column\" && column >= start.column){\n\t\t\t\tif(inc < 0 && column < start.column - inc)\n\t\t\t\t\tcontinue;\n\t\t\t\tnsizes.push([row, column*1 + inc, size]);\n\t\t\t}\n\t\t\telse\n\t\t\t\tnsizes.push(sizes[i]);\n\t\t}\n\n\t\tif(inc > 0){\n\t\t\t//col/row add: set sizes according to the selected area\n\t\t\tif(name == \"column\"){\n\t\t\t\tfor(let i = 0; i < inc; i++){\n\t\t\t\t\tconst size = arr.find(sizes, arr => arr[1] == start.column + i);\n\t\t\t\t\tif(size)\n\t\t\t\t\t\tnsizes.push([0, start.column + i, size[2]]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tfor(let i = 0; i < inc; i++){\n\t\t\t\t\tconst size = arr.find(sizes, arr => arr[0] == start.row + i);\n\t\t\t\t\tif(size)\n\t\t\t\t\t\tnsizes.push([start.row + i, 0, size[2]]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdata.sizes = nsizes;\n\t}\n}\n\nfunction _adjustRowHeight(view, row, column){\n\tif(view._loading_data)\n\t\treturn;\n\n\tconst style = getStyle(view, {row:row, column:column});\n\n\t//changing styles or content of wrapped cell -> resize the related row\n\tif (style && style.props.wrap){\n\t\tconst grid = view._table;\n\t\tconst item = grid.getItem(row);\n\t\tlet height = item.$height || grid.config.rowHeight;\n\n\t\tgrid.eachColumn(function(col, config){\n\t\t\tconst style = getStyle(view, {row:row, column:col});\n\t\t\t//include only cells with active wrap into calculation \n\t\t\tif(style && style.props && style.props.wrap === \"wrap\"){\n\t\t\t\tlet text = this.getText(row, col);\n\t\t\t\tlet baseWidth = config.width;\n\n\t\t\t\tconst span = grid.getSpan(row, col);\n\t\t\t\tlet spanHeight;\n\n\t\t\t\tif(span){\n\t\t\t\t\tconst node = grid.getSpanNode({row:span[0], column:span[1]});\n\t\t\t\t\tbaseWidth = node.offsetWidth;\n\t\t\t\t\tspanHeight = node.offsetHeight;\n\t\t\t\t}\n\n\t\t\t\tif(view.getCellEditor(row, col) || view.getCellFilter(row, col))\n\t\t\t\t\tbaseWidth += 20;\n\n\t\t\t\tlet textHeight = getTextSize(view, text, style.id, baseWidth).height;\n\n\t\t\t\tif(spanHeight)\n\t\t\t\t\ttextHeight = spanHeight >= textHeight ? 0 : textHeight - spanHeight + height;\n\n\t\t\t\theight = Math.max(height, textHeight);\n\t\t\t}\n\t\t});\n\n\t\titem.$height  = height;\n\t}\n}\n","import group from \"./undo_group\";\nimport {find, findIndex} from \"../helpers/array\";\n\nexport const lockCss = \"webix_lock\";\n\nexport function init(view){\n\tview._locks = {};\n\tview.attachEvent(\"onReset\", () => reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, mode) => {\n\t\tif (type === \"lock\") lockCell(view, row, column, !!mode, true);\n\t});\n\tview.attachEvent(\"onCommand\", (cm) => {\n\t\tif (cm.id === \"lock-cell\")\n\t\t\tlock(view);\n\t});\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nfunction reset(view){\n\tview._locks = {};\n}\n\nexport function lockCell(view, row, column, mode, silent, pageName, innerCall){\n\tconst activeSheet = view.getActiveSheet();\n\tif(!pageName)\n\t\tpageName = activeSheet;\n\n\tconst table = view.$$(\"cells\");\n\tif (typeof row === \"object\" && typeof column === \"object\"){\n\t\tgroup.set(function() {\n\t\t\t_mapCellsCalls(row, column, function(row, column){\n\t\t\t\tlockCell(view, row, column, mode, true, pageName, true);\n\t\t\t});\n\t\t});\n\t} else {\n\t\tmode = ((mode === false) ? false : true);\n\t\tif(pageName == activeSheet){\n\t\t\tconst objrow = view._locks[row] = view._locks[row] || {};\n\t\t\tobjrow[column] = mode;\n\t\t\tif (mode)\n\t\t\t\ttable.addCellCss(row, column, lockCss, true);\n\t\t\telse\n\t\t\t\ttable.removeCellCss(row, column, lockCss, true);\n\t\t}\n\t\telse{\n\t\t\tconst page = find(view._sheets, sheet => sheet.name == pageName);\n\t\t\tif(page){\n\t\t\t\tconst locked = page.content.locked; \n\t\t\t\tif(locked){\n\t\t\t\t\tconst locked = page.content.locked;\n\t\t\t\t\tconst index = findIndex(locked, cell => cell[0] == row && cell[1] == column);\n\t\t\t\t\tif(mode){\n\t\t\t\t\t\tif(index == -1)\n\t\t\t\t\t\t\tlocked.push([row, column]);\n\t\t\t\t\t}\n\t\t\t\t\telse if(index != -1)\n\t\t\t\t\t\tlocked.splice(index, 1);\n\t\t\t\t}\n\t\t\t\telse if(!locked && mode)\n\t\t\t\t\tpage.content.locked = [[row, column]];\n\t\t\t}\n\t\t}\n\t}\n\n\tif(!innerCall)\n\t\tview.callEvent(\"onAction\", [\"lock\", { row, column, value: !mode, newValue: mode }]);\n\n\tif (!silent)\n\t\ttable.refresh();\n}\n\nfunction _mapCellsCalls(start, end, handler, master){\n\tfor (let x = start.row; x <= end.row; x++)\n\t\tfor (let y = start.column; y <= end.column; y++)\n\t\t\thandler.call(master||this, x, y);\n}\n\nexport function isCellLocked(view, row, column, page){\n\tif(!page || page == view.getActiveSheet())\n\t\treturn view._locks[row]?(view._locks[row][column]||false):false;\n\telse{\n\t\tpage = find(view._sheets, sheet => sheet.name == page);\n\t\tif(page && page.content.locked)\n\t\t\treturn !!find(page.content.locked, cell => cell[0] == row && cell[1] == column);\n\t\treturn false;\n\t}\n}\n\nexport function serialize(view,data){\n\tconst locked = [];\n\tfor(let row in view._locks){\n\t\tfor(let column in view._locks[row])\n\t\t\tif(view._locks[row][column])\n\t\t\t\tlocked.push([row,column]);\n\t}\n\tdata.locked = locked;\n}\n\nexport function load(view,data){\n\tconst locked = data.locked;\n\tif(locked)\n\t\tfor(let i = 0; i < locked.length; i++)\n\t\t\tlockCell(view, locked[i][0],locked[i][1], true, true);\n}\n\nfunction lock(view){\n\tconst block = view.$$(\"cells\").getSelectArea();\n\tif (block){\n\t\tconst mode = view.isCellLocked(block.start.row, block.start.column);\n\t\tview.lockCell(block.start, block.end, !mode);\n\t}\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet locked = data.locked,\n\t\ti = locked.length;\n\n\tif(inc){\n\t\twhile(i--){\n\t\t\tlet [row,column] = locked[i];\n\t\t\tif(row && name == \"row\" && row >= start.row || column && name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc)\t//delete lock mark if row was deleted\n\t\t\t\t\t\tlocked.splice(i,1);\n\t\t\t\t\telse\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tlocked[i][0] = row*1 + inc;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tlocked.splice(i, 1);\n\t\t\t\t\t} else \n\t\t\t\t\t\tlocked[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}","import {lockCss} from \"./lock_cell\";\nimport {save} from \"./save\";\nimport * as arr from \"../helpers/array\";\nimport {getSheet} from \"../sheets\";\n\nexport function init(view){\n\tview.attachEvent(\"onStyleChange\", (row, column, style) => {\n\t\tvar span = getSpan(view, row, column);\n\t\tif (span){\n\t\t\tvar extraCss = getExtraCss(view, row, column);\n\t\t\tspan[3] = (style ? style.id : \"\") + (extraCss ? (\" \" + extraCss) : \"\");\n\t\t}\n\t});\n\n\tview.attachEvent(\"onDataParse\", (data) => {\n\t\tparse(view, data);\n\t});\n\n\tview.attachEvent(\"onDataSerialize\", (data) => {\n\t\tserialize(view, data);\n\t});\n\t\n\tview.attachEvent(\"onUndo\", (type, row, column, value, isUndo) => {\n\t\tif(type == \"span\" || type == \"split\"){\n\t\t\tif (type == \"span\") \n\t\t\t\tisUndo = !isUndo;\n\t\t\tundoSpan(view, row, column, value, isUndo);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAction\", (name, options) => {\n\t\tif(name == \"lock\" && options.page == view.getActiveSheet())\n\t\t\tsetSpanCss(view, options.row, options.column, lockCss, options.newValue);\n\t\telse if(name == \"before-grid-change\")\n\t\t\tupdatePosition(view, options.name, options.inc, options.data, options.start);\n\t\telse if(name == \"check-borders\")\n\t\t\treturn checkSpanBorders(view, options.row, options.column, options.area, options.mode);\n\t});\n}\n\nfunction getSpan(view, row, column){\n\tvar item = view.$$(\"cells\").getSpan()[row];\n\tif (item)\n\t\treturn item[column];\n}\n\nfunction parse(view, data){\n\tif (data.spans)\n\t\tfor (var i = 0; i < data.spans.length; i++) {\n\t\t\tvar span = data.spans[i];\n\t\t\taddSpan( view,\n\t\t\t\t{ row: span[0], column: span[1] },\n\t\t\t\tspan[2]*1,\n\t\t\t\tspan[3]*1,\n\t\t\t\ttrue \n\t\t\t);\n\t\t}\n}\n\nexport function serialize(view, data){\n\tvar spans = [];\n\tvar pull = view.$$(\"cells\").getSpan();\n\tif (pull){\n\t\tfor (var rid in pull){\n\t\t\tvar row = pull[rid];\n\t\t\tfor (var cid in row){\n\t\t\t\tvar span = row[cid];\n\t\t\t\tspans.push([rid*1, cid*1, span[0], span[1]]);\n\t\t\t}\n\t\t}\n\n\t\tdata.spans = spans;\n\t}\n\treturn data;\n}\n\nexport function addSpan(view, cell, x, y, silent, page){\n\tpage = page || view.getActiveSheet();\n\n\tif (x<2 && y<2) return;\n\n\tif(silent || view.callEvent(\"onBeforeSpan\", [cell.row, cell.column, [x, y], page])){\n\t\tif(page == view.getActiveSheet()){\n\t\t\tconst obj = view._mPage.getCell(cell.row-1, cell.column-1);\n\t\t\tlet css = ( obj && obj.style ) || \"\";\n\t\t\tvar extraCss = getExtraCss(view, cell.row, cell.column);\n\t\t\tif (extraCss)\n\t\t\t\tcss += \" \" + extraCss;\n\t\t\tview.$$(\"cells\").addSpan(cell.row, cell.column, x, y, null, css);\n\t\t}\n\t\telse{\n\t\t\tconst sheet = getSheet(view, page);\n\t\t\tif(sheet){\n\t\t\t\tif(!sheet.content.spans)\n\t\t\t\t\tsheet.content.spans = [];\n\t\t\t\tsheet.content.spans.push([cell.row, cell.column, y, x]);\n\t\t\t}\n\t\t}\n\n\t\tsetSpanValue(view, cell, x, y, page);\n\n\t\tif (!silent){\n\t\t\tview.callEvent(\"onAfterSpan\", [cell.row, cell.column, [x, y], page]);\n\t\t\tsave(view, \"spans\", {\n\t\t\t\tpage,\n\t\t\t\trow:cell.row, column: cell.column,\n\t\t\t\tx, y\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function removeSpan(view, cell, page){\n\tpage = page || view.getActiveSheet();\n\tlet span, index, sheet;\n\n\tconst isActiveSheet = page == view.getActiveSheet();\n\tif(isActiveSheet)\n\t\tspan = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\telse{\n\t\tsheet = getSheet(view, page);\n\t\tif(sheet && sheet.content.spans){\n\t\t\tindex = arr.findIndex(sheet.content.spans, span => span[0] == cell.row && span[1] == cell.column);\n\t\t\tif(index != -1)\n\t\t\t\tspan = sheet.content.spans[index];\n\t\t}\n\t}\n\tif(span && view.callEvent(\"onBeforeSplit\", [ cell.row, cell.column, [span[2], span[3]], page ])){\n\t\tif(isActiveSheet)\n\t\t\tview.$$(\"cells\").removeSpan(cell.row, cell.column);\n\t\telse\n\t\t\tsheet.content.spans.splice(index, 1);\n\n\t\tview.callEvent(\"onAfterSplit\", [ cell.row, cell.column, [span[2], span[3]], page ]);\n\t\tsave(view, \"spans\", {\n\t\t\trow:cell.row, column: cell.column,\n\t\t\tx:0, y:0, page\n\t\t});\n\t}\n}\n\nexport function getRange(sel){\n\tvar lx, ly, rx, ry;\n\trx = ry = 0;\n\tlx = ly = Infinity;\n\n\tfor (var i=0; i<sel.length; i++){\n\t\tvar cx = sel[i].column*1;\n\t\tvar cy = sel[i].row*1;\n\n\t\tlx = Math.min(cx, lx);\n\t\trx = Math.max(cx, rx);\n\t\tly = Math.min(cy, ly);\n\t\try = Math.max(cy, ry);\n\t}\n\n\treturn {\n\t\tcell:{ row:ly, column:lx },\n\t\tx: rx-lx+1,\n\t\ty: ry-ly+1\n\t};\n}\n\nexport function setSpanCss(view, row, column, css, add){\n\tconst span = getSpan(view, row, column);\n\tif (span){\n\t\tif (add){\n\t\t\tif (span[3].indexOf(css) == -1)\n\t\t\t\tspan[3] += \" \" + css;\n\t\t} else {\n\t\t\tspan[3] = span[3].replace(\" \" + css, \"\");\n\t\t}\n\t}\n}\n\nfunction getExtraCss(view, row, column){\n\tlet extraCss = [];\n\tif(view.getCellEditor(row, column))\n\t\textraCss.push(\"ss_editor\");\n\tif(view.getCellFilter(row, column))\n\t\textraCss.push(\"ss_filter\");\n\treturn extraCss.join(\" \");\n}\n\nfunction undoSpan(view,row, column,value,isUndo){\n\tif(isUndo){\n\t\tremoveSpan(view,{row: row, column: column});\n\t}\n\telse{\n\t\taddSpan(view, {row: row, column: column}, value[0], value[1]);\n\t}\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet spans = data.spans;\n\tif(inc){\n\t\tfor(let i = spans.length-1;i >=0;i--){\n\t\t\tlet [row,column] = spans[i];\n\n\t\t\tif(inc < 0){//deleting\n\t\t\t\tif(name == \"row\" && row <= start.row-inc-1)\n\t\t\t\t\tinc = start.row - spans[i][0];\n\t\t\t\telse if (name == \"column\" && column <= start.column-inc-1)\n\t\t\t\t\tinc = start.column - spans[i][1];\n\t\t\t}\n\n\t\t\tif(name == \"row\" && row>= start.row || name == \"column\" && column >= start.column){\n\t\t\t\tspans[i][0] =  name == \"row\"?row*1 + inc:row;\n\t\t\t\tspans[i][1] = name == \"column\"?column*1 + inc:column;\n\t\t\t}\n\t\t}\n\t}\n}\n\nvar borderChecks = {\n\t\"border-right\":\t\tfunction(row, column, span, area){\n\t\treturn area.end.column == column+span[0]-1;\n\t},\n\t\"border-bottom\":\tfunction(row, column, span, area){\n\t\treturn area.end.row == row+span[1]-1;\n\t}\n};\n\nfunction checkSpanBorders(view, row, column, area, mode){\n\tvar span = getSpan(view, row, column);\n\treturn span&&borderChecks[mode]?borderChecks[mode](row, column, span, area):false;\n}\n\n// clear merged cells except the first one\nfunction setSpanValue(view, cell, x, y, page){\n\tconst row = cell.row*1;\n\tconst column = cell.column*1;\n\tlet isEmpty = !view.getCellValue(row, column, page);\n\n\tfor(let i = row; i < row+y; i++){\n\t\tfor(let j = column; j < column+x; j++) {\n\t\t\tconst value = view.getCellValue(i, j, page);\n\t\t\tif(value !== \"\" && (j != column || i != row)){\n\t\t\t\tif(isEmpty){\n\t\t\t\t\tisEmpty = false;\n\t\t\t\t\tview.setCellValue(row, column, value, page);\n\t\t\t\t}\n\t\t\t\tview.setCellValue(i, j, \"\", page);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function adjustSpan (span, action, start, end, view, data, spanData){\n\tvar length = action.group == \"row\" ? span[3] : span[2];\n\tvar checkSpan = action.group == \"row\" ? [span[0]*1, span[0]*1+span[3]-1] : [span[1]*1, span[1]*1+span[2]-1];\n\tvar selection = action.group == \"row\" ? [start.row, end.row] : [start.column, end.column];\n\n\t//if we add, the number of selected rows/cols is added to span, so we need original selection length\n\tvar inc = selection[1] - selection[0] + 1;\n\n\tselection[0] = Math.max(selection[0], checkSpan[0]);\n\tselection[1] = Math.min(selection[1], checkSpan[1]);\n\n\tvar isFirstCell = selection[0] == checkSpan[0];\n\n\tif(selection[0] <= selection[1]){ //selection is in span\n\t\tif(action.id == \"del\") //if we delete, only rows/cols included into span\n\t\t\tinc = (selection[1] - selection[0]+ 1) * -1;\n\t\t//delete smth which starts as span and less than it's length\n\t\tif(action.id == \"del\" && isFirstCell && length > -1*inc){\n\t\t\tconst item = arr.find(data, arr => arr[0] == span[0] && arr[1] == span[1]);\n\t\t\tif(item)\n\t\t\t\tspanData.push(item);\n\t\t}\n\n\t\tif(!(isFirstCell && action.id == \"add\")){\n\t\t\tspan[2] = action.group == \"column\" ? span[2]+inc : span[2];\n\t\t\tspan[3] = action.group == \"row\" ? span[3]+inc : span[3];\n\t\t}\n\t}\n\treturn span;\n}\n\nexport function pasteSpan(view, extra, row, col, cutted, translate){\n\t//existing span\n\tvar s = view._table.getSpan(row, col);\n\tif(extra && extra.span){\n\t\tvar span = extra.span;\n\t\t//if we are on start position for the future span\n\t\tif(row == span[0]*1+translate.row && col == span[1]*1+translate.column){\n\t\t\t//delete spans in future paste zone \n\t\t\tview._table.mapCells(row, col, span[3], span[2], (value, rid, cid) => {\n\t\t\t\ts = view._table.getSpan(rid,cid);\n\t\t\t\tif(s) removeSpan(view, {row:s[0], column:s[1]});\n\t\t\t}, true);\n\t\t\taddSpan(view, {row:row, column:col}, span[2], span[3]);\n\t\t\tif(cutted === 1)\n\t\t\t\tremoveSpan(view, {row:extra.row, column:extra.col});\n\t\t}\n\t}\n\telse if(s)\n\t\tremoveSpan(view, {row:s[0], column:s[1]});\n}","import {isVisible} from \"../sheets\";\nimport {setSpanCss} from \"./spans\";\n\nexport function print(view, options, htmlOnly){\n\tconst views = [];\n\tconst order = {};\n\tconst active = view._activeSheet;\n\n\tconst html = _buildHtml(view, options, active, views, order);\n\tview.showSheet(active);\n\n\tconst promise = webix.promise.defer();\n\twebix.promise.all(views).then(res =>{\n\t\tconst keys = Object.keys(order).sort( view.$$(\"cells\").data.sorting.as.int );\n\t\tfor (let i = keys.length - 1; i >= 0; i--) {\n\t\t\tconst index = keys[i];\n\t\t\thtml.insertBefore(res[index], html.childNodes[ order[index] ]);\n\t\t}\n\n\t\tif(htmlOnly)\n\t\t\treturn promise.resolve(html);\n\n\t\twebix.html.insertBefore(html, options.docFooter, document.body);\n\t\twindow.print();\n\t\t_cleanHtml(view, html);\n\n\t\tpromise.resolve();\n\t});\n\treturn promise;\n}\n\nexport function init(view){\n\tview.$customPrint = function(options, htmlOnly){\n\t\treturn print(view, options, htmlOnly);\n\t};\n\n\tview._printBorders = {\n\t\tpaper: webix.env.printSizes.find(s => s.id == \"a4\") ? \"a4\" : webix.env.printSizes[0].id,\n\t\tfit: \"page\",\n\t\tmode: \"landscape\",\n\t\tmargin: 1,\n\t\tsheetnames: 1,\n\t\t$renderedSpanBorders: {}\n\t};\n\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"print-borders\")\n\t\t\tview.showPrintBorders(value);\n\t});\n\n\tview.attachEvent(\"onAfterSheetShow\", ()=> showBorders(view, true));\n\tview.attachEvent(\"onChange\", (type, page)=> {\n\t\tif(type == \"update\" && page == view.getActiveSheet())\n\t\t\tshowBorders(view, true);\n\t});\n\tview.attachEvent(\"onAfterSplit\", (r, c, span, page)=> {\n\t\tconst renderedSpanBorders = view._printBorders.$renderedSpanBorders;\n\t\tif(page == view.getActiveSheet() && renderedSpanBorders[r] && renderedSpanBorders[r][c]){\n\t\t\tfor(let type in renderedSpanBorders[r][c])\n\t\t\t\twebix.html.remove(renderedSpanBorders[r][c][type]);\n\t\t\tdelete renderedSpanBorders[r][c];\n\t\t}\n\t});\n\t\n}\n\nfunction _cleanHtml(view, html){\n\twebix.html.remove(html);\n\n\tview._sheets.forEach((sheet, i) => {\n\t\twebix.html.removeStyle(\".wss_\"+view.$index+\"_\"+i);\n\t});\n}\nfunction _buildHtml(view, options, active, views, order){\n\tconst doc = webix.html.create(\"div\", { \"class\":\"webix_ssheet_print\"});\n\n\toptions.xCorrection = 1;\n\toptions.header = options.header || false;\n\toptions.trim = webix.isUndefined(options.trim) ? true : options.trim;\n\toptions.sheetnames = webix.isUndefined(options.sheetnames) ? true : options.sheetnames;\n\tconst baseIndex = view.$index;\n\tconst pageSize = getPageSize(options);\n\n\tlet sheets = options.sheets;\n\t\n\t// backward compatibility, options.data can be only \"selection\"\n\t// \"current\" and \"all\" are deprecated\n\tconst data = options.data;\n\n\tif(!sheets || data == \"current\" || data == \"selection\")\n\t\tsheets = [active];\n\telse if(typeof sheets == \"string\")\n\t\tsheets = [sheets];\n\telse if(sheets === true || data == \"all\")\n\t\tsheets = view._sheets.map(sheet => sheet.name);\n\n\tsheets = sheets.filter(sheet => isVisible(view, sheet));\n\n\tsheets.forEach((name, i) => {\n\t\tview.$index = baseIndex+\"_\"+i;\n\t\tconst grid = view.$$(\"cells\");\n\n\t\tview.showSheet(name);\n\t\tconst oldZoom = view._zoom;\n\t\tview.ignoreUndo(() => view.zoom(1));\n\n\t\tconst prefix = \"wss_\"+view.$index;\n\n\t\tview._print = true;\n\t\tconst table = grid.$customPrint(options, true);\n\t\tdelete view._print;\n\n\t\tconst tbl = table.firstChild;\n\n\t\tif(tbl){\n\t\t\tconst [header, body] = tbl.children;\n\n\t\t\tconst topSplit = header.childElementCount;\n\t\t\tconst sheetName = options.sheetnames ? 20 : 0;\n\t\t\tlet splitHeight = sheetName;\n\n\t\t\tfor (let s = 1; s <= topSplit; s++)\n\t\t\t\tsplitHeight += grid.getItem(s).$height || grid.config.rowHeight;\n\n\t\t\tif(splitHeight > pageSize.height / 4)\n\t\t\t\tfor (let i = topSplit - 1; i >= 0; i--){\n\t\t\t\t\tif(body.firstChild)\n\t\t\t\t\t\twebix.html.insertBefore(header.children[i], body.firstChild);\n\t\t\t\t\telse\n\t\t\t\t\t\tbody.appendChild(header.children[i]);\n\t\t\t\t}\n\n\t\t\tif(sheetName){\n\t\t\t\tconst sheetNode = webix.html.create(\"tr\", {class:\"webix_ssheet_sheetname\"}, `<td>${name}:</td>`);\n\n\t\t\t\tif(header.firstChild)\n\t\t\t\t\twebix.html.insertBefore(sheetNode, header.firstChild);\n\t\t\t\telse\n\t\t\t\t\theader.appendChild(sheetNode);\n\t\t\t}\n\n\t\t\tconst node = table.firstChild;\n\t\t\tif (node){\n\t\t\t\tif(name != active)\n\t\t\t\t\twebix.html.removeCss(node, \"wss_\"+baseIndex);\n\t\t\t\twebix.html.addCss(node, prefix);\n\t\t\t}\n\n\t\t\tdoc.appendChild(table);\n\t\t}\n\n\t\tif(options.external)\n\t\t\tfor(let id in view.views._pull){\n\t\t\t\tconst innerView = view.views._pull[id];\n\t\t\t\tif(innerView.type == \"image\"){\n\t\t\t\t\tconst img = webix.html.create(\"IMG\", {\n\t\t\t\t\t\tsrc: innerView.data,\n\t\t\t\t\t\twidth: (innerView.config.width || 500)+\"px\",\n\t\t\t\t\t\theight: (innerView.config.height || 300)+\"px\"\n\t\t\t\t\t});\n\n\t\t\t\t\tconst promise = webix.promise.defer();\n\t\t\t\t\tviews.push(promise);\n\t\t\t\t\timg.onload = ()=> promise.resolve();\n\n\t\t\t\t\tdoc.appendChild(img);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tconst externalUI = webix.$$(id).getBody();\n\t\t\t\t\tif(externalUI.$customPrint){\n\t\t\t\t\t\tconst customPrint = externalUI.$customPrint({size: options.size}, true);\n\t\t\t\t\t\tif(customPrint.then){\n\t\t\t\t\t\t\torder[views.length] = doc.childElementCount;\n\t\t\t\t\t\t\tviews.push(customPrint);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tdoc.appendChild( customPrint );\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tdoc.appendChild( printInnerView(webix.$$(id).getBody()) );\n\t\t\t\t}\n\t\t\t}\n\n\t\tif(i+1 < view._sheets.length && (tbl || (options.external && Object.keys(view.views._pull).length))){\n\t\t\tconst br = webix.html.create(\"DIV\", {\"class\":\"webix_print_pagebreak\"});\n\t\t\tdoc.appendChild(br);\n\t\t}\n\n\t\tview.$index = baseIndex;\n\t\tview.ignoreUndo(() => view.zoom(oldZoom));\n\t});\n\n\treturn doc;\n}\n\nfunction printInnerView(view){\n\tconst body = view.$view.cloneNode(true);\n\n\t//copy data from all canvases\n\tconst canvases = view.$view.getElementsByTagName(\"canvas\");\n\tif(canvases.length)\n\t\tfor(let i = canvases.length-1; i >=0; i--){\n\t\t\tconst destCtx = body.getElementsByTagName(\"canvas\")[i].getContext(\"2d\");\n\t\t\tdestCtx.drawImage(canvases[i], 0, 0);\n\t\t}\n\n\tconst container = webix.html.create(\"div\", {class:\"webix_ssheet_ui\"});\n\tcontainer.appendChild(body);\n\n\treturn container;\n}\n\nfunction getPageSize(options){\n\tconst size = webix.env.printSizes.find(size => size.id == options.paper);\n\tconst landscape = options.mode == \"landscape\";\n\n\tconst margin = options.margin ? 2 * webix.env.printMargin : 0;\n\n\treturn {\n\t\twidth: size[landscape ? \"height\" : \"width\"] * webix.env.printPPI - margin,\n\t\theight: size[landscape ? \"width\" : \"height\"] * webix.env.printPPI - margin\n\t};\n}\n\nexport function showBorders(view, redraw){\n\tif(redraw && !view._printBorders.$render)\n\t\treturn;\n\n\tremovePrintInnerBorders(view);\n\n\tconst borders = {rows:{}, cols:{}};\n\tconst grid = view.$$(\"cells\");\n\tconst options = view._printBorders;\n\n\tconst pageSize = getPageSize(options);\n\n\tconst sheetName = options.sheetnames ? 20 : 0;\n\tlet topSplit = grid.config.topSplit;\n\tlet splitHeight = sheetName;\n\n\tfor (let s = 1; s <= topSplit; s++)\n\t\tsplitHeight += (grid.getItem(s).$height || grid.config.rowHeight) / view._zoom;\n\n\tif(splitHeight > pageSize.height / 4){\n\t\ttopSplit = 0;\n\t\tsplitHeight = sheetName;\n\t}\n\n\tlet rowsHeight = splitHeight;\n\tfor (let r = topSplit + 1; r <= view.config.rowCount; r++) {\n\t\tconst height = (grid.getItem(r).$height || grid.config.rowHeight) / view._zoom;\n\n\t\tif(rowsHeight + height > pageSize.height){\n\t\t\trowsHeight = splitHeight;\n\t\t\tborders.rows[r == 1 ? r : r-1] = 1;\n\t\t}\n\n\t\trowsHeight += height;\n\t}\n\n\tif(options.fit != \"page\"){\n\t\tlet colsWidth = 0;\n\t\tfor (let c = 1; c <= view.config.columnCount; c++) {\n\t\t\tconst width = (grid.getColumnConfig(c).width || grid.config.columnWidth) / view._zoom;\n\n\t\t\tif(colsWidth + width > pageSize.width){\n\t\t\t\tcolsWidth = 0;\n\t\t\t\tborders.cols[c == 1 ? c : c-1] = 1;\n\t\t\t}\n\n\t\t\tcolsWidth += width;\n\t\t}\n\t}\n\n\tview._printBorders.$render = borders;\n\tview.refresh();\n}\n\nexport function getPrintBordersCss(view, row, column){\n\tlet css = \"\";\n\n\tconst borders = view._printBorders.$render;\n\tconst span = view.$$(\"cells\").getSpan(row, column);\n\n\tif(span){\n\t\tconst lastRow = span[0]*1+(span[3]-1);\n\t\tconst lastCol = span[1]*1+(span[2]-1);\n\n\t\tsetSpanCss(view, span[0], span[1], \"webix_ss_print_border_right\", borders && borders.cols[lastCol]);\n\t\tsetSpanCss(view, span[0], span[1], \"webix_ss_print_border_bottom\", borders && borders.rows[lastRow]);\n\n\t\tconst renderedSpanBorders = view._printBorders.$renderedSpanBorders;\n\n\t\tif(borders){\n\t\t\tconst innerRightBorder = column != lastCol && borders.cols[column];\n\t\t\tconst innerBottomBorder = row != lastRow && borders.rows[row];\n\n\t\t\tif(innerRightBorder || innerBottomBorder){\n\t\t\t\tif(!renderedSpanBorders[span[0]])\n\t\t\t\t\trenderedSpanBorders[span[0]] = {};\n\t\t\t\tif(!renderedSpanBorders[span[0]][span[1]])\n\t\t\t\t\trenderedSpanBorders[span[0]][span[1]] = {};\n\n\t\t\t\tif(innerRightBorder)\n\t\t\t\t\taddSpanInnerBorder(view, renderedSpanBorders[span[0]][span[1]], span, column, \"right\");\n\t\t\t\tif(innerBottomBorder)\n\t\t\t\t\taddSpanInnerBorder(view, renderedSpanBorders[span[0]][span[1]], span, row, \"bottom\");\n\t\t\t}\n\t\t}\n\t\telse removePrintInnerBorders(view);\n\t}\n\n\tif(borders){\n\t\tif(borders.cols[column])\n\t\t\tcss += \"webix_ss_print_border_right\";\n\t\tif(borders.rows[row])\n\t\t\tcss += (css ? \" \" : \"\") + \"webix_ss_print_border_bottom\";\n\t}\n\n\treturn css;\n}\n\nexport function removePrintInnerBorders(view){\n\tconst renderedSpanBorders = view._printBorders.$renderedSpanBorders;\n\tfor(let row in renderedSpanBorders)\n\t\tfor(let col in renderedSpanBorders[row])\n\t\t\tfor(let type in renderedSpanBorders[row][col])\n\t\t\t\twebix.html.remove(renderedSpanBorders[row][col][type]);\n\tview._printBorders.$renderedSpanBorders = {};\n}\n\nfunction addSpanInnerBorder(view, rendered, span, position, type){\n\tif(!rendered[type]) rendered[type] = {};\n\n\tlet border = rendered[type][position];\n\tconst grid =  view.$$(\"cells\");\n\n\tif(!border){\n\t\tlet pos = 0;\n\t\tfor(let i = span[type == \"right\" ? 1 : 0]*1; i <= position; i++){\n\t\t\tif(type == \"right\")\n\t\t\t\tpos += grid.getColumnConfig(i).width || grid.config.columnWidth;\n\t\t\telse\n\t\t\t\tpos += grid.getItem(i).$height || grid.config.rowHeight;\n\t\t}\n\t\tborder = rendered[type][position] = webix.html.create(\"div\", {class:`webix_ss_print_border_${type}`, style:`${type == \"right\" ? \"left\" : \"top\"}:${pos-1}px;`});\n\t}\n\n\twebix.delay(()=>{\n\t\tconst spanNode = grid.getSpanNode({row: span[0], column: span[1]});\n\t\tif(!spanNode.contains(border))\n\t\t\tspanNode.appendChild(border);\n\t});\n}","import {numbers} from \"../sheets\";\nimport {zoomStyles} from \"./styles\";\nimport {zoomSizes} from \"./resize\";\nimport {getSheet} from \"../sheets\";\nimport {removePrintInnerBorders} from \"./print\";\n\nconst readyZoom = {};\n\nexport function init(view) {\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"zoom\"){\n\t\t\tzoom(view, value);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onDataSerialize\", (data) => serialize(view, data));\n\tview.attachEvent(\"onDataParse\", (data) => load(view, data));\n}\n\nexport function zoom(view, newValue, load, page){\n\tlet value;\n\tpage = page || view.getActiveSheet();\n\n\tif(page == view.getActiveSheet()){\n\t\tconst grid = view.$$(\"cells\");\n\t\tvalue = view._zoom || 1;\n\n\t\tif(newValue == \"in\" || newValue == \"out\")\n\t\t\tnewValue = getNext(value, newValue == \"in\" ? 1 : -1, numbers);\n\n\t\tview._zoom = newValue;\n\t\tgrid.define({ minColumnWidth: 40*newValue });\n\n\t\tif(view.$$(\"zoom\"))\n\t\t\tview.$$(\"zoom\").setValue(newValue);\n\n\t\tif(newValue != value){\n\t\t\tconst fontSize = webix.skin.$active.fontSize * newValue;\n\t\t\tconst rowHeight = webix.skin.$name == \"contrast\" || webix.skin.$name == \"flat\" ? 24 : 20;\n\t\t\tconst className = \"webix_ssheet_zoom_\"+newValue.toString().replace(\".\", \"_\");\n\n\t\t\tgrid.$view.className = grid.$view.className.replace(/ webix_ssheet_zoom_\\w+/,\"\");\n\t\t\tgrid.define({css: className});\n\n\t\t\tif(!load){\n\t\t\t\tremovePrintInnerBorders(view);\n\t\t\t\tzoomSizes(view, value);\n\t\t\t\tzoomStyles(view);\n\t\t\t}\n\n\t\t\tif(!readyZoom[className] && newValue != 1){\n\t\t\t\treadyZoom[className] = 1;\n\n\t\t\t\t// cells\n\t\t\t\twebix.html.addStyle(`\n\t\t\t\t\t.${className} .webix_hcell, .${className} .webix_cell{\n\t\t\t\t\t\tfont-size: ${fontSize}px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.${className} .sheet_column_0 .webix_cell{\n\t\t\t\t\t\tpadding: 0 ${12*newValue}px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.${className}.webix_ssheet_table .webix_hs_left .webix_hcell.webix_first:before{\n\t\t\t\t\t\tright: ${4*newValue}px;\n\t\t\t\t\t\tbottom: ${4*newValue}px;\n\t\t\t\t\t\tborder-top-width: ${(rowHeight - 8)*newValue}px;\n\t\t\t\t\t\tborder-right-width: ${(rowHeight - 8)*newValue}px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.${className} .webix_cell{\n\t\t\t\t\t\tpadding: ${2*newValue}px 0px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.${className} .webix_cell div:first-child{\n\t\t\t\t\t\tmargin: 0 ${12*newValue}px;\n\t\t\t\t\t}\n\t\t\t\t`);\n\n\t\t\t\t// icons\n\t\t\t\twebix.html.addStyle(`\n\t\t\t\t\t.${className} .webix_cell.ss_filter, .${className} .webix_cell.ss_editor{\n\t\t\t\t\t\tpadding-right: ${16*newValue}px;\n\t\t\t\t\t}\n\t\t\t\t\t.${className} .ssheet_filter_sign, .${className} .webix_cell.ss_editor:after{\n\t\t\t\t\t\tfont-size: ${20*newValue}px;\n\t\t\t\t\t\tright: ${6*newValue}px;\n\t\t\t\t\t}\n\t\t\t\t\t.${className} .webix_cell.ss_filter.ss_editor:after{\n\t\t\t\t\t\tright: ${28*newValue}px;\n\t\t\t\t\t}\n\t\t\t\t\t.${className} .webix_cell.ss_filter.ss_editor{\n\t\t\t\t\t\tpadding-right: ${36*newValue}px;\n\t\t\t\t\t}\n\t\t\t\t\t.${className} .webix_lock:before{\n\t\t\t\t\t\tfont-size: ${fontSize}px;\n\t\t\t\t\t}\n\t\t\t\t\t.${className} .ssheet_commented_sign:before{\n\t\t\t\t\t\tborder-top-width: ${8*newValue}px;\n\t\t\t\t\t\tborder-left-width: ${8*newValue}px;\n\t\t\t\t\t}\n\t\t\t\t`);\n\t\t\t}\n\t\t}\n\t}\n\telse{\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tif(!sheet.content.table)\n\t\t\t\tsheet.content.table = {zoom: 1};\n\n\t\t\tvalue = sheet.content.table.zoom;\n\n\t\t\tif(newValue == \"in\" || newValue == \"out\")\n\t\t\t\tnewValue = getNext(value, newValue == \"in\" ? 1 : -1, numbers);\n\n\t\t\tsheet.content.table.zoom = newValue;\n\t\t}\n\t\telse return;\n\t}\n\n\tif(!load && value != newValue)\n\t\tview.callEvent(\"onZoom\", [newValue, value, page]);\n}\n\nexport function serialize(view, data){\n\tdata.table = {\n\t\tzoom: view._zoom\n\t};\n}\n\nexport function load(view, data){\n\tlet value = 1;\n\tif(data.table && data.table.zoom)\n\t\tvalue = data.table.zoom;\n\n\tzoom(view, value, true);\n}\n\nexport function getNext(value, step, numbers) {\n\tconst index = numbers.indexOf(value);\n\n\tif(index != -1)\n\t\treturn numbers[index + step] || value;\n\n\tlet nextValue;\n\tfor(let i = 0; i < numbers.length; i++){\n\t\tif(numbers[i] > value){\n\t\t\tif(step < 0){\n\t\t\t\tif(--i == -1)\n\t\t\t\t\treturn value;\n\t\t\t}\n\t\t\tnextValue = numbers[i];\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif(step < 0 && !nextValue)\n\t\tnextValue = numbers[numbers.length - 1];\n\n\treturn nextValue || value;\n}","import {getNext} from \"../operations/zoom\";\n\nwebix.protoUI(\n\t{\n\t\tname: \"ssheet-zoom\",\n\t\t$cssName: \"counter webix_ssheet_zoom\",\n\t\t$init: function() {\n\t\t\tthis.attachEvent(\"onAfterRender\", () => {\n\t\t\t\tthis.$setValue(this.config.value);\n\t\t\t\tthis.getInputNode().readOnly = true;\n\t\t\t\twebix.event(this.$view.firstChild, \"keydown\", e =>\n\t\t\t\t\twebix.html.preventEvent(e)\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t$setValue: function(value) {\n\t\t\tthis.getInputNode().value = parseInt(value * 100, 10) + \"%\";\n\t\t},\n\t\tshift: function(step, config) {\n\t\t\tconst v = this.config.value;\n\t\t\tconst arr = this.config.numbers;\n\n\t\t\tconst value = getNext(v, step, arr);\n\t\t\tthis.setValue(value, config);\n\t\t},\n\t},\n\twebix.ui.counter\n);","import {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\nimport {getDateEditFormat} from \"../operations/formats\";\n\nwebix.editors.excel_date = webix.extend({\n\tcreatePopup:function(){\n\t\tconst editor = webix.editors.excel_date;\n\n\t\tif(!editor.popup){\n\t\t\tconst popup = webix.ui({\n\t\t\t\tview:\"popup\",\n\t\t\t\tbody:{ \n\t\t\t\t\tview:\"calendar\",\n\t\t\t\t\ticons:true,\n\t\t\t\t\ttimepicker:true,\n\t\t\t\t\ton:{\n\t\t\t\t\t\tonChange: function(val){\n\t\t\t\t\t\t\tval = val[0];\n\t\t\t\t\t\t\tthis.getParentView()._last_input_target.value = val ? getExcelDateFromJs(val) : \"\";\n\t\t\t\t\t\t\twebix.callEvent(\"onEditEnd\", []);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonEnter: function(){\n\t\t\t\t\t\twebix.callEvent(\"onEditEnd\", []);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\teditor.popup = popup.config.id;\n\t\t}\n\n\t\treturn editor.popup;\n\t},\n\trender:function(){\n\t\tconst node = webix.html.create(\"div\", {\n\t\t\t\"class\":\"webix_dt_editor\"\n\t\t}, \"<input type='text'>\");\n\n\t\tthis.popup = this.createPopup();\n\n\t\twebix.event(node.firstChild, \"click\", ()=> this.getPopup().show(node));\n\n\t\treturn node;\n\t},\n\tgetPopup(){\n\t\treturn webix.$$(this.popup);\n\t},\n\tshowPopup:function(){\n\t\tconst input = this.getInputNode();\n\t\tconst popup = this.getPopup();\n\n\t\tpopup._last_input_target = input;\n\t\tpopup.show(input);\n\n\t\tinput.setAttribute(\"aria-expanded\", \"true\");\n\t},\n\tupdateCalendar(value){\n\t\tconst calendar = this.getPopup().getBody();\n\n\t\tcalendar.blockEvent();\n\t\tcalendar.setValue(value);\n\t\tcalendar.unblockEvent();\n\t},\n\tafterRender:function(){\n\t\tthis.showPopup();\n\t},\n\tsetValue:function(value){\n\t\tconst noDate = (value === \"\" || isNaN(value*1));\n\t\tvalue = noDate ? new Date() : getJsDateFromExcel(value);\n\t\tthis.updateCalendar(value);\n\n\t\tconst view = webix.$$(this.config.node).queryView(a => a.name === \"spreadsheet\", \"parent\");\n\t\tconst format = getDateEditFormat(view, this.config.row.id, this.config.id);\n\t\tthis.getInputNode().value = format(value);\n\t},\n\tgetValue:function(){\n\t\tconst value = this.getInputNode().value;\n\t\tthis.getPopup().hide();\n\t\treturn value;\n\t}\n}, webix.editors.text);","webix.editors.ss_richselect = webix.extend({\n\tgetFormat:function(value){\n\t\tconst list = this.getInputNode();\n\t\tlet item;\n\n\t\tif (value && list.exists(value))\n\t\t\titem = list.getItem(value);\n\t\treturn item && item.format;\n\t},\n\tpopupInit:function(popup){\n\t\twebix.editors.richselect.popupInit.apply(this, arguments);\n\n\t\tpopup.getList().define(\"template\", function(obj){\n\t\t\treturn obj.$value || obj.value;\n\t\t});\n\t}\n}, webix.editors.richselect);","import {changeAreaDecimals} from \"../operations/formats\";\n\nexport const actions = {\n\tspan: view => {\n\t\tconst range = view.$$(\"cells\").getSelectArea();\n\t\tif(range){\n\t\t\tif(isMerged(view,range))\n\t\t\t\tview.splitCell();\n\t\t\telse {\n\t\t\t\tconst values = [];\n\t\t\t\tfor(let r = range.start.row; r<=range.end.row; r++){\n\t\t\t\t\tfor(let c = range.start.column; c<=range.end.column; c++){\n\t\t\t\t\t\tlet value = view.getCellValue(r,c);\n\t\t\t\t\t\tif(value) values.push(value);\n\t\t\t\t\t\tif(values.length >1) break;\n\t\t\t\t\t}\n\t\t\t\t\tif(values.length >1) break;\n\t\t\t\t}\n\t\t\t\tif(values.length>1){\n\t\t\t\t\tview.confirm({\n\t\t\t\t\t\ttext:webix.i18n.spreadsheet.labels[\"merge-cell-confirm\"]\n\t\t\t\t\t}).then(()=> view.combineCells() );\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tview.combineCells();\n\t\t\t}\n\t\t}\n\t},\n\tundo: view => view.undo(),\n\tredo: view => view.redo(),\n\t\"hide-gridlines\": view => view.hideGridlines(\"toggle\"),\n\t\"hide-headers\": view => view.hideHeaders(\"toggle\"),\n\t\"freeze-columns\": view => view.freezeColumns(),\n\t\"freeze-rows\": view => view.freezeRows(),\n\t\"increase-decimals\": view => changeAreaDecimals(view, 1),\n\t\"decrease-decimals\": view => changeAreaDecimals(view, -1),\n\t\"increase-indent\": view => view.callEvent(\"onStyleSet\", [\"indent\", 1]),\n\t\"decrease-indent\": view => view.callEvent(\"onStyleSet\", [\"indent\", -1]),\n\t\"show-formulas\": view => view.showFormulas(\"toggle\"),\n\t\"print-borders\": view => view.showPrintBorders(\"toggle\"),\n};\n\nfunction isMerged(view,range){\n\tvar i, j,\n\t\tc0 = range.start,\n\t\tc1 = range.end;\n\n\tfor( i = c0.row*1; i <= c1.row*1; i++ ){\n\t\tfor( j = c0.column*1; j <= c1.column*1; j++ ){\n\t\t\tif(view.$$(\"cells\").getSpan(i, j))\n\t\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n","import {toolbarSizes, defaultStyles} from \"./defaults\";\nimport {formatHelpers} from \"../operations/formats\";\n\n// options for 'font-family' select\nexport const fontFamily = [\n\t{id: \"Arial\", value: \"Arial\"},\n\t{id: \"'Roboto', sans-serif\", value: \"Roboto\"},\n\t{id: \"'PT Sans', Tahoma\", value: \"PT Sans\"},\n\t{id: \"'Open Sans', sans-serif\", value:\"Open Sans\"},\n\t{id: \"Tahoma\", value: \"Tahoma\"},\n\t{id: \"Verdana\", value: \"Verdana\"},\n\t{id: \"Calibri, Tahoma\", value:\"Calibri\"}\n];\n\n// options for 'format' select\nfunction getCellFormats(){\n\tconst locale = webix.i18n.spreadsheet.labels;\n\treturn [\n\t\t{id: \"common\", value: locale.common },\n\t\t{id: \"price\", value: locale.currency, example: \"98.20\"},\n\t\t{id: \"int\", value: locale.number, example: \"2120.02\"},\n\t\t{id: \"percent\", value: locale.percent, example:\"0.5\"},\n\t\t{id: \"date\", value: locale.date, example:\"45000\"},\n\t\t{id: \"string\", value: locale.string, example:\"012345\"},\n\t\t{id: \"custom\", value: locale[\"custom-format\"]},\n\t];\n}\n\nexport function getColumnOperation(view){\n\tconst locale = webix.i18n.spreadsheet.menus;\n\tlet colOperations = [\n\t\t{ id:\"add\",    group:\"column\", value:locale[\"insert-column\"]},\n\t\t{ id:\"del\",    group:\"column\", value:locale[\"delete-column\"]},\n\t\t{ id:\"show\",   group:\"column\", value:locale[\"show-column\"], neighbors:true},\n\t\t{ id:\"hide\",   group:\"column\", value:locale[\"hide-column\"]}\n\t];\n\tif(view.config.resizeCell != false)\n\t\tcolOperations.push({ id:\"resize\", group:\"column\", value:locale[\"resize-column\"]});\n\treturn colOperations;\n}\n\nexport function getRowOperation(view){\n\tconst locale = webix.i18n.spreadsheet.menus;\n\tlet rowOperations = [\n\t\t{ id:\"add\",    group:\"row\", value:locale[\"insert-row\"]},\n\t\t{ id:\"del\",    group:\"row\", value:locale[\"delete-row\"]},\n\t\t{ id:\"show\",   group:\"row\", value:locale[\"show-row\"], neighbors:true},\n\t\t{ id:\"hide\",   group:\"row\", value:locale[\"hide-row\"]}\n\t];\n\tif(view.config.resizeCell != false)\n\t\trowOperations.push({ id:\"resize\", group:\"row\", value:locale[\"resize-row\"]});\n\treturn rowOperations;\n}\n\n// options for 'clear' select\nexport function getClearOperation(){\n\treturn [\n\t\t{id: \"clear-value\",               value: getLocaleClear(\"value\")},\n\t\t{id: \"clear-style\",               value: getLocaleClear(\"style\")},\n\t\t{id: \"clear-conditional-formats\", value: getLocaleClear(\"conditional-formats\")},\n\t\t{id: \"clear-dropdown-editors\",    value: getLocaleClear(\"dropdown-editors\")},\n\t\t{id: \"clear-filters\",             value: getLocaleClear(\"filters\")},\n\t\t{id: \"clear-comments\",            value: getLocaleClear(\"comments\")},\n\t\t{ $template: \"Separator\" },\n\t\t{id: \"clear-all\",                 value: getLocaleClear(\"all\")}\n\t];\n}\n\n// options for 'borders' select\nconst borders = [\n\t{id: \"no\", value: \"no\"},\n\t{id: \"left\", value: \"left\"},\n\t{id: \"top\", value: \"top\"},\n\t{id: \"right\", value: \"right\"},\n\t{id: \"bottom\", value: \"bottom\"},\n\t{id: \"all\", value: \"all\"},\n\t{id: \"outer\", value: \"outer\"},\n\t{id: \"top-bottom\", value: \"top-bottom\"}\n];\n\nfunction getLocaleClear(value){\n\tvar locale = webix.i18n.spreadsheet.menus;\n\treturn locale[\"clear\"] + \" \" + locale[\"clear-\"+value].toLowerCase();\n}\n\n// options for 'font-size' select\nfunction getFontSize(){\n\treturn [\n\t\t\"8\",\"9\",\"10\",\"11\",\"12\",\"14\",\"15\",\n\t\t\"16\",\"18\",\"20\",\"22\",\"24\",\"28\",\"36\"\n\t];\n}\n\nexport const styleFormats = {\n\t\"font-weight\": \"bold\",\n\t\"font-style\": \"italic\",\n\t\"underline\": \"underline\",\n\t\"strike\": \"strike\"\n};\n\nexport const ui = {\n\tbutton: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-toggle\", width: config.width||toolbarSizes.width, id: config.name, name: config.name,  label: config.label,\n\t\t\tcss: config.css||\"\", onValue: styleFormats[config.name], offValue: \"normal\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||\"\"\n\t\t};\n\t},\n\tcolorButton: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-color\",  css: config.css,  name: config.name, width: config.width||toolbarSizes.width+24,\n\t\t\ttitle: \"<span class='webix_ssheet_button_icon webix_ssheet_color_button_icon webix_ssheet_icon ssi-\"+config.name+\"' ></span>\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||\"\"\n\t\t};\n\t},\n\ttoggleButton: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-toggle-silent\", width: toolbarSizes.width, id: config.name, name: config.name,\n\t\t\tlabel: \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\"+(config.icon||config.name)+\"'></span>\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||\"\"\n\t\t};\n\t},\n\ticonButton: function(config){\n\t\tvar btn = webix.copy(config);\n\t\twebix.extend(btn, {view: \"button\", width: toolbarSizes.width, id: config.name,\n\t\t\tlabel: \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\"+config.name+\"'></span>\",\n\t\t\tcss: \"\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||webix.i18n.spreadsheet.menus[config.name]||\"\"\n\t\t});\n\t\tif(config.onValue){\n\t\t\twebix.extend(btn,{view: \"ssheet-toggle\", onValue: config.onValue, offValue: config.offValue},true);\n\t\t}\n\n\t\treturn btn;\n\t},\n\tsegmented: function(config){\n\t\treturn  {\n\t\t\tview: \"segmented\", name: config.name, css:config.css||\"\", width: config.width||toolbarSizes.width+76,  options:config.options\n\t\t};\n\t},\n\tselect: function(config){\n\t\twebix.extend(config,{\n\t\t\tview: \"richselect\",\n\t\t\tid: config.name,\n\t\t\tvalue: defaultStyles[config.name],\n\t\t\tsuggest: {\n\t\t\t\tcss: \"webix_ssheet_suggest\",\n\t\t\t\tpadding: 0,\n\t\t\t\tdata: config.options\n\t\t\t}\n\t\t});\n\n\t\tconfig.tooltip = webix.i18n.spreadsheet.tooltips[config.name]||\"\";\n\t\tif(config.popupWidth){\n\t\t\tconfig.suggest.fitMaster = false;\n\t\t\tconfig.suggest.width = config.popupWidth;\n\t\t}\n\t\tif(config.popupTemplate)\n\t\t\tconfig.suggest.body = {\n\t\t\t\ttemplate: config.popupTemplate\n\t\t\t};\n\t\tif(config.popupEvents){\n\t\t\tconfig.suggest.body = config.suggest.body || {};\n\t\t\tconfig.suggest.body.on = config.popupEvents;\n\t\t}\n\t\treturn config;\n\t},\n\tseparator: function(){\n\t\treturn {\n\t\t\tview: \"ssheet-separator\"\n\t\t};\n\t},\n\ttitle: function(config){\n\t\tvar title = config.title;\n\t\tif(title.indexOf(\"$\") === 0)\n\t\t\ttitle = \"\";\n\t\ttitle = webix.i18n.spreadsheet.labels[config.title]||title;\n\n\t\treturn {\n\t\t\ttemplate: title, view: \"ssheet-bar-title\", height: toolbarSizes.titleHeight\n\t\t};\n\t},\n\tborders: function(config){\n\t\treturn {view: \"ssheet-borders\", width:config.width||toolbarSizes.width+24, data: borders, id: config.name, name: config.name,\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name] };\n\t},\n\talign: function(config){\n\t\treturn {view: \"ssheet-align\", value: defaultStyles[config.name], width:config.width||toolbarSizes.width+24, data: config.options,\n\t\t\tname: config.name, tooltip: webix.i18n.spreadsheet.tooltips[config.name] };\n\t},\n\tcondFormat: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-cond-format\",\n\t\t\twidth: 40,\n\t\t\tid: config.name,\n\t\t\tname: config.name\n\t\t};\n\t}\n};\n\nexport const buttonsMap = {\n\t\"font-family\": function(){\n\t\treturn  ui.select({name: \"font-family\", options:fontFamily, width: 100, view:\"combo\"});\n\t},\n\t\"font-size\": function(){\n\t\treturn  ui.select({name: \"font-size\", options:getFontSize(), width: 70, view:\"text\", icon: \"wxi-menu-down\", css: \"webix_ssheet_text\",\n\t\t\ton: {\n\t\t\t\tonItemClick: function(){\n\t\t\t\t\tconst suggest = webix.$$(this.config.suggest);\n\t\t\t\t\tif(!suggest.isVisible())\n\t\t\t\t\t\tsuggest.show(this.getInputNode());\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\t\"font-weight\": function(){\n\t\treturn ui.button({name:\"font-weight\",label: \"B\", css: \"webix_ssheet_bold\"});\n\t},\n\t\"font-style\": function(){\n\t\treturn ui.button({name: \"font-style\",label: \"I\",css:\"webix_ssheet_italic\"});\n\t},\n\t\"underline\": function(){\n\t\treturn ui.button({name: \"underline\",label: \"U\",css: \"webix_ssheet_underline\"});\n\t},\n\t\"strike\": function(){\n\t\treturn ui.button({name: \"strike\",label: \"S\",css: \"webix_ssheet_strike\"});\n\t},\n\t\"color\": function(){\n\t\treturn ui.colorButton({name: \"color\",icon:\"font\",css:\"webix_ssheet_color\"});\n\t},\n\t\"background\": function(){\n\t\treturn  ui.colorButton({name: \"background\",icon:\"paint-brush\",css:\"webix_ssheet_background\", width: 70});\n\t},\n\t\"borders\": function(){\n\t\treturn ui.borders({ name: \"borders\" });\n\t},\n\t\"text-align\": function(){\n\t\tvar locale = webix.i18n.spreadsheet.tooltips;\n\t\treturn ui.align({name: \"text-align\", css: \"webix_ssheet_align\", options:[\n\t\t\t{id: \"left\", css: \"webix_ssheet_icon ssi-left\", tooltip: locale[\"align-left\"]},\n\t\t\t{id: \"center\", css: \"webix_ssheet_icon ssi-center\", tooltip: locale[\"align-center\"]},\n\t\t\t{id: \"right\", css: \"webix_ssheet_icon ssi-right\", tooltip: locale[\"align-right\"]}\n\t\t]});\n\t},\n\t\"vertical-align\": function(){\n\t\tvar locale = webix.i18n.spreadsheet.tooltips;\n\t\treturn  ui.align({name: \"vertical-align\", css: \"webix_ssheet_align\", options:[\n\t\t\t{id: \"top\", css: \"webix_ssheet_icon ssi-top\", tooltip: locale[\"align-top\"]},\n\t\t\t{id: \"middle\", css: \"webix_ssheet_icon ssi-middle\", tooltip: locale[\"align-middle\"]},\n\t\t\t{id: \"bottom\", css: \"webix_ssheet_icon ssi-bottom\", tooltip: locale[\"align-bottom\"]}\n\t\t]});\n\t},\n\t\"wrap\": function(){\n\t\treturn ui.iconButton({name: \"wrap\", onValue:\"wrap\", offValue:\"nowrap\"});\n\t},\n\t\"format\": function(){\n\t\treturn ui.select({\n\t\t\tname: \"format\", width: 106, options:getCellFormats(), popupWidth: 180,\n\t\t\tpopupTemplate: function(obj){\n\t\t\t\t//make it look like an actual cell\n\t\t\t\tvar format =  formatHelpers[obj.id] ? formatHelpers[obj.id].getFormat : \"\";\n\t\t\t\tvar cell = {css:\"\"};\n\t\t\t\tvar example = format && obj.example?format(obj.example, cell):\"\";\n\t\t\t\treturn obj.value + (format?\"<span class='webix_ssheet_right\"+(cell.css?\" \"+cell.css:\"\")+\"'>\"+example+\"</span>\":\"\");\n\t\t\t},\n\t\t\tpopupEvents:{\n\t\t\t\tonItemClick: function(id){\n\t\t\t\t\tif(id == \"custom\")\n\t\t\t\t\t\tthis.getTopParentView().callEvent(\"onCommand\", [{id:id}]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\t\"column\": function(view){\n\t\treturn {\n\t\t\tname: \"column\",\n\t\t\tview: \"ssheet-button\", icon: \"column\",\n\t\t\tarrow: true, area: true, width: 58,\n\t\t\toptions:getColumnOperation(view)\n\t\t};\n\t},\n\t\"row\": function(view){\n\t\treturn {\n\t\t\tname: \"row\", view: \"ssheet-button\", icon: \"row\",\n\t\t\tarrow: true, area: true, width: 58,\n\t\t\toptions:getRowOperation(view)\n\t\t};\n\t},\n\t\"clear\": function(){\n\t\treturn {\n\t\t\tname: \"clear\", view: \"ssheet-button\", icon: \"clear-styles\",\n\t\t\tarrow: true, area: true, width: 58,\n\t\t\toptions:getClearOperation()\n\t\t};\n\t},\n\t\"validation\": function(){\n\t\treturn {\n\t\t\tname: \"validation\", view: \"ssheet-button\", icon: \"validation\",\n\t\t\tarrow: true, area: true, width: 58,\n\t\t\toptions:[\n\t\t\t\t{id:\"add-cell-validation\", value: webix.i18n.spreadsheet.labels[\"add-cell-validation\"]},\n\t\t\t\t{id:\"remove-cell-validation\", value: webix.i18n.spreadsheet.labels[\"remove-cell-validation\"]},\n\t\t\t\t{id:\"highlight-invalid-data\", value: webix.i18n.spreadsheet.labels[\"highlight-invalid-data\"]},\n\t\t\t\t{id:\"remove-highlight-invalid-data\", value: webix.i18n.spreadsheet.labels[\"remove-highlight-invalid-data\"]}\n\t\t\t]\n\t\t};\n\t},\n\t\"image\":function(){\n\t\treturn {\n\t\t\tname:\"image\", view:\"ssheet-button\", icon:\"add-image\",\n\t\t\tarrow:true, options:[\n\t\t\t\t{id:\"add-image-cell\", value: webix.i18n.spreadsheet.labels[\"add-image-cell\"]},\n\t\t\t\t{id:\"add-image-top\", value: webix.i18n.spreadsheet.labels[\"add-image-top\"]}\n\t\t\t]\n\t\t};\n\t},\n\t\"graph\":function(){\n\t\treturn {\n\t\t\tname:\"graph\", view:\"ssheet-button\", icon:\"add-sparkline\",\n\t\t\tarrow:true, options:[\n\t\t\t\t{id:\"add-sparkline\", value:webix.i18n.spreadsheet.labels[\"add-sparkline\"]},\n\t\t\t\t{id:\"add-chart\", value: webix.i18n.spreadsheet.labels[\"add-chart\"]}\n\t\t\t]\n\t\t};\n\t},\n\t\"controls\":function(){\n\t\treturn {\n\t\t\tname:\"controls\", view:\"ssheet-button\", icon:\"add-control\",\n\t\t\tarrow:true, options:[\n\t\t\t\t{id:\"add-checkbox\", value:webix.i18n.spreadsheet.labels[\"add-checkbox\"]},\n\t\t\t\t{id:\"add-radio\", value: webix.i18n.spreadsheet.labels[\"add-radio\"]}\n\t\t\t]\n\t\t};\n\t},\n\t\"comment\": function(){\n\t\treturn {\n\t\t\tname: \"comment\",\n\t\t\tview: \"ssheet-button\", icon: \"comments\",\n\t\t\tarrow: true, area: true, width: 55\n\t\t};\n\t},\n\t\"create-filter\": function(){\n\t\treturn ui.toggleButton({name: \"create-filter\"});\n\t},\n\t\"hide-gridlines\": function(){\n\t\treturn ui.toggleButton({name: \"hide-gridlines\"});\n\t},\n\t\"hide-headers\": function(){\n\t\treturn ui.toggleButton({name: \"hide-headers\"});\n\t},\n\t\"show-formulas\": function(){\n\t\treturn ui.toggleButton({name: \"show-formulas\"});\n\t},\n\t\"print-borders\": function(){\n\t\treturn ui.toggleButton({name: \"print-borders\", icon:\"borders-no\"});\n\t}\n};","import {ui, buttonsMap} from \"./buttons\";\n\nexport function toolbarButtons(view,structure){\n\tvar checkButtons = function(cells){\n\t\tfor(var i =0; i < cells.length; i++){\n\t\t\tvar name = cells[i].$button;\n\t\t\tif (name){\n\t\t\t\tvar base = buttonsMap[name] ? buttonsMap[name](view) : ui.iconButton({name:name});\n\t\t\t\twebix.extend(cells[i], base);\n\t\t\t}\n\t\t\t\n\t\t\tif(cells[i].rows)\n\t\t\t\tcheckButtons(cells[i].rows);\n\t\t\tif(cells[i].cols)\n\t\t\t\tcheckButtons(cells[i].cols);\n\t\t}\n\t};\n\tcheckButtons(structure);\n\treturn structure;\n}\n\nexport function getButtons(view,structure){\n\tvar config = [];\n\tfor(var block in structure){\n\t\tconfig.push(elementsBlock(view, block, structure[block]));\n\t\tconfig.push(ui.separator());\n\t}\n\treturn config;\n}\n\nfunction blockColumns(view, buttons){\n\tvar cols = [];\n\tfor(var i =0; i < buttons.length; i++){\n\t\tlet name = buttons[i];\n\t\tif(typeof name == \"object\"){\n\t\t\tcols.push(name);\n\t\t}\n\t\telse {\n\t\t\tvar base = buttonsMap[name] ? buttonsMap[name](view) : ui.iconButton({name:name});\n\t\t\tcols.push(base);\n\t\t}\n\t}\n\treturn cols;\n}\n\n\nfunction elementsBlock(view, name, columns){\n\tvar block = {\n\t\trows:[\n\t\t\t{\n\t\t\t\tpadding:2,\n\t\t\t\tcols:[{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols: blockColumns(view, columns)\n\t\t\t\t}]\n\t\t\t},\n\t\t\tui.title({title:name})\n\t\t]\n\t};\n\treturn block;\n}","import {toolbarSizes} from \"./defaults\";\n\nfunction getText(text){\n\tvar locale = webix.i18n.spreadsheet;\n\treturn locale.menus[text] || locale.labels[text] || locale.tooltips[text] || text;\n}\nfunction calcButtons(){\n\tvar i, name, width,\n\t\tgroups = {\n\t\t\t\"undo\":[\"undo\",\"redo\"],\n\t\t\t\"insert\":[\"add-sparkline\",\"add-image\",\"add-comment\"]\n\t\t},\n\t\tresult = {};\n\n\tfor( name in groups){\n\t\tresult[name] = 0;\n\t\tfor(i=0; i < groups[name].length; i++){\n\t\t\twidth = webix.html.getTextSize(getText(groups[name][i]), \"webix_ssheet_button_measure\").width + 7;\n\t\t\tresult[name] = Math.max(width,result[name]);\n\t\t}\n\t}\n\treturn result;\n}\nexport function getAllElements(readonly){\n\tconst sizes = calcButtons();\n\tconst titleHeight = toolbarSizes.titleHeight;\n\n\tif(readonly)\n\t\treturn [\n\t\t\t{\n\t\t\t\tpadding: 3,\n\t\t\t\tmargin: 0,\n\t\t\t\trows: [\n\t\t\t\t\t{\n\t\t\t\t\t\tmargin: 2,\n\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t{$button: \"excel-export\"},\n\t\t\t\t\t\t\t{$button: \"print\"},\n\t\t\t\t\t\t\t{$button: \"print-borders\"}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{template: getText(\"file\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{view: \"ssheet-separator\"},\n\t\t\t{\n\t\t\t\tpadding: 3,\n\t\t\t\tmargin: 0,\n\t\t\t\trows: [\n\t\t\t\t\t{\n\t\t\t\t\t\tmargin: 2,\n\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t{$button:\"hide-gridlines\"},\n\t\t\t\t\t\t\t{$button:\"hide-headers\"},\n\t\t\t\t\t\t\t{$button:\"show-formulas\"}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{template: getText(\"view\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{view: \"ssheet-separator\"},\n\t\t\t{}\n\t\t];\n\n\treturn [\n\t\t{\n\t\t\tpadding: 3,\n\t\t\tmargin: 0,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"sheet\", view: \"ssheet-button-icon-top\", label: getText(\"sheet\"), arrow: true,\n\t\t\t\t\t\t\toptions:[\n\t\t\t\t\t\t\t\t{id: \"new-sheet\"},\n\t\t\t\t\t\t\t\t{id: \"copy-sheet\"},\n\t\t\t\t\t\t\t\t{id: \"remove-sheet\"},\n\t\t\t\t\t\t\t\t{id: \"hide-sheet\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button: \"excel-import\"},\n\t\t\t\t\t\t\t\t{$button: \"excel-export\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button: \"print\"},\n\t\t\t\t\t\t\t\t{$button: \"print-borders\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{template: getText(\"file\"), view: \"ssheet-bar-title\", height: titleHeight, width: 85}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{$button: \"undo\", view: \"ssheet-button\", label: getText(\"undo\"), width: sizes.undo },\n\t\t\t\t{$button: \"redo\", view: \"ssheet-button\", label: getText(\"redo\"), width: sizes.undo},\n\t\t\t\t{template: getText(\"undo-redo\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmargin: 2,\n\t\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t\t{$button: \"font-family\", width: (webix.skin.$active.inputHeight+2)*4+6},\n\t\t\t\t\t\t\t\t{$button: \"font-size\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{$button: \"borders\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmargin: 2,\n\t\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t\t{$button: \"font-weight\"},\n\t\t\t\t\t\t\t\t{$button: \"font-style\"},\n\t\t\t\t\t\t\t\t{$button: \"underline\"},\n\t\t\t\t\t\t\t\t{$button: \"strike\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t{$button: \"background\"},\n\t\t\t\t\t\t{$button: \"color\"}\n\t\t\t\t\t]\n\n\t\t\t\t},\n\t\t\t\t{template: getText(\"font\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{$button: \"text-align\"},\n\t\t\t\t\t\t{$button: \"span\"},\n\t\t\t\t\t\t{$button: \"increase-indent\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{$button: \"vertical-align\"},\n\t\t\t\t\t\t{$button: \"wrap\"},\n\t\t\t\t\t\t{$button: \"decrease-indent\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{template: getText(\"align\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{$button: \"format\"},\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{$button: \"increase-decimals\"},\n\t\t\t\t\t\t{$button: \"decrease-decimals\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\n\t\t\t\t{template: getText(\"number\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{cols:[\n\t\t\t\t\t{ $button: \"sort-asc\"},\n\t\t\t\t\t{ $button: \"create-filter\"},\n\t\t\t\t\t{ $button: \"conditional-format\"},\n\t\t\t\t\t{ $button: \"add-link\"},\n\t\t\t\t\t{ $button: \"clear\"}\n\t\t\t\t]},\n\t\t\t\t{cols:[\n\t\t\t\t\t{ $button: \"sort-desc\"},\n\t\t\t\t\t{ $button: \"add-range\"},\n\t\t\t\t\t{ $button: \"lock-cell\"},\n\t\t\t\t\t{ $button: \"add-dropdown\"},\n\t\t\t\t\t{ $button:\"validation\" }\n\t\t\t\t]},\n\t\t\t\t{template: getText(\"edit\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{cols:[\n\t\t\t\t\t{$button: \"image\", view: \"ssheet-button\", label: getText(\"image\"), width:sizes.insert},\n\t\t\t\t\t{$button: \"add-comment\", view: \"ssheet-button\", label: getText(\"comment\"), width:sizes.insert},\n\t\t\t\t]},\n\t\t\t\t{cols:[\n\t\t\t\t\t{$button: \"graph\", view: \"ssheet-button\", label: getText(\"graph\"), width:sizes.insert},\n\t\t\t\t\t{$button: \"controls\", view: \"ssheet-button\", label: getText(\"controls\"), width:sizes.insert},\n\t\t\t\t]},\n\t\t\t\t{template: getText(\"insert\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{rows:[\n\t\t\t\t\t\t\t{$button:\"row\"},\n\t\t\t\t\t\t\t{$button:\"column\"}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button:\"hide-gridlines\"},\n\t\t\t\t\t\t\t\t{$button:\"hide-headers\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button:\"freeze-rows\"},\n\t\t\t\t\t\t\t\t{$button:\"freeze-columns\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button:\"show-formulas\"},\n\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{template: getText(\"view\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{}\n\t];\n}","import {actions} from \"./toolbar/actions\";\nimport {defaultStyles} from \"./toolbar/defaults\";\nimport {toolbarButtons, getButtons} from \"./toolbar/helpers\";\nimport * as elm from \"./toolbar/all_elements\";\nimport {isCustom} from \"./operations/formats\";\nimport {getStyle, getFormat} from \"./operations/styles\";\n\nconst buttons = {\n\t\"undo-redo\": [\"undo\",\"redo\"],\n\t\"font\": [\"font-family\",\"font-size\",\"font-weight\",\"font-style\",\"underline\",\"strike\",\"color\",\"background\",\"borders\"],\n\t\"align\": [\"text-align\",\"vertical-align\",\"wrap\",\"span\",\"increase-indent\",\"decrease-indent\"],\n\t\"format\": [\"format\"]\n};\n\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\tview.attachEvent(\"onCommand\", (action) => {\n\t\tif (action.id == \"toolbar-update\"){\n\t\t\tif(action.name)\n\t\t\t\tupdateValue(view, action.name, action.value);\n\t\t\telse\n\t\t\t\tsetValues(view, view.getSelectedId(true));\n\t\t}\n\t});\n\n\tlet elements = [];\n\n\tif(view.config.toolbar){\n\t\tlet allElements =  view.config.toolbar;\n\t\tif(allElements == \"full\"){\n\t\t\tallElements = elm.getAllElements(view.config.readonly);\n\t\t\tif(webix.isUndefined(view.config.bottombar))\n\t\t\t\tview.config.bottombar = true;\n\t\t}\n\t\telements =   toolbarButtons(view, allElements);\n\t}\n\telse\n\t\telements =   getButtons(view, view.config.buttons || buttons);\n\n\tconst bar = {\n\t\tview: webix.env.$customScroll ? \"scrollview\" : \"ssheet-toolbar-scrollview\",\n\t\tscroll: \"x\",\n\t\tbody: {\n\t\t\tview:\"toolbar\",\n\t\t\tcss: \"webix_ssheet_toolbar webix_layout_toolbar\",\n\t\t\tid:\"bar\",\n\t\t\tpadding:0,\n\t\t\telements,\n\t\t\ton: {\n\t\t\t\tonChange: function (value, old, config){\n\t\t\t\t\tif(config == \"user\"){\n\t\t\t\t\t\tconst source = this.$eventSource;\n\t\t\t\t\t\tconst name = source.config.name;\n\t\t\t\t\t\tif(name == \"format\" && value == \"common\")\n\t\t\t\t\t\t\tvalue = \"\";\n\n\t\t\t\t\t\tconst size = name == \"font-size\";\n\t\t\t\t\t\tif((size || name == \"font-family\") && (!value || (size && isNaN(value))))\n\t\t\t\t\t\t\treturn source.setValue(old);\n\t\t\t\t\t\telse if(size){\n\t\t\t\t\t\t\tconst maxSize = Math.floor(400 / 0.75); // 400 pt - max excel font size; divide 0.75 - pt to px conversion\n\t\t\t\t\t\t\tconst limited = Math.max(1, Math.min(maxSize, value));\n\t\t\t\t\t\t\tif (limited != value){\n\t\t\t\t\t\t\t\tvalue = limited;\n\t\t\t\t\t\t\t\tsource.setValue(value);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvalue += \"px\";\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tif(!(name == \"format\" && value == \"custom\"))\n\t\t\t\t\t\t\tview.callEvent(\"onStyleSet\", [name, value]);\n\n\t\t\t\t\t\twebix.UIManager.setFocus(view.$$(\"cells\"));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonItemClick: function (id){\n\t\t\t\t\tvar viewId = view.innerId(id);\n\t\t\t\t\tif (actions[viewId])\n\t\t\t\t\t\tactions[viewId].call(this, view);\n\t\t\t\t\telse\n\t\t\t\t\t\tview.callEvent(\"onCommand\", [{ id: viewId }]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"toolbar\", bar]);\n\treturn bar;\n\n}\n\nfunction ready(view){\n\tview.attachEvent(\"onAfterSelect\", (selected) => setValues(view, selected));\n}\n\nfunction setValues(view, selected) {\n\tconst barStyles = getBarStyles(view, selected);\n\tview.$$(\"bar\").setValues(barStyles);\n}\n\nfunction updateValue(view, name, value){\n\tconst element = view.$$(\"bar\").elements[name];\n\n\tif (element)\n\t\telement.setValue(value);\n}\n\nfunction getBarStyles(view, selected){\n\tconst dropdowns = [\n\t\t\"font-family\",\n\t\t\"font-size\",\n\t\t\"text-align\",\n\t\t\"vertical-align\",\n\t\t\"format\",\n\t\t\"background\",\n\t\t\"color\"\n\t];\n\n\tconst cell = selected[0];\n\tconst barStyles = getCellStyles(view, cell);\n\n\tfor(let i = 1; i < selected.length; i++){\n\t\tconst cellStyle = getCellStyles(view, selected[i]);\n\n\t\tfor(let k = dropdowns.length-1; k >= 0; k--){\n\t\t\tconst property = dropdowns[k];\n\t\t\tif(barStyles[property] != cellStyle[property]){\n\t\t\t\tdelete barStyles[property];\n\t\t\t\tdropdowns.splice(k, 1);\n\t\t\t}\n\t\t}\n\n\t\tif(!dropdowns.length)\n\t\t\tbreak;\n\t}\n\n\treturn barStyles;\n}\n\nfunction getCellStyles(view, cell){\n\tconst span = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\tif(span)\n\t\t[cell.row, cell.column] = span;\n\n\tconst obj = getStyle(view, cell);\n\tconst styles = obj ? webix.copy(obj.props) : {};\n\n\tfor (let i in defaultStyles)\n\t\tif(!styles[i])\n\t\t\tstyles[i] = defaultStyles[i];\n\n\tstyles[\"font-size\"] = styles[\"font-size\"].replace(\"px\", \"\");\n\n\tconst format = getFormat(view, cell.row, cell.column) || \"common\";\n\tstyles.format = isCustom(format) ? \"custom\" : format;\n\n\treturn styles;\n}\n","import {getTextSize} from \"./styles\";\nimport {toRange} from \"../helpers/column_names\";\n\nexport function selectRow(row, view, endRow){\n\tvar columns = view.$$(\"cells\").config.columns;\n\tvar firstColumn = columns[0].id == \"rowId\" ? 1 : 0;\n\n\tvar start = {\n\t\trow:row,\n\t\tcolumn:columns[firstColumn].id\n\t};\n\tvar last = {\n\t\trow: (endRow || row),\n\t\tcolumn: columns[columns.length-1].id\n\t};\n\n\tif(start.column && last.column)\n\t\t_selectRange(start, last, view);\n}\n\nexport function selectAll(view){\n\tvar order = view.$$(\"cells\").data.order;\n\tvar columns = view.$$(\"cells\").config.columns;\n\tvar firstColumn = columns[0].id == \"rowId\" ? 1 : 0;\n\n\tvar start = {\n\t\trow: order[0],\n\t\tcolumn: columns[firstColumn].id\n\t};\n\tvar last = {\n\t\trow: order[order.length-1],\n\t\tcolumn: columns[columns.length-1].id\n\t};\n\n\tif(start.column && last.column)\n\t\t_selectRange(start, last, view);\n}\n\nexport function selectColumn(column, view, endColumn){\n\tvar order = view.$$(\"cells\").data.order;\n\tvar startRow = order[0];\n\tvar lastRow = order[order.length-1];\n\n\tvar start = {row: startRow, column: column};\n\tvar last = {row: lastRow, column: (endColumn || column) };\n\n\t_selectRange(start, last, view);\n}\n\nexport function isColSelected(column, view){\n\tconst selectedArea = view.$$(\"cells\").getSelectArea();\n\tif (selectedArea){\n\t\tif (column >= selectedArea.start.column && column <= selectedArea.end.column)\n\t\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport function isCellSelected(row, column, view){\n\treturn isRowSelected(row, view) && isColSelected(column, view);\n}\n\nexport function isRowSelected(row, view){\n\tconst selectedArea = view.$$(\"cells\").getSelectArea();\n\tif (selectedArea){\n\t\tif (row >= selectedArea.start.row && row <= selectedArea.end.row)\n\t\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport function selectColumns(column, view) {\n\tconst selectedArea = view.$$(\"cells\").getSelectArea();\n\n\tif (!selectedArea)\n\t\tselectColumn(column, view);\n\telse {\n\t\tlet col1 = Math.min(selectedArea.start.column, selectedArea.end.column, column);\n\t\tlet col2 = Math.max(selectedArea.start.column, selectedArea.end.column, column);\n\t\tselectColumn(col1, view, col2);\n\t}\n}\n\nfunction _selectRange(a, b, view){\n\tview.$$(\"cells\").addSelectArea(a, b);\n}\n\n\nexport function adjustColumn(column, view) {\n\tconst grid = view.$$(\"cells\");\n\tlet width = 0;\n\tconst columnWidth = grid.getColumnConfig(column).width;\n\n\tgrid.eachRow(function(row) {\n\t\tlet currentWidth = 25;\n\t\tconst span = grid.getSpan(row, column);\n\t\tif(span && span[2] > 1)\n\t\t\treturn;\n\n\t\tconst value = view.getCellValue(row, column);\n\t\tconst text = this.getText(row, column);\n\t\tconst style = view.getStyle(row, column);\n\t\tconst css = style ? style.id : \"\";\n\n\t\tif (text.replace(/<\\/?[^>]+(>|$)/g, \"\")) {\n\t\t\tconst size = getTextSize(view, text, css);\n\t\t\tcurrentWidth = size.width;\n\t\t}\n\n\t\tconst zoom = view._zoom;\n\t\tif(view.getCellEditor(row, column))\n\t\t\tcurrentWidth += 18 * zoom;\n\t\tif(view.getCellFilter(row, column))\n\t\t\tcurrentWidth += 18 * zoom;\n\t\tif(/^=(checkbox|radio)\\(/i.test(value))\n\t\t\tcurrentWidth += 18 * zoom;\n\t\tif(style && style.props.wrap == \"wrap\" && currentWidth > columnWidth)\n\t\t\tcurrentWidth = columnWidth;\n\t\tif (currentWidth > width)\n\t\t\twidth = currentWidth;\n\t});\n\n\tgrid.setColumnWidth(column, width);\n}\n\nexport function adjustRow(row, view) {\n\tlet height = 25;\n\n\tview._table.eachColumn(function(column) {\n\t\tif(column != \"rowId\"){\n\t\t\tconst text = this.getText(row, column);\n\n\t\t\t// if there is text wrap in cell we need to know width to get correct height\n\t\t\tlet width = this.getColumnConfig(column).width;\n\t\t\tconst span = view._table.getSpan(row, column);\n\t\t\tif(span)\n\t\t\t\twidth = view._table.getSpanNode({row:span[0], column:span[1]}).offsetWidth;\n\n\t\t\tlet style = view.getStyle(row, column);\n\t\t\tlet css = style ? style.id : \"\";\n\n\t\t\tif (text.replace(/<\\/?[^>]+(>|$)/g, \"\")) {\n\t\t\t\tlet size = getTextSize(view, text, css, width);\n\t\t\t\tif (size.height > height) height = size.height;\n\t\t\t}\n\t\t}\n\t});\n\tview._table.setRowHeight(row, height);\n}\n\nexport function highlightColRow(start, end, view){\n\tif(!view._table.config.header) return;\n\n\tconst grid = view._table;\n\n\tconst css = \"webix_highlight\";\n\n\tlet sr = start.row, er = end.row, sc = start.column, ec = end.column;\n\n\tconst columns = grid.config.columns;\n\tconst firstColumn = columns[1].id;\n\n\tif(sc == \"rowId\"){\n\t\tif(sc == ec){\n\t\t\tstart.column = sc = firstColumn;\n\t\t\tend.column = ec = columns[ columns.length-1 ].id;\n\t\t}\n\t\telse\n\t\t\tstart.column = sc = firstColumn;\n\t}\n\telse if(ec == \"rowId\")\n\t\tend.column = ec = firstColumn;\n\n\tif(er<sr) [sr, er] = [er, sr];\n\tif(ec<sc) [sc, ec] = [ec, sc];\n\n\tgrid.eachRow(function(row){\n\t\tif(row < sr || row > er)\n\t\t\tgrid.removeCellCss(row, \"rowId\", css, true);\n\t\telse\n\t\t\tgrid.addCellCss(row, \"rowId\", css, true);\n\t});\n\twebix.delay(() => grid.refresh());\n\n\tgrid.eachColumn(function(col){\n\t\tconst node = grid.getHeaderNode(col);\n\t\tif(col == \"rowId\" || !node) return;\n\n\t\tif(col < sc || col > ec)\n\t\t\twebix.html.removeCss(node, css);\n\t\telse\n\t\t\twebix.html.addCss(node, css, true);\n\t});\n\n\tif(view.$$(\"navigation\")){\n\t\tlet range = \"\";\n\n\t\tif(sc && ec){\n\t\t\tif(!sr){\n\t\t\t\tconst order = grid.data.order;\n\t\t\t\tsr = order[0];\n\t\t\t\ter = order[order.length-1];\n\t\t\t}\n\t\t\trange = toRange(sr, sc, er, ec);\n\t\t\tconst cells = range.split(\":\");\n\t\t\tif(cells[0] == cells[1])\n\t\t\t\trange = cells[0];\n\t\t}\n\n\t\tview.$$(\"navigation\").setValue(range);\n\t}\n}","import {isDateInvalid} from \"../operations/formats\";\n\nfunction getText(text){\n\tvar locale = webix.i18n.spreadsheet.labels;\n\treturn locale[text] || text;\n}\nexport function getDefaultStyles(){\n\treturn [\n\t\t{name: getText(\"normal\"), css: \"webix_ssheet_condition_regular\"},\n\t\t{name: getText(\"neutral\"), css: \"webix_ssheet_condition_neutral\"},\n\t\t{name: getText(\"bad\"), css: \"webix_ssheet_condition_bad\"},\n\t\t{name: getText(\"good\"), css: \"webix_ssheet_condition_good\"}\n\t];\n}\n\nfunction isDate(value){\n\treturn value && !isNaN(value) && !isDateInvalid(value);\n}\n\nexport const conditions = {\n\tnumber:[\n\t\t{ id:\"greater\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 > b*1);\n\t\t}},\n\t\t{ id:\"less\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 < b*1);\n\t\t}},\n\t\t{ id:\"greaterOrEqual\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 >= b*1);\n\t\t}},\n\t\t{ id:\"lessOrEqual\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 <= b*1);\n\t\t}},\n\t\t{ id:\"equal\", batch:\"text\", handler:function(a,b){ return a == b; }},\n\t\t{ id:\"notEqual\", batch:\"text\", handler:function(a,b){ return a != b; }},\n\t\t{ id:\"contains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) !== -1;\n\t\t}},\n\t\t{ id:\"notContains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) === -1;\n\t\t}}\n\t],\n\ttext: [\n\t\t{ id:\"contains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) !== -1;\n\t\t}},\n\t\t{ id:\"notContains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) === -1;\n\t\t}},\n\t\t{ id:\"equal\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase() === b.toString().toLowerCase();\n\t\t}},\n\t\t{ id:\"notEqual\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase() !== b.toString().toLowerCase();\n\t\t}},\n\t\t{ id:\"beginsWith\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().lastIndexOf(b.toString().toLowerCase(), 0) === 0;\n\t\t}},\n\t\t{ id:\"notBeginsWith\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().lastIndexOf(b.toString().toLowerCase(), 0) !== 0;\n\t\t}},\n\t\t{ id:\"endsWith\", batch:\"text\", handler:function(a,b){\n\t\t\ta = a.toString();\n\t\t\tb = b.toString();\n\t\t\treturn a.toLowerCase().indexOf(b.toLowerCase(), a.length - b.length) !== -1;\n\t\t}},\n\t\t{ id:\"notEndsWith\", batch:\"text\", handler:function(a,b){\n\t\t\ta = a.toString();\n\t\t\tb = b.toString();\n\t\t\treturn a.toLowerCase().indexOf(b.toLowerCase(), a.length - b.length) === -1;\n\t\t}}\n\t],\n\tdate: [\n\t\t{ id:\"greater\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a > b;\n\t\t}},\n\t\t{ id:\"less\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a < b;\n\t\t}},\n\t\t{ id:\"greaterOrEqual\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a >= b;\n\t\t}},\n\t\t{ id:\"lessOrEqual\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a <= b;\n\t\t}},\n\t\t{ id:\"equal\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a == b;\n\t\t}},\n\t\t{ id:\"notEqual\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn !isDate(a) || a != b;\n\t\t}},\n\t\t{ id:\"between\", batch: \"daterangepicker\", handler: function(a, b){\n\t\t\tif (!isDate(a)) return false;\n\t\t\treturn (!b.start || a > b.start) && (!b.end || a < b.end);\n\t\t}},\n\t\t{ id:\"notBetween\", batch: \"daterangepicker\", handler: function(a, b){\n\t\t\tif (!isDate(a)) return false;\n\t\t\treturn (!b.start || a <= b.start) || (!b.end || a >= b.end);\n\t\t}}\n\t]\n};\n\nexport const validationConditions = webix.copy(conditions);\nvalidationConditions.textLength = [\n\t{ id:\"greater\", handler: (a,b) => a.toString().length > b },\n\t{ id:\"less\", handler: (a,b) => a.toString().length < b },\n\t{ id:\"greaterOrEqual\", handler: (a,b) => a.toString().length >= b },\n\t{ id:\"lessOrEqual\", handler: (a,b) => a.toString().length <= b },\n\t{ id:\"equal\", handler: (a,b) => a.toString().length == b },\n\t{ id:\"notEqual\", handler: (a,b) => a.toString().length != b }\n];\nvalidationConditions.number = validationConditions.number.concat([\n\t{ id:\"between\", handler: function(a, b){\n\t\treturn (!b.start || a > b.start) && (!b.end || a < b.end);\n\t}},\n\t{ id:\"notBetween\", handler: function(a, b){\n\t\treturn (!b.start || a <= b.start) || (!b.end || a >= b.end);\n\t}}\n]);","import group from \"./undo_group\";\nimport {eachRange} from \"../helpers/column_names\";\nimport {setSpanCss} from \"./spans\";\nimport {conditions} from \"../helpers/conditional\";\nimport {getType} from \"./types\";\nimport * as arr from \"../helpers/array\";\nimport {getSheet} from \"../sheets\";\n\nexport function init(view){\n\tview.conditions = {\n\t\t_empty:true,\n\t\t_pull: {},\n\t\thandlers: createRules(),\n\t\tadd: function(r, c, cond, val, style, page){\n\t\t\tadd.apply(this, [view, r, c, cond, val, style, page]);\n\t\t},\n\t\tupdate: function(r, c, data, page){\n\t\t\tupdate.apply(this, [view, r, c, data, page]);\n\t\t},\n\t\tremove: function(r, c, page){\n\t\t\tremove.apply(this, [view, r, c, page]);\n\t\t},\n\t\tget: function(r, c, page){\n\t\t\treturn get.apply(this, [view, r, c, page]);\n\t\t},\n\t\tparse: function(data, page){\n\t\t\tparse.apply(this, [view, data, page]);\n\t\t},\n\t\tserialize: function(page){\n\t\t\treturn serialize.apply(this, [view, page]);\n\t\t},\n\t\tclear: function(page){\n\t\t\tclear.apply(this, [view, page]);\n\t\t}\n\t};\n\n\tview.attachEvent(\"onConditionSet\", (data) => _setCondition(view, data));\n\n\tview.attachEvent(\"onUndo\", (type_action, row, column, value) => {\n\t\tif(type_action == \"condition\")\n\t\t\t_undoCondition(view, row, column, value);\n\t});\n\n\tview.attachEvent(\"onDataSerialize\", (data) => _serialize(view, data));\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\n\tview.attachEvent(\"onReset\", () => view.conditions.clear() );\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n\n\treset(view);\n}\n\nfunction createRules(){\n\tconst rules = webix.copy(conditions);\n\trules.number = rules.number.concat([\n\t\t{ id:\"between\", handler: function(a, b){\n\t\t\treturn (!b.start || a > b.start) && (!b.end || a < b.end);\n\t\t}},\n\t\t{ id:\"notBetween\", handler: function(a, b){\n\t\t\treturn (!b.start || a <= b.start) || (!b.end || a >= b.end);\n\t\t}}\n\t]);\n\treturn rules;\n}\n\nfunction getCellValue(view, value){\n\tif(isNaN(value*1)){\n\t\tif (value.charAt(0) == \"=\" && value.length > 1){\n\t\t\tvalue = view._mData.getStore().exec(value.substring(1), view._mPage.getContext());\n\t\t\tif(value === null)\n\t\t\t\tvalue = \"\";\n\t\t}\n\t}\n\telse {\n\t\tvalue = value*1;\n\t}\n\treturn value;\n}\n\nfunction reset(view){\n\tview.conditions.clear();\n}\n\nfunction _setCondition(view, data){\n\tgroup.set(function(){\n\t\tview.eachSelectedCell((cell) => {\n\t\t\tconst collection = view.conditions.get(cell.row, cell.column);\n\t\t\tif(collection)\n\t\t\t\tfor (let i = 0; i < collection.length; i++)\n\t\t\t\t\tsetSpanCss(view, cell.row, cell.column, collection[i][2], false);\n\t\t\t_changeCondition(\"update\", cell.row, cell.column, (collection||null), data, view);\n\t\t});\n\t});\n\tview.refresh();\n}\n\nfunction _undoCondition(view, row, column, value){\n\tif(view.conditions.get(row, column))\n\t\tview.conditions.remove(row, column);\n\tif(value)\n\t\tview.conditions.update(row, column, value);\n}\n\nfunction _serialize(view, obj){\n\tobj.conditions = view.conditions.serialize();\n}\n\nfunction _parse(view, obj){\n\tview.conditions.parse(obj.conditions);\n}\n\nexport function getConditionCss(view, row, column, rendered){\n\tlet css = \"\";\n\n\tif (!view.conditions._empty){\n\t\tconst collection = view.conditions.get(row, column);\n\t\tif(collection){\n\t\t\tconst span = view.$$(\"cells\").getSpan(row, column);\n\t\t\tlet value = view.getCellValue(row,column,false);\n\t\t\tif(!value && value !== 0)\n\t\t\t\tvalue = \"\";\n\n\t\t\tlet type = getType(view, row, column);\n\t\t\tif(!type || type == \"string\")\n\t\t\t\ttype = \"text\";\n\n\t\t\tfor (let i = collection.length - 1; i >= 0; i--){\n\t\t\t\tlet currentValue = value;\n\t\t\t\tconst rule = collection[i][0];\n\t\t\t\tconst handlers = view.conditions.handlers;\n\t\t\t\tlet handler;\n\n\t\t\t\tlet checkOrder = [\"text\", type, \"number\", \"date\"];\n\t\t\t\tcheckOrder = checkOrder.filter((v, i) => checkOrder.indexOf(v) == i);\n\n\t\t\t\tfor(let k = 0; k < checkOrder.length; k++){\n\t\t\t\t\tconst checkType = checkOrder[k];\n\n\t\t\t\t\thandler = arr.find(handlers[checkType], obj => obj.id == rule);\n\t\t\t\t\tif(handler){\n\t\t\t\t\t\thandler = handler.handler;\n\t\t\t\t\t\tif(checkType == \"text\" && rule != \"equal\" && rule != \"notEqual\")\n\t\t\t\t\t\t\tcurrentValue = rendered;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet compare = collection[i][1];\n\t\t\t\tif(webix.isArray(compare))\n\t\t\t\t\tcompare = {\n\t\t\t\t\t\tstart: getCellValue(view, compare[0]),\n\t\t\t\t\t\tend: getCellValue(view, compare[1])\n\t\t\t\t\t};\n\t\t\t\telse\n\t\t\t\t\tcompare = getCellValue(view, compare);\n\n\t\t\t\tif(!css && handler && handler(currentValue, compare)){\n\t\t\t\t\tcss = collection[i][2];\n\t\t\t\t\tif(!span)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tsetSpanCss(view, row, column, collection[i][2], true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tsetSpanCss(view, row, column, collection[i][2], false);\n\t\t\t}\n\t\t}\n\t}\n\treturn css;\n}\n\n\nfunction addEmptyCollection(pull, row, column, state){\n\tstate._empty = false;\n\tif(!pull[row])\n\t\tpull[row] = {};\n\tif(!pull[row][column])\n\t\tpull[row][column] = [];\n\treturn pull[row][column];\n}\n\n\nfunction parse(view, data, page){\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet)\n\t\t\tsheet.content.conditions = data;\n\t}\n\telse{\n\t\t//backward compatibility\n\t\tconst oldConditions = {\n\t\t\t\">\": \"greater\",\n\t\t\t\"<\": \"less\",\n\t\t\t\"=\": \"equal\",\n\t\t\t\"!=\": \"notEqual\",\n\t\t\t\"<>\": \"between\"\n\t\t};\n\n\t\tthis._empty = true;\n\t\tif (!data) return;\n\n\t\tlet i = data.length;\n\t\twhile(i--){\n\t\t\tconst c = data[i];\n\t\t\tconst collection = addEmptyCollection(this._pull,c[0],c[1],this);\n\t\t\tc[2] = oldConditions[ c[2] ] || c[2];\n\t\t\tcollection.push([c[2],c[3],c[4]]);\n\t\t}\n\t}\n}\n\nfunction clear(view, page){\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet)\n\t\t\tsheet.content.conditions = [];\n\t}\n\telse\n\t\tthis._pull = {};\n}\n\nfunction update(view, row, column, newData, page){\n\tnewData.map(item => _normalizeValue(view, item));\n\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tremove(view, row, column, page);\n\n\t\t\tif(!sheet.content.conditions)\n\t\t\t\tsheet.content.conditions = [];\n\n\t\t\tnewData.forEach(condition => {\n\t\t\t\tsheet.content.conditions.push([row, column, ...condition]);\n\t\t\t});\n\t\t}\n\t}\n\telse{\n\t\taddEmptyCollection(this._pull, row, column, this);\n\t\tthis._pull[row][column] = newData;\n\t}\n}\n\nfunction get(view, row, column, page){\n\tlet condition;\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet && sheet.content.conditions){\n\t\t\tconst conditions = webix.copy(sheet.content.conditions);\n\t\t\tlet index;\n\t\t\tlet conditionArr = [];\n\t\t\twhile((index = arr.findIndex(conditions, condition => condition[0] == row && condition[1] == column)) != -1){\n\t\t\t\tconditionArr.push(conditions[index].slice(2,5));\n\t\t\t\tconditions.splice(index, 1);\n\t\t\t}\n\t\t\tif(conditionArr.length)\n\t\t\t\tcondition = conditionArr;\n\t\t}\n\t}\n\telse if(this._pull[row] && this._pull[row][column])\n\t\tcondition = this._pull[row][column] || null;\n\treturn condition || null;\n}\n\nfunction add(view, row, column, condition, value, style, page){\n\tconst newCondition = _normalizeValue(view, [condition, value, style]);\n\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tif(!sheet.content.conditions)\n\t\t\t\tsheet.content.conditions = [];\n\t\t\tsheet.content.conditions.push([row, column, ...newCondition]);\n\t\t}\n\t}\n\telse\n\t\taddEmptyCollection(this._pull, row, column, this).push(newCondition);\n}\n\nfunction remove(view, row, column, page){\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet && sheet.content.conditions){\n\t\t\tlet index;\n\t\t\twhile((index = arr.findIndex(sheet.content.conditions, condition => condition[0] == row && condition[1] == column)) != -1){\n\t\t\t\tsheet.content.conditions.splice(index, 1);\n\t\t\t}\n\t\t}\n\t}\n\telse{\n\t\tconst collection = this.get(row, column);\n\t\tif(collection)\n\t\t\tdelete this._pull[row][column];\n\t}\n}\n\nfunction serialize(view, page){\n\tlet data = [];\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet && sheet.content.conditions)\n\t\t\tdata = sheet.content.conditions;\n\t}\n\telse{\n\t\tfor(let row in this._pull)\n\t\t\tfor(let column in this._pull[row])\n\t\t\t\tfor(let i = 0; i < this._pull[row][column].length; i++){\n\t\t\t\t\tconst condition = this._pull[row][column][i];\n\t\t\t\t\tdata.push([row, column, condition[0], condition[1], condition[2]]);\n\t\t\t\t}\n\t}\n\treturn data;\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet conditions = data.conditions,\n\t\ti = conditions.length;\n\n\tif(inc){\n\t\twhile(i--){\n\t\t\tlet [row,column] = conditions[i];\n\t\t\tif(name == \"row\" && row>= start.row || name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc)\t//delete lock mark if row was deleted\n\t\t\t\t\t\tconditions.splice(i,1);\n\t\t\t\t\telse\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tconditions[i][0] = row*1 + inc;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tconditions.splice(i, 1);\n\t\t\t\t\t} else \n\t\t\t\t\t\tconditions[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function clearConditionalFormats(view, range, page){\n\tgroup.set(function(){\n\t\teachRange(range, view, function(view, cell){\n\t\t\tconst condition = view.conditions.get(cell.row, cell.column, page);\n\t\t\tif(condition)\n\t\t\t\t_changeCondition(\"remove\", cell.row, cell.column, condition, null, view, page);\t\t\t\t\n\t\t});\n\t\tview.refresh();\n\t});\n}\n\nexport function pasteCondition(view, extra, row, col, cutted){\n\tconst condition = extra.condition;\n\tconst collection = view.conditions.get(row,col);\n\t_changeCondition(\"update\", row, col, (collection||null), condition, view);\n\tif(cutted === 1)\n\t\t_changeCondition(\"remove\", extra.row, extra.col, condition, null, view);\n}\n\nexport function _changeCondition(name, row, column, oldCondition, newCondition, view, page){\n\tif (view.callEvent(\"onBeforeConditionSet\", [row, column, oldCondition, newCondition, page])){\n\t\tview.conditions[name].apply(view.conditions, [row, column, name == \"remove\" ? page : newCondition]);\n\t\tview.callEvent(\"onAfterConditionSet\", [row, column, oldCondition, newCondition, page]);\n\t}\n}\n\nfunction _normalizeValue(view, condition){\n\tconst val = condition[1];\n\tif(val[0] == \"=\")\n\t\tcondition[1] = view._mData.getStore().parse(val).source; //fixes formula\n\treturn condition;\n}","import {getSheet} from \"../sheets\";\nimport {findIndex, find} from \"../helpers/array\";\nimport {validationConditions} from \"../helpers/conditional\";\nimport {setSpanCss} from \"./spans\";\nimport {getType} from \"./types\";\nimport group from \"./undo_group\";\n\nexport function init(view){\n\tview.validation = {\n\t\thandlers: webix.copy(validationConditions),\n\t\tget: (row, column, page) => get(view, row, column, page),\n\t\tadd: (row, column, rule, page) => add(view, row, column, rule, false, page),\n\t\tremove: (row, column, page) => remove(view, row, column, false, page),\n\t\thighlight: (state, page) => highlight(view, state, page),\n\t\t_pull:{}\n\t};\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type === \"validation\")\n\t\t\tundo(view, row, column, value);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n\n\tview.attachEvent(\"onCommand\", action => {\n\t\tif(action.id == \"highlight-invalid-data\")\n\t\t\tview.validation.highlight(true);\n\t\telse if(action.id == \"remove-highlight-invalid-data\")\n\t\t\tview.validation.highlight();\n\t\telse if(action.id == \"remove-cell-validation\")\n\t\t\tgroup.set(()=> view.eachSelectedCell(cell => view.validation.remove(cell.row, cell.column)));\n\t});\n\n\tview.attachEvent(\"onDataSerialize\", data => [data.validation, data.table.highlightInvalid] = serialize(view));\n\tview.attachEvent(\"onDataParse\", data => parse(view, data));\n\tview.attachEvent(\"onReset\", () => {\n\t\tview.validation._pull = {};\n\t\tview.validation._highlight = false;\n\t});\n\tview.attachEvent(\"onChange\", ()=> showValidationPopup(view));\n\tview.$$(\"cells\").attachEvent(\"onSelectChange\", () => showValidationPopup(view));\n}\n\nfunction serialize(view){\n\tconst pull = view.validation._pull;\n\tconst data = [];\n\tfor(let row in pull)\n\t\tfor(let column in pull[row])\n\t\t\tdata.push([row, column, pull[row][column]]);\n\treturn [data, view.validation._highlight ? 1 : 0];\n}\n\nfunction parse(view, data){\n\tconst validation = data.validation;\n\tif(validation)\n\t\tfor(let i = 0; i < validation.length; i++){\n\t\t\tconst item = validation[i];\n\t\t\tif(!view.validation._pull[item[0]])\n\t\t\t\tview.validation._pull[item[0]] = {};\n\t\t\tview.validation._pull[item[0]][item[1]] = item[2];\n\t\t}\n\tif(data.table && data.table.highlightInvalid)\n\t\tview.validation._highlight = true;\n\t\n}\n\nfunction get(view, row, column, page){\n\tlet validation;\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet && sheet.content.validation){\n\t\t\tvalidation = find(sheet.content.validation, validation => validation[0] == row && validation[1] == column);\n\t\t\tif(validation)\n\t\t\t\tvalidation = validation[2];\n\t\t}\n\t}\n\telse if(view.validation._pull[row] && view.validation._pull[row][column])\n\t\tvalidation = view.validation._pull[row][column];\n\treturn validation || null;\n}\n\nfunction add(view, row, column, validation, silent, page){\n\tpage = page || view.getActiveSheet();\n\tconst oldValue = get(view, row, column, page);\n\n\tif(page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(!sheet.content.validation)\n\t\t\tsheet.content.validation = [];\n\n\t\tif(oldValue)\n\t\t\tfind(sheet.content.validation, validation => validation[0] == row && validation[1] == column)[2] = validation;\n\t\telse\n\t\t\tsheet.content.validation.push([row, column, validation]);\n\t}\n\telse{\n\t\tif(!view.validation._pull[row])\n\t\t\tview.validation._pull[row] = {};\n\n\t\tview.validation._pull[row][column] = validation;\n\t}\n\n\tif (!silent)\n\t\tview.callEvent(\"onAction\", [\"validation\", {row, column, newValue:validation, value:oldValue, page}]);\n}\n\nfunction highlight(view, state, page){\n\tpage = page || view.getActiveSheet();\n\tif(page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(!sheet.content.table)\n\t\t\tsheet.content.table = {};\n\t\tif(state == \"toggle\")\n\t\t\tstate = !sheet.content.table.highlightInvalid;\n\t\telse\n\t\t\tstate = !!state;\n\t\tsheet.content.table.highlightInvalid = state ? 1 : 0;\n\t}\n\telse{\n\t\tif(state == \"toggle\")\n\t\t\tview.validation._highlight = !view.validation._highlight;\n\t\telse\n\t\t\tview.validation._highlight = !!state;\n\t\tview.refresh();\n\t}\n}\n\nfunction remove(view, row, column, silent, page){\n\tpage = page || view.getActiveSheet();\n\n\tconst old = get(view, row, column, page);\n\tif(old){\n\t\tif(page != view.getActiveSheet()){\n\t\t\tconst validation = getSheet(view, page).content.validation;\n\t\t\tconst index = findIndex(validation, validation => validation[0] == row && validation[1] == column);\n\t\t\tvalidation.splice(index, 1);\n\t\t}\n\t\telse{\n\t\t\tdelete view.validation._pull[row][column];\n\t\t\tview.$$(\"cells\").updateItem(row, column);\n\t\t}\n\t\tif (!silent)\n\t\t\tview.callEvent(\"onAction\", [\"validation\", {row, column, newValue: null, value: old, page}]);\n\t}\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet validation = data.validation,\n\t\ti = validation.length;\n\n\tif(inc){\n\t\twhile(i--){\n\t\t\tlet [row,column] = validation[i];\n\t\t\tif(row && name == \"row\" && row >= start.row || column && name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc)\t//delete rule if row was deleted\n\t\t\t\t\t\tvalidation.splice(i,1);\n\t\t\t\t\telse\t\t\t\t\t\t//update position if upper row was deleted\n\t\t\t\t\t\tvalidation[i][0] = row*1 + inc;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tvalidation.splice(i, 1);\n\t\t\t\t\t} else \n\t\t\t\t\t\tvalidation[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction undo(view, row, column, value){\n\tif(get(view, row, column))\n\t\tremove(view, row, column, true);\n\tif(value)\n\t\tadd(view, row, column, value, true);\n}\n\nfunction reset(view){\n\tview.validation._pull = {};\n}\n\nfunction getCellValue(view, value){\n\tif(isNaN(value*1)){\n\t\tif (value.charAt(0) == \"=\" && value.length > 1){\n\t\t\tvalue = view._mData.getStore().exec(value.substring(1), view._mPage.getContext());\n\t\t\tif(value === null)\n\t\t\t\tvalue = \"\";\n\t\t}\n\t}\n\telse {\n\t\tvalue = value*1;\n\t}\n\treturn value;\n}\n\nexport function isInvalid(view, row, column, rendered, page){\n\tlet invalid = false;\n\tconst rule = view.validation.get(row, column, page);\n\tif(rule){\n\t\tconst type = rule.type;\n\n\t\tlet value;\n\t\tif(!webix.isUndefined(rendered) && (type == \"text\" || type == \"textLength\"))\n\t\t\tvalue = rendered;\n\t\telse\n\t\t\tvalue = view.getCellValue(row, column, false, page);\n\n\t\tif(value === \"\")\n\t\t\treturn !!rule.ignoreEmpty;\n\n\t\tlet compare = rule.value;\n\t\tif(compare){\n\t\t\tif(webix.isArray(compare))\n\t\t\t\tcompare = {\n\t\t\t\t\tstart: getCellValue(view, compare[0]),\n\t\t\t\t\tend: getCellValue(view, compare[1])\n\t\t\t\t};\n\t\t\telse\n\t\t\t\tcompare = getCellValue(view, compare);\n\t\t}\n\n\t\tconst handlers = view.validation.handlers[type];\n\t\tif(handlers){\n\t\t\tconst handler = find(handlers, obj => obj.id == rule.condition).handler;\n\t\t\tif(!handler(value, compare)) invalid = true;\n\t\t}\n\n\t\tif(!invalid)\n\t\t\tswitch(type){\n\t\t\t\tcase \"number\":\n\t\t\t\t\tif(rule.integer && parseInt(value) != value)\n\t\t\t\t\t\tinvalid = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"date\":\n\t\t\t\t\tif(getType(view, row, column, page) != \"date\")\n\t\t\t\t\t\tinvalid = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"range\":\n\t\t\t\t\tif(!(webix.isArray(compare) && compare.indexOf(value) != -1))\n\t\t\t\t\t\tinvalid = true;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t}\n\treturn invalid;\n}\n\nexport function getValidationCss(view, row, column, rendered){\n\tlet css = \"\";\n\n\tif(view.validation._highlight && isInvalid(view, row, column, rendered))\n\t\tcss = \"webix_ss_invalid_data\";\n\n\tconst span = view.$$(\"cells\").getSpan(row, column);\n\tif(span)\n\t\tsetSpanCss(view, row, column, \"webix_ss_invalid_data\", !!css);\n\n\treturn css;\n}\n\nfunction showValidationPopup(view){\n\tif(view._commentSel)\n\t\treturn;\n\n\tlet sel = view.getSelectedId(true);\n\tlet popup = view.validation._inputMessage;\n\tif(!view._context && sel && sel.length == 1){\n\t\tsel = sel[0];\n\t\tconst row = sel.row;\n\t\tconst col = sel.column;\n\n\t\tconst validation = view.validation.get(row, col);\n\t\tif(validation && validation.inputMessage){\n\t\t\tif(!popup){\n\t\t\t\tpopup = view.validation._inputMessage = webix.ui({\n\t\t\t\t\tview: \"popup\",\n\t\t\t\t\tcss: \"ssheet_validation_input_message\",\n\t\t\t\t\tminWidth:150,\n\t\t\t\t\tminHeight:50,\n\t\t\t\t\theight:100,\n\t\t\t\t\twidth:250,\n\t\t\t\t\tresize:true,\n\t\t\t\t\tbody:{\n\t\t\t\t\t\tscroll:\"auto\",\n\t\t\t\t\t\ttemplate: \" \"\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tview._destroy_with_me.push(popup);\n\t\t\t}\n\t\t\tpopup.getBody().setHTML(validation.inputMessage);\n\n\t\t\tconst grid = view.$$(\"cells\");\n\t\t\tconst span = grid.getSpan(row, col);\n\t\t\tconst item = span ? {row, column:(span[1]*1+span[2]-1)} : sel;\n\n\t\t\treturn popup.show(grid.getItemNode(item), {pos: \"bottom\"});\n\t\t}\n\t}\n\tif(popup)\n\t\tpopup.hide();\n}\n\nexport function pasteValidation(view, extra, row, col, cutted){\n\tconst validation = extra.validation;\n\n\tview.validation.add(row, col, validation);\n\tif (cutted === 1)\n\t\tview.validation.remove(extra.row, extra.col);\n}","import {getSheet} from \"../sheets\";\nimport {isCell, adress, range as getRange} from \"../helpers/column_names\";\n\nfunction error(view, silent){\n\tif(!silent)\n\t\tview.alert({\n\t\t\ttype: \"alert-error\",\n\t\t\ttext: webix.i18n.spreadsheet.labels[\"error-link\"]\n\t\t});\n\treturn false;\n}\n\nexport function showCells(view, ref, silent) {\n\ttry {\n\t\tlet r1, r2, c1, c2, sheet;\n\n\t\tlet cellRef = ref.split(\"!\");\n\t\tswitch(cellRef.length){\n\t\t\tcase 1:\n\t\t\t\t[cellRef] = cellRef;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\t[sheet, cellRef] = cellRef;\n\t\t\t\tif(sheet.indexOf(\" \") != -1 && (sheet[0] != \"'\" || sheet[sheet.length - 1] != \"'\"))\n\t\t\t\t\treturn error(view, silent);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn error(view, silent);\n\t\t}\n\n\t\tif(isCell(cellRef))\n\t\t\t[r1, c1] = adress(cellRef);\n\t\telse{\n\t\t\tconst rangePos = getRange(ref, view);\n\t\t\tif(rangePos)\n\t\t\t\t[r1, c1, r2, c2, sheet] = rangePos;\n\t\t\telse\n\t\t\t\treturn error(view, silent);\n\t\t}\n\n\t\tif(sheet){\n\t\t\tsheet = sheet.replaceAll(\"'\", \"\");\n\t\t\tif(!getSheet(view, sheet))\n\t\t\t\treturn error(view, silent);\n\t\t\tif(sheet != view.getActiveSheet())\n\t\t\t\tview.showSheet(sheet);\n\t\t}\n\n\t\tconst grid = view.$$(\"cells\");\n\t\tgrid.showCell(r1, c1);\n\t\tgrid.addSelectArea(\n\t\t\t{ row: r1, column: c1 },\n\t\t\t{ row: r2 || r1, column: c2 || c1 }\n\t\t);\n\n\t\treturn true;\n\t}\n\tcatch(err){\n\t\treturn error(view, silent);\n\t}\n}","import * as cop from \"./operations/column_operations\";\nimport {getConditionCss} from \"./operations/conditional_formats\";\nimport {getValidationCss} from \"./operations/validation\";\nimport * as nms from \"./helpers/column_names\";\nimport * as fmt from \"./operations/formats\";\nimport {showCells} from \"./operations/show_cells\";\nimport {getMathTemplate} from \"./mathematics/methods\";\nimport {getPrintBordersCss} from \"./operations/print\";\n\nexport function init(view, extra){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\tvar datatable = {\n\t\tview:\"datatable\", id:\"cells\", css:\"webix_ssheet_table webix_data_border wss_\"+view.$index,\n\t\theaderRowHeight: webix.skin.$name == \"contrast\" || webix.skin.$name == \"flat\" ? 24 : 20,\n\t\tspans: true,\n\t\tleftSplit: 1,\n\t\tareaselect:true,\n\t\tminColumnWidth:40,\n\t\teditable:true,\n\t\teditaction:(extra.liveEditor ? \"custom\" : \"dblclick\"),\n\t\tminRowHeight:1,\n\t\tnavigation:true,\n\t\tonClick:{ \n\t\t\t\"webix_ssheet_ref\" : event => {\n\t\t\t\tconst ref = event.target.getAttribute(\"data-ref\").replaceAll(\"&#x27;\", \"'\");\n\t\t\t\tif(showCells(view, ref))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\tif (extra)\n\t\tdatatable = webix.extend(datatable, extra, true);\n\n\treturn datatable;\n}\n\nfunction ready(view){\n\tvar grid = view._table;\n\n\tvar showCommentHandler = webix.event(document.body, \"pointermove\", function(){\n\t\tvar thread;\n\t\treturn function(e) {\n\t\t\tif (e.pointerType !== \"mouse\") return;\n\n\t\t\tclearTimeout(thread);\n\t\t\tthread = webix.delay(function(e){\n\t\t\t\tif(view.comments._activeComment.editStatus)\n\t\t\t\t\treturn;\n\n\t\t\t\tvar cell = grid.locate(e);\n\t\t\t\tvar visible = view.comments.commentsView && view.comments.commentsView.isVisible();\n\n\t\t\t\tif(cell && view.comments.get(cell.row, cell.column)){\n\t\t\t\t\tvar activeCell = view.comments._activeComment.cell;\n\t\t\t\t\tif((activeCell && (activeCell.row != cell.row || activeCell.column != cell.column)) || !visible)\n\t\t\t\t\t\tview.callEvent(\"onCommand\",[{id: \"add-comment\", cell, viewonly: true }]);\n\t\t\t\t}\n\t\t\t\telse if(visible && !view.comments.commentsView.$view.contains(e.target))\n\t\t\t\t\tview.callEvent(\"onCommentHide\", []);\n\t\t\t}, true, [e], 250);\n\t\t};\n\t}());\n\n\t//in grid math\n\tif (view.config.math){\n\t\tgrid.config.editMath = true;\n\t}\n\n\t//saving value after edit\n\tgrid.attachEvent(\"onBeforeEditStop\", (st, ed) => {\n\t\tgrid.$anyKey = false;\n\t\tconst old = view.getCellValue(ed.row, ed.column);\n\t\t//ignore empty cells\n\t\tif (old === \"\" && st.value === \"\") return;\n\n\t\tif (st.value != old){\n\t\t\tview.setCellValue(ed.row, ed.column, st.value);\n\t\t\tgrid.refresh();\n\t\t}\n\t\tst.value = st.old;\n\t});\n\n\tgrid.attachEvent(\"onEnter\", function(ev){\n\t\tif (grid.getEditor()){\n\t\t\twebix.delay(function(){\n\t\t\t\tgrid.moveSelection(\"down\");\n\t\t\t});\n\t\t}\n\t\twebix.html.preventEvent(ev);\n\t});\n\n\t//prevent editing of locked cells\n\tview.attachEvent(\"onBeforeEditStart\", (row, column) => !view.isCellLocked(row, column));\n\tgrid.attachEvent(\"onAfterEditStart\", ({row, column}) => {\n\t\tlet v = view.getCellValue(row, column);\n\n\t\tif(grid.$anyKey){\n\t\t\tgrid.$anyKey = false;\n\t\t\tv = \"\";\n\t\t}\n\n\t\tgrid.getEditor().setValue(v);\n\t});\n\tgrid.attachEvent(\"onBeforeEditStart\", (editor) => \n\t\tview.callEvent(\"onBeforeEditStart\", [editor.row, editor.column]) );\n\n\t//column drag event checking\n\tlet dragStartColumn;\n\tlet dragEndColumn;\n\n\t//column and row selection\n\tgrid.attachEvent(\"onBeforeSelect\", (id) => id.column != \"rowId\" );\n\tgrid.attachEvent(\"onBeforeBlockSelect\", (start, end, finalStep) => {\n\t\tcop.highlightColRow(\n\t\t\tfinalStep ? start : webix.copy(start),\n\t\t\tfinalStep ? end : webix.copy(end),\n\t\t\tview\n\t\t);\n\t});\n\n\tfunction highlightHeaders(){\n\t\tlet ids = grid.getSelectedId(true);\n\t\tif(ids.length){\n\t\t\tlet start = ids[0];\n\t\t\tlet end = ids[ids.length-1]?ids[ids.length-1]:ids[0];\n\t\t\tcop.highlightColRow(start, end, view);\n\t\t}\n\t\telse {\n\t\t\tlet data = {row:0, column:0};\n\t\t\tcop.highlightColRow(data, data, view);\n\t\t}\n\t}\n\n\tgrid.attachEvent(\"onSelectChange\", () => highlightHeaders());\n\tgrid.attachEvent(\"onAfterColumnShow\", () => {\n\t\twebix.delay(() => highlightHeaders());\n\t});\n\tgrid.attachEvent(\"onColumnResize\", () => {\n\t\twebix.delay(() => highlightHeaders());\n\t});\n\n\twebix.event(grid.$view.firstChild, \"mousedown\", e => {\n\t\tconst resizeColumn = grid.config.resizeColumn;\n\t\tconst col = grid.locate(e);\n\n\t\tif(col && col.cind){\n\t\t\tif(resizeColumn){\n\t\t\t\tconst dx = grid.getColumnConfig(col.column).width;\n\t\t\t\tconst pos = webix.html.posRelative(e);\n\t\t\t\tif(pos.x < resizeColumn.size || dx-pos.x < resizeColumn.size+1)\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\tdragStartColumn = col.cind;\n\t\t}\n\t});\n\n\twebix.event(grid.$view.firstChild, \"mousemove\", e => {\n\t\tif(dragStartColumn){\n\t\t\tconst col = grid.locate(e);\n\n\t\t\tif(col){\n\t\t\t\tdragEndColumn = col.cind;\n\t\t\t\tcop.highlightColRow(\n\t\t\t\t\t{column: grid.columnId(dragStartColumn)},\n\t\t\t\t\t{column: grid.columnId(dragEndColumn||1)},\n\t\t\t\t\tview\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst selectColumnHandler = webix.event(document.body, \"mouseup\", () => {\n\t\tif(dragStartColumn){\n\t\t\tif(dragEndColumn != null){\n\t\t\t\tcop.selectColumn(\n\t\t\t\t\tgrid.columnId(dragStartColumn),\n\t\t\t\t\tview,\n\t\t\t\t\tgrid.columnId(dragEndColumn||1)\n\t\t\t\t);\n\t\t\t\tdragEndColumn = null;\n\t\t\t}\n\t\t\tdragStartColumn = null;\n\t\t}\n\t});\n\n\tgrid.attachEvent(\"onItemDblClick\", (id) => {\n\t\tif (id.column === \"rowId\")\n\t\t\tcop.adjustRow(id.row, view);\n\t});\n\n\tlet lastHeaderClick = 0;\n\tgrid.attachEvent(\"onHeaderClick\", (id, e) => {\n\t\tif(id.column == \"rowId\"){\n\t\t\tcop.selectAll(view);\n\t\t\treturn;\n\t\t}\n\t\tlet headerClick = new Date();\n\t\tlet dblClick = (headerClick - lastHeaderClick <= 300);\n\n\t\tif (dblClick) {\n\t\t\tcop.adjustColumn(id.column, view);\n\t\t} else {\n\t\t\tlastHeaderClick = headerClick;\n\t\t\tif (e.shiftKey) {\n\t\t\t\tcop.selectColumns(id.column, view);\n\t\t\t} else {\n\t\t\t\tcop.selectColumn(id.column, view);\n\t\t\t}\n\t\t}\n\t});\n\n\t//select rows by shift click\n\tvar lastClickedRow = null;\n\tgrid.attachEvent(\"onItemClick\", (cell, e) => {\n\t\tif (cell.column === \"rowId\") {\n\t\t\tif (!e.shiftKey)\n\t\t\t\tcop.selectRow(cell.row, view);\n\t\t\telse {\n\t\t\t\tif (!lastClickedRow)\n\t\t\t\t\tcop.selectRow(cell.row, view);\n\t\t\t\telse\n\t\t\t\t\tcop.selectRow(lastClickedRow, view, cell.row);\n\t\t\t}\n\t\t\tlastClickedRow = cell.row;\n\t\t}\n\t});\n\n\t//reset API\n\tview.attachEvent(\"onReset\", () => reset(view));\n\n\tview.attachEvent(\"onBeforeSheetShow\", () => grid.editStop());\n\n\tgrid.attachEvent(\"onBlur\", function(){\n\t\t//after focus moved out, check and if it is somewhere\n\t\t//on the spreadsheet controls them move focus back to datatable\n\t\twebix.delay(function(){\n\t\t\tconst target = document.activeElement;\n\n\t\t\tif (target && target.tagName == \"INPUT\") return;\n\n\t\t\tconst focus = webix.UIManager.getFocus();\n\t\t\tconst need_focus = focus &&\n\t\t\t\t!focus.config.saveFocus &&\n\t\t\t\tfocus != grid &&\n\t\t\t\tfocus.getTopParentView &&\n\t\t\t\tfocus.getTopParentView() === view;\n\n\t\t\tif (need_focus)\n\t\t\t\twebix.UIManager.setFocus(grid);\n\n\t\t}, this, [], 100);\n\t});\n\n\tgrid.attachEvent(\"onMoveSelection\", (cell, mode, details) => {\n\t\tif(cell.column == \"rowId\" && mode == \"left\" && details.ctrl)\n\t\t\tcell.column = 1;\n\t});\n\n\tsetDefaultCss(view);\n\n\tview.attachEvent(\"onDestruct\", () => {\n\t\twebix.eventRemove(showCommentHandler);\n\t\twebix.eventRemove(selectColumnHandler);\n\t});\n}\n\nexport function cell_template(view, obj, common, _v, column, valueOnly){\n\tconst formulasMode = view.$$(\"cells\").config.showFormulas && !valueOnly;\n\n\tconst col = column.id;\n\tconst row = obj.id;\n\n\tif (!view._mPage) return \"\";\n\tconst cell = view._mPage.getCell(row-1, col-1);\n\n\tlet value = cell ? cell.value : \"\";\n\tconst format = cell ? cell.format : \"\";\n\n\tconst math = view.getCellValue(row, col);\n\n\tif(formulasMode)\n\t\tvalue = math;\n\n\tif(math != value){\n\t\tconst locale = webix.i18n.spreadsheet.table;\n\t\tif(value == \"#REF!\")\n\t\t\tvalue = locale[\"math-ref-error\"];\n\t\telse if(value == \"#ERROR\")\n\t\t\tvalue = locale[\"math-error\"];\n\t\telse\n\t\t\tvalue = getMathTemplate(math, value);\n\t}\n\n\tlet css = \"\";\n\tconst text = (typeof value == \"string\" && value.trim()[0] == \"+\") || (!value && value !== 0) || isNaN(value);\n\tconst invalidDate = !formulasMode && fmt.checkFormat(format, \"date\") && fmt.isDateInvalid(value);\n\n\tlet extra = \"\";\n\tif (!valueOnly){\n\t\textra += view.comments.get(row, col) ? \"<div class='ssheet_commented_sign'></div>\" : \"\";\n\t\textra += view.getCellFilter(row, col) ? \"<div class='ssheet_filter_sign'></div>\" : \"\";\n\t}\n\n\t//text can be formatted only in case of string number format\n\tif(!invalidDate && (typeof value == \"boolean\" || !text || fmt.checkFormat(format, \"string\"))){\n\t\tif (format){\n\t\t\tconst cell = { css:\"\" };\n\t\t\tconst helper = fmt.getFormat(format);\n\t\t\tif (helper){\n\t\t\t\tlet newValue = helper(value, cell);\n\n\t\t\t\tif(newValue != webix.i18n.spreadsheet.table[\"format-error\"]){\n\t\t\t\t\tif (cell.css)\n\t\t\t\t\t\tcss = `class=\"${cell.css}\"`;\n\t\t\t\t\tvalue = newValue;\n\t\t\t\t}\n\t\t\t\telse if(!text)\n\t\t\t\t\tvalue *= 1;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tvalue *= 1;\n\t}\n\n\t//print only cell values (td with position:relative ignores borders while printing)\n\tif(view._print && !(value || value === 0))\n\t\treturn \"\";\n\n\tif(webix.isUndefined(value) || value === null)\n\t\tvalue = \"\";\n\n\treturn `<div ${css}>${value}</div>${view._print ? \"\" : extra}`;\n}\n\nexport function reset(view){\n\tconst grid = view.$$(\"cells\");\n\tgrid.clearAll();\n\n\tconst columns = view.config.columnCount;\n\tconst rows = view.config.rowCount;\n\n\tconst cols = [{\n\t\tid:\"rowId\",\n\t\theader:\"\",\n\t\twidth:40,\n\t\tcss:\"sheet_column_0\",\n\t\ttemplate:(el) => {\n\t\t\treturn el.id;\n\t\t}\n\t}];\n\n\tfor (let i=1; i<=columns; i++){\n\t\tcols.push({\n\t\t\tid:i,\n\t\t\teditor:\"text\",\n\t\t\theader:{\n\t\t\t\ttext: nms.encode[i]\n\t\t\t},\n\t\t\ttemplate:function(obj, common, value, column){\n\t\t\t\treturn cell_template(view, obj, common, value, column);\n\t\t\t},\n\t\t\tcssFormat:function(value, obj, row, column){\n\t\t\t\tconst rendered = getRenderedValue(view, row, column);\n\t\t\t\tconst cell = view._mPage.getCell(row-1, column-1);\n\n\t\t\t\tlet css = cell ? (cell.style || \"\") : \"\";\n\n\t\t\t\tconst conditional = getConditionCss(view, row, column, rendered);\n\t\t\t\tif(conditional)\n\t\t\t\t\tcss += (css ? \" \" : \"\") + conditional;\n\n\t\t\t\tconst print = getPrintBordersCss(view, row, column);\n\t\t\t\tif(print)\n\t\t\t\t\tcss += (css ? \" \" : \"\") + print;\n\n\t\t\t\tconst validation = getValidationCss(view, row, column, rendered);\n\t\t\t\tif(validation)\n\t\t\t\t\tcss += (css ? \" \" : \"\") + validation;\n\n\t\t\t\treturn css;\n\t\t\t}\n\t\t});\n\t\tview.callEvent(\"onColumnInit\",[cols[i]]);\n\t}\n\tgrid.refreshColumns(cols);\n\n\tconst data = [];\n\tfor (let i=1; i<=rows; i++)\n\t\tdata.push({ id:i });\n\n\tgrid.parse(data);\n}\n\nexport function getRenderedValue(view, row, col){\n\tconst htmlFilter = /<[^>]*>/gi;\n\treturn cell_template(view, {id: row}, null, null, {id: col}, true).replace(htmlFilter, \"\");\n}\n\n// nowrap by default\nfunction setDefaultCss(view){\n\twebix.html.addStyle(\"#\"+view._table.$view.id+\".webix_dtable .webix_cell { white-space:nowrap;}\");\n}","import group from \"./operations/undo_group\";\nimport {selectAll} from \"./operations/column_operations\";\nimport {styleFormats} from \"./toolbar/buttons\";\n\nexport function init(view){\n\tconst grid = view.$$(\"cells\");\n\tconst key = webix.env.isMac ? \"command\" : \"ctrl\";\n\n\twebix.UIManager.addHotKey(key+\"-a\", () => { if(!grid.getEditor()) selectAll(view); }, grid);\n\twebix.UIManager.addHotKey(key+\"-p\", (v, e) => dialog(\"print\", view, e), grid);\n\n\tif(!view.config.readonly){\n\t\twebix.UIManager.addHotKey(\"any\", (view, ev) => {\n\t\t\tconst code = ev.which || ev.keyCode;\n\t\t\tconst f2 = code == 113;\n\n\t\t\t//ignore shift key, f1, f3 - f12 (f2 - edit)\n\t\t\tif (code == 16 || (code >= 112 && code <= 123 && !f2)) return;\n\n\t\t\tconst sel = view.getSelectedId(true);\n\t\t\tif (sel.length){\n\t\t\t\tif(!(view.config.liveEditor && f2))\n\t\t\t\t\tgrid.$anyKey = true;\n\t\t\t\tgrid.edit(sel[0]);\n\t\t\t}\n\t\t}, grid);\n\n\t\twebix.UIManager.addHotKey(\"enter\", (view) => {\n\t\t\tconst sel = view.getSelectedId(true);\n\t\t\tif (sel.length){\n\t\t\t\tif(!(view.config.liveEditor && !grid.callEvent(\"onBeforeLiveEditor\", [sel[0]])))\n\t\t\t\t\tgrid.edit(sel[0]);\n\t\t\t}\n\t\t}, grid);\n\n\t\twebix.UIManager.addHotKey(\"backspace\", () => del(view), grid);\n\t\twebix.UIManager.addHotKey(\"delete\", () => del(view), grid);\n\n\t\tconst redo = webix.env.isMac ? \"command-shift-z\" : \"ctrl-y\";\n\t\twebix.UIManager.addHotKey(redo, () => view.redo(), grid);\n\t\twebix.UIManager.addHotKey(key+\"-z\", () => view.undo(), grid);\n\n\t\twebix.UIManager.addHotKey(key+\"-b\", () => styleHotKey(view, \"font-weight\"), grid);\n\t\twebix.UIManager.addHotKey(key+\"-i\", () => styleHotKey(view, \"font-style\"), grid);\n\t\twebix.UIManager.addHotKey(key+\"-u\", (v, e) => ctrlU(view, e), grid);\n\n\t\tconst strike = webix.env.isMac ? \"command-shift-x\" : \"ctrl-alt-s\";\n\t\twebix.UIManager.addHotKey(strike, () => styleHotKey(view, \"strike\"), grid);\n\n\t\twebix.UIManager.addHotKey(key+\"-add\", (v, e) => zoom(view, \"in\", e), grid);\n\t\twebix.UIManager.addHotKey(key+\"-=\", (v, e) => zoom(view, \"in\", e), grid);\n\t\twebix.UIManager.addHotKey(key+\"-subtract\", (v, e) => zoom(view, \"out\", e), grid);\n\t\twebix.UIManager.addHotKey(key+\"-0\", (v, e) => zoom(view, 1, e), grid);\n\t\twebix.UIManager.addHotKey(key+\"-`\", () => view.showFormulas(\"toggle\"), grid);\n\t}\n}\n\nfunction del(view) {\n\tif(!view.$$(\"cells\").getEditor())\n\t\tgroup.set(function(){\n\t\t\tview.eachSelectedCell((cell) => view.setCellValue(cell.row,cell.column, \"\"));\n\t\t\tview.refresh();\n\t\t});\n}\n\nfunction zoom(view, value, e) {\n\tview.zoom(value);\n\treturn webix.html.preventEvent(e);\n}\n\nfunction ctrlU(view, e) {\n\tstyleHotKey(view, \"underline\");\n\treturn webix.html.preventEvent(e);\n}\n\nfunction dialog(id, view, e) {\n\tview.callEvent(\"onCommand\",[{id}]);\n\treturn webix.html.preventEvent(e);\n}\n\nfunction styleHotKey(view, attr) { \n\tvar cell = view.getSelectedId();\n\tif(cell){\n\t\tvar style = view.getStyle(cell.row, cell.column);\n\n\t\tvar elementOn = styleFormats[attr]||attr;\n\t\tvar elementOff = \"normal\";\n\n\t\tvar state = (style && style.props[attr] === elementOn)? elementOff : elementOn;\n\t\tview.callEvent(\"onStyleSet\", [attr, state]);\n\t}\n}","import {getMethods} from \"@xbs/muon\";\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn {\n\t\tview:\"toolbar\",\n\t\tcss:\"webix_ssheet_toolbar\",\n\t\telements:[\n\t\t\t{\n\t\t\t\tview:\"text\",\n\t\t\t\ticon: \"wxi-menu-down\",\n\t\t\t\ton: {\n\t\t\t\t\tonItemClick: function(){\n\t\t\t\t\t\tconst suggest = webix.$$(this.config.suggest);\n\t\t\t\t\t\tif(!suggest.isVisible())\n\t\t\t\t\t\t\tsuggest.show(this.getInputNode());\n\t\t\t\t\t},\n\t\t\t\t\tonChange: (val, oldVal, config) => {\n\t\t\t\t\t\tif(config == \"user\" && val !== \"\")\n\t\t\t\t\t\t\tview.showCell(val);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tsuggest: {\n\t\t\t\t\tview:\"ssheet-suggest-labels\",\n\t\t\t\t\tcss: \"webix_ssheet_nav_suggest\",\n\t\t\t\t\tbody: {\n\t\t\t\t\t\ttemplate: \"<span class='webix_ssheet_left'>#name#</span><span class='webix_ssheet_right'>#value#</span>\",\n\t\t\t\t\t\twidth: 250\n\t\t\t\t\t},\n\t\t\t\t\ton:{\n\t\t\t\t\t\tonBeforeShow: function(){\n\t\t\t\t\t\t\tconst data = view.ranges.serialize(view.getActiveSheet()).map(r => ({name: r[0], value: r[1]}));\n\n\t\t\t\t\t\t\tif(!data.length)\n\t\t\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t\t\tconst list = this.getList();\n\t\t\t\t\t\t\tlist.clearAll();\n\t\t\t\t\t\t\tlist.parse(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdata: []\n\t\t\t\t},\n\t\t\t\twidth: 150,\n\t\t\t\tid: \"navigation\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"ssheet-separator\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"label\",\n\t\t\t\tlabel:webix.i18n.spreadsheet.liveEditor[\"edit\"],\n\t\t\t\twidth:65\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"button\",\n\t\t\t\tid:\"formulaButton\",\n\t\t\t\tlabel: \"f(x)\",\n\t\t\t\tautowidth:true,\n\t\t\t\tpopup: {\n\t\t\t\t\tview: \"popup\",\n\t\t\t\t\ton:{\n\t\t\t\t\t\tonBeforeShow: function() {\n\t\t\t\t\t\t\tif(!view.getSelectedId()) return false;\n\t\t\t\t\t\t\twebix.delay(()=>{\n\t\t\t\t\t\t\t\tconst table = this.getBody();\n\t\t\t\t\t\t\t\tif(table.unselect) table.unselect();\n\t\t\t\t\t\t\t\ttable.scrollTo(0,0);\n\t\t\t\t\t\t\t\tconst filter = table.getFilter(\"value\");\n\t\t\t\t\t\t\t\tfilter.value = \"\";\n\t\t\t\t\t\t\t\tfilter.focus();\n\t\t\t\t\t\t\t\ttable.filterByAll();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonHide: function(){\n\t\t\t\t\t\t\tview.$$(\"liveEditor\").focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\twidth: 200,\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tview: \"datatable\",\n\t\t\t\t\t\tsaveFocus: true, //don't move focus to spreadsheet table\n\t\t\t\t\t\tscroll:\"y\",\n\t\t\t\t\t\tdata: getMethods(),\n\t\t\t\t\t\tcolumns: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: \"value\",\n\t\t\t\t\t\t\t\theader: [{ content: \"textFilter\" }],\n\t\t\t\t\t\t\t\tfillspace: true\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonItemClick: function (id) {\n\t\t\t\t\t\t\t\tinsertFormula(view, this, id);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonKeyPress: function(code){\n\t\t\t\t\t\t\t\tif(code == 27)\n\t\t\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t\t\telse if(code == 13){\n\t\t\t\t\t\t\t\t\tconst sel = this.getSelectedId();\n\t\t\t\t\t\t\t\t\tif(sel)\n\t\t\t\t\t\t\t\t\t\tinsertFormula(view, this, sel.row);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"live-editor\",\n\t\t\t\tdisabled:true,\n\t\t\t\tid:\"liveEditor\",\n\t\t\t\tsuggestData: getMethods()\n\t\t\t}\n\t\t]\n\t};\n}\n\nexport function fillEditor(view, cell, clear){\n\tconst editor = view.$$(\"liveEditor\");\n\tif(!(editor && cell)) return;\n\tconst disabled = disableEditor(view, cell.row, cell.column);\n\teditor.config.activeCell = cell;\n\teditor.setValue( clear ? \"\" : editor.getCellValue(cell.row, cell.column) );\n\n\tif(!view._rangeDialog)\n\t\tview.$handleSelection = disabled ? null : function(a,b,st,en){ return pasteRange(view, st, en, a); };\n\n\treturn !disabled;\n}\n\nfunction disableEditor(view, row, column){\n\tconst editor = view.$$(\"liveEditor\");\n\tconst disabled = view.getCellEditor(row, column) || view.isCellLocked(row, column);\n\tif(disabled)\n\t\teditor.disable();\n\telse\n\t\teditor.enable();\n\treturn disabled;\n}\n\nfunction pasteRange(view, st, en, cell){\n\tconst editor = view.$$(\"liveEditor\");\n\tconst updateRange = editor._update_range;\n\tlet cursor = editor.getInputNode().selectionStart;\n\n\tlet sheet = \"\";\n\tif(editor._activeMath){\n\t\tconst activeSheet = view.getActiveSheet();\n\t\tif(editor._activeMath != activeSheet)\n\t\t\tsheet = editor.prepareSheet(activeSheet);\n\t}\n\n\tlet range;\n\tif(st == en){\n\t\tconst colon = editor.getValue()[ (updateRange ? updateRange.pos : cursor)-1 ] == \":\";\n\t\trange = colon ? st : sheet+st;\n\t}\n\telse\n\t\trange = `${sheet+st}:${en}`;\n\n\tif(updateRange && updateRange.pos == cursor - updateRange.len){\n\t\teditor.setRange(range, true);\n\t\tcursor = editor._update_range.pos + range.length;\n\t}\n\telse if(editor.expectOperator()){\n\t\teditor.setRange(range);\n\t\tcursor += range.length;\n\t}\n\telse\n\t\treturn endEdit(view, cell);\n\n\teditor.focus();\n\teditor.getInputNode().setSelectionRange(cursor, cursor);\n\teditor.paintValue();\n\n\treturn false;\n}\n\nfunction endEdit(view, st){\n\tconst editor = view.$$(\"liveEditor\");\n\tif (editor.isEnabled()){\n\t\tconst cell = editor.config.activeCell;\n\t\teditor.showActiveSheet();\n\t\teditor.updateCellValue(cell);\n\t\teditor.setValue(st ? view.getCellValue(st.row, st.column) : \"\");\n\t}\n\treturn true;\n}\n\nfunction insertFormula(view, table, id){\n\tconst editor = view.$$(\"liveEditor\");\n\tconst formula = table.getItem(id).value;\n\tconst value = editor.getValue();\n\n\tlet newValue = formula + \"(\";\n\n\tif(value.indexOf(\"=\") == 0)\n\t\tnewValue = value + (editor.expectOperator(true) ? \"\" : \"+\") + newValue;\n\telse\n\t\tnewValue = \"=\" + newValue;\n\n\ttable.getParentView().hide();\n\teditor.setValue(newValue);\n}\n\nfunction ready(view){\n\tconst editor = view.$$(\"liveEditor\");\n\tconst nav = view.$$(\"navigation\");\n\tconst grid = view._table;\n\n\t//block native editor, and move focus to the custom input\n\t//edit by key press\n\tgrid.attachEvent(\"onBeforeEditStart\", function(cell){\n\t\tconst mode = grid.$anyKey;\n\t\tgrid.$anyKey = false;\n\n\t\treturn startEdit(this, cell, mode);\n\t});\n\t//edit by enter key\n\tgrid.attachEvent(\"onBeforeLiveEditor\", function(cell){\n\t\treturn startEdit(this, cell, false);\n\t});\n\t//edit by dbl-click\n\tgrid.attachEvent(\"onItemDblClick\", function(cell){\n\t\tif(cell.column != \"rowId\"){\n\t\t\tif(view.getCellEditor(cell.row, cell.column))\n\t\t\t\tthis.edit(cell);\n\t\t\telse\n\t\t\t\tstartEdit(this, cell, false);\n\t\t}\n\t});\n\n\tgrid.attachEvent(\"onAfterScroll\", function(){\n\t\tif(editor.$view.contains(document.activeElement))\n\t\t\teditor.paintValue();\n\t});\n\n\tview.attachEvent(\"onCellChange\", (r,c,v,p) => {\n\t\tif(p == view.getActiveSheet()){\n\t\t\tconst cell = editor.config.activeCell;\n\t\t\tif (cell && cell.row == r && cell.column == c)\n\t\t\t\teditor.setValue(v);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAfterSelect\", data => {\n\t\tif (!view.$handleSelection)\n\t\t\tfillEditor(view, data[0]);\n\t});\n\n\tview.attachEvent(\"onChange\", mode => {\n\t\tif (mode == \"update\" && editor.isEnabled()){\n\t\t\tconst cell = editor.config.activeCell;\n\t\t\tif(cell && editor.getValue() != view.getCellValue(cell.row, cell.column)){\n\t\t\t\tdelete editor._update_range;\n\t\t\t\teditor.showActiveSheet();\n\t\t\t\teditor.updateCellValue();\n\t\t\t}\n\t\t}\n\t});\n\n\tview.attachEvent(\"onBeforeSheetShow\", name => {\n\t\tif(view._rangeDialog)\n\t\t\treturn;\n\t\tconst cell = editor.config.activeCell;\n\t\tif(cell){\n\t\t\tconst cursor = editor.getInputNode().selectionStart;\n\t\t\tconst val = editor.getValue();\n\t\t\tif(view.getCellValue(cell.row, cell.column) != val){\n\t\t\t\tif(!editor._activeMath)\n\t\t\t\t\teditor._activeMath = view.getActiveSheet();\n\t\t\t\twebix.delay(()=>{\n\t\t\t\t\tif(name == editor._activeMath){\n\t\t\t\t\t\tview.$handleSelection = null;\n\t\t\t\t\t\tconst cell = editor.config.activeCell;\n\t\t\t\t\t\tgrid.select(cell.row, cell.column);\n\t\t\t\t\t}\n\n\t\t\t\t\teditor.setValue(val);\n\t\t\t\t\t//update highlight\n\t\t\t\t\teditor.refresh();\n\n\t\t\t\t\teditor.getInputNode().setSelectionRange(cursor, cursor);\n\t\t\t\t\teditor.paintValue();\n\n\t\t\t\t\tview.$handleSelection = function(a,b,st,en){ return pasteRange(view, st, en, a); };\n\t\t\t\t});\n\t\t\t}\n\t\t\telse{\n\t\t\t\tnav.setValue(\"\");\n\t\t\t\tclearEditor();\n\t\t\t}\n\t\t}\n\t});\n\n\tview.attachEvent(\"onReset\", () => {\n\t\tif(!view._rangeDialog)\n\t\t\tview.$handleSelection = null;\n\t});\n\tview.$$(\"cells\").attachEvent(\"onFocus\", ()=>{\n\t\t//ignore table clipboard logic\n\t\tif(editor._activeMath){\n\t\t\twebix.delay(()=>editor.focus());\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAfterLoad\", () => clearEditor());\n\n\tview.attachEvent(\"onAction\", function(name, options){\n\t\tif (options.page && options.page != view.getActiveSheet()) return;\n\t\tconst cell = editor.config.activeCell;\n\t\tif(name == \"paste\")\n\t\t\treturn fillEditor(view, cell);\n\t\tconst isActiveCell = cell && cell.row == options.row && cell.column == options.column;\n\t\tif(isActiveCell && (name == \"lock\" || name == \"dropdown\"))\n\t\t\tdisableEditor(view, options.row, options.column);\n\t});\n\n\tview.attachEvent(\"onFormatChange\", (r, c, f, of, p) => {\n\t\tif(p == view.getActiveSheet())\n\t\t\tupdateEditor(r, c);\n\t});\n\tview.attachEvent(\"onCellChange\", (r, c, v , p) => {\n\t\tif(p == view.getActiveSheet())\n\t\t\tupdateEditor(r, c);\n\t});\n\n\tfunction updateEditor(row, column){\n\t\tconst activeCell = editor.config.activeCell;\n\t\tif(activeCell && activeCell.row == row && activeCell.column == column)\n\t\t\tfillEditor(view, {row, column});\n\t}\n\n\tfunction startEdit(table, cell, clear){\n\t\t//do not interfere with custom editors\n\t\tif (!view.getCellEditor(cell.row, cell.column) && fillEditor(view, cell, clear)){\n\t\t\teditor.focus();\n\n\t\t\tif(!clear){\n\t\t\t\teditor.paintValue();\n\n\t\t\t\tconst input = editor.getInputNode();\n\t\t\t\tconst symbols = input.value.length;\n\t\t\t\tinput.setSelectionRange(symbols, symbols);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction clearEditor(){\n\t\teditor.define({activeCell:null});\n\t\teditor.setValue(\"\");\n\t\teditor.disable();\n\t}\n}\n","import \"../views/formlate\";\n\nexport class Dialog{\n\tconstructor(view){\n\t\tthis.view = view;\n\t}\n\t$init(){}\n\t$show(){}\n\t$hide(){}\n\topen(){\n\t\tif(!this.$dialog){\n\t\t\tthis.$dialog = webix.ui(this.$init());\n\t\t\tthis.view._destroy_with_me.push(this.$dialog);\n\t\t\tthis.$dialog.attachEvent(\"onHide\", ()=> {\n\t\t\t\tthis.$hide();\n\t\t\t\twebix.UIManager.setFocus(this.view);\n\t\t\t});\n\t\t\tthis.$dialog.attachEvent(\"onShow\", ()=> {\n\t\t\t\twebix.UIManager.setFocus(this.$dialog);\n\t\t\t});\n\t\t}\n\t\telse if(this.$dialog.isVisible())\n\t\t\treturn;\n\n\t\tconst form = this.$dialog.getBody();\n\t\tthis.$dialog.show();\n\t\tif (this.$show(this.$dialog, form) === false)\n\t\t\tthis.close();\n\t}\n\tclose(){\n\t\tthis.$dialog.hide();\n\t}\n}","export function image(url){\n\treturn `=IMAGE(\"${url}\")`;\n}\n\nexport function chart(config){\n\tconfig = webix.copy(config);\n\n\tconst bar = config.type == \"bar\";\n\tif(bar && config.horizontal)\n\t\tconfig.type = \"barH\";\n\n\tlet result = `=SPARKLINE(${config.range},\"${config.type}\"`;\n\tif (bar)\n\t\tresult += `,\"${config.color}\",\"${config.negativeColor}\"`;\n\telse if(config.color)\n\t\tresult += `,\"${config.color}\"`;\n\treturn result+\")\";\n}\n\nexport function parseImage(value){\n\tif (value && typeof value == \"string\" && value.indexOf(\"=IMAGE(\") === 0)\n\t\treturn {\n\t\t\turl: unescape(value.substr(7, value.length-8))\n\t\t};\n}\n\nexport function parseChart(value){\n\tif (value && typeof value == \"string\" && value.indexOf(\"=SPARKLINE(\") === 0){\n\t\tlet text = value.substr(11, value.length-12).split(\",\");\n\t\tconst result = {\n\t\t\trange: text[0],\n\t\t\ttype: unescape(text[1]),\n\t\t\tcolor: unescape(text[2]),\n\t\t\tnegativeColor: unescape(text[3])\n\t\t};\n\n\t\tif(result.type == \"barH\"){\n\t\t\tresult.type = \"bar\";\n\t\t\tresult.horizontal = 1;\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nfunction unescape(text){\n\tif (!text) return \"\";\n\n\ttext = text.trim();\n\tif (text[0] === \"\\\"\") \n\t\ttext = text.substr(1);\n\tif (text[text.length-1] === \"\\\"\")\n\t\ttext = text.substr(0, text.length-1);\n\treturn text;\n}","import {Dialog} from \"./common\";\nimport {parseImage} from \"../mathematics/writer\";\n\nexport const action = \"add-image-cell\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tthis.cell = this.view.getSelectedId();\n\t\tif(!this.cell)\n\t\t\treturn false;\n\n\t\tform.elements.preview.setHTML(\"\");\n\t\tform.elements.url.setValue(\"\");\n\n\t\t//sync state of dialog to data with  the selected cell\n\t\tlet value = this.view.getCellValue(this.cell.row, this.cell.column);\n\t\tlet data = parseImage(value);\n\t\tif (data && data.url)\n\t\t\tform.elements.url.setValue(data.url);\n\n\t\tform.elements.url.focus();\n\t}\n\t$init(){\n\t\tconst save = this.view.config.save;\n\t\tconst server = (save && save.images) || null;\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"image-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", name:\"url\",  placeholder:webix.i18n.spreadsheet.labels[\"image-url\"], on:{\n\t\t\t\t\t\t\"onChange\":(image) => this.showPreview(image)\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"label\", label:webix.i18n.spreadsheet.labels[\"image-or\"], align: \"center\"},\n\t\t\t\t\t{ view:\"uploader\", label:webix.i18n.spreadsheet.labels[\"image-upload\"], upload:server, on:{\n\t\t\t\t\t\tonBeforeFileAdd: function(file){\n\t\t\t\t\t\t\tif (!this.config.upload){\n\t\t\t\t\t\t\t\tconst reader = new FileReader();\n\t\t\t\t\t\t\t\treader.onload = (e) => this.getFormView().elements.url.setValue(e.target.result);\n\t\t\t\t\t\t\t\treader.readAsDataURL(file.file);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tthis.getFormView().elements.preview.setHTML(\"\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonFileUpload: function(item, response){\n\t\t\t\t\t\t\tthis.getFormView().elements.url.setValue(response.imageURL);\n\t\t\t\t\t\t}\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"formlate\", name:\"preview\", borderless: true, css: \"webix_ssheet_preview\", template:\"\", height:50 }\n\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst cell = this.cell;\n\t\tconst image = this.fillUrl(this.$dialog.getBody().elements.url.getValue());\n\t\tthis.view.addImage(cell.row, cell.column, image);\n\t\tthis.close();\n\t}\n\tfillUrl(url){\n\t\tif (!/^[/]|((https?:\\/|data:image)\\/)/i.test(url))\n\t\t\turl = \"http://\" + url;\n\t\treturn url;\n\t}\n\tshowPreview(image){\n\t\tif (image){\n\t\t\timage = webix.template.escape(this.fillUrl(image));\n\t\t\tthis.$dialog.queryView(\"form\").elements.preview.setHTML(\"<img class='webix_ssheet_cimage' src='\"+image+\"'></img>\");\n\t\t}\n\t}\n}","import * as box from \"./imagecell\";\n\nexport const action = \"add-image-top\";\n\nexport class DialogBox extends box.DialogBox{\n\topen(action){\n\t\tthis.config = action.config;\n\t\tthis.viewid = action.viewid;\n\n\t\tthis.view.callEvent(\"onUIEditStart\", [this.viewid, \"image\"]);\n\n\t\tbox.DialogBox.prototype.open.apply(this, arguments);\n\t}\n\t$hide(){\n\t\tthis.view.callEvent(\"onUIEditStop\", [this.viewid, \"image\"]);\n\t\tthis.config = this.viewid = null;\n\t}\n\t$init(){\n\t\tthis.view.attachEvent(\"onUIEditStart\", (id, type)=>{\n\t\t\tif(this.$dialog && this.$dialog.isVisible() && type != \"image\")\n\t\t\t\tthis.close();\n\t\t});\n\n\t\tthis.view.attachEvent(\"onCommand\", obj =>{\n\t\t\tif(obj.id == \"close-ui-editor\" && this.$dialog && this.$dialog.isVisible())\n\t\t\t\tthis.close();\n\t\t});\n\n\t\treturn box.DialogBox.prototype.$init.apply(this, arguments);\n\t}\n\t$show(box, form){\n\n\t\tform.elements.preview.setHTML(\"\");\n\t\tform.elements.url.setValue(\"\");\n\n\t\tif(this.config && this.config.data)\n\t\t\tform.elements.url.setValue(this.config.data);\n\n\t\tform.elements.url.focus();\n\t}\n\tokClick(){\n\t\tconst image = this.fillUrl(this.$dialog.getBody().elements.url.getValue());\n\t\tif(this.viewid)\n\t\t\tthis.view.views.update(this.viewid, image);\n\t\telse{\n\t\t\tconst id = this.view.views.add(null, null, \"image\", image);\n\t\t\tthis.view.views.highlight(id);\n\t\t}\n\t\tthis.close();\n\t}\n}","import {isCellLocked} from \"./lock_cell\";\nimport group from \"./undo_group\";\n\n\nvar ignoreUndoReset = false;\n\nexport function init(view){\n\treset(view);\n\tundoHandlers(view);\n\tview.attachEvent(\"onHardReset\", () => reset(view));\n\tview.attachEvent(\"onAfterSheetShow\", () => reset(view));\n\t// styles\n\tview.attachEvent(\"onBeforeStyleChange\", (row, column, nstyle, ostyle) =>{\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"style\", row:row, column: column, value: ostyle, newValue: nstyle, group: group.value});\n\t});\n\t// editing\n\tview.attachEvent(\"onBeforeValueChange\", (row, column, nvalue, ovalue, page) => {\n\t\tif (isCellLocked(view, row, column, page)) return false;\n\t\tif(page == view.getActiveSheet())\n\t\t\taddToHistory(view, {action: \"value\", row:row, column: column, value: ovalue, newValue: nvalue, group: group.value});\n\t});\n\t// merge cells\n\tview.attachEvent(\"onBeforeSpan\", (row, column, value) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"span\", row:row, column: column, value: value, newValue:value, group: group.value});\n\t});\n\t// split cells\n\tview.attachEvent(\"onBeforeSplit\", (row, column, value) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"split\", row:row, column: column, value: value, newValue:value, group: group.value});\n\t});\n\t// Any abstract undo actions\n\tview.attachEvent(\"onAction\", (action, obj) => {\n\t\tif(!(obj.page && obj.page != view.getActiveSheet()))\n\t\t\taddToHistory(\n\t\t\t\tview,\n\t\t\t\t{\n\t\t\t\t\taction,\n\t\t\t\t\trow: obj.row || null,\n\t\t\t\t\tcolumn: obj.column || null,\n\t\t\t\t\tvalue: webix.isUndefined(obj.value) ? null : obj.value,\n\t\t\t\t\tnewValue: webix.isUndefined(obj.newValue) ? null : obj.newValue,\n\t\t\t\t\textra: obj.extra || null,\n\t\t\t\t\tgroup: group.value\n\t\t\t\t}\n\t\t\t);\n\t});\n\n\t// column resize\n\tview.$$(\"cells\").attachEvent(\"onColumnResize\", (column, nvalue, ovalue) =>\n\t\taddToHistory(view, {action: \"c-resize\", row:0, column:column, value: ovalue, newValue: nvalue, group: group.value})\n\t);\n\t// column hide\n\tview.attachEvent(\"onColumnOperation\", (action, start, end, page) => {\n\t\tif(page == view.getActiveSheet() && action !== \"add\" && action !== \"del\")\n\t\t\taddToHistory(view, { action:{id: action, group:\"column\"}, group: group.value, column: {\n\t\t\t\tstart: { column:start }, end: { column:end }\n\t\t\t}});\n\t});\n\t// row hide\n\tview.attachEvent(\"onRowOperation\", (action, start, end, page) => {\n\t\tif(page == view.getActiveSheet() && action !== \"add\" && action !== \"del\")\n\t\t\taddToHistory(view, { action: {id: action, group:\"row\"}, group: group.value, row: {\n\t\t\t\tstart: {row: start}, end: {row: end}\n\t\t\t}});\n\t});\n\t// row resize\n\tview.$$(\"cells\").attachEvent(\"onRowResize\", (row,  nvalue, ovalue) =>\n\t\taddToHistory(view, {action: \"r-resize\", row: row, column:0, value: ovalue, newValue: nvalue, group: group.value})\n\t);\n\n\t// condition formats\n\tview.attachEvent(\"onBeforeConditionSet\", (row, column, value, nvalue, page) => {\n\t\tif(isCellLocked(view, row, column, page)) return false;\n\t\tif(page == view.getActiveSheet()){\n\t\t\tvalue = value ? webix.copy(value) : null;\n\t\t\taddToHistory(view, {action: \"condition\", row, column, value, newValue: nvalue, group: group.value});\n\t\t}\n\t});\n\n\t// zoom\n\tview.attachEvent(\"onZoom\", (value, oldVal, page) => {\n\t\tif(page == view.getActiveSheet())\n\t\t\taddToHistory(view, {action: \"zoom\", value: oldVal, newValue: value, group: group.value});\n\t});\n\n\tview.$skipHistory = 0;\n}\n\nexport function undo(view){\n\trestoreHistory(view,-1);\n}\n\nexport function redo(view){\n\trestoreHistory(view,1);\n}\n\nexport function reset(view){\n\tif(!ignoreUndoReset){\n\t\tview._ssUndoHistory = [];\n\t\tview._ssUndoCursor = -1;\n\t}\n}\n\nfunction addToHistory(view, data){\n\tif(!view.$skipHistory && !view._loading_data){\n\t\t// remove futher history\n\t\tview._ssUndoHistory.splice(view._ssUndoCursor+1);\n\t\t// add to an array and increase cursor\n\t\tview._ssUndoHistory.push(data);\n\t\tview._ssUndoCursor++;\n\t}\n}\n\nexport function ignoreUndo(func, view){\n\tview.$skipHistory++;\n\ttry{\n\t\tfunc.call(view);\n\t}\n\tfinally {\n\t\tview.$skipHistory--;\n\t}\n}\n\nexport function ignoreReset(func){\n\tignoreUndoReset = true;\n\tfunc();\n\tignoreUndoReset = false;\n}\n\nfunction restoreHistory(view, step){\n\tvar data = view._ssUndoHistory[step>0?(view._ssUndoCursor+step):view._ssUndoCursor];\n\tif(data){\n\t\tvar value = step > 0 ? data.newValue : data.value;\n\t\tvar direction = step>0;\n\t\tvar params = [data.action, data.row, data.column, value, direction, data.extra];\n\n\t\tview._ssUndoCursor += step;\n\n\t\t// group support\n\t\tvar group = data.group;\n\t\tvar prevData = view._ssUndoHistory[step>0?(view._ssUndoCursor+step):view._ssUndoCursor];\n\n\t\tignoreUndo(function(){\n\t\t\tview.callEvent(\"onUndo\", params);\n\t\t\tif (!group || !(prevData && group == prevData.group)){\n\t\t\t\tview.refresh();\n\t\t\t\tview.callEvent(\"onAfterUndo\", []);\n\t\t\t}\n\t\t},view);\n\n\t\tif(prevData && group && group == prevData.group){\n\t\t\trestoreHistory(view, step);\n\t\t}\n\t}\n}\n\nfunction undoHandlers(view){\n\tview.attachEvent(\"onUndo\", function(type, row, column, value) {\n\t\tswitch (type) {\n\t\t\tcase \"freeze-row\":\n\t\t\t\tview.freezeRows(value);\n\t\t\t\tbreak;\n\t\t\tcase \"freeze-column\":\n\t\t\t\tview.freezeColumns(value);\n\t\t\t\tbreak;\n\t\t}\n\t});\n}","import {range, toRange, changeRange, encode, isRange} from \"../helpers/column_names\";\nimport {ignoreUndo} from \"./undo\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\tconst grid = view._table.$view.querySelector(\".webix_ss_center\");\n\n\tview.views = {\n\t\tregister:function(type, render, track){\n\t\t\tif(!this._types[type])\n\t\t\t\tthis._types[type] = { render:render, track:track };\n\t\t},\n\t\tmove: function(id, x, y){\n\t\t\tconst win = webix.$$(id);\n\t\t\tconst old = webix.copy(this._pull[id]);\n\t\t\tthis._pull[id].x = _correctPos(view, old.config.width, x/view._zoom, \"x\");\n\t\t\tthis._pull[id].y = _correctPos(view, old.config.height, y/view._zoom, \"y\");\n\t\t\tview.callEvent(\"onAction\", [\"move-view\", { row:id, newValue:webix.copy(this._pull[id]), value:old} ]);\n\t\t\t_showOne(view, win, this._pull[id]);\n\t\t},\n\t\tadd: function(x, y, type, data, config, id){\n\t\t\tconfig = config || {};\n\t\t\tif(type == \"chart\"){\n\t\t\t\tconfig = webix.extend(config, {\n\t\t\t\t\ttype: \"line\",\n\t\t\t\t\tdataSeries:\"columns\"\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst height = config.height = config.height || 300;\n\t\t\tconst width = config.width = config.width || 500;\n\n\t\t\tconst win = webix.ui({ \n\t\t\t\tid:id || \"$ssheet-ui\"+webix.uid(), // fixed id is for undo only\n\t\t\t\tview: \"ssheet-ui\",\n\t\t\t\tcontainer:grid, master:view._table.config.id,\n\t\t\t\twidth:width, height:height\n\t\t\t});\n\n\t\t\twin.attachEvent(\"onViewMoveEnd\", (x, y) => {\n\t\t\t\tconst state = view._table.getScrollState();\n\t\t\t\tthis.move(id, x, y+state.y);\n\t\t\t});\n\t\t\twin.attachEvent(\"onViewResize\", () => {\n\t\t\t\tconst conf =  this._pull[id];\n\t\t\t\tconst old = webix.copy(conf);\n\n\t\t\t\tconf.config.height = win.$height;\n\t\t\t\tconf.config.width = win.$width;\n\t\t\t\tview.callEvent(\"onAction\", [\"resize-view\", { row:id, newValue:webix.copy(conf), value:old } ]);\n\t\t\t});\n\t\t\twin.attachEvent(\"onViewEdit\", () => {\n\t\t\t\tconst config = this._pull[id];\n\t\t\t\tconst command = this._commands[config.type] || config.type;\n\t\t\t\tview.callEvent(\"onCommand\", [{ id:command, viewid:id, config }]);\n\t\t\t});\n\t\t\twin.attachEvent(\"onViewRemove\", () => this.remove(id));\n\n\t\t\tid = win.config.id;\n\n\t\t\tx = _correctPos(view, height, x, \"x\");\n\t\t\ty = _correctPos(view, width, y, \"y\");\n\n\t\t\tthis._pull[id] = { x, y, type, data, config };\n\t\t\tthis.update(id, data, config, true);\n\t\t\t_showOne(view, win, this._pull[id]);\n\n\t\t\treturn id; \n\t\t},\n\t\tremove: function(id){\n\t\t\tconst old = this._pull[id];\n\t\t\twebix.$$(id).close();\n\t\t\tdelete this._pull[id];\n\n\t\t\tview.callEvent(\"onAction\", [\"add-view\", { row:id, newValue:null, value:old } ]);\n\t\t},\n\t\tget:function(id){\n\t\t\treturn webix.$$(id).getBody();\n\t\t},\n\t\tgetConfig:function(id){\n\t\t\treturn this._pull[id];\n\t\t},\n\t\tupdate:function(id, data, config, inner){\n\t\t\tconst old = inner ? null : webix.copy(this._pull[id]);\n\t\t\tconst conf = this._pull[id];\n\t\t\tconst actions = this._types[conf.type];\n\n\t\t\tdata = data || config.data || \"\";\n\t\t\tconfig = config || {};\n\n\t\t\tdelete config.data;\n\n\t\t\tif(conf.type == \"chart\"){\n\t\t\t\tconst type = config.type;\n\t\t\t\tif(type && !config.series){\n\t\t\t\t\tconst xAxis = config.xAxis && config.xAxis.range;\n\t\t\t\t\tconst legend = config.legend && config.legend.range;\n\n\t\t\t\t\tlet oldLeftColumn;\n\t\t\t\t\tif(old && old.config){\n\t\t\t\t\t\tif(_isPie(type)){\n\t\t\t\t\t\t\tif(old.config.legend && old.config.legend.fromData)\n\t\t\t\t\t\t\t\toldLeftColumn = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(old.config.xAxis && old.config.xAxis.fromData)\n\t\t\t\t\t\t\toldLeftColumn = 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tconfig.series = _getSeries(view, data, config.dataSeries, {xAxis, legend}, oldLeftColumn);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst win = webix.$$(id);\n\n\t\t\tconst height = config.height || 300;\n\t\t\tconst width = config.width || 500;\n\n\t\t\tif(win.$width != width && win.$height != height){\n\t\t\t\twin.define({width, height});\n\t\t\t\twin.resize();\n\t\t\t}\n\n\t\t\tconf.data = data;\n\t\t\tconf.config = config;\n\n\t\t\tlet node = this.get(id);\n\n\t\t\tdata = _fromRange(view, conf);\n\n\t\t\tif(actions.render){\n\t\t\t\tconst renderConfig = webix.copy(conf);\n\n\t\t\t\t//clear width and height for inner view resizing\n\t\t\t\trenderConfig.config.width = renderConfig.config.height = 0;\n\n\t\t\t\tnode = actions.render(node, renderConfig, data);\n\t\t\t\t_processTables(node);\n\t\t\t}\n\n\t\t\tif(actions.track)\n\t\t\t\t_trackOne(view, node, actions.track, conf);\n\n\t\t\tview.callEvent(\"onAction\", [\"add-view\", { row:id, newValue:webix.copy(this._pull[id]), value:old} ]);\n\t\t},\n\t\thighlight:function(id){\n\t\t\tconst win = webix.$$(id);\n\t\t\tconst css = \"webix_ssheet_ui_focused\";\n\n\t\t\tconst oldWin = webix.$$(this._activeWin);\n\t\t\tif(oldWin && !oldWin.$destructed)\n\t\t\t\twebix.html.removeCss(oldWin.$view, css);\n\n\t\t\tif(win){\n\t\t\t\tthis._activeWin = id;\n\t\t\t\twebix.html.addCss(win.$view, css);\n\t\t\t}\n\t\t\telse\n\t\t\t\tdelete this._activeWin;\n\t\t},\n\t\t_commands:{\n\t\t\t\"image\":\"add-image-top\",\n\t\t\t\"chart\":\"add-chart\"\n\t\t},\n\t\t_types:{},\n\t\t_pull:{}\n\t};\n\n\t// handle events\n\tview._table.attachEvent(\"onResize\", () => _showAll(view) );\n\tview._table.attachEvent(\"onScrollY\", () => _showAll(view) );\n\tview._table.attachEvent(\"onScrollX\", () => _showAll(view) );\n\n\tview.attachEvent(\"onReset\", () => _reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tconst move = type === \"move-view\";\n\t\tif (move || type == \"resize-view\" || type === \"add-view\")\n\t\t\t_undoUI(view, move, row, value);\n\t});\n\tview.attachEvent(\"onAction\", (action, p) => {\n\t\tif(action == \"header-hide\")\n\t\t\t_showAll(view);\n\t\telse if(action == \"before-grid-change\")\n\t\t\t_updateData(view, p.name, p.inc, p.data, p.start);\n\t});\n\tview.attachEvent(\"onZoom\", (v,o,p) => {\n\t\tif(p == view.getActiveSheet())\n\t\t\t_showAll(view, true);\n\t});\n\tview.attachEvent(\"onColumnOperation\", (a,s,e,p) => {\n\t\tif(p == view.getActiveSheet())\n\t\t\t_showAll(view, true);\n\t});\n\tview.attachEvent(\"onRowOperation\", (a,s,e,p) => {\n\t\tif(p == view.getActiveSheet())\n\t\t\t_showAll(view, true);\n\t});\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data, config) => _serialize(view, data, config));\n\tview.attachEvent(\"onCellChange\", (r,c,v,p) => {\n\t\tif(p == view.getActiveSheet())\n\t\t\t_trackAll(view);\n\t});\n\tview.attachEvent(\"onMathRefresh\", () => _trackAll(view));\n\n\tview.attachEvent(\"onDestruct\", () => {\n\t\tfor(let i in view.views._pull) webix.$$(i).destructor();\n\t});\n\n\tlet editUIType;\n\twebix.attachEvent(\"onClick\", function(ev){\n\t\tlet focus = webix.$$(ev);\n\t\tif(focus && focus.config.externalUI)\n\t\t\tfocus = webix.$$(focus.config.externalUI);\n\n\t\tconst ui = focus && (focus.queryView(\"ssheet-ui\",\"self\") || focus.queryView(\"ssheet-ui\",\"parent\"));\n\n\t\tif(ui){\n\t\t\tview.views.highlight(ui);\n\t\t\tconst id = ui.config.id;\n\n\t\t\tif(editUIType){\n\t\t\t\tif(view.views.getConfig(id).type == editUIType)\n\t\t\t\t\tui.callEvent(\"onViewEdit\", []); //start editing if any editor is open\n\t\t\t\telse\n\t\t\t\t\tview.callEvent(\"onCommand\", [{ id:\"close-ui-editor\" }]);\n\t\t\t}\n\t\t}\n\t\telse if(!editUIType)\n\t\t\tview.views.highlight();\n\t});\n\n\tview.attachEvent(\"onUIEditStart\", function(id, type){\n\t\tview.views.highlight(id);\n\t\teditUIType = type;\n\t});\n\n\tview.attachEvent(\"onUIEditStop\", function(id, type){\n\t\tif(editUIType == type)\n\t\t\twebix.delay(()=>{ // after onClick handler (to save focus)\n\t\t\t\teditUIType = null;\n\t\t\t});\n\t});\n\n\t// set default views\n\tview.views.register(\"chart\", (node, conf, data) => {\n\t\tconst dataRange = _getNames(view, conf);\n\t\tconst config = _genChartConfig(conf, data, dataRange);\n\t\treturn webix.ui(config, node);\n\t}, (view, data) => {\n\t\tview.clearAll();\n\t\tview.parse(data);\n\t});\n\n\tview.views.register(\"image\", (node, conf, data) => {\n\t\tconst config = webix.extend({ css:\"webix_ssheet_bgimage\", template:`<img src=\"${data}\"/>` }, conf.config||{}, true );\n\t\treturn webix.ui(config, node);\n\t});\n}\n\nfunction _parse(view, data){\n\tconst views = data.views;\n\tif(views){\n\t\tignoreUndo(function(){\n\t\t\tviews.forEach(obj => view.views.add.apply(view.views, obj));\n\t\t}, view);\n\t}\n}\n\nfunction _serialize(view, data, config){\n\tdata.views = [];\n\tfor(let i in view.views._pull){\n\t\tconst conf = view.views._pull[i];\n\t\tconst one = [conf.x, conf.y, conf.type, conf.data, conf.config];\n\t\tif(config && config.viewIds)\n\t\t\tone.push(i);\n\t\tdata.views.push(one);\n\t}\n}\n\nlet thread;\nfunction _trackAll(view){\n\tclearTimeout(thread);\n\tthread = webix.delay(() => {\n\t\tconst ui = view.views;\n\t\tfor(let id in ui._pull){\n\t\t\tconst conf = ui._pull[id];\n\n\t\t\tconst viewMethods = ui._types[conf.type];\n\t\t\tconst render = viewMethods.render;\n\t\t\tconst track = viewMethods.track;\n\n\t\t\tif(track)\n\t\t\t\t_trackOne(view, ui.get(id), track, conf, render);\n\t\t}\n\t});\n}\n\nfunction _trackOne(view, node, track, conf, render){\n\tconst data = _fromRange(view, conf);\n\n\tif(conf.type == \"chart\"){\n\t\tif(render)\n\t\t\tnode = render(node, conf, data, true);\n\n\t\tconst config = conf.config;\n\t\tif(config && !_isPie(config.type))\n\t\t\t_removeLegend(data, conf, view);\n\t}\n\n\ttrack(node, data);\n}\n\nfunction _updateData(view, name, inc, data, start){\n\tconst views = data.views;\n\tfor(let i = 0; i < views.length; i++){\n\t\tif(_isRange(views[i][3])){\n\t\t\tconst series = views[i][4].series;\n\t\t\tif(series){\n\t\t\t\tseries.forEach(obj => {\n\t\t\t\t\tobj.range = changeRange(obj.range, name, inc, start);\n\t\t\t\t\tobj.active = changeRange(obj.active, name, inc, start);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst legend = views[i][4].legend && views[i][4].legend.range;\n\t\t\tif(legend)\n\t\t\t\tviews[i][4].legend.range = _getDataParts(legend).map(range => changeRange(range, name, inc, start)).join(\",\");\n\n\t\t\tconst xAxis = views[i][4].xAxis && views[i][4].xAxis.range;\n\t\t\tif(xAxis)\n\t\t\t\tviews[i][4].xAxis.range = changeRange(xAxis, name, inc, start);\n\n\t\t\tviews[i][3] = _getDataParts(views[i][3]).map(range => changeRange(range, name, inc, start)).join(\",\");\n\t\t}\n\t}\n}\n\nfunction _showAll(view, pos){\n\t//close possibly open menus of embedded ui\n\twebix.callEvent(\"onClick\", []);\n\n\tfor(let id in view.views._pull){\n\t\tconst win = webix.$$(id);\n\t\tconst conf = view.views._pull[id];\n\t\tif(pos){\n\t\t\tconf.x = _correctPos(view, conf.config.width, conf.x, \"x\");\n\t\t\tconf.y = _correctPos(view, conf.config.height, conf.y, \"y\");\n\t\t}\n\t\t_showOne(view, win, conf);\n\t}\n}\n\nfunction _showOne(view, win, conf){\n\tconst state = view._table.getScrollState();\n\n\twin.define({\n\t\twidth: conf.config.width * view._zoom,\n\t\theight: conf.config.height * view._zoom\n\t});\n\twin.resize();\n\n\twin.show({\n\t\tx:conf.x * view._zoom,\n\t\ty:(conf.y * view._zoom) - state.y\n\t});\n}\n\nfunction _correctPos(view, winSize, v, type){\n\tif(!v && v !==0 )\n\t\tv = view._table.getScrollState()[type]+50;\n\telse{\n\t\tconst size = (type == \"x\" ? _getWidth(view) : _getHeight(view)) - winSize;\n\t\tv = Math.min(Math.max(v, 0), size);\n\t}\t\n\treturn v;\n}\n\nfunction _reset(view){\n\tignoreUndo(function(){\n\t\tfor(let id in view.views._pull)\n\t\t\tview.views.remove(id);\n\t}, view);\n}\n\nfunction _undoUI(view, move, id, value){\n\tif(value){\n\t\tconst {x, y, type, data, config} = value;\n\t\tif(view.views._pull[id]){\n\t\t\tif(move)\n\t\t\t\tview.views.move(id, x, y);\n\t\t\telse\n\t\t\t\tview.views.update(id, data, config);\n\t\t}\n\t\telse\n\t\t\tview.views.add(x, y, type, data, config, id);\n\n\t\tconst editor = view.$$(\"chartEditor\");\n\t\tif(editor && editor.viewId == id)\n\t\t\teditor.queryView(\"form\").setValues(config);\n\t}\n\telse\n\t\tview.views.remove(id);\n}\n\nfunction _getWidth(view){\n\tlet width = 0;\n\tview._table.eachColumn(function(id){\n\t\tif(id !== \"rowId\")\n\t\t\twidth += this.getColumnConfig(id).width;\n\t});\n\treturn width / view._zoom;\n}\n\nfunction _getHeight(view){\n\tlet height = 0;\n\tview._table.data.each(function(obj){\n\t\theight += obj.$height || webix.skin.$active.rowHeight;\n\t});\n\treturn height / view._zoom;\n}\n\n//disable datatables not to interfere with ss table events\nfunction _processTables(node){\n\tconst query = function(view){\n\t\treturn view.name == \"datatable\" || view.name == \"treetable\";\n\t};\n\tlet tables = node.queryView(query, \"self\");\n\tif(tables) tables = [tables];\n\telse tables = node.queryView(query, \"all\");\n\ttables.forEach((dt) => dt.disable());\n}\n\n/* chart-specific helpers */\n\nfunction _prepareType(config){\n\tconst type = config.type;\n\tif(config.stacked && type.indexOf(\"stacked\") == -1)\n\t\tconfig.type = \"stacked\"+config.type.charAt(0).toUpperCase()+config.type.substr(1);\n\tif(config[\"3D\"] && type.indexOf(\"3D\") == -1)\n\t\tconfig.type += \"3D\";\n\tif(config.horizontal && type.indexOf(\"H\") == -1)\n\t\tconfig.type += \"H\";\n\n\treturn config.type;\n}\n\nfunction _genChartConfig(conf, data, dataRange){\n\tconst htmlFilter = /<[^>]*>/gi;\n\tlet config = webix.copy(conf.config);\n\n\tconfig = _normalizeConfig(config);\n\n\tconst scale = config.scale.lines;\n\tconst scaleColor = config.scale.color || undefined;\n\tconst type = (config.type = _prepareType(config));\n\tconst pie = _isPie(type);\n\n\tconst lines = config.series;\n\tconfig.series = [];\n\tconst xAxis = config.xAxis;\n\n\tconst legendConfig = config.legend;\n\tlet pieLegend;\n\tlet legendRange;\n\n\tconst legend = {\n\t\theight:24,\n\t\talign: legendConfig.align || \"center\",\n\t\tvalign: legendConfig.valign || \"bottom\",\n\t};\n\tlegend.layout = legend.valign == \"middle\" ? \"y\" : \"x\";\n\n\tif(pie){\n\t\tif(legendConfig.fromData)\n\t\t\tpieLegend = \"data0\";\n\t\telse if(legendConfig.range)\n\t\t\tpieLegend = dataRange[legendConfig.range];\n\n\t\tlegend.template = `#${pieLegend}#`;\n\t}\n\telse{\n\t\tlegend.values = [];\n\n\t\tlegendRange = !legendConfig.fromData && legendConfig.range;\n\t\tif(legendRange){\n\t\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\t\tlegendRange = _getParts(legendConfig.range, switchDirection, dataRange);\n\t\t}\n\n\t\tconfig.yAxis = config.yAxis||{};\n\t\tfor(let property in config.yAxis)\n\t\t\tif(config.yAxis[property] === \"\")\n\t\t\t\tdelete config.yAxis[property];\n\n\t\tconfig.yAxis = webix.extend(config.yAxis, {\n\t\t\tlineColor: scaleColor,\n\t\t\tcolor: scaleColor,\n\t\t\tlines: scale,\n\t\t\tlineShape: config.scale.circle ? \"arc\" : \"default\"\n\t\t});\n\n\t\tif(xAxis.fromData)\n\t\t\txAxis.range = legendRange ? Object.keys(data[0]).filter(line => legendRange.indexOf(line) == -1)[0] : \"data0\";\n\t\telse if(xAxis.range)\n\t\t\txAxis.range = dataRange[xAxis.range];\n\t}\t\n\n\tfor(let i = 0; i < lines.length; i++){\n\t\tconst color = lines[i].color;\n\t\tconst item = dataRange[lines[i].range];\n\n\t\tif(item != xAxis.range && !(pie && item == pieLegend /*(item == pieLegend || legendConfig.range == lines[i].active)*/)){\n\t\t\tconst s = {\n\t\t\t\tvalue:`#${item}#`,\n\t\t\t\ttooltip:{\n\t\t\t\t\ttemplate: lines[i].tooltip ? `#${item}#` : \"\"\n\t\t\t\t}\n\t\t\t};\n\n\t\t\ts[pie ? \"pieInnerText\" : \"label\"] = lines[i].label ? `#${item}#` : \"\";\n\n\t\t\tif(type == \"radar\" || type == \"line\" || type == \"spline\" || type == \"scatter\"){\n\t\t\t\ts.line = { color };\n\t\t\t\ts.item = { borderColor:color, type:lines[i].marker };\n\t\t\t}\n\t\t\telse if(!pie)\n\t\t\t\ts.color = color;\n\n\t\t\tif(type == \"area\" || type == \"splineArea\")\n\t\t\t\ts.alpha = 0.7;\n\n\t\t\tif(data[0] && !pie && (legendRange || legendConfig.fromData)){\n\t\t\t\tconst val = legendRange ? data[0][legendRange[i]] : data[0][item];\n\t\t\t\tconst text = (val || val === 0) ? (val+\"\").replace(htmlFilter, \"\") : \"\";\n\t\t\t\tlegend.values.push({text, color});\n\t\t\t}\n\n\t\t\tconfig.series.push(s);\n\t\t}\n\t}\n\n\tif(!pie){\n\t\tconfig.xAxis = {\n\t\t\ttitle: config.xAxis.title,\n\t\t\tlineColor: scaleColor,\n\t\t\tcolor: scaleColor,\n\t\t\tlines: scale\n\t\t};\n\n\t\tconfig[type == \"barH\" || type == \"stackedBarH\" ? \"yAxis\" : \"xAxis\"].template = obj => {\n\t\t\tconst val = obj[xAxis.range];\n\t\t\treturn (val || val === 0) ? (val+\"\").replace(htmlFilter, \"\") : \"\";\n\t\t};\n\t}\n\n\tif(pieLegend || (legend.values && legend.values.length))\n\t\tconfig.legend = legend;\n\telse\n\t\tdelete config.legend;\n\n\tif(type == \"scatter\"){\n\t\tconfig.xValue = config.xAxis.template;\n\t\tconfig.origin = \"auto\";\n\t\tdelete config.xAxis.template;\n\t}\n\n\treturn webix.extend({\n\t\tview:\"chart\",\n\t\tpadding:{\n\t\t\tleft:80\n\t\t}\n\t}, config, true);\n}\n\nfunction _isRange(data){\n\treturn typeof data == \"string\" && data.indexOf(\"data:image\") === -1;\n}\n\nfunction _fromRange(view, conf){\n\tlet data = conf.data;\n\n\tif(/^(http|data:image|\\/)/i.test(data))\n\t\treturn data;\n\n\tconst arr = [];\n\tif(data){\n\t\tconst config = conf.config;\n\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\tlet lastIndex = 0;\n\n\t\tdata = _getDataParts(data);\n\t\tfor(let i = 0; i < data.length; i++){\n\t\t\tconst cells = _isRange(data[i]) ? range(data[i], view) : null;\n\t\t\tif(cells){\n\t\t\t\tconst page = cells[4] ? view._mData.getPage(cells[4]) : view._mPage;\n\t\t\t\tcells[5] = lastIndex;\n\n\t\t\t\tif(page){\n\t\t\t\t\tconst subdata = switchDirection ? getRangeRows.apply(page, cells) : getRangeCols.apply(page, cells);\n\t\t\t\t\tlastIndex += subdata[2];\n\t\t\t\t\tfor(let i = 0; i < subdata[0].length; i++){\n\t\t\t\t\t\tif(!arr[i])\n\t\t\t\t\t\t\tarr[i] = {};\n\t\t\t\t\t\twebix.extend(arr[i], subdata[0][i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn arr;\n}\n\nfunction _removeLegend(arr, conf, view){\n\tconst config = conf.config;\n\tif(typeof(config.legend) != \"object\")\n\t\tconfig.legend = {fromData: !!config.legend};\n\n\tconst legend = config.legend;\n\n\tif(legend.fromData)\n\t\tarr.shift();\n\telse if(legend.range){\n\t\tconst names = _getNames(view, conf);\n\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\tconst legendRange = _getParts(legend.range, switchDirection, names);\n\t\tfor (let i = 0; i < legendRange.length; i++){\n\t\t\tconst item = legendRange[i];\n\t\t\tdelete arr[0][item];\n\t\t}\n\t}\n}\n\nfunction _getNames(view, conf){\n\tlet data = conf.data;\n\n\tif(/^(http|data:image|\\/)/i.test(data))\n\t\treturn;\n\n\tlet names = {};\n\tif(data){\n\t\tconst config = conf.config;\n\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\tlet lastIndex = 0;\n\n\t\tdata = _getDataParts(data);\n\t\tfor(let i = 0; i < data.length; i++){\n\t\t\tconst cells = _isRange(data[i]) ? range(data[i], view) : null;\n\t\t\tif(cells){\n\t\t\t\tconst page = cells[4] ? view._mData.getPage(cells[4]) : view._mPage;\n\t\t\t\tcells[5] = lastIndex;\n\n\t\t\t\tif(page){\n\t\t\t\t\tconst subdata = switchDirection ? getRangeRows.apply(page, cells) : getRangeCols.apply(page, cells);\n\t\t\t\t\tlastIndex += subdata[2];\n\t\t\t\t\twebix.extend(names, subdata[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn names;\n}\n\nexport function _getDataParts(data){\n\treturn data.replace(/\\s/g, \"\").split(\",\");\n}\n\nexport function _isPie(type){\n\treturn /pie|donut/.test(type);\n}\n\nexport function _getSeries(view, data, dataSeries, active, oldLeftColumn){\n\tconst dir = dataSeries == \"rows\";\n\tlet vals = [];\n\n\tif(data){\n\t\tlet xAxis = [];\n\t\tlet legend = [];\n\t\tlet activeVals = [];\n\n\t\tif(active){\n\t\t\tif(active.legend)\n\t\t\t\tlegend = _getParts(active.legend, dir);\n\t\t\tif(active.xAxis)\n\t\t\t\txAxis = _getParts(active.xAxis, dir);\n\t\t\tif(active.series)\n\t\t\t\tactiveVals = active.series.filter(val => legend.indexOf(val.range) == -1 && xAxis.indexOf(val.range) == -1);\n\t\t}\n\n\t\tdata = _getDataParts(data);\n\t\tlet colorIndex = 0;\n\t\tlet firstRange = 1;\n\t\tdata.forEach(subdata => {\n\t\t\tconst series = isRange(subdata) ? range(subdata, view) : null;\n\t\t\tif(series){\n\t\t\t\tconst start = dir ? series[0] : series[1];\n\t\t\t\tconst end = dir ? series[2] : series[3];\n\n\t\t\t\tlet inActiveSeries;\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tconst range = dir ? toRange(i, series[1], i, series[3], series[4]) : toRange(series[0], i, series[2], i, series[4]);\n\t\t\t\t\tconst seria = arr.find(activeVals, val => val.range == range && (!val.active || val.active == subdata));\n\n\t\t\t\t\tif(seria){\n\t\t\t\t\t\tif(!seria.active)\n\t\t\t\t\t\t\tseria.active = subdata;\n\t\t\t\t\t\tinActiveSeries = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tconst range = dir ? toRange(i, series[1], i, series[3], series[4]) : toRange(series[0], i, series[2], i, series[4]);\n\t\t\t\t\tif(legend.indexOf(range) != -1 || xAxis.indexOf(range) != -1)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tconst activeVal = activeVals.filter(val => val.range == range && val.active == subdata)[0];\n\n\t\t\t\t\tif(inActiveSeries && !activeVal && !(oldLeftColumn && firstRange && i == start))\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tvals.push(activeVal || {\n\t\t\t\t\t\tactive: subdata,\n\t\t\t\t\t\trange,\n\t\t\t\t\t\tmarker: \"square\",\n\t\t\t\t\t\ttooltip: 1,\n\t\t\t\t\t\tcolor: _getColor(colorIndex)\n\t\t\t\t\t});\n\n\t\t\t\t\tcolorIndex++;\n\t\t\t\t}\n\t\t\t\tfirstRange = 0;\n\t\t\t}\n\t\t});\n\t}\n\treturn vals;\n}\n\nexport function _getParts(ranges, dir, dataRange){\n\tconst parts = [];\n\n\tranges = _getDataParts(ranges);\n\tranges.forEach(subRange => {\n\t\tsubRange = isRange(subRange) ? range(subRange) : null;\n\t\tif(subRange){\n\t\t\tconst start = dir ? subRange[0] : subRange[1];\n\t\t\tconst end = dir ? subRange[2] : subRange[3];\n\n\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\tconst range = dir ?\n\t\t\t\t\ttoRange(i, subRange[1], i, subRange[3], subRange[4]):\n\t\t\t\t\ttoRange(subRange[0], i, subRange[2], i, subRange[4]);\n\n\t\t\t\tparts.push(dataRange ? dataRange[range] : range);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn parts;\n}\n\nexport function _normalizeConfig(config){\n\tif(typeof(config.xAxis) != \"object\")\n\t\tconfig.xAxis = {fromData: !!config.xAxis};\n\n\tif(typeof(config.legend) != \"object\")\n\t\tconfig.legend = {fromData: !!config.legend};\n\n\tconfig.legend = webix.extend(config.legend, {\n\t\tlayout:\"x\",\n\t\talign:\"center\",\n\t\tvalign:\"bottom\"\n\t});\n\n\tif(!config.scale)\n\t\tconfig.scale = {\n\t\t\tlines:1\n\t\t};\n\n\treturn config;\n}\n\nfunction _getColor(index){\n\tconst colors = [\n\t\t\"#e06666\", \"#6aa84f\", \"#3c78d8\", \"#e69138\", \"#783f04\", \"#134f5c\", \"#674ea7\", \"#c27ba0\"\n\t];\n\treturn colors[index%colors.length];\n}\n\nfunction getRangeCols(r1,c1,r2,c2,sheetName,lastIndex){\n\tconst data = [];\n\tconst rangeToData = {};\n\tfor (let i = r1, rind = 0; i <= r2; i++, rind++){\n\t\tdata[rind] = {};\n\t\tfor (let j = c1, cind = lastIndex; j <= c2; j++, cind++){\n\t\t\tif(i == r2){\n\t\t\t\trangeToData[`${sheetName ? sheetName+\"!\" : \"\"}${encode[j]}${r1}:${encode[j]}${r2}`] = `data${cind}`;\n\t\t\t\tlastIndex++;\n\t\t\t}\n\t\t\tdata[rind][`data${cind}`] = this.getValue(i-1,j-1);\n\t\t}\n\t}\n\treturn [data, rangeToData, lastIndex];\n}\n\nfunction getRangeRows(r1,c1,r2,c2,sheetName,lastIndex){\n\tconst data = [];\n\tconst rangeToData = {};\n\tfor (let i = c1, cind = 0; i <= c2; i++, cind++){\n\t\tdata[cind] = {};\n\t\tfor (let j = r1, rind = lastIndex; j <= r2; j++, rind++){\n\t\t\tif(i == c2){\n\t\t\t\trangeToData[`${sheetName ? sheetName+\"!\" : \"\"}${encode[c1]}${j}:${encode[c2]}${j}`] = `data${rind}`;\n\t\t\t\tlastIndex++;\n\t\t\t}\n\t\t\tdata[cind][`data${rind}`] = this.getValue(j-1,i-1);\n\t\t}\n\t}\n\treturn [data, rangeToData, lastIndex];\n}","import {range, toRange} from \"./helpers/column_names\";\nimport {_getSeries, _isPie, _normalizeConfig, _getDataParts} from \"./operations/views\";\n\nconst labels = webix.i18n.spreadsheet.labels;\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\tconst activeSkin = webix.skin.$active;\n\tconst padding = activeSkin.dataPadding-2;\n\tconst margin = activeSkin.layoutMargin.form;\n\n\treturn {\n\t\twidth:440,\n\t\thidden: true,\n\t\tid:\"chartEditor\",\n\t\tcss:\"ssheet_chart\",\n\t\trows:[\n\t\t\t{\n\t\t\t\theight: activeSkin.barHeight,\n\t\t\t\tcss: \"ssheet_chart_wizard_head\",\n\t\t\t\tpadding: { left:4 },\n\t\t\t\tcols: [\n\t\t\t\t\t{ view:\"icon\", inputHeight:activeSkin.inputHeight, hotkey:\"esc\", icon:\"webix_ssheet_icon ssi-arrow-left\", click: () => closeEditor(view)  },\n\t\t\t\t\t{ type:\"header\", borderless:true, template: labels[\"chart-edit\"] }\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"form\",\n\t\t\t\tcomplexData:true,\n\t\t\t\tborderless: true,\n\t\t\t\tpadding:{\n\t\t\t\t\ttop: 0\n\t\t\t\t},\n\t\t\t\telementsConfig:{\n\t\t\t\t\tlabelWidth:184\n\t\t\t\t},\n\t\t\t\telements:[{\n\t\t\t\t\tview:\"tabview\",\n\t\t\t\t\tid:\"chartTabs\",\n\t\t\t\t\tcells:[\n\t\t\t\t\t\t{ id:\"common\", borderless:true, type:\"form\", paddingX:0, header:labels[\"chart-common\"], rows:[\n\t\t\t\t\t\t\t{view:\"scrollview\", body:{\n\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\taddRichselect(\"type\", \"chart-type\", getTypes()),\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"stacked-chart\"], name:\"stacked\", hidden:true},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"horizontal-chart\"], name:\"horizontal\", hidden:true},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-pie-3d\"], name:\"3D\", batch:\"pie\"},\n\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-range\"], name:\"range\"},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-col-xAxis\"], name:\"xAxis.fromData\", batch:\"axis\"},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-row-legend\"], name:\"legend.fromData\"},\n\t\t\t\t\t\t\t\t\t{ view:\"radio\", label:labels[\"chart-data-from\"], name:\"dataSeries\", vertical:true, options:[\n\t\t\t\t\t\t\t\t\t\t{id:\"columns\", value:labels[\"chart-columns\"]},\n\t\t\t\t\t\t\t\t\t\t{id:\"rows\", value:labels[\"chart-rows\"]}\n\t\t\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{ id:\"advanced\", borderless:true, type:\"form\", paddingX:0, padding:{bottom:0}, header:labels[\"chart-series\"], rows:[\n\t\t\t\t\t\t\t{ view: \"ssheet-series\", name:\"series\" },\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{ id:\"extras\", borderless:true, type:\"form\", paddingX:0, header:labels[\"chart-extras\"], rows:[\n\t\t\t\t\t\t\t{view:\"scrollview\", body:{\n\t\t\t\t\t\t\t\tview: \"accordion\",\n\t\t\t\t\t\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\t\t\t\t\t\tcss: \"webix_ssheet_accordion\",\n\t\t\t\t\t\t\t\tmulti: true,\n\t\t\t\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-legend\"], body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view: \"text\", label:labels[\"chart-legend-range\"], name:\"legend.range\"},\n\t\t\t\t\t\t\t\t\t\t\taddRichselect(\"legend.align\", \"chart-legend-align\", getLegendAlign()),\n\t\t\t\t\t\t\t\t\t\t\taddRichselect(\"legend.valign\", \"chart-legend-valign\", getLegendValign())\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-scale\"], batch:\"axis\", id:\"scale\", body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-lines\"], name:\"scale.lines\", batch:\"axis\"},\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-radar-circle\"], name:\"scale.circle\", hidden:true},\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"chart-scale-color\"], name:\"scale.color\", batch:\"axis\"}\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-x-axis\"], batch:\"axis\", body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-xAxis-range\"], name:\"xAxis.range\", range:true, batch:\"axis\" },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-xAxis-title\"], name:\"xAxis.title\", batch:\"axisTitle\" },\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-y-axis\"], batch:\"axis\", body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-title\"], name:\"yAxis.title\", batch:\"axisTitle\" },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-origin\"], name:\"origin\", batch:\"axis\", attributes:{ type:\"number\" } },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"label\", label:labels[\"chart-yAxis-note\"], css:\"ssheet_note\", height:20},\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-start\"], name:\"yAxis.start\", batch:\"axis\", attributes:{ type:\"number\" } },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-end\"], name:\"yAxis.end\", batch:\"axis\", attributes:{ type:\"number\" } },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-step\"], name:\"yAxis.step\", batch:\"axis\", attributes:{ type:\"number\" } }\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]\n\t\t\t\t}]\n\t\t\t}\n\t\t]\n\t};\n}\n\nfunction ready(view){\n\tconst chartEditor = view.$$(\"chartEditor\");\n\tconst form = chartEditor.queryView(\"form\");\n\tconst elements = form.elements;\n\n\tview.attachEvent(\"onCommand\", action => {\n\t\tif(action.id == \"add-chart\"){\n\t\t\tconst config = action.config;\n\t\t\tlet values = config && config.config || {};\n\n\t\t\tchartEditor.show();\n\n\t\t\tview.$handleSelection = function(st, end, a, b){\n\t\t\t\tconst focus = webix.UIManager.getFocus();\n\n\t\t\t\tif(chartEditor.queryView(view => view == focus)){\n\t\t\t\t\tif(focus == elements.range || focus == elements[\"legend.range\"]){\n\t\t\t\t\t\tlet val = focus.getValue();\n\t\t\t\t\t\tconst last = val.lastIndexOf(\",\");\n\n\t\t\t\t\t\tval = last == -1 ? \"\" : val.substring(0, last + 1);\n\t\t\t\t\t\tfocus.setValue(val + a+\":\"+b);\n\t\t\t\t\t}\n\t\t\t\t\telse if(focus.config.range)\n\t\t\t\t\t\tfocus.setValue(a+\":\"+b);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tform.clear();\n\t\t\tview.$$(\"chartTabs\").setValue(\"common\");\n\n\t\t\tvalues = _normalizeConfig(values);\n\n\t\t\tvalues.range = config ? config.data : view.getSelectedRange();\n\t\t\tchartEditor.viewId = action.viewid ? action.viewid : view.views.add(null, null, \"chart\", values.range, values);\n\n\t\t\tview.callEvent(\"onUIEditStart\", [chartEditor.viewId, \"chart\"]);\n\n\t\t\tupdateValign(values.legend.align);\n\t\t\tupdateAlign(values.legend.valign);\n\n\t\t\tconst formValues = inValues(values);\n\t\t\tform.setValues(formValues);\n\t\t\tupdateType(formValues.type);\n\n\t\t\tif(!_isPie(formValues.type) && values.legend.fromData)\n\t\t\t\tupdateLegendRange(values.legend.fromData);\n\t\t\tif(values.xAxis.fromData)\n\t\t\t\tupdateXaxisRange(values.xAxis.fromData);\n\n\t\t\tupdateSeries();\n\n\t\t\tform.queryView(\"accordionitem\", \"all\").forEach(view => view.expand());\n\n\t\t\telements.range.focus();\n\t\t}\n\t});\n\n\tview.attachEvent(\"onUIEditStart\", (id, type)=>{\n\t\tif(chartEditor.isVisible() && type != \"chart\")\n\t\t\tcloseEditor(view);\n\t});\n\n\tview.attachEvent(\"onCommand\", obj =>{\n\t\tif(obj.id == \"close-ui-editor\" && chartEditor.isVisible())\n\t\t\tcloseEditor(view);\n\t});\n\n\tview.attachEvent(\"onAction\", (id, values) => {\n\t\tif(id == \"add-view\" && !values.newValue){\n\t\t\tif(chartEditor.isVisible() && chartEditor.viewId == values.row)\n\t\t\t\tcloseEditor(view);\n\t\t}\n\t});\n\n\tform.attachEvent(\"onChange\", function(val, oldVal){\n\t\tconst source = this.$eventSource;\n\n\t\t//upper case ranges\n\t\tif(source === elements.range || source === elements[\"xAxis.range\"] || source === elements[\"legend.range\"]){\n\t\t\tconst parts = val.split(\"!\");\n\t\t\tconst upper = parts.length == 2 ? parts[0]+\"!\"+parts[1].toUpperCase() : val.toUpperCase();\n\n\t\t\tif(val != upper){\n\t\t\t\tval = upper;\n\t\t\t\tsetSilentValue(source, upper);\n\t\t\t}\n\t\t}\n\n\t\tswitch (source){\n\t\t\tcase elements.type:\n\t\t\t\tupdateType(val);\n\t\t\t\tbreak;\n\t\t\tcase elements.horizontal:\n\t\t\t\tswitchRowsCols();\n\t\t\t\tbreak;\n\t\t\tcase elements.range:\n\t\t\tcase elements.dataSeries:\n\t\t\t\tif(this.$eventSource == elements.dataSeries)\n\t\t\t\t\tswitchRowsCols();\n\t\t\t\tif(elements[\"legend.fromData\"].getValue())\n\t\t\t\t\thandlePieLegend();\n\t\t\t\tif(elements[\"xAxis.fromData\"].getValue())\n\t\t\t\t\tsetSilentValue(elements[\"xAxis.range\"], getLeftColumn());\n\t\t\t\tupdateSeries();\n\t\t\t\tbreak;\n\t\t\tcase elements[\"xAxis.fromData\"]:\n\t\t\t\tupdateXaxisRange(val);\n\n\t\t\t\tupdateSeries(oldVal);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.fromData\"]:\n\t\t\t\tupdateLegendRange(val);\n\n\t\t\t\tupdateSeries(_isPie(elements.type.getValue()) ? oldVal : 0);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.align\"]:\n\t\t\t\tupdateValign(val);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.valign\"]:\n\t\t\t\tupdateAlign(val);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"xAxis.range\"]:\n\t\t\t\tif(elements[\"xAxis.fromData\"].getValue())\n\t\t\t\t\tsetSilentValue(elements[\"xAxis.fromData\"]);\n\t\t\t\tupdateRange(val, oldVal);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.range\"]:\n\t\t\t\tif(elements[\"legend.fromData\"].getValue())\n\t\t\t\t\tsetSilentValue(elements[\"legend.fromData\"]);\n\t\t\t\tupdateRange(val, oldVal);\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst config = form.getValues();\n\t\tview.views.update(chartEditor.viewId, config.range, config);\n\t});\n\n\telements.series.attachEvent(\"onRangeChange\", updateRange);\n\n\tfunction handlePieLegend(){\n\t\tif(elements[\"legend.fromData\"].getValue()){\n\t\t\tconst handler = _isPie(elements.type.getValue()) ? getLeftColumn : getTopRow;\n\t\t\tsetSilentValue(elements[\"legend.range\"], handler());\n\t\t}\n\t}\n\n\tfunction updateLegendRange(val){\n\t\tif(val){\n\t\t\tconst legendRange = elements[\"legend.range\"].getValue();\n\t\t\tupdateRange(\"\", legendRange);\n\t\t}\n\n\t\tconst handler = _isPie(elements.type.getValue()) ? getLeftColumn : getTopRow;\n\t\tval = val ? handler() : \"\";\n\n\t\tsetSilentValue(elements[\"legend.range\"], val);\n\t}\n\n\tfunction updateXaxisRange(val){\n\t\tif(val){\n\t\t\tconst xAxisRange = elements[\"xAxis.range\"].getValue();\n\t\t\tupdateRange(\"\", xAxisRange);\n\t\t}\n\n\t\tval = val ? getLeftColumn() : \"\";\n\n\t\tsetSilentValue(elements[\"xAxis.range\"], val);\n\t}\n\n\tfunction setSilentValue(element, val){\n\t\telement.blockEvent();\n\t\telement.setValue(val);\n\t\telement.unblockEvent();\n\t}\n\n\tfunction getLeftColumn(){\n\t\tconst data = elements.range.getValue();\n\t\tconst dataSeries = elements.dataSeries.getValue();\n\t\tconst legendRange = elements[\"legend.range\"].getValue();\n\t\tlet leftColumn = \"\";\n\n\t\tconst series = _getSeries(view, data, dataSeries, {legend: legendRange || \"\"});\n\n\t\tif(series.length)\n\t\t\tleftColumn = series[0].range;\n\n\t\treturn leftColumn;\n\t}\n\n\tfunction getTopRow(){\n\t\tconst data = _getDataParts(elements.range.getValue());\n\t\tconst dir = elements.dataSeries.getValue() == \"rows\";\n\t\tconst xAxisRange = _getDataParts(elements[\"xAxis.range\"].getValue());\n\t\tlet topRow = [];\n\n\t\tdata.forEach(subdata => {\n\t\t\tif(xAxisRange.indexOf(subdata) == -1){\n\t\t\t\tconst part = range(subdata, view);\n\t\t\t\tif(part){\n\t\t\t\t\tconst range = dir ?\n\t\t\t\t\t\ttoRange(part[0], part[1], part[2], part[1], part[4]) :\n\t\t\t\t\t\ttoRange(part[0], part[1], part[0], part[3], part[4]);\n\n\t\t\t\t\tif(data.indexOf(range) == -1)\n\t\t\t\t\t\ttopRow.push(range);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn topRow.join(\",\");\n\t}\n\n\tfunction updateRange(val, oldVal){\n\t\tlet data = elements.range.getValue();\n\n\t\tconst legend = elements[\"legend.range\"].getValue();\n\t\tconst xAxis = elements[\"xAxis.range\"].getValue();\n\t\tconst dataSeries = elements.dataSeries.getValue();\n\n\t\tconst series = _getSeries(view, data, dataSeries, {legend, xAxis});\n\n\t\toldVal = _getDataParts(oldVal);\n\n\t\tdata = _getDataParts(data).filter(val => oldVal.indexOf(val) == -1);\n\n\t\tif(val){\n\t\t\tval = _getDataParts(val);\n\t\t\tval.forEach(range => {\n\t\t\t\tconst exist = series.filter(obj => obj.range == range);\n\t\t\t\tif(!exist.length)\n\t\t\t\t\tdata.push(range);\n\t\t\t});\n\t\t}\n\n\t\tsetSilentValue(elements.range, data.join(\",\"));\n\t}\n\n\tfunction updateAlign(val){\n\t\tconst align = elements[\"legend.align\"];\n\t\tconst list = align.getList();\n\n\t\tif(val == \"middle\"){\n\t\t\tif(list.exists(\"center\"))\n\t\t\t\tlist.remove(\"center\");\n\t\t}\n\t\telse if(!list.exists(\"center\"))\n\t\t\tlist.add({id:\"center\", value:labels[\"chart-legend-center\"]}, 1);\n\t}\n\n\tfunction updateValign(val){\n\t\tconst align = elements[\"legend.valign\"];\n\t\tconst list = align.getList();\n\n\t\tif(val == \"center\"){\n\t\t\tif(list.exists(\"middle\"))\n\t\t\t\tlist.remove(\"middle\");\n\t\t}\n\t\telse if(!list.exists(\"middle\"))\n\t\t\tlist.add({id:\"middle\", value:labels[\"chart-legend-middle\"]}, 1);\n\t}\n\n\tfunction updateType(val){\n\t\thandlePieLegend();\n\n\t\tconst isPie = _isPie(val);\n\t\tconst isBar = val == \"bar\";\n\t\tconst series = elements.series;\n\t\tconst markersVisible = val == \"radar\" || val == \"line\" || val == \"spline\" || val == \"scatter\";\n\n\t\tseries.hideSubviews(\"marker\", markersVisible);\n\t\tseries.hideSubviews(\"label\", markersVisible || isBar || isPie);\n\t\tseries.hideSubviews(\"color\", !isPie);\n\n\t\tif(val == \"area\" || isBar) elements.stacked.show();\n\t\telse hideField(elements.stacked);\n\n\t\tif(isBar) elements.horizontal.show();\n\t\telse hideField(elements.horizontal);\n\n\t\tif(val == \"radar\")\n\t\t\telements[\"scale.circle\"].show();\n\t\telse\n\t\t\thideField(elements[\"scale.circle\"]);\n\n\t\tif(isPie){\n\t\t\thideBatch(\"axis\");\n\t\t\thideBatch(\"pie\", true);\n\t\t}\n\t\telse{\n\t\t\thideBatch(\"axis\", true);\n\t\t\thideBatch(\"pie\");\n\t\t}\n\n\t\tif(isPie || val == \"radar\")\n\t\t\thideBatch(\"axisTitle\");\n\t\telse\n\t\t\thideBatch(\"axisTitle\", true);\n\n\t\tswitchRowsCols();\n\t}\n\n\tfunction updateSeries(oldXaxis){\n\t\tlet data = elements.range.getValue();\n\n\t\tlet series = elements.series.getValue();\n\t\tconst legend = elements[\"legend.range\"].getValue();\n\t\tconst xAxis = elements[\"xAxis.range\"].getValue();\n\t\tconst dataSeries = elements.dataSeries.getValue();\n\n\t\tseries = _getSeries(view, data, dataSeries, {series, legend, xAxis}, oldXaxis);\n\n\t\telements.series.setValue(series);\n\t}\n\n\tfunction switchRowsCols(){\n\t\tconst dir = elements.dataSeries.getValue() == \"rows\";\n\t\tconst horizontal = elements.horizontal.getValue();\n\t\tconst pie = _isPie(elements.type.getValue());\n\n\t\tif((!pie && dir) || (!dir && pie)){\n\t\t\telements[\"legend.fromData\"].define(\"label\", labels[\"chart-col-legend\"]);\n\t\t\telements[\"xAxis.fromData\"].define(\"label\", labels[\"chart-row-\" + (horizontal ? \"yAxis\" : \"xAxis\")]);\n\t\t}\n\t\telse{\n\t\t\telements[\"legend.fromData\"].define(\"label\", labels[\"chart-row-legend\"]);\n\t\t\telements[\"xAxis.fromData\"].define(\"label\", labels[\"chart-col-\" + (horizontal ? \"yAxis\" : \"xAxis\")]);\n\t\t}\n\t\telements[\"legend.fromData\"].refresh();\n\t\telements[\"xAxis.fromData\"].refresh();\n\t}\n\n\tfunction hideField(field){\n\t\tif(field.setValue)\n\t\t\tsetSilentValue(field);\n\t\tfield.hide();\n\t}\n\n\tfunction hideBatch(batch, visible){\n\t\tform.queryView({batch:batch}, \"all\").forEach(field => {\n\t\t\tif(visible)\n\t\t\t\tfield.show();\n\t\t\telse\n\t\t\t\thideField(field);\n\t\t});\n\t}\n\n\tfunction inValues(values){\n\t\t[\n\t\t\t{value:\"H\", name:\"horizontal\"},\n\t\t\t{value:\"stacked\"},\n\t\t\t{value:\"3D\"}\n\t\t].forEach(property => {\n\t\t\tif(values.type.indexOf(property.value) != -1){\n\t\t\t\tvalues[property.name || property.value] = 1;\n\t\t\t\tvalues.type = values.type.replace(property.value, \"\").toLowerCase();\n\t\t\t}\n\t\t});\n\n\t\treturn values;\n\t}\n}\n\nfunction closeEditor(view){\n\tconst chartEditor = view.$$(\"chartEditor\");\n\tview.callEvent(\"onUIEditStop\", [chartEditor.viewId, \"chart\"]);\n\tchartEditor.viewId = null;\n\tview.$handleSelection = null;\n\tchartEditor.hide();\n}\n\nfunction addRichselect(name, label, data){\n\treturn { view: \"richselect\", name:name, label:labels[label], suggest:{\n\t\tview: \"ssheet-form-suggest\",\n\t\tdata: data\n\t}};\n}\n\nexport function getTypes(sparkline){\n\tconst types = [\n\t\t{id:\"line\", value:labels[\"line-chart\"]},\n\t\t{id:\"spline\", value:labels[\"spline-chart\"]},\n\t\t{id:\"splineArea\", value:labels[\"splinearea-chart\"]},\n\t\t{id:\"area\", value:labels[\"area-chart\"]},\n\t\t{id:\"bar\", value:labels[\"bar-chart\"]},\n\t\t{id:\"radar\", value:labels[\"radar-chart\"]},\n\t\t{id:\"pie\", value:labels[\"pie-chart\"]},\n\t\t{id:\"donut\", value:labels[\"donut-chart\"]}\n\t];\n\tif(!sparkline)\n\t\ttypes.push({id:\"scatter\", value:labels[\"scatter-chart\"]});\n\treturn types;\n}\n\nfunction getLegendAlign(){\n\treturn [\n\t\t{id:\"left\", value:labels[\"chart-legend-left\"]},\n\t\t{id:\"center\", value:labels[\"chart-legend-center\"]},\n\t\t{id:\"right\", value:labels[\"chart-legend-right\"]}\n\t];\n}\n\nfunction getLegendValign(){\n\treturn [\n\t\t{id:\"top\", value:labels[\"chart-legend-top\"]},\n\t\t{id:\"middle\", value:labels[\"chart-legend-middle\"]},\n\t\t{id:\"bottom\", value:labels[\"chart-legend-bottom\"]}\n\t];\n}","import {Dialog} from \"./common\";\nimport {range} from \"../helpers/column_names\";\nimport {parseChart} from \"../mathematics/writer\";\nimport {getTypes} from \"../chart\";\n\nexport const action = \"add-sparkline\";\n\nconst labels = webix.i18n.spreadsheet.labels;\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tthis.cell = this.view.getSelectedId();\n\t\tif(!this.cell)\n\t\t\treturn false;\n\n\t\tconst els = form.elements;\n\t\tthis.view.$handleSelection = function(st, end, a, b){\n\t\t\tels.range.setValue(a+\":\"+b);\n\t\t\treturn false;\n\t\t};\n\n\t\tels.range.setValue(\"\");\n\n\t\t//sync state of dialog to data with  the selected cell\n\t\tlet value = this.view.getCellValue(this.cell.row, this.cell.column);\n\t\tlet data = parseChart(value);\n\t\tif (data){\n\t\t\tform.blockEvent();\n\t\t\tels.type.setValue(data.type);\n\t\t\tels.range.setValue(data.range);\n\t\t\tif (data.color){\n\t\t\t\tels.color_def.setValue(data.color);\n\t\t\t\tels.color_pos.setValue(data.color);\t\t\n\t\t\t}\n\t\t\tif (data.negativeColor)\n\t\t\t\tels.color_neg.setValue(data.negativeColor);\n\t\t\tif (data.horizontal)\n\t\t\t\tels.horizontal.setValue(1);\n\n\t\t\tform.unblockEvent();\n\t\t\tthis.renderPreview();\n\t\t}\t\n\n\t\tels.range.focus();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead:labels[\"sparkline-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\", visibleBatch:1, on:{ onChange : ()=> this.renderPreview() },  elements:[\n\t\t\t\t\t{view: \"richselect\", name:\"type\", label:labels[\"sparkline-type\"], value:\"line\", labelPosition:\"left\", suggest:{\n\t\t\t\t\t\tview:  \"ssheet-form-suggest\",\n\t\t\t\t\t\tdata:getTypes(true)\n\t\t\t\t\t}, on:{\n\t\t\t\t\t\tonChange: function(type){\n\t\t\t\t\t\t\tconst form = this.getFormView();\n\t\t\t\t\t\t\tswitch(type){\n\t\t\t\t\t\t\t\tcase \"pie\":\n\t\t\t\t\t\t\t\tcase \"donut\":\n\t\t\t\t\t\t\t\t\tform.showBatch(3);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"bar\":\n\t\t\t\t\t\t\t\t\tform.showBatch(2);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tform.showBatch(1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"text\", label:labels[\"sparkline-range\"], name:\"range\"},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"sparkline-color\"], name:\"color_def\", id:\"add_sparkline_color\", value:\"#6666FF\", batch:\"1\"},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"sparkline-positive\"], name:\"color_pos\", value:\"#6666FF\", batch:\"2\"},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"sparkline-negative\"], name:\"color_neg\", value:\"#FF6666\", batch:\"2\"},\n\t\t\t\t\t{ view:\"checkbox\", label:labels[\"horizontal-chart\"], name:\"horizontal\", batch:\"2\"},\n\t\t\t\t\t{ view:\"formlate\", name:\"preview\", borderless:true, css:\"webix_ssheet_preview\", height:50 }\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tcheckRange(text){\n\t\tif(text && range(text, this.view))\n\t\t\treturn true;\n\t\tthis.view.alert({text:labels[\"error-range\"]});\n\t}\n\tokClick(){\n\t\tconst form = this.$dialog.getBody();\n\t\tconst data = form.getValues();\n\t\tdata.range = data.range.toUpperCase();\n\n\t\tif (data.range && this.checkRange(data.range)){\n\t\t\tconst config = this.sparkConfig(data);\n\n\t\t\tthis.view.addSparkline(this.cell.row, this.cell.column, config);\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\trenderPreview(){\n\t\tconst form = this.$dialog.getBody();\n\t\tconst data = form.getValues();\n\t\tdata.range = data.range.toUpperCase();\n\n\t\tif (data.range && this.checkRange(data.range)){\n\t\t\tconst pos = range(data.range, this.view);\n\t\t\tconst values = this.view._mPage.getRange(pos[0]-1, pos[1]-1, pos[2]-1, pos[3]-1);\n\t\t\tconst config = this.sparkConfig(data, true);\n\n\t\t\tfor(let i = 0; i < values.length; i++)\n\t\t\t\tvalues[i] = values[i]||0;\n\t\t\tform.elements.preview.setValue(webix.Sparklines.getTemplate(config)(values, { width:200, height: 40 }));\n\t\t}\n\t\telse\n\t\t\tform.elements.preview.setValue(\"\");\n\t}\n\n\tsparkConfig(config, preview){\n\t\tconfig = webix.copy(config);\n\t\tconst form = this.$dialog.getBody();\n\n\t\tif (config.type === \"bar\"){\n\t\t\tconfig.color = config.color_pos;\n\t\t\tconfig.negativeColor = config.color_neg;\n\t\t}\n\t\telse if(form.elements.color_def.isVisible())\n\t\t\tconfig.color = config.color_def;\n\t\telse if(config.type == \"donut\" && preview)\n\t\t\twebix.extend(config, {type:\"pie\", donut:1}, true);\n\n\t\treturn config;\n\t}\n}","import {Dialog} from \"./common\";\nimport {isRange, toSheetRange, escapeSheet} from \"../helpers/column_names\";\nimport {getLastCharIndex} from \"../mathematics/parser\";\n\nexport const action = \"add-range\";\n\nexport class DialogBox extends Dialog{\n\t$show(box){\n\t\tconst form = box.$$(\"form\");\n\n\t\tform.clear();\n\t\tform.clearValidation();\n\n\t\tconst elements = form.elements;\n\n\t\telements.name.focus();\n\n\t\tlet selectedCell = this.view.getSelectedRange();\n\t\tif(selectedCell)\n\t\t\tselectedCell = escapeSheet(this.view.getActiveSheet())+\"!\"+selectedCell;\n\n\t\tform.setValues({\n\t\t\trange: selectedCell,\n\t\t\tscope: \"$global\"\n\t\t});\n\n\t\tthis._updateData();\n\n\t\tthis.view._rangeDialog = true;\n\t\tthis.view.$handleSelection = (st, end, a, b)=>{\n\t\t\tform.elements.range.setValue(toSheetRange(a,b,this.view.getActiveSheet()));\n\t\t\treturn false;\n\t\t};\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t\tthis.view._rangeDialog = null;\n\t}\n\tsaveClick(){\n\t\tconst view = this.view;\n\t\tconst form = this.$dialog.$$(\"form\");\n\t\tconst data = form.getValues();\n\n\t\tif(data.range){\n\t\t\tconst rangeParts = data.range.split(\"!\");\n\n\t\t\tif(rangeParts.length == 1)\n\t\t\t\trangeParts.unshift( escapeSheet(view.getActiveSheet()) );\n\n\t\t\tdata.range = rangeParts[0]+\"!\"+rangeParts[1].toUpperCase();\n\t\t}\n\n\t\tdata.name = data.name.toUpperCase();\n\n\t\tform.setValues(data);\n\n\t\tif (form.validate()){\n\t\t\tconst table = this.$dialog.$$(\"table\");\n\n\t\t\tif(data.id){\n\t\t\t\tconst oldData = table.getItem(data.id);\n\n\t\t\t\tview.ranges.remove(oldData.name, this._getScope(oldData));\n\t\t\t\ttable.updateItem(data.id, data);\n\t\t\t}\n\t\t\telse\n\t\t\t\ttable.add(data);\n\n\t\t\tview.ranges.add(\n\t\t\t\tdata.name,\n\t\t\t\tdata.range,\n\t\t\t\tthis._getScope(data)\n\t\t\t);\n\n\t\t\tview.refresh();\n\n\t\t\ttable.unselect();\n\t\t\tform.setValues({scope: \"$global\"});\n\t\t}\n\t}\n\t_getScope(data){\n\t\treturn data.scope == \"$global\" ? true : data.scope;\n\t}\n\tremoveRange(id){\n\t\tconst view = this.view;\n\t\tview.confirm({\n\t\t\ttext: webix.i18n.spreadsheet.labels[\"range-remove-confirm\"]\n\t\t}).then(()=>{\n\t\t\tconst table = this.$dialog.$$(\"table\");\n\t\t\tconst item = table.getItem(id);\n\n\t\t\tview.ranges.remove(item.name, this._getScope(item));\n\n\t\t\tview.refresh();\n\t\t\ttable.remove(id);\n\t\t});\n\t}\n\teditRange(id){\n\t\tconst form = this.$dialog.$$(\"form\");\n\t\tconst table = this.$dialog.$$(\"table\");\n\n\t\tform.clearValidation();\n\t\tconst item = webix.copy(table.getItem(id));\n\n\t\tform.setValues(item);\n\t}\n\t$init(){\n\t\tthis.view.attachEvent(\"onSheetRename\", (name, newName)=> this._updateData(name, newName));\n\t\tthis.view.attachEvent(\"onSheetRemove\", (name)=> this._updateData(name));\n\t\tthis.view.attachEvent(\"onSheetAdd\", ()=> this._updateData());\n\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\tconst theform = {\n\t\t\tpadding:0,\n\t\t\ttype: \"clean\",\n\t\t\tcols:[\n\t\t\t\t{ view: \"ssheet-dialog-table\", id: \"table\", borderless:true, columns:[\n\t\t\t\t\t{ id:\"name\", header:locale[\"range-name\"], width: 120 },\n\t\t\t\t\t{ id:\"range\", header:locale[\"range-cells\"], width: 150 },\n\t\t\t\t\t{ id:\"scope\", header:locale[\"range-scope\"], width: 95, template: obj => {\n\t\t\t\t\t\treturn obj.scope == \"$global\" ? locale[\"range-global\"] : obj.scope;\n\t\t\t\t\t}},\n\t\t\t\t\t{ template:\"<span class='webix_icon ssheet_ranges_edit wxi-pencil'></span>\", width:44 },\n\t\t\t\t\t{ template:\"<span class='webix_icon ssheet_ranges_edit wxi-trash'></span>\", width:44 }\n\t\t\t\t],\n\t\t\t\tautowidth:true, height: 200, select:\"row\",\n\t\t\t\ton:{\n\t\t\t\t\tonBeforeSelect: id =>{\n\t\t\t\t\t\treturn id == this.$dialog.$$(\"form\").getValues().id;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonClick:{\n\t\t\t\t\t\"wxi-trash\":(ev, id) => this.removeRange(id),\n\t\t\t\t\t\"wxi-pencil\":(ev, id) => this.editRange(id)\n\t\t\t\t}},\n\t\t\t\t{ width: 270, view: \"form\", id:\"form\",\n\t\t\t\t\trules:{\n\t\t\t\t\t\tname: (_, obj)=> {\n\t\t\t\t\t\t\tconst notUnique = this.$dialog.$$(\"table\").find(item => {\n\t\t\t\t\t\t\t\treturn item.name == obj.name && item.scope == obj.scope && item.id != obj.id;\n\t\t\t\t\t\t\t}, true);\n\n\t\t\t\t\t\t\treturn !notUnique && !getLastCharIndex(obj.name);\n\t\t\t\t\t\t},\n\t\t\t\t\t\trange: isRange,\n\t\t\t\t\t\tscope: webix.rules.isNotEmpty\n\t\t\t\t\t},\n\t\t\t\t\telementsConfig:{\n\t\t\t\t\t\tlabelWidth: 95\n\t\t\t\t\t},\n\t\t\t\t\telements:[\n\t\t\t\t\t\t{ view: \"text\", name:\"name\", label: locale[\"range-name\"]},\n\t\t\t\t\t\t{ view: \"text\", name:\"range\", id:\"range\", label: locale[\"range-cells\"], on:{\n\t\t\t\t\t\t\tonFocus:() => this.view.showCell(this.$dialog.$$(\"range\").getValue(), true)\n\t\t\t\t\t\t}},\n\t\t\t\t\t\t{ view: \"richselect\", name:\"scope\", id:\"sheets\", label: locale[\"range-scope\"], suggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\t\tdata: []\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tmove:true,\n\t\t\thead: webix.i18n.spreadsheet.labels[\"range-title\"],\n\t\t\tautoheight: true,\n\t\t\twidth: 800,\n\t\t\tposition: \"center\",\n\t\t\tbody: theform,\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.saveClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\t_updateData(name, newName){\n\t\tif(!this.$dialog.isVisible())\n\t\t\treturn;\n\n\t\tconst ranges = this.view._mData.getRanges();\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\tconst table = this.$dialog.$$(\"table\");\n\t\tconst form = this.$dialog.$$(\"form\");\n\n\t\tlet editRange = table.getItem( form.getValues().id );\n\t\tif(editRange){\n\t\t\tlet rangeName = editRange.name;\n\n\t\t\tif(name == editRange.scope)\n\t\t\t\trangeName = newName ? newName+\"!\"+rangeName : null;\n\t\t\telse\n\t\t\t\trangeName = editRange.scope+\"!\"+rangeName;\n\n\t\t\teditRange = rangeName ? ranges.get(rangeName) : null;\n\t\t}\n\n\t\ttable.clearAll();\n\n\t\tconst allRanges = ranges.serialize();\n\t\tconst data = [];\n\n\t\tlet selectedId;\n\t\tfor(let i = 0; i < allRanges.length; i++){\n\t\t\tconst id = i+1;\n\t\t\tlet [name, range] = allRanges[i];\n \n\t\t\tif(editRange && ranges.get(name) == editRange)\n\t\t\t\tselectedId = id;\n\n\t\t\tconst nameParts = name.split(\"!\");\n\n\t\t\tdata.push({\n\t\t\t\tscope: nameParts.length == 1 ? \"$global\" : nameParts[0],\n\t\t\t\tname: nameParts[1] || nameParts[0],\n\t\t\t\trange,\n\t\t\t\tid\n\t\t\t});\n\t\t}\n\n\t\ttable.parse(data);\n\n\t\tform.setValues({id:selectedId}, true);\n\t\tif(selectedId)\n\t\t\ttable.select(selectedId);\n\n\t\tconst select = this.$dialog.$$(\"sheets\");\n\t\tconst selectList = select.getList();\n\n\t\tselectList.clearAll();\n\n\t\tconst sheets = [{\n\t\t\tid: \"$global\", value: locale[\"range-global\"]\n\t\t}];\n\t\tthis.view._sheets.forEach(sheet => {\n\t\t\tsheets.push({id:sheet.name, value: sheet.name});\n\t\t});\n\t\tselectList.parse(sheets);\n\n\t\tif(name){\n\t\t\tconst range = this.$dialog.$$(\"range\");\n\t\t\tconst rangeVal = range.getValue();\n\n\t\t\t//remove sheet\n\t\t\tnewName = newName || this.view.getActiveSheet();\n\n\t\t\tif(rangeVal.indexOf(escapeSheet(name)+\"!\") == 0)\n\t\t\t\trange.setValue(escapeSheet(newName)+\"!\"+rangeVal.split(\"!\")[1]);\n\n\t\t\tif(select.getValue() == name)\n\t\t\t\tselect.setValue(newName);\n\t\t}\n\t}\n}","import {Dialog} from \"./common\";\nimport {range} from \"../helpers/column_names\";\nimport group from \"../operations/undo_group\";\n\nexport const action = \"add-dropdown\";\n\nexport class DialogBox extends Dialog{\n\t$show(){\n\t\tlet form = this.$dialog.$$(\"form\");\n\t\tthis.cell = this.view.getSelectedId(true);\n\t\tif (!this.cell.length)\n\t\t\treturn false;\n\n\t\tform.clear();\n\n\t\t//restore previosly selected range\n\t\tconst value = this.view.getCellEditor(this.cell[0].row, this.cell[0].column);\n\t\tif(value)\n\t\t\tform.setValues({\n\t\t\t\trange: value.options,\n\t\t\t\tempty: value.empty\n\t\t\t});\n\n\t\tthis.view.$handleSelection = function(st, end, a, b){\n\t\t\tform.elements.range.setValue(a+\":\"+b);\n\t\t\treturn false;\n\t\t};\n\n\t\tform.elements.range.focus();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tposition:\"center\",\n\t\t\thead:webix.i18n.spreadsheet.labels[\"dropdown-title\"],\n\t\t\tmove: true,\n\t\t\tbody:{\n\t\t\t\tpadding:0,\n\t\t\t\tview:\"form\",\n\t\t\t\tid:\"form\",\n\t\t\t\telementsConfig: {\n\t\t\t\t\tlabelWidth: 130\n\t\t\t\t},\n\t\t\t\trows:[\n\t\t\t\t\t{ view:\"text\", label:webix.i18n.spreadsheet.labels[\"dropdown-range\"], name:\"range\" },\n\t\t\t\t\t{ view:\"checkbox\", label:webix.i18n.spreadsheet.labels[\"dropdown-empty-option\"], name:\"empty\" }\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst values = this.$dialog.$$(\"form\").getValues();\n\n\t\tif(!range(values.range, this.view))\n\t\t\tthis.view.alert({text:webix.i18n.spreadsheet.labels[\"error-range\"], type: \"alert-error\"});\n\t\telse{\n\t\t\tgroup.set(function(){\n\t\t\t\tfor (let i = 0; i < this.cell.length; i++)\n\t\t\t\t\tthis.view.setCellEditor(this.cell[i].row, this.cell[i].column, { editor:\"ss_richselect\", options:values.range, empty:values.empty });\n\t\t\t}, this);\n\t\t\tthis.close();\n\t\t}\n\t}\n}","import {range as getRangePos} from \"../helpers/column_names\";\nimport {cell_template} from \"../table\";\nimport * as arr from \"../helpers/array\";\nimport {serialize as getSpans} from \"../operations/spans\";\n\nclass Ranges{\n\tconstructor(view){\n\t\tthis._master = view;\n\t}\n\tclear(scope){\n\t\tconst sheet = typeof scope == \"string\" ? scope : this._master.getActiveSheet();\n\t\tconst ranges = this.serialize(sheet);\n\t\tranges.forEach(range => {\n\t\t\tif(scope === true){\n\t\t\t\tif(range[2])\n\t\t\t\t\tthis.remove(range[0], scope);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse\n\t\t\t\tthis.remove(range[0], scope);\n\t\t});\n\t}\n\t_normalizeName(name, scope){\n\t\tif(scope !== true)\n\t\t\tname = (scope || this._master.getActiveSheet())+\"!\"+name;\n\t\treturn name;\n\t}\n\t_normalizeRange(range, scope){\n\t\tconst rangeParts = range.split(\"!\");\n\t\tif(rangeParts.length == 1)\n\t\t\trange = (typeof scope == \"string\" ? scope : this._master.getActiveSheet()) + \"!\" + range;\n\t\treturn range;\n\t}\n\tadd(name, range, scope){\n\t\tconst view = this._master;\n\n\t\tview.callEvent(\"onAfterRangeSet\", [name, range, scope]);\n\n\t\tname = this._normalizeName(name, scope);\n\n\t\tview._mData.getRanges().add(name, this._normalizeRange(range, scope));\n\t\tview.callEvent(\"onMathRefresh\", []);\n\t}\n\tgetCode(name, scope){\n\t\tname = this._normalizeName(name, scope);\n\n\t\tconst range = this._master._mData.getRanges().get(name);\n\t\tif(range)\n\t\t\treturn range.source;\n\t}\n\tremove(name, scope){\n\t\tname = this._normalizeName(name, scope);\n\n\t\tthis._master._mData.getRanges().remove(name);\n\t\tthis._master.callEvent(\"onMathRefresh\", []);\n\t}\n\tparse(data, sheet){\n\t\tif(!data)\n\t\t\treturn;\n\t\tfor(let i = 0; i < data.length; i++){\n\t\t\tconst ranges = this._master._mData.getRanges();\n\t\t\tlet [name, range, globalRange] = data[i];\n\t\t\tname = this._normalizeName(name, globalRange||sheet);\n\n\t\t\tif(!ranges.get(name))\n\t\t\t\tranges.add(name, this._normalizeRange(range, sheet));\n\t\t}\n\t}\n\tserialize(sheet){\n\t\tsheet = sheet || this._master.getActiveSheet();\n\t\tconst allRanges = this._master._mData.getRanges().serialize();\n\t\tconst out = [];\n\n\t\tfor(let i = 0; i < allRanges.length; i++){\n\t\t\tconst arr = allRanges[i];\n\t\t\tconst nameParts = arr[0].split(\"!\");\n\t\t\tconst globalRange = nameParts.length == 1;\n\n\t\t\tif(globalRange || nameParts[0] == sheet)\n\t\t\t\tout.push([\n\t\t\t\t\tnameParts[ globalRange ? 0 : 1 ],\n\t\t\t\t\tarr[1],\n\t\t\t\t\tglobalRange\n\t\t\t\t]);\n\t\t}\n\n\t\treturn out;\n\t}\n\tgetRanges(sheet){\n\t\tconst data = this.serialize(sheet);\n\t\treturn data.map(arr => {\n\t\t\treturn {\n\t\t\t\tname: arr[0],\n\t\t\t\trange: arr[1],\n\t\t\t\tglobal: arr[2]\n\t\t\t};\n\t\t});\n\t}\n}\n\nexport function init(view) {\n\tview.ranges = new Ranges(view);\n\n\tview.attachEvent(\"onDataSerialize\", data => {\n\t\tdata.ranges = view.ranges.serialize();\n\t});\n}\n\nfunction nullFilter(){ \n\tconst locale = webix.i18n.spreadsheet.labels;\n\treturn { id:\"$empty\", value:\"\", $value:\"<span class='webix_ssheet_empty'>\"+locale[\"dropdown-empty\"]+\"</span>\" };\n}\n\nfunction getRange(view, r1, c1, r2, c2, spans){\n\tconst out = [];\n\tconst activeSheet = view._mPage === this;\n\n\tfor (let i = r1-1; i <= r2-1; i++) {\n\t\tfor (let j = c1-1; j <= c2-1; j++){\n\t\t\tlet inSpan;\n\t\t\tfor(let s = 0; s < spans.length; s++){\n\t\t\t\tconst span = spans[s];\n\t\t\t\tconst row = i + 1;\n\t\t\t\tconst col = j + 1;\n\t\t\t\tif(!(row == span[0] && col == span[1]) && row >= span[0] && row < span[0] + span[3] && col >= span[1] && col < span[1] + span[2]){\n\t\t\t\t\tinSpan = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(inSpan)\n\t\t\t\tcontinue;\n\t\t\tlet obj = this.getCell(i, j);\n\t\t\tlet cell;\n\n\t\t\tif(!obj)\n\t\t\t\tcell = {\n\t\t\t\t\tvalue: \"\"\n\t\t\t\t};\n\t\t\telse\n\t\t\t\tcell = webix.copy(obj);\n\n\t\t\tif(activeSheet)\n\t\t\t\tcell.$value = cell_template(view, {id: i+1}, null, null, {id:j+1}, true);\n\t\t\telse\n\t\t\t\tdelete cell.format;\n\n\t\t\tcell.id = cell.value;\n\t\t\tout.push(cell);\n\t\t}\n\t}\n\n\treturn out;\n}\n\nexport function rangeOptions(view, text, extra){\n\tlet values = [];\n\tif (typeof text == \"string\"){\n\t\tconst pos = getRangePos(text, view);\n\t\tif (pos){\n\t\t\tlet page = view._mPage;\n\t\t\tif(pos[4])\n\t\t\t\tpage = view._mData.getPage(pos[4]);\n\t\n\t\t\tif(page){\n\t\t\t\tconst spans = (\n\t\t\t\t\tpage == view._mPage ?\n\t\t\t\t\t\tgetSpans(view, {}) :\n\t\t\t\t\t\tarr.find(view._sheets, sheet => sheet.name == pos[4]).content\n\t\t\t\t).spans;\n\t\t\t\tvalues = getRange.apply(page, [view, pos[0], pos[1], pos[2], pos[3], spans]);\n\t\t\t}\n\t\t}\n\t}\n\telse if (webix.isArray(text))\n\t\tfor (let i=0; i<text.length; i++){\n\t\t\tlet v = (text[i] || text[i] === 0) ? text[i] : \"\";\n\t\t\tv = (typeof v === \"object\") ? webix.copy(v) : { id:v, value:v };\n\t\t\tvalues.push(v);\n\t\t}\n\n\tconst test = {};\n\tfor (let i=values.length-1; i>=0; i--){\n\t\tconst boolean = typeof values[i].value === \"boolean\";\n\t\tif(boolean)\n\t\t\tvalues[i].value *= 1;\n\t\tif(boolean || values[i].id === 0)\n\t\t\tvalues[i].id = String(values[i].value);\n\n\t\tif(extra && extra.unique){\n\t\t\tif (test[values[i].id])\n\t\t\t\tvalues.splice(i, 1);\n\t\t\telse\n\t\t\t\ttest[values[i].id] = true;\n\t\t}\n\t}\n\n\tif (extra){\n\t\tlet empty = false;\n\t\tfor (let i=values.length-1; i>=0; i--){\n\t\t\tlet value = values[i].value;\n\t\t\tif (!value && value !== 0){\n\t\t\t\tvalues.splice(i, 1);\n\t\t\t\tempty = true;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvalues[i].value = String(value);\n\t\t}\n\n\t\tif (extra.order)\n\t\t\tvalues.sort(function(objA, objB){\n\t\t\t\tconst sorters = view.$$(\"cells\").data.sorting.as;\n\t\t\t\tconst a = objA.value;\n\t\t\t\tconst b = objB.value;\n\n\t\t\t\treturn webix.rules.isNumber(a) && webix.rules.isNumber(b) ? sorters.int(a, b) : sorters.string(a, b);\n\t\t\t});\n\n\t\tif (empty && extra.filter)\n\t\t\tvalues.unshift( nullFilter() );\n\n\t\tif (extra.empty)\n\t\t\tvalues.unshift({ id:\"$empty\", $empty:true, value:\"\" });\n\t}\n\treturn values;\n}","import group from \"./undo_group\";\nimport {getType} from \"./types\";\nimport {setSpanCss} from \"./spans\";\nimport {rangeOptions} from \"../mathematics/ranges\";\nimport {changeRange, eachRange, toRange} from \"../helpers/column_names\";\nimport {conditions} from \"../helpers/conditional\";\nimport {find} from \"../helpers/array\";\n\nexport function init(view){\n\tconst table = view._table;\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\treset(view);\n\n\ttable.on_click.ssheet_filter_sign = (e, id) => {\n\t\tconst filter = table._ssFilters[id.row][id.column];\n\t\tconst mode = filter.mode || getFilterMode(view, id.row, id.column);\n\n\t\tlet options = [];\n\t\tif (filter.options){\n\t\t\tif (typeof filter.options == \"string\")\n\t\t\t\toptions = rangeOptions(view, filter.options, { unique:true, order:true, filter:true });\n\t\t\telse if (webix.isArray(filter.options))\n\t\t\t\toptions = rangeOptions(view, filter.options, { filter:true });\n\t\t}\n\t\tview.callEvent(\"onCommand\", [{id:\"start-filter\", cell:id, mode, options, filter}]);\n\t};\n\ttable.on_dblclick.ssheet_filter_sign = () => false;\n\n\tview.attachEvent(\"onCommand\", (cm) => {\n\t\tif (cm.id === \"create-filter\")\n\t\t\ttoggleFilters(view);\n\t});\n\n\tlet refilter = false;\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type == \"filter\"){\n\t\t\tvalue = (typeof value == \"object\") ? value : null;\n\t\t\tview.setCellFilter(row, column, value);\n\t\t\trefilter = true;\n\t\t}\n\t\telse if (type == \"apply-filter\"){\n\t\t\tconst filter = view.getCellFilter(row, column);\n\n\t\t\tfilter.value = value;\n\t\t\tdelete filter.handler;\n\t\t\tif (value && value.condition){\n\t\t\t\tconst mode = filter.mode || getFilterMode(view, row, column);\n\t\t\t\tfilter.handler = getFilterFunction(mode, filter.value);\n\t\t\t}\n\t\t\trefilter = true;\n\n\t\t\t// update css\n\t\t\tconst add = value && isValueActive(value);\n\t\t\ttable[add?\"addCellCss\":\"removeCellCss\"](row, column, \"ss_filter_active\");\n\t\t\tsetSpanCss(view, row, column, \"ss_filter_active\", add);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAfterUndo\", () => {\n\t\tif (refilter){\n\t\t\tview.filterSpreadSheet();\n\t\t\trefilter = false;\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p) => {\n\t\tif (action == \"filter\"){\n\t\t\tif(p.page == view.getActiveSheet()){\n\t\t\t\tsetSpanCss(view, p.row, p.column, \"ss_filter\", p.newValue);\n\t\t\t\tsetSpanCss(view, p.row, p.column, \"ss_filter_active\", (p.newValue && p.newValue.value && isValueActive(p.newValue.value)));\n\t\t\t\tmarkBarFilter(view);\n\t\t\t}\n\t\t}\n\t\telse if (action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nfunction reset(view){\n\tview._table._ssFilters = {};\n\tmarkBarFilter(view);\n}\n\nexport function getFilters(table){\n\tconst filters = table._ssFilters;\n\tconst all = [];\n\tfor (let row in filters)\n\t\tfor (let column in filters[row])\n\t\t\tall.push(filters[row][column]);\n\treturn all;\n}\n\nexport function serialize(view,data){\n\tconst filters = getFilters(view._table);\n\tconst result = data.filters = [];\n\n\tfor (let i = 0; i<filters.length; i++){\n\t\tlet {row, column, options, mode, value, lastRow} = filters[i];\n\t\tvalue = value && webix.copy(value);\n\t\tresult.push([row, column, {value, options, mode, lastRow}]);\n\t}\n}\n\nexport function load(view,data){\n\tconst filters = data.filters;\n\n\tif (filters){\n\t\tfor (let i = 0; i < filters.length; i++){\n\t\t\tview.setCellFilter(filters[i][0], filters[i][1], (filters[i][2] || {options:\"\"}));\n\t\t}\n\t\tview.filterSpreadSheet();\n\t}\n}\n\nexport function clearFilters(view, range, page){\n\tlet refilter = false;\n\teachRange(range, view, function(view, cell){\n\t\tif(view.getCellFilter(cell.row, cell.column, page)){\n\t\t\tif(!page || page == view.getActiveSheet())\n\t\t\t\trefilter = true;\n\t\t\tview.setCellFilter(cell.row, cell.column, null, page);\n\t\t}\n\t});\n\tif(refilter)\n\t\tview.filterSpreadSheet();\n}\n\nexport function isFilter(view, row, column){\n\tconst filters = view._table._ssFilters;\n\treturn filters[row] && !!filters[row][column];\n}\n\nexport function calibrateRange(view, row, column, range, lastRow, sheet){\n\tif(!range)\n\t\trange = {end:{row:row}};\n\n\tif (range.end){\n\t\tvar endRow = range.end.row;\n\t\trange = getFilterRange(view, row, column, endRow, lastRow, sheet);\n\t}\n\treturn range;\n}\n\nexport function isValueActive(value){\n\treturn !!(value.includes || (value.condition && value.condition.filter));\n}\n\nfunction isFilterExists(view){\n\tconst filters = view._table._ssFilters;\n\tfor (let row in filters)\n\t\tfor (let column in filters[row])\n\t\t\tif (filters[row][column]) return true;\n\treturn false;\n}\n\nfunction markBarFilter(view){\n\tconst value = isFilterExists(view);\n\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"create-filter\", value}]);\n}\n\nfunction getFilterRange(view, row, column, endRow, lastRow, sheet){\n\tconst span = getSpan(view, row, column, sheet);\n\tif (row === endRow || (span && row == endRow - span[3] + 1)){\n\t\tfor (endRow = row; endRow < view.config.rowCount; endRow++){\n\t\t\tconst r = endRow+1;\n\n\t\t\tconst span = getSpan(view, r, column, sheet);\n\t\t\tif(span && span[0] != r)\n\t\t\t\tcontinue;\n\n\t\t\tconst value = view.getCellValue(r, column, false, sheet ? sheet.name : null);\n\t\t\tif(!value && value !== 0)\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tif(lastRow)\n\t\treturn endRow;\n\n\treturn toRange(row+1, column, endRow, column);\n}\n\nfunction getSpan(view, row, column, sheet){\n\tif(!sheet)\n\t\treturn view._table.getSpan(row, column);\n\telse if(sheet.content.spans)\n\t\treturn find(sheet.content.spans, (r, c, cc, rc) => row >= r && row < r + rc && column >= c && column < c + cc); \n}\n\nexport function getFilterMode(view, row, column){\n\tfor (let i=row+1; i<view.config.rowCount; i++){\n\t\tconst value = view.getCellValue(i, column);\n\n\t\tif (value || value === 0){\n\t\t\tconst type = getType(view, i, column);\n\t\t\treturn (type == \"number\" || type == \"date\") ? type : \"text\";\n\t\t}\n\t\telse if (value !== \"\")\n\t\t\tbreak;\n\t}\n\treturn \"text\";\n}\n\nfunction toggleFilters(view){\n\tconst range = view._table.getSelectArea();\n\n\tif (isFilterExists(view)){\n\t\tgroup.set(()=> view.removeFilters());\n\t\tif (range)\n\t\t\tview._table.addSelectArea(range.start, range.end);\n\t}\n\telse if (range)\n\t\tgroup.set(()=>{\n\t\t\tlet row = range.start.row;\n\t\t\tfor (let i = range.start.column; i <= range.end.column; i++)\n\t\t\t\tview.setCellFilter(row, i, { options:range, lastRow: calibrateRange(view, row, i, range, true) });\n\t\t});\n\tmarkBarFilter(view);\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tconst filters = data.filters;\n\tif (inc){\n\t\tfor(let i=filters.length-1; i>=0; i--){\n\t\t\tlet [row,column,filter] = filters[i];\n\t\t\tif (name == \"row\" && row >= start.row || name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc){\t//delete filter mark if row was deleted\n\t\t\t\t\t\tfilters.splice(i,1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tfilters[i][0] = row*1 + inc;\n\t\t\t\t\tif(filter.lastRow)\n\t\t\t\t\t\tfilter.lastRow += inc;\n\t\t\t\t}\n\t\t\t\telse if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tfilters.splice(i, 1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else \n\t\t\t\t\t\tfilters[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t\tfilter.options = changeRange(filter.options, name, inc, start);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function pasteFilter(view, extra, row, col, cutted, translate){\n\tconst filter = extra.filter;\n\n\tfilter.options = changeRange(filter.options, \"row\", translate.row, {column:extra.col, row:extra.row});\n\tfilter.options = changeRange(filter.options, \"column\", translate.column, {column:extra.col, row:extra.row});\n\n\tif(filter.lastRow)\n\t\tfilter.lastRow += translate.row;\n\n\tdelete filter.value; delete filter.handler;\n\tview.setCellFilter(row, col, filter);\n}\n\nexport function getSingleOption(mode, type){\n\tconst c = conditions[mode];\n\tfor (let i=0; i<c.length; i++)\n\t\tif (c[i].id == type) return c[i];\n}\n\nexport function getConditions(name){\n\treturn webix.copy( conditions[name] );\n}\n\nexport function getFilterFunction(mode, value){\n\tconst { includes, condition } = value;\n\tconst opt = getSingleOption(mode, condition.type);\n\tconst handler = opt ? opt.handler : function(){ return true; };\n\n\tif (includes){\n\t\tfor (let i=0; i<includes.length; i++)\n\t\t\tincludes[i] = String(includes[i]);\n\t}\n\n\treturn function(value){\n\t\tif (includes){\n\t\t\treturn includes.indexOf(value) !== -1;\n\t\t} else {\n\t\t\treturn condition.filter === \"\" || handler(value, condition.filter);\n\t\t}\n\t};\n}","import {Dialog} from \"./common\";\nimport * as flt from \"../operations/filter\";\n\nexport const action = \"start-filter\";\n\nexport class DialogBox extends Dialog{\n\topen(action){\n\t\tthis.cell = action.cell;\n\t\tthis.$mode = action.mode;\n\t\tthis.$filter = action.filter;\n\n\t\t// cell not provided\n\t\tif (!this.cell || \n\t\t\t// cell is locked\n\t\t\t(this.view.isCellLocked(this.cell.row, this.cell.column))){\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.$dialog){\n\t\t\tthis.$dialog = webix.ui(this.$init());\n\t\t\tthis.view._destroy_with_me.push(this.$dialog);\n\t\t\tthis.$dialog.attachEvent(\"onHide\", () => this.$hide());\n\n\t\t\tconst table = this.view.$$(\"cells\");\n\t\t\ttable.attachEvent(\"onScrollY\", () => this.syncScroll());\n\t\t\ttable.attachEvent(\"onScrollX\", () => this.syncScroll());\n\t\t}\n\n\t\tif (this.$show(this.$filter.value, action.options) === false)\n\t\t\treturn this.close();\n\t\tthis.$dialog.show( this._getTargetNode() );\n\t}\n\t_getTargetNode(){\n\t\tconst table = this.view.$$(\"cells\");\n\t\tconst span = table.getSpan(this.cell.row, this.cell.column);\n\t\treturn span ? table.getSpanNode(this.cell) : table.getItemNode(this.cell);\n\t}\n\t$show(value, options){\n\t\tconst list = this.getList();\n\t\tconst filter = this.getFilter();\n\n\t\tif (filter.config.mode !== this.$mode){\n\t\t\tfilter.define(\"conditions\", this.getConditions(this.$mode));\n\t\t\tfilter.define(\"mode\", this.$mode);\n\t\t}\n\n\t\t// if the filter mode for the current column has been changed - reset the value\n\t\tconst type = value && value.conditions && value.conditions.type;\n\t\tif (type && !flt.getSingleOption(this.$mode, type))\n\t\t\tvalue = \"\";\n\n\t\tlist.clearAll();\n\t\tlist.data.importData(options);\n\n\t\t// filter data has been changed - reset value\n\t\tfilter.config.value = \"\";\n\t\tfilter.setValue( webix.copy(value||{}) );\n\t}\n\t$init(){\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\treturn {\n\t\t\tview:\"popup\",\n\t\t\tcss:\"ssheet_filter\",\n\t\t\tpadding:7,\n\t\t\trelative:\"right\",\n\t\t\tbody:{\n\t\t\t\tmargin:4,\n\t\t\t\trows:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"filter\",\n\t\t\t\t\t\tfield:\"value\",\n\t\t\t\t\t\tmode:\"text\",\n\t\t\t\t\t\tconditions:this.getConditions(\"text\"),\n\t\t\t\t\t\tinputs:[\n\t\t\t\t\t\t\t\"text\",\n\t\t\t\t\t\t\t{ view:\"ssheet-datepicker\", timepicker:true, batch:\"datepicker\", on:{\n\t\t\t\t\t\t\t\tonChange:() => this.getFilter().applyFilter()\n\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t{ view:\"ssheet-daterangepicker\", timepicker:true, batch:\"daterangepicker\", on:{\n\t\t\t\t\t\t\t\tonChange:() => this.getFilter().applyFilter()\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t],\n\t\t\t\t\t\ttemplate:function(obj){\n\t\t\t\t\t\t\treturn obj.$value || obj.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{ cols:[\n\t\t\t\t\t\t{ },\n\t\t\t\t\t\t{ view:\"button\", label:locale[\"cancel\"], autowidth:true, css:\"webix_transparent\", on:{\n\t\t\t\t\t\t\t\"onItemClick\": () => this.close()\n\t\t\t\t\t\t}},\n\t\t\t\t\t\t{ view:\"button\", label:locale[\"apply\"], autowidth:true, css:\"webix_secondary\", on:{\n\t\t\t\t\t\t\t\"onItemClick\": () => this.applyFilter()\n\t\t\t\t\t\t}},\n\t\t\t\t\t]}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t}\n\tapplyFilter(){\n\t\tconst filter = this.getFilter();\n\t\tconst oldValue = this.$filter.value;\n\t\tconst value = this.$filter.value = filter.getValue();\n\t\tthis.$filter.handler = flt.getFilterFunction(this.$mode, value);\n\n\t\tthis.view.filterSpreadSheet();\n\t\tthis.view.callEvent(\"onAction\", [\"apply-filter\", { row:this.cell.row, column:this.cell.column, value:oldValue, newValue:value }]);\n\t\tthis.setCellStyle(this.cell.row, this.cell.column, \"ss_filter_active\", flt.isValueActive(value));\n\n\t\tthis.close();\n\t}\n\tsetCellStyle(row, column, css, add){\n\t\tconst table = this.view.$$(\"cells\");\n\t\tconst span = this.getSpan(table, row, column);\n\n\t\tif (span){\n\t\t\tif (add){\n\t\t\t\tif (span[3].indexOf(css) == -1)\n\t\t\t\t\tspan[3] += \" \" + css;\n\t\t\t} else {\n\t\t\t\tspan[3] = span[3].replace(\" \" + css, \"\");\n\t\t\t}\n\t\t}\n\t\ttable[add?\"addCellCss\":\"removeCellCss\"](row, column, css);\n\t}\n\tgetSpan(table, row, column){\n\t\tlet item = table.getSpan()[row];\n\t\tif (item)\n\t\t\treturn item[column];\n\t}\n\tgetList(){\n\t\treturn this.getFilter().getChildViews()[2];\n\t}\n\tgetFilter(){\n\t\treturn this.$dialog.getBody().getChildViews()[0];\n\t}\n\tsyncScroll(){\n\t\tif (this.$dialog.isVisible()){\n\t\t\tconst node = this._getTargetNode();\n\t\t\tconst table = this.view.$$(\"cells\");\n\n\t\t\tlet isHidden = false;\n\t\t\tif (node){\n\t\t\t\tconst nodeOffset = webix.html.offset( node );\n\t\t\t\tconst tableOffset = webix.html.offset( table.$view.getElementsByClassName(\"webix_ss_body\")[0] );\n\t\t\t\tconst ydiff = nodeOffset.y - tableOffset.y;\n\t\t\t\tconst xdiff = nodeOffset.x - tableOffset.x + nodeOffset.width;\n\n\t\t\t\tisHidden = (ydiff < 0 || ydiff+nodeOffset.height > tableOffset.height || \n\t\t\t\t\txdiff < 0 || xdiff-nodeOffset.width > tableOffset.width - webix.env.scrollSize);\n\t\t\t}\n\t\t\tif (!node || isHidden)\n\t\t\t\tthis.$dialog.show({x:-9999, y:-9999});\n\t\t\telse \n\t\t\t\tthis.$dialog.show(node);\n\t\t}\n\t}\n\tgetConditions(name){\n\t\tconst locale = webix.i18n.filter;\n\t\tconst conditions = flt.getConditions(name);\n\n\t\tfor (let i=0; i<conditions.length; i++)\n\t\t\tif (conditions[i].id)\n\t\t\t\tconditions[i].value = locale[conditions[i].id];\n\n\t\treturn conditions;\n\t}\n}","import {Dialog} from \"./common\";\nimport {getFormat} from \"../operations/styles\";\nimport * as fmt from \"../operations/formats\";\nimport group from \"../operations/undo_group\";\n\nexport const action = \"custom\";\n\nexport class DialogBox extends Dialog{\n\t$show(){\n\t\tthis.form = this.$dialog.$$(\"form\");\n\t\tthis.list = this.$dialog.$$(\"list\");\n\t\tthis.preview = this.$dialog.$$(\"preview\");\n\n\t\tthis.cell = this.view.getSelectedId(true);\n\t\tif (!this.cell.length)\n\t\t\treturn false;\n\n\t\tthis.fillForm(this.view);\n\n\t\tthis.view.$handleSelection = function(){\n\t\t\treturn false;\n\t\t};\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\tconst i18n = webix.i18n.spreadsheet;\n\t\tconst labelsLocale = i18n.labels;\n\t\tconst formatsLocale = i18n.formats;\n\n\t\tconst docsLink = \"https://webix-guides.gitbook.io/spreadsheet-user-guide/formatting_numbers#custom-number-format\";\n\t\tconst delimiters = fmt.getDelimiters(\"int\");\n\n\t\tconst commonConfig = [\n\t\t\t{\n\t\t\t\tname:\"zeros\",\n\t\t\t\tview:\"counter\",\n\t\t\t\tcss:\"webix_ssheet_counter\",\n\t\t\t\tlabel:labelsLocale[\"decimal-places\"],\n\t\t\t\tvalue:0,\n\t\t\t\tbatch:\"common\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"separator\",\n\t\t\t\tview:\"checkbox\",\n\t\t\t\tlabel:labelsLocale[\"separator\"],\n\t\t\t\tbatch:\"common\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"richselect\",\n\t\t\t\tname:\"symbol\",\n\t\t\t\tlabel:labelsLocale[\"currency-symbol\"],\n\t\t\t\toptions:fmt.currencies,\n\t\t\t\tbatch:\"common\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"formlist\",\n\t\t\t\tlabel:labelsLocale[\"negative\"],\n\t\t\t\theight: 160,\n\t\t\t\tname:\"negative\",\n\t\t\t\tbatch:\"common\",\n\t\t\t\tcss:\"webix_ssheet_format_negative\",\n\t\t\t\ttemplate: obj => {\n\t\t\t\t\tif(this.list){\n\t\t\t\t\t\tlet format = this.getFormat(obj.id);\n\t\t\t\t\t\tformat = fmt.format2code(format.fmt, format.delimiters);\n\t\t\t\t\t\tconst style = {css:\"\"};\n\t\t\t\t\t\tconst value = format(-1234.56789, style);\n\n\t\t\t\t\t\treturn \"<span class='\"+style.css+\"'>\"+value+\"</span>\";\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdata:[{id:1}, {id:2}, {id:3}, {id:4}]\n\t\t\t}\n\t\t];\n\n\t\tconst customConfig = [\n\t\t\t{\n\t\t\t\tview:\"text\",\n\t\t\t\tlabel: labelsLocale[\"format-pattern\"],\n\t\t\t\tname:\"format\",\n\t\t\t\tlabelPosition:\"top\",\n\t\t\t\tbatch:\"custom\",\n\t\t\t\tplaceholder:\"[>100]0\"+delimiters.groupSign+\"000\"+delimiters.decimalSign+\"00;[>0]None\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"docs\",\n\t\t\t\ttemplate: \"<a href='\"+docsLink+\"' target='_blank' class = 'docs'>\"+labelsLocale[\"format-docs\"]+\"</a>\",\n\t\t\t\tborderless:true,\n\t\t\t\tbatch:\"custom\"\n\t\t\t}\n\t\t];\n\n\t\tconst dateConfig = [\n\t\t\t{\n\t\t\t\tname:\"date\",\n\t\t\t\tbatch:\"date\",\n\t\t\t\tview:\"formlist\",\n\t\t\t\tlabelWidth: 90,\n\t\t\t\theight: 160,\n\t\t\t\tlabel:labelsLocale[\"date-format\"],\n\t\t\t\tcss:\"webix_ssheet_format_date\",\n\t\t\t\ttemplate: obj => fmt.format2code(obj.value, delimiters)(45000),\n\t\t\t\tdata:[\n\t\t\t\t\tformatsLocale.dateFormat,\n\t\t\t\t\tformatsLocale.timeFormat,\n\t\t\t\t\tformatsLocale.fullDateFormat,\n\t\t\t\t\tformatsLocale.longDateFormat\n\t\t\t\t]\n\t\t\t}\n\t\t];\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tposition:\"center\",\n\t\t\twidth:460,\n\t\t\thead: labelsLocale[\"format-title\"],\n\t\t\tmove: true,\n\t\t\tbody:{\n\t\t\t\tpadding:0,\n\t\t\t\tcols:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"list\",\n\t\t\t\t\t\tid:\"list\",\n\t\t\t\t\t\tcss:\"webix_ssheet_format_type\",\n\t\t\t\t\t\twidth:120,\n\t\t\t\t\t\tscroll:false,\n\t\t\t\t\t\tdata:this.getFormats(),\n\t\t\t\t\t\tselect:true,\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonSelectChange: (id)=>{\n\t\t\t\t\t\t\t\tthis.updateForm();\n\t\t\t\t\t\t\t\tswitch(id[0]){\n\t\t\t\t\t\t\t\t\tcase \"custom\":\n\t\t\t\t\t\t\t\t\tcase \"date\":\n\t\t\t\t\t\t\t\t\t\tthis.form.showBatch(id[0]);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tdefault:{\n\t\t\t\t\t\t\t\t\t\tconst elements = this.form.elements;\n\t\t\t\t\t\t\t\t\t\tthis.form.showBatch(\"common\");\n\n\t\t\t\t\t\t\t\t\t\telements.separator[ id[0] == \"percent\" ? \"hide\" : \"show\" ]();\n\t\t\t\t\t\t\t\t\t\telements.symbol[ id[0] == \"price\" ? \"show\" : \"hide\" ]();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"form\",\n\t\t\t\t\t\tid:\"form\",\n\t\t\t\t\t\theight:340,\n\t\t\t\t\t\tpaddingY:0,\n\t\t\t\t\t\tpaddingX:20,\n\t\t\t\t\t\telements:[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: \"preview\",\n\t\t\t\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\t\t\t\tif(obj.value == i18n.table[\"format-error\"])\n\t\t\t\t\t\t\t\t\t\treturn obj.value;\n\t\t\t\t\t\t\t\t\treturn \"<span class ='\"+obj.css+\"'>\"+obj.value+\"</span>\";\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcss: \"webix_ssheet_format_preview\",\n\t\t\t\t\t\t\t\tautoheight: true,\n\t\t\t\t\t\t\t\tborderless:true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t].concat(commonConfig, customConfig, dateConfig),\n\t\t\t\t\t\telementsConfig: {\n\t\t\t\t\t\t\tlabelWidth: 140\n\t\t\t\t\t\t},\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: () => this.updateForm()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.closeWin()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tlet type = this.list.getSelectedId();\n\t\tlet values = (type == \"custom\")?{format:this.form.getValues().format}:this.form.getValues();\n\t\tvalues.type = type;\n\n\t\tgroup.set(()=>{\n\t\t\tfor (let i = 0; i < this.cell.length; i++)\n\t\t\t\tfmt.addFormat(this.view, this.cell[i].row, this.cell[i].column, values.format, values);\n\t\t});\n\n\t\tthis.view.$$(\"cells\").refresh();\n\t\tthis.closeWin();\n\t}\n\tcloseWin(){\n\t\tconst format = getFormat(this.view, this.cell[0].row, this.cell[0].column);\n\t\tconst name = format || \"common\";\n\n\t\t//default format\n\t\tif(!fmt.isCustom(name))\n\t\t\tthis.view.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"format\", value:name}]);\n\t\tthis.close();\n\t}\n\tgetFormat(negative){\n\t\tconst type = this.list.getSelectedId();\n\t\tlet values = this.form.getValues();\n\n\t\tvalues.negative = negative || values.negative;\n\t\tif(type != \"custom\"){\n\t\t\tif(type != \"date\")\n\t\t\t\tvalues.date = \"\";\n\n\t\t\tvalues = fmt.formToValues(type, values);\n\t\t\treturn {\n\t\t\t\tfmt: fmt.serializeFormat(values),\n\t\t\t\tdelimiters:fmt.getDelimiters(type)\n\t\t\t};\n\t\t}\n\t\telse\n\t\t\treturn {\n\t\t\t\tfmt: values.format,\n\t\t\t\tdelimiters: fmt.getDelimiters(type)\n\t\t\t};\n\t}\n\tfillForm(view){\n\t\tconst locale = webix.i18n.spreadsheet;\n\t\tconst format = getFormat(view, this.cell[0].row, this.cell[0].column);\n\t\tlet values = { zeros:0, separator: 0, negative: 1, date: locale.formats.dateFormat, symbol:fmt.currencies[0].value, format: \"\"};\n\t\tlet type;\n\n\t\tlet name = format || \"\";\n\n\t\tvalues.format = fmt.getFormatSource(name || \"price\");\n\n\t\tif(!name)\n\t\t\ttype = name = \"price\";\n\t\telse if(name == \"string\")\n\t\t\ttype = name = \"custom\";\n\t\telse\n\t\t\ttype = fmt.formatHelpers[name].values.type;\n\n\t\tif(type != \"custom\")\n\t\t\twebix.extend(values, fmt.formatHelpers[name].values, true);\n\n\t\tconst item = this.view.$$(\"cells\").getItem(this.cell[0].row);\n\t\tconst col = this.cell[0].column;\n\n\t\tthis.value = webix.isUndefined(item[col]) ? \"\" : item[col];\n\n\t\tthis.form.setValues(values);\n\t\tthis.list.select(type);\n\t\tthis.updateForm();\n\t}\n\tupdateForm(){\n\t\tconst form = this.form.elements;\n\t\tconst format = this.getFormat();\n\t\tlet value = this.value;\n\n\t\tconst isText = value === \"\" || isNaN(value);\n\n\t\tif(fmt.checkFormat(format, \"date\") && (isText || fmt.isDateInvalid(value)))\n\t\t\tvalue = 45000;\n\t\telse if(isText && !fmt.checkFormat(format, \"string\"))\n\t\t\tvalue = 1234.56789;\n\n\t\tlet style = {css:\"\"};\n\t\tvalue = fmt.format2code(format.fmt, format.delimiters)(value, style);\n\n\t\t//preview values\n\t\tthis.preview.parse({value:value, css:style.css});\n\t\tform.negative.refresh();\n\t\tform.date.refresh();\n\n\t\t//set new format string\n\t\tform.format.setValue(format.fmt);\n\t}\n\tgetFormats(){\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\treturn [\n\t\t\t{id: \"price\", value: locale.currency},\n\t\t\t{id: \"int\", value: locale.number},\n\t\t\t{id: \"percent\", value: locale.percent},\n\t\t\t{id: \"date\", value: locale.date},\n\t\t\t{id: \"custom\", value: locale[\"custom-format\"]}\n\t\t];\n\t}\n}","import {Dialog} from \"./common\";\nimport {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\nimport {isDateInvalid} from \"../operations/formats\";\nimport {getDateEditFormat} from \"../operations/formats\";\nimport {getType} from \"../operations/types\";\nimport {find} from \"../helpers/array\";\n\nexport const action = \"conditional-format\";\n\nfunction getConditionStyle(data){\n\treturn data.map(item => {\n\t\titem.id = item.css;\n\t\treturn item;\n\t});\n}\n\nexport class DialogBox extends Dialog{\n\t_rulesToArr(){\n\t\tconst conditions = this.view.conditions.handlers;\n\t\treturn [\n\t\t\t{\n\t\t\t\tvalue: webix.i18n.spreadsheet.labels[\"conditional-common\"],\n\t\t\t\tdisabled:true,\n\t\t\t\t$css:\"webix_ssheet_cformats_type\"\n\t\t\t},\n\t\t\t...conditions.date, //number rules equal to date\n\t\t\t{\n\t\t\t\tvalue: webix.i18n.spreadsheet.labels[\"conditional-text\"],\n\t\t\t\tdisabled:true,\n\t\t\t\t$css:\"webix_ssheet_cformats_type\"\n\t\t\t},\n\t\t\t...conditions.text\n\t\t].map(rule => {\n\t\t\tif(!rule.value)\n\t\t\t\trule.value = webix.i18n.filter[ rule.id ];\n\t\t\treturn rule;\n\t\t});\n\t}\n\n\t_getCondition() {\n\t\tconst view = this.view;\n\t\tconst values = this._getDatalayout().getValue();\n\n\t\tconst data = [];\n\t\tvalues.forEach(v => {\n\t\t\tconst item = [v.condition];\n\t\t\tif (v.condition != \"between\" && v.condition != \"notBetween\")\n\t\t\t\titem.push(this._normalizeValue(v.value, v.condition));\n\t\t\telse\n\t\t\t\titem.push([\n\t\t\t\t\tthis._normalizeValue(v.value, v.condition),\n\t\t\t\t\tthis._normalizeValue(v.value2, v.condition)\n\t\t\t\t]);\n\n\t\t\titem.push(v.style);\n\t\t\tfor (let i=0; i<item.length; i++){\n\t\t\t\tif (item[i] === \"\" || (webix.isArray(item[i]) && item[i].indexOf(\"\") != -1))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\tdata.push(item);\n\t\t});\n\n\t\tview.callEvent(\"onConditionSet\", [data]);\n\t}\n\n\t_safeInt(a){\n\t\tconst num = parseFloat(a);\n\t\tif (num == a) return num;\n\t\treturn a;\n\t}\n\n\t_setCondition() {\n\t\tconst view = this.view;\n\t\tconst collection = view.conditions.get(this.cell.row, this.cell.column);\n\n\t\tconst data = [];\n\t\tif (collection) {\n\t\t\tcollection.forEach(item => {\n\t\t\t\tconst values = {};\n\t\t\t\tvalues.condition = item[0];\n\t\t\t\tif (webix.isArray(item[1])) {\n\t\t\t\t\tvalues.value = this._formatValue(item[1][0], values.condition);\n\t\t\t\t\tvalues.value2 = this._formatValue(item[1][1], values.condition);\n\t\t\t\t} else\n\t\t\t\t\tvalues.value = this._formatValue(item[1], values.condition);\n\n\t\t\t\tvalues.style = item[2];\n\t\t\t\tdata.push(values);\n\t\t\t});\n\t\t}\n\n\t\twhile (data.length < 3)\n\t\t\tdata.push({ });\n\n\t\tthis._getDatalayout().setValue(data);\n\t}\n\n\t_getDatalayout(){\n\t\treturn this.$dialog.getBody().getChildViews()[0].getChildViews()[1].getBody();\n\t}\n\n\t_formatValue(value, condition){\n\t\tif(!(condition && this._isNotDateRule(condition))){\n\t\t\tif(this.editFormat && value !== \"\" && value[0] != \"=\"){\n\t\t\t\tvalue = getJsDateFromExcel(value);\n\t\t\t\treturn this.editFormat(value);\n\t\t\t}\n\t\t}\n\t\treturn value.toString();\n\t}\n\n\t_normalizeValue(value, condition){\n\t\tif(!this._isNotDateRule(condition)){\n\t\t\tif(this.editFormat){\n\t\t\t\tif(isNaN(value)){\n\t\t\t\t\tif(value[0] != \"=\"){\n\t\t\t\t\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\t\t\t\t\tvalue = parser(value);\n\t\t\t\t\t\tvalue = isNaN(value) ? \"\" : getExcelDateFromJs(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tvalue = isDateInvalid(value) ? \"\" : value;\n\t\t\t}\n\t\t\telse\n\t\t\t\tvalue = this._safeInt(value, 10);\n\t\t}\n\t\treturn value;\n\t}\n\n\t_isNotDateRule(condition){\n\t\tif(condition == \"equal\" || condition == \"notEqual\")\n\t\t\treturn false;\n\t\treturn find(this.view.conditions.handlers.text, obj => obj.id == condition);\n\t}\n\n\tokClick(){\n\t\tthis._getCondition();\n\t\tthis.close();\n\t}\n\n\t$show(){\n\t\tthis.cell = this.view.getSelectedId();\n\t\tif(!this.cell)\n\t\t\treturn false;\n\n\t\tconst type = getType(this.view, this.cell.row, this.cell.column);\n\n\t\tif(type == \"date\")\n\t\t\tthis.editFormat = getDateEditFormat(this.view, this.cell.row, this.cell.column);\n\n\t\tthis.$dialog.queryView(\"text\", \"all\").forEach(view => {\n\t\t\tview.define({placeholder: type == \"date\" ? this._formatValue(45000) : \"\"});\n\t\t\tview.refresh();\n\t\t});\n\n\t\tthis.view.$handleSelection = (st, end, a, b)=>{\n\t\t\tif (this.activeValue && a == b){\n\t\t\t\tthis.activeValue.setValue(\"=\"+a);\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tthis._setCondition();\n\t}\n\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t\tdelete this.editFormat;\n\t\tthis._getDatalayout().clearAll();\n\t}\n\n\tgetRows(data){\n\t\tconst dialog = this;\n\t\treturn {\n\t\t\tview: \"form\",\n\t\t\tpadding: 0,\n\t\t\tborderless: true,\n\t\t\tcss:\"webix_ssheet_cformats\",\n\t\t\telements: [{\n\t\t\t\tmargin: 10,\n\t\t\t\tpadding: { right: 4 },\n\t\t\t\tcols: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"richselect\",\n\t\t\t\t\t\tname: \"style\",\n\t\t\t\t\t\twidth:120,\n\t\t\t\t\t\tplaceholder: webix.i18n.spreadsheet.labels[\"conditional-style\"],\n\t\t\t\t\t\tcss: \"webix_ssheet_cformat_select\",\n\t\t\t\t\t\tsuggest: {\n\t\t\t\t\t\t\tpadding:0,\n\t\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\t\tcss: \"webix_ssheet_cformat_list\",\n\t\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\t\ttemplate(obj) {\n\t\t\t\t\t\t\t\t\tconst css = \"webix_ssheet_cformat \"+obj.css;\n\t\t\t\t\t\t\t\t\treturn `<div class=\"${css}\">${obj.name}</div>`;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdata: data\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"richselect\",\n\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\tname: \"condition\",\n\t\t\t\t\t\tplaceholder: webix.i18n.spreadsheet.labels[\"conditional-operator\"],\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: function(newv) {\n\t\t\t\t\t\t\t\tconst elements = this.getFormView().elements;\n\n\t\t\t\t\t\t\t\tif (dialog.editFormat){\n\t\t\t\t\t\t\t\t\tif (dialog._isNotDateRule(newv))\n\t\t\t\t\t\t\t\t\t\telements.value.define({placeholder: \"\"});\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tconst value = dialog._normalizeValue(elements.value.getValue(), newv);\n\t\t\t\t\t\t\t\t\t\telements.value.setValue(dialog._formatValue(value, newv));\n\t\t\t\t\t\t\t\t\t\telements.value.define({placeholder: dialog._formatValue(45000)});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telements.value.refresh();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (newv == \"between\" || newv == \"notBetween\")\n\t\t\t\t\t\t\t\t\telements.value2.show();\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\telements.value2.hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\t\tdata: this._rulesToArr()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonFocus: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tthis.activeValue = current_view;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonBlur: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tlet value = current_view.getValue();\n\t\t\t\t\t\t\t\t\t\tif(value !== \"\"){\n\t\t\t\t\t\t\t\t\t\t\tconst elements = current_view.getFormView().elements;\n\t\t\t\t\t\t\t\t\t\t\tconst condition = elements.condition.getValue();\n\t\t\t\t\t\t\t\t\t\t\tvalue = this._normalizeValue(value, condition);\n\t\t\t\t\t\t\t\t\t\t\tcurrent_view.setValue(this._formatValue(value, condition));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tname: \"value\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\tname: \"value2\",\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonFocus: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tthis.activeValue = current_view;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonBlur: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tlet value = current_view.getValue();\n\t\t\t\t\t\t\t\t\t\tif(value !== \"\"){\n\t\t\t\t\t\t\t\t\t\t\tconst elements = current_view.getFormView().elements;\n\t\t\t\t\t\t\t\t\t\t\tconst condition = elements.condition.getValue();\n\t\t\t\t\t\t\t\t\t\t\tvalue = this._normalizeValue(value, condition);\n\t\t\t\t\t\t\t\t\t\t\tcurrent_view.setValue(this._formatValue(value, condition));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\thidden: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{ view:\"icon\", css:\"webix_ssheet_cformat_icon\", icon:\"wxi-trash\", click: vid => {\n\t\t\t\t\t\tconst form = webix.$$(vid).getFormView();\n\t\t\t\t\t\tconst dlayout = this._getDatalayout();\n\t\t\t\t\t\tdlayout.getValue();\t\t\t// save local changes before rendering\n\n\t\t\t\t\t\tconst index = dlayout.getChildViews().indexOf(form);\n\t\t\t\t\t\tdlayout.remove(dlayout.getIdByIndex(index));\n\n\t\t\t\t\t\tif (dlayout.count() < 3) dlayout.add({ });\n\t\t\t\t\t}}\n\t\t\t\t]}\n\t\t\t]};\n\t}\n\n\t$init(){\n\t\tconst margin = webix.skin.$active.layoutMargin.form;\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"conditional-format\"],\n\t\t\tposition: \"center\",\n\t\t\twidth: 770,\n\t\t\tmove: true,\n\t\t\tmargin,\n\t\t\tbody: { margin:0, rows:[\n\t\t\t\t{\n\t\t\t\t\theight: 36,\n\t\t\t\t\tpadding: { left: 12 },\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{ view:\"label\", width: 131, label: webix.i18n.spreadsheet.labels.display },\n\t\t\t\t\t\t{ view:\"label\", width: 161, label: webix.i18n.spreadsheet.labels.condition },\n\t\t\t\t\t\t{ view:\"label\", label: webix.i18n.spreadsheet.labels.value },\n\t\t\t\t\t\t{ view:\"icon\", css:\"webix_ssheet_cformat_icon\", icon:\"wxi-plus-circle\",\n\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\tconst dlayout = this._getDatalayout();\n\t\t\t\t\t\t\t\tdlayout.getValue();\t\t\t// save local changes before rendering\n\t\t\t\t\t\t\t\tdlayout.add({ });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ width: 4 + webix.env.scrollSize }\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"scrollview\",\n\t\t\t\t\tmaxHeight: webix.skin.$active.inputHeight * 3 + 4,\n\t\t\t\t\tborderless: true,\n\t\t\t\t\tscroll: \"y\",\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tview: \"datalayout\",\n\t\t\t\t\t\tpadding: 0,\n\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\trows: [ this.getRows(getConditionStyle(this.view.config.conditionStyle)) ]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]},\n\t\t\ton: {\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n}","import {Dialog} from \"./common\";\n\nexport const action = \"excel-export\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tthis.view.$handleSelection = function(){\n\t\t\treturn false;\n\t\t};\n\n\t\tform.elements.sheets.setValue(this.getSheets());\n\t\tform.elements.filename.setValue(\"Data\");\n\t\tform.elements.filename.getInputNode().select();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"export-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", name:\"filename\",  placeholder:webix.i18n.spreadsheet.labels[\"export-name\"] },\n\t\t\t\t\t{ view:\"multicheckbox\", name:\"sheets\", css:\"webix_ssheet_multicheckbox\" }\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tgetSheets(){\n\t\tconst view = this.view;\n\t\tconst sheets = view._sheets;\n\t\tlet value = [];\n\n\t\tfor(let i = 0; i < sheets.length; i++){\n\t\t\tconst state = sheets[i].state;\n\t\t\tif(state == \"veryHidden\")\n\t\t\t\tcontinue;\n\n\t\t\tvalue.push({\n\t\t\t\tname: sheets[i].name,\n\t\t\t\thidden: state == \"hidden\",\n\t\t\t\tactive: view._activeSheet === sheets[i].name ? 1 : 0\n\t\t\t});\n\t\t}\n\n\t\treturn value;\n\t}\n\tokClick(){\n\t\tconst values = this.$dialog.getBody().getValues();\n\t\twebix.toExcel(this.view, values);\n\t\tthis.close();\n\t}\n}","import {Dialog} from \"./common\";\n\nexport const action = \"add-link\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tconst cell = this.view.getSelectedId();\n\t\tif(!cell)\n\t\t\treturn false;\n\t\tif (!this.restoreValue(form))\n\t\t\tform.clear();\n\t\tform.elements.name.focus();\n\n\t\tthis.view.$handleSelection = (st, end, a)=>{\n\t\t\tform.elements.url.setValue(\"#\"+a);\n\t\t\treturn false;\n\t\t};\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\trestoreValue(form){\n\t\tconst cell = this.view.getSelectedId();\n\t\tif (cell){\n\t\t\tconst value = this.view.getCellValue(cell.row, cell.column);\n\t\t\tif (value && typeof value == \"string\" && value.indexOf(\"=HYPERLINK\") === 0){\n\t\t\t\tconst parts = value.split(\"\\\"\");\n\t\t\t\tform.setValues({\n\t\t\t\t\tname: (parts[3] || \"\"),\n\t\t\t\t\turl: (parts[1] || \"\")\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"link-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", name:\"name\",  placeholder:webix.i18n.spreadsheet.labels[\"link-name\"]},\n\t\t\t\t\t{ view:\"text\", name:\"url\",  placeholder:webix.i18n.spreadsheet.labels[\"link-url\"]}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst cell = this.view.getSelectedId();\n\t\tconst data = this.$dialog.getBody().getValues();\n\n\t\tlet text = \"\";\n\t\tif (data.url){\n\t\t\tdata.name = data.name || data.url;\n\t\t\tif (!/^(#|(https?:\\/\\/))/i.test(data.url))\n\t\t\t\tdata.url = \"http://\" + data.url;\n\t\t\ttext = `=HYPERLINK(\"${data.url}\",\"${data.name}\")`;\n\t\t}\n\n\t\tthis.view.setCellValue(cell.row, cell.column, text);\n\t\tthis.view.refresh();\n\t\tthis.close();\n\t}\n}","import {Dialog} from \"./common\";\nimport {isVisible} from \"../sheets\";\nimport {showBorders} from \"../operations/print\";\n\nexport const action = \"print\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tconst list = form.elements.sheets.getList();\n\t\tlist.clearAll();\n\t\tlist.parse( this.getSheets(this.view) );\n\n\t\tform.setValues({\n\t\t\tdata:\"full\",\n\t\t\tsheets: this.view.getActiveSheet(),\n\t\t}, true);\n\t}\n\t$init(){\n\t\tconst labels = webix.i18n.spreadsheet.labels;\n\n\t\tlet paperSize;\n\n\t\tconst printSizes = webix.env.printSizes.map(size => {\n\t\t\tif(size.id == \"a4\")\n\t\t\t\tpaperSize = \"a4\";\n\t\t\tsize.value = labels[\"page-\"+size.id] || size.id;\n\t\t\treturn size;\n\t\t});\n\n\t\tif(!paperSize) paperSize = printSizes[0].id;\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: labels[\"print-title\"],\n\t\t\tmove: true,\n\t\t\tmodal:true,\n\t\t\twidth:580,\n\t\t\tposition: \"center\",\n\t\t\tbuttons:false,\n\t\t\ton:{\n\t\t\t\tonHide: ()=> {\n\t\t\t\t\twebix.extend(this.view._printBorders, this.getValues(), true);\n\t\t\t\t\tshowBorders(this.view, true);\n\t\t\t\t}\n\t\t\t},\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telementsConfig:{\n\t\t\t\t\tlabelWidth: 0\n\t\t\t\t},\n\t\t\t\telements:[\n\t\t\t\t\t{ type:\"section\", template: labels[\"print-settings\"]},\n\t\t\t\t\t{ cols:[\n\t\t\t\t\t\t{ view:\"radio\", name:\"data\", vertical:true, options:[\n\t\t\t\t\t\t\t{ id:\"full\", value: labels[\"sheets\"]},\n\t\t\t\t\t\t\t{ id:\"selection\", value: labels[\"selection\"]}\n\t\t\t\t\t\t], on:{\n\t\t\t\t\t\t\tonChange:function(newv){\n\t\t\t\t\t\t\t\tconst elements = this.getFormView().elements;\n\t\t\t\t\t\t\t\tconst sheets = elements.sheets;\n\n\t\t\t\t\t\t\t\tif(newv == \"full\"){\n\t\t\t\t\t\t\t\t\telements.sheetnames.setValue(1);\n\t\t\t\t\t\t\t\t\tsheets.enable();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tsheets.disable();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpadding:{\n\t\t\t\t\t\t\t\tright:30\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"sheets\",\n\t\t\t\t\t\t\t\t\tview: \"multiselect\",\n\t\t\t\t\t\t\t\t\twidth: 160,\n\t\t\t\t\t\t\t\t\tstringResult:false,\n\t\t\t\t\t\t\t\t\tsuggest: {\n\t\t\t\t\t\t\t\t\t\tselectAll: true,\n\t\t\t\t\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\t\t\t\t\tdata:[]\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ rows:[\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"sheetnames\", value:1, labelRight:labels[\"sheet-names\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"borderless\", labelRight:labels[\"borderless\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"skiprows\", labelRight:labels[\"skip-rows\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"margin\", labelRight:labels[\"margin\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"external\", labelRight:labels[\"external-ui\"]},\n\t\t\t\t\t\t]}\n\t\t\t\t\t]},\n\t\t\t\t\t{ type:\"section\", template: labels[\"print-paper\"]},\n\t\t\t\t\t{ view:\"radio\", name:\"paper\", value:paperSize, options:printSizes},\n\t\t\t\t\t{ type:\"section\", template: labels[\"print-layout\"]},\n\t\t\t\t\t{ rows:[\n\t\t\t\t\t\t{view:\"radio\", name:\"fit\", value:\"page\", options:[\n\t\t\t\t\t\t\t{ id:\"page\", value:labels[\"page-width\"]},\n\t\t\t\t\t\t\t{ id:\"data\", value:labels[\"page-actual\"]}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{ view:\"radio\", name:\"mode\", value:\"landscape\", options:[\n\t\t\t\t\t\t\t{ id:\"portrait\", value:labels[\"page-portrait\"]},\n\t\t\t\t\t\t\t{ id:\"landscape\", value:labels[\"page-landscape\"]}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]},\n\t\t\t\t\t{\n\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t{ },\n\t\t\t\t\t\t\t{ view: \"button\", css:\"ssheet_cancel_button\", hotkey:\"esc\",\n\t\t\t\t\t\t\t\tvalue: labels.cancel, autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => this.close()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ view: \"button\", value: labels[\"print-borders\"], autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => this.printPreview()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ view: \"button\", value: labels.print, hotkey:\"enter\", autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => this.okClick()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t}\n\tgetValues(){\n\t\tconst data = this.$dialog.getBody().getValues({disabled:false});\n\t\tdata.margin = data.margin?0:{};\n\t\treturn data;\n\t}\n\tprintPreview(){\n\t\tthis.close();\n\t\tthis.view.showPrintBorders(true);\n\t}\n\tgetSheets(view){\n\t\treturn view._sheets\n\t\t\t.map(sheet => ({value: sheet.name, id: sheet.name}))\n\t\t\t.filter(sheet => isVisible(view, sheet.id));\n\t}\n\tokClick(){\n\t\tconst data = this.$dialog.getBody().getValues({disabled:false});\n\t\tdata.margin = data.margin?0:{};\n\t\tthis.close();\n\t\twebix.print(this.view, data);\n\t}\n}\n","import {Dialog} from \"./common\";\n\nexport const action = \"add-comment\";\n\nexport class DialogBox extends Dialog{\n\topen(action){\n\t\t//we get cell only on hover commented cell\n\t\tthis.cell = action.cell ? action.cell : this.view.getSelectedId();\n\n\t\t// cell not provided\n\t\tif (!this.cell || \n\t\t\t// cell is locked and in the edit mode\n\t\t\t(this.view.isCellLocked(this.cell.row, this.cell.column) && !action.viewonly) ||\n\t\t\t// action blocked by user's code\n\t\t\t!(this.view.callEvent(\"onBeforeCommentShow\", [this.cell.row, this.cell.column, !action.viewonly]))){\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.view.comments._activeComment = {editStatus: !action.viewonly, cell: this.cell};\n\n\t\tif(!this.$dialog){\n\t\t\tthis.$dialog = webix.ui(this.$init());\n\t\t\tthis.view._destroy_with_me.push(this.$dialog);\n\t\t\tthis.view.comments.commentsView = this.$dialog;\n\t\t\tthis.$dialog.attachEvent(\"onHide\", ()=>this.$hide());\n\t\t\tthis.view.attachEvent(\"onCommentHide\", ()=>this.$dialog.hide());\n\t\t}\n\n\t\tconst form = this.$dialog.getBody();\n\n\t\tconst span = this.view.$$(\"cells\").getSpan(this.cell.row, this.cell.column);\n\t\tconst item = span ? {row: this.cell.row, column:(span[1]*1+span[2]-1)} : this.cell;\n\n\t\twebix.delay(()=>{\n\t\t\tthis.$dialog.show(this.view.$$(\"cells\").getItemNode(item));\n\t\t\tthis._setComment();\n\t\t});\n\t\tif (this.$show(this.$dialog, form) === false)\n\t\t\tthis.close();\n\t}\n\t$show(){\n\t\tthis.textarea = this.$dialog.queryView({view:\"textarea\"});\n\t\tthis.template = this.$dialog.queryView({view:\"template\"});\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"popup\",\n\t\t\tcss:\"ssheet_comments\",\n\t\t\tminWidth:250,\n\t\t\tminHeight:150,\n\t\t\trelative:\"right\",\n\t\t\tresize:true,\n\t\t\ton:{\n\t\t\t\tonViewResize:()=>{\n\t\t\t\t\tthis.$dialog.hide();\n\t\t\t\t\tthis.$dialog.show();\n\t\t\t\t\tif(this.textarea.isVisible())\n\t\t\t\t\t\tthis.textarea.focus();\n\t\t\t\t}\n\t\t\t},\n\t\t\tbody:{\n\t\t\t\tanimate:false,\n\t\t\t\tcells:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"template\",\n\t\t\t\t\t\tcss:\"ssheet_comment_view\",\n\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\tscroll:\"auto\",\n\t\t\t\t\t\tonClick:{\n\t\t\t\t\t\t\t\"ssheet_comment_view\":() => {\n\t\t\t\t\t\t\t\tif(!(this.view.config.readonly || this.view.isCellLocked(this.cell.row, this.cell.column)))\n\t\t\t\t\t\t\t\t\tthis.showInput(this.view.comments.get(this.cell.row, this.cell.column));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"textarea\",\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonChange:()=>{\n\t\t\t\t\t\t\t\tthis.addComment();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonFocus:()=>{\n\t\t\t\t\t\t\t\tthis.view.comments._activeComment = {editStatus: true, cell: this.cell};\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonBlur:()=>{\n\t\t\t\t\t\t\t\tthis.view.comments._activeComment = {};\n\t\t\t\t\t\t\t\tthis.$dialog.hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t}\n\t_setComment(){\n\t\tconst comment = this.view.comments.get(this.cell.row, this.cell.column);\n\t\tif(this.view.comments._activeComment.editStatus)\n\t\t\tthis.showInput(comment);\n\t\telse\n\t\t\tthis.showTemplate(comment);\n\t}\n\tshowTemplate(text){\n\t\tthis.template.show();\n\t\tthis.template.setHTML(text);\n\t}\n\tshowInput(text){\n\t\tthis.view._commentSel = true;\n\t\tthis.view.$$(\"cells\").select(this.cell.row, this.cell.column);\n\t\tdelete this.view._commentSel;\n\t\twebix.delay(()=>{\n\t\t\tthis.changeTextarea(text);\n\t\t\tthis.textarea.show();\n\t\t\tthis.textarea.focus();\n\t\t});\n\t}\n\taddComment(){\n\t\tthis.view.comments.add(this.cell.row, this.cell.column, this.textarea.getValue());\n\t}\n\tchangeTextarea(text){\n\t\tthis.textarea.blockEvent();\n\t\tthis.textarea.setValue(text||\"\");\n\t\tthis.textarea.unblockEvent();\n\t}\n}","import {Dialog} from \"./common\";\nexport const action = \"resize\";\n\nexport class DialogBox extends Dialog{\n\topen(action){\n\t\tthis.group = action.group;\n\t\tthis.header = action.value;\n\t\tDialog.prototype.open.apply(this, arguments);\n\t}\n\t$show(){\n\t\tconst sel = this.view.getSelectedId();\n\t\tif(!sel)\n\t\t\treturn false;\n\t\tthis.view.$handleSelection = ()=>{\n\t\t\treturn false;\n\t\t};\n\n\t\tconst elements = this.$dialog.getBody().elements;\n\t\tthis.type = elements[\"type\"];\n\t\tthis.size = elements[\"size\"];\n\n\t\tthis.$dialog.getHead().getChildViews()[0].setHTML(this.header);\n\t\tconst grid = this.view.$$(\"cells\");\n\n\t\tlet value;\n\t\tif(this.group == \"row\")\n\t\t\tvalue = grid.getItem(sel.row).$height || grid.config.rowHeight;\n\t\telse\n\t\t\tvalue = grid.getColumnConfig(sel.column).width || grid.config.columnWidth;\n\n\t\tvalue = value / this.view._zoom;\n\n\t\tthis.type.getOption(1).value = webix.i18n.spreadsheet.labels[this.group == \"row\" ? \"height\" : \"width\"];\n\t\tthis.type.setValue(1);\n\t\tthis.type.refresh();\n\n\t\tthis.size.setValue(Math.ceil(value));\n\t\tthis.size.focus();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\tokClick(){\n\t\tconst type = this.type.getValue();\n\n\t\tlet size = \"auto\";\n\t\tif(type == 1)\n\t\t\tsize = this.size.getValue()*1;\n\t\telse if(type == 3)\n\t\t\tsize = this.view.$$(\"cells\").config[this.group == \"row\" ? \"rowHeight\" : \"columnWidth\"];\n\n\t\tif(this.group == \"row\")\n\t\t\tthis.view.setRowHeight(null, size);\n\t\telse\n\t\t\tthis.view.setColumnWidth(null, size);\n\n\t\tthis.close();\n\t}\n\t$init(){\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tposition:\"center\",\n\t\t\twidth: 300,\n\t\t\tmove: true,\n\t\t\tbody:{\n\t\t\t\tpadding:0,\n\t\t\t\tcols:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"radio\", name:\"type\", vertical:true, optionHeight:40,\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonChange: id => {\n\t\t\t\t\t\t\t\tif(id == 1)\n\t\t\t\t\t\t\t\t\tthis.size.enable();\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tthis.size.disable();\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\toptions:[\n\t\t\t\t\t\t\t{id:1, value: \"\"},\n\t\t\t\t\t\t\t{id:2, value: locale[\"fit-content\"]},\n\t\t\t\t\t\t\t{id:3, value: locale[\"default-size\"]},\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{rows: [\n\t\t\t\t\t\t{view:\"text\", name: \"size\", width:120},\n\t\t\t\t\t]}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n}","import {Dialog} from \"./common\";\nimport {getDateEditFormat} from \"../operations/formats\";\nimport {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\nimport {isDateInvalid} from \"../operations/formats\";\nimport {find} from \"../helpers/array\";\nimport group from \"../operations/undo_group\";\n\nexport const action = \"add-cell-validation\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tconst cell = this.cell = this.view.getSelectedId();\n\t\tif(!cell)\n\t\t\treturn false;\n\n\t\tthis.restoreValue(form, cell);\n\n\t\tthis.view.$handleSelection = (st, end, a, b)=>{\n\t\t\tconst type = this.$dialog.getBody().elements.type.getValue();\n\t\t\tif (this.activeValue && this.activeValue.isVisible())\n\t\t\t\tthis.activeValue.setValue(\"=\"+(type != \"range\" ? a : a+\":\"+b));\n\t\t\treturn false;\n\t\t};\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t\tthis.$dialog.getBody().clear();\n\t}\n\trestoreValue(form, cell){\n\t\tlet rule = this.view.validation.get(cell.row, cell.column);\n\t\tif(!rule)\n\t\t\trule = {};\n\t\twebix.extend(rule, { type: \"any\", errorHandle: \"information\" });\n\t\tform.setValues(rule);\n\t\tthis.formatInput(form.elements.value);\n\t\tthis.formatInput(form.elements.value2);\n\t}\n\tprepareConditions(){\n\t\tconst handlers = this.view.validation.handlers;\n\t\tfor(let name in handlers)\n\t\t\thandlers[name].map(rule => {\n\t\t\t\tif(!rule.value)\n\t\t\t\t\trule.value = webix.i18n.filter[ rule.id ];\n\t\t\t\treturn rule;\n\t\t\t});\n\t\tthis.handlers = handlers;\n\t}\n\thandleTypeChange(value, oldValue){\n\t\tconst form = this.$dialog.getBody();\n\t\tconst elements = form.elements;\n\n\t\tconst type = elements.type.getValue();\n\t\tconst condition = elements.condition;\n\n\t\tswitch(type){\n\t\t\tcase \"any\":\n\t\t\t\tform.showBatch(\"any\");\n\t\t\t\tbreak;\n\t\t\tcase \"date\":\n\t\t\tcase \"text\":\n\t\t\tcase \"textLength\":\n\t\t\t\tform.showBatch(\"value\");\n\t\t\t\tform.showBatch(\"condition\", true);\n\t\t\t\tbreak;\n\t\t\tcase \"number\":\n\t\t\t\tform.showBatch(\"value\");\n\t\t\t\tform.showBatch(\"condition\", true);\n\t\t\t\tform.showBatch(\"number\", true);\n\t\t\t\tbreak;\n\t\t\tcase \"range\":\n\t\t\t\tform.showBatch(\"value\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst conditionValue = condition.getValue();\n\t\tif(condition.isVisible()){\n\t\t\tcondition.getList().clearAll();\n\t\t\tconst data = [...this.handlers[type]];\n\n\t\t\tif(!find(data, obj => obj.id == conditionValue))\n\t\t\t\tcondition.setValue();\n\n\t\t\tcondition.getList().parse(data);\n\n\t\t\tif(conditionValue == \"between\" || conditionValue == \"notBetween\")\n\t\t\t\telements.value2.show();\n\t\t\telse\n\t\t\t\telements.value2.hide();\n\t\t}\n\t\telse\n\t\t\telements.value2.hide();\n\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\tconst placeholders = {\n\t\t\ttext: locale[\"validation-placeholder-text\"] || \"some text\",\n\t\t\ttextLength: locale[\"validation-placeholder-number\"] || 123,\n\t\t\tdate: locale[\"validation-placeholder-date\"] || getDateEditFormat(this.view, this.cell.row, this.cell.column)(new Date()),\n\t\t\tnumber: locale[\"validation-placeholder-number\"] || 123,\n\t\t\trange: locale[\"validation-placeholder-range\"] || \"=A1:A7\"\n\t\t};\n\n\t\telements.value.config.placeholder = elements.value2.config.placeholder = placeholders[type];\n\n\t\tif(oldValue == \"date\"){\n\t\t\telements.value.setValue(this.normalizeValue(elements.value.getValue(), \"date\"));\n\t\t\telements.value2.setValue(this.normalizeValue(elements.value2.getValue(), \"date\"));\n\t\t}\n\t\telse if(value == \"date\"){\n\t\t\tthis.formatInput(elements.value);\n\t\t\tthis.formatInput(elements.value2);\n\t\t}\n\n\t\telements.value.refresh();\n\t\telements.value2.refresh();\n\t}\n\tnormalizeValue(value, type){\n\t\tif(webix.isUndefined(value))\n\t\t\tvalue = \"\";\n\n\t\tconst isString = isNaN(value);\n\t\tif(isString && value[0] == \"=\")\n\t\t\treturn value;\n\n\t\ttype = type || this.$dialog.getBody().elements.type.getValue();\n\t\tif(type == \"date\"){\n\t\t\tif(isString){\n\t\t\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\t\t\tvalue = parser(value);\n\t\t\t\tvalue = value === \"\" || isNaN(value) ? \"\" : getExcelDateFromJs(value);\n\t\t\t}\n\t\t\telse\n\t\t\t\tvalue = isDateInvalid(value) ? \"\" : value;\n\t\t}\n\t\telse if((type == \"number\" || type == \"textLength\") && isString)\n\t\t\tvalue = \"\";\n\n\t\treturn value;\n\t}\n\tformatValue(value, type){\n\t\tif(type == \"date\" && value !== \"\" && value[0] != \"=\"){\n\t\t\tvalue = getJsDateFromExcel(value);\n\t\t\treturn getDateEditFormat(this.view, this.cell.row, this.cell.column)(value);\n\t\t}\n\t\treturn value.toString();\n\t}\n\tformatInput(view){\n\t\tlet value = view.getValue();\n\t\tif(value !== \"\"){\n\t\t\tconst elements = view.getFormView().elements;\n\t\t\tconst type = elements.type.getValue();\n\t\t\tvalue = this.normalizeValue(value, type);\n\t\t\tview.setValue(this.formatValue(value, type));\n\t\t}\n\t}\n\t$init(){\n\t\tthis.prepareConditions();\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\twidth: 500,\n\t\t\thead: locale[\"add-cell-validation\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telementsConfig: {\n\t\t\t\t\tlabelWidth: 170\n\t\t\t\t},\n\t\t\t\trules:{\n\t\t\t\t\tvalue: webix.rules.isNotEmpty,\n\t\t\t\t\tvalue2: webix.rules.isNotEmpty,\n\t\t\t\t\tcondition: webix.rules.isNotEmpty,\n\t\t\t\t\terrorHandle: webix.rules.isNotEmpty\n\t\t\t\t},\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"richselect\", label:locale[\"validation-type\"], name:\"type\",\n\t\t\t\t\t\toptions:[\n\t\t\t\t\t\t\t{id:\"any\", value:locale[\"validation-any\"]},\n\t\t\t\t\t\t\t{id:\"date\", value:locale[\"validation-date\"]},\n\t\t\t\t\t\t\t{id:\"number\", value:locale[\"validation-number\"]},\n\t\t\t\t\t\t\t{id:\"text\", value:locale[\"validation-text\"]},\n\t\t\t\t\t\t\t{id:\"textLength\", value:locale[\"validation-text-length\"]},\n\t\t\t\t\t\t\t{id:\"range\", value:locale[\"validation-range\"]}\n\t\t\t\t\t\t],\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: (value, oldValue) => this.handleTypeChange(value, oldValue)\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{ view:\"checkbox\", label:locale[\"validation-integer\"], batch:\"number\", name:\"integer\" },\n\t\t\t\t\t{ view:\"checkbox\", label:locale[\"validation-ignore-empty\"], batch:\"value\", name:\"ignoreEmpty\" },\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel:locale[\"condition\"],\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tbatch:\"condition\",\n\t\t\t\t\t\tview:\"richselect\",\n\t\t\t\t\t\tname: \"condition\",\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: function(newv) {\n\t\t\t\t\t\t\t\tconst elements = this.getFormView().elements;\n\t\t\t\t\t\t\t\tif (newv == \"between\" || newv == \"notBetween\")\n\t\t\t\t\t\t\t\t\telements.value2.show();\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\telements.value2.hide();\n\t\t\t\t\t\t\t\telements.condition.validate();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\t\tdata: []\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tbatch:\"value\",\n\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel:locale[\"value\"],\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonFocus: current_view => this.activeValue = current_view,\n\t\t\t\t\t\t\t\t\tonBlur: current_view => {\n\t\t\t\t\t\t\t\t\t\tthis.formatInput(current_view);\n\t\t\t\t\t\t\t\t\t\tcurrent_view.validate();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tname: \"value\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tname: \"value2\",\n\t\t\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonFocus: current_view => this.activeValue = current_view,\n\t\t\t\t\t\t\t\t\tonBlur: current_view => {\n\t\t\t\t\t\t\t\t\t\tthis.formatInput(current_view);\n\t\t\t\t\t\t\t\t\t\tcurrent_view.validate();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\thidden: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"inputMessage\",\n\t\t\t\t\t\tview: \"textarea\",\n\t\t\t\t\t\tlabel: locale[\"validation-input-message\"]\n\t\t\t\t\t},\n\t\t\t\t\t{ view:\"richselect\", batch:\"value\", label:locale[\"validation-error-handle\"], name:\"errorHandle\",\n\t\t\t\t\t\toptions:[\n\t\t\t\t\t\t\t{id:\"information\", value:locale[\"validation-error-information\"]},\n\t\t\t\t\t\t\t{id:\"warning\", value:locale[\"validation-error-warning\"]},\n\t\t\t\t\t\t\t{id:\"stop\", value:locale[\"validation-error-stop\"]}\n\t\t\t\t\t\t],\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonChange: function(){\n\t\t\t\t\t\t\t\tthis.validate();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"errorTitle\",\n\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\tbatch:\"value\",\n\t\t\t\t\t\tlabel: locale[\"validation-error-title\"]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"errorMessage\",\n\t\t\t\t\t\tview: \"textarea\",\n\t\t\t\t\t\tbatch:\"value\",\n\t\t\t\t\t\tlabel: locale[\"validation-error-message\"]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst form = this.$dialog.getBody();\n\t\tif(form.validate()){\n\t\t\tconst data = form.getValues({hidden:false});\n\t\t\tdata.value = this.normalizeValue(data.value);\n\t\t\tif(data.value2){\n\t\t\t\tdata.value = [data.value, this.normalizeValue(data.value2)];\n\t\t\t\tdelete data.value2;\n\t\t\t}\n\n\t\t\tconst view = this.view;\n\t\t\tgroup.set(()=>\n\t\t\t\tview.eachSelectedCell(cell =>{\n\t\t\t\t\tif(data.type == \"any\" && !data.inputMessage)\n\t\t\t\t\t\tview.validation.remove(cell.row, cell.column);\n\t\t\t\t\telse\n\t\t\t\t\t\tview.validation.add(cell.row, cell.column, data);\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tview.refresh();\n\t\t\tthis.close();\n\t\t}\n\t}\n}","import * as imc from \"./imagecell\";\nimport * as imt from \"./imagetop\";\nimport * as asw from \"./sparkline\";\nimport * as rgs from \"./ranges\";\nimport * as dpd from \"./dropdown\";\nimport * as flt from \"./filter\";\nimport * as fmt from \"./format\";\nimport * as cnd from \"./conditional\";\nimport * as exp from \"./export\";\nimport * as lnk from \"./link\";\nimport * as pnt from \"./print\";\nimport * as cmt from \"./comments\";\nimport * as siz from \"./sizing\";\nimport * as vld from \"./validation\";\n\nconst bases = [ imt, imc, asw, rgs, dpd, flt, fmt, cnd, exp, lnk, pnt, cmt, siz, vld ];\n\nexport function init(view){\n\tconst dialogs = {};\n\tconst viewBases = view.config.readonly ? [cmt, exp, pnt, flt] : bases;\n\n\tfor (let i = 0; i < viewBases.length; i++)\n\t\tdialogs[viewBases[i].action] = new viewBases[i].DialogBox(view);\n\n\tview.attachEvent(\"onCommand\", function(action){\n\t\tconst box = dialogs[action.id];\n\t\tif (box) box.open(action);\n\t});\n\n\tview.attachEvent(\"onAction\", function(id, values){\n\t\t//hide win when the external ui is removed\n\t\tif(id == \"add-view\" && !values.newValue){\n\t\t\tconst box = dialogs[\"add-image-top\"];\n\t\t\tif(box && box.viewid == values.row){\n\t\t\t\tbox.close();\n\t\t\t}\n\t\t}\n\t});\n}","import {ignoreReset, ignoreUndo}  from \"../operations/undo\";\nimport group  from \"../operations/undo_group\";\nimport {adjustSpan}  from \"../operations/spans\";\nimport {updateMaxColumn} from \"../helpers/column_names\";\nimport {find} from \"../helpers/array\";\n\nexport function init(view){\n\tview.attachEvent(\"onCommand\", (action, start, end) => {\n\t\tif (action.id == \"add\" || action.id == \"del\"){\n\t\t\tvar area = view._table.getSelectArea();\n\t\t\tif(area && !(start && end)){\n\t\t\t\tstart = area.start;\n\t\t\t\tend = area.end;\n\t\t\t}\n\n\t\t\tif (start && end){\n\t\t\t\tif(action.group == \"column\" && action.id == \"add\")\n\t\t\t\t\tupdateMaxColumn(view.config.columnCount + (end.column - start.column) + 1);\n\n\t\t\t\tgroup.set(function(){\n\t\t\t\t\tprocess(action, start, end, view);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tview.attachEvent(\"onUndo\", (action, row, column, value, dir, extra) => {\n\t\tif (action == \"grid-change\"){\n\t\t\tconst state = view._table.getScrollState();\n\n\t\t\t//if we added rows/cols - regine can update cell references on other pages on undo\n\t\t\tif(extra){\n\t\t\t\tif(!dir)\n\t\t\t\t\tview._mPage[row ? \"removeRow\" : \"removeColumn\"]((row || column)-1, extra.count);\n\t\t\t\telse\n\t\t\t\t\tview._mPage[row ? \"addRow\" : \"addColumn\"]((row || column)-1, extra.count);\n\t\t\t}\n\t\t\t//if removed - can't, so parse full data and show sheet\n\t\t\telse\n\t\t\t\tstate.sheet = view.getActiveSheet();\n\n\t\t\tloadChangedData(view, value, state);\n\t\t}\n\t});\n}\n\nfunction process(action, start, end, view) {\n\tlet select = view._table.getSelectArea();\n\tconst state = view._table.getScrollState();\n\n\tconst del = action.id == \"del\";\n\tconst oldData = view.serialize({sheets: del, viewIds:true});\n\tconst newData = webix.copy(oldData);\n\tconst data = {value:oldData, newValue:newData};\n\n\tif(!del)\n\t\twebix.extend(data, {\n\t\t\t[action.group]: start[action.group],\n\t\t\textra: {\n\t\t\t\tcount: end.row - start.row + 1\n\t\t\t}\n\t\t});\n\n\tconst obj = del ? find(newData, sheet => sheet.name == view.getActiveSheet()).content : newData;\n\n\tconst spanData = [];\n\tconst spans = obj.spans;\n\tfor (let i in spans){\n\t\tconst span = adjustSpan(spans[i], action, start, end, view, obj.data, spanData);\n\t\tif (span[2] <= 0 || span[3] <= 0)\n\t\t\tspans.splice(i, 1);\n\t}\n\n\tconst values = getUpdateValues(action, start, end);\n\tignoreUndo(function(){\n\t\tview.callEvent(\"onAction\", [\"before-grid-change\", {\n\t\t\tname: values.name,\n\t\t\tinc: values.inc,\n\t\t\tdata: obj,\n\t\t\tstart: start\n\t\t}]);\n\t},view);\n\n\tif (action.group == \"column\"){\n\t\tif (del)\n\t\t\t_delColumn(action, start, end, view);\n\t\telse\n\t\t\t_addColumn(action, start, end, view);\n\t}\n\telse if (action.group == \"row\") {\n\t\tif (del)\n\t\t\t_delRow(action, start, end, view);\n\t\telse\n\t\t\t_addRow(action, start, end, view);\n\t}\n\n\t// muon updates data and ranges\n\tconst updatedData = view.serialize();\n\tobj.data = updatedData.data;\n\tobj.ranges = updatedData.ranges;\n\n\tspanData.forEach(item => {\n\t\tobj.data.push(item);\n\t});\n\n\tview.callEvent(\"onAction\", [\"grid-change\", data]);\n\n\tignoreUndo(function() {\n\t\tloadChangedData(view, obj, state);\n\t},view);\n\n\tif (select){\n\t\tselect = fixSelectArea(select, view);\n\t\tif (select)\n\t\t\tview.$$(\"cells\").addSelectArea(select.start, select.end);\n\t}\n}\n\nfunction fixSelectArea(select, view){\n\tconst config = view.config;\n\n\tconst rows = config.rowCount;\n\tconst cols = config.columnCount;\n\n\tif (select.start.row*1 > rows) select.start.row = rows;\n\tif (select.end.row*1 > rows) select.end.row = rows;\n\tif (select.start.column*1 > cols) select.start.column = cols;\n\tif (select.end.column*1 > cols) select.end.column = cols;\n\n\tif (\n\t\tview.isRowVisible(select.start.row) &&\n\t\tview.isRowVisible(select.end.row) &&\n\t\tview.isColumnVisible(select.start.column) &&\n\t\tview.isColumnVisible(select.end.column)\n\t)\n\t\treturn select;\n}\n\nfunction loadChangedData(view, data, state){\n\t// data loading resets undo history, and\n\t// we need to preserve it\n\tignoreReset(function(){\n\t\tview.$handleSelection = null;\n\t\tview.parse(data);\n\n\t\tif(state){\n\t\t\tif(state.sheet)\n\t\t\t\tview.showSheet(state.sheet);\n\t\t\tview._table.scrollTo(state.x, state.y);\n\t\t}\n\t});\n}\n\nfunction getUpdateValues( action, start, end){\n\tvar name = action.group,\n\t\tinc = action.id==\"add\"?1:(action.id==\"del\"?-1:0);\n\n\tif(inc) {\n\t\t// span support\n\t\tif (name == \"row\")\n\t\t\tinc += inc * (end.row - start.row);\n\t\tif (name == \"column\")\n\t\t\tinc += inc * (end.column - start.column);\n\t}\n\treturn {name: name, inc: inc};\n}\n\nfunction _addColumn(action, start, end, view) {\n\tlet count = end.column - start.column + 1;\n\n\tview._mPage.addColumn(start.column-1, count);\n\tview.config.columnCount += count;\n\n\tview.callEvent(\"onColumnOperation\", [action.id, start.column, end.column, view.getActiveSheet()]);\n}\n\nfunction _delColumn(action, start, end, view) {\n\tlet count = end.column - start.column + 1;\n\n\tif (view.config.columnCount === count){\n\t\tif (start.column == end.column)\n\t\t\treturn; //deleting last column, ignoring\n\t\t//prevent deleting all columns\n\t\tend.column--;\n\t\tcount--;\n\t}\n\n\tview._mPage.removeColumn(start.column-1, count);\n\tview.config.columnCount -= count;\n\n\tview.callEvent(\"onColumnOperation\", [action.id, start.column, end.column, view.getActiveSheet()]);\n}\n\nfunction _addRow(action, start, end, view) {\n\tconst count = end.row - start.row + 1;\n\n\tview._mPage.addRow(start.row-1, count);\n\tview.config.rowCount += count;\n\n\tview.callEvent(\"onRowOperation\", [action.id, start.row, end.row]);\n}\n\nfunction _delRow(action, start, end, view) {\n\tlet count = end.row - start.row + 1;\n\n\tif (view.config.rowCount === count){\n\t\tif (start.row == end.row)\n\t\t\treturn; //deleting last column, ignoring\n\t\t//prevent deleting all columns\n\t\tend.row--;\n\t\tcount--;\n\t}\n\n\tview._mPage.removeRow(start.row-1, count);\n\tview.config.rowCount -= count;\n\n\tview.callEvent(\"onRowOperation\", [action.id, start.row, end.row]);\n}","import group from \"./undo_group\";\nimport {setSpanCss} from \"./spans\";\nimport {rangeOptions} from \"../mathematics/ranges\";\nimport * as fmt from \"../operations/formats\";\nimport {changeRange, eachRange} from \"../helpers/column_names\";\n\nexport function init(view){\n\tconst table = view._table;\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\treset(view);\n\n\ttable.attachEvent(\"onBeforeEditStart\", function(id){\n\t\tlet col = this.getColumnConfig(id.column);\n\t\tif (this._ssEditors[id.row]){\n\t\t\tlet ed = this._ssEditors[id.row][id.column];\n\t\t\tif (ed){\n\t\t\t\twebix.extend(col, ed, true);\n\t\t\t\twebix.extend(col, {row: view.getRow(id.row)}, true);\n\t\t\t\tif (ed.options){\n\t\t\t\t\tif (typeof ed.options == \"string\")\n\t\t\t\t\t\tcol.options = rangeOptions(view, ed.options, { unique:true, order:true, empty:ed.empty });\n\t\t\t\t\telse if (webix.isArray(ed.options))\n\t\t\t\t\t\tcol.options = rangeOptions(view, ed.options, { empty:ed.empty });\n\n\t\t\t\t\tif(col.collection){\n\t\t\t\t\t\tcol.collection.clearAll();\n\t\t\t\t\t\tcol.collection.parse(col.options);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\t// update format if editor supports this feature\n\ttable.attachEvent(\"onBeforeEditStop\", function(state, editor, ignore){\n\t\tif (!ignore && editor.getFormat){\n\t\t\tconst value = editor.getValue();\n\t\t\tlet format = editor.getFormat(value);\n\n\t\t\tgroup.set(function(){\n\t\t\t\tview.setCellValue(editor.row, editor.column, value);\n\t\t\t\tif (format){\n\t\t\t\t\tfmt.addFormat(view, editor.row, editor.column, fmt.getFormatSource(format));\n\t\t\t\t} else\n\t\t\t\t\tfmt.removeFormat(view, editor.row, editor.column);\n\t\t\t});\n\n\t\t\tconst cell = view.getSelectedId();\n\t\t\tif (cell && cell.row == editor.row && cell.column == editor.column){\n\t\t\t\tformat = format || \"common\";\n\t\t\t\tformat = fmt.isCustom(format) ? \"custom\" : format;\n\t\t\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"format\", value:format}]);\n\t\t\t}\n\t\t}\n\t});\n\n\ttable.attachEvent(\"onAfterEditStop\", function(state, editor){\n\t\tconst col = this.getColumnConfig(editor.column);\n\n\t\tcol.editor = \"text\";\n\t\tdelete col.popup; delete col.$popup; delete col.row;\n\t});\n\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type == \"dropdown\")\n\t\t\tview.setCellEditor(row, column, value);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p) => {\n\t\tif (action == \"dropdown\"){\n\t\t\tif(p.page == view.getActiveSheet())\n\t\t\t\tsetSpanCss(view, p.row, p.column, \"ss_editor\", p.newValue);\n\t\t}\n\t\telse if (action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nfunction reset(view){\n\tview._table._ssEditors = {};\n}\n\nexport function serialize(view,data){\n\tvar row, column,\n\t\ttblEditors = view._table._ssEditors,\n\t\teditors = [];\n\n\tfor (row in tblEditors){\n\t\tfor (column in tblEditors[row])\n\t\t\teditors.push([row, column, tblEditors[row][column]]);\n\t}\n\tdata.editors = editors;\n}\n\nexport function load(view,data){\n\tconst editors = data.editors;\n\n\tif (editors)\n\t\tfor (let i=0; i<editors.length; i++)\n\t\t\tview.setCellEditor.apply(view, editors[i]);\n}\n\nexport function clearEditors(view, range, page){\n\tview._table.editStop();\n\teachRange(range, view, function(view, cell){\n\t\tif(view.getCellEditor(cell.row, cell.column, page))\n\t\t\tview.setCellEditor(cell.row, cell.column, null, page);\n\t});\n}\n\nexport function isEditor(view, row, column){\n\tconst editor = view._table._ssEditors;\n\treturn editor[row] && !!editor[row][column];\n}\n\n// called on column/row add, delete, hide,show\nfunction updatePosition(view, name, inc, data, start){\n\tconst editors = data.editors;\n\n\tif (inc){\n\t\t// create new editors\n\t\tfor(let i=editors.length-1; i>=0; i--){\n\t\t\tlet [row,column,editor] = editors[i];\n\t\t\tif (name == \"row\" && row >= start.row || name == \"column\" && column >= start.column){\n\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc){\t//delete editor mark if row was deleted\n\t\t\t\t\t\teditors.splice(i,1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\teditors[i][0] = row*1 + inc;\n\t\t\t\t}\n\t\t\t\telse if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\teditors.splice(i, 1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else \n\t\t\t\t\t\teditors[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t\teditor.options = changeRange(editor.options, name, inc, start);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function pasteDropdown(view, extra, row, col, cutted){\n\tconst editor = extra.dropdown;\n\n\tview.setCellEditor(row, col, editor);\n\tif (cutted === 1)\n\t\tview.setCellEditor(extra.row, extra.col, {});\n}","import {ignoreReset, ignoreUndo} from \"./undo\";\nimport {pasteCondition} from \"./conditional_formats\";\nimport {pasteDropdown} from \"./dropdown\";\nimport {pasteFilter} from \"./filter\";\nimport {pasteSpan} from \"./spans\";\nimport {pasteValidation} from \"./validation\";\n\nlet styledata, clipdata, origin, cutted, updateFilters, specialPaste, context;\n\nexport function init(view){\n\tview.attachEvent(\"onSheetRename\", (name, newName)=> {\n\t\tif(context && context.page == name && context.view == view)\n\t\t\tcontext.page = newName;\n\t});\n\n\tview.attachEvent(\"onSheetRemove\", (name)=> {\n\t\tif(context && context.page == name && context.view == view)\n\t\t\tcontext = null;\n\t});\n\n\tconst clipboard = view.config.clipboard;\n\tconst browserClipboard = navigator.clipboard;\n\n\tif(clipboard === false)\n\t\treturn;\n\n\twebix.clipbuffer.init();\n\tconst buffer = document.querySelector(\".webix_clipbuffer\");\n\n\tconst keyC = 67; //keyboard 'c' code\n\tconst keyX = 88; //keyboard 'x' code\n\tconst grid = view.$$(\"cells\");\n\n\tgrid.attachEvent(\"onSelectChange\", () => _sel_to_clip(view, buffer));\n\n\tgrid.attachEvent(\"onKeyPress\", (code, e) => {\n\t\tif((code === keyC || code === keyX) && (e.ctrlKey || e.metaKey) && grid.getSelectedId()){\n\t\t\tcutted = (code === keyX)*1;\n\t\t\tsetClipboard(view, buffer);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onCommand\", action => {\n\t\tif(action.id.indexOf(\"paste\") != -1){\n\t\t\tspecialPaste = action.id.split(\"-\")[1];\n\n\t\t\tif(browserClipboard && browserClipboard.readText){\n\t\t\t\tbrowserClipboard.readText()\n\t\t\t\t\t.then(text => {\n\t\t\t\t\t\twebix.clipbuffer.set(text);\n\t\t\t\t\t\t_clip_to_sel(view, grid, buffer.value);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(()=> {\n\t\t\t\t\t\t_clip_to_sel(view, grid, clipdata);\n\t\t\t\t\t})\n\t\t\t\t\t.finally(()=> {\n\t\t\t\t\t\tspecialPaste = null;\n\t\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_clip_to_sel(view, grid, clipdata);\n\t\t\t\tspecialPaste = null;\n\t\t\t}\n\t\t}\n\t\telse if(action.id == \"copy\" || action.id == \"cut\"){\n\t\t\tcutted = (action.id == \"cut\")*1;\n\t\t\tsetClipboard(view, buffer, browserClipboard, true);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onUndo\", (action, row, column, data) => {\n\t\tif (action == \"paste\"){\n\t\t\tconst state = grid.getScrollState();\n\t\t\tconst sel = grid.getSelectArea();\n\t\t\t// data loading resets undo history, and\n\t\t\t// we need to preserve it\n\t\t\tignoreReset(()=>{\n\t\t\t\tview.$handleSelection = null;\n\t\t\t\tview.parse(data);\n\n\t\t\t\tgrid.addSelectArea(sel.start, sel.end);\n\t\t\t\tgrid.scrollTo(state.x, state.y);\n\t\t\t});\n\t\t}\n\t});\n\n\tif (!view.config.readonly) {\n\t\tgrid.attachEvent(\"onPaste\", text => {\n\t\t\t_clip_to_sel(view, grid, text);\n\t\t});\n\t}\n}\n\nfunction setClipboard(view, buffer, browserClipboard, menu){\n\tconst grid = view.$$(\"cells\");\n\torigin = grid.getSelectArea();\n\t\n\tstyledata = _get_sel_style(view);\n\tcontext = { page: view.getActiveSheet(), view };\n\n\tif(menu && browserClipboard && browserClipboard.writeText)\n\t\tbrowserClipboard.writeText(buffer.value);\n\n\tclipdata = buffer.value;\n\n\tif(cutted && Object.keys(grid._ssFilters).length !== 0)\n\t\tupdateFilters = allFiltersInZone(grid._ssFilters, view.config.columnCount);\n}\n\nfunction _sel_to_clip(view, buffer){\n\tif(view._loading_data) return;\n\tconst grid = view.$$(\"cells\");\n\tif(grid.getSelectedId())\n\t\twebix.delay(()=>{\n\t\t\tconst data = [];\n\n\t\t\tconst origin = grid.getSelectArea();\n\t\t\tfor(let r = origin.start.row; r <= origin.end.row; r++){\n\t\t\t\tconst row = [];\n\t\t\t\tfor(let c = origin.start.column; c <= origin.end.column; c++)\n\t\t\t\t\trow.push(_updateDelimiter(view.getCellValue(r, c, false), view.config));\n\t\t\t\tdata.push(row);\n\t\t\t}\n\n\t\t\tconst clipdata = webix.csv.stringify(data, grid.config.delimiter);\n\n\t\t\tif (grid.getEditor()){\n\t\t\t\tbuffer.value = clipdata;\n\t\t\t} else {\n\t\t\t\tbuffer.focus();\n\t\t\t\twebix.clipbuffer.set(clipdata);\n\t\t\t}\n\t\t\twebix.UIManager.setFocus(grid);\n\t\t});\n}\n\nfunction _updateDelimiter(value, config) {\n\tconst format = getClipboardNumberFormat(config);\n\n\tif(webix.rules.isNumber(value) && format)\n\t\tvalue = webix.Number.numToStr(format)(value);\n\n\treturn value;\n}\n\nfunction _clip_to_sel(view, grid, text){\n\tif(!text)\n\t\ttext = \"\";\n\n\tconst leftTop = grid.getSelectArea();\n\tif (!leftTop) return;\n\tconst start = leftTop.start;\n\tconst end = leftTop.end;\n\n\tconst fromSheet = text === clipdata;\n\n\tlet data = fromSheet ? styledata : webix.csv.parse(text, grid.config.delimiter);\n\tif(!fromSheet)\n\t\tdata = _changeDelimiter(data, view.config);\n\n\tconst translate = { id:\"move\", column:0, row: 0, cut:cutted };\n\tconst sameView = context && context.view == view;\n\n\tif(specialPaste || !fromSheet){\n\t\tcutted = 0;\n\t\tupdateFilters = 0;\n\t}\n\n\tconst oldData = view.serialize();\n\n\tignoreUndo(()=>{\n\t\tconst dataRowCount = data.length;\n\t\tconst dataColCount = data[0].length;\n\n\t\tconst colCount = end.column - start.column + 1;\n\t\tlet rowCount = end.row - start.row + 1;\n\n\t\t_add_row_col(view, start, rowCount, data);\n\n\t\tif(fromSheet){\n\t\t\ttranslate.column = start.column - origin.start.column;\n\t\t\ttranslate.row = start.row - origin.start.row;\n\n\t\t\tif (updateFilters){\n\t\t\t\tconst sel = grid.getSelectArea();\n\t\t\t\tview.removeFilters();\n\t\t\t\tgrid.addSelectArea(sel.start, sel.end);\n\t\t\t}\n\n\t\t\tconst mode = (!cutted && !updateFilters && (rowCount > dataRowCount || colCount > dataColCount)) ? 2 : 0;\n\n\t\t\tif(specialPaste != \"conditions\"){\n\t\t\t\tif (cutted == 1){\n\t\t\t\t\tif(sameView){\n\t\t\t\t\t\tview._mData.getCopyManager().move(\n\t\t\t\t\t\t\tview._mPage.cellID(start.row-1, start.column-1),\n\t\t\t\t\t\t\tview._mData.getStore().getMeta().$clipboard\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif(context && !context.view.$destructed)\n\t\t\t\t\t\tcontext.view.groupUndo(()=>{\n\t\t\t\t\t\t\tfor (let row = origin.start.row; row <= origin.end.row; row++) {\n\t\t\t\t\t\t\t\tfor (let column = origin.start.column; column <= origin.end.column; column++) {\n\t\t\t\t\t\t\t\t\tcontext.view.setCellValue(row, column, null, context.page);\n\t\t\t\t\t\t\t\t\tcontext.view.setStyle(row, column, null, context.page);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse if(sameView){\n\t\t\t\t\tlet handler;\n\t\t\t\t\tif(specialPaste)\n\t\t\t\t\t\thandler = (a, b) => {\n\t\t\t\t\t\t\tswitch(specialPaste){\n\t\t\t\t\t\t\t\tcase \"formulas\":\n\t\t\t\t\t\t\t\t\treturn webix.extend(a, { value: b.formula || b.value }, true);\n\t\t\t\t\t\t\t\tcase \"styles\":\n\t\t\t\t\t\t\t\t\treturn webix.extend(a, {style: b.style, format: b.format }, true);\n\t\t\t\t\t\t\t\tcase \"values\":\n\t\t\t\t\t\t\t\t\treturn webix.extend(a, {value: b.value }, true);\n\t\t\t\t\t\t\t\tcase \"validation\":\n\t\t\t\t\t\t\t\t\treturn webix.extend(a, {validation: b.validation }, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\tview._mData.getCopyManager().paste(\n\t\t\t\t\t\tview._mPage.cellID(start.row-1, start.column-1),\n\t\t\t\t\t\tview._mPage.cellID(\n\t\t\t\t\t\t\tMath.max(start.row + origin.end.row - origin.start.row, end.row)-1,\n\t\t\t\t\t\t\tMath.max(start.column + origin.end.column - origin.start.column, end.column)-1\n\t\t\t\t\t\t),\n\t\t\t\t\t\tview._mData.getStore().getMeta().$clipboard,\n\t\t\t\t\t\tmode,\n\t\t\t\t\t\thandler\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (mode == 2) {\n\t\t\t\tfor(let r = 0, ri = 0; r < Math.max(rowCount, dataRowCount); r++, ri++){\n\t\t\t\t\tif(ri == data.length) ri = 0;\n\t\t\t\t\tfor (let c = 0, ci = 0; c < Math.max(colCount, dataColCount); c++, ci++){\n\t\t\t\t\t\tif(ci == data[0].length) ci = 0;\n\n\t\t\t\t\t\tconst subtrans = {\n\t\t\t\t\t\t\tid: \"move\",\n\t\t\t\t\t\t\tcolumn: translate.column + Math.floor(c/dataColCount) * dataColCount,\n\t\t\t\t\t\t\trow: translate.row + Math.floor(r/dataRowCount) * dataRowCount,\n\t\t\t\t\t\t\tcut: cutted\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t_clipboardToTable(view, start.row + r, start.column + c, data[ri][ci], subtrans);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tgrid.mapCells(\n\t\t\t\t\tstart.row,\n\t\t\t\t\tstart.column,\n\t\t\t\t\tdataRowCount,\n\t\t\t\t\tnull,\n\t\t\t\t\tfunction(value, row, col, row_ind, col_ind) {\n\t\t\t\t\t\tif (data[row_ind] && data[row_ind].length > col_ind) {\n\t\t\t\t\t\t\tconst cdata = data[row_ind][col_ind];\n\t\t\t\t\t\t\t_clipboardToTable(view, row, col, cdata, translate);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\t\t\tif(cutted == 1){\n\t\t\t\t//cut and cleared\n\t\t\t\tcutted = 2;\n\t\t\t\tupdateFilters = false;\n\t\t\t}\n\t\t}\n\t\telse \n\t\t\tfor (let r = 0, ri = 0; r < Math.max(rowCount, dataRowCount); r++, ri++) {\n\t\t\t\tif (ri == data.length) ri = 0;\n\t\t\t\tfor (var c = 0, ci = 0; c < Math.max(colCount, dataColCount); c++, ci++) {\n\t\t\t\t\tif (ci == data[0].length) ci = 0;\n\t\t\t\t\tview.setCellValue(start.row + r, start.column + c, data[ri][ci]);\n\t\t\t\t}\n\t\t\t}\n\t}, view);\n\n\tview.callEvent(\"onAction\", [\"paste\", {\n\t\tvalue: oldData,\n\t\tnewValue: view.serialize()\n\t}]);\n\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\"}]);\n\tview.refresh();\n}\n\nfunction _clipboardToTable(view, row, col, cdata, translate){\n\tif (typeof cdata === \"object\"){\n\t\tconst sameView = context && context.view == view;\n\t\tif(!(sameView && context.page == view.getActiveSheet())){\n\t\t\tif(!sameView && (!specialPaste || specialPaste == \"values\" || specialPaste == \"formulas\"))\n\t\t\t\tview.setCellValue(\n\t\t\t\t\trow,\n\t\t\t\t\tcol,\n\t\t\t\t\tcdata.math && specialPaste != \"values\" ? view._mData.getStore().transposeMath(cdata.math, translate.row, translate.column) : cdata.text\n\t\t\t\t);\n\n\t\t\tif(cdata.style && cdata.style.props && (!specialPaste || specialPaste == \"styles\")){\n\t\t\t\tconst style = view.addStyle(cdata.style.props);\n\t\t\t\tview.setStyle(row, col, style);\n\t\t\t}\n\t\t}\n\n\t\tconst extra = cdata.extra;\n\t\tif(extra){\n\t\t\tif(extra.condition && (!specialPaste || specialPaste == \"conditions\"))\n\t\t\t\tpasteCondition(view, extra, row, col, cutted);\n\t\t\tif(extra.dropdown && !specialPaste)\n\t\t\t\tpasteDropdown(view, extra, row, col, cutted, translate);\n\t\t\tif(extra.filter && updateFilters)\n\t\t\t\tpasteFilter(view, extra, row, col, cutted, translate);\n\t\t\tif(extra.validation && (!specialPaste || specialPaste == \"validation\"))\n\t\t\t\tpasteValidation(view, extra, row, col, cutted, translate);\n\t\t}\n\n\t\tif(!specialPaste)\n\t\t\tpasteSpan(view, extra, row, col, cutted, translate);\n\n\t\tview.saveCell(row, col, view.getActiveSheet());\n\t}\n}\n\nfunction _get_sel_style(view){\n\tconst data = [];\n\n\tconst cm = view._mData.getCopyManager();\n\tcm.copy(\n\t\tview._mPage.cellID(origin.start.row-1, origin.start.column-1),\n\t\tview._mPage.cellID(origin.end.row-1, origin.end.column-1)\n\t);\n\n\tfor(let r = origin.start.row; r <= origin.end.row; r++){\n\t\tconst row = [];\n\t\tfor(let c = origin.start.column; c <= origin.end.column; c++){\n\t\t\tlet math = view.getCellValue(r, c);\n\t\t\tmath = math && math[0] == \"=\" && math.length > 1 ? math : null;\n\n\t\t\tconst obj = { text: view.getCellValue(r, c, false), math, style: view.getStyle(r, c) };\n\n\t\t\tconst condition = view.conditions.get(r, c);\n\t\t\tconst editor = view.getCellEditor(r, c);\n\t\t\tconst filter = view.getCellFilter(r, c);\n\t\t\tconst span = view._table.getSpan(r, c);\n\t\t\tconst validation = view.validation.get(r, c);\n\n\t\t\tif (editor || filter || condition || span || validation){\n\t\t\t\tconst extra = { row:r, col:c };\n\t\t\t\tif (condition) extra.condition = condition;\n\t\t\t\tif (editor) extra.dropdown = editor;\n\t\t\t\tif (filter) extra.filter = filter;\n\t\t\t\tif (span) extra.span = span;\n\t\t\t\tif(validation) extra.validation = validation;\n\t\t\t\tobj.extra = extra;\n\t\t\t}\n\n\t\t\trow.push(obj);\n\t\t}\n\t\tdata.push(row);\n\t}\n\n\treturn data;\n}\n\nfunction allFiltersInZone(extra, columnCount){\n\tvar filters = Object.keys(extra);\n\tvar startRow = Math.min.apply(null, filters);\n\tvar endRow = Math.max.apply(null, filters);\n\tvar startCol = columnCount;\n\tvar endCol = 1;\n\n\tfor (var i = startRow; i <= endRow; i++){\n\t\tif(extra[i]){\n\t\t\tvar columns = Object.keys(extra[i]);\n\t\t\tstartCol = Math.min(startCol, Math.min.apply(null, columns));\n\t\t\tendCol = Math.max(endCol, Math.max.apply(null, columns));\n\t\t}\n\t}\n\n\tif(origin.start.row <= startRow && origin.end.row >= endRow && origin.start.column <= startCol && origin.end.column >= endCol)\n\t\treturn true;\n\telse\n\t\treturn false;\n}\n//dynamically increase rows and columns according to pasted data size\nfunction _add_row_col(view, start, rowCount, data){\n\tvar maxCol = start.column + data[0].length - 1;\n\tlet maxRow;\n\n\tif(rowCount > data.length){\n\t\tlet extraSpanRows = 0;\n\t\tconst lastRows = rowCount % data.length;\n\t\tfor (let r = 0; r < lastRows; r++) {\n\t\t\tfor(let c = 0; c < data[r].length; c++){\n\t\t\t\tif(data[r][c].extra && data[r][c].extra.span){\n\t\t\t\t\tconst span = data[r][c].extra.span;\n\t\t\t\t\tif(span[0] == origin.start.row + r && span[1] == origin.start.column + c){\n\t\t\t\t\t\tconst extra = r + span[3] - lastRows;\n\t\t\t\t\t\tif(extra > 0)\n\t\t\t\t\t\t\textraSpanRows = Math.max(extra, extraSpanRows);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tmaxRow = start.row + rowCount + extraSpanRows - 1;\n\t}\n\telse\n\t\tmaxRow = start.row + data.length - 1;\n\n\tif(maxRow > view.config.rowCount || maxCol > view.config.columnCount){\n\t\tvar action = { id:\"add\" };\n\t\tif (maxRow > view.config.rowCount) {\n\t\t\taction.group = \"row\";\n\t\t\tview.callEvent(\"onCommand\", [\n\t\t\t\taction, \n\t\t\t\t{ row: view.config.rowCount + 1 }, \n\t\t\t\t{ row: maxRow }\n\t\t\t]);\n\t\t}\n\t\tif (maxCol > view.config.columnCount) {\n\t\t\taction.group = \"column\";\n\t\t\tview.callEvent(\"onCommand\", [\n\t\t\t\taction, \n\t\t\t\t{ column: view.config.columnCount + 1 },\n\t\t\t\t{ column: maxCol }\n\t\t\t]);\n\t\t}\n\t}\n}\n\nfunction _changeDelimiter(data, config){\n\tconst format = getClipboardNumberFormat(config);\n\n\tif(format)\n\t\tfor(let i = 0; i < data.length; i++)\n\t\t\tfor(let k = 0; k < data[i].length; k++){\n\t\t\t\tconst record = webix.Number.parse(data[i][k], format);\n\t\t\t\tif(webix.rules.isNumber(record))\n\t\t\t\t\tdata[i][k] = record;\n\t\t\t}\n\n\treturn data;\n}\n\nfunction getClipboardNumberFormat(config){\n\tlet format = config.clipboardNumberFormat;\n\n\tif(!format && config.clipboardDecimalDelimiter) // backward compatibility\n\t\tformat = {\n\t\t\tdecimalDelimiter: config.clipboardDecimalDelimiter,\n\t\t\tdecimalOptional: true\n\t\t};\n\n\tif(format)\n\t\twebix.extend(format, {\n\t\t\tminusSign: webix.i18n.minusSign,\n\t\t\tminusPosition: webix.i18n.minusPosition,\n\t\t});\n\n\treturn format;\n}","import group from \"./undo_group\";\nimport {getSheet} from \"../sheets\";\nimport {find, findIndex} from \"../helpers/array\";\n\nexport function init(view) {\n\tview.attachEvent(\"onCommand\", (action) => {\n\t\tif (action.id == \"show\" || action.id == \"hide\"){\n\t\t\tconst sel = view._table.getSelectArea();\n\t\t\tif (sel)\n\t\t\t\tprocess(action, webix.copy(sel.start), webix.copy(sel.end), view);\n\t\t}\n\t});\n\treset(view);\n\n\tview.attachEvent(\"onUndo\", (action, row, column, value, direction) => {\n\t\tif ((action.id == \"hide\" || action.id == \"show\") && (action.group == \"column\" || action.group == \"row\")){\n\t\t\tlet type = action.id;\n\t\t\tif (!direction)\n\t\t\t\ttype = type == \"hide\" ? \"show\" : \"hide\";\n\t\t\tconst obj = (row || column);\n\t\t\tprocess({ id: type, group: action.group, neighbors: action.neighbors }, obj.start, obj.end, view, true);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onHardReset\", () => reset(view));\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\t_updatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nexport function reset(view, mode) {\n\tif(mode) view[\"_hidden_\"+mode+\"_hash\"] = {};\n\telse{\n\t\tview._hidden_cols_hash = {};\n\t\tview._hidden_rows_hash = {};\n\t\tview.filterSpreadSheet();\n\t}\n}\n\nfunction getIds(id){\n\treturn webix.isArray(id) ? id : [id, id];\n}\n\nexport function isColumnVisible(view, column, page){\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tconst table = sheet.content.table;\n\t\t\tif(table && table.hidden && table.hidden.column)\n\t\t\t\treturn !find(table.hidden.column, c => c == column);\n\t\t\telse return true;\n\t\t}\n\t}\n\telse\n\t\treturn !view._hidden_cols_hash[column];\n}\n\nexport function setState(view, indexes, state, type, page){\n\tif(!indexes && (!page || page == view.getActiveSheet())){\n\t\tconst sel = view.getSelectedId(true);\n\t\tif(!sel.length) return;\n\t\tindexes = [sel[0][type], sel[sel.length-1][type]];\n\n\t}\n\t\n\tconst ids = getIds(indexes);\n\n\tif (state)\n\t\t(type == \"row\" ? _hideRow : _hideColumn)({id: \"hide\", group: type}, {[type]: ids[0]}, {[type]: ids[1]}, view, false, page);\n\telse\n\t\t(type == \"row\" ? _showRow : _showColumn)({id: \"hide\", group: type}, {[type]: ids[0]}, {[type]: ids[1]}, view, false, page);\n}\n\nexport function isRowVisible(view, row, page){\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tconst table = sheet.content.table;\n\t\t\tif(table && table.hidden && table.hidden.row)\n\t\t\t\treturn !find(table.hidden.row, r => r == row);\n\t\t\telse return true;\n\t\t}\n\t}\n\telse\n\t\treturn !view._hidden_rows_hash[row];\n}\n\nexport function serialize(view, data){\n\tlet hrows  = []; let hcols = [];\n\tfor(let r in view._hidden_rows_hash) hrows.push(r);\n\tfor(let c in view._hidden_cols_hash) hcols.push(c);\n\n\tif(hrows.length || hcols.length)\t\n\t\tdata.table.hidden = {};\n\tif(hrows.length)\n\t\tdata.table.hidden.row = hrows;\n\tif(hcols.length)\n\t\tdata.table.hidden.column = hcols;\n}\n\nexport function load(view, data){\n\treset(view);\n\t\n\tif(!webix.isUndefined(data.table) && !webix.isUndefined(data.table.hidden)){\n\t\tconst hidden = data.table.hidden;\n\n\t\tif(hidden.row && hidden.row.length){\n\t\t\tfor(let r = 0; r < hidden.row.length; r++)\n\t\t\t\t_hideRow({id:\"hide\", group:\"row\"}, {row:hidden.row[r]}, {row:hidden.row[r]}, view, true);\n\t\t}\n\n\t\tif(hidden.column && hidden.column.length){\n\t\t\tfor(let c = 0; c < hidden.column.length; c++)\n\t\t\t\t_hideColumn({id:\"hide\", group:\"column\"}, {column:hidden.column[c]}, {column:hidden.column[c]}, view, true);\n\t\t}\n\t}\n}\n\nfunction process(action) {\n\tif (action.group == \"column\"){\n\t\tif (action.id == \"show\")\n\t\t\t_showColumn.apply(this, arguments);\n\t\telse if (action.id == \"hide\")\n\t\t\t_hideColumn.apply(this, arguments);\n\t} else if (action.group == \"row\") {\n\t\tif (action.id == \"show\")\n\t\t\t_showRow.apply(this, arguments);\n\t\telse if (action.id == \"hide\")\n\t\t\t_hideRow.apply(this, arguments);\n\t}\n}\n\nfunction _showColumn(action, start, end, view, silent, page) {\n\tpage = page || view.getActiveSheet();\n\n\tif(page == view.getActiveSheet()){\n\t\tconst grid = view.$$(\"cells\");\n\t\tconst sel = grid.getSelectArea();\n\n\t\tconst hash = view._hidden_cols_hash;\n\n\t\tif(action.neighbors){\n\t\t\tif(hash[ start.column-1 ])\n\t\t\t\twhile(hash[ start.column-1 ])\n\t\t\t\t\tstart.column--;\n\t\t\telse\n\t\t\t\twhile(hash[ end.column+1 ])\n\t\t\t\t\tend.column++;\n\t\t}\n\n\t\tgroup.set(()=>{\n\t\t\tfor (let i = start.column; i <= end.column; i++) {\n\t\t\t\tif(hash[i]){\n\t\t\t\t\tdelete hash[i];\n\t\t\t\t\tconst cell = grid.getColumnConfig(i - 1 || \"rowId\").header[0];\n\t\t\t\t\tcell.css = cell.css.replace(\"webix_ssheet_hide_column\", \"\");\n\t\t\t\t\tgrid.showColumn(i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst split = view._frozenColumns;\n\t\t\tif(split && split >= start.column){\n\t\t\t\tview.freezeColumns(0); // remove freeze (split is equal with current frozen col)\n\t\t\t\tview.freezeColumns(split); // if col was freezed on hidden column - move it\n\t\t\t}\n\n\t\t\tif (sel)\n\t\t\t\tgrid.addSelectArea(sel.start, sel.end);\n\t\t}, view);\n\t}\n\telse{\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tlet table = sheet.content.table;\n\t\t\tif(table && table.hidden && table.hidden.column)\n\t\t\t\tfor(let i = start.column; i <= end.column; i++){\n\t\t\t\t\tconst index = findIndex(table.hidden.column, c => c == i);\n\t\t\t\t\tif(index != -1)\n\t\t\t\t\t\ttable.hidden.column.splice(index, 1);\n\t\t\t\t}\n\t\t}\n\t\telse return;\n\t}\n\n\tif (!silent)\n\t\tview.callEvent(\"onColumnOperation\", [action.id, start.column, end.column, page]);\n}\n\nfunction _showRow(action, start, end, view, silent, page) {\n\tpage = page || view.getActiveSheet();\n\n\tif(page == view.getActiveSheet()){\n\t\tconst grid = view.$$(\"cells\");\n\t\tconst sel = grid.getSelectArea();\n\n\t\tconst hash = view._hidden_rows_hash;\n\n\t\tif(action.neighbors){\n\t\t\tif(hash[ start.row-1 ])\n\t\t\t\twhile(hash[ start.row-1 ])\n\t\t\t\t\tstart.row--;\n\t\t\telse\n\t\t\t\twhile(hash[ end.row+1 ])\n\t\t\t\t\tend.row++;\n\t\t}\n\n\t\tgroup.set(()=>{\n\t\t\tconst split = view._frozenRows;\n\t\t\tif(split){\n\t\t\t\t//Frozen rows ignore filtering applied to the datatable\n\t\t\t\tview.freezeRows(0);\n\t\t\t}\t\t\n\n\t\t\tfor (let i = start.row; i <= end.row; i++) {\n\t\t\t\tif(hash[i]){\n\t\t\t\t\tdelete hash[i];\n\n\t\t\t\t\tif (i - 1 === 0) {\n\t\t\t\t\t\tconst cell = grid.getColumnConfig(\"rowId\").header[0];\n\t\t\t\t\t\tcell.css = cell.css.replace(\"webix_ssheet_hide_row\", \"\");\n\t\t\t\t\t\tgrid.refreshColumns();\n\t\t\t\t\t} else\n\t\t\t\t\t\tgrid.removeCellCss(i - 1, \"rowId\", \"webix_ssheet_hide_row\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tview.filterSpreadSheet();\n\n\t\t\tif(split)\n\t\t\t\tview.freezeRows(split);\n\n\t\t\tif (sel)\n\t\t\t\tgrid.addSelectArea(sel.start, sel.end);\n\t\t}, view);\n\t}\n\telse{\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tlet table = sheet.content.table;\n\t\t\tif(table && table.hidden && table.hidden.row)\n\t\t\t\tfor(let i = start.row; i <= end.row; i++){\n\t\t\t\t\tconst index = findIndex(table.hidden.row, c => c == i);\n\t\t\t\t\tif(index != -1)\n\t\t\t\t\t\ttable.hidden.row.splice(index, 1);\n\t\t\t\t}\n\t\t}\n\t\telse return;\n\t}\n\n\tif (!silent)\n\t\tview.callEvent(\"onRowOperation\", [action.id, start.row, end.row, page]);\n}\n\nfunction _hideColumn(action, start, end, view, silent, page) {\n\tpage = page || view.getActiveSheet();\n\n\tif(page == view.getActiveSheet()){\n\t\tconst grid = view.$$(\"cells\");\n\t\tlet i = end.column;\n\t\tview.$handleSelection = null;\n\t\tgrid.unselect();\n\n\t\tif (end.column < 1 || start.column < 1){\n\t\t\tdelete view._hidden_cols_hash[start.column];\n\t\t\treturn;\n\t\t}\n\t\twhile (i >= start.column) {\n\t\t\tif(grid.getColumnIndex(i) != -1){\n\t\t\t\tview._hidden_cols_hash[i] = i;\n\n\t\t\t\tlet cell = grid.getColumnConfig(i - 1 || \"rowId\").header[0];\n\t\t\t\tcell.css = (cell.css || \"\") + \" webix_ssheet_hide_column\";\n\n\t\t\t\tgrid.hideColumn(i);\n\t\t\t}\n\t\t\ti--;\n\t\t}\n\t}\n\telse{\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tlet table = sheet.content.table;\n\t\t\tif(!table) table = sheet.content.table = {};\n\t\t\tif(!table.hidden) table.hidden = {};\n\t\t\tif(!table.hidden.rows) table.hidden.column = [];\n\t\t\t\n\t\t\tfor(let i = start.column; i <= end.column; i++)\n\t\t\t\tif(!find(table.hidden.column, c => c == i))\n\t\t\t\t\ttable.hidden.column.push(i);\n\t\t}\n\t}\n\n\tif (!silent)\n\t\tview.callEvent(\"onColumnOperation\", [action.id, start.column, end.column, page]);\n}\n\nfunction _hideRow(action, start, end, view, silent, page) {\n\tpage = page || view.getActiveSheet();\n\n\tif(page == view.getActiveSheet()){\n\t\tif (end.row < 1 || start.row < 1){\n\t\t\tdelete view._hidden_rows_hash[start.row];\n\t\t\treturn;\n\t\t}\n\n\t\tconst split = view._frozenRows;\n\t\tif(split){\n\t\t\t//Frozen rows ignore filtering applied to the datatable\n\t\t\tview.freezeRows(0);\n\t\t}\n\n\t\tconst grid = view.$$(\"cells\");\n\t\tlet i = end.row;\n\n\t\twhile (i >= start.row) {\n\t\t\tview._hidden_rows_hash[i] = i;\n\n\t\t\tif (i - 1 === 0) {\n\t\t\t\tlet cell = grid.getColumnConfig(\"rowId\").header[0];\n\t\t\t\tcell.css = (cell.css || \"\") + \" webix_ssheet_hide_row\";\n\t\t\t\tgrid.refreshColumns();\n\t\t\t}\n\t\t\telse\n\t\t\t\tgrid.addCellCss(i - 1, \"rowId\", \"webix_ssheet_hide_row\");\n\n\t\t\ti--;\n\t\t}\n\n\t\tview.filterSpreadSheet();\n\n\t\tif(split)\n\t\t\tview.freezeRows(split);\n\t}\n\telse{\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tlet table = sheet.content.table;\n\t\t\tif(!table) table = sheet.content.table = {};\n\t\t\tif(!table.hidden) table.hidden = {};\n\t\t\tif(!table.hidden.row) table.hidden.row = [];\n\t\t\t\n\t\t\tfor(let i = start.row; i <= end.row; i++)\n\t\t\t\tif(!find(table.hidden.row, r => r == i))\n\t\t\t\t\ttable.hidden.row.push(i);\n\t\t}\n\t}\n\n\tif (!silent)\n\t\tview.callEvent(\"onRowOperation\", [action.id, start.row, end.row, page]);\n}\n\nfunction _updatePosition(view, name, inc, data, start){\n\tif(data.table && data.table.hidden && data.table.hidden[name] && data.table.hidden[name].length){\n\t\treset(view, name == \"column\" ? \"cols\" : \"rows\");\n\n\t\tconst s = start[name];\n\t\tconst hidden = data.table.hidden[name];\n\n\t\tfor (let i = hidden.length - 1; i >= 0; i--) {\n\t\t\tconst hiddenIndex = hidden[i]*1;\n\t\t\tif(inc > 0 && hiddenIndex >= s)\n\t\t\t\thidden[i] = inc + hiddenIndex;\n\t\t\telse if(inc < 0 && hiddenIndex >= s) {\n\t\t\t\tif(hiddenIndex < s - inc)\n\t\t\t\t\thidden.splice(i, 1);\n\t\t\t\telse\n\t\t\t\t\thidden[i] = inc + hiddenIndex;\n\t\t\t}\n\t\t}\n\t}\n}","import {encode} from \"../helpers/column_names\";\nimport {pasteCondition} from \"./conditional_formats\";\nimport group from \"./undo_group\";\n\nexport function init(view){\n\tvar table = view._table;\n\n\tvar bs = 0;\n\ttable.attachEvent(\"onAreaDrag\", () => bs = new Date());\n\ttable.attachEvent(\"onBeforeAreaRemove\", function(){\n\t\t//[FIXME] currently we don't have enough info to know\n\t\t//is user selects new area, and removing need to be blocked\n\t\t//or is it some API which attempts to remove the area\n\t\tif (view.$handleSelection && (new Date() - bs)<500) return false;\n\t});\n\n\ttable.attachEvent(\"onBeforeAreaAdd\", (area) => {\n\t\t//[FIXME] \n\t\t//block selection of row-id column\n\t\t//temporary fix, we need to fire onBeforeBlockSelect when selection moves\n\t\t//so the common onBeforeBlockSelect handler will block rowId selection\n\t\tif (area.start.column == \"rowId\") return false;\n\n\t\t//if we have an active editor, we need to close it on block selection\n\t\t//ignore, when selecting the editor's cell\n\t\tvar editor = table.getEditor();\n\t\tif (editor && (\n\t\t\teditor.row != area.start.row || editor.column != area.start.column ||\n\t\t\teditor.row != area.start.row || editor.column != area.start.column ))\n\t\t\ttable.editStop();\n\n\t\tif (!view.$handleSelection) return true;\n\t\t\n\n\t\tlet blockStart = encode[area.start.column] + area.start.row;\n\t\tlet blockEnd = encode[area.end.column] + area.end.row;\n\n\t\tvar res = view.$handleSelection(area.start, area.end, blockStart, blockEnd);\n\n\t\tif (res !== false){\n\t\t\tview.$handleSelection = null;\n\t\t\ttable.removeSelectArea();\n\t\t}\n\n\t\treturn res;\n\t});\n\n\ttable.attachEvent(\"onBeforeBlockSelect\", (start, end, finalStep) => {\n\t\tif(!view.config.readonly && finalStep && table.$handleStart){\n\t\t\tconst oldSel = table.getSelectArea();\n\t\t\tconst oldStart = oldSel.start;\n\t\t\tconst oldEnd = oldSel.end;\n\n\t\t\tconst sr = start.row;\n\t\t\tconst er = end.row;\n\t\t\tconst sc = start.column;\n\t\t\tconst ec = end.column;\n\n\t\t\tif(oldStart.row == sr && oldEnd.row > er)\n\t\t\t\tview.clearRange({start:{row:er+1,column:sc}, end:{row:oldEnd.row,column:ec}}, {values:true});\n\t\t\telse if(oldStart.column == sc && oldEnd.column > ec){\n\t\t\t\tview.clearRange({start:{row:sr,column:ec+1}, end:{row:er,column:oldEnd.column}}, {values:true});\n\t\t\t}\n\t\t\telse{\n\t\t\t\tlet type;\n\t\t\t\tif(sr != oldStart.row || er != oldEnd.row)\n\t\t\t\t\ttype = \"row\";\n\t\t\t\telse if(sc != oldStart.column || ec != oldEnd.column)\n\t\t\t\t\ttype = \"column\";\n\n\t\t\t\tif(type){\n\t\t\t\t\tgroup.start();\n\t\t\t\t\tconst isRow = type == \"row\";\n\t\t\t\t\tfor (\n\t\t\t\t\t\tlet i = (isRow ? sc : sr);\n\t\t\t\t\t\ti <= (isRow ? ec : er);\n\t\t\t\t\t\ti++\n\t\t\t\t\t){\n\t\t\t\t\t\tconst nums = [];\n\t\t\t\t\t\tlet border = [];\n\t\t\t\t\t\tfor (let j = oldStart[type]; j <= oldEnd[type]; j++) {\n\t\t\t\t\t\t\tconst [row, col] = type == \"row\" ? [j, i] : [i, j];\n\t\t\t\t\t\t\tconst value = view.getCellValue(row, col);\n\t\t\t\t\t\t\tif(webix.rules.isNumber(value)){\n\t\t\t\t\t\t\t\tif(!border[0]){\n\t\t\t\t\t\t\t\t\tborder.firstValue = value;\n\t\t\t\t\t\t\t\t\tborder[0] = border[1] = j;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tborder[1] = j;\n\t\t\t\t\t\t\t\t\tif(webix.isUndefined(border.inc))\n\t\t\t\t\t\t\t\t\t\tborder.inc = value - border.firstValue;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tnums[j] = border;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tborder = [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst afterSel = oldStart[type] == (isRow ? sr : sc);\n\t\t\t\t\t\tconst start = afterSel ? oldStart[type] : oldEnd[type];\n\t\t\t\t\t\tconst dir = afterSel ? 1 : -1;\n\n\t\t\t\t\t\tfor(\n\t\t\t\t\t\t\tlet j = (afterSel ? oldEnd[type] + 1 : oldStart[type] - 1), index = 0, iteration = 1;\n\t\t\t\t\t\t\tafterSel ? j <= (isRow ? er : ec) : j >= (isRow ? sr : sc);\n\t\t\t\t\t\t\tafterSel ? j++ : j--, index++\n\t\t\t\t\t\t){\n\t\t\t\t\t\t\tif(index == oldEnd[type] - oldStart[type] + 1){\n\t\t\t\t\t\t\t\titeration++;\n\t\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst linkPos = start+index*dir;\n\t\t\t\t\t\t\tconst [linkRow, linkCol] = isRow ? [linkPos, i] : [i, linkPos];\n\n\t\t\t\t\t\t\tlet value = view.getCellValue(linkRow, linkCol);\n\n\t\t\t\t\t\t\tconst num = nums[linkPos];\n\t\t\t\t\t\t\tif(num)\n\t\t\t\t\t\t\t\tvalue += (num.inc || 1) * (num[1] - num[0] + 1) * iteration * dir;\n\n\t\t\t\t\t\t\telse if(typeof value == \"string\" && value[0] == \"=\" && value.length > 0){\n\t\t\t\t\t\t\t\tif(isRow)\n\t\t\t\t\t\t\t\t\tvalue = view._mData.getStore().transposeMath(value, j - start - index * dir, 0);\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tvalue = view._mData.getStore().transposeMath(value, 0, j - start - index * dir);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst [row, col] = isRow ? [j, i] : [i, j];\n\t\t\t\t\t\t\tview.setCellValue(row, col, value);\n\t\t\t\t\t\t\tview.setStyle(row, col, view.getStyle(linkRow, linkCol));\n\n\t\t\t\t\t\t\tconst condition = view.conditions.get(linkRow, linkCol);\n\t\t\t\t\t\t\tif(condition)\n\t\t\t\t\t\t\t\tpasteCondition(view, {condition}, row, col);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tview.conditions.clear(row, col);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tgroup.end();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\twebix.event(table.$view, \"mousedown\", function(e){\n\t\tif (view.$handleSelection)\n\t\t\treturn webix.html.preventEvent(e);\n\t});\n}\n","export function expandSelection(r, view){\n\tlet maxY = view.config.rowCount;\n\tlet maxX = view.config.columnCount;\n\tlet table = view._table;\n\n\tlet nr1 = r.start.row, nr2 = r.end.row, nc1 = r.start.column, nc2 = r.end.column;\n\n\tfor (let i=nr1-1; i>0; i--){\n\t\tif (getValue(i, r.start.column, table))\n\t\t\tnr1 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tfor (let i=nr2+1; i<maxY; i++){\n\t\tif (getValue(i, r.end.column, table))\n\t\t\tnr2 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tfor (let i=nc1-1; i>0; i--){\n\t\tif (getValue(r.start.row, i, table))\n\t\t\tnc1 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tfor (let i=nc2+1; i<maxX; i++){\n\t\tif (getValue(r.end.row, i, table))\n\t\t\tnc2 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tlet newrange = { start:{ row:nr1, column:nc1 } , end:{ row: nr2, column: nc2 }};\n\tif (nr1 != r.start.row || nr2 != r.end.row || nc1 != r.start.column || nc2 != r.end.column){\n\t\tview._table.addSelectArea(newrange.start, newrange.end);\n\t}\n\n\treturn newrange;\n}\n\nfunction getValue(r,c, table){\n\tvar value = table.getItem(r)[c];\n\tif(value === undefined || value === \"\"){\n\t\treturn false;\n\t} else {\n\t\treturn true;\n\t}\n}","import {expandSelection} from \"../helpers/expand_selection\";\nimport {rangeObj} from \"../helpers/column_names\";\nimport group from \"./undo_group\";\nimport {_changeCondition} from \"./conditional_formats\";\n\nexport function init(view){\n\tview.attachEvent(\"onCommand\", (cm) => {\n\t\tif (cm.id === \"sort-asc\" || cm.id === \"sort-desc\")\n\t\t\tsortRange(view, null, cm.id.replace(\"sort-\",\"\"));\n\t});\n}\n\nconst sorters = {\n\t\"int\":function(dir, key){\n\t\treturn (a,b) => {\n\t\t\tif (!b[key]) return -1;\n\t\t\tif (!a[key]) return 1;\n\n\t\t\tlet c = parseFloat(a[key]) || dir*Infinity;\n\t\t\tlet d = parseFloat(b[key]) || dir*Infinity;\n\t\t\treturn (c > d ? 1 : (c == d ? 0 : -1))*dir;\n\t\t};\n\t},\n\t\"str\":function(dir, key){\n\t\treturn (a,b) => {\n\t\t\tif (!b[key]) return -1;\n\t\t\tif (!a[key]) return 1;\n\n\t\t\tlet c = a[key].toString().toLowerCase();\n\t\t\tlet d = b[key].toString().toLowerCase();\n\t\t\treturn (c > d ? 1 : (c == d ? 0 : -1))*dir;  \n\t\t};\n\t}\n};\n\nexport function sortRange(view, range, dir){\n\trange = range || view._table.getSelectArea();\n\n\tif (range){\n\t\trange = rangeObj(range, view);\n\t\tlet fullrange = range;\n\t\tif (range.start.row === range.end.row)\n\t\t\tfullrange = expandSelection(range, view);\n\n\t\tconst key = view.getCellValue(range.start.row, range.start.column, false);\n\t\tconst type = isNaN(parseFloat(key)) ? \"str\" : \"int\";\n\n\t\tdir = (!dir || dir === \"asc\") ? 1 : -1;\n\t\tgroup.set(()=>\n\t\t\tsort(fullrange, range.start.column, type, dir, view)\n\t\t);\n\t}\n}\n\nfunction sort(range, by, type, dir, view){\n\tfor (let column = range.start.column; column <= range.end.column; column++){\n\t\t//get all selected column values\n\t\tconst values = [];\n\t\tfor (let row = range.start.row; row <= range.end.row; row++) {\n\t\t\tif(view.isRowVisible(row)){\n\t\t\t\tconst value = view.getCellValue(row, column, false);\n\t\t\t\tconst style = view.getStyle(row, column);\n\n\t\t\t\tlet math = view.getCellValue(row, column);\n\t\t\t\tmath = math && math[0] == \"=\" ? math : null;\n\n\t\t\t\tconst conditions = view.conditions.get(row,column);\n\t\t\t\tif(conditions)\n\t\t\t\t\t_changeCondition(\"remove\", row, column, conditions, null, view);\n\n\t\t\t\tvalues.push({\n\t\t\t\t\tvalue,\n\t\t\t\t\tstyle,\n\t\t\t\t\tmath,\n\t\t\t\t\trow,\n\t\t\t\t\tconditions\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t//sort them\n\t\tvalues.sort(sorters[type](dir, \"value\"));\n\n\t\t//set new values to original column\n\t\tfor (let row = range.start.row; row <= range.end.row; row++) {\n\t\t\tif(view.isRowVisible(row)){\n\t\t\t\tconst element = values.shift();\n\n\t\t\t\tview.setStyle(row, column, (element.style || null));\n\t\t\t\tif(element.conditions)\n\t\t\t\t\t_changeCondition(\"update\", row, column, null, element.conditions, view);\n\n\t\t\t\tif (!element.math) view.setCellValue(row, column, element.value);\n\t\t\t\telse {\n\t\t\t\t\tconst newMath = view._mData.getStore().transposeMath(element.math, row - element.row, 0);\n\t\t\t\t\tview.setCellValue(row, column, newMath);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tview.refresh();\n}","import {split} from \"./parser\";\n\nfunction updateSheetNames(view, formula, oldName, newName){\n\tif(formula.indexOf(\"!\") == -1)\n\t\treturn formula;\n\n\tconst stack = split(formula, view, true);\n\tfor(let i = 0; i < stack.length; i++){\n\t\tif(webix.isArray(stack[i])){\n\t\t\tconst thisSheet = stack[i][0] === oldName;\n\t\t\tlet sheet = thisSheet ? newName : stack[i][0];\n\t\t\tif(sheet.indexOf(\" \") != -1)\n\t\t\t\tsheet = `'${sheet}'`;\n\t\t\tstack[i] = `${sheet}!${stack[i][1]}`;\n\t\t}\n\t}\n\treturn stack.join(\"\");\n}\n\nfunction isFormula(val){\n\treturn typeof val == \"string\" && val[0] == \"=\";\n}\n\nexport function init(view){\n\tview.attachEvent(\"onSheetRename\", (name, newName) => {\n\t\tview._sheets.forEach(sheet => {\n\t\t\tconst activeSheet = sheet.name == view.getActiveSheet();\n\t\t\tif(activeSheet)\n\t\t\t\tsheet.content = view.serialize(); //actual data\n\n\t\t\tif(sheet.content.editors){\n\t\t\t\tsheet.content.editors.forEach(value => {\n\t\t\t\t\tconst options = value[2].options;\n\t\t\t\t\tif(options){\n\t\t\t\t\t\tif(typeof options == \"string\")\n\t\t\t\t\t\t\tvalue[2].options = updateSheetNames(view, options, name, newName);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tfor (let i = 0; i < options.length; i++){\n\t\t\t\t\t\t\t\tconst option = options[i];\n\t\t\t\t\t\t\t\tif(typeof option == \"string\"){\n\t\t\t\t\t\t\t\t\tif(isFormula(option))\n\t\t\t\t\t\t\t\t\t\toptions[i] = updateSheetNames(view, option, name, newName);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(isFormula(option.id))\n\t\t\t\t\t\t\t\t\toption.id = updateSheetNames(view, option.id, name, newName);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(sheet.content.conditions){\n\t\t\t\tsheet.content.conditions.forEach(value => {\n\t\t\t\t\tif(isFormula(value[3]))\n\t\t\t\t\t\tvalue[3] = updateSheetNames(view, value[3], name, newName);\n\t\t\t\t});\n\t\t\t\tif(activeSheet){\n\t\t\t\t\tview.conditions.clear();\n\t\t\t\t\tview.conditions.parse( sheet.content.conditions );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}","import {getSheet} from \"../sheets\";\n\nexport function init(view) {\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"gridlines-hide\")\n\t\t\thideGridlines(view, value);\n\t});\n}\n\nexport function hideGridlines(view, state = true, page){\n\tlet oldState;\n\tpage = page || view.getActiveSheet();\n\n\tif (page == view.getActiveSheet()) {\n\t\tconst grid = view.$$(\"cells\");\n\t\toldState = grid.$view.className.indexOf(\"webix_borderless\") != -1;\n\n\t\tif (state == \"toggle\")\n\t\t\tstate = !oldState;\n\n\t\tif(state != oldState){\n\t\t\tif(state)\n\t\t\t\twebix.html.addCss(grid.$view, \"webix_borderless\", true);\n\t\t\telse\n\t\t\t\twebix.html.removeCss(grid.$view, \"webix_borderless\");\n\t\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"hide-gridlines\", value: state}]);\n\t\t}\n\t}\n\telse{\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tif(!sheet.content.table)\n\t\t\t\tsheet.content.table = {gridlines: 1};\n\n\t\t\toldState = !sheet.content.table.gridlines;\n\n\t\t\tif (state === \"toggle\")\n\t\t\t\tstate = !oldState;\n\n\t\t\tsheet.content.table.gridlines = state ? 0 : 1;\n\t\t}\n\t\telse return;\n\t}\n\n\tif(state != oldState)\n\t\tview.callEvent(\"onAction\", [\"gridlines-hide\", {newValue: state, value: oldState, page}]);\n}\n\nexport function serialize(view, data){\n\tdata.table.gridlines = view.$$(\"cells\").$view.className.indexOf(\"webix_borderless\") !=-1?0:1;\n}\n\nexport function load(view, data){\n\tvar mode = false;\n\tif(!webix.isUndefined(data.table) && !webix.isUndefined(data.table.gridlines))\n\t\tmode = !data.table.gridlines;\n\thideGridlines(view, mode);\n}","import {getSheet} from \"../sheets\";\n\nexport function init(view) {\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"header-hide\"){\n\t\t\thideHeaders(view, value);\n\t\t}\n\t});\n}\n\nexport function hideHeaders(view, state, page){\n\tlet oldState;\n\tpage = page || view.getActiveSheet();\n\n\tif (page == view.getActiveSheet()) {\n\t\tconst grid = view.$$(\"cells\");\n\t\tconst oldState = !grid.config.header;\n\n\t\tif (state == \"toggle\")\n\t\t\tstate = !oldState;\n\n\t\tif(state != oldState){\n\t\t\tgrid.config.header = !state;\n\t\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"hide-headers\", value:state}]);\n\n\t\t\tconst firstVisible = grid.isColumnVisible(\"rowId\");\n\t\t\tif((firstVisible && state) || (!firstVisible && !state))\n\t\t\t\tgrid.hideColumn(\"rowId\", {}, true, !!state);\n\n\t\t\tgrid.refreshColumns();\n\t\t}\n\t}\n\telse{\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tif(!sheet.content.table)\n\t\t\t\tsheet.content.table = {headers: 1};\n\n\t\t\toldState = !sheet.content.table.headers;\n\n\t\t\tif (state === \"toggle\")\n\t\t\t\tstate = !oldState;\n\n\t\t\tsheet.content.table.headers = state ? 0 : 1;\n\t\t}\n\t\telse return;\n\t}\n\n\tif(state != oldState)\n\t\tview.callEvent(\"onAction\", [\"header-hide\", {newValue: state, value: oldState, page}]);\n}\n\nexport function serialize(view, data){\n\tdata.table.headers = view.$$(\"cells\").config.header ? 1 : 0;\n}\n\nexport function load(view, data){\n\tlet mode;\n\tif(data.table && !webix.isUndefined(data.table.headers))\n\t\tmode = !data.table.headers;\n\thideHeaders(view, mode);\n}","import group from \"./undo_group\";\nimport {getSheet} from \"../sheets\";\nimport {eachRange} from \"../helpers/column_names\";\nimport {find, findIndex} from \"../helpers/array\";\n\nexport function init(view){\n\tview.comments = {\n\t\tget: function(row, column, page){\n\t\t\treturn getComment(view, row, column, page);\n\t\t},\n\t\tadd: function(row, column, comment, page){\n\t\t\tcommentCell(view, row, column, comment, false, page);\n\t\t},\n\t\tremove: function(row, column, page){\n\t\t\tremoveComment(view, row, column, false, page);\n\t\t},\n\t\t_activeComment: {},\n\t\t_pull:{}\n\t};\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type === \"comment\")\n\t\t\t_undoComment(view, row, column, value);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name,p.inc,p.data, p.start);\n\t});\n}\n\nfunction _undoComment(view, row, column, value){\n\tif(getComment(view, row, column))\n\t\tremoveComment(view, row, column, true);\n\tif(value)\n\t\tcommentCell(view, row, column, value, true);\n}\n\nfunction reset(view){\n\tview.comments._pull = {};\n}\n\nfunction removeComment(view, row, column, silent, page){\n\tpage = page || view.getActiveSheet();\n\n\tconst old = getComment(view, row, column, page);\n\tif(old){\n\t\tif(page != view.getActiveSheet()){\n\t\t\tconst comments = getSheet(view, page).content.comments;\n\t\t\tconst index = findIndex(comments, comment => comment[0] == row && comment[1] == column);\n\t\t\tcomments.splice(index, 1);\n\t\t}\n\t\telse{\n\t\t\tdelete view.comments._pull[row][column];\n\t\t\tview.$$(\"cells\").updateItem(row, column);\n\t\t}\n\t\tif (!silent)\n\t\t\tview.callEvent(\"onAction\", [\"comment\", {row, column, newValue: null, value: old, page}]);\n\t\t\n\t}\n}\n\nexport function removeCommentsRange(view, range, page){\n\tgroup.set(function(){\n\t\teachRange(range, view, function(view, cell){\n\t\t\tif(getComment(view, cell.row, cell.column, page))\n\t\t\t\tremoveComment(view, cell.row, cell.column, false, page);\n\t\t});\n\t\tview.$$(\"cells\").refresh();\n\t});\n}\n\nfunction commentCell(view, row, column, comment, silent, page){\n\tpage = page || view.getActiveSheet();\n\tconst oldValue = getComment(view, row, column, page) || null;\n\n\tif(page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(!sheet.content.comments)\n\t\t\tsheet.content.comments = [];\n\n\t\tif(oldValue)\n\t\t\tfind(sheet.content.comments, comment => comment[0] == row && comment[1] == column)[2] = comment;\n\t\telse\n\t\t\tsheet.content.comments.push([row, column, comment]);\n\t}\n\telse{\n\t\t\n\n\t\tif(typeof comment == \"string\")\n\t\t\tcomment = comment.trim() ? comment : \"\";\n\t\tview.comments._pull[row] = view.comments._pull[row] ? view.comments._pull[row] : {};\n\t\tview.comments._pull[row][column] = comment;\n\n\t\tview.$$(\"cells\").addCellCss(row, column, \"ssheet_commented_cell\");\n\t}\n\n\tif (!silent)\n\t\tview.callEvent(\"onAction\", [\"comment\", {row, column, newValue:comment, value:oldValue, page}]);\n}\n\nexport function serialize(view,data){\n\tvar row, column,\n\t\tcomments = [];\n\tfor(row in view.comments._pull){\n\t\tfor(column in view.comments._pull[row])\n\t\t\tif(view.comments._pull[row][column])\n\t\t\t\tcomments.push([row, column, view.comments._pull[row][column]]);\n\t}\n\tdata.comments = comments;\n}\n\nexport function load(view,data){\n\tvar i,\n\t\tcomments = data.comments;\n\n\tif(comments)\n\t\tfor(i = 0; i < comments.length; i++)\n\t\t\tcommentCell(view, comments[i][0], comments[i][1], comments[i][2], true);\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet comments = data.comments,\n\t\ti = comments.length;\n\n\tif(inc){\n\t\twhile(i--){\n\t\t\tlet [row,column] = comments[i];\n\t\t\tif(row && name == \"row\" && row>= start.row || column && name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc)\t//delete comment if row was deleted\n\t\t\t\t\t\tcomments.splice(i,1);\n\t\t\t\t\telse\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tcomments[i][0] = row*1 + inc;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tcomments.splice(i, 1);\n\t\t\t\t\t} else \n\t\t\t\t\t\tcomments[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction getComment(view, row, column, page){\n\tlet comment;\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet && sheet.content.comments){\n\t\t\tcomment = find(sheet.content.comments, comment => comment[0] == row && comment[1] == column);\n\t\t\tif(comment)\n\t\t\t\tcomment = comment[2];\n\t\t}\n\t}\n\telse if(view.comments._pull[row] && view.comments._pull[row][column])\n\t\tcomment = view.comments._pull[row][column];\n\treturn comment || \"\";\n}","import {getSheet} from \"../sheets\";\n\nexport function init(view) {\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"show-formulas\"){\n\t\t\tshowFormulas(view, value);\n\t\t}\n\t});\n}\n\nexport function showFormulas(view, value, page){\n\tpage = page || view.getActiveSheet();\n\tlet old;\n\n\tif (page == view.getActiveSheet()) {\n\t\tconst grid = view.$$(\"cells\");\n\t\told = grid.config.showFormulas;\n\n\t\tif(value == \"toggle\")\n\t\t\tvalue = !old;\n\n\t\tif(value != old){\n\t\t\tgrid.config.showFormulas = value;\n\n\t\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"show-formulas\", value}]);\n\t\t\tgrid.refresh();\n\t\t}\n\t}\n\telse{\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tif(!sheet.content.table)\n\t\t\t\tsheet.content.table = {showFormulas: 1};\n\n\t\t\told = sheet.content.table.showFormulas;\n\n\t\t\tif (value == \"toggle\")\n\t\t\t\tvalue = !old;\n\n\t\t\tsheet.content.table.showFormulas = value ? 1 : 0;\n\t\t}\n\t\telse return;\n\t}\n\n\tif(value != old)\n\t\tview.callEvent(\"onAction\", [\"show-formulas\", {newValue: value, value: old, page}]);\n}\n\nexport function serialize(view, data){\n\tdata.table.showFormulas = view.$$(\"cells\").config.showFormulas ? 1 : 0;\n}\n\nexport function load(view, data){\n\tlet mode = false;\n\tif(data.table && data.table.showFormulas)\n\t\tmode = data.table.showFormulas;\n\tshowFormulas(view, mode);\n}","import * as m1  from \"./hide_gridlines\";\nimport * as m2  from \"./hide_headers\";\nimport * as m3  from \"./lock_cell\";\nimport * as m4  from \"./dropdown\";\nimport * as m5  from \"./filter\";\nimport * as m6  from \"./hide_row_col\";\nimport * as m7  from \"./comments\";\nimport * as m8  from \"./show_formulas\";\n\nexport function init(view){\n\tvar modules = [m1,m2,m3,m4,m5,m6,m7,m8];\n\tview.attachEvent(\"onDataSerialize\", function(data){\n\t\tfor (var i = 0; i < modules.length; i++){\n\t\t\tif(modules[i].serialize)\n\t\t\t\tmodules[i].serialize(view,data);\n\t\t}\n\n\t});\n\tview.attachEvent(\"onDataParse\", function(data){\n\t\tfor (var i = 0; i < modules.length; i++){\n\t\t\tif(modules[i].load)\n\t\t\t\tmodules[i].load(view,data);\n\t\t}\n\t});\n}","const types = [\".xls\",\".xlt\",\".xla\",\".xlsx\",\".xlsm\",\".xltx\",\".xltm\",\".xlam\",\".xlsb\"];\n\nexport function init(view){\n\tlet uploader;\n\tif (window.XMLHttpRequest && (new XMLHttpRequest()).upload){\n\t\tuploader = webix.ui({\n\t\t\tview:\"uploader\",\n\t\t\tapiOnly:true,\n\t\t\taccept: types.join()\n\t\t});\n\n\t\tuploader.attachEvent(\"onBeforeFileAdd\",webix.bind(function(upload){\n\t\t\tif(types.indexOf(\".\"+upload.type.toLowerCase())>-1){\n\t\t\t\tview.reset();\n\n\t\t\t\tif(!upload.file.options)\n\t\t\t\t\tupload.file.options = {};\n\t\t\t\twebix.extend(upload.file.options, {cellDates: false, sheetStubs: view.config.sheetStubs});\n\n\t\t\t\tview.parse(upload.file, \"excel\");\n\t\t\t}\n\t\t\treturn false;\n\t\t},this));\n\n\t\tview._destroy_with_me.push(uploader);\n\t}\n\n\tview.attachEvent(\"onCommand\", (obj) => {\n\t\tif (obj.id === \"excel-import\")\n\t\t\tstartImport(view, uploader);\n\t});\n}\n\nfunction startImport(view, uploader){\n\tif (!uploader)\n\t\tview.alert(webix.i18n.spreadsheet.labels[\"import-not-support\"]);\n\telse\n\t\twebix.delay(() => uploader.fileDialog());\n}","import { style_names, getStyle } from \"../operations/styles\";\nimport { getType } from \"../operations/types\";\nimport { defaultStyles} from \"../toolbar/defaults\";\nimport { getFormatSource } from \"../operations/formats\";\nimport { getDimension } from \"../helpers/array\";\nimport { getConditionCss } from \"../operations/conditional_formats\";\nimport { getRenderedValue } from \"../table\";\nimport {getSheet, isVisible} from \"../sheets\";\nimport {toRange} from \"../helpers/column_names\";\n\nexport function init(view){\n\tconst table = view._table;\n\tview.$exportView = function(options){\n\t\tconst pdf = options.export_mode == \"pdf\";\n\t\tconst excel = options.export_mode == \"excel\";\n\t\tconst defaultOptions = {\n\t\t\tstubCells: true,\n\t\t\theader: false,\n\t\t\tfooter:false,\n\t\t\theights:true,\n\t\t\trawValues: !pdf,\n\t\t\tfilterHTML:true,\n\t\t\tspans: true,\n\t\t\tstyles:true,\n\t\t\tmath: !pdf,\n\t\t\thidden: excel,\n\t\t\txCorrection: table.config.header || options.hidden ? 1 : 0,\n\t\t\tignore:{rowId:true},\n\t\t\tconditions:true\n\t\t};\n\n\t\twebix.extend(options, defaultOptions);\n\n\t\tif(excel || pdf)\n\t\t\treturn _exportView(view, options);\n\t\telse\n\t\t\treturn table;\n\t};\n\n\ttable.$getExportValue = function(row, column, options){\n\t\tlet value = view.getCellValue(row, column, options.math);\n\t\tconst mode = options.export_mode;\n\t\tconst math = options.math && value[0] == \"=\" && value.length > 1;\n\n\t\tif((mode == \"pdf\" || mode == \"csv\") && !math && !options.rawValues)\n\t\t\tvalue = getRenderedValue(view, row, column);\n\t\telse if(mode == \"excel\" && math){\n\t\t\tif(/^=(image|sparkline)\\(/i.test(value))\n\t\t\t\tvalue = \"\";\n\t\t\telse{\n\t\t\t\tconst id = view._mPage.cellID(row - 1, column - 1);\n\n\t\t\t\tlet arrayRowEnd, arrayColEnd, ref;\n\n\t\t\t\tfor(let r = row+1; r <= view.config.rowCount; r++){\n\t\t\t\t\tconst cell = view._mPage.getCell(r - 1, column - 1);\n\t\t\t\t\tif(cell && cell.source === id)\n\t\t\t\t\t\tarrayRowEnd = r;\n\t\t\t\t\telse break;\n\t\t\t\t}\n\n\t\t\t\tfor(let c = column+1; c <= view.config.columnCount; c++){\n\t\t\t\t\tconst cell = view._mPage.getCell(row - 1, c - 1);\n\t\t\t\t\tif(cell && cell.source === id)\n\t\t\t\t\t\tarrayColEnd = c;\n\t\t\t\t\telse break;\n\t\t\t\t}\n\n\t\t\t\tif(arrayColEnd || arrayRowEnd)\n\t\t\t\t\tref = toRange(row, column, arrayRowEnd || row, arrayColEnd || column);\n\n\t\t\t\tconst cellValue = view.getCellValue(row, column, false);\n\t\t\t\tif(/^=(checkbox|radio)\\(/i.test(value))\n\t\t\t\t\tvalue = cellValue ? \"=TRUE()\" : \"=FALSE()\";\n\n\t\t\t\tvalue = {\n\t\t\t\t\tvalue: /^=hyperlink\\(/i.test(value) ? value.split(\"\\\"\")[3] : cellValue,\n\t\t\t\t\tformula: value,\n\t\t\t\t\tref\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t};\n}\n\nfunction _exportView(view, options){\n\tconst excel = options.export_mode == \"excel\";\n\n\tif(options.sheets === true) \n\t\toptions.sheets = view._sheets.map(function(s){ return s.name;});\n\telse if(!options.sheets || !options.sheets.length)\n\t\toptions.sheets = [view._activeSheet];\n\telse if(typeof options.sheets == \"string\")\n\t\toptions.sheets = [options.sheets];\n\n\tif(!excel)\n\t\toptions.sheets = options.sheets.filter(sheet => isVisible(view, sheet));\n\telse if(view._sheets.length != options.sheets.length){\n\t\tfor(let i = 0; i < view._sheets.length; i++){\n\t\t\t//add veryHidden sheets in any case\n\t\t\tconst sheet = view._sheets[i];\n\t\t\tif(sheet.state == \"veryHidden\" && options.sheets.indexOf(sheet.name) == -1)\n\t\t\t\toptions.sheets.push(sheet.name);\n\t\t}\n\t}\n\n\toptions.dataOnly = true;\n\n\tlet data = [];\n\tlet active = view._activeSheet;\n\n\tfor(let i = 0; i<options.sheets.length; i++){\n\t\tconst sheet = options.sheets[i];\n\t\tconst id = sheet.id || sheet;\n\n\t\tview.showSheet(id);\n\n\t\tconst oldZoom = view._zoom;\n\t\tview.ignoreUndo(() => view.zoom(1));\n\n\t\tif(options.hidden)\n\t\t\toptions.xCorrection = 1;\n\n\t\tconst sheetOptions = sheet.options ? webix.extend(sheet.options, options) : webix.copy(options);\n\t\tif(id != active)\n\t\t\tsheetOptions._hidden = true;\n\t\tif(!sheetOptions.name)\n\t\t\tsheetOptions.name = id;\n\n\t\tconst pdfTable = !excel && sheetOptions.display != \"image\";\n\n\t\tconst serialized = view.serialize();\n\t\tconst [rows, cols] = getDimension(serialized.data, serialized.spans, 0, 0);\n\n\t\tif(!excel){\n\t\t\tif(webix.isUndefined(sheetOptions.textBefore))\n\t\t\t\tsheetOptions.textBefore = sheetOptions.name;\n\t\t\tif(pdfTable){\n\t\t\t\tsheetOptions.ignore = sheetOptions.ignore || {};\n\t\t\t\tfor(let i = cols+1; i <= view.config.columnCount; i++){\n\t\t\t\t\tsheetOptions.ignore[i] = true;\n\t\t\t\t}\n\n\t\t\t\tconst filter = sheetOptions.filter || (()=>true);\n\t\t\t\tsheetOptions.filter = obj =>{\n\t\t\t\t\treturn obj.id <= rows && filter.apply(this, arguments);\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tconst sheetData = webix[excel ? \"toExcel\" : \"toPDF\"](view._table, sheetOptions);\n\n\t\tif(excel)\n\t\t\tsheetData[0].state = getSheet(view, id).state || \"visible\";\n\n\t\tif(pdfTable && sheetData[0].scheme.length == 0)\n\t\t\tcontinue;\n\n\t\tif((excel || pdfTable) && sheetOptions.styles){\n\t\t\tconst styles = sheetData[0].styles = _getStyles(view, sheetOptions, excel, rows, cols);\n\n\t\t\tif(pdfTable)\n\t\t\t\t_updatePdfData(styles, sheetData, sheetOptions, view, serialized);\n\t\t}\n\n\t\tdata = data.concat(sheetData);\n\n\t\tif(excel){\n\t\t\tdata[i].ranges = [];\n\n\t\t\tview.ranges.serialize(id).forEach(range => {\n\t\t\t\tconst ref = range[1].split(\"!\");\n\t\t\t\tdata[i].ranges.push({\n\t\t\t\t\tSheet: range[2] ? null : i,\n\t\t\t\t\tName: range[0],\n\t\t\t\t\tRef: ref[0]+\"!\"+ref[1].replace(/[0-9]+|[A-Z]+/gi, (match)=>`$${match}`)\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\telse{\n\t\t\tif(options.autowidth)\n\t\t\t\tgetAutowidth(sheetOptions, options);\n\t\t}\n\n\t\tview.ignoreUndo(() => view.zoom(oldZoom));\n\t}\n\n\tview.showSheet(active);\n\tdelete options.dataOnly;\n\treturn data;\n}\n\nfunction _updatePdfData(styles, sheetData, sheetOptions, view, serialized){\n\tconst header = sheetOptions.header ? 1 : 0;\n\n\tif (sheetOptions.spans) {\n\t\tconst spans = serialized.spans.sort((a,b) => a[1]<b[1]?1:(a[1]>b[1]?-1:0));\n\t\tfor (let i = 0; i < spans.length; i++) {\n\t\t\tif (spans[i][2] > 1) {\n\t\t\t\tlet row = spans[i][0] - 1 + header, // zero-based row position\n\t\t\t\t\tcol = spans[i][1] - 1, // zero-based col position\n\t\t\t\t\tcols = spans[i][2];\n\t\t\t\tif (styles[row] && styles[row][col]) {\n\t\t\t\t\tstyles[row][col].colspan = cols;\n\t\t\t\t\t// if colspan, then remove merged cells (else PDFJS will shift columns)\n\t\t\t\t\tconst rowData = sheetData[0].exportData[row - header];\n\t\t\t\t\tif (rowData){\n\t\t\t\t\t\t// remove merged cell values\n\t\t\t\t\t\trowData.splice(col + 1, cols - 1);\n\t\t\t\t\t}\n\t\t\t\t\tlet style = Object.values(styles[row]);\n\t\t\t\t\tstyle.splice(col + 1, cols - 1); // remove merged cell styles\n\t\t\t\t\tstyles[row] = style;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tconst data = sheetData[0].exportData;\n\tfor(let r = 0; r < data.length; r++){\n\t\tfor (let c = 0; c < data[r].length; c++) {\n\t\t\tlet height = view.$$(\"cells\").config.rowHeight;\n\n\t\t\tif(sheetOptions.heights && serialized.sizes.length){\n\t\t\t\tfor(let s = 0; s < serialized.sizes.length; s++){\n\t\t\t\t\tconst rowSize = serialized.sizes[s][0];\n\t\t\t\t\tif(rowSize && rowSize == r+1){\n\t\t\t\t\t\theight = serialized.sizes[s][2];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst cellStyle = styles[r + header][c];\n\t\t\tconst align = cellStyle.vertAlign;\n\t\t\tconst pad = height*0.75 - cellStyle.fontSize; // available px for padding in top & bottom\n\t\t\tcellStyle.paddingTop = (align == \"top\" ? 0 : (align == \"bottom\" ? pad : pad / 2));\n\t\t\tcellStyle.paddingBottom = (align == \"bottom\" ? 0 : (align == \"top\" ? pad : pad / 2));\n\t\t}\n\t}\n}\n\nfunction getAutowidth(view, options){\n\tconst prop = options.orientation && options.orientation == \"landscape\" ? \"height\" : \"width\";\n\tlet width;\n\n\tif(view.$width)\n\t\twidth = view.$width;\n\telse //'view' can be local settings and we need to compare them with common ones\n\t\twidth = view[prop];\n\n\toptions[prop] = Math.max(options[prop] || 0, width || 0);\n}\n\nfunction _safeColor(str){\n\tstr = str.substring(1);\n\tif(str.length === 3) str = str+str;\n\treturn str;\n}\n\nfunction _getDefaults(options){\n\tlet d = defaultStyles;\n\tif(options.export_mode == \"excel\")\n\t\treturn {\n\t\t\tfont:{\n\t\t\t\tsz:d[\"font-size\"]*0.75,\n\t\t\t\tname:d[\"font-family\"].replace(/'|,.*$/g, \"\"),\n\t\t\t\t//we do not export default color, but it is the right place to do it\n\t\t\t},\n\t\t\talignment:{\n\t\t\t\thorizontal:d[\"text-align\"],\n\t\t\t\tvertical:d[\"vertical-align\"]==\"middle\"?\"center\":d[\"vertical-align\"],\n\t\t\t\twrapText:d[\"white-space\"]!=\"nowrap\"\n\t\t\t}\n\t\t};\n\telse\n\t\treturn {\n\t\t\tfontSize: d[\"font-size\"]*0.75,\n\t\t\t//we do not export default color, but it is the right place to do it\n\t\t\ttextAlign: d[\"text-align\"],\n\t\t\twhiteSpace: (d[\"white-space\"]!=\"nowrap\")\n\t\t};\n}\n\nfunction _getStyles(view, options, excel, rows, cols){\n\tview.compactStyles();\n\n\tlet result = [];\n\tconst cached = {};\n\tconst cachedConditions = {};\n\tconst defaults = _getDefaults(options);\n\n\tif(excel && options.docHeader) result  = result.concat([{0:_getDocStyle(options.docHeader.css, defaults)}, {}]);\n\tif(options.header) result.push({});\n\n\tconst delta = result.length;\n\n\tconst grid = view.$$(\"cells\");\n\n\tlet rIndex = delta;\n\tgrid.eachRow(row =>{\n\t\tif(row > rows)\n\t\t\treturn;\n\n\t\tlet cIndex = 0;\n\t\tgrid.eachColumn(col => {\n\t\t\tif(cIndex > cols)\n\t\t\t\treturn;\n\n\t\t\tif(cIndex >= options.xCorrection){\n\t\t\t\tconst css = getStyle(view, {row, column:col}, null, true);\n\t\t\t\tconst index = cIndex - options.xCorrection;\n\n\t\t\t\tresult[rIndex] = result[rIndex] || {};\n\n\t\t\t\tlet styles;\n\t\t\t\tif(css){\n\t\t\t\t\tif(cached[css.id])\n\t\t\t\t\t\tstyles = webix.copy(cached[css.id]);\n\t\t\t\t\telse{\n\t\t\t\t\t\tstyles = _getCellStyle(css.text, excel, options);\n\n\t\t\t\t\t\tfor(let name in defaults){\n\t\t\t\t\t\t\tif(excel)\n\t\t\t\t\t\t\t\twebix.extend(styles[name], defaults[name]);\n\t\t\t\t\t\t\telse if (!styles[name])\n\t\t\t\t\t\t\t\tstyles[name] = defaults[name];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcached[css.id] = webix.copy(styles);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tstyles = webix.copy(defaults);\n\n\t\t\t\tif(options.conditions){\n\t\t\t\t\t//not real excel condition, save only bg and color (sheetJS doesn't support)\n\t\t\t\t\tconst condition = _getCellConditions(view, row, col, cachedConditions);\n\t\t\t\t\tif(condition)\n\t\t\t\t\t\t_updateStyleCondition(styles, condition, excel);\n\t\t\t\t}\n\n\t\t\t\tresult[rIndex][index] = styles;\n\n\t\t\t\tlet type;\n\t\t\t\tif(options.math){\n\t\t\t\t\tconst math = view.getCellValue(row, col);\n\t\t\t\t\tif(typeof math == \"string\" && math[0] == \"=\" && math.length > 1){\n\t\t\t\t\t\tconst value = view.getCellValue(row, col, false);\n\t\t\t\t\t\tif(isNaN(value))\n\t\t\t\t\t\t\ttype = \"string\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tresult[rIndex][index].type = type || getType(view, row, col);\n\t\t\t}\n\t\t\tcIndex++;\n\t\t}, options.hidden);\n\t\trIndex++;\n\t}, options.hidden);\n\n\tif(excel && options.docFooter) result  = result.concat([{},{0:_getDocStyle(options.docFooter.css, defaults)}]);\n\n\treturn result;\n}\n\nfunction _getCellStyle(styles, excel, options){\n\tlet str = styles.split(\";\");\n\tlet stl = {};\n\tif(excel)\n\t\tstl = { font:{}, alignment:{}, border:{}};\n\n\tfor(let s = 0; s<str.length; s++){\n\t\tif(str[s]){\n\t\t\tif(excel)\n\t\t\t\t_getExcelCellStyle(stl, str, s);\n\t\t\telse\n\t\t\t\t_getPdfCellStyle(stl, str, s, options.table);\n\t\t}\n\t}\n\n\treturn stl;\n}\n\nfunction _getCellConditions(view, r, c, cached){\n\tconst rendered = getRenderedValue(view, r, c);\n\tconst css = getConditionCss(view, r, c, rendered);\n\tif(css){\n\t\tif(cached[css])\n\t\t\treturn cached[css];\n\t\tconst el = webix.html.create(\"div\", {\"class\":css});\n\t\tdocument.body.appendChild(el);\n\n\t\tconst computed = window.getComputedStyle(el);\n\t\tconst bg = computed.backgroundColor;\n\t\tconst color = computed.color;\n\n\t\tdocument.body.removeChild(el);\n\n\t\tcached[css] = [bg, color];\n\t\treturn cached[css];\n\t}\n}\n\nfunction _updateStyleCondition(stl, condition, excel){\n\tlet [bg, color] = condition.map(val => webix.color.rgbToHex(val));\n\tif(excel){\n\t\tstl.fill = {fgColor:{rgb:bg}};\n\t\tstl.font.color = {rgb:color};\n\t}\n\telse{\n\t\tstl.backgroundColor = bg;\n\t\tstl.color = color;\n\t}\n}\n\nfunction _getExcelCellStyle(stl, str, s){\n\tswitch (style_names[s]){\n\t\tcase \"color\":\n\t\t\tstl.font.color = {rgb:_safeColor(str[s])};\n\t\t\tbreak;\n\t\tcase \"background\":{\n\t\t\tconst fill = _safeColor(str[s]);\n\t\t\tif(fill && fill.toLowerCase() !== \"ffffff\")\n\t\t\t\tstl.fill = { fgColor:{ rgb:fill}};\n\t\t\tbreak;\n\t\t}\t\n\t\tcase \"text-align\":\n\t\t\tstl.alignment.horizontal = str[s];\n\t\t\tbreak;\n\t\tcase \"font-family\":\n\t\t\tstl.font.name = str[s].replace(/'|,.*$/g, \"\"); // cut off fallback font\n\t\t\tbreak;\n\t\tcase \"font-size\":\n\t\t\tstl.font.sz = str[s].replace(\"px\", \"\")*0.75; //px to pt conversion\n\t\t\tbreak;\n\t\tcase \"font-style\":\n\t\t\tstl.font.italic = str[s] == \"italic\";\n\t\t\tbreak;\n\t\tcase \"underline\":\n\t\t\tstl.font.underline = str[s] == \"underline\";\n\t\t\tbreak;\n\t\tcase \"strike\":\n\t\t\tstl.font.strike = str[s] == \"strike\";\n\t\t\tbreak;\n\t\tcase \"font-weight\":\n\t\t\tstl.font.bold = str[s] == \"bold\";\n\t\t\tbreak;\n\t\tcase \"vertical-align\":\n\t\t\tstl.alignment.vertical = str[s] == \"middle\"?\"center\":str[s];\n\t\t\tbreak;\n\t\tcase \"wrap\":\n\t\t\tstl.alignment.wrapText = str[s] == \"wrap\";\n\t\t\tbreak;\n\t\tcase \"borders\":\n\t\t\tbreak;\n\t\tcase \"format\":\n\t\t\tstl.format = getFormatSource(str[s], true) || \"\";\n\t\t\tbreak;\n\t\tcase \"border-right\":\n\t\tcase \"border-bottom\":\n\t\tcase \"border-left\":\n\t\tcase \"border-top\":\n\t\t\tstl.border[ style_names[s].split(\"-\")[1] ] = getBorderStyles(str[s], true);\n\t\t\tbreak;\n\t\tcase \"indent\":\n\t\t\tstl.alignment.indent = str[s];\n\t\t\tbreak;\n\t}\n}\n\nfunction _getPdfCellStyle(stl, str, s, table){\n\tswitch (style_names[s]) {\n\t\tcase \"color\":\n\t\t\tstl.color = _safeColor(str[s]);\n\t\t\tbreak;\n\t\tcase \"background\":\n\t\t\tstl.backgroundColor = _safeColor(str[s]);\n\t\t\tbreak;\n\t\tcase \"text-align\":\n\t\t\tstl.textAlign = str[s];\n\t\t\tbreak;\n\t\tcase \"font-family\":\n\t\t\tbreak;\n\t\tcase \"font-size\":\n\t\t\tstl.fontSize = str[s].replace(\"px\", \"\")*0.75;\n\t\t\tbreak;\n\t\tcase \"font-style\":\n\t\t\tstl.italic = str[s] == \"italic\";\n\t\t\tbreak;\n\t\tcase \"underline\":\n\t\t\tstl.underline = str[s] == \"underline\";\n\t\t\tbreak;\n\t\tcase \"strike\":\n\t\t\tstl.strikethrough = str[s] == \"strike\";\n\t\t\tbreak;\n\t\tcase \"font-weight\":\n\t\t\tstl.bold = str[s] == \"bold\";\n\t\t\tbreak;\n\t\tcase \"vertical-align\":\n\t\t\tstl.vertAlign = str[s]; // not supported in PDFJS, so simulate with lineHeight and paddingTop\n\t\t\tbreak;\n\t\tcase \"wrap\":\n\t\t\tstl.whiteSpace = (str[s] != \"nowrap\");\n\t\t\tbreak;\n\t\tcase \"borders\":\n\t\t\tbreak;\n\t\tcase \"format\":\n\t\t\tbreak;\n\t\tcase \"border-right\":\n\t\tcase \"border-bottom\":\n\t\tcase \"border-left\":\n\t\tcase \"border-top\":{\n\t\t\tconst pos = style_names[s].split(\"-\")[1];\n\t\t\tstl[`border${pos[0].toUpperCase() + pos.substring(1)}Color`] = getBorderStyles(str[s]);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"indent\":\n\t\t\tif(str[s]){\n\t\t\t\tconst name = `padding${ str[2] == \"right\" ? \"Right\" : \"Left\" }`;\n\t\t\t\tconst padding = table && table[name] ? table[name] : 10; // 10 - default padding value\n\t\t\t\tstl[name] = padding + str[s] * 6;\n\t\t\t}\n\t\t\tbreak;\n\t}\n}\n\nfunction getBorderStyles(val, excel){\n\tconst [color, type] = val.split(\",\");\n\n\tif(excel)\n\t\treturn { color:{ rgb:_safeColor(color)}, style:type};\n\telse\n\t\treturn _safeColor(color);\n}\n\nfunction _getDocStyle(css){\n\tif(!css) return {};\n\tconst str = [];\n\tfor(let i =0; i<style_names.length; i++)\n\t\tstr.push(css[style_names[i]]||\"\");\n\treturn _getCellStyle(str.join(\";\"), true);\n}","import { style_names } from \"../operations/styles\";\nimport { fontFamily} from \"../toolbar/buttons\";\nimport { defaultStyles} from \"../toolbar/defaults\";\nimport { formatCache, formatsCount } from \"../operations/formats\";\nimport { find } from \"../helpers/array\";\n\nexport function init(view){\n\tview._parseExcel = function(obj, driver){\n\t\tconst options = obj.options || {};\n\t\toptions.math = view.config.math;\n\n\t\tconst full = { sheets:[]};\n\t\tconst fmt = {count: formatsCount, cache:{}};\n\t\tfor(let i  = 0; i< obj.names.length; i++){\n\t\t\toptions.name = obj.names[i];\n\t\t\tfull.sheets.push({\n\t\t\t\tname:options.name,\n\t\t\t\tstate:obj.states[i],\n\t\t\t\tcontent:_excel_to_data(driver.getSheet(obj, options), obj.ranges, i, fmt)\n\t\t\t});\n\t\t}\n\t\treturn full;\n\t};\n\tview._parseCsv = function(obj, driver){\n\t\tobj = driver.getRecords(obj);\n\n\t\tconst dataObj = webix.copy(obj);\n\t\tconst data = [];\n\n\t\tfor(let i = 0; i < dataObj.length; i++){\n\t\t\tlet item = dataObj[i].split(driver.cell);\n\t\t\tfor(let c  = 0; c<item.length; c++){\n\t\t\t\tconst row = i+1, column = c+1;\n\t\t\t\tdata.push([row, column, item[c]]);\n\t\t\t}\n\t\t}\n\t\treturn { data };\n\t};\n}\n\nfunction _excel_to_data(obj, ranges, index, fmt){\n\tconst dataObj = webix.copy(obj.data);\n\tconst data =  [];\n\n\tfor (let i = 0; i < dataObj.length; i++){\n\t\tfor(let c = 0; c<dataObj[0].length; c++){\n\t\t\tconst row = i+1, column = c+1;\n\t\t\tlet val = dataObj[i][c];\n\t\t\tif(obj.links.length){\n\t\t\t\tlet link = find(obj.links, link => link[0] == i && link[1] == c);\n\t\t\t\tif(link){\n\t\t\t\t\tlink = typeof link[2] == \"string\" && link[2][0] == \"=\" ? link[2].slice(1) : `\"${link[2]}\"`;\n\t\t\t\t\tval = typeof val == \"string\" && val[0] == \"=\" ? val.slice(1) : `\"${val}\"`;\n\t\t\t\t\tval = `=HYPERLINK(${link}, ${val})`;\n\t\t\t\t}\n\t\t\t}\n\t\t\tdata.push([row, column, val]);\n\t\t}\n\t}\n\tobj.data = data;\n\n\t//merged cells\n\tif(obj.spans){\n\t\tfor(let i = 0; i<obj.spans.length; i++){\n\t\t\tobj.spans[i][0]++;\n\t\t\tobj.spans[i][1]++;\n\t\t}\n\t}\n\n\t//named ranges\n\tif(ranges){\n\t\tfor(let r = 0; r < ranges.length; r++){\n\t\t\tconst sheetIndex = ranges[r].Sheet;\n\t\t\tconst book = webix.isUndefined(sheetIndex);\n\t\t\tif(book || sheetIndex === index){\n\t\t\t\tobj.ranges = obj.ranges || [];\n\t\t\t\tobj.ranges.push([ranges[r].Name.toUpperCase(), ranges[r].Ref.substring(ranges[r].Ref.indexOf(\"!\")+1).replace(/\\$/g, \"\"), book]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//cell styles\n\tif(obj.styles)\n\t\t_getStyles(obj, fmt);\n\n\tif(obj.types)\n\t\t_getTypes(obj);\n\n\tif(obj.hidden){\n\t\t_getHidden(obj);\n\t}\n\n\t//column width and row height\n\tif(obj.sizes){\n\t\tfor(let i = 0; i<obj.sizes.length; i++){\n\t\t\tif(obj.sizes[i][0] == \"column\")\n\t\t\t\tobj.sizes[i] = [0, obj.sizes[i][1]+1, obj.sizes[i][2]];\n\t\t\telse\n\t\t\t\tobj.sizes[i] = [obj.sizes[i][1]+1, 0, obj.sizes[i][2]];\n\t\t}\n\t}\n\n\treturn obj; \n}\n\n//ARGB conversion\nfunction _safeColor(str){\n\tstr = str || \"000000\";\n\tif(str.length === 8) str = str.substring(2);\n\treturn \"#\"+str;\n}\n\n//only fonts that we support can be imported\nfunction _safeFont(str){\n\tlet safe = defaultStyles[\"font-family\"];\n\tfor(let i = 0; i<fontFamily.length; i++){\n\t\tif(fontFamily[i].value == str) { safe = fontFamily[i].id; break; }\n\t}\n\treturn safe;\n}\n\nfunction _getTypes(obj){\n\tobj.types.forEach(type => {\n\t\tfor(let i = 0; i < obj.data.length; i++){\n\t\t\tif(obj.data[i][0] === type[0]+1 && obj.data[i][1] === type[1]+1){\n\t\t\t\tobj.data[i][4] = type[2];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction _getHidden(obj){\n\tconst hidden = {\n\t\trow:[],\n\t\tcolumn:[]\n\t};\n\n\tfor(let i = 0; i < obj.hidden.length; i++){\n\t\tconst item = obj.hidden[i];\n\t\tif(item[0] == \"column\")\n\t\t\thidden.column.push(item[1]+1);\n\t\telse\n\t\t\thidden.row.push(item[1]+1);\n\t}\n\n\tobj.table = {hidden};\n}\n\nfunction _getBorderStyles(pos, stl){\n\tpos = pos.replace(\"border-\", \"\");\n\tif(stl.border && stl.border[pos]){\n\t\tconst border = stl.border[pos];\n\t\tif(border.color){\n\t\t\tconst color = _safeColor(border.color.rgb) || \"\";\n\t\t\tconst type = border.style || \"\";\n\t\t\treturn `${color},${type}`;\n\t\t}\n\t}\n\treturn \"\";\n}\n\nfunction _getStyles(obj, fmt){\n\tlet stylescount = 1;\n\tconst styleshash = {}, styles = [], formats = [];\n\n\tfor(let i = 0; i<obj.styles.length; i++){\n\t\tlet str = [], stl = obj.styles[i][2], css;\n\n\t\tfor(let s  = 0; s<style_names.length; s++){\n\t\t\tswitch (style_names[s]){\n\t\t\t\tcase \"color\": \n\t\t\t\t\tstr[s] = stl.font && stl.font.color ? (_safeColor(stl.font.color.rgb) || \"\") : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"background\":\n\t\t\t\t\tstr[s] = stl.fill && stl.fill.fgColor ? (_safeColor(stl.fill.fgColor.rgb) || \"\") : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"text-align\":\n\t\t\t\t\tstr[s] = (stl.alignment ? stl.alignment.horizontal : \"\") || defaultStyles[\"text-align\"];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-family\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.name ? _safeFont(stl.font.name) : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-size\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.sz ? ((stl.font.sz/0.75)+\"px\" || \"\") : \"\"; //pt to px conversion\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-style\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.italic ? \"italic\" : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"underline\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.underline ? \"underline\" : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"strike\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.strike ? \"strike\" : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-weight\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.bold ? \"bold\" : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"vertical-align\":{\n\t\t\t\t\tconst va = stl.alignment ? (stl.alignment.vertical || \"\") : \"\";\n\t\t\t\t\tstr[s] = (va == \"center\" ? \"middle\" : va) || defaultStyles[\"vertical-align\"];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"wrap\":\n\t\t\t\t\tstr[s] = stl.alignment && stl.alignment.wrapText ? \"wrap\" : \"nowrap\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"borders\":\n\t\t\t\t\tstr[s] = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"format\":{\n\t\t\t\t\tlet format = stl.numFmt;\n\t\t\t\t\tlet name = \"\";\n\t\t\t\t\tif(format && format != \"General\"){\n\t\t\t\t\t\tformat = format.replaceAll(\"\\\\\", \"\");\n\t\t\t\t\t\tif(formatCache[format])\n\t\t\t\t\t\t\tname = formatCache[format];\n\t\t\t\t\t\telse if(fmt.cache[format])\n\t\t\t\t\t\t\tname = fmt.cache[format];\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tname = fmt.cache[format] = \"fmt\"+(fmt.count++);\n\n\t\t\t\t\t\tif(!find(formats, arr => arr[0] == name))\n\t\t\t\t\t\t\tformats.push([name, format]);\n\t\t\t\t\t}\n\t\t\t\t\tstr[s] = name;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"border-right\":\n\t\t\t\tcase \"border-bottom\":\n\t\t\t\tcase \"border-left\":\n\t\t\t\tcase \"border-top\":\n\t\t\t\t\tstr[s] = _getBorderStyles(style_names[s], stl);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"indent\":\n\t\t\t\t\tstr[s] = stl.alignment && stl.alignment.indent ? stl.alignment.indent : \"\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tstr = str.join(\";\");\n\t\tcss = styleshash[str] || \"wss\"+stylescount;\n\n\t\tfor(let d = 0; d<obj.data.length; d++){\n\t\t\tif(obj.data[d][0] === obj.styles[i][0]+1 && obj.data[d][1] === obj.styles[i][1]+1){\n\t\t\t\tobj.data[d][3] = css;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(!styleshash[str]){\n\t\t\tstyles.push([css, str]);\n\t\t\tstyleshash[str] = css;\n\t\t\tstylescount++;\n\t\t}\n\t}\n\n\tobj.formats = formats;\n\tobj.styles = styles;\n}","import group from \"../operations/undo_group\";\n\nexport function init(view){\n\tview.attachEvent(\"onCommand\", (action) => {\n\t\tswitch (action.id) {\n\t\t\tcase \"clear-value\":\n\t\t\t\tview.clearRange(null,{values: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-style\":\n\t\t\t\tview.clearRange(null,{styles: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-conditional-formats\":\n\t\t\t\tview.clearRange(null,{conditions: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-dropdown-editors\":\n\t\t\t\tview.clearRange(null,{editors: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-filters\":\n\t\t\t\tview.clearRange(null,{filters: true});\n\t\t\t\tbreak;\t\n\t\t\tcase \"clear-all\":\n\t\t\t\tgroup.set(function(){\n\t\t\t\t\tview.clearRange(null,null);\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-comments\":\n\t\t\t\tview.clearRange(null,{comments: true});\n\t\t\t\tbreak;\n\t\t}\n\t});\n}","import group from \"../operations/undo_group\";\nimport {adjustRow, adjustColumn} from \"../operations/column_operations\";\nimport {find} from \"../helpers/array\";\n\n/* row operations */\n\nexport function insertRow(row){\n\tcallCommand(this, \"add\", \"row\", row);\n}\n\nexport function deleteRow(row){\n\tcallCommand(this, \"del\", \"row\", row);\n}\n\nexport function setRowHeight(row, height, page){\n\tsetSize(this, \"row\", row, height, page);\n}\n\n/* col operations */\n\nexport function insertColumn(column){\n\tcallCommand(this, \"add\", \"column\", column);\n}\n\nexport function deleteColumn(column){\n\tcallCommand(this, \"del\", \"column\", column);\n}\n\nexport function setColumnWidth(column, width, page){\n\tsetSize(this, \"column\", column, width, page);\n}\n\n/* helpers */\n\nfunction getCells(view, id, group, page){\n\tif(!id){\n\t\tif(page && page != view.getActiveSheet())\n\t\t\treturn;\n\t\tconst area = view.$$(\"cells\").getSelectArea();\n\t\tif(area)\n\t\t\tid = [area.start[group], area.end[group]];\n\t}\n\telse if(!webix.isArray(id)){\n\t\tid =  [id,id];\n\t}\n\treturn id;\n}\n\nfunction callCommand(view, name, group, id){\n\tlet start = {}, end = {};\n\tid = getCells(view, id, group);\n\tif(!id)\n\t\treturn;\n\tstart[group] = id[0];\n\tend[group] = id[1];\n\tview.callEvent(\"onCommand\", [{id:name,  group:group}, start, end]);\n}\n\nfunction setSize(view, type, id, size, page){\n\tid = getCells(view, id, type, page);\n\tif(!id)\n\t\treturn;\n\n\tlet sheet;\n\tif(page && page != view.getActiveSheet()){\n\t\tsheet = find(view._sheets, obj => obj.name == page);\n\t\tif(!sheet) return;\n\t}\n\n\tconst grid = view.$$(\"cells\");\n\n\tgroup.set(()=>{\n\t\tfor (let i = id[0]; i <= id[1]; i++){\n\t\t\tif(size == \"auto\"){\n\t\t\t\tif(sheet){\n\t\t\t\t\t//TODO: adjust not active sheet\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\t(type == \"row\" ? adjustRow : adjustColumn)(i, view);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif(sheet){\n\t\t\t\t\tif(!sheet.content.sizes)\n\t\t\t\t\t\tsheet.content.sizes = [];\n\t\t\t\t\tconst oldSize = find(sheet.content.sizes, arr => type == \"row\" ? arr[0] == i : arr[1] == i);\n\t\t\t\t\tif(oldSize){\n\t\t\t\t\t\tif(size == oldSize[2])\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\toldSize[2] = size;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(type == \"row\"){\n\t\t\t\t\t\t\tif(size == grid.config.columWidth)\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(size == grid.config.rowHeight)\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\tconst newSize = [0, 0, size];\n\t\t\t\t\t\tnewSize[type == \"row\" ? 0 : 1] = i;\n\t\t\t\t\t\tsheet.content.sizes.push(newSize);\n\t\t\t\t\t}\n\t\t\t\t\tview.callEvent(\"onAction\", [type+\"-resize\", { [type]: i, value: size, page } ]);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tsize *= view._zoom;\n\t\t\t\t\tgrid[type == \"row\" ? \"setRowHeight\" : \"setColumnWidth\"](i, size);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}","import * as lock from \"../operations/lock_cell\";\n\nexport function lockCell(row, column, state, page){\n\tlock.lockCell(this, row, column, state, false, page);\n}\n\nexport function isCellLocked(row, column, page){\n\treturn lock.isCellLocked(this, row, column, page);\n}","import group from \"../operations/undo_group\";\nimport {getSheet} from \"../sheets\";\n\nexport function freezeColumns(column, page){\n\tlet oldValue;\n\n\tgroup.set(()=>{\n\t\tif(page && page != this.getActiveSheet()){\n\t\t\tconst sheet = getSheet(this, page);\n\t\t\tif(sheet){\n\t\t\t\tif(!sheet.content.table)\n\t\t\t\t\tsheet.content.table = {};\n\t\t\t\toldValue = sheet.content.table.frozenColumns;\n\t\t\t\tsheet.content.table.frozenColumns = column;\n\t\t\t\tif(sheet.content.spans)\n\t\t\t\t\tcheckSpans(this, \"column\", column, sheet.content.spans);\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tif(!page)\n\t\t\t\tpage = this.getActiveSheet();\n\t\t\tconst grid = this.$$(\"cells\");\n\n\t\t\tif( webix.isUndefined(column) ){\n\t\t\t\tconst sel = grid.getSelectArea();\n\t\t\t\tcolumn = sel ? sel.end.column : 0;\n\t\t\t}\n\n\t\t\tconst base = grid.config.columns[0].id == \"rowId\" ? 1 : 0;\n\t\t\tlet index = base;\n\t\t\tlet removeFreeze = false;\n\t\t\tif (column && column != this._frozenColumns){\n\t\t\t\tfor (let i = column; i > 0; i--) {\n\t\t\t\t\tindex = grid.getColumnIndex(i)+1;\n\t\t\t\t\tif(index)\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (!index) index = base;\n\t\t\t}\n\t\t\telse removeFreeze = true;\n\n\t\t\tcheckSpans(this, \"column\", column);\n\t\t\tgrid.unselect();\n\t\t\tgrid.define(\"leftSplit\", index);\n\t\t\tgrid.refreshColumns();\n\t\t\toldValue = this._frozenColumns;\n\t\t\tthis._frozenColumns = (removeFreeze || !column) ? 0 : column;\n\t\t}\n\t\tthis.callEvent(\"onAction\", [ \"freeze-column\", { value: (oldValue || 0), newValue: column, page}]);\n\t});\n}\n\nexport function freezeRows(row, page){\n\tlet oldValue;\n\n\tgroup.set(()=>{\n\t\tif(page && page != this.getActiveSheet()){\n\t\t\tconst sheet = getSheet(this, page);\n\t\t\tif(sheet){\n\t\t\t\tif(!sheet.content.table)\n\t\t\t\t\tsheet.content.table = {};\n\t\t\t\toldValue = sheet.content.table.frozenRows;\n\t\t\t\tsheet.content.table.frozenRows = row;\n\t\t\t\tif(sheet.content.spans)\n\t\t\t\t\tcheckSpans(this, \"row\", row, sheet.content.spans);\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tif(!page)\n\t\t\t\tpage = this.getActiveSheet();\n\t\t\tconst grid = this.$$(\"cells\");\n\n\t\t\tif( webix.isUndefined(row) ){\n\t\t\t\tconst sel = grid.getSelectArea();\n\t\t\t\trow = sel ? sel.end.row : 0;\n\t\t\t}\n\n\t\t\tlet index = 0;\n\t\t\tlet removeFreeze = false;\n\t\t\tif (row && row != this._frozenRows){\n\t\t\t\tfor (let i = row; i > 0; i--) {\n\t\t\t\t\tindex = grid.getIndexById(i)+1;\n\t\t\t\t\tif(index)\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse removeFreeze = true;\n\n\t\t\tcheckSpans(this, \"row\", row);\n\t\t\tgrid.unselect();\n\t\t\tgrid.define(\"topSplit\", index);\n\t\t\tgrid.refreshColumns();\n\t\t\toldValue = this._frozenRows;\n\t\t\tthis._frozenRows = (removeFreeze || !row) ? 0 : row;\n\t\t}\n\t\tthis.callEvent(\"onAction\", [ \"freeze-row\", { value: (oldValue || 0), newValue: row, page}]);\n\t});\n}\n\nfunction checkSpans(view, type, num, spans){\n\tif(spans){\n\t\tfor (let i = spans.length - 1; i >= 0; i--) {\n\t\t\tconst span = spans[i];\n\n\t\t\tconst index1 = type == \"row\" ? 0 : 1;\n\t\t\tconst index2 = type == \"row\" ? 3 : 2;\n\n\t\t\tif(span[index1] <= num && span[index1] + span[index2] - 1 > num)\n\t\t\t\tspan[index2] = num - span[index1] + 1;\n\t\t\tif(span[0] - span[3] == 0 && span[1] - span[2] == 0)\n\t\t\t\tspans.splice(i, 1);\n\t\t}\n\t}\n\telse{\n\t\tconst grid = view.$$(\"cells\");\n\t\tconst spans = grid.getSpan();\n\t\tlet changed;\n\n\t\tfor(let row in spans){\n\t\t\tif(type == \"row\" && row > num)\n\t\t\t\tcontinue;\n\n\t\t\tfor (let col in spans[row]){\n\t\t\t\tif(type == \"column\" && col > num)\n\t\t\t\t\tcontinue;\n\n\t\t\t\tconst span = spans[row][col];\n\t\t\t\tconst spanSize = type == \"row\" ? (row*1) + span[1] - 1 : (col*1) + span[0] - 1;\n\n\t\t\t\tif(spanSize > num){\n\t\t\t\t\tchanged = true;\n\t\t\t\t\tchangeSpan(\n\t\t\t\t\t\tview,\n\t\t\t\t\t\t[row, col],\n\t\t\t\t\t\ttype == \"row\" ? span[0] : span[0] - (spanSize - num),\n\t\t\t\t\t\ttype == \"row\" ? span[1] - (spanSize - num) : span[1]\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(changed)\n\t\t\tview.refresh();\n\t}\n}\n\nfunction changeSpan(view, span, x, y){\n\tview.splitCell(span[0], span[1], null, true);\n\tview.combineCells(\n\t\t{\n\t\t\tcell:{\n\t\t\t\trow:span[0],\n\t\t\t\tcolumn:span[1]\n\t\t\t},\n\t\t\tx,\n\t\t\ty,\n\t\t},\n\t\tnull,\n\t\ttrue\n\t);\n}","import * as gridlines from \"../operations/hide_gridlines\";\n\nexport function hideGridlines(state, page){\n\tgridlines.hideGridlines(this, state, page);\n}","import * as headers from \"../operations/hide_headers\";\n\nexport function hideHeaders(state, page){\n\theaders.hideHeaders(this, state, page);\n}","import * as hrows from \"../operations/hide_row_col\";\n\nexport function hideColumn(column, state, page){\n\throws.setState(this, column, state, \"column\", page);\n}\nexport function isColumnVisible(column, page){\n\treturn hrows.isColumnVisible(this, column, page);\n}\nexport function hideRow(row, state, page){\n\throws.setState(this, row, state, \"row\", page);\n}\nexport function isRowVisible(row, page){\n\treturn hrows.isRowVisible(this, row, page);\n}","import {image, chart} from \"../mathematics/writer\";\nimport {addMath, setRadioState} from \"../mathematics/methods\";\n\nexport function addImage(row, column, url, page){\n\tthis.setCellValue(row, column, image(url), page);\n\tif(!page || page == this.getActiveSheet())\n\t\tthis.refresh();\n}\n\nexport function addSparkline(row, column, config, page){\n\tlet value = chart(config);\n\tthis.setCellValue(row, column, value, page);\n\tif(!page || page == this.getActiveSheet())\n\t\tthis.refresh();\n}\n\n// getSheetData is deprecated, use ss.getCellValue(row, col, math, page), ss.getRangeValue(range, page) instead\nexport function getSheetData(name){\n\tif(this._mData.getPage(name))\n\t\treturn {\n\t\t\tgetValue: (r, c, math)=> this.getCellValue(r, c, math, name),\n\t\t\tgetRangeValue: (range)=> this.getRangeValue(range, name)\n\t\t};\n}\n\nexport function registerMathMethod(name, handler){\n\taddMath(this, name, handler, true);\n}\n\nexport function recalculate(){\n\tthis._mData.getStore().recalculate();\n\tthis.callEvent(\"onMathRefresh\",[]);\n\tthis.refresh();\n}\n\nexport function setPlaceholder(name, value){\n\tif(typeof name == \"object\"){\n\t\tvalue = name;\n\t\tname = \"*\";\n\t}\n\n\tthis._mData.getStore().setPlaceholder(name, value);\n\n\tthis.refresh();\n\tthis.callEvent(\"onMathRefresh\",[]);\n}\n\nexport function addCheckbox(range, page){\n\tif(!range)\n\t\trange = this.$$(\"cells\").getSelectArea();\n\tif(range){\n\t\tconst start = range.start;\n\t\tconst end = range.end;\n\t\tthis.groupUndo(()=>{\n\t\t\tfor(let r = start.row; r <= end.row; r++)\n\t\t\t\tfor(let c = start.column; c <= end.column; c++)\n\t\t\t\t\tthis.setCellValue(r, c, \"=checkbox()\", page);\n\t\t});\n\t\tthis.refresh();\n\t}\n}\n\nexport function markCheckbox(row, column, state, page){\n\tif(/^=(checkbox)\\(/i.test(this.getCellValue(row, column, true, page))){\n\t\tthis.setCellValue(row, column, `=checkbox(${state === false ? 0 : 1})`);\n\t\tthis.refresh();\n\t}\n}\n\nexport function addRadio(range, page){\n\tif(!range)\n\t\trange = this.$$(\"cells\").getSelectArea();\n\tif(range){\n\t\tconst start = range.start;\n\t\tconst end = range.end;\n\t\tthis.groupUndo(()=>{\n\t\t\tfor(let r = start.row; r <= end.row; r++)\n\t\t\t\tfor(let c = start.column; c <= end.column; c++)\n\t\t\t\t\tthis.setCellValue(r, c, `=radio(${r - start.row + 1}, ${c - start.column + 1}, ${end.row - start.row + 1}, ${end.column - start.column + 1})`, page);\n\t\t});\n\t\tthis.refresh();\n\t}\n}\n\nexport function markRadio(row, column, state, page){\n\tsetRadioState(this, row, column, state, page);\n}","import * as sheets from \"../sheets\";\nimport * as spn from \"../operations/spans\";\nimport * as und from \"../operations/undo\";\nimport group from \"../operations/undo_group\";\nimport * as stl from \"../operations/styles\";\nimport * as srt from \"../operations/sorting\";\nimport {removeCommentsRange} from \"../operations/comments\";\nimport {clearConditionalFormats} from \"../operations/conditional_formats\";\nimport {clearEditors} from \"../operations/dropdown\";\nimport {clearFilters} from \"../operations/filter\";\nimport {showCells} from \"../operations/show_cells\";\n\n//spans\nexport function combineCells(range, page, silent){\n\tconst isActivePage = !page || page == this.getActiveSheet();\n\tif(!range){\n\t\tif(!isActivePage)\n\t\t\treturn;\n\t\tconst sel = this.getSelectedId(true);\n\t\tif (sel.length>1){\n\t\t\trange = spn.getRange(sel);\n\t\t}\n\t}\n\n\tgroup.set(()=> {\n\t\tif (range)\n\t\t\tspn.addSpan(this, range.cell, range.x, range.y, null, page);\n\t});\n\n\tif(!silent && isActivePage)\n\t\tthis.refresh();\n}\n\nexport function splitCell(row, column, page, silent){\n\tconst isActivePage = !page || page == this.getActiveSheet();\n\n\tif (row && column) {\n\t\tspn.removeSpan(this, {row, column}, page);\n\t}\n\telse if(isActivePage){\n\t\tgroup.set(function(){\n\t\t\tthis.eachSelectedCell(function(cell){\n\t\t\t\tspn.removeSpan(this, cell);\n\t\t\t});\n\t\t},this);\n\t}\n\n\tif(!silent && isActivePage)\n\t\tthis.refresh();\n}\n\n//styles\nexport function addStyle(prop, origin, page){\n\treturn stl.addStyle(this, prop, origin, page);\n}\n\nexport function getStyle(row, column, page){\n\treturn stl.getStyle(this, {row:row, column:column}, page);\n}\n\nexport function setStyle(row, column, style, page){\n\treturn stl.setStyle(this, {row: row, column: column}, style, page);\n}\n\nexport function setRangeStyle(rangeStr, style, page){\n\tgroup.set(function() {\n\t\tstl.setRangeStyle(this, rangeStr, style, page);\n\t},this);\n}\n\nexport function clearRange(rangeStr, type, page) {\n\tif (!rangeStr){\n\t\tif(!page || page == this.getActiveSheet())\n\t\t\trangeStr = this._table.getSelectArea();\n\t\tif (!rangeStr) return;\n\t}\n\n\tif (!type) type = {styles: true, values: true, editors:true, filters:true, conditions:true, comments:true };\n\t\n\tif (type.styles)\n\t\tstl.clearRangeStyle(this, rangeStr, page);\n\n\tif (type.conditions)\n\t\tclearConditionalFormats(this, rangeStr, page);\n\t\n\tif (type.values)\n\t\tthis.setRangeValue(rangeStr, null, page);\n\n\tif (type.editors)\n\t\tclearEditors(this, rangeStr, page);\n\n\tif(type.filters)\n\t\tclearFilters(this, rangeStr, page);\n\n\tif (type.comments)\n\t\tremoveCommentsRange(this, rangeStr, page);\n\n\tthis.refresh();\n}\n\nexport function compactStyles(){\n\treturn stl.compactStyles(this);\n}\n\n//serialize\nexport function serialize(config){\n\tconst obj = {};\n\tthis.callEvent(\"onDataSerialize\",[obj, config]);\n\n\tif(config){\n\t\tif(config.compactStyles)\n\t\t\tobj.styles = stl.removeUnusedStyles(obj);\n\t\tif(config.sheets)\n\t\t\treturn sheets.serialize(this, obj, config);\n\t}\n\n\treturn obj;\n}\n\n//sheets\nexport function showSheet(name){\n\tsheets.show(this,name);\n}\nexport function setSheetState(name,state){\n\tsheets.setState(this,name,state);\n}\nexport function getSheetState(name){\n\treturn sheets.getSheet(this,name).state || \"visible\";\n}\nexport function getActiveSheet(){\n\treturn this._activeSheet;\n}\nexport function addSheet(content, name, show){\n\treturn sheets.add(this, content, name, show);\n}\nexport function clearSheet(){\n\tthis.reset();\n}\nexport function renameSheet(name,newName){\n\tsheets.rename(this,name,newName);\n}\nexport function editSheet(name){\n\tsheets.edit(this,name);\n}\nexport function removeSheet(name){\n\tsheets.remove(this,name);\n}\n\n//undo\nexport function undo(){\n\tund.undo(this);\n}\nexport function redo(){\n\tund.redo(this);\n}\n\n//sort\nexport function sortRange(range, dir){\n\tsrt.sortRange(this, range, dir);\n}\n\n//cells\nexport function showCell(ref, silent){\n\tshowCells(this, ref, silent);\n}","import {toRange,rangeObj,range as getRange} from \"../helpers/column_names\";\nimport * as tbl from \"../table\";\nimport group from \"../operations/undo_group\";\nimport {newSheet, prepareCell, getSheet} from \"../sheets\";\nimport {getType, loadCell} from \"../operations/types\";\nimport {getExcelDateFromJs} from \"../mathematics/methods\";\nimport {checkFormat, getFormatFromData} from \"../operations/formats\";\nimport * as arr from \"../helpers/array\";\nimport {fillEditor} from \"../editor\";\nimport {isInvalid} from \"../operations/validation\";\n\nexport function refresh(all){\n\tif (all)\n\t\tthis._table.refreshColumns();\n\telse\n\t\tthis._table.refresh();\n}\nexport function eachSelectedCell(cb){\n\tvar cells = this.getSelectedId(true);\n\tfor (var i=0; i<cells.length; i++)\n\t\tcb.call(this, cells[i]);\n}\nexport function getSelectedRange(sheet){\n\tvar area = this._table.getSelectArea();\n\tif (area){\n\t\tif (sheet)\n\t\t\tsheet = this.getActiveSheet();\n\t\treturn toRange(area.start.row,area.start.column,area.end.row,area.end.column,sheet);\n\t}\n\treturn \"\";\n}\nexport function getSelectedId(all){\n\tvar area = this._table.getSelectArea();\n\tif(!all)\n\t\treturn area && area.start.row ? area.start : null;\n\n\tvar selection = [];\n\tif(area){\n\t\tvar c0 = area.start;\n\t\tvar c1 = area.end;\n\n\t\tfor(var i = c0.row; i<= c1.row; i++){\n\t\t\tfor(var j = c0.column; j <= c1.column; j++){\n\t\t\t\tselection.push({row: i,column:j});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn selection;\n\t//return this._table.getSelectedId(all)\n}\nexport function getCellValue(row, column, math, page){\n\tpage = page ? this._mData.getPage(page) : this._mPage;\n\n\tif(!page)\n\t\treturn;\n\n\tconst value = page.getValue(row-1, column-1, math !== false);\n\n\treturn correctVal(value);\n}\nexport function setCellValue(row, column, value, page){\n\tif(!page)\n\t\tpage = this.getActiveSheet();\n\n\tconst muonPage = this._mData.getPage(page);\n\tif(!muonPage)\n\t\treturn;\n\n\tvalue = correctVal(value);\n\tconst old = this.getCellValue(row, column, true, page);\n\tconst oldType = getType(this, row, column, page);\n\tlet oldStyle, oldEditor;\n\n\tif(!this._type_change && page != this.getActiveSheet()){\n\t\toldStyle = this.getStyle(row, column, page);\n\t\toldEditor = this.getCellEditor(row, column, page);\n\t}\n\n\tlet sameValue;\n\tif(oldType == \"date\"){\n\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\tconst dateValue = isNaN(value) ? getExcelDateFromJs(parser(value)) : value;\n\t\tsameValue = old == dateValue;\n\t}\n\telse if(oldType != \"string\" && value !== \"\" && !isNaN(value) && old == value && value !== 0){\n\t\tsameValue = true;\n\t\tvalue = value*1;\n\t}\n\n\tif (!sameValue && old !== value){\n\t\tgroup.set(()=>{\n\t\t\tif (this.callEvent(\"onBeforeValueChange\",[row, column, value, old, page])){\n\t\t\t\tif(page != this.getActiveSheet()){\n\t\t\t\t\tconst sheet = getSheet(this, page).content;\n\t\t\t\t\tlet cell = arr.find(sheet.data, cell => cell[0] == row && cell[1] == column);\n\n\t\t\t\t\tif(!cell){\n\t\t\t\t\t\tcell = [row, column];\n\t\t\t\t\t\tsheet.data.push(cell);\n\t\t\t\t\t}\n\t\t\t\t\tcell[2] = value;\n\n\t\t\t\t\tthis._page_value_set = true;\n\t\t\t\t\tcell[4] = null;\n\t\t\t\t\tconst item = loadCell(this, sheet, cell);\n\t\t\t\t\tdelete this._page_value_set;\n\n\t\t\t\t\tconst muonItem = muonPage.getCell(row-1, column-1, true);\n\t\t\t\t\tmuonItem.$format = checkFormat({ fmt: getFormatFromData(sheet, cell) }, \"string\") ? 1 : 0;\n\t\t\t\t\tmuonPage.setValue(row-1, column-1, item.value);\n\n\t\t\t\t\tcell[2] = item.value;\n\t\t\t\t\tcell[4] = muonItem.type = item.type;\n\n\t\t\t\t\tthis._type_change = true;\n\t\t\t\t\t//prepareCell can change style (1/1/2001 --loadCell--> 36892 + date type --prepareCell--> date format)\n\t\t\t\t\tprepareCell(cell, sheet, true);\n\t\t\t\t\tmuonItem.style = cell[3];\n\t\t\t\t\tdelete this._type_change;\n\n\t\t\t\t\tthis.callEvent(\"onCellChange\", [row, column, value, page]);\n\n\t\t\t\t\tif(!this._validation_restore && !this._type_change && isInvalid(this, row, column, null, page)){\n\t\t\t\t\t\tconst validation = this.validation.get(row, column, page);\n\t\t\t\t\t\tconst oldData = { value: old, style: oldStyle, editor: oldEditor };\n\n\t\t\t\t\t\tshowValidationError(this, validation)\n\t\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\t\tif(validation.errorHandle == \"stop\")\n\t\t\t\t\t\t\t\t\trestoreValue(this, row, column, oldData, page);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.fail(()=>{\n\t\t\t\t\t\t\t\trestoreValue(this, row, column, oldData, page);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconst sel = this.getSelectedId();\n\t\t\t\t\tfillEditor(this, sel, true);\n\n\t\t\t\t\tthis._mPage.setValue(row-1, column-1, value);\n\n\t\t\t\t\tif(!this._type_change){\n\t\t\t\t\t\tthis._type_change = true;\n\t\t\t\t\t\t//onCellChange can change item (via types module)\n\t\t\t\t\t\tthis.callEvent(\"onCellChange\", [row, column, value, page]);\n\t\t\t\t\t\tdelete this._type_change;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst updatedType = getType(this, row, column);\n\n\t\t\t\t\t//recalculate if we refer to a cell, where type is string and value is something like 005 or 5e5\n\t\t\t\t\tif(oldType != updatedType && updatedType == \"string\" && value[0] == \"=\" && value.length > 1)\n\t\t\t\t\t\tthis._mPage.setValue(row-1, column-1, value);\n\n\t\t\t\t\tfillEditor(this, sel);\n\n\t\t\t\t\tif(/^=hyperlink\\(/i.test(value)){\n\t\t\t\t\t\tconst baseStyle = this.getStyle(row, column);\n\t\t\t\t\t\tconst urlStyle = this.addStyle({ color: \"#0000ff\", underline: \"underline\" }, baseStyle);\n\t\t\t\t\t\tthis.setStyle(row, column, urlStyle);\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!this._validation_restore && !this._type_change && isInvalid(this, row, column, tbl.getRenderedValue(this, row, column))){\n\t\t\t\t\t\tconst validation = this.validation.get(row, column);\n\t\t\t\t\t\tshowValidationError(this, validation)\n\t\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\t\tif(validation.errorHandle == \"stop\"){\n\t\t\t\t\t\t\t\t\trestoreValue(this);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.fail(()=>{\n\t\t\t\t\t\t\t\trestoreValue(this);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(!this._type_change)\n\t\t\t\t\tthis.saveCell(row, column, page);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction restoreValue(view, row, column, data, page){\n\tview._validation_restore = true;\n\tif(page){\n\t\tview.setStyle(row, column, data.style, page);\n\t\tview.setCellEditor(row, column, data.editor, page);\n\t\tview.setCellValue(row, column, data.value, page);\n\t}\n\telse{\n\t\tview.undo();\n\t\tview._ssUndoHistory.splice(view._ssUndoCursor+1);\n\t}\n\tdelete view._validation_restore;\n}\n\nfunction showValidationError(view, validation){\n\tconst errorHandle = validation.errorHandle || \"information\";\n\n\tconst type = errorHandle == \"stop\" ? \"alert-error\" : (errorHandle == \"warning\" ? \"confirm-\" : \"alert-\") + errorHandle;\n\tconst locale = webix.i18n.spreadsheet.labels;\n\treturn view[errorHandle == \"warning\" ? \"confirm\" : \"alert\"]({\n\t\ttype,\n\t\tok: locale[\"validation-error-\" + (errorHandle == \"stop\" ? \"restore\" : \"save\")],\n\t\tcancel: locale[\"validation-error-restore\"],\n\t\ttitle: validation.errorTitle || locale[\"validation-error-title-text\"],\n\t\ttext: validation.errorMessage || locale[\"validation-error-message-text\"]\n\t});\n}\n\nfunction correctVal(val){\n\tif(typeof val === \"boolean\")\n\t\tval *= 1;\n\treturn val || val === 0 ? val : \"\";\n}\n\nexport function setRangeValue(range, value, page){\n\tgroup.set(function(){\n\t\tconst pos = rangeObj(range, this);\n\t\tlet i = 0;\n\t\tfor (let row = pos.start.row; row <= pos.end.row; row++) {\n\t\t\tfor (let column = pos.start.column; column <=  pos.end.column; column++, i++) {\n\t\t\t\tthis.setCellValue(row, column, webix.isArray(value) ? value[i] : value, page);\n\t\t\t}\n\t\t}\n\t},this);\n}\n\nexport function getRangeValue(range, page){\n\tif(!page)\n\t\tpage = this.getActiveSheet();\n\n\tconst pos = getRange(range, this, page);\n\tconst muonPage = this._mData.getPage(pos[4]);\n\n\tif (!pos || !muonPage) return [];\n\n\treturn muonPage.getRange(pos[0]-1, pos[1]-1, pos[2]-1, pos[3]-1).map(correctVal);\n}\n\nexport function getRow(id, page){\n\tlet row, colCount;\n\n\tconst isActiveSheet = !page || page == this.getActiveSheet();\n\tif(isActiveSheet){\n\t\trow = webix.copy(this._table.getItem(id));\n\t\tcolCount = this.config.columnCount;\n\t}\n\telse{\n\t\tconst sheet = getSheet(this, page);\n\t\tif(sheet){\n\t\t\tlet height;\n\t\t\tif(sheet.content.sizes)\n\t\t\t\theight = arr.find(sheet.content.sizes, size => size[0] == id);\n\t\t\theight = height ? height[2] : this.$$(\"cells\").config.rowHeight;\n\t\t\trow = {id, $height: height};\n\t\t\tcolCount = arr.getDimension(sheet.content.data, sheet.content.spans, 1, 1)[1];\n\t\t}\n\t\telse return;\n\t}\n\n\tfor(let i = 1; i <= colCount; i++){\n\t\tconst cell = (isActiveSheet ? this._mPage : this._mData.getPage(page)).getCell(id-1, i-1);\n\n\t\tif(cell){\n\t\t\trow[i] = cell.value;\n\n\t\t\t[[\"style\", \"$cellCss\"], [\"type\", \"$cellType\"], [\"format\", \"$cellFormat\"]].forEach(param => {\n\t\t\t\tconst val = cell[param[0]];\n\t\t\t\tif(val){\n\t\t\t\t\tif(!row[param[1]])\n\t\t\t\t\t\trow[param[1]] = {};\n\t\t\t\t\trow[param[1]][i] = val;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst math =  this.getCellValue(id, i, true, page);\n\t\t\tif(math && math[0] == \"=\")\n\t\t\t\trow[\"$\"+i] = math;\n\t\t}\n\t}\n\n\treturn row;\n}\nexport function getColumn(id, page){\n\tif(!page || page == this.getActiveSheet())\n\t\treturn this._table.getColumnConfig(id);\n\n\tconst sheet = getSheet(this, page);\n\tif(sheet){\n\t\tlet width;\n\t\tif(sheet.content.sizes)\n\t\t\twidth = arr.find(sheet.content.sizes, size => size[1] == id);\n\t\twidth = width ? width[2] : this.$$(\"cells\").config.columnWidth;\n\t\treturn {id, width};\n\t}\n}\nexport function reset(mode){\n\tvar obj = { data:[] };\n\tif (mode && mode.sheets){\n\t\tobj = newSheet(obj);\n\t}\n\t\n\tthis.parse(obj);\n}\n\nexport function _resetTable(){\n\ttbl.reset(this);\n}\n","import {save} from \"../operations/save\";\n\nexport function saveCell(row, column, page){\n\tconst cell = (page ? this._mData.getPage(page) : this._mPage).getCell(row-1, column-1);\n\n\tsave(this, \"data\", {\n\t\trow,\n\t\tcolumn,\n\t\tvalue: this.getCellValue(row, column, null, page),\n\t\tpage: page || this.getActiveSheet(),\n\t\tstyle: (cell ? cell.style : \"\") || \"\"\n\t});\n}","import {getSheet} from \"../sheets\";\nimport {find, findIndex} from \"../helpers/array\";\n\nexport function setCellEditor(row, column, editor, page) {\n\tpage = page || this.getActiveSheet();\n\tlet value;\n\n\tif(page == this.getActiveSheet()){\n\t\tconst line = this._table._ssEditors[row] = this._table._ssEditors[row] || {};\n\t\tvalue = line[column] || null;\n\t\tline[column] = editor;\n\n\t\tif (editor && editor.editor){\n\t\t\tthis._table.addCellCss(row,column, \"ss_editor\");\n\t\t} else {\n\t\t\tdelete this._table._ssEditors[row][column];\n\t\t\tthis._table.removeCellCss(row,column, \"ss_editor\");\n\t\t}\n\t}\n\telse{\n\t\tconst sheet = getSheet(this, page);\n\t\tif(!sheet) return;\n\n\t\tif(!sheet.content.editors)\n\t\t\tsheet.content.editors = [];\n\n\t\tconst index = findIndex(sheet.content.editors, editor => editor[0] == row && editor[1] == column);\n\t\tif(index != -1){\n\t\t\tvalue = sheet.content.editors[index][2];\n\t\t\tsheet.content.editors.splice(index, 1);\n\t\t}\n\t\telse if(!editor) return;\n\n\t\tif(editor)\n\t\t\tsheet.content.editors.push([row, column, editor]);\n\t}\n\n\tthis.callEvent(\"onAction\", [\"dropdown\", { row, column, value, newValue:editor, page }]);\n}\n\nexport function getCellEditor(row, column, page){\n\tif(page && page != this.getActiveSheet()){\n\t\tconst sheet = getSheet(this, page);\n\t\tif(sheet && sheet.content.editors){\n\t\t\tconst editor = find(sheet.content.editors, editor => editor[0] == row && editor[1] == column);\n\t\t\treturn editor ? editor[2] : null;\n\t\t}\n\t}\n\telse {\n\t\tlet line = this._table._ssEditors[row] || {};\n\t\treturn line[column] || null;\n\t}\n}","import * as flt from \"../operations/filter\";\nimport {find, findIndex} from \"../helpers/array\";\nimport {getSheet} from \"../sheets\";\n\nexport function setCellFilter(row, column, filter, page){\n\tpage = page || this.getActiveSheet();\n\n\tlet sheet;\n\tif(page != this.getActiveSheet()){\n\t\tsheet = getSheet(this, page);\n\t\tif(!sheet) return;\n\t}\n\n\tfilter = prepareFilter(this, row, column, filter, sheet);\n\tlet value;\n\n\tif(sheet){\n\t\tif(!sheet.content.filters)\n\t\t\tsheet.content.filters = [];\n\n\t\tconst index = findIndex(sheet.content.filters, arr => arr[0] == row && arr[1] == column);\n\t\tif(index != -1){\n\t\t\tvalue = sheet.content.filters[index][2];\n\t\t\tsheet.content.filters.splice(index, 1);\n\t\t}\n\t\telse if(!filter) return;\n\n\t\tif(filter)\n\t\t\tsheet.content.filters.push([row, column, filter]);\n\t}\n\telse{\n\t\tconst line = this._table._ssFilters[row] = this._table._ssFilters[row] || {};\n\t\tvalue = line[column] || null;\n\t\tline[column] = filter;\n\n\t\tif (filter && typeof filter == \"object\"){\n\t\t\tthis._table.addCellCss(row, column, \"ss_filter\");\n\t\t\tif (filter.value && flt.isValueActive(filter.value))\n\t\t\t\tthis._table.addCellCss(row, column, \"ss_filter_active\");\n\n\t\t\twebix.extend(filter, {row, column}, true);\n\n\t\t\tif (!filter.handler && filter.value && filter.value.condition){\n\t\t\t\tconst mode = filter.mode || flt.getFilterMode(this, row, column);\n\t\t\t\tfilter.handler = flt.getFilterFunction(mode, filter.value);\n\t\t\t}\n\t\t} else {\n\t\t\tdelete this._table._ssFilters[row][column];\n\t\t\tthis._table.removeCellCss(row,column, \"ss_filter\");\n\t\t\tthis._table.removeCellCss(row,column, \"ss_filter_active\");\n\t\t}\n\t}\n\tthis.callEvent(\"onAction\", [\"filter\", { row, column, value, newValue:filter, page }]);\n}\n\nfunction prepareFilter(view, row, column, filter, sheet){\n\tif(filter){\n\t\tif (webix.isArray(filter) || typeof filter == \"string\")\n\t\t\tfilter = {options: filter};\n\t\tfilter.options = flt.calibrateRange(view, row, column, filter.options, null, sheet);\n\t}\n\treturn filter;\n}\n\nexport function getCellFilter(row, column, page){\n\tif(page && page != this.getActiveSheet()){\n\t\tconst sheet = getSheet(this, page);\n\t\tif(sheet && sheet.content.filters)\n\t\t\treturn find(sheet.content.filters, arr => arr[0] == row && arr[1] == column) || null;\n\t}\n\telse{\n\t\tlet line = this._table._ssFilters[row] || {};\n\t\treturn line[column];\n\t}\n\treturn null;\n}\n\nexport function removeFilters(page){\n\tif(page && page != this.getActiveSheet()){\n\t\tconst sheet = getSheet(this, page);\n\t\tif(sheet && sheet.content.filters){\n\t\t\tfor(let i = 0; i < sheet.content.filters.length; i++){\n\t\t\t\tconst filter = sheet.content.filters[i];\n\t\t\t\tthis.callEvent(\"onAction\", [\"filter\", { row: filter[0], column: filter[1], value: filter[2], newValue: null, page:page||this.getActiveSheet() }]);\n\t\t\t}\n\t\t\tsheet.content.filters = [];\n\t\t}\n\t}\n\telse{\n\t\tconst filters = flt.getFilters(this._table);\n\n\t\tfor\t(let i=0; i<filters.length; i++){\n\t\t\tconst {row, column} = filters[i];\n\t\t\tthis.setCellFilter(row, column, null);\n\t\t}\n\n\t\tthis._table._ssFilters = {};\n\t\tthis._table.data.filter((obj) => {\n\t\t\treturn this.isRowVisible(obj.id);\n\t\t});\n\t}\n}\n\n\nexport function filterSpreadSheet(){\n\tconst grid = this._table;\n\tgrid.data.silent(()=>{\n\t\t// hidden rows\n\t\tgrid.data.filter(obj => this.isRowVisible(obj.id));\n\n\t\tconst filters = flt.getFilters(grid);\n\t\tfor (let i = 0; i < filters.length; i++){\n\t\t\tconst {row, column, handler, lastRow} = filters[i];\n\n\t\t\tlet finished = false;\n\t\t\tgrid.data.filter(obj => {\n\t\t\t\tlet r = obj.id;\n\t\t\t\tif(r <= row || typeof handler != \"function\")\n\t\t\t\t\treturn true;\n\n\t\t\t\tconst span = grid.getSpan(r, column);\n\t\t\t\tif(span){\n\t\t\t\t\tif(span[0] == row && span[1] == column)\n\t\t\t\t\t\treturn true;\n\t\t\t\t\telse\n\t\t\t\t\t\tr = span[0];\n\t\t\t\t}\n\n\t\t\t\tconst value = String(this.getCellValue(r, column, false));\n\n\t\t\t\tif(lastRow){\n\t\t\t\t\tif(r > lastRow)\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse if(finished || !value)\n\t\t\t\t\treturn finished = true;\n\n\t\t\t\treturn handler(value);\n\t\t\t}, 1, true);\n\t\t}\n\t});\n\n\tgrid.callEvent(\"onAfterFilter\", []);\n\tgrid.refresh();\n}\n","export function confirm(config){\n\treturn webix.confirm(\n\t\twebix.extend(\n\t\t\t{\n\t\t\t\tcontainer: this.$view,\n\t\t\t\tcss:\"webix_ssheet_confirm\",\n\t\t\t\tok: webix.i18n.spreadsheet.labels.ok,\n\t\t\t\tcancel: webix.i18n.spreadsheet.labels.cancel\n\t\t\t},\n\t\t\tconfig,\n\t\t\ttrue\n\t\t)\n\t);\n}\n\nexport function alert(config){\n\treturn webix.alert(\n\t\twebix.extend(\n\t\t\t{\n\t\t\t\tcontainer: this.$view,\n\t\t\t\tcss: \"webix_ssheet_alert\",\n\t\t\t\tok: webix.i18n.spreadsheet.labels.ok\n\t\t\t},\n\t\t\tconfig,\n\t\t\ttrue\n\t\t)\n\t);\n}","import * as undo from \"../operations/undo\";\nimport group from \"../operations/undo_group\";\n\nexport function resetUndo(){\n\tundo.reset(this);\n}\n\nexport function groupUndo(func){\n\tgroup.set(func, this);\n}\n\nexport function ignoreUndo(func){\n\tundo.ignoreUndo(func, this);\n}","import * as fmt from \"../operations/formats\";\n\nexport function setFormat(row, column, format, page){\n\tfmt.addFormat(this, row, column, format, null, page);\n}\n\nexport function changeDecimals(row, column, inc, page){\n\t//row and column may be obj\n\tfmt.changeAreaDecimals(this, inc, row, column, page);\n}","import * as formulas from \"../operations/show_formulas\";\n\nexport function showFormulas(state, page){\n\tformulas.showFormulas(this, state, page);\n}","import {showBorders} from \"../operations/print\";\n\nexport function showPrintBorders(value){\n\tconst old = !!this._printBorders.$render;\n\n\tif(value == \"toggle\")\n\t\tvalue = !old;\n\n\tif(value != old){\n\t\tif(value)\n\t\t\tshowBorders(this);\n\t\telse{\n\t\t\tdelete this._printBorders.$render;\n\t\t\tthis.refresh();\n\t\t}\n\n\t\tthis.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"print-borders\", value}]);\n\t\tthis.callEvent(\"onAction\", [\"print-borders\", {newValue: value, value: old}]);\n\t}\n}","import {zoom as zoomView} from \"../operations/zoom\";\n\nexport function zoom(value, page){\n\tzoomView(this, value, false, page);\n}","const defaultMenu = [\n\t{ id:\"file\", submenu:[\n\t\t{id: \"sheet\", submenu: [\n\t\t\t{id: \"new-sheet\"},\n\t\t\t{id: \"copy-sheet\"},\n\t\t\t{id: \"remove-sheet\"},\n\t\t\t{id: \"hide-sheet\"}\n\t\t]},\n\t\t{id: \"excel-import\"},\n\t\t{id: \"excel-export\"},\n\t\t{id: \"print\"},\n\t\t{id: \"print-borders\"}\n\t]},\n\t{ id:\"edit\", submenu:[\n\t\t{id: \"add-range\"},\n\t\t{id: \"add-dropdown\"},\n\t\t{id: \"add-link\"},\n\t\t{id: \"lock-cell\"},\n\t\t{id: \"conditional-format\"},\n\t\t{id: \"clear\", submenu:[\n\t\t\t{id: \"clear-value\"},\n\t\t\t{id: \"clear-style\"},\n\t\t\t{id: \"clear-conditional-formats\"},\n\t\t\t{id: \"clear-dropdown-editors\"},\n\t\t\t{id: \"clear-filters\"},\n\t\t\t{id: \"clear-comments\"},\n\t\t\t{ $template:\"Separator\" },\n\t\t\t{id: \"clear-all\"}\n\t\t]},\n\t\t{id: \"validation\", submenu:[\n\t\t\t{id:\"add-cell-validation\"},\n\t\t\t{id:\"remove-cell-validation\"},\n\t\t\t{id:\"highlight-invalid-data\"},\n\t\t\t{id:\"remove-highlight-invalid-data\"}\n\t\t]}\n\t]},\n\t{ id:\"insert\", submenu:[\n\t\t{id: \"image\", submenu:[\n\t\t\t{ id: \"add-image-cell\"},\n\t\t\t{ id: \"add-image-top\"}\n\t\t]},\n\t\t{id: \"graph\", submenu:[\n\t\t\t{ id: \"add-sparkline\"},\n\t\t\t{ id: \"add-chart\"}\n\t\t]},\n\t\t{\n\t\t\tid: \"controls\", submenu: [\n\t\t\t\t{id: \"add-checkbox\"},\n\t\t\t\t{id: \"add-radio\"}\n\t\t\t]\n\t\t},\n\t\t{id: \"add-comment\"},\n\t]},\n\t{ id:\"data\", submenu:[\n\t\t{id: \"sort\", submenu: [\n\t\t\t{id: \"sort-asc\"},\n\t\t\t{id: \"sort-desc\"}\n\t\t]},\n\t\t{id: \"create-filter\"}\n\t]},\n\t{ id: \"view\", submenu:[\n\t\t{id: \"columns\", submenu: [\n\t\t\t{id: \"insert-column\"},\n\t\t\t{id: \"delete-column\"},\n\t\t\t{id: \"show-column\"},\n\t\t\t{id: \"hide-column\"},\n\t\t\t{id: \"resize-column\"}\n\t\t]},\n\t\t{id: \"rows\", submenu: [\n\t\t\t{id: \"insert-row\"},\n\t\t\t{id: \"delete-row\"},\n\t\t\t{id: \"show-row\"},\n\t\t\t{id: \"hide-row\"},\n\t\t\t{id: \"resize-row\"}\n\t\t]},\n\t\t{ $template:\"Separator\" },\n\t\t{id: \"freeze-columns\"},\n\t\t{id: \"freeze-rows\"},\n\t\t{id: \"hide-gridlines\"},\n\t\t{id: \"hide-headers\"},\n\t\t{id: \"show-formulas\"}\n\t]}\n];\n\nconst readonlyMenu = [\n\t{ id:\"file\", submenu:[\n\t\t{id: \"excel-export\"},\n\t\t{id: \"print\"},\n\t\t{id: \"print-borders\"}\n\t]},\n\t{ id: \"view\", submenu:[\n\t\t{id: \"hide-gridlines\"},\n\t\t{id: \"hide-headers\"},\n\t\t{id: \"show-formulas\"}\n\t]}\n];\n\nconst ui = {\n\tgetMenuData: function(menu, config){\n\t\tvar i;\n\t\tfor(i=0; i < menu.length; i++){\n\t\t\tif(typeof menu[i] == \"string\")\n\t\t\t\tmenu[i] = {id: menu[i]};\n\t\t\tif((menu[i].id == \"resize-column\" || menu[i].id == \"resize-row\") && !config.resizeCell){\n\t\t\t\tmenu.splice(i,1);\n\t\t\t\ti--;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(!menu[i].value)\n\t\t\t\tmenu[i].value = webix.i18n.spreadsheet.menus[menu[i].id];\n\t\t\tif(menu[i].submenu)\n\t\t\t\tmenu[i].submenu = this.getMenuData(menu[i].submenu, config);\n\t\t}\n\n\t\treturn menu;\n\t}\n};\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\tconst config = view.config;\n\tconst menu = {\n\t\tview: \"menu\",\n\t\tborderless: true,\n\t\tcss: \"webix_ssheet_menu\",\n\t\tid: \"menu\",\n\t\tautowidth: true,\n\t\ttype:{\n\t\t\theight: 40\n\t\t},\n\t\tdata: ui.getMenuData(\n\t\t\twebix.isArray(config.menu) ? config.menu : webix.copy(config.readonly ? readonlyMenu : defaultMenu),\n\t\t\tconfig\n\t\t)\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"menu\", menu]);\n\treturn menu;\n}\n\n\nfunction ready(view){\n\tif(view.$$(\"menu\"))\n\t\tview.$$(\"menu\").attachEvent(\"onMenuItemClick\",(id) => callAction(view,id));\n}\n\nconst actionMap = {\n\t\"undo\": view => view.undo(),\n\t\"redo\": view => view.redo(),\n\t\"insert-column\": view => view.insertColumn(),\n\t\"delete-column\": view => view.deleteColumn(),\n\t\"show-column\": view => view.callEvent(\"onCommand\",[{id: \"show\", group: \"column\", neighbors:true}]),\n\t\"hide-column\": view => view.hideColumn(null,true),\n\t\"resize-column\": view => view.callEvent(\"onCommand\",[{\n\t\tid: \"resize\", group: \"column\", value: webix.i18n.spreadsheet.menus[\"resize-column\"]\n\t}]),\n\t\"insert-row\": view => view.insertRow(),\n\t\"delete-row\": view => view.deleteRow(),\n\t\"show-row\": view => view.callEvent(\"onCommand\",[{id: \"show\", group: \"row\", neighbors:true}]),\n\t\"hide-row\": view => view.hideRow(null,true),\n\t\"resize-row\": view => view.callEvent(\"onCommand\",[{id: \"resize\", group: \"row\", value: webix.i18n.spreadsheet.menus[\"resize-row\"]}]),\n\t\"freeze-columns\": view => view.freezeColumns(),\n\t\"freeze-rows\": view => view.freezeRows(),\n\t\"hide-gridlines\": view => view.hideGridlines(\"toggle\"),\n\t\"hide-headers\": view => view.hideHeaders(\"toggle\"),\n\t\"show-formulas\": view => view.showFormulas(\"toggle\"),\n\t\"print-borders\": view => view.showPrintBorders(\"toggle\")\n};\n\nfunction callAction(view,id){\n\tif(view.callEvent(\"onMenuItemClick\",[id])){\n\t\tif(actionMap[id])\n\t\t\tactionMap[id](view);\n\t\telse\n\t\t\tview.callEvent(\"onCommand\",[{id: id}]);\n\t}\n}","//global definitions\nimport \"./locale\";\nimport \"./views/index\";\n\n//special content for non-production builds\nimport \"./init\";\n\nimport \"./editors/index\";\n\n//modules\nimport * as bar from \"./toolbar\";\nimport * as tbl from \"./table\";\nimport * as key from \"./hotkeys\";\nimport * as editor from \"./editor\";\nimport * as sheets from \"./sheets\";\nimport * as dialogs from \"./dialogs/index\";\nimport * as context from \"./context\";\nimport * as chart from \"./chart\";\n\nimport {setDefaultFormats} from \"./operations/formats\";\nimport {operations} from \"./operations/index\";\nimport {api} from \"./api/index\";\n\n//styling\nimport * as menu from \"./menu\";\nimport {getDefaultStyles} from \"./helpers/conditional\";\nimport {setSkinDefaults} from \"./toolbar/defaults\";\n\nimport {addMathMethods} from \"./mathematics/methods\";\n\nvar component = {\n\tname:\"spreadsheet\",\n\t_base_index:{ count:1 },\n\tdefaults:{\n\t\tspans: true,\n\t\tliveEditor: true,\n\t\trowCount:50,\n\t\tmath:true,\n\t\tcolumnCount:20,\n\t\tresizeCell: true,\n\t\tsheetTabWidth: 90,\n\t\tconditionStyle: getDefaultStyles()\n\t},\n\t$init:function(){\n\t\tthis.$index = (this._base_index.count++);\n\t\tthis.$view.className += \" webix_ssheet\";\n\n\t\taddMathMethods();\n\n\t\tthis.$ready.unshift(this._sub_init);\n\t\tthis.$ready.unshift(setDefaultFormats);\n\t\tthis.$ready.push(this._set_handlers);\n\n\t\tthis._destroy_with_me = [];\n\t\tthis.attachEvent(\"onDestruct\", () => {\n\t\t\tthis._destroy_with_me.forEach(view => view.destructor());\n\t\t});\n\t},\n\t$skin:function(){\n\t\tsetSkinDefaults();\n\t},\n\t_sub_init:function(){\n\t\tconst obj = this.config;\n\t\tconst readonly = obj.readonly;\n\t\tconst rows = [];\n\n\t\t//toolbars\n\t\tif(obj.menu)\n\t\t\trows.push(menu.init(this));\n\t\tif((readonly && (obj.toolbar || obj.buttons)) || (!readonly && obj.toolbar !== false))\n\t\t\trows.push(bar.init(this));\n\t\tif (obj.subbar)\n\t\t\trows.push(obj.subbar);\n\t\tif(!readonly && obj.liveEditor)\n\t\t\trows.push(editor.init(this));\n\n\t\t//data part\n\t\tconst tblObj = {\n\t\t\teditable : !readonly,\n\t\t\tliveEditor: obj.liveEditor\n\t\t};\n\t\tif(obj.rowHeight)\n\t\t\ttblObj.rowHeight = obj.rowHeight;\n\t\tif(obj.columnWidth)\n\t\t\ttblObj.columnWidth = obj.columnWidth;\n\n\t\tif(readonly)\n\t\t\trows.push(tbl.init(this, tblObj));\n\t\telse\n\t\t\trows.push({cols:[tbl.init(this, tblObj), chart.init(this)]});\n\n\t\tconst bottom = obj.bottombar === true ? sheets.defaultBottom(this) : obj.bottombar;\n\t\tif (bottom)\n\t\t\trows.push(bottom);\n\n\t\tsheets.init(this);\n\n\t\tif(!readonly)\n\t\t\tcontext.init(this);\n\n\t\tdialogs.init(this);\n\n\t\tthis.rows_setter(rows);\n\t},\n\t_set_handlers:function(){\n\t\t//prevent double init\n\t\tif (this._table) return;\n\t\tthis._table = this.$$(\"cells\");\n\n\t\t//init all sub modules\n\t\toperations(this);\n\n\t\t//set sizes for the table\n\t\ttbl.reset(this, this.config.columnCount, this.config.rowCount);\n\t\tkey.init(this); //keyboard shortcuts\n\t\t\n\t\tthis._table.attachEvent(\"onAfterAreaAdd\", () =>\n\t\t\tthis.callEvent(\"onAfterSelect\", [ this.getSelectedId(true) ]));\n\n\t\tthis.callEvent(\"onComponentInit\", []);\n\t},\n\t$onLoad:function(obj, driver){\n\t\t//when loading data by data:, we can get $onLoad before _set_handlers call\n\t\tthis._set_handlers();\n\n\t\tconst excel = obj.excel;\n\n\t\tif (excel)\n\t\t\tobj = this._parseExcel(obj, driver);\n\t\telse if(!obj.data && typeof obj == \"string\" && (driver.cell || driver.row))\n\t\t\tobj = this._parseCsv(obj, driver);\n\n\t\tsheets.load(this, obj, excel);\n\t}\n};\napi(component);\nwebix.protoUI(component, webix.AtomDataLoader, webix.IdSpace, webix.ui.layout);\n","import {isCellSelected, isColSelected,isRowSelected,selectRow,selectColumn} from \"./operations/column_operations\";\nimport {getColumnOperation, getRowOperation, getClearOperation} from \"./toolbar/buttons\";\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => view.$$(\"context\").attachTo(view._table.$view));\n\n\tconst locale = webix.i18n.spreadsheet.menus;\n\n\tlet clipboard = [];\n\tif(view.config.clipboard !== false)\n\t\tclipboard = [\n\t\t\t{ id:\"cut\", value: locale.cut},\n\t\t\t{ id:\"copy\", value: locale.copy},\n\t\t\t{ id:\"paste\", value: locale.paste},\n\t\t\t{ id:\"special-paste\", value: locale[\"special-paste\"], submenu:[\n\t\t\t\t{id: \"paste-values\", value: locale[\"paste-values\"]},\n\t\t\t\t{id: \"paste-formulas\", value: locale[\"paste-formulas\"]},\n\t\t\t\t{id: \"paste-styles\", value: locale[\"paste-styles\"]},\n\t\t\t\t{id: \"paste-conditions\", value: locale[\"paste-conditions\"]},\n\t\t\t\t{id: \"paste-validation\", value: locale[\"paste-validation\"]}\n\t\t\t]}\n\t\t];\n\n\tconst lists = {\n\t\tdata: clipboard.concat([\n\t\t\t{ id:\"clear\",\t\tvalue: locale[\"clear\"], submenu: getClearOperation()},\n\t\t\t{id: \"validation\", value: locale[\"validation\"], submenu:[\n\t\t\t\t{id:\"add-cell-validation\", value: locale[\"add-cell-validation\"]},\n\t\t\t\t{id:\"remove-cell-validation\", value: locale[\"remove-cell-validation\"]},\n\t\t\t\t{id:\"highlight-invalid-data\", value: locale[\"highlight-invalid-data\"]},\n\t\t\t\t{id:\"remove-highlight-invalid-data\", value: locale[\"remove-highlight-invalid-data\"]}\n\t\t\t]},\n\t\t\t{ id:\"lock-cell\",\t\tvalue: locale[\"lock-cell\"]},\n\t\t\t{ $template: \"Separator\"},\n\t\t\t{ id:\"sort\",\tvalue: locale.sort, submenu:[\n\t\t\t\t{id: \"sort-asc\", value: locale[\"sort-asc\"]},\n\t\t\t\t{id: \"sort-desc\", value: locale[\"sort-desc\"]}\n\t\t\t]},\n\t\t\t{id:\"create-filter\",\t\tvalue: locale[\"create-filter\"]},\n\t\t\t{ $template: \"Separator\"},\n\t\t\t{ id:\"add-range\",\t\tvalue: locale[\"add-range\"]},\n\t\t\t{ id:\"add-link\",\t\tvalue: locale[\"add-link\"]},\n\t\t\t{ id:\"add-comment\",\t\tvalue: locale[\"add-comment\"]}\n\t\t]),\n\t\tcolumn: getColumnOperation(view),\n\t\trow: getRowOperation(view)\n\t};\n\n\n\tvar context = {\n\t\tview: \"contextmenu\",\n\t\tid: \"context\",\n\t\tpadding:0,\n\t\tsubmenuConfig:{\n\t\t\tpadding:0,\n\t\t\ton:{\n\t\t\t\tonBeforeShow:function(){\n\t\t\t\t\tthis.sizeToContent();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdata:[],\n\t\ton:{\n\t\t\tonMenuItemClick(id) {\n\t\t\t\tview.callEvent(\"onCommand\", [this.getMenuItem(id)]);\n\t\t\t},\n\t\t\tonShow(){\n\t\t\t\tdelete view._context;\n\t\t\t},\n\t\t\tonBeforeShow(pos) {\n\t\t\t\tview._context = true;\n\t\t\t\twebix.callEvent(\"onClick\", []);\n\t\t\t\tvar mode, trg;\n\n\t\t\t\ttrg = view._table.locate(pos);\n\t\t\t\tif (!trg) return false;\n\n\t\t\t\tmode = \"\";\n\t\t\t\tif (trg.header && trg.column !== \"rowId\"){\n\t\t\t\t\tif (!isColSelected(trg.column, view))\n\t\t\t\t\t\tselectColumn(trg.column, view);\n\t\t\t\t\tmode = \"column\";\n\t\t\t\t} else if (trg.row){\n\t\t\t\t\tif (trg.column === \"rowId\"){\n\t\t\t\t\t\tif (!isRowSelected(trg.row, view))\n\t\t\t\t\t\t\tselectRow(trg.row, view);\n\t\t\t\t\t\tmode = \"row\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!isCellSelected(trg.row, trg.column, view))\n\t\t\t\t\t\t\tview._table.addSelectArea(trg, trg);\n\t\t\t\t\t\tmode = \"data\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (mode){\n\t\t\t\t\tvar data = getMenuData(view, mode, lists[mode]);\n\t\t\t\t\tif (data){\n\t\t\t\t\t\tthis.clearAll();\n\t\t\t\t\t\tthis.parse(data);\n\t\t\t\t\t\tthis.sizeToContent();\n\t\t\t\t\t\twebix.html.preventEvent(pos);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"context\", context]);\n\tconst contextMenu = view.ui(context);\n\n\tview._destroy_with_me.push(contextMenu);\n}\n\nexport function getMenuData(view, name, data){\n\tvar ev = { area:name, data:data };\n\tif (view.callEvent(\"onContextMenuConfig\", [ev]))\n\t\treturn ev && ev.data;\n\treturn null;\n}","import * as m1  from \"./add_row_col\";\nimport * as m6  from \"./clipboard\";\nimport * as m12 from \"./column_operations\";\nimport * as m2  from \"./conditional_formats\";\nimport * as m4 from \"./types\";\nimport * as m8 from \"./formats\";\nimport * as m17 from \"./data\";\nimport * as m18 from \"./dropdown\";\nimport * as m7  from \"./formats\";\nimport * as m13 from \"./hide_row_col\";\nimport * as m14 from \"./lock_cell\";\nimport * as m3  from \"./resize\";\nimport * as m9  from \"./selection\";\nimport * as m10 from \"./sorting\";\nimport * as m16 from \"./spans\";\nimport * as m16a from \"../mathematics/methods\";\nimport * as m16b from \"../mathematics/ranges\";\nimport * as m16c from \"../mathematics/sheets\";\nimport * as m19 from \"./states\";\nimport * as m5  from \"./styles\";\nimport * as m11 from \"./undo\";\nimport * as m20 from \"./import\";\nimport * as m21 from \"./filter\";\nimport * as m22 from \"./print\";\nimport * as m23 from \"./export\";\nimport * as m24 from \"./load\";\nimport * as m25 from \"./clear_styles\";\nimport * as m26 from \"./comments\";\nimport * as m27 from \"./save\";\nimport * as m28 from \"./hide_headers\";\nimport * as m29 from \"./hide_gridlines\";\nimport * as m30 from \"./views\";\nimport * as m31 from \"./show_formulas\";\nimport * as m32 from \"./zoom\";\nimport * as m33 from \"./validation\";\n\nexport function operations(view){\n\t//order in some cases does matter\n\t//resize must be applied after math, to size data by the result of math calculation\n\t//types must be applied after state and data \n\tvar all = [m32,m1,m2,m5,m6,m7,m9,m10,m11,m12,m13,m14,m16,m3,m8,m17,m16a,m16b,m16c,m18,m19,m4,m20,m21,m22,m23,m24,m25,m26,m27,m28,m29,m30,m31,m33];\n\tfor (var i = 0; i < all.length; i++){\n\t\tif (all[i].init)\n\t\t\tall[i].init(view);\n\t}\n}","import * as rco from \"./row_col_operations\";\nimport * as lcl from \"./lock_cell\";\nimport * as fcl from \"./freeze\";\nimport * as hbr from \"./hide_gridlines\";\nimport * as hhd from \"./hide_headers\";\nimport * as hrc from \"./hide_rows\";\nimport * as mat from \"./math\";\nimport * as ops from \"./operations\";\nimport * as cor from \"./core\";\nimport * as sav from \"./save\";\nimport * as dpd from \"./dropdown\";\nimport * as flt from \"./filter\";\nimport * as cfm from \"./confirm\";\nimport * as und from \"./undo\";\nimport * as fmt from \"./number_formats\";\nimport * as fml from \"./show_formulas\";\nimport * as prt from \"./print\";\nimport * as zoom from \"./zoom\";\n\nexport function api(view){\n\tvar all = [rco, lcl, fcl, hbr, hhd, hrc, mat, ops, cor, sav, dpd, flt, cfm, und, fmt, fml, prt, zoom];\n\tfor (var i = 0; i < all.length; i++)\n\t\twebix.extend(view, all[i]);\n}"],"names":["e","t","r","n","o","Date","getFullYear","valueOf","getTimezoneOffset","Math","floor","i","round","getTime","u","a","isNaN","s","length","concat","c","h","l","f","d","toString","padStart","toUpperCase","m","join","p","substring","g","b","R","toLowerCase","T","_","split","y","trim","N","M","q","indexOf","w","E","replace","RegExp","A","substr","O","Object","freeze","__proto__","CONCATENATE","LEFT","MID","RIGHT","LOWER","UPPER","PROPER","TRIM","LEN","CHAR","String","fromCharCode","CLEAN","CODE","charCodeAt","EXACT","FIND","FIXED","toFixed","NUMBERVALUE","Number","REGEXEXTRACT","match","REGEXMATCH","REGEXREPLACE","REPT","Array","SEARCH","SUBSTITUTE","JOIN","forEach","push","REPLACE","ARRAYTOTEXT","map","v","I","S","C","D","trunc","x","getDate","L","getMonth","P","F","getHours","U","getMinutes","V","getSeconds","k","$","B","H","setHours","setDate","getDay","ceil","X","Error","getUTCDay","j","Y","G","toDateString","z","DATE","TIME","DAY","MONTH","YEAR","HOUR","MINUTE","SECOND","NOW","DATEDIF","DATEVALUE","DAYS","DAYS360","EDATE","setMonth","EOMONTH","ISOWEEKNUM","NETWORKDAYS","TIMEVALUE","setMinutes","setSeconds","WEEKNUM","abs","WEEKDAY","WORKDAY","YEARFRAC","W","pow","K","Q","J","ACCRINT","PMT","FV","DB","DDB","min","DOLLAR","DOLLARDE","parseInt","log","LN10","LN2","DOLLARFR","EFFECT","FVSCHEDULE","IRR","IPMT","ISPMT","NPV","NOMINAL","NPER","PDURATION","PPMT","PV","SYD","TBILLPRICE","TBILLYIELD","le","Te","_e","ye","Me","qe","we","Ee","code","source","pageName","Oe","Ae","ve","Ie","Se","Ce","De","xe","Le","Pe","Fe","Ue","Ve","ke","$e","page","name","exec","broken","triggers","Be","He","Xe","pop","Function","je","Ut","Vt","Ot","Ye","Ge","ze","We","Ke","Qe","Je","Ze","et","tt","rt","nt","ot","it","ut","at","st","ct","sqrt","ht","lt","ft","dt","mt","random","pt","gt","parseFloat","bt","Rt","Tt","CM","CD","XC","XL","IX","IV","_t","yt","Nt","Mt","qt","wt","Et","At","vt","It","St","Ct","Dt","exp","xt","Lt","Pt","Ft","kt","cos","cosh","sin","sinh","$t","Bt","Ht","Xt","jt","Yt","sort","Gt","zt","Wt","Kt","filter","reduce","Qt","Jt","ABS","ACOS","acos","ACOSH","acosh","ACOT","atan","ACOTH","ADD","ARABIC","test","ASIN","asin","ASINH","asinh","ATAN","ATAN2","atan2","ATANH","AVEDEV","AVERAGE","AVERAGEA","BASE","max","BINOMDIST","BITAND","BITLSHIFT","BITOR","BITRSHIFT","BITXOR","CEILING","COMBIN","COMBINA","COMPLEX","CORREL","COS","COSH","COT","tan","COTH","COUNT","COUNTA","COUNTBLANK","COVAR","CSC","CSCH","DEC2BIN","DEC2HEX","DEC2OCT","DECIMAL","DEGREES","PI","DELTA","DEVSQ","DIVIDE","EQ","ERF","ERFC","EVEN","sign","EXP","FACT","FACTDOUBLE","FISHER","FISHERINV","FLOOR","GAMMA","isInteger","GCD","GEOMEAN","some","isFinite","GESTEP","GT","GTE","HARMEAN","HEX2BIN","HEX2DEC","HEX2OCT","IMABS","IMAGINARY","IMCONJUGATE","IMCOS","IMCOSH","IMCOT","IMCSC","IMCSCH","IMDIV","IMEXP","IMLN","IMPOWER","IMPRODUCT","slice","IMREAL","IMSEC","IMSECH","IMSIN","IMSINH","IMSQRT","IMSUB","IMSUM","IMTAN","INT","LARGE","LN","LOG","LOG10","LT","LTE","MAX","MEDIAN","MIN","MINUS","MOD","MROUND","MULTINOMIAL","MULTIPLY","NE","OCT2BIN","OCT2DEC","OCT2HEX","ODD","PERCENTILE","PERMUT","POW","POWER","PRODUCT","QUARTILE","QUOTIENT","RADIANS","RAND","RANDBETWEEN","ROMAN","ROUND","ROUNDDOWN","ROUNDUP","SEC","SECH","SIGN","SIN","SINH","SMALL","SQRT","SQRTPI","STDEV","STDEVA","STDEVP","STDEVPA","STEYX","SUBTOTAL","SUM","SUMPRODUCT","SUMSQ","SUMX2MY2","find","SUMX2PY2","SUMXMY2","TAN","TANH","tanh","TRUNC","VAR","VARA","VARP","VARPA","WEIBULL","Zt","er","tr","LOOKUP","HLOOKUP","$width","VLOOKUP","XLOOKUP","INDEX","MATCH","XMATCH","CHOOSE","rr","IF","AND","NOT","OR","FALSE","TRUE","nr","ISBLANK","ISBINARY","ISEVEN","ISODD","ISNONTEXT","ISNUMBER","ISTEXT","or","ir","ur","ar","assign","sr","cr","keys","lr","pr","gr","br","add","has","Rr","from","Tr","values","next","done","value","_r","constructor","get","set","strict","this","_getter","_setter","_strict","_parser","_printer","_parseContext","pageObj","$count","_data","Map","_triggers","_holders","_context","$height","getPlaceholder","getTriggerList","setValue","_removeTriggers","trigger","clean","getValue","getMeta","_meta","setMeta","setPlaceholder","entries","each","setMath","_generate","_setMathAt","_execAndTrigger","refresh","getMath","Set","triggerSet","size","_check_for_loops","delete","_errorAndTrigger","getStats","math","_clearArea","parse","_exec","setLogger","_err_handler","_setErr","regenerate","recalculate","isArray","_complexSetter","debug","console","transpose","_transpose","_triggerRow","_triggerColumn","Ne","moveMath","_moveMath","id","transposeMath","yr","_id","_store","reset","_parseMode","_rows","_cols","_spans","getID","cellID","getSize","getContext","addRow","splice","apply","Nr","_recalculateSpans","removeRow","addColumn","removeColumn","setCell","clearCell","getCell","getRange","getCellRange","eachCell","serialize","parseBlock","throwError","setRowMeta","getRowMeta","setColumnMeta","getColumnMeta","row","addSpan","findIndex","info","width","height","getSpan","getSpans","_adjustSpan","Mr","_ranges","_counter","_rangeOrder","_page","_pageGetter","toId","_next_id","_refresh","remove","renamePage","qr","copy","_serialize","$clipboard","paste","_updateCurrentCell","data","_updateCell","_refreshRelatedFormulas","wr","move","_getTriggersOutsideCutRange","_updateRelatedFormulas","formula","fromCSV","Er","_cfg","_pages","_pageNames","_pageName2ID","_pCounter","spill","$format","getPage","bind","_cm","addPage","removePage","getRanges","getStore","firstOnly","resultsLimit","getCopyManager","en","labels","common","currency","number","percent","date","string","separator","negative","font","text","cell","align","format","column","borders","px","cancel","save","sheet","condition","range","ok","image","graph","controls","display","print","sheets","selection","borderless","margin","comment","tooltips","color","background","span","wrap","undo","redo","underline","strike","conditional","clear","scale","validation","menus","file","new","edit","columns","rows","insert","view","cut","table","liveEditor","IMAGE","HYPERLINK","SPARKLINE","CHECKBOX","RADIO","formats","dateFormat","timeFormat","longDateFormat","fullDateFormat","parseDateTime","parseDate","currencies","webix","i18n","spreadsheet","protoUI","$cssName","$init","config","options","body","tooltip","template","xCount","yCount","ui","richselect","defaults","skin","$name","cols","scroll","select","obj","on","onAfterSelect","getParentView","updateMasterValue","css","title","onChange","suggest","fitMaster","hide","$$","master","getList","getColorView","getTypeView","getSelectedId","getBody","getChildViews","getItemText","$ready","getPopup","old","callEvent","palette","attachEvent","setMasterValue","colorboard","icon","$view","className","$renderInput","divStart","renderColor","call","p1","p2","p3","colorpicker","prototype","$setValue","getColorNode","style","backgroundColor","firstChild","childNodes","$renderIcon","arguments","group","method","start","end","uid","addMathMethods","addMethodBatch","dateMethods","financialMethods","numberMethods","textMethods","setRadioState","state","getCellValue","_math$match$1$split$m","_math$match$1$split$m2","_slicedToArray","rowPos","colPos","rowCount","colCount","setCellValue","addMath","handler","addMethod","popup","list","exists","getJsDateFromExcel","excelDate","getExcelDateFromJs","jsDate","getMathTemplate","url","escape","attrs","arr","type","color1","color2","negativeColor","paddingX","paddingY","extend","donut","horizontal","tableConfig","isCircle","columnWidth","rowHeight","Sparklines","getTemplate","key","grid","on_click","ev","action","addRadio","addCheckbox","getJsDate","getExcelDate","all","proxy","$parse","$proxy","ajax","headers","post","datepicker","$prepareValue","daterangepicker","buttons","close","getBodyConfig","content","elements","getFormElements","padding","$active","layoutPadding","form","label","autowidth","click","getTopParentView","hotkey","body_setter","_typeof","isUndefined","window","head","autofocus","IdSpace","headerRowHeight","datatable","getItem","setHTML","dataview","contextmenu","thread","events","_loop","newName","_loading_data","_type_change","params","activeSheet","getActiveSheet","clearTimeout","delay","decode","encode","alpha","indexToHeader","index","chars","quotient","updateMaxColumn","maxColumn","str","adress","col","nind","parts","ranges","getCode","rangeParts","d1","d2","escapeSheet","toRange","x2","y2","rangeObj","eachRange","callback","isRange","cells","isCell","cellTest","changeRange","inc","updated","_range2","r1","c1","r2","c2","_ref","_ref2","toolbarSizes","sectorPadding","sectorMargin","defaultStyles","fonts","material","mini","flat","compact","contrast","willow","dark","func","result","getDimension","spans","line","spanEndRow","spanEndCol","style_names","_style_map","left","center","right","top","middle","bottom","zoom","getBorderCss","indent","count","pos","innerCss","fontSize","border","_border$split2","sizeEl","border_checks","area","mode","_style_handlers","getSelectArea","lineStyle","modes","_updateStyle","_styles","_styles_cache","_styles_max","prefix","$index","html","removeStyle","zoomStyles","_parse","getStyle","exportStyles","_mData","styles","_sheets","stl","props","styleFromText","_mPage","spanStyles","spanStyle","getFormat","addStyle","origin","styleToText","sameStyle","cache","_addStyle","styleObj","_obj$data$_i","update_style_data","nstyle","isActiveSheet","item","setStyle","_setStyle","setRangeStyle","getTextSize","baseWidth","innerHTML","_table","appendChild","offsetWidth","offsetHeight","removeChild","oldFormat","formatChanged","saveCell","sel","silent","_buildCssString2","outCss","_zoom","_buildCssString","clearRangeStyle","compactStyles","serialized","removeUnusedStyles","used","newStyles","eachSelectedCell","ostyle","oldVal","_applyCellStyles","_applyStyles","_undoStyle","create","formatsCount","formatCache","formatSources","formatHelpers","defaultFormats","setDefaultFormats","formatsLocale","price","getCurrencySymbol","extra","priceFormat","zeros","priceSettings","decimalSize","symbol","getDelimiters","int","numberFormat","format2code","serializeFormat","formToValues","groupSign","groupDelimiter","decimalSign","decimalDelimiter","getFormatSource","toexcel","parseFormat","createFormatName","dates","red","_format$split2","first","second","priceBrackets","isPrice","delimiters","_first$split2","integer","decimal","formatToForm","addFormat","nev","removeFormat","splitFormat","errorMessage","separated","separateFmt","genCode","fmt","err","check","ind","isAbs","isQuote","comma","numberPlaceholder","textPlaceholder","symbolPos","multiply","lastDateType","val","betweenPlaceholders","placeholder","datePart","excelDateToWebix","undefined","_getParts","getParts","_getParts2","reverse","lzeros","lfills","rzeros","rfills","rmax","genFormatCode","dateTypes","yy","yyyy","mm","mmm","mmmm","mmmmm","dd","ddd","dddd","timeTypes","hh","ss","dateOrder","timeOrder","typesOrder","order","types","changeAreaDecimals","getCells","rules","isNumber","changeCellDecimals","getFormatName","isCustom","parsed","decimals","placeholders","withoutText","withoutPlaceholders","updateDecimals","hasOwnProperty","formValues","symbolId","toExcel","leftPlaceholders","fmtParts","sepFmtParts","getFmtPartValues","leftText","rightText","fmtPart","firstPlaceholder","Infinity","checkFormat","checkTime","quot","isDateInvalid","getDateEditFormat","formatName","locale","isTime","dateToStr","getFormatFromData","array","styleName","fmtName","load","isChar","char","getLastCharIndex","includeNumbers","lastChar","getWord","quotes","operand","position","word","sum","flags","crosssheet","fromSheet","lines","ph","escaped","_getWord2","pushLine","getSuggestPos","editor","node","getInputNode","sizes","offset","selectionStart","textWidth","loadCell","setType","dateToExcel","_page_value_set","getFormatType","formatType","getType","parseToStore","_setType","mathFormat","isFormula","blockLevel","level","methods","part","getMathFormat","expectType","strToDate","parser","ignoreUndo","getExpectType","checkType","isString","cellEditor","getCellEditor","setFormat","setCellEditor","updateCell","cursor","charAt","search","nextSymbol","_this","tagName","show","setValueHere","$enterKey","isVisible","newValue","getPopupConfig","onItemClick","button","getSheetData","_this2","paramsPopup","maxHeight","autoheight","param","_destroy_with_me","suggestData","onBeforeShow","oldRanges","allRanges","global","suggestRanges","sRange","getMasterValue","highlight","_highlightedCells","_update_range","_last_value_set","activeCell","showActiveSheet","updateCellValue","blur","preventEvent","$handleSelection","UIManager","setFocus","showParamsPopup","_this3","eventRemove","keydownEv","event","endEdit","_this4","brackets","setValues","suggestConfig","activeParam","querySelector","scrollTop","offsetTop","scrollTo","focus","escapeText","changeCellCss","_activeMath","colorIndex","crossheet","cellSheet","prepareSheet","activeMath","cellText","rangeName","repeatedColor","nextCell","nextCellText","setColor","document","activeElement","paintValue","enter","define","showSheet","moveSelection","which","keyCode","shiftKey","getItemNode","newv","$setValueHere","str1","str2","setSelectionRange","expectOperator","ignoreSel","setRange","len","lastPos","prepareArea","row1","col1","row2","col2","coloredArea","texthighlight","layout","drag","dragscroll","EditAbility","toggle","offValue","onValue","inp","awidth","aheight","$allowsClear","blockEvent","unblockEvent","arrowCss","arrow","iconCss","inputSpacing","elementsConfig","labelWidth","_initOnChange","$eventSource","_getCheckboxes","$hiddenSheet","$all","_count","base","hidden","labelRight","active","baseHeight","inputHeight","checkboxes","output","cfg","scrollview","queryView","onSelectChange","resize","toFront","minWidth","minHeight","escHide","autofit","setAttribute","addHotKey","_removeView","getMenu","_clickEv","_menu","destructor","move_setter","DragControl","addDrag","$dragPos","$dragCreate","object","trg","target","getAttribute","elOffset","elPos","pOffset","parentNode","getScrollState","toNode","$dragDestroy","submenu","readonly","_toConsumableArray","submenuConfig","externalUI","onMenuItemClick","_menuActions","_toggleExcel","dots","class","toPDF","toPNG","header","pull","showMenuItem","hideMenuItem","layoutMargin","multi","getSectionConfig","onAfterScroll","addSection","trashIcon","dataPadding","upper","marker","onClick","removeView","childs","getLayout","lastIndex","layoutId","addView","setSubValue","sub","hideSubviews","child","getValues","$getSize","bodySize","env","scrollSize","$setSize","oldScroll","tconfig","frozenColumns","frozenRows","_frozenColumns","_frozenRows","freezeColumns","freezeRows","getState","ids","_undoValue","actionMap","confirm","then","_activeSheet","_remove","setState","init","prepare","showItem","selectSheet","command","changePagerVisability","changePagerStatus","once","context","num","dataOrder","rename","ready","numbers","defaultBottom","tabWidth","sheetTabWidth","minTabWidth","toolbar","getSheetsPopup","maxWidth","editable","editaction","editValue","webix_ssheet_sheet_arrow","$sheetMenu","menu","menuInit","getMark","callAction","oneSheet","initSheetMenu","disabled","batch","scrollSheets","gravity","oldV","direction","step","onShow","clearAll","scrollPos","disable","enable","scrollWidth","showBatch","tab","getSheet","visibleSheets","getVisible","showPrevious","_filterTabs","tabs","newIndex","getNewTitle","prepareData","prevIndex","changeId","editors","invalidValue","linkRegex","prepareCell","update","isDate","link","styleProperties","newSheet","DataStore","sheetName","_arr$getDimension2","columnCount","_resetTable","bottombar","oldZoom","defWidth","defHeight","getColumnConfig","rowId","getColumn","zoomSizes","_adjustRowHeight","eachColumn","spanHeight","getText","getSpanNode","getCellFilter","textHeight","resizeCell","headerOnly","refreshSelectArea","setColumnWidth","_undoResize","nsizes","_sizes$i","_i4","_loop2","_i5","updatePosition","lockCss","lockCell","innerCall","_mapCellsCalls","_locks","addCellCss","removeCellCss","locked","isCellLocked","cm","block","lock","_locked$i","rid","cid","extraCss","getExtraCss","isEmpty","setSpanValue","removeSpan","lx","ly","rx","ry","cx","cy","setSpanCss","borderChecks","adjustSpan","spanData","checkSpan","isFirstCell","pasteSpan","cutted","translate","mapCells","isUndo","undoSpan","_spans$i","checkSpanBorders","htmlOnly","views","doc","xCorrection","sheetnames","baseIndex","pageSize","getPageSize","_print","$customPrint","tbl","_tbl$children","children","topSplit","childElementCount","splitHeight","insertBefore","sheetNode","removeCss","addCss","external","innerView","_pull","img","src","promise","defer","onload","resolve","customPrint","cloneNode","canvases","getElementsByTagName","drawImage","container","printInnerView","_buildHtml","res","sorting","as","docFooter","_cleanHtml","printSizes","paper","landscape","printMargin","printPPI","showBorders","redraw","_printBorders","$render","removePrintInnerBorders","rowsHeight","fit","colsWidth","getPrintBordersCss","lastRow","lastCol","renderedSpanBorders","$renderedSpanBorders","innerRightBorder","innerBottomBorder","addSpanInnerBorder","rendered","spanNode","contains","showPrintBorders","readyZoom","getNext","minColumnWidth","nextValue","readOnly","shift","counter","excel_date","createPopup","icons","timepicker","_last_input_target","onEnter","render","showPopup","input","updateCalendar","calendar","afterRender","ss_richselect","popupInit","$value","actions","c0","isMerged","splitCell","combineCells","hideGridlines","hideHeaders","showFormulas","fontFamily","getColumnOperation","colOperations","neighbors","getRowOperation","rowOperations","getClearOperation","getLocaleClear","$template","styleFormats","colorButton","toggleButton","iconButton","btn","segmented","popupWidth","popupTemplate","popupEvents","titleHeight","condFormat","buttonsMap","example","blockColumns","elementsBlock","getAllElements","groups","calcButtons","$button","selected","element","updateValue","allElements","elm","structure","checkButtons","toolbarButtons","getButtons","bar","$customScroll","maxSize","limited","viewId","innerId","barStyles","dropdowns","getCellStyles","cellStyle","property","getBarStyles","_span","selectRow","endRow","last","_selectRange","selectAll","firstColumn","selectColumn","endColumn","isColSelected","selectedArea","isCellSelected","isRowSelected","selectColumns","addSelectArea","adjustColumn","eachRow","currentWidth","adjustRow","setRowHeight","highlightColRow","sc","ec","getHeaderNode","conditions","lastIndexOf","validationConditions","createRules","getConditionCss","_empty","collection","currentValue","rule","handlers","checkOrder","compare","addEmptyCollection","oldConditions","newData","_normalizeValue","conditionArr","newCondition","clearConditionalFormats","_changeCondition","pasteCondition","oldCondition","textLength","cond","_setCondition","type_action","_undoCondition","_conditions$i","oldValue","updateItem","isInvalid","invalid","ignoreEmpty","getValidationCss","_highlight","showValidationPopup","_commentSel","_inputMessage","inputMessage","pasteValidation","highlightInvalid","_validation$i","_serialize2","error","alert","showCells","ref","cellRef","_cellRef4","_adress2","rangePos","_rangePos","replaceAll","showCell","dragStartColumn","dragEndColumn","showCommentHandler","pointerType","comments","_activeComment","editStatus","locate","visible","commentsView","viewonly","editMath","highlightHeaders","cop","ed","$anyKey","getEditor","finalStep","resizeColumn","cind","dx","posRelative","columnId","selectColumnHandler","lastHeaderClick","headerClick","lastClickedRow","editStop","getFocus","saveFocus","details","ctrl","setDefaultCss","leftSplit","areaselect","minRowHeight","navigation","webix_ssheet_ref","cell_template","_v","valueOnly","formulasMode","invalidDate","helper","el","nms","cssFormat","getRenderedValue","refreshColumns","isMac","dialog","f2","del","styleHotKey","ctrlU","attr","elementOn","nav","updateEditor","fillEditor","startEdit","symbols","clearEditor","isEnabled","_rangeDialog","pasteRange","disableEditor","of","unselect","getFilter","filterByAll","onHide","getMethods","fillspace","insertFormula","onKeyPress","updateRange","Dialog","_createClass","_classCallCheck","$dialog","$hide","$show","unescape","DialogBox","_Dialog","_callSuper","_inherits","box","preview","parseImage","server","images","showPreview","upload","onBeforeFileAdd","reader","FileReader","getFormView","readAsDataURL","onFileUpload","response","imageURL","onSaveClick","okClick","onCancelClick","fillUrl","addImage","_box$DialogBox","viewid","open","ignoreUndoReset","restoreHistory","_ssUndoHistory","_ssUndoCursor","addToHistory","$skipHistory","ignoreReset","prevData","undoHandlers","nvalue","ovalue","_trackAll","conf","viewMethods","_types","track","_trackOne","_fromRange","_isPie","legend","fromData","names","_getNames","switchDirection","dataSeries","legendRange","_removeLegend","_showAll","win","_correctPos","_showOne","winSize","_getWidth","_getHeight","_isRange","_getDataParts","subdata","getRangeRows","getRangeCols","_getSeries","oldLeftColumn","dir","vals","xAxis","activeVals","series","firstRange","inActiveSeries","seria","colors","activeVal","dataRange","subRange","_normalizeConfig","valign","rangeToData","rind","editUIType","register","_commands","getConfig","inner","renderConfig","query","tables","_processTables","oldWin","_activeWin","$destructed","chart","_reset","_undoUI","_updateData","one","viewIds","htmlFilter","scaleColor","stacked","_prepareType","pie","pieLegend","legendConfig","yAxis","lineColor","lineShape","circle","borderColor","xValue","_genChartConfig","chartEditor","handlePieLegend","getLeftColumn","getTopRow","setSilentValue","updateLegendRange","updateXaxisRange","leftColumn","xAxisRange","topRow","updateAlign","updateValign","updateType","isPie","isBar","markersVisible","hideField","hideBatch","switchRowsCols","updateSeries","oldXaxis","field","inValues","getSelectedRange","expand","closeEditor","activeSkin","barHeight","complexData","addRichselect","getTypes","vertical","attributes","sparkline","els","parseChart","color_def","color_pos","color_neg","renderPreview","visibleBatch","labelPosition","checkRange","sparkConfig","addSparkline","clearValidation","selectedCell","scope","toSheetRange","unshift","validate","oldData","_getScope","theform","onBeforeSelect","removeRange","editRange","isNotEmpty","onFocus","saveClick","selectedId","_allRanges$i","nameParts","selectList","rangeVal","empty","Ranges","_master","_normalizeName","_normalizeRange","_data$i","globalRange","out","inSpan","rangeOptions","getRangePos","boolean","unique","objA","objB","sorters","$empty","_ssFilters","markBarFilter","getFilters","filters","clearFilters","refilter","setCellFilter","filterSpreadSheet","calibrateRange","getFilterRange","isValueActive","includes","isFilterExists","cc","rc","getFilterMode","pasteFilter","getSingleOption","getConditions","getFilterFunction","opt","ssheet_filter_sign","on_dblclick","removeFilters","toggleFilters","_filters$i2","_filters$i","$mode","$filter","syncScroll","_getTargetNode","flt","importData","relative","inputs","applyFilter","setCellStyle","isHidden","nodeOffset","tableOffset","getElementsByClassName","ydiff","xdiff","fillForm","labelsLocale","commonConfig","customConfig","dateConfig","getFormats","updateForm","closeWin","isText","$css","_getDatalayout","value2","_formatValue","_isNotDateRule","editFormat","_safeInt","_getCondition","activeValue","_rulesToArr","current_view","onBlur","vid","dlayout","getIdByIndex","_this5","getRows","conditionStyle","getSheets","filename","restoreValue","paperSize","modal","stringResult","printPreview","_setComment","textarea","onViewResize","animate","ssheet_comment_view","showInput","addComment","showTemplate","changeTextarea","getHead","getOption","optionHeight","errorHandle","formatInput","conditionValue","normalizeValue","formatValue","prepareConditions","handleTypeChange","required","bases","imt","imc","asw","rgs","dpd","cnd","lnk","pnt","cmt","siz","loadChangedData","_defineProperty","getUpdateValues","_delColumn","_addColumn","_delRow","_addRow","updatedData","isRowVisible","isColumnVisible","fixSelectArea","process","_ssEditors","clearEditors","pasteDropdown","dropdown","styledata","clipdata","updateFilters","specialPaste","getRow","ignore","$popup","_editors$i","tblEditors","setClipboard","buffer","browserClipboard","_get_sel_style","writeText","startRow","startCol","endCol","allFiltersInZone","_updateDelimiter","getClipboardNumberFormat","numToStr","_clip_to_sel","leftTop","csv","delimiter","record","_changeDelimiter","sameView","dataRowCount","dataColCount","maxRow","maxCol","extraSpanRows","lastRows","_add_row_col","groupUndo","ri","ci","subtrans","_clipboardToTable","row_ind","col_ind","cdata","clipboardNumberFormat","clipboardDecimalDelimiter","decimalOptional","minusSign","minusPosition","clipboard","navigator","clipbuffer","stringify","_sel_to_clip","ctrlKey","metaKey","readText","_hidden_cols_hash","_hidden_rows_hash","indexes","_hideRow","_hideColumn","_showRow","_showColumn","hash","showColumn","getColumnIndex","hideColumn","_loop3","_i","_loop4","_i2","hiddenIndex","_updatePosition","hrows","hcols","bs","blockStart","blockEnd","removeSelectArea","$handleStart","oldSel","oldStart","oldEnd","clearRange","isRow","nums","firstValue","afterSel","iteration","linkPos","_ref4","linkRow","linkCol","_ref6","sortRange","fullrange","maxY","maxX","nr1","nr2","nc1","nc2","newrange","expandSelection","by","newMath","updateSheetNames","oldName","stack","option","oldState","gridlines","firstVisible","removeComment","getComment","removeCommentsRange","commentCell","_undoComment","_comments$i","modules","m1","m2","m3","m4","m5","m6","m7","m8","uploader","XMLHttpRequest","apiOnly","accept","cellDates","sheetStubs","fileDialog","startImport","_safeColor","_getCellStyle","excel","alignment","_getExcelCellStyle","_getPdfCellStyle","rgb","fill","fgColor","sz","italic","bold","wrapText","getBorderStyles","textAlign","strikethrough","vertAlign","whiteSpace","_val$split2","_getDocStyle","$exportView","pdf","export_mode","defaultOptions","stubCells","footer","heights","rawValues","filterHTML","_arguments","dataOnly","sheetOptions","_hidden","pdfTable","_getDimension2","textBefore","sheetData","scheme","cached","cachedConditions","_getDefaults","docHeader","delta","rIndex","cIndex","computed","getComputedStyle","bg","_getCellConditions","_condition$map","rgbToHex","_condition$map2","_updateStyleCondition","_getStyles","colspan","rowData","exportData","rowSize","pad","paddingTop","paddingBottom","_updatePdfData","Sheet","Name","Ref","prop","orientation","getAutowidth","_exportView","$getExportValue","arrayRowEnd","arrayColEnd","cellValue","_excel_to_data","dataObj","links","sheetIndex","book","stylescount","styleshash","_safeFont","va","numFmt","_getBorderStyles","_getTypes","_getHidden","safe","_parseExcel","driver","full","states","_parseCsv","getRecords","callCommand","setSize","oldSize","columWidth","newSize","checkSpans","index1","index2","changed","spanSize","changeSpan","removeFreeze","getIndexById","getRangeValue","rangeStr","setRangeValue","isActivePage","spn","und","srt","_validation_restore","showValidationError","errorTitle","correctVal","cb","muonPage","oldStyle","oldEditor","sameValue","oldType","dateValue","muonItem","fail","updatedType","baseStyle","urlStyle","finished","_filters$_i","prepareFilter","formulas","zoomView","defaultMenu","readonlyMenu","getMenuData","insertColumn","deleteColumn","insertRow","deleteRow","hideRow","component","_base_index","_sub_init","_set_handlers","$skin","setSkinDefaults","subbar","tblObj","attachTo","lists","sizeToContent","getMenuItem","contextMenu","dialogs","viewBases","rows_setter","m32","m9","m10","m11","m12","m13","m14","m16","m17","m16a","m16b","m16c","m18","m19","m20","m21","m22","m23","m24","m25","m26","m27","m28","m29","m30","m31","m33","operations","$onLoad","rco","lcl","fcl","hbr","hhd","hrc","mat","ops","cor","sav","cfm","fml","prt","api","AtomDataLoader"],"mappings":";;;;;;;2FAAA,MAAMA,EAAE,UAAUC,EAAE,UAAUC,EAAE,QAAQC,EAAE,OAAO,SAASC,EAAEJ,GAAG,MAAMC,EAAE,IAAII,KAAKL,EAAEM,cAAc,EAAE,GAAGJ,EAAEF,EAAEO,UAAUN,EAAEM,UAAU,IAAIN,EAAEO,oBAAoBR,EAAEQ,qBAAqB,IAAI,OAAOC,KAAKC,MAAMR,EAAE,MAAM,CAAC,SAASS,EAAEX,GAAG,MAAMC,EAAE,IAAII,KAAKI,KAAKG,MAAM,OAAOZ,EAAE,OAAO,MAAM,OAAO,IAAIK,KAAKJ,EAAEY,UAAU,IAAIZ,EAAEO,oBAAoB,CAAC,SAASM,EAAEd,GAAG,OAAO,OAAOA,EAAEa,UAAU,IAAIb,EAAEQ,qBAAqB,KAAK,CAAC,SAASO,EAAEf,GAAG,SAASA,GAAG,IAAIA,IAAIA,GAAG,EAAEgB,MAAMhB,MAAMA,CAAC,CAAC,SAASiB,EAAEjB,GAAG,GAAG,IAAIA,EAAEkB,OAAO,CAAC,MAAMjB,EAAED,EAAE,GAAG,MAAM,iBAAiBC,EAAEA,EAAE,CAACA,EAAE,CAAC,IAAIA,EAAE,GAAG,IAAI,IAAIC,EAAE,EAAEA,EAAEF,EAAEkB,OAAOhB,IAAID,EAAEA,EAAEkB,OAAOnB,EAAEE,IAAI,OAAOD,CAAC,CAAC,SAASmB,EAAEpB,GAAG,OAAOA,GAAG,IAAIA,CAAC,CAAC,SAASqB,EAAErB,GAAG,MAAM,iBAAiBA,EAAE,SAASA,IAAIA,CAAC,CAAC,SAASsB,EAAEtB,GAAG,MAAMC,EAAE,iBAAiBD,EAAE,IAAIK,KAAKL,GAAGW,EAAEX,GAAG,GAAGC,EAAEY,UAAU,OAAOZ,EAAE,KAAK,GAAGD,mBAAmB,CAAC,SAASuB,EAAEvB,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,KAAK,GAAGD,oBAAoB,OAAOC,CAAC,CAAC,SAASuB,EAAExB,EAAEG,EAAEC,EAAEO,EAAEG,GAAG,IAAIG,EAAEF,EAAEf,GAAGiB,EAAE,GAAG,GAAGH,IAAIX,EAAE,MAAM,IAAIiB,EAAEC,EAAElB,EAAEY,EAAEZ,GAAG,KAAK,GAAG,iBAAiBc,GAAG,kBAAkBI,EAAE,MAAMpB,EAAE,GAAGgB,EAAEb,IAAIa,EAAEb,GAAGa,EAAEN,IAAIM,EAAEN,GAAGU,GAAG,EAAE,MAAMnB,EAAEmB,IAAIA,EAAEZ,KAAKC,OAAOW,IAAI,MAAMC,EAAEtB,EAAE,GAAG,KAAKc,EAAE,KAAK,GAAG,GAAGM,EAAET,EAAE,YAAYM,IAAI,EAAEN,EAAEP,GAAGqB,SAASX,IAAIG,IAAI,GAAGQ,SAASX,GAAGO,GAAGD,EAAEF,OAAOG,EAAE,MAAMnB,EAAE,OAAOoB,EAAEF,GAAGM,SAASL,EAAE,KAAKM,aAAa,CAAC,SAASC,KAAK5B,GAAG,OAAOiB,EAAEjB,GAAG6B,KAAK,GAAG,CAAC,SAASC,EAAE9B,EAAEC,GAAG,OAAOmB,EAAEpB,GAAG,GAAGA,EAAEyB,WAAWM,UAAU,EAAE9B,EAAE,CAAC,SAAS+B,EAAEhC,EAAEC,EAAEC,GAAG,OAAOkB,EAAEpB,GAAG,GAAGA,EAAEyB,WAAWM,UAAU9B,EAAEA,EAAEC,EAAE,CAAC,SAAS+B,EAAEjC,EAAEC,GAAG,OAAOmB,EAAEpB,GAAG,GAAGA,EAAEyB,WAAWM,UAAU/B,EAAEkB,OAAOjB,EAAE,CAAC,SAASiC,EAAElC,GAAG,OAAOoB,EAAEpB,GAAG,GAAGA,EAAEyB,WAAWU,aAAa,CAAC,SAASC,EAAEpC,GAAG,OAAOoB,EAAEpB,GAAG,GAAGA,EAAEyB,WAAWE,aAAa,CAAC,SAASU,EAAErC,GAAG,GAAGoB,EAAEpB,GAAG,MAAM,GAAG,MAAMC,EAAED,EAAEyB,WAAWU,cAAcG,MAAM,KAAKtC,EAAE,GAAG,IAAI,MAAME,KAAKD,EAAED,IAAIA,EAAE,IAAI,IAAIC,EAAEC,GAAG6B,UAAU,EAAE,GAAGJ,cAAc1B,EAAEC,GAAG6B,UAAU,GAAG,OAAO/B,CAAC,CAAC,SAASuC,EAAEvC,GAAG,OAAOoB,EAAEpB,GAAG,GAAGA,EAAEyB,WAAWe,MAAM,CAAC,SAASC,EAAEzC,GAAG,OAAOoB,EAAEpB,GAAG,EAAEA,EAAEyB,WAAWP,MAAM,CAAC,MAAMwB,EAAE,aAAa,SAASC,EAAE3C,EAAEC,EAAEC,EAAE,GAAG,MAAMC,EAAEY,EAAEb,GAAG,GAAG,iBAAiBC,GAAGF,EAAE,MAAM,GAAGA,IAAI2C,QAAQ,GAAG5C,IAAIG,EAAE,GAAG,EAAE,KAAK,wBAAwB,CAAC,SAAS0C,EAAE7C,EAAEC,EAAEC,EAAE,GAAG,MAAMC,EAAEY,EAAEb,GAAG,GAAG,iBAAiBC,EAAE,CAAC,MAAMD,EAAE,GAAGD,IAAIkC,cAAcS,QAAQ,GAAG5C,IAAImC,cAAchC,EAAE,GAAG,EAAE,GAAG,IAAID,EAAE,OAAOA,EAAE,KAAK,WAAW,CAAC,CAAC,SAAS4C,EAAE9C,EAAEC,EAAEC,EAAEC,GAAG,IAAIH,IAAIC,IAAIC,GAAG,KAAKA,EAAE,MAAM,GAAGF,IAAI,QAAG,IAASG,EAAE,MAAM,GAAGH,IAAI+C,QAAQ,IAAIC,OAAO,GAAG/C,IAAI,KAAK,GAAGC,KAAK,CAAC,IAAIE,EAAE,EAAEO,EAAE,EAAE,KAAK,GAAGX,IAAI4C,QAAQ,GAAG3C,IAAIG,GAAG,GAAG,GAAGA,EAAE,GAAGJ,IAAI4C,QAAQ,GAAG3C,IAAIG,EAAE,GAAGO,IAAIA,IAAIR,EAAE,MAAM,GAAGH,IAAI+B,UAAU,EAAE3B,GAAGF,EAAE,GAAGF,IAAI+B,UAAU3B,EAAE,GAAGH,IAAIiB,OAAO,CAAC,CAAC,SAAS+B,EAAEjD,EAAEC,EAAEC,EAAEC,GAAG,MAAMC,EAAEW,EAAEd,GAAGU,EAAEI,EAAEb,GAAG,GAAG,iBAAiBE,GAAG,iBAAiBO,EAAE,CAAC,MAAMV,EAAED,EAAEyB,WAAWvB,EAAEC,EAAEsB,WAAW,OAAOxB,EAAE8C,QAAQ9C,EAAEiD,OAAO9C,EAAE,EAAEO,GAAGT,EAAE,CAAC,CAAC,IAAIiD,EAAEC,OAAOC,OAAO,CAACC,UAAU,KAAKC,YAAY3B,EAAE4B,KAAK1B,EAAE2B,IAAIzB,EAAE0B,MAAMzB,EAAE0B,MAAMzB,EAAE0B,MAAMxB,EAAEyB,OAAOxB,EAAEyB,KAAKvB,EAAEwB,IAAItB,EAAEuB,KAAK,SAAShE,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOgE,OAAOC,aAAajE,EAAE,EAAEkE,MAAM,SAASnE,EAAE,IAAI,MAAM,GAAGA,IAAI+C,QAAQL,EAAE,GAAG,EAAE0B,KAAK,SAASpE,EAAE,IAAI,MAAM,GAAGA,IAAIqE,WAAW,EAAE,EAAEC,MAAM,SAAStE,EAAEC,GAAG,OAAOD,IAAIC,CAAC,EAAEsE,KAAK5B,EAAE6B,MAAM,SAASxE,EAAEC,EAAE,EAAEC,GAAE,GAAI,MAAMC,EAAEY,EAAEf,GAAGI,EAAEW,EAAEd,GAAG,GAAG,iBAAiBE,GAAG,iBAAiBC,EAAE,CAAC,MAAMJ,EAAEG,EAAEsE,QAAQrE,GAAG,GAAGiB,EAAEnB,GAAG,MAAM,GAAGF,IAAI,MAAMC,EAAEU,GAAG,GAAGX,IAAIsC,MAAM,KAAK,OAAOrC,EAAE8C,QAAQ,wBAAwB,KAAK,IAAIpC,CAAC,CAAC,EAAE+D,YAAY,SAAS1E,EAAEC,EAAE,IAAIC,EAAE,KAAK,GAAG,iBAAiBF,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOyE,OAAO3E,EAAE+C,QAAQ9C,EAAE,KAAK8C,QAAQ7C,EAAE,IAAI,EAAE0E,aAAa,SAAS5E,EAAEC,GAAG,GAAG,iBAAiBD,GAAG,iBAAiBC,EAAE,CAAC,MAAMC,EAAEF,EAAE6E,MAAM,IAAI7B,OAAO/C,IAAI,OAAOC,EAAEA,EAAEA,EAAEgB,OAAO,EAAEhB,EAAEgB,OAAO,EAAE,GAAG,IAAI,CAAC,EAAE4D,WAAW,SAAS9E,EAAEC,GAAG,GAAG,iBAAiBD,GAAG,iBAAiBC,EAAG,QAAQD,EAAE6E,MAAM,IAAI7B,OAAO/C,GAAI,EAAE8E,aAAa,SAAS/E,EAAEC,EAAEC,GAAG,GAAG,iBAAiBF,GAAG,iBAAiBC,EAAE,OAAOD,EAAE+C,QAAQ,IAAIC,OAAO/C,GAAG,GAAGC,IAAI,EAAE8E,KAAK,SAAShF,EAAEC,GAAG,MAAMC,EAAEa,EAAEd,GAAG,GAAG,iBAAiBC,EAAE,OAAO,IAAI+E,MAAM/E,EAAE,GAAG2B,KAAK,GAAG7B,IAAI,EAAEkF,OAAOrC,EAAEsC,WAAWrC,EAAEV,EAAE,SAASpC,GAAG,MAAM,iBAAiBA,GAAG,SAASA,GAAG,UAAUA,EAAE,GAAGA,IAAI,EAAE,EAAEoF,KAAK,SAASpF,KAAKC,GAAG,MAAMC,EAAE,GAAG,OAAOD,EAAEoF,SAASpF,IAAI,iBAAiBA,EAAEC,EAAEoF,KAAKrF,EAAE4B,KAAK,GAAG7B,MAAME,EAAEoF,KAAKrF,EAAG,IAAGC,EAAE2B,KAAK,GAAG7B,IAAI,EAAEuF,QAAQtC,EAAEuC,YAAY,SAASxF,EAAEC,GAAG,OAAOA,EAAE,IAAID,EAAEyF,KAAKzF,GAAG,iBAAiBA,EAAE,IAAIA,KAAKA,IAAI6B,KAAK,SAAS7B,EAAE6B,KAAK,KAAK,IAAI,MAAM6D,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,IAAIC,EAAE,MAAC,EAAO,EAAE,OAAE,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,EAAO,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAGC,EAAE,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,QAAG,OAAO,OAAO,EAAO,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,IAAI,SAASC,EAAE7F,EAAEC,EAAEC,GAAG,OAAOY,EAAE,IAAIT,KAAKL,EAAEC,EAAE,EAAEC,GAAG,CAAC,SAAS4F,EAAE9F,EAAEC,EAAEC,GAAG,MAAMC,EAAEW,EAAE,IAAIT,KAAK,KAAK,EAAE,EAAEL,EAAEC,EAAEC,EAAE,IAAI,OAAOC,EAAEM,KAAKsF,MAAM5F,EAAE,CAAC,SAAS6F,EAAEhG,GAAG,OAAOW,EAAEX,GAAGiG,SAAS,CAAC,SAASC,EAAElG,GAAG,OAAOW,EAAEX,GAAGmG,WAAW,CAAC,CAAC,SAASC,EAAEpG,GAAG,OAAOW,EAAEX,GAAGM,aAAa,CAAC,SAAS+F,EAAErG,GAAG,OAAOW,EAAEX,GAAGsG,UAAU,CAAC,SAASC,EAAEvG,GAAG,OAAOW,EAAEX,GAAGwG,YAAY,CAAC,SAASC,EAAEzG,GAAG,OAAOW,EAAEX,GAAG0G,YAAY,CAAC,SAASC,IAAI,OAAO7F,EAAE,IAAIT,KAAK,CAAC,SAASuG,EAAE5G,EAAEC,EAAEC,GAAG,MAAMC,EAAED,EAAEiC,cAAc,GAAG,MAAMhC,EAAE,OAAOF,EAAED,EAAE,MAAMc,EAAEH,EAAEX,GAAGe,EAAEJ,EAAEV,GAAG,OAAOE,GAAG,IAAI,IAAI,OAAOY,EAAET,cAAcQ,EAAER,cAAc,IAAI,IAAI,OAAO,IAAIS,EAAET,cAAcQ,EAAER,eAAeS,EAAEoF,WAAWrF,EAAEqF,WAAW,IAAI,IAAI,OAAO1F,KAAKC,MAAMT,EAAED,GAAG,IAAI,KAAK,CAAC,MAAMA,EAAEe,EAAEkF,UAAUnF,EAAEmF,UAAU,GAAGjG,EAAE,EAAE,CAAC,MAAMA,EAAE,IAAIK,KAAKS,EAAER,cAAcQ,EAAEqF,WAAW,EAAE,GAAGF,UAAU,OAAOlF,EAAEkF,UAAUjG,EAAEc,EAAEmF,SAAS,CAAC,OAAOjG,CAAC,CAAC,IAAI,KAAK,CAAC,MAAMA,EAAEe,EAAEoF,WAAWrF,EAAEqF,WAAW,OAAOnG,EAAE,EAAE,GAAGA,EAAEA,CAAC,CAAC,IAAI,KAAK,CAAC,MAAMA,EAAEI,EAAEW,GAAGX,EAAEU,GAAG,OAAOd,EAAE,EAAE,IAAIA,EAAEA,CAAC,EAAE,CAAC,SAAS6G,EAAE7G,EAAEC,GAAG,MAAMC,EAAEoB,EAAEtB,GAAGG,EAAEmB,EAAErB,GAAG,GAAGC,GAAGC,EAAE,OAAOM,KAAKG,OAAOV,EAAEW,UAAUV,EAAEU,WAAW,MAAM,CAAC,SAASiG,EAAE9G,GAAG,MAAMC,EAAEqB,EAAEtB,GAAG,GAAGC,EAAE,CAACA,EAAE8G,SAAS,EAAE,EAAE,GAAG9G,EAAE+G,QAAQ/G,EAAEgG,UAAU,GAAGhG,EAAEgH,UAAU,IAAI,MAAMjH,EAAE,IAAIK,KAAKJ,EAAEK,cAAc,EAAE,GAAG,OAAOG,KAAKyG,OAAOjH,EAAEY,UAAUb,EAAEa,WAAW,MAAM,GAAG,EAAE,CAAC,CAAC,SAASsG,EAAEnH,EAAEC,EAAEC,EAAEC,GAAG,MAAMC,EAAEkB,EAAEtB,GAAGc,EAAEQ,EAAErB,GAAG,GAAGG,GAAGU,EAAE,CAAC,MAAMd,OAAE,IAASE,EAAE0F,EAAE,GAAGA,EAAE1F,GAAGD,EAAEE,GAAG,GAAG,IAAI,IAAIH,EAAE,EAAEA,EAAEC,EAAEiB,OAAOlB,IAAI,CAAC,MAAME,EAAES,EAAEV,EAAED,IAAI,GAAGE,aAAakH,MAAM,KAAK,OAAOnH,EAAED,sBAAsBC,EAAED,GAAGE,CAAC,CAAC,MAAMa,GAAGD,EAAED,UAAUT,EAAES,WAAW,MAAM,EAAE,IAAII,EAAER,KAAKG,MAAMG,GAAG,MAAMK,EAAEhB,EAAE,IAAI,IAAIF,EAAE,EAAEA,EAAEa,EAAEb,IAAI,CAAC,MAAMA,GAAE,IAAKG,MAAMG,oBAAoB,EAAEY,EAAEiG,YAAYjG,EAAE6F,SAAS,IAAI9G,GAAE,EAAGD,IAAIF,EAAE,IAAIE,IAAIF,EAAE,KAAKG,GAAE,GAAI,IAAI,IAAIH,EAAE,EAAEA,EAAEC,EAAEiB,OAAOlB,IAAI,CAAC,MAAME,EAAED,EAAED,GAAG,GAAGE,EAAE+F,YAAY7E,EAAE6E,WAAW/F,EAAEiG,aAAa/E,EAAE+E,YAAYjG,EAAEI,gBAAgBc,EAAEd,cAAc,CAACH,GAAE,EAAG,KAAK,CAAC,CAACA,GAAGc,IAAIG,EAAE4F,QAAQ5F,EAAE6E,UAAU,EAAE,CAAC,OAAOhF,CAAC,CAAC,CAAC,SAASqG,EAAEtH,EAAEC,EAAEC,EAAEC,GAAG,MAAMC,EAAEkB,EAAEtB,GAAGiB,EAAEF,EAAEd,GAAG,GAAGG,GAAG,iBAAiBa,EAAE,CAAC,MAAMjB,OAAE,IAASE,EAAE0F,EAAE,GAAGA,EAAE1F,GAAGD,EAAEE,GAAG,GAAG,IAAI,IAAIH,EAAE,EAAEA,EAAEC,EAAEiB,OAAOlB,IAAI,CAAC,MAAME,EAAES,EAAEV,EAAED,IAAI,GAAGE,aAAakH,MAAM,KAAK,OAAOnH,EAAED,sBAAsBC,EAAED,GAAGE,CAAC,CAAC,IAAIa,EAAE,EAAE,KAAKA,EAAEE,GAAG,CAACb,EAAE4G,QAAQ5G,EAAE6F,UAAU,GAAG,MAAM/F,EAAEE,EAAE6G,SAAS,GAAG/G,IAAIF,EAAE,IAAIE,IAAIF,EAAE,GAAG,CAAC,IAAI,IAAIA,EAAE,EAAEA,EAAEC,EAAEiB,OAAOlB,IAAI,CAAC,MAAME,EAAED,EAAED,GAAG,GAAGE,EAAE+F,YAAY7F,EAAE6F,WAAW/F,EAAEiG,aAAa/F,EAAE+F,YAAYjG,EAAEI,gBAAgBF,EAAEE,cAAc,CAACS,IAAI,KAAK,CAAC,CAACA,GAAG,CAAC,CAAC,OAAOD,EAAEV,EAAE,CAAC,CAAC,SAASmH,EAAEvH,GAAG,OAAO,IAAI,IAAIK,KAAKL,EAAE,EAAE,IAAImG,UAAU,CAAC,SAASqB,EAAExH,EAAEC,EAAEC,EAAE,GAAG,MAAMC,EAAEmB,EAAEtB,GAAGI,EAAEkB,EAAErB,GAAG,GAAGE,GAAGC,EAAE,CAAC,IAAIJ,EAAEG,EAAE8F,UAAU,MAAMhG,EAAEE,EAAEgG,WAAW,EAAExF,EAAER,EAAEG,cAAc,IAAIQ,EAAEV,EAAE6F,UAAU,MAAMlF,EAAEX,EAAE+F,WAAW,EAAElF,EAAEb,EAAEE,cAAc,IAAIc,EAAE,IAAI,MAAMC,EAAEJ,EAAEN,EAAE,EAAEW,GAAG,IAAIjB,KAAKY,EAAE,EAAE,EAAE,GAAGJ,UAAU,IAAIR,KAAKM,EAAE,EAAE,GAAGE,WAAW,IAAI,GAAG,GAAG,GAAGQ,EAAE,OAAOnB,GAAG,KAAK,EAAE,OAAO,KAAKF,GAAG,KAAKc,GAAGd,EAAE,GAAGc,EAAE,IAAI,KAAKd,EAAEA,EAAE,GAAG,KAAKA,GAAG,KAAKc,IAAIA,EAAE,KAAKA,EAAE,GAAGC,EAAE,IAAIE,GAAGjB,EAAE,GAAGC,EAAE,IAAIU,IAAI,IAAI,KAAK,EAAE,OAAOA,IAAIM,GAAGN,EAAE,IAAIM,IAAIhB,EAAEc,GAAGd,IAAIc,GAAGf,GAAGc,KAAKH,IAAIM,GAAGsG,EAAE5G,IAAI,SAASX,EAAEC,GAAG,MAAMC,EAAEF,EAAEM,cAAcH,EAAE,IAAIE,KAAKH,EAAE,EAAE,GAAG,GAAGqH,EAAErH,IAAIF,EAAEG,GAAGF,GAAGE,EAAE,OAAM,EAAG,MAAMC,EAAEH,EAAEK,cAAcK,EAAE,IAAIN,KAAKD,EAAE,EAAE,GAAG,OAAOmH,EAAEnH,IAAIH,GAAGU,GAAGX,EAAEW,CAAC,CAApJ,CAAsJR,EAAEC,IAAI,IAAIW,GAAG,KAAKD,KAAKM,EAAE,KAAKyF,EAAEzG,EAAEqH,eAAetH,EAAEsH,gBAAgBrG,GAAGyF,EAAEzG,EAAEqH,eAAetH,EAAEsH,gBAAgBnG,EAAE,KAAK,EAAE,OAAOuF,EAAEzG,EAAEqH,eAAetH,EAAEsH,gBAAgB,IAAI,KAAK,EAAE,OAAOZ,EAAEzG,EAAEqH,eAAetH,EAAEsH,gBAAgB,IAAI,KAAK,EAAE,OAAO3G,EAAE,GAAGC,EAAE,IAAIE,GAAGjB,EAAE,GAAGC,EAAE,IAAIU,IAAI,IAAI,CAAC,CAAC,MAAM+G,EAAE,CAACC,KAAK9B,EAAE+B,KAAK9B,EAAE+B,IAAI7B,EAAE8B,MAAM5B,EAAE6B,KAAK3B,EAAE4B,KAAK3B,EAAE4B,OAAO1B,EAAE2B,OAAOzB,EAAE0B,IAAIxB,EAAEyB,QAAQxB,EAAEyB,UAAU,SAASrI,GAAG,GAAG,iBAAiBA,EAAG,OAAOc,EAAE,IAAIT,KAAK,IAAIA,KAAKL,GAAGyH,gBAAiB,EAAEa,KAAKzB,EAAE0B,QAAQ,SAASvI,EAAEC,EAAEC,EAAE,GAAG,MAAMC,EAAEmB,EAAEtB,GAAGI,EAAEkB,EAAErB,GAAG,GAAGE,GAAGC,EAAE,CAAC,MAAMJ,EAAEG,EAAEgG,WAAW,IAAIlG,EAAEU,EAAEG,EAAEV,EAAE+F,WAAW,GAAG9E,EAAEnB,GAAGD,EAAE,KAAKE,EAAE8F,UAAU,GAAG9F,EAAE8F,UAAUtF,EAAE,KAAKP,EAAE6F,UAAU,GAAG7F,EAAE6F,cAAc,CAAC,MAAM/F,EAAE,IAAIG,KAAKF,EAAEG,cAAcN,EAAE,EAAE,GAAGiG,UAAUlF,EAAE,IAAIV,KAAKD,EAAEE,cAAcQ,EAAE,EAAE,GAAGmF,UAAUhG,EAAEE,EAAE8F,YAAY/F,EAAE,GAAGC,EAAE8F,UAAU7F,EAAE6F,YAAYlF,EAAEd,EAAE,IAAIa,IAAIH,EAAE,GAAGA,EAAE,GAAGA,EAAEP,EAAE6F,SAAS,CAAC,OAAO,KAAK7F,EAAEE,cAAcH,EAAEG,eAAe,IAAIQ,EAAEd,IAAIW,EAAEV,EAAE,CAAC,EAAEuI,MAAM,SAASxI,EAAEC,GAAG,MAAMC,EAAEoB,EAAEtB,GAAGG,EAAEY,EAAEd,GAAG,GAAGC,GAAG,iBAAiBC,EAAE,OAAOD,EAAEuI,SAASvI,EAAEiG,WAAWhG,GAAGW,EAAEZ,EAAE,EAAEwI,QAAQ,SAAS1I,EAAEC,GAAG,MAAMC,EAAEoB,EAAEtB,GAAGG,EAAEY,EAAEd,GAAG,GAAGC,GAAG,iBAAiBC,EAAE,OAAOW,EAAE,IAAIT,KAAKH,EAAEI,cAAcJ,EAAEiG,WAAWhG,EAAE,EAAE,GAAG,EAAEwI,WAAW7B,EAAE8B,YAAY,SAAS5I,EAAEC,EAAEC,GAAG,OAAOiH,EAAEnH,EAAEC,EAAE,EAAEC,EAAE,EAAE,mBAAmBiH,EAAE0B,UAAU,SAAS7I,GAAG,GAAG,iBAAiBA,EAAE,CAAC,MAAMC,EAAED,EAAEsC,MAAM,KAAKpC,EAAED,EAAE,GAAGE,EAAEF,EAAE,GAAGqC,MAAM,KAAKlC,EAAE,IAAIC,KAAK,OAAOD,EAAE2G,UAAU5G,EAAE,IAAID,GAAG,OAAOA,EAAEyB,eAAevB,EAAE2G,SAAS3G,EAAEkG,WAAW,IAAIlG,EAAE0I,YAAY3I,EAAE,IAAIA,EAAE,IAAIC,EAAE2I,YAAY5I,EAAE,KAAK,KAAKC,EAAEkG,WAAW,GAAGlG,EAAEoG,aAAapG,EAAEsG,cAAc,KAAK,CAAC,EAAEsC,QAAQ,SAAShJ,EAAEC,EAAE,GAAG,MAAMC,EAAEoB,EAAEtB,GAAG,GAAG,KAAKC,EAAE,OAAO6G,EAAE7G,GAAG,MAAME,EAAEwF,EAAE1F,GAAGG,EAAE,IAAIC,KAAKH,EAAEI,cAAc,EAAE,GAAGK,EAAEP,EAAE6G,SAAS9G,EAAE,EAAE,EAAEW,EAAEV,EAAES,UAAU,GAAGJ,KAAKwI,IAAI7I,EAAE6G,SAAS9G,GAAG,GAAG,GAAG,IAAI,OAAOM,KAAKC,OAAOR,EAAEW,UAAUC,GAAG,MAAM,EAAE,GAAGH,CAAC,EAAEuI,QAAQ,SAASlJ,EAAEC,EAAE,GAAG,MAAMC,EAAEoB,EAAEtB,GAAGiH,SAAS,OAAOvB,EAAEzF,GAAGC,EAAE,EAAEiJ,QAAQ,SAASnJ,EAAEC,EAAEC,GAAG,OAAOoH,EAAEtH,EAAEC,EAAE,EAAEC,EAAE,EAAE,eAAeoH,EAAE8B,SAAS5B,GAAG,SAAS6B,EAAErJ,EAAEC,EAAEC,EAAEC,EAAE,EAAEC,EAAE,GAAG,MAAMO,EAAEY,EAAEvB,GAAGc,EAAES,EAAEtB,GAAGc,EAAEQ,EAAErB,GAAGe,EAAEM,EAAEpB,GAAG,IAAIiB,EAAE,GAAG,IAAIT,EAAES,GAAGL,EAAEE,GAAGH,MAAM,CAAC,MAAMd,EAAES,KAAK6I,IAAI,EAAE3I,EAAEG,GAAGM,EAAET,GAAGI,EAAEf,EAAEiB,IAAIjB,EAAE,GAAG,IAAII,IAAIgB,GAAG,EAAET,EAAE,CAAC,OAAOS,CAAC,CAAC,SAASmI,EAAEvJ,EAAEC,EAAEC,EAAEC,EAAE,EAAEC,EAAE,GAAG,MAAMO,EAAEY,EAAEvB,GAAGc,EAAES,EAAEtB,GAAGc,EAAEQ,EAAErB,GAAGe,EAAEM,EAAEpB,GAAG,IAAIiB,EAAE,GAAG,IAAIT,EAAE,CAAC,MAAMX,EAAES,KAAK6I,IAAI,EAAE3I,EAAEG,GAAG,OAAOM,EAAEH,EAAEjB,EAAEe,GAAGf,EAAE,GAAGW,EAAE,IAAIP,IAAIgB,EAAEH,EAAEjB,EAAEe,GAAG,EAAEJ,IAAIX,EAAE,GAAGW,IAAIS,CAAC,CAACA,EAAEH,EAAEF,EAAED,CAAC,CAAC,SAAS0I,EAAExJ,EAAEC,EAAEC,EAAEC,EAAEC,EAAE,EAAEO,EAAE,GAAG,MAAMG,EAAES,EAAEvB,GAAGe,EAAEQ,EAAErB,GAAGe,EAAEM,EAAEtB,GAAGmB,EAAEG,EAAEpB,GAAGkB,EAAEgI,EAAEvI,EAAEC,EAAEK,EAAEG,EAAEnB,GAAGO,GAAG,IAAIW,EAAE,OAAOA,EAAE,IAAIL,EAAE,IAAIN,EAAE,GAAGS,EAAE,IAAIT,EAAE4I,EAAEzI,EAAEG,EAAE,EAAEI,EAAED,EAAE,GAAGC,EAAEkI,EAAEzI,EAAEG,EAAE,EAAEI,EAAED,EAAE,GAAGE,EAAER,CAAC,CAAC,IAAI2I,EAAErG,OAAOC,OAAO,CAACC,UAAU,KAAKoG,QAAQ,SAAS1J,EAAEC,EAAEC,EAAEC,EAAEC,EAAE,EAAEO,EAAEG,EAAE,GAAG,MAAMC,EAAEO,EAAEtB,GAAGiB,EAAEK,EAAEpB,GAAGkB,EAAEG,EAAEpB,GAAGkB,EAAEE,EAAEnB,GAAGoB,EAAED,EAAEZ,GAAGiB,EAAEL,EAAET,GAAG,GAAG,IAAIU,EAAE,KAAK,mDAAmD,IAAI,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,GAAGoB,QAAQhB,GAAG,KAAK,YAAYd,oCAAoC,GAAGG,GAAGF,EAAE,KAAK,+CAA+C,OAAOM,EAAED,EAAEoG,EAAExH,EAAEE,EAAE0B,EAAE,EAAE+H,IAAIN,EAAEO,GAAGL,EAAEM,GAAG,SAAS7J,EAAEC,EAAEC,EAAEC,EAAEC,EAAE,IAAI,MAAMO,EAAEY,EAAEvB,GAAGc,EAAES,EAAEtB,GAAGc,EAAEQ,EAAErB,GAAGe,EAAEM,EAAEpB,GAAGiB,EAAEG,EAAEnB,GAAG,GAAGO,EAAE,GAAGG,EAAE,GAAGC,EAAE,GAAGE,EAAE,EAAE,KAAK,gCAAgC,IAAI,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,IAAI2B,QAAQxB,GAAG,KAAK,YAAYhB,qCAAqC,GAAGa,EAAEF,EAAE,KAAK,qCAAqC,GAAGD,GAAGH,EAAE,OAAO,EAAE,MAAMU,IAAI,EAAEZ,KAAK6I,IAAIxI,EAAEH,EAAE,EAAEI,IAAI0D,QAAQ,GAAGnD,EAAEX,EAAEU,EAAED,EAAE,GAAG,IAAII,EAAEF,EAAEM,EAAE,EAAE,MAAME,EAAE3B,IAAIY,EAAEA,EAAE,EAAEZ,EAAE,IAAI,IAAIH,EAAE,EAAEA,IAAI8B,EAAE9B,IAAI4B,GAAGjB,EAAEa,GAAGH,EAAEG,GAAGI,EAAE,OAAO,IAAIzB,EAAEmB,EAAEnB,IAAIY,GAAGJ,EAAEa,GAAGH,EAAEO,CAAC,EAAEkI,IAAI,SAAS9J,EAAEC,EAAEC,EAAEC,EAAEC,EAAE,GAAG,MAAMO,EAAEY,EAAEvB,GAAGc,EAAES,EAAEtB,GAAGc,EAAEQ,EAAErB,GAAGe,EAAEM,EAAEpB,GAAGiB,EAAEG,EAAEnB,GAAG,GAAGO,EAAE,GAAGG,EAAE,GAAGC,EAAE,GAAGE,EAAE,GAAGG,EAAE,EAAE,KAAK,gCAAgC,GAAGH,EAAEF,EAAE,KAAK,qCAAqC,GAAGD,GAAGH,EAAE,OAAO,EAAE,IAAIU,EAAE,EAAEC,EAAE,EAAE,IAAI,IAAItB,EAAE,EAAEA,IAAIG,EAAEH,IAAIsB,EAAEb,KAAKsJ,IAAI3I,EAAEL,GAAGJ,EAAEU,GAAGV,EAAEG,EAAEO,GAAGA,GAAGC,EAAE,OAAOA,CAAC,EAAE0I,OAAO,SAAShK,EAAEC,EAAE,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,CAAC,GAAGA,GAAG,EAAE,MAAM,IAAID,EAAEuE,QAAQtE,KAAK,MAAMH,EAAES,KAAK6I,IAAI,IAAInJ,GAAG,MAAM,IAAIM,KAAKsF,MAAM7F,EAAEF,GAAGA,CAAC,CAAC,EAAEiK,SAAS,SAASjK,EAAEC,GAAG,MAAMC,EAAEqB,EAAEvB,GAAG,IAAIG,EAAEoB,EAAEtB,GAAG,GAAGE,EAAE,EAAE,KAAK,8BAA8B,GAAGA,GAAG,GAAGA,EAAE,EAAE,KAAK,0BAA0BA,EAAE+J,SAAS,GAAG/J,IAAI,IAAI,IAAIC,EAAE8J,SAAS,GAAGlK,IAAI,IAAII,GAAGF,EAAE,EAAEO,KAAK6I,IAAI,GAAG7I,KAAKyG,KAAKzG,KAAK0J,IAAIhK,GAAGM,KAAK2J,OAAOjK,EAAE,MAAMQ,EAAEF,KAAK6I,IAAI,GAAG7I,KAAKyG,KAAKzG,KAAK0J,IAAIhK,GAAGM,KAAK4J,KAAK,GAAG,OAAOjK,EAAEK,KAAKG,MAAMR,EAAEO,GAAGA,EAAEP,CAAC,EAAEkK,SAAS,SAAStK,EAAEC,GAAG,MAAMC,EAAEqB,EAAEvB,GAAG,IAAIG,EAAEoB,EAAEtB,GAAG,GAAGE,EAAE,EAAE,KAAK,8BAA8B,GAAGA,GAAG,GAAGA,EAAE,EAAE,KAAK,0BAA0BA,EAAE+J,SAAS,GAAG/J,IAAI,IAAI,IAAIC,EAAE8J,SAAS,GAAGlK,IAAI,IAAI,OAAOI,GAAGF,EAAE,EAAEO,KAAK6I,IAAI,IAAI7I,KAAKyG,KAAKzG,KAAK0J,IAAIhK,GAAGM,KAAK2J,OAAOjK,EAAEC,CAAC,EAAEmK,OAAO,SAASvK,EAAEC,GAAG,MAAMC,EAAEqB,EAAEvB,GAAG,IAAIG,EAAEoB,EAAEtB,GAAG,GAAGC,GAAG,EAAE,KAAK,4CAA4C,GAAGC,EAAE,EAAE,KAAK,gCAAgC,OAAOA,EAAE+J,SAAS,GAAG/J,IAAI,IAAIM,KAAK6I,IAAI,EAAEpJ,EAAEC,EAAEA,GAAG,CAAC,EAAEqK,WAAW,SAASxK,EAAEC,GAAG,MAAMC,EAAEqB,EAAEvB,GAAGG,EAAEF,EAAEwF,KAAKzF,GAAGuB,EAAEvB,KAAKI,EAAED,EAAEe,OAAO,IAAIP,EAAET,EAAE,IAAI,IAAIF,EAAE,EAAEA,EAAEI,EAAEJ,IAAIW,GAAG,EAAER,EAAEH,GAAG,OAAOW,CAAC,EAAE8J,IAAI,SAASzK,EAAEC,EAAE,GAAG,MAAMC,EAAEe,EAAEjB,GAAGyF,KAAKzF,GAAGuB,EAAEvB,KAAK,IAAIG,EAAEoB,EAAEtB,GAAG,MAAMG,EAAE,SAASJ,EAAEC,EAAEC,GAAG,MAAMC,EAAED,EAAE,EAAE,IAAIE,EAAEJ,EAAE,GAAG,IAAI,IAAIE,EAAE,EAAEA,EAAEF,EAAEkB,OAAOhB,IAAIE,GAAGJ,EAAEE,GAAGO,KAAK6I,IAAInJ,GAAGF,EAAEC,GAAGD,EAAE,IAAI,KAAK,OAAOG,CAAC,EAAEO,EAAE,SAASX,EAAEC,EAAEC,GAAG,MAAMC,EAAED,EAAE,EAAE,IAAIE,EAAE,EAAE,IAAI,IAAIF,EAAE,EAAEA,EAAEF,EAAEkB,OAAOhB,IAAI,CAAC,MAAMS,GAAGV,EAAEC,GAAGD,EAAE,IAAI,IAAIG,GAAGO,EAAEX,EAAEE,GAAGO,KAAK6I,IAAInJ,EAAEQ,EAAE,EAAE,CAAC,OAAOP,CAAC,EAAEU,EAAE,GAAG,IAAIC,GAAE,EAAGK,GAAE,EAAG,IAAI,IAAIpB,EAAE,EAAEA,EAAEE,EAAEgB,OAAOlB,IAAIc,EAAEd,GAAG,IAAIA,EAAE,EAAEc,EAAEd,EAAE,GAAG,IAAIE,EAAEF,GAAG,IAAIe,GAAE,GAAIb,EAAEF,GAAG,IAAIoB,GAAE,GAAI,IAAIL,IAAIK,EAAE,KAAK,2EAA2EjB,OAAE,IAASF,EAAE,GAAGE,EAAE,IAAIkB,EAAEC,EAAEE,EAAEI,EAAEzB,EAAE2B,GAAE,EAAG,GAAGN,EAAEpB,EAAEF,EAAEY,EAAEc,GAAGP,EAAEO,EAAEJ,EAAEb,EAAET,EAAEY,EAAEc,GAAGN,EAAEb,KAAKwI,IAAI5H,EAAEO,GAAGA,EAAEP,EAAES,EAAER,EAAE,OAAOb,KAAKwI,IAAIzH,GAAG,YAAYM,GAAG,OAAOF,CAAC,EAAE8I,KAAKlB,EAAEmB,MAAM,SAAS3K,EAAEC,EAAEC,EAAEC,GAAG,MAAMC,EAAEmB,EAAEvB,GAAGW,EAAEY,EAAEtB,GAAGa,EAAES,EAAErB,GAAG,OAAOqB,EAAEpB,GAAGC,GAAGO,EAAEG,EAAE,EAAE,EAAE8J,IAAI,YAAY5K,GAAG,MAAMC,EAAEgB,EAAEjB,GAAGyF,KAAKzF,GAAGuB,EAAEvB,KAAKE,EAAEqB,EAAEtB,EAAE,IAAI,IAAIE,EAAE,EAAE,IAAI,IAAIH,EAAE,EAAEA,EAAEC,EAAEiB,OAAOlB,IAAIG,GAAGF,EAAED,GAAGS,KAAK6I,IAAI,EAAEpJ,EAAEF,GAAG,OAAOG,CAAC,EAAE0K,QAAQ,SAAS7K,EAAEC,GAAG,MAAMC,EAAEqB,EAAEvB,GAAG,IAAIG,EAAEoB,EAAEtB,GAAG,GAAGC,GAAG,EAAE,KAAK,4CAA4C,GAAGC,EAAE,EAAE,KAAK,gCAAgC,OAAOA,EAAE+J,SAAS,GAAG/J,IAAI,KAAKM,KAAK6I,IAAIpJ,EAAE,EAAE,EAAEC,GAAG,GAAGA,CAAC,EAAE2K,KAAK,SAAS9K,EAAEC,EAAEC,EAAEC,EAAE,EAAEC,EAAE,GAAG,MAAMO,EAAEY,EAAEvB,GAAGc,EAAES,EAAEtB,GAAGc,EAAEQ,EAAErB,GAAGe,EAAEM,EAAEpB,GAAGiB,EAAEG,EAAEnB,GAAGiB,EAAEP,GAAG,EAAEH,EAAES,GAAGH,EAAEN,EAAEW,EAAEP,EAAEJ,EAAEG,GAAG,EAAEH,EAAES,GAAG,OAAOX,KAAK0J,IAAI9I,EAAEC,GAAGb,KAAK0J,IAAI,EAAExJ,EAAE,EAAEoK,UAAU,SAAS/K,EAAEC,EAAEC,GAAG,MAAMC,EAAEoB,EAAEvB,GAAGI,EAAEmB,EAAEtB,GAAGU,EAAEY,EAAErB,GAAG,GAAGC,GAAG,EAAE,KAAK,4CAA4C,OAAOM,KAAK0J,IAAIxJ,GAAGF,KAAK0J,IAAI/J,IAAIK,KAAK0J,IAAI,EAAEhK,EAAE,EAAE6K,KAAK,SAAShL,EAAEC,EAAEC,EAAEC,EAAEC,EAAE,EAAEO,EAAE,GAAG,MAAMG,EAAES,EAAEvB,GAAGe,EAAEQ,EAAEtB,GAAGgB,EAAEM,EAAErB,GAAGkB,EAAEG,EAAEpB,GAAGkB,EAAEE,EAAEnB,GAAGkB,EAAEC,EAAEZ,GAAG,OAAO0I,EAAEvI,EAAEG,EAAEG,EAAEC,EAAEC,GAAGkI,EAAE1I,EAAEC,EAAEE,EAAEG,EAAEC,EAAEC,EAAE,EAAE2J,GAAG,SAASjL,EAAEC,EAAEC,EAAEC,EAAE,EAAEC,EAAE,GAAG,MAAMO,EAAEY,EAAEvB,GAAGc,EAAES,EAAEtB,GAAGc,EAAEQ,EAAErB,GAAGe,EAAEM,EAAEpB,GAAGiB,EAAEG,EAAEnB,GAAG,OAAO,IAAIO,GAAGI,EAAED,EAAEG,IAAI,EAAER,KAAK6I,IAAI,EAAE3I,EAAEG,IAAIH,EAAEI,GAAG,EAAEJ,EAAES,GAAGH,GAAGR,KAAK6I,IAAI,EAAE3I,EAAEG,EAAE,EAAEoK,IAAI,SAASlL,EAAEC,EAAEC,EAAEC,GAAG,MAAMC,EAAEmB,EAAEvB,GAAGW,EAAEY,EAAEtB,GAAGa,EAAES,EAAErB,GAAG,OAAOE,EAAEO,IAAIG,EAAES,EAAEpB,GAAG,GAAG,GAAGW,GAAGA,EAAE,GAAG,EAAEqK,WAAW,SAASnL,EAAEC,EAAEC,GAAG,MAAMC,EAAEmB,EAAEtB,GAAGI,EAAEkB,EAAErB,GAAGU,EAAEY,EAAErB,GAAG,GAAG,iBAAiBS,GAAGP,EAAED,EAAG,OAAO,KAAK,EAAEQ,EAAEF,KAAKG,OAAOR,EAAES,UAAUV,EAAEU,WAAW,OAAO,IAAK,EAAEuK,WAAW,SAASpL,EAAEC,EAAEC,GAAG,MAAMC,EAAEmB,EAAEtB,GAAGI,EAAEkB,EAAErB,GAAGU,EAAEY,EAAErB,GAAG,GAAG,iBAAiBS,GAAGP,EAAED,EAAG,OAAO,IAAIQ,GAAGA,EAAE,IAAIF,KAAKG,OAAOR,EAAES,UAAUV,EAAEU,WAAW,MAAO,IAAS,MAA+DwK,EAAG,CAAC,EAAE,SAAS,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAgD,SAASC,GAAGtL,EAAEC,EAAEC,GAAG,OAAOA,EAAE,GAAGD,EAAE,GAAGD,EAAE,IAAI,CAAC,SAASuL,GAAGvL,GAAG,MAAM,CAACA,EAAE,WAAWA,GAAG,GAAGA,EAAE,OAAO,SAASA,GAAG,EAAE,KAAK,GAAGA,EAAE,CAAC,SAASwL,GAAGxL,GAAG,OAAOA,EAAE,WAAWA,GAAG,GAAGA,EAAE,OAAO,QAAQ,CAAiC,SAASyL,GAAGzL,GAAG,OAAO,GAAGA,CAAC,CAAC,SAAS0L,GAAG1L,EAAEC,EAAEC,GAAG,MAAMC,EAAEC,GAAGmL,GAAGvL,IAAIW,EAAEG,GAAGyK,GAAGtL,GAAGc,EAAEJ,EAAER,EAAEc,EAAEH,EAAEV,EAAE,IAAI,IAAIH,EAAE,EAAEA,GAAGc,EAAEd,IAAI,IAAI,IAAIE,EAAE,EAAEA,GAAGc,EAAEd,IAAID,EAAEF,EAAE,GAAGG,EAAE,KAAKF,EAAE,GAAG,CAAC,SAAS0L,GAAG3L,EAAEC,EAAEC,EAAEC,GAAG,IAAIC,EAAE,EAAE,IAAI,IAAIO,EAAE,EAAEA,EAAET,EAAES,IAAI,IAAI,IAAIT,EAAE,EAAEA,EAAED,EAAEC,IAAIC,EAAEH,EAAE,GAAGE,EAAE,KAAKS,EAAE,GAAGP,GAAGA,GAAG,CAAC,SAASwL,GAAG5L,EAAEC,GAAG,MAAMC,EAAEF,EAAE6L,KAAK1L,EAAEH,EAAE8L,OAAO,IAAI1L,EAAEO,EAAEG,EAAEC,EAAEE,EAAEG,EAAE,GAAG,MAAMC,EAAEnB,EAAEgB,OAAO,IAAI,IAAII,EAAE,EAAEA,EAAED,EAAEC,GAAG,EAAG,OAAOpB,EAAEoB,IAAI,KAAK,EAAE,CAAC,IAAInB,EAAE,IAAID,EAAEoB,EAAE,KAAKnB,EAAEF,EAAE8L,SAASN,GAAGvL,EAAEoB,EAAE,MAAMF,GAAG4K,GAAG7L,GAAGH,EAAE8L,OAAO5I,OAAOhD,EAAEoB,EAAE,GAAGpB,EAAEoB,EAAE,KAAK,IAAI,KAAK,CAAC,KAAK,GAAGlB,EAAEU,EAAEG,GAAGsK,GAAGrL,EAAEoB,EAAE,IAAIrB,EAAEyH,IAAIzG,GAAG,IAAIf,EAAEoB,EAAE,KAAKF,GAAG4K,GAAG/L,EAAE8L,SAAS9K,IAAI,KAAKG,GAAG6K,GAAG7L,EAAEU,EAAEZ,EAAEoB,EAAE,IAAI,MAAM,KAAK,EAAEF,GAAGjB,EAAE+C,OAAOhD,EAAEoB,EAAE,GAAGpB,EAAEoB,EAAE,IAAIK,cAAc,MAAM,KAAK,GAAGvB,EAAEU,EAAEG,GAAGsK,GAAGrL,EAAEoB,EAAE,KAAKX,EAAEI,GAAGwK,GAAGrL,EAAEoB,EAAE,IAAIrB,EAAEyH,IAAIzG,GAAG,IAAIf,EAAEoB,EAAE,KAAKF,GAAG4K,GAAG/L,EAAE8L,SAAS9K,IAAI,KAAKG,GAAG6K,GAAG7L,EAAEU,EAAEZ,EAAEoB,EAAE,IAAIF,GAAG,IAAIA,GAAG6K,GAAGtL,EAAEI,EAAEb,EAAEoB,EAAE,IAAI,MAAM,KAAK,EAAE,MAAM,KAAK,EAAEF,GAAG,KAAKjB,EAAE+C,OAAOhD,EAAEoB,EAAE,GAAGpB,EAAEoB,EAAE,IAAI,KAAK,MAAM,KAAK,EAAEF,GAAG,QAAQ,MAAM,KAAK,EAAEA,GAAG,IAAIjB,EAAE+C,OAAOhD,EAAEoB,EAAE,GAAGpB,EAAEoB,EAAE,IAAI,IAAI,MAAM,KAAK,GAAG,CAACF,GAAG,IAAI,MAAMpB,EAAEE,EAAEoB,EAAE,GAAGrB,EAAEC,EAAEoB,EAAE,GAAGA,GAAG,EAAE,IAAI,IAAIlB,EAAE,EAAEA,EAAEH,EAAEG,IAAI,CAAC,IAAI,IAAIH,EAAE,EAAEA,EAAED,EAAEC,IAAI,CAACA,EAAE,IAAImB,GAAG,KAAK,MAAMpB,EAAEE,EAAEoB,GAAG,IAAItB,EAAEoB,GAAG,IAAIjB,EAAE+C,OAAOhD,EAAEoB,EAAE,GAAGpB,EAAEoB,EAAE,IAAI,IAAI,KAAKtB,IAAIoB,GAAGjB,EAAE+C,OAAOhD,EAAEoB,EAAE,GAAGpB,EAAEoB,EAAE,KAAKA,GAAG,CAAC,CAAClB,EAAEH,EAAE,IAAImB,GAAG,IAAI,CAACE,GAAG,EAAEF,GAAG,IAAI,KAAK,CAAC,QAAQA,GAAGjB,EAAE+C,OAAOhD,EAAEoB,EAAE,GAAGpB,EAAEoB,EAAE,IAAK,OAAOF,CAAC,CAAC,SAAS6K,GAAGjM,EAAEC,EAAEC,GAAG,IAAIC,EAAE,GAAG,EAAED,IAAIC,GAAG,KAAK,IAAIC,EAAE,GAAG,IAAIH,GAAG,EAAEA,EAAE,GAAG,CAAC,IAAID,EAAEC,EAAE,GAAG,IAAID,IAAIA,EAAE,IAAII,EAAE6D,OAAOC,aAAa,GAAGlE,GAAGI,EAAEH,GAAGA,EAAED,GAAG,EAAE,CAAC,OAAOG,GAAGC,EAAE,EAAEF,IAAIC,GAAG,KAAKA,GAAGH,EAAE,EAAEG,CAAC,CAAC,SAAS6L,GAAGhM,GAAG,OAAO,IAAIA,EAAE4C,QAAQ,KAAK,IAAI5C,KAAKA,CAAC,CAAC,IAAIkM,GAAG,SAASC,GAAGnM,GAAG,OAAOA,GAAG,GAAG,CAAC,SAASoM,GAAGpM,GAAG,OAAOA,GAAG,IAAIA,GAAG,IAAI,IAAIA,GAAG,KAAKA,GAAG,KAAKA,GAAG,KAAKA,EAAEA,EAAE,GAAG,CAAC,SAASqM,GAAGrM,GAAG,OAAOA,GAAG,EAAE,CAAC,SAASsM,GAAGtM,GAAG,MAAMC,EAAED,EAAEqE,WAAW,GAAG,OAAOpE,GAAG,IAAIA,GAAG,EAAE,CAAC,SAASsM,GAAGvM,EAAEC,GAAG,IAAIC,EAAE,GAAGD,IAAIC,EAAEF,EAAEqE,WAAWpE,SAASC,GAAG,IAAIA,GAAG,IAAI,OAAOD,CAAC,CAAC,SAASuM,GAAGxM,EAAEC,GAAG,IAAIC,EAAE,GAAGA,EAAEF,IAAIC,SAAS,MAAMC,GAAG,OAAOD,CAAC,CAAC,SAASwM,GAAGzM,GAAG,MAAM,MAAMA,GAAG,OAAOA,GAAG,OAAOA,GAAG,OAAOA,CAAC,CAAC,SAAS0M,GAAG1M,EAAEC,GAAG,IAAIC,EAAE,GAAGA,EAAEF,IAAIC,SAASwM,GAAGvM,IAAI,OAAOD,CAAC,CAAC,SAAS0M,GAAG3M,EAAEC,GAAG,GAAG,MAAMD,EAAEC,GAAG,CAAC,MAAMC,EAAEF,EAAEC,EAAE,GAAG,MAAMC,GAAG,MAAMA,GAAGD,GAAG,KAAK,MAAMD,EAAEC,IAAI,MAAMD,EAAEC,EAAE,IAAIA,IAAI,OAAOA,EAAE,CAAC,CAAC,SAAS2M,GAAG5M,EAAEC,EAAEC,GAAG,MAAMC,EAAEH,EAAEkB,OAAO,IAAId,GAAE,EAAGO,EAAEV,EAAEa,GAAE,EAAGC,GAAE,EAAGE,GAAE,EAAGG,EAAE,EAAE,KAAKT,EAAER,EAAEQ,IAAI,CAAC,MAAMV,EAAED,EAAEW,GAAG,GAAG,MAAMV,GAAG,IAAIa,EAAE,CAACG,GAAE,EAAG,MAAMjB,EAAEC,EAAEoE,WAAW,GAAG,GAAG+H,GAAGpM,GAAG,CAACmM,GAAGnM,GAAGqM,GAAGrM,KAAKe,GAAE,GAAIX,GAAE,EAAG,GAAGgB,GAAGA,IAAI,QAAQ,CAAC,GAAGkL,GAAGrM,GAAG,CAAC,GAAGmB,GAAGA,IAAI,QAAQ,CAAC,KAAK,MAAM,CAAC,GAAGH,EAAE,MAAM,GAAGH,EAAE,CAACH,IAAI,KAAK,CAACG,GAAE,CAAE,CAAC,CAAC,MAAMO,EAAErB,EAAEW,GAAG,IAAIW,EAAErB,EAAEsB,EAAEZ,EAAEV,EAAE,OAAOa,IAAIS,GAAG,GAAG,MAAMvB,EAAEW,EAAE,GAAG,EAAE,GAAGY,EAAE,IAAIA,EAAE,GAAGD,IAAIpB,EAAE,GAAG,IAAIA,IAAI,MAAMmB,GAAGjB,EAAE,IAAIgB,EAAElB,EAAE,GAAGA,EAAE,EAAEa,IAAImL,IAAG,IAAK,MAAM7K,EAAEnB,EAAE,MAAMF,EAAEsB,GAAG,EAAE,EAAE,MAAMD,GAAG,SAASrB,EAAEC,EAAEC,GAAG,MAAMC,EAAEH,EAAEkD,OAAOjD,EAAEC,GAAG,OAAOC,EAAEwB,gBAAgBxB,CAAC,CAAhE,CAAkEH,EAAEsB,EAAEC,KAAK2K,IAAG,GAAIhM,EAAE,GAAG,MAAMmB,GAAG,MAAMrB,EAAEW,EAAE,GAAGT,EAAE,EAAE,IAAIkB,GAAGhB,GAAGF,EAAE,EAAEa,IAAImL,IAAG,IAAKhM,EAAE,GAAG,CAACoB,EAAEC,EAAEZ,EAAET,EAAE,CAAC,SAAS2M,GAAG7M,EAAEC,EAAEC,GAAG,IAAIC,EAAE,EAAEC,EAAE,EAAEO,EAAE,EAAEG,EAAE,EAAEC,EAAE,EAAEE,GAAE,EAAG,IAAI,IAAIjB,EAAEC,EAAEiB,OAAO,EAAElB,GAAG,EAAEA,IAAI,CAAC,MAAME,EAAED,EAAED,GAAGqE,WAAW,GAAG,KAAKnE,EAAEA,EAAE,IAAIE,IAAIF,EAAE,IAAIS,EAAEA,GAAG,KAAKM,IAAIN,EAAE,EAAER,EAAEC,EAAEA,EAAE,EAAEa,GAAE,EAAGH,GAAG,GAAGV,IAAIF,GAAGA,EAAE,GAAG,GAAG,KAAKS,EAAEA,GAAG,IAAII,GAAGD,CAAC,CAACV,EAAE,KAAKJ,EAAEsF,KAAK,EAAE,EAAE,GAAGtF,EAAEsF,KAAK,EAAEgG,GAAGnL,EAAE,EAAEC,EAAE,EAAEF,GAAGa,EAAE,CAAC,SAAS+L,GAAG9M,EAAEC,GAAG,MAAMC,EAAE,GAAGgM,IAAG,EAAG,IAAI/L,GAAG,EAAEC,GAAG,EAAEO,EAAE,EAAE,IAAI,IAAII,EAAE,EAAEA,EAAEf,EAAEkB,OAAOH,IAAI,CAAC,MAAME,EAAEjB,EAAEe,GAAG,GAAGX,GAAG,EAAE,CAAC,GAAG,KAAKa,EAAE,CAAC,MAAMjB,EAAEE,EAAEE,EAAE,IAAI,EAAEH,EAAEC,EAAEE,EAAE,GAAGO,EAAEX,EAAEC,EAAEQ,KAAKG,MAAMX,IAAI,GAAGC,EAAEoF,KAAK,EAAE,EAAE,GAAGlF,GAAG,CAAC,MAAM,GAAG,MAAMa,EAAE,CAAC,MAAMhB,EAAEuM,GAAGxM,EAAEe,GAAGA,IAAIb,EAAEoF,KAAK,EAAEvE,EAAEd,EAAEc,GAAGJ,IAAII,EAAEd,CAAC,MAAM,GAAG,MAAMgB,EAAE,CAAC,MAAMhB,EAAEsM,GAAGvM,EAAEe,EAAE,GAAGb,EAAEoF,KAAK,GAAGvE,EAAEd,EAAEc,GAAGJ,IAAII,EAAEd,EAAE,CAAC,MAAM,GAAGqM,GAAGrL,GAAG,CAAC,MAAMhB,EAAEsM,GAAGvM,EAAEe,GAAGb,EAAEoF,KAAK,GAAGvE,EAAEd,EAAEc,GAAGJ,IAAII,EAAEd,EAAE,CAAC,KAAK,MAAMgB,GAAG,OAAOA,GAAG,MAAMA,IAAI,MAAMA,EAAEf,EAAEE,EAAE,IAAI,EAAEF,EAAEoF,KAAK,EAAE,EAAE,IAAI,QAAQ,CAAC,GAAG,KAAKrE,EAAE,CAACd,GAAG,GAAGD,EAAEoF,KAAK,EAAEnF,EAAE,EAAEY,EAAEZ,EAAE,GAAGA,GAAG,GAAGA,EAAEY,EAAE,QAAQ,CAAC,GAAGZ,GAAG,EAAE,SAAS,GAAG,KAAKc,EAAE,CAAC,GAAG,KAAKjB,EAAEe,EAAE,GAAG,CAAC,MAAMd,EAAEE,EAAEC,GAAGwM,GAAG5M,EAAEe,EAAE,EAAE,GAAGb,EAAEoF,KAAK,EAAErF,EAAEE,GAAGY,EAAEX,EAAE,EAAE,EAAE,QAAQ,CAACA,EAAEF,EAAEgB,OAAOP,EAAE,EAAET,EAAEoF,KAAK,GAAG,EAAE,GAAG,QAAQ,CAAC,GAAG,KAAKrE,KAAKH,EAAEG,EAAEoD,WAAW,KAAK,IAAIvD,GAAG,IAAI,IAAIA,GAAG,KAAKA,GAAG,KAAKA,EAAEA,EAAE,KAAK,CAAC,IAAIX,GAAGC,EAAEO,EAAEG,EAAEG,GAAG2L,GAAG5M,EAAEe,EAAE,GAAG,MAAMK,EAAElB,EAAEgB,OAAO,GAAG,IAAID,GAAG,IAAIA,GAAG,IAAIf,EAAEA,EAAEgB,OAAO,GAAGf,EAAEF,EAAEyH,EAAExH,EAAEoF,KAAKrE,EAAEb,EAAEO,OAAO,CAAC,MAAMG,EAAE,MAAMd,EAAEI,EAAE,GAAG,EAAE,EAAEW,EAAEb,EAAEkB,EAAE,GAAGC,EAAEnB,EAAEkB,EAAE,GAAGjB,EAAEF,EAAE8M,KAAK/M,EAAEkD,OAAOnC,EAAEM,SAAI,IAASlB,IAAID,EAAEoF,KAAK,EAAE,EAAE,GAAGnF,EAAE,GAAGD,EAAEoF,KAAKrE,EAAEb,EAAEiB,EAAE,EAAEP,EAAE,EAAEH,EAAEU,EAAE,EAAEP,EAAE,EAAE,CAAC,GAAGC,EAAED,EAAE,EAAE,IAAIG,EAAEhB,EAAE+M,KAAK9M,EAAEF,EAAEC,QAAQ,GAAG,IAAIgB,EAAE,CAAC,MAAMhB,EAAEC,EAAEgB,OAAO,GAAG2L,GAAG3M,EAAEF,EAAEkD,OAAO9C,EAAEO,GAAGR,IAAIC,EAAEO,EAAEG,EAAEG,GAAG2L,GAAG5M,EAAEe,EAAE,EAAE,GAAG,IAAIE,KAAKb,EAAEO,EAAEG,EAAEG,GAAG2L,GAAG5M,EAAEc,EAAE,EAAE,IAAI,IAAIG,EAAE,CAACf,EAAED,EAAE,GAAG,EAAE,QAAQ,CAAC4M,GAAG3M,EAAEF,EAAEkD,OAAO9C,EAAEO,GAAGR,GAAG,MAAMiB,EAAElB,EAAED,EAAE,GAAGoB,EAAEnB,EAAED,EAAE,IAAImB,EAAEC,GAAGmK,GAAGpK,GAAGoK,GAAGnK,MAAMnB,EAAED,EAAE,GAAGoB,EAAEnB,EAAED,EAAE,GAAGmB,GAAGlB,EAAED,EAAE,IAAIU,EAAE,EAAEI,EAAED,EAAE,CAAC,MAAM,IAAIG,EAAE4L,GAAG3M,EAAEF,EAAEkD,OAAO9C,EAAEO,GAAGR,GAAG,IAAIc,GAAG,IAAIA,GAAGF,IAAI,QAAQ,CAAC,GAAG0L,GAAGxL,GAAG,CAAC,MAAMhB,EAAEyM,GAAG1M,EAAEe,GAAGb,EAAEoF,KAAK,GAAGvE,EAAEd,EAAEc,GAAGA,EAAEd,EAAE,EAAE,QAAQ,CAAC,GAAGqM,GAAGrL,GAAG,CAAC,MAAMhB,EAAEsM,GAAGvM,EAAEe,GAAGb,EAAEoF,KAAK,GAAGvE,EAAEd,EAAEc,GAAGA,EAAEd,EAAE,EAAE,QAAQ,CAAC,MAAMmB,EAAEuL,GAAG3M,EAAEe,GAAGb,EAAEoF,KAAK,GAAGvE,EAAEK,EAAEL,GAAGA,EAAEK,EAAE,CAAC,CAAC,IAAIN,EAAE,MAAMC,EAAE,CAAC8K,KAAK3L,EAAE4L,OAAO9L,EAAEiN,KAAK,KAAKC,OAAO,EAAEC,SAAS,MAAM,OAAOjB,KAAKnL,EAAE+K,OAAOF,GAAG7K,EAAEd,IAAIc,CAAC,CAAC,SAASqM,GAAGpN,GAAG,MAAM,eAAekD,OAAO,EAAE,GAAGlD,EAAEkB,OAAO,CAAC,MAAMmM,GAAG,CAAC,IAAI,IAAI,IAAI,KAAK,SAASC,GAAGtN,EAAEC,GAAG,MAAMC,EAAE,SAASF,EAAEC,GAAG,MAAMC,EAAEF,EAAE6L,KAAK1L,EAAEH,EAAE8L,OAAO,IAAI1L,EAAE,GAAGO,EAAE,EAAE,MAAMG,EAAE,GAAGC,EAAEb,EAAEgB,OAAO,IAAI,IAAID,EAAE,EAAEA,EAAEF,EAAEE,GAAG,EAAG,OAAOf,EAAEe,IAAI,KAAK,EAAEb,GAAG,UAAUD,EAAE+C,OAAOhD,EAAEe,EAAE,GAAGf,EAAEe,EAAE,IAAIU,kBAAkB,MAAM,KAAK,EAAEvB,GAAG,IAAID,EAAE+C,OAAOhD,EAAEe,EAAE,GAAGf,EAAEe,EAAE,IAAI,IAAI,MAAM,KAAK,EAAEb,GAAG,UAAUD,EAAE+C,OAAOhD,EAAEe,EAAE,GAAGf,EAAEe,EAAE,QAAQ,MAAM,KAAK,EAAE,KAAK,EAAE,CAAC,IAAIjB,EAAEC,EAAE,GAAG,KAAKC,EAAEe,EAAE,GAAGjB,EAAEiB,EAAE,EAAE,KAAKf,EAAEe,EAAE,IAAI,KAAKf,EAAEe,EAAE,KAAKjB,EAAEiB,EAAE,GAAG,KAAKf,EAAEe,EAAE,GAAGhB,EAAEgB,EAAE,EAAE,KAAKf,EAAEe,EAAE,IAAI,KAAKf,EAAEe,EAAE,KAAKhB,EAAEgB,EAAE,GAAGjB,GAAGC,EAAE,CAAC,MAAMU,EAAEX,EAAEG,EAAED,EAAEF,EAAE,IAAI,KAAKc,EAAEb,EAAEE,EAAED,EAAED,EAAE,IAAI,KAAK,GAAG,KAAKU,GAAG,KAAKG,EAAE,CAACV,GAAG,UAAUF,EAAEe,EAAE,6BAA6Bf,EAAEe,EAAE,OAAO,KAAK,CAAC,IAAI,GAAGoM,GAAGzK,QAAQjC,KAAK,GAAG0M,GAAGzK,QAAQ9B,GAAG,CAACV,GAAG,UAAUF,EAAEe,EAAE,4BAA4Bf,EAAEe,EAAE,OAAO,KAAK,CAAC,CAACb,GAAG,SAASF,EAAEe,EAAE,MAAM,KAAK,CAAC,KAAK,EAAEb,GAAG,SAASF,EAAEe,EAAE,OAAOf,EAAEe,EAAE,MAAM,MAAM,KAAK,GAAG,GAAG,IAAIf,EAAEe,EAAE,GAAG,CAAC,MAAMjB,EAAEG,EAAED,EAAEe,EAAE,IAAI,MAAMjB,EAAEI,GAAG,OAAOH,GAAG,KAAKD,EAAEI,GAAG,QAAQ,MAAMJ,EAAEI,GAAG,KAAK,MAAMJ,EAAEI,GAAG,IAAI,MAAMJ,EAAEI,GAAG,IAAI,MAAMJ,EAAEI,GAAG,IAAI,MAAMJ,EAAEI,GAAG,KAAK,MAAMJ,EAAEE,EAAEe,EAAE,IAAI,KAAKf,EAAEe,EAAE,GAAGb,GAAGH,EAAE,MAAMD,EAAEI,IAAI,KAAKU,EAAEH,GAAG,IAAI,KAAK,OAAO,KAAKX,GAAGW,IAAIG,EAAEwE,KAAK,MAAM,KAAKtF,IAAIW,IAAIG,EAAEyM,OAAOnN,GAAGJ,GAAG,KAAKA,GAAG,KAAKA,GAAG,KAAKA,GAAG,KAAKA,GAAG,KAAKA,IAAIc,EAAEH,GAAGX,EAAE,MAAM,GAAG,IAAIE,EAAEe,EAAE,GAAG,CAAC,MAAMjB,EAAEG,EAAE+C,OAAOhD,EAAEe,EAAE,GAAGf,EAAEe,EAAE,IAAIb,GAAG,OAAOJ,EAAE,KAAKA,CAAC,MAAMI,GAAGD,EAAE+C,OAAOhD,EAAEe,EAAE,GAAGf,EAAEe,EAAE,IAAI,MAAM,KAAK,GAAGb,GAAGD,EAAE+C,OAAOhD,EAAEe,EAAE,GAAGf,EAAEe,EAAE,IAAI,MAAM,KAAK,EAAE,MAAM,GAAG,KAAK,EAAE,KAAK,EAAE,KAAK,GAAG,MAAM,KAAK,GAAG,CAACb,GAAG,UAAU,MAAMH,EAAEC,EAAEe,EAAE,GAAGN,EAAET,EAAEe,EAAE,GAAGA,GAAG,EAAE,MAAMH,EAAEG,EAAEhB,EAAEU,EAAE,EAAE,IAAII,GAAE,EAAG,KAAKE,EAAEH,EAAEG,GAAG,EAAE,CAACF,IAAIX,GAAG,KAAK,MAAMH,EAAEC,EAAEe,GAAG,GAAG,KAAKhB,EAAEG,GAAGD,EAAE+C,OAAOhD,EAAEe,EAAE,GAAGf,EAAEe,EAAE,SAAS,GAAG,IAAIhB,EAAEG,GAAG,IAAID,EAAE+C,OAAOhD,EAAEe,EAAE,GAAGf,EAAEe,EAAE,IAAI,SAAS,GAAG,IAAIhB,EAAE,OAAOD,EAAEkN,OAAO,EAAE,GAAGnM,GAAE,CAAE,CAACE,GAAG,EAAEb,GAAG,KAAKH,MAAMU,KAAK,KAAK,EAAG,OAAOP,CAAC,CAAt/C,CAAw/CJ,EAAEC,GAAG,IAAIC,EAAE,OAAOF,EAAEkN,OAAO,OAAOlN,EAAEiN,KAAK,MAAM,IAAIjN,EAAEiN,KAAK,IAAIO,SAAS,MAAM,UAAUtN,IAAI,CAAC,MAAMD,GAAGD,EAAEkN,OAAO,EAAElN,EAAEiN,KAAK,IAAI,CAAC,CAAC,SAASQ,GAAGzN,EAAEC,GAAG,MAAMC,GAAGwN,GAAG1N,GAAGG,GAAGwN,GAAG3N,GAAGI,GAAGsN,GAAGzN,GAAGU,GAAGgN,GAAG1N,GAAG,OAAO2N,GAAG1N,EAAEE,EAAED,EAAEQ,EAAET,EAAES,EAAER,EAAEC,EAAE,CAAC,SAASyN,GAAG7N,EAAEC,GAAG,MAAMC,GAAGwN,GAAG1N,GAAGG,GAAGwN,GAAG3N,GAAG,OAAO4N,GAAG1N,IAAIwN,GAAGzN,GAAGE,IAAIwN,GAAG1N,GAAG,CAAC,SAAS6N,GAAG9N,GAAG,OAAOA,EAAE,EAAES,KAAKC,MAAMV,GAAGS,KAAKyG,KAAKlH,EAAE,CAAC,SAAS+N,GAAG/N,GAAG,OAAOA,EAAE,EAAES,KAAKC,MAAMV,GAAGS,KAAKyG,KAAKlH,EAAE,CAAC,SAASgO,MAAMhO,GAAG,IAAIC,EAAE,EAAE,MAAMC,EAAEe,EAAEjB,GAAG,IAAI,IAAIA,EAAE,EAAEA,EAAEE,EAAEgB,OAAOlB,IAAI,CAAC,MAAMG,EAAEY,EAAEb,EAAEF,IAAI,iBAAiBG,IAAIF,GAAGE,EAAE,CAAC,OAAOF,CAAC,CAAC,SAASgO,MAAMjO,GAAG,IAAIC,EAAE,EAAEC,EAAE,EAAE,MAAMC,EAAEc,EAAEjB,GAAG,IAAI,IAAIA,EAAE,EAAEA,EAAEG,EAAEe,OAAOlB,IAAI,CAAC,MAAMI,EAAEW,EAAEZ,EAAEH,IAAI,iBAAiBI,IAAIH,GAAGG,EAAEF,IAAI,CAAC,OAAOA,EAAED,EAAEC,EAAE,CAAC,CAAC,SAASgO,MAAMlO,GAAG,MAAMC,EAAEgB,EAAEjB,GAAG,IAAIE,EAAE,EAAEC,EAAE,EAAE,IAAI,IAAIH,EAAE,EAAEA,EAAEC,EAAEiB,OAAOlB,IAAI,CAAC,MAAMI,EAAEH,EAAED,GAAGW,EAAEI,EAAEd,EAAED,IAAI,iBAAiBW,GAAGT,GAAGS,EAAER,OAAM,IAAKC,GAAGF,KAAKE,IAAG,IAAKA,IAAID,IAAI,CAAC,OAAOA,EAAED,EAAEC,EAAE,CAAC,CAAC,SAASgO,MAAMnO,GAAG,IAAIC,EAAE,EAAE,MAAMC,EAAEe,EAAEjB,GAAG,IAAI,IAAIA,EAAE,EAAEA,EAAEE,EAAEgB,OAAOlB,IAAK,iBAAiBe,EAAEb,EAAEF,KAAKC,IAAI,OAAOA,CAAC,CAAC,SAASmO,MAAMpO,GAAG,IAAIC,EAAE,EAAE,MAAMC,EAAEe,EAAEjB,GAAG,IAAI,IAAIA,EAAE,EAAEA,EAAEE,EAAEgB,OAAOlB,IAAIE,EAAEF,IAAI,EAAEE,EAAEF,IAAI,GAAGC,IAAI,OAAOA,CAAC,CAAC,SAASoO,MAAMrO,GAAG,IAAIC,GAAE,IAAK,MAAMC,EAAEe,EAAEjB,GAAG,IAAI,IAAIA,EAAE,EAAEA,EAAEE,EAAEgB,OAAOlB,IAAI,CAAC,MAAMG,EAAEY,EAAEb,EAAEF,IAAI,iBAAiBG,GAAGA,EAAEF,IAAIA,EAAEE,EAAE,CAAC,OAAOF,KAAI,IAAK,EAAEA,CAAC,CAAC,SAASqO,MAAMtO,GAAG,IAAIC,EAAE,IAAI,MAAMC,EAAEe,EAAEjB,GAAG,IAAI,IAAIA,EAAE,EAAEA,EAAEE,EAAEgB,OAAOlB,IAAI,CAAC,MAAMG,EAAEY,EAAEb,EAAEF,IAAI,iBAAiBG,GAAGA,EAAEF,IAAIA,EAAEE,EAAE,CAAC,OAAOF,IAAI,IAAI,EAAEA,CAAC,CAAC,SAASsO,MAAMvO,GAAG,IAAIC,GAAE,EAAGC,EAAE,EAAE,MAAMC,EAAEc,EAAEjB,GAAG,IAAI,IAAIA,EAAE,EAAEA,EAAEG,EAAEe,OAAOlB,IAAI,CAAC,MAAMI,EAAEW,EAAEZ,EAAEH,IAAI,iBAAiBI,IAAIH,GAAE,EAAGC,GAAGE,EAAE,CAAC,OAAOH,EAAEC,EAAE,IAAI,CAAC,SAASsO,MAAMxO,GAAG,MAAMC,EAAED,EAAE,GAAGkB,OAAO,IAAI,MAAMhB,KAAKF,EAAE,GAAGA,EAAEE,GAAGgB,SAASjB,EAAE,OAAO,IAAIC,EAAE,EAAE,IAAI,IAAID,EAAE,EAAEA,EAAED,EAAE,GAAGkB,OAAOjB,IAAI,CAAC,IAAIE,GAAE,EAAGC,EAAE,EAAE,IAAI,MAAMF,KAAKF,EAAE,CAAC,MAAMW,EAAEI,EAAEf,EAAEE,GAAGD,IAAI,iBAAiBU,IAAIP,GAAGO,EAAER,GAAE,EAAG,CAACA,IAAID,GAAGE,EAAE,CAAC,OAAOF,CAAC,CAAC,SAASuO,GAAGzO,EAAEC,EAAEC,GAAG,MAAMC,EAAEc,EAAEjB,GAAG,IAAII,EAAEH,EAAE,GAAG,EAAE,MAAMU,EAAET,EAAEgO,MAAMlO,GAAGiO,MAAMjO,GAAG,IAAIc,EAAE,EAAE,IAAI,IAAId,EAAE,EAAEA,EAAEG,EAAEe,OAAOlB,IAAI,CAAC,MAAMC,EAAEE,EAAEH,GAAG,IAAIiB,EAAEF,EAAEZ,EAAEH,IAAI,GAAG,iBAAiBiB,EAAE,CAAC,IAAIf,GAAG,kBAAkBD,IAAIA,EAAE,SAASgB,GAAE,IAAKhB,EAAE,EAAE,CAAC,CAACG,IAAIU,GAAGL,KAAK6I,IAAIrI,EAAEN,EAAE,EAAE,CAAC,OAAOP,EAAEU,EAAEV,EAAE,CAAC,CAAC,SAASsO,MAAM1O,GAAG,OAAOyO,GAAGzO,GAAE,GAAG,EAAG,CAAC,SAAS2O,MAAM3O,GAAG,OAAOyO,GAAGzO,GAAE,GAAG,EAAG,CAAC,SAAS4O,MAAM5O,GAAG,OAAOyO,GAAGzO,GAAE,GAAG,EAAG,CAAC,SAAS6O,MAAM7O,GAAG,OAAOyO,GAAGzO,GAAE,GAAG,EAAG,CAAC,SAAS8O,MAAM9O,GAAG,OAAOS,KAAKsO,KAAKL,MAAM1O,GAAG,CAAC,SAASgP,MAAMhP,GAAG,OAAOS,KAAKsO,KAAKH,MAAM5O,GAAG,CAAC,SAASiP,GAAGjP,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOM,KAAK6I,IAAIpJ,EAAEC,EAAE,CAAC,SAAS+O,GAAGlP,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,GAAGA,GAAG,EAAE,OAAOQ,KAAKsO,KAAK9O,EAAE,CAAC,SAASkP,GAAGnP,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOQ,KAAKwI,IAAIhJ,EAAE,CAAC,SAASmP,KAAK,OAAO3O,KAAK4O,QAAQ,CAAC,SAASC,GAAGtP,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOQ,KAAKC,MAAMT,EAAE,CAAC,SAASsP,GAAGvP,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,IAAI,EAAE,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOA,EAAE,EAAEM,KAAKG,MAAMV,EAAEO,KAAK6I,IAAI,GAAG7I,KAAKwI,IAAI9I,KAAKM,KAAK6I,IAAI,GAAG7I,KAAKwI,IAAI9I,IAAIqP,WAAWtP,EAAEuE,QAAQtE,GAAG,CAAC,SAASsP,GAAGzP,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,IAAI,EAAE,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOM,KAAKC,MAAMR,EAAEO,KAAK6I,IAAI,GAAGnJ,IAAIM,KAAK6I,IAAI,GAAGnJ,EAAE,CAAC,SAASuP,GAAG1P,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,IAAI,EAAE,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOM,KAAKyG,KAAKhH,EAAEO,KAAK6I,IAAI,GAAGnJ,IAAIM,KAAK6I,IAAI,GAAGnJ,EAAE,CAAC,MAAMwP,GAAG,CAACjN,EAAE,IAAIkN,GAAG,IAAI9J,EAAE,IAAI+J,GAAG,IAAIhK,EAAE,IAAIiK,GAAG,GAAG5J,EAAE,GAAG6J,GAAG,GAAG5I,EAAE,GAAG6I,GAAG,EAAEvJ,EAAE,EAAEwJ,GAAG,EAAEtK,EAAE,GAAG,SAASuK,GAAGlQ,EAAEC,EAAE,EAAEC,EAAE,GAAG,MAAMC,EAAEY,EAAEf,GAAG,IAAII,EAAEW,EAAEd,GAAG,MAAMU,EAAEI,EAAEb,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,GAAG,iBAAiBO,EAAE,OAAO,IAAIP,EAAE,GAAGA,EAAEK,KAAKwI,IAAI7I,GAAGD,GAAG,EAAEM,KAAKyG,KAAK/G,EAAEC,GAAGA,EAAE,IAAIF,GAAG,EAAEO,KAAKC,MAAMD,KAAKwI,IAAI9I,GAAGC,GAAGA,GAAG,EAAEK,KAAKyG,KAAKzG,KAAKwI,IAAI9I,GAAGC,GAAGA,EAAE,CAAC,MAAM+P,GAAG,GAAG,SAASC,GAAGpQ,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,GAAGA,GAAG,EAAE,CAAC,MAAMD,EAAES,KAAKC,MAAMT,GAAG,OAAO,IAAID,GAAG,IAAIA,EAAE,GAAGmQ,GAAGnQ,GAAG,IAAImQ,GAAGnQ,GAAGoQ,GAAGpQ,EAAE,GAAGA,GAAGmQ,GAAGnQ,GAAG,CAAC,CAAC,SAASqQ,GAAGrQ,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOiQ,GAAGlQ,IAAIkQ,GAAGjQ,GAAGiQ,GAAGlQ,EAAEC,GAAG,CAAC,SAASmQ,GAAGtQ,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,CAAC,MAAMH,EAAES,KAAKwI,IAAI9I,GAAG,OAAOD,GAAG,EAAEO,KAAKC,MAAMR,EAAEF,GAAGA,GAAG,EAAES,KAAKyG,KAAKzG,KAAKwI,IAAI/I,GAAGF,GAAGA,CAAC,CAAC,CAAC,SAASuQ,GAAGvQ,EAAEC,EAAE,IAAI,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOM,KAAK0J,IAAIjK,GAAGO,KAAK0J,IAAIhK,EAAE,CAAC,SAASqQ,GAAGxQ,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOD,EAAEO,KAAKyG,MAAM/G,EAAED,EAAE,GAAGO,KAAK4O,UAAU,CAAC,CAAC,MAAMoB,GAAG,CAAC,GAAG,IAAI,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,OAAO,KAAK,GAAG,IAAI,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,OAAO,KAAK,GAAG,IAAI,KAAK,MAAM,KAAK,IAAI,KAAK,MAAM,OAAO,MAAM,SAAS7C,GAAG5N,EAAEC,EAAEE,EAAE,KAAK,MAAMC,EAAEW,EAAEf,GAAGW,EAAEI,EAAEd,GAAG,GAAG,iBAAiBG,GAAG,iBAAiBO,EAAE,MAAMT,EAAE,IAAIY,EAAE,GAAGG,EAAE,GAAG,OAAOjB,IAAIc,EAAEd,EAAEyB,YAAYxB,GAAG,IAAIA,EAAEgB,EAAEhB,EAAEE,EAAE,IAAIF,IAAIgB,EAAEd,GAAGF,EAAE,EAAE,GAAGa,EAAE,GAAGA,KAAK,KAAKG,IAAIH,EAAEG,CAAC,CAAC,SAASyP,GAAG1Q,EAAEC,EAAE,MAAM,OAAOuB,EAAExB,EAAEC,GAAG,IAAI,IAAI,EAAE,CAAC,SAAS0Q,GAAG3Q,EAAEC,EAAE,MAAM,OAAOuB,EAAExB,EAAEC,GAAG,aAAa,aAAa,GAAG,CAAC,SAAS2Q,GAAG5Q,EAAEC,EAAE,MAAM,OAAOuB,EAAExB,EAAEC,GAAG,UAAU,UAAU,EAAE,CAAC,MAAM4Q,GAAG,EAAE,mBAAmB,kBAAkB,qBAAqB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,kBAAkB,kBAAkB,SAASC,GAAG9Q,GAAG,MAAMC,EAAED,EAAE,EAAE,IAAIE,EAAEC,EAAE,EAAEC,EAAE,EAAE,MAAMO,EAAE,GAAG,GAAGX,EAAES,KAAKwI,IAAIjJ,KAAKc,EAAE,EAAEH,EAAE,EAAE,IAAI,IAAIX,EAAE6Q,GAAG3P,OAAO,EAAElB,EAAE,EAAEA,IAAIE,EAAEY,EAAEX,EAAEC,EAAEyQ,GAAG7Q,GAAGI,EAAED,EAAEA,EAAED,EAAE,MAAMa,EAAEJ,EAAEF,KAAKsQ,KAAK/Q,EAAEA,EAAE,IAAI6Q,GAAG,GAAG/P,EAAEX,GAAGC,GAAG,OAAOH,EAAEc,EAAE,EAAE,EAAEA,CAAC,CAAC,SAASiQ,GAAGhR,EAAEE,GAAG,MAAMC,EAAEY,EAAEf,GAAGI,EAAEW,EAAEb,GAAG,GAAG,iBAAiBC,EAAE,MAAM,iBAAiBC,EAAE0Q,GAAG1Q,GAAG0Q,GAAG3Q,GAAG2Q,GAAG3Q,GAAG,MAAMF,CAAC,CAAC,SAASgR,GAAGjR,GAAG,MAAME,EAAEa,EAAEf,GAAG,GAAG,iBAAiBE,EAAE,OAAOO,KAAKsQ,IAAI7Q,GAAG,MAAMD,CAAC,CAAC,MAAMiR,GAAG,CAAC,kBAAkB,mBAAmB,mBAAmB,mBAAmB,kBAAkB,oBAAoB,mBAAmB,qBAAqB,uBAA6BC,GAAG1Q,KAAK6I,IAAI,EAAE,IAAI,SAASoE,GAAG1N,GAAG,GAAG,iBAAiBA,EAAE,MAAMC,EAAE,GAAG,CAAC,IAAI,KAAK,KAAK,MAAM,KAAK,MAAM,IAAI,KAAK,KAAK,MAAM,KAAK,OAAO2C,QAAQ5C,IAAI,EAAE,OAAO,EAAE,IAAIG,EAAEH,EAAE4C,QAAQ,KAAKxC,EAAEJ,EAAE4C,QAAQ,KAAK,IAAIzC,IAAIA,EAAEH,EAAE4C,QAAQ,IAAI,IAAI,IAAIxC,IAAIA,EAAEJ,EAAE4C,QAAQ,IAAI,IAAI,MAAMjC,EAAEX,EAAE+B,UAAU/B,EAAEkB,OAAO,EAAElB,EAAEkB,QAAQJ,EAAE,MAAMH,GAAG,MAAMA,EAAE,GAAGR,GAAG,GAAGC,GAAG,EAAE,CAAC,IAAIU,EAAE,MAAMZ,EAAE,GAAGC,GAAG,EAAE,CAAC,GAAGa,OAAOhB,EAAE+B,UAAU,EAAE5B,KAAKa,OAAOhB,EAAE+B,UAAU5B,EAAE,EAAEH,EAAEkB,OAAO,IAAI,MAAMhB,EAAE,OAAOyE,OAAO3E,EAAE+B,UAAU,EAAE5B,GAAG,CAAC,GAAGa,OAAOhB,EAAE+B,UAAU,EAAE3B,KAAKY,OAAOhB,EAAE+B,UAAU3B,EAAE,EAAEJ,EAAEkB,OAAO,IAAI,MAAMhB,EAAE,OAAOyE,OAAO3E,EAAE+B,UAAU,EAAE3B,GAAG,CAAC,GAAGU,EAAE,CAAC,GAAGE,OAAOhB,EAAE+B,UAAU,EAAE/B,EAAEkB,OAAO,IAAI,MAAMhB,EAAE,OAAO,CAAC,CAAC,GAAGc,OAAOhB,GAAG,MAAME,EAAE,OAAOF,CAAC,CAAC,SAAS2N,GAAG3N,GAAG,GAAG,iBAAiBA,EAAE,MAAMC,EAAE,GAAG,CAAC,IAAI,KAAK2C,QAAQ5C,IAAI,EAAE,OAAO,EAAE,IAAIG,GAAGH,EAAEA,EAAE+C,QAAQ,KAAK,OAAOA,QAAQ,KAAK,OAAOA,QAAQ,KAAK,OAAOA,QAAQ,KAAK,QAAQH,QAAQ,KAAKxC,EAAEJ,EAAE4C,QAAQ,KAAK,IAAIzC,IAAIA,EAAEH,EAAE4C,QAAQ,IAAI,IAAI,IAAIxC,IAAIA,EAAEJ,EAAE4C,QAAQ,IAAI,IAAI,MAAMjC,EAAEX,EAAE+B,UAAU/B,EAAEkB,OAAO,EAAElB,EAAEkB,QAAQJ,EAAE,MAAMH,GAAG,MAAMA,EAAE,GAAGR,GAAG,GAAGC,GAAG,EAAE,CAAC,IAAIU,EAAE,MAAMZ,EAAE,GAAGC,GAAG,EAAE,CAAC,GAAGa,OAAOhB,EAAE+B,UAAU,EAAE5B,KAAKa,OAAOhB,EAAE+B,UAAU5B,EAAE,EAAEH,EAAEkB,OAAO,IAAI,MAAMhB,EAAE,OAAOyE,OAAO3E,EAAE+B,UAAU5B,EAAE,EAAEH,EAAEkB,OAAO,GAAG,CAAC,GAAGF,OAAOhB,EAAE+B,UAAU,EAAE3B,KAAKY,OAAOhB,EAAE+B,UAAU3B,EAAE,EAAEJ,EAAEkB,OAAO,IAAI,MAAMhB,EAAE,OAAOyE,OAAO3E,EAAE+B,UAAU3B,EAAE,EAAEJ,EAAEkB,OAAO,GAAG,CAAC,GAAGJ,EAAE,CAAC,MAAMb,GAAGD,EAAE+B,UAAU,EAAE/B,EAAEkB,OAAO,GAAG,GAAGF,MAAMf,GAAG,MAAMC,EAAE,OAAOD,CAAC,CAAC,GAAGe,OAAOhB,GAAG,MAAME,EAAE,OAAO,CAAC,CAAC,SAASkR,GAAGpR,GAAG,MAAMC,GAAGyN,GAAG1N,GAAGE,GAAGyN,GAAG3N,GAAG,OAAO4N,GAAGnN,KAAK4Q,IAAIpR,GAAGQ,KAAK6Q,KAAKpR,IAAIO,KAAK8Q,IAAItR,GAAGQ,KAAK+Q,KAAKtR,GAAG,CAAC,SAASuR,GAAGzR,GAAG,MAAMC,GAAGyN,GAAG1N,GAAGE,GAAGyN,GAAG3N,GAAG,OAAO4N,GAAGnN,KAAK4Q,IAAInR,IAAIO,KAAKsQ,IAAI9Q,GAAGQ,KAAKsQ,KAAK9Q,IAAI,EAAEQ,KAAK8Q,IAAIrR,IAAIO,KAAKsQ,IAAI9Q,GAAGQ,KAAKsQ,KAAK9Q,IAAI,EAAE,CAAC,SAASyR,GAAG1R,EAAEC,GAAG,MAAMC,GAAGwN,GAAG1N,GAAGG,GAAGwN,GAAG3N,GAAGI,GAAGsN,GAAGzN,GAAGU,GAAGgN,GAAG1N,GAAGa,EAAEL,KAAK6I,IAAIlJ,EAAE,GAAGK,KAAK6I,IAAI3I,EAAE,GAAG,OAAOiN,IAAI1N,EAAEE,EAAED,EAAEQ,GAAGG,GAAGX,EAAEC,EAAEF,EAAES,GAAGG,EAAE,CAAC,SAAS6Q,GAAG3R,GAAG,MAAMC,GAAGyN,GAAG1N,GAAGE,GAAGyN,GAAG3N,GAAG,OAAO4N,GAAGnN,KAAK8Q,IAAItR,GAAGQ,KAAK6Q,KAAKpR,GAAGO,KAAK4Q,IAAIpR,GAAGQ,KAAK+Q,KAAKtR,GAAG,CAAC,SAAS0R,GAAG5R,GAAG,MAAMC,GAAGyN,GAAG1N,GAAGE,GAAGyN,GAAG3N,GAAG,OAAO4N,GAAGnN,KAAK4Q,IAAInR,IAAIO,KAAKsQ,IAAI9Q,GAAGQ,KAAKsQ,KAAK9Q,IAAI,EAAEQ,KAAK8Q,IAAIrR,IAAIO,KAAKsQ,IAAI9Q,GAAGQ,KAAKsQ,KAAK9Q,IAAI,EAAE,CAAC,MAAM4R,GAAGpR,KAAK6I,IAAI,EAAE,IAAI,SAASwI,GAAG9R,EAAEE,EAAEC,GAAG,MAAMC,EAAEW,EAAEb,GAAG,GAAG,iBAAiBE,GAAGF,EAAE,GAAGA,EAAE,GAAGC,IAAI,IAAID,GAAG,IAAIA,GAAG,MAAMD,EAAE,IAAIU,EAAEM,EAAEjB,GAAG+R,MAAM,CAAC/R,EAAEC,IAAID,EAAEC,IAAIE,IAAIQ,EAAE,CAAC,KAAKA,IAAI,MAAMG,GAAGH,EAAEO,QAAQf,EAAE,GAAG,IAAIC,EAAEgB,EAAEX,KAAKC,MAAMI,GAAG,QAAG,IAASH,EAAES,EAAE,GAAG,OAAOT,EAAES,GAAG,MAAMC,EAAEV,EAAES,EAAE,GAAGT,EAAES,GAAG,OAAOT,EAAES,GAAGC,GAAGP,EAAEM,EAAE,CAAC,SAAS4Q,GAAGhS,EAAEG,EAAEC,GAAG,MAAMO,EAAEI,EAAEZ,GAAG,GAAG,iBAAiBQ,EAAE,MAAMV,EAAE,OAAOU,GAAG,KAAK,EAAE,GAAGP,EAAE,MAAMH,EAAE,OAAOqO,MAAMtO,GAAG,KAAK,EAAE,OAAO8R,GAAG9R,EAAE,IAAII,GAAG,KAAK,EAAE,OAAO0R,GAAG9R,EAAE,GAAGI,GAAG,KAAK,EAAE,OAAO0R,GAAG9R,EAAE,IAAII,GAAG,KAAK,EAAE,GAAGA,EAAE,MAAMH,EAAE,OAAOoO,MAAMrO,GAAG,QAAQ,MAAME,EAAE,CAAC,SAAS+R,GAAGjS,EAAEC,EAAEC,EAAEC,GAAG,MAAMC,EAAEmB,EAAEvB,GAAGW,EAAEY,EAAEtB,GAAGa,EAAES,EAAErB,GAAG,GAAG,GAAGD,EAAE,OAAO,EAAEa,EAAE,MAAMC,EAAEN,KAAKsQ,KAAKtQ,KAAK6I,IAAIlJ,EAAEU,EAAEH,IAAI,OAAOR,EAAE,EAAEY,EAAEJ,EAAEF,KAAK6I,IAAIxI,EAAEH,GAAGF,KAAK6I,IAAIlJ,EAAEO,EAAE,GAAGI,CAAC,CAAC,SAASmR,GAAGlS,EAAEC,EAAEC,EAAEC,GAAE,GAAI,MAAMC,EAAEmB,EAAEvB,GAAGW,EAAEY,EAAEtB,GAAGa,EAAES,EAAErB,GAAGa,EAAE,CAACf,EAAEC,EAAEC,IAAImQ,GAAGpQ,EAAED,GAAGS,KAAK6I,IAAIpJ,EAAEF,GAAGS,KAAK6I,IAAI,EAAEpJ,EAAED,EAAED,GAAG,IAAIG,EAAE,OAAOY,EAAEX,EAAEO,EAAEG,GAAG,IAAIG,EAAE,EAAE,IAAI,IAAIjB,EAAE,EAAEA,EAAEI,EAAE,EAAEJ,IAAIiB,GAAGF,EAAEf,EAAEW,EAAEG,GAAG,OAAOG,CAAC,CAAC,SAASkR,GAAGlS,EAAEC,EAAEE,GAAG,MAAMO,EAAEV,EAAEmS,QAAQpS,GAAG,iBAAiBA,IAAIc,EAAEZ,EAAEkS,QAAQpS,GAAG,iBAAiBA,IAAI,GAAGW,EAAEO,SAASJ,EAAEI,OAAO,MAAMf,EAAE,MAAMY,EAAEJ,EAAEO,OAAO,GAAG,IAAIH,EAAE,MAAMf,EAAE,MAAMiB,EAAEN,EAAE0R,SAASrS,EAAEC,IAAID,EAAEC,GAAG,GAAGc,EAAEK,EAAEN,EAAEuR,QAAM,CAAGrS,EAAEC,IAAID,EAAEC,GAAG,GAAGc,EAAE,IAAIM,EAAE,EAAE,IAAI,IAAIrB,EAAE,EAAEA,EAAEe,EAAEf,IAAIqB,IAAIV,EAAEX,GAAGiB,IAAIH,EAAEd,GAAGoB,GAAG,OAAOC,GAAGjB,EAAEW,EAAE,EAAEA,EAAE,CAAC,SAASuR,GAAGtS,EAAEC,GAAG,OAAOkS,GAAGnS,EAAEC,GAAE,EAAG,CAAC,MAAMsS,GAAG,CAACC,IAAIrD,GAAGsD,KAAK,SAASzS,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOQ,KAAKiS,KAAKzS,EAAE,EAAE0S,MAAM,SAAS3S,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOQ,KAAKmS,MAAM3S,EAAE,EAAE4S,KAAK,SAAS7S,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOQ,KAAKqS,KAAK,EAAE7S,EAAE,EAAE8S,MAAM,SAAS/S,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,MAAM,GAAGQ,KAAK0J,KAAKlK,EAAE,IAAIA,EAAE,GAAG,EAAE+S,IAAI,SAAShT,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOD,EAAEC,CAAC,EAAE8S,OAAO,SAASjT,GAAG,IAAIe,EAAEf,IAAI,6DAA6DkT,KAAK,GAAGlT,KAAK,CAAC,IAAIC,EAAE,EAAE,MAAM,GAAGD,IAAI+C,QAAQ,gCAA8B,SAAW/C,GAAG,OAAOC,GAAG0P,GAAG3P,GAAGA,CAAE,KAAIC,CAAC,CAAC,EAAEkT,KAAK,SAASnT,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOQ,KAAK2S,KAAKnT,EAAE,EAAEoT,MAAM,SAASrT,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOQ,KAAK6S,MAAMrT,EAAE,EAAEsT,KAAK,SAASvT,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOQ,KAAKqS,KAAK7S,EAAE,EAAEuT,MAAM,SAASxT,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOM,KAAKgT,MAAMtT,EAAED,EAAE,EAAEwT,MAAM,SAAS1T,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOQ,KAAK0J,KAAK,EAAElK,IAAI,EAAEA,IAAI,CAAC,EAAE0T,OAAO,YAAY1T,GAAG,MAAMC,EAAEe,EAAEhB,GAAGmS,QAAQpS,GAAG,iBAAiBA,IAAIG,EAAED,EAAEgB,OAAO,GAAG,IAAIf,EAAE,MAAMH,EAAE,MAAMI,EAAEF,EAAEmS,QAAQ,CAACrS,EAAEC,IAAID,EAAEC,GAAG,GAAGE,EAAE,OAAOD,EAAEmS,QAAM,CAAGrS,EAAEC,IAAID,EAAES,KAAKwI,IAAIhJ,EAAEG,IAAI,GAAGD,CAAC,EAAEyT,QAAQ3F,GAAG4F,SAAS3F,GAAG4F,KAAK,SAAS9T,EAAEC,EAAEC,EAAE,GAAG,MAAMC,EAAEY,EAAEf,GAAGI,EAAEW,EAAEd,GAAGU,EAAEI,EAAEb,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,GAAG,iBAAiBO,EAAE,CAAC,MAAMX,EAAEG,EAAEsB,SAASrB,GAAG,OAAO,IAAI6E,MAAMxE,KAAKsT,IAAIpT,EAAE,EAAEX,EAAEkB,OAAO,IAAIW,KAAK,KAAK7B,EAAE2B,aAAa,CAAC,EAAEqS,UAAU9B,GAAG,YAAY,SAASlS,EAAEC,EAAEC,GAAG,MAAMC,EAAEoB,EAAEvB,GAAGI,EAAEmB,EAAEtB,GAAGU,EAAEY,EAAErB,GAAG,IAAI,IAAIF,EAAE,EAAEA,GAAGG,EAAEH,IAAK,GAAGkS,GAAGlS,EAAEG,EAAEC,GAAE,IAAKO,EAAE,OAAOX,CAAE,EAAE,mBAAmB,SAASA,EAAEC,EAAEC,EAAEC,GAAG,MAAMC,EAAEmB,EAAEvB,GAAGW,EAAEY,EAAEtB,GAAGa,EAAES,EAAErB,GAAG,IAAIe,EAAEF,EAAEZ,GAAG,iBAAiBc,IAAIA,EAAEH,GAAG,IAAIM,EAAE,EAAE,IAAI,IAAIpB,EAAEc,EAAEd,GAAGiB,EAAEjB,IAAKoB,GAAGiP,GAAGjQ,EAAEJ,GAAGS,KAAK6I,IAAI3I,EAAEX,GAAGS,KAAK6I,IAAI,EAAE3I,EAAEP,EAAEJ,GAAG,OAAOoB,CAAC,EAAE,aAAa8Q,GAAG+B,OAAO,SAASjU,EAAEE,GAAG,MAAMC,EAAEY,EAAEf,GAAGI,EAAEW,EAAEb,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOD,EAAEC,EAAE,MAAMH,CAAC,EAAEiU,UAAU,SAASlU,EAAEE,GAAG,MAAMC,EAAEY,EAAEf,GAAGI,EAAEW,EAAEb,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOA,EAAE,EAAED,GAAGC,EAAED,IAAIC,EAAE,MAAMH,CAAC,EAAEkU,MAAM,SAASnU,EAAEE,GAAG,MAAMC,EAAEY,EAAEf,GAAGI,EAAEW,EAAEb,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOD,EAAEC,EAAE,MAAMH,CAAC,EAAEmU,UAAU,SAASpU,EAAEE,GAAG,MAAMC,EAAEY,EAAEf,GAAGI,EAAEW,EAAEb,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOA,EAAE,EAAED,GAAGC,EAAED,IAAIC,EAAE,MAAMH,CAAC,EAAEoU,OAAO,SAASrU,EAAEE,GAAG,MAAMC,EAAEY,EAAEf,GAAGI,EAAEW,EAAEb,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOD,EAAEC,EAAE,MAAMH,CAAC,EAAEqU,QAAQpE,GAAGqE,OAAOlE,GAAGmE,QAAQ,SAASxU,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAO,IAAID,GAAG,IAAIC,EAAE,EAAEkQ,GAAGnQ,EAAEC,EAAE,EAAED,EAAE,EAAE,EAAEuU,QAAQ7G,GAAG8G,OAAO,SAASzU,EAAEC,GAAG,GAAGD,EAAEiB,SAAShB,EAAEgB,OAAO,MAAMf,EAAE,MAAMC,EAAEH,EAAEmS,QAAQpS,GAAG,iBAAiBA,IAAIW,EAAET,EAAEkS,QAAQpS,GAAG,iBAAiBA,IAAIc,EAAEV,EAAEc,OAAOH,EAAEX,EAAEiS,QAAM,CAAGrS,EAAEC,IAAID,EAAEC,GAAG,GAAGa,EAAEG,EAAEN,EAAE0R,QAAM,CAAGrS,EAAEC,IAAID,EAAEC,GAAG,GAAGa,EAAE,IAAIM,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAE,IAAI,IAAItB,EAAE,EAAEA,EAAEc,EAAEd,IAAIoB,IAAIhB,EAAEJ,GAAGe,IAAIJ,EAAEX,GAAGiB,GAAGI,GAAGZ,KAAK6I,IAAIlJ,EAAEJ,GAAGe,EAAE,GAAGO,GAAGb,KAAK6I,IAAI3I,EAAEX,GAAGiB,EAAE,GAAG,MAAMM,EAAEd,KAAKsO,KAAK1N,EAAEC,GAAG,IAAIC,EAAE,MAAMvB,EAAE,OAAOoB,EAAEG,CAAC,EAAEoT,IAAI,SAAS3U,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOQ,KAAK4Q,IAAIpR,EAAE,EAAE2U,KAAK,SAAS5U,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOQ,KAAK6Q,KAAKrR,EAAE,EAAE4U,IAAI,SAAS7U,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAO,EAAEQ,KAAKqU,IAAI7U,EAAE,EAAE8U,KAAK,SAAS/U,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,CAAC,MAAMD,EAAES,KAAKsQ,IAAI,EAAE9Q,GAAG,OAAOD,EAAE,IAAIA,EAAE,EAAE,CAAC,EAAEgV,MAAM7G,GAAG8G,OAAO7G,GAAG8G,WAAW,YAAYlV,GAAG,IAAIC,EAAE,EAAE,MAAMC,EAAEe,EAAEjB,GAAG,IAAI,IAAIA,EAAE,EAAEA,EAAEE,EAAEgB,OAAOlB,IAAI,IAAIE,EAAEF,IAAIE,EAAEF,IAAIC,IAAI,OAAOA,CAAC,EAAEkV,MAAM7C,GAAG,eAAeA,GAAG,eAAe,SAAStS,EAAEC,GAAG,OAAOkS,GAAGnS,EAAEC,GAAE,EAAG,EAAEmV,IAAI,SAASpV,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAO,EAAEQ,KAAK8Q,IAAItR,EAAE,EAAEoV,KAAK,SAASrV,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAO,GAAGQ,KAAKsQ,IAAI9Q,GAAGQ,KAAKsQ,KAAK9Q,GAAG,EAAEqV,QAAQ5E,GAAG6E,QAAQ5E,GAAG6E,QAAQ5E,GAAG6E,QAAQ,SAASzV,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,IAAI,GAAGC,IAAI2E,MAAM,YAAY,iBAAiB3E,GAAG,iBAAiBC,GAAGA,EAAE,GAAGA,EAAE,GAAG,OAAO+J,SAAS,GAAGhK,IAAIC,EAAE,EAAEuV,QAAQ,SAAS1V,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAO,IAAIA,EAAEQ,KAAKkV,EAAE,EAAEC,MAAM,SAAS5V,EAAEE,GAAG,MAAMC,EAAEY,EAAEf,GAAGI,EAAEW,EAAEb,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBA,EAAE,QAAQA,IAAIC,GAAG,MAAMH,CAAC,EAAE4V,MAAM,YAAY7V,GAAG,MAAMC,EAAEgB,EAAEjB,GAAGE,EAAE,GAAGD,EAAEoF,SAASrF,IAAI,iBAAiBA,GAAGE,EAAEoF,KAAKtF,EAAG,IAAG,MAAMG,EAAED,EAAEmS,SAASrS,EAAEC,IAAID,EAAEC,GAAG,GAAGC,EAAEgB,OAAO,OAAOhB,EAAEmS,QAAQ,CAACrS,EAAEC,IAAID,EAAES,KAAK6I,IAAIrJ,EAAEE,EAAE,IAAI,EAAE,EAAE2V,OAAO,SAAS9V,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,GAAG,IAAIA,EAAE,OAAOD,EAAEC,CAAC,EAAE4V,GAAG,SAAS/V,EAAEC,GAAG,cAAcD,UAAUC,GAAGD,GAAGC,CAAC,EAAE+V,IAAIhF,GAAGiF,KAAK,SAASjW,EAAEE,GAAG,MAAMC,EAAEY,EAAEf,GAAG,GAAG,iBAAiBG,EAAE,OAAO,EAAE6Q,GAAG7Q,EAAED,GAAG,MAAMD,CAAC,EAAEiW,KAAK,SAASlW,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,CAAC,MAAMD,EAAE+N,GAAG9N,GAAG,OAAOD,EAAE,EAAEA,EAAES,KAAK0V,KAAKlW,GAAGD,CAAC,CAAC,EAAEoW,IAAInF,GAAGoF,KAAKjG,GAAGkG,WAAW,SAAStW,EAAEC,GAAG,MAAMC,EAAEa,EAAEd,GAAG,GAAG,iBAAiBC,EAAE,CAAC,MAAMD,EAAEQ,KAAKC,MAAMR,GAAG,OAAOD,GAAG,EAAE,EAAEA,EAAED,EAAEC,EAAE,EAAE,CAAC,EAAEsW,OAAO,SAASvW,GAAG,MAAME,EAAEa,EAAEf,GAAG,GAAG,iBAAiBE,GAAGA,GAAG,GAAGA,EAAE,EAAE,MAAM,GAAGO,KAAK0J,KAAK,EAAEjK,IAAI,EAAEA,IAAI,MAAMD,CAAC,EAAEuW,UAAU,SAASxW,GAAG,MAAME,EAAEa,EAAEf,GAAG,GAAG,iBAAiBE,EAAE,CAAC,MAAMF,EAAES,KAAKsQ,IAAI,EAAE7Q,GAAG,OAAOF,EAAE,IAAIA,EAAE,EAAE,CAAC,MAAMC,CAAC,EAAEwW,MAAMnG,GAAGoG,MAAM,SAAS1W,EAAEG,GAAG,IAAIC,EAAEW,EAAEZ,GAAG,GAAG,iBAAiBC,EAAE,MAAMH,EAAE,KAAK0E,OAAOgS,UAAUvW,IAAIA,GAAG,GAAG,CAAC,GAAGA,EAAE,GAAG,OAAOK,KAAKkV,IAAIlV,KAAK8Q,IAAI9Q,KAAKkV,GAAGvV,GAAGJ,EAAE,EAAEI,IAAI,CAACA,GAAG,EAAE,IAAIJ,EAAEkR,GAAG,GAAG,IAAI,IAAIjR,EAAE,EAAEA,EAAE,EAAEA,IAAID,GAAGkR,GAAGjR,IAAIG,EAAEH,GAAG,MAAMA,EAAEG,EAAE,EAAE,GAAG,OAAOK,KAAKsO,KAAK,EAAEtO,KAAKkV,IAAIlV,KAAK6I,IAAIrJ,EAAEG,EAAE,IAAIK,KAAKsQ,KAAK9Q,GAAGD,CAAC,CAAC,CAAC,MAAME,CAAC,EAAE0W,IAAI,YAAY5W,GAAG,MAAMC,EAAEgB,EAAEjB,GAAGE,EAAED,EAAEiB,OAAO,IAAIhB,EAAE,OAAO,EAAE,IAAIC,EAAEF,EAAE,GAAGG,EAAE,EAAE,KAAK,iBAAiBD,GAAG,CAAC,GAAGA,EAAEF,EAAEG,GAAGA,EAAEH,EAAEiB,OAAO,KAAK,0DAA0Dd,GAAG,CAAC,IAAIO,EAAER,EAAE,GAAGA,EAAEA,EAAE,KAAKC,EAAEF,EAAEE,IAAI,CAAC,MAAMJ,EAAEe,EAAEd,EAAEG,IAAI,GAAG,iBAAiBJ,EAAE,CAAC,IAAIC,EAAED,EAAE,GAAGA,EAAEA,EAAE,KAAKW,GAAGV,GAAGU,EAAEV,EAAEU,GAAGV,EAAEA,GAAGU,EAAEA,GAAGV,CAAC,CAAC,CAAC,OAAOU,CAAC,EAAEkW,QAAQ,YAAY7W,GAAG,MAAMC,EAAEgB,EAAEjB,GAAG,GAAGC,EAAE6W,MAAM9W,IAAI2E,OAAOoS,SAAS/W,IAAIA,GAAG,IAAI,MAAME,EAAE,OAAOO,KAAK6I,IAAIrJ,EAAEoS,QAAM,CAAGrS,EAAEC,IAAIA,EAAED,GAAG,GAAG,EAAEC,EAAEiB,OAAO,EAAE8V,OAAO,SAAShX,EAAEE,EAAE,GAAG,MAAMC,EAAEY,EAAEf,GAAGI,EAAEW,EAAEb,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,QAAQJ,GAAGE,GAAG,MAAMD,CAAC,EAAEgX,GAAG,SAASjX,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOD,EAAEC,CAAC,EAAE+W,IAAI,SAASlX,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOD,GAAGC,CAAC,EAAEgX,QAAQ,YAAYnX,GAAG,MAAMC,EAAEgB,EAAEjB,GAAG,GAAGC,EAAE6W,MAAM9W,IAAI2E,OAAOoS,SAAS/W,IAAIA,GAAG,IAAI,MAAME,EAAE,MAAMC,EAAEF,EAAEoS,QAAM,CAAGrS,EAAEC,IAAID,EAAE,EAAEC,GAAG,GAAG,OAAO,GAAG,EAAEA,EAAEiB,OAAOf,EAAE,EAAEiX,QAAQ,SAASpX,EAAEC,GAAG,OAAOyQ,GAAGxG,SAASlK,EAAEyB,WAAW,IAAIxB,EAAE,EAAEoX,QAAQ,SAASrX,EAAEE,GAAG,IAAIC,EAAE+J,SAASlK,EAAEyB,WAAW,IAAI,IAAIkD,OAAOoS,SAAS5W,GAAG,MAAMF,EAAE,MAAMG,EAAED,EAAEgR,GAAG/Q,IAAID,IAAIA,EAAE,EAAEgR,KAAK,MAAMxQ,EAAET,EAAEa,EAAEb,GAAG,KAAKY,EAAEX,EAAEsB,WAAW,OAAOrB,EAAE,IAAI,KAAKO,EAAEG,EAAEY,SAASf,EAAE,KAAKG,EAAE,EAAEwW,QAAQ,SAAStX,EAAEC,EAAE,MAAM,IAAIC,EAAEgK,SAASlK,EAAEyB,WAAW,IAAI,OAAOvB,EAAEiR,KAAKjR,GAAGiR,IAAIP,GAAG1Q,EAAED,EAAE,EAAEsX,MAAM,SAASvX,GAAG,MAAME,EAAEwN,GAAG1N,GAAGG,EAAEwN,GAAG3N,GAAG,IAAI2E,OAAOoS,UAAU7W,KAAKyE,OAAOoS,UAAU5W,GAAG,MAAMF,EAAE,OAAOQ,KAAKsO,KAAKtO,KAAK6I,KAAKpJ,EAAE,GAAGO,KAAK6I,KAAKnJ,EAAE,GAAG,EAAEqX,UAAU7J,GAAG8J,YAAY,SAASzX,GAAG,OAAO4N,IAAIF,GAAG1N,KAAK2N,GAAG3N,GAAG,EAAE0X,MAAMtG,GAAGuG,OAAOlG,GAAGmG,MAAM,SAAS5X,GAAG,OAAO0R,GAAGN,GAAGpR,GAAG2R,GAAG3R,GAAG,EAAE6X,MAAM,SAAS7X,GAAG,OAAO0R,GAAG,IAAIC,GAAG3R,GAAG,EAAE8X,OAAO,SAAS9X,GAAG,OAAO0R,GAAG,IAAIE,GAAG5R,GAAG,EAAE+X,MAAMrG,GAAGsG,MAAM,SAAShY,GAAG,MAAMC,GAAGyN,GAAG1N,GAAGE,GAAGyN,GAAG3N,GAAGG,EAAEM,KAAKsQ,IAAI9Q,GAAG,OAAO2N,GAAGzN,EAAEM,KAAK4Q,IAAInR,GAAGC,EAAEM,KAAK8Q,IAAItR,GAAG,EAAEgY,KAAK,SAASjY,GAAG,MAAMC,GAAGyN,GAAG1N,GAAGE,GAAGyN,GAAG3N,GAAG,OAAO4N,GAAGnN,KAAK0J,IAAI1J,KAAKsO,KAAK9O,EAAEA,EAAEC,EAAEA,IAAIO,KAAKqS,KAAK5S,EAAED,GAAG,EAAEiY,QAAQ,SAASlY,EAAEE,GAAG,MAAMC,EAAEY,EAAEb,GAAG,GAAG,iBAAiBC,EAAE,MAAMF,EAAE,MAAMG,GAAGsN,GAAG1N,GAAGW,GAAGgN,GAAG3N,GAAGc,EAAEL,KAAKsO,KAAK3O,EAAEA,EAAEO,EAAEA,GAAGM,EAAER,KAAK6I,IAAIxI,EAAEX,GAAGiB,EAAEX,KAAKqS,KAAKnS,EAAEP,GAAG,OAAOwN,GAAG3M,EAAER,KAAK4Q,IAAIlR,EAAEiB,GAAGH,EAAER,KAAK8Q,IAAIpR,EAAEiB,GAAG,EAAE+W,UAAU,YAAYnY,GAAG,GAAG,IAAIA,EAAEkB,OAAO,MAAMjB,EAAE,IAAIC,EAAEF,EAAE,GAAG,IAAI,MAAMC,KAAKD,EAAEoY,MAAM,GAAGlY,EAAEuN,GAAGvN,EAAEuB,WAAWxB,EAAEwB,YAAY,OAAOvB,EAAEuB,UAAU,EAAE4W,OAAO3K,GAAG4K,MAAM,SAAStY,GAAG,OAAO0R,GAAG,IAAIN,GAAGpR,GAAG,EAAEuY,OAAO,SAASvY,GAAG,OAAO0R,GAAG,IAAID,GAAGzR,GAAG,EAAEwY,MAAM7G,GAAG8G,OAAO7G,GAAG8G,OAAO,SAAS1Y,GAAG,MAAMC,GAAGyN,GAAG1N,GAAGE,GAAGyN,GAAG3N,GAAGG,EAAEM,KAAKsO,KAAKtO,KAAKsO,KAAK9O,EAAEA,EAAEC,EAAEA,IAAIE,EAAEK,KAAKqS,KAAK5S,EAAED,GAAG,EAAE,OAAO2N,GAAGzN,EAAEM,KAAK4Q,IAAIjR,GAAGD,EAAEM,KAAK8Q,IAAInR,GAAG,EAAEuY,MAAM,SAAS3Y,EAAEC,GAAG,MAAMC,GAAGwN,GAAG1N,GAAGG,GAAGwN,GAAG3N,GAAG,OAAO4N,GAAG1N,GAAGwN,GAAGzN,GAAGE,GAAGwN,GAAG1N,GAAG,EAAE2Y,MAAM,YAAY5Y,GAAG,GAAG,IAAIA,EAAEkB,OAAO,MAAMjB,EAAE,IAAIC,EAAEF,EAAE,GAAG,IAAI,MAAMC,KAAKD,EAAEoY,MAAM,GAAGlY,EAAE2N,GAAG3N,EAAEuB,WAAWxB,EAAEwB,YAAY,OAAOvB,EAAEuB,UAAU,EAAEoX,MAAM,SAAS7Y,GAAG,OAAO0R,GAAGC,GAAG3R,GAAGoR,GAAGpR,GAAG,EAAE8Y,IAAIxJ,GAAGyJ,MAAM,SAAS/Y,EAAEE,GAAG,MAAMC,EAAEY,EAAEb,GAAGE,EAAEJ,EAAE+R,MAAI,CAAG/R,EAAEC,IAAID,EAAEC,IAAI,GAAG,iBAAiBE,IAAIH,EAAE8W,MAAM9W,GAAG,iBAAiBe,EAAEf,KAAK,OAAOI,EAAEA,EAAEc,OAAOf,GAAG,MAAMF,CAAC,EAAE+Y,GAAG,SAAShZ,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOQ,KAAK0J,IAAIlK,EAAE,EAAEgZ,IAAI1I,GAAG2I,MAAM,SAASlZ,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOQ,KAAK0J,IAAIlK,GAAGQ,KAAK0J,IAAI,GAAG,EAAEgP,GAAG,SAASnZ,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOD,EAAEC,CAAC,EAAEiZ,IAAI,SAASpZ,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOD,GAAGC,CAAC,EAAEkZ,IAAIhL,GAAGiL,OAAO,YAAYtZ,GAAG,MAAMC,EAAEgB,EAAEjB,GAAGC,EAAE8R,MAAI,SAAW/R,EAAEC,GAAG,OAAOD,EAAEC,CAAE,IAAG,MAAMC,EAAEO,KAAKC,MAAMT,EAAEiB,OAAO,GAAG,OAAOjB,EAAEiB,OAAO,EAAEjB,EAAEC,IAAID,EAAEC,EAAE,GAAGD,EAAEC,IAAI,CAAC,EAAEqZ,IAAIjL,GAAGkL,MAAM,SAASxZ,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOD,EAAEC,CAAC,EAAEsZ,IAAI,SAASzZ,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,GAAG,IAAIA,EAAE,CAAC,MAAMH,EAAES,KAAKwI,IAAI/I,EAAEC,GAAG,OAAOF,EAAE,EAAED,GAAGA,CAAC,CAAC,EAAE0Z,OAAO,SAAS1Z,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,GAAGD,EAAEC,GAAG,EAAE,OAAOM,KAAKG,MAAMV,EAAEC,GAAGA,CAAC,EAAEwZ,YAAY,YAAY3Z,GAAG,MAAMC,EAAEgB,EAAEjB,GAAG,IAAIE,EAAE,EAAEC,EAAE,EAAE,IAAI,IAAIH,EAAE,EAAEA,EAAEC,EAAEiB,OAAOlB,IAAI,CAAC,MAAMI,EAAEW,EAAEd,EAAED,IAAI,iBAAiBI,IAAIF,GAAGE,EAAED,GAAGiQ,GAAGnQ,EAAED,IAAI,CAAC,OAAOoQ,GAAGlQ,GAAGC,CAAC,EAAEyZ,SAAS,SAAS5Z,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOD,EAAEC,CAAC,EAAE0Z,GAAG,SAAS7Z,EAAEC,GAAG,cAAcD,UAAUC,GAAGD,GAAGC,CAAC,EAAE6Z,QAAQ,SAAS9Z,EAAEC,EAAE,MAAM,IAAIC,EAAEgK,SAASlK,EAAEyB,WAAW,GAAG,OAAOvB,EAAE2R,KAAK3R,IAAI,EAAE2R,GAAG3R,IAAIwQ,GAAGxQ,EAAED,EAAE,EAAE8Z,QAAQ,SAAS/Z,EAAEE,EAAE,MAAM,MAAMC,EAAED,EAAEa,EAAEb,GAAG,KAAK,IAAIE,EAAE8J,SAASlK,EAAEyB,WAAW,GAAG,GAAGrB,EAAEyR,KAAKzR,IAAI,EAAEyR,GAAGzR,KAAKuE,OAAOoS,SAAS3W,IAAI,kBAAkBD,EAAE,MAAMF,EAAE,OAAOG,EAAEqB,WAAWC,SAASvB,GAAG,EAAE,IAAI,EAAE6Z,QAAQ,SAASha,EAAEC,EAAE,MAAM,IAAIC,EAAEgK,SAASlK,EAAEyB,WAAW,GAAG,OAAOvB,EAAE2R,KAAK3R,IAAI,EAAE2R,GAAG3R,IAAIyQ,GAAGzQ,EAAED,EAAE,EAAEga,IAAI,SAASja,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,CAAC,MAAMD,EAAE+N,GAAG9N,GAAG,OAAOD,EAAE,EAAEA,EAAEA,EAAES,KAAK0V,KAAKlW,EAAE,CAAC,EAAEia,WAAWpI,GAAG,iBAAiBA,GAAG,iBAAiB,SAAS9R,EAAEC,GAAG,OAAO6R,GAAG9R,EAAEC,GAAE,EAAG,EAAEka,OAAO,SAASna,EAAEE,GAAG,MAAMC,EAAEY,EAAEf,GAAGI,EAAEW,EAAEb,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAOgQ,GAAGjQ,GAAGiQ,GAAGjQ,EAAEC,GAAG,MAAMH,CAAC,EAAE0V,GAAG,WAAW,OAAOlV,KAAKkV,EAAE,EAAEyE,IAAI,SAASpa,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAO8O,GAAGjP,EAAEC,EAAE,EAAEoa,MAAMpL,GAAGqL,QAAQ/L,GAAGgM,SAASvI,GAAG,eAAeA,GAAG,eAAe,SAAShS,EAAEC,GAAG,OAAO+R,GAAGhS,EAAEC,GAAE,EAAG,EAAEua,SAAS,SAASxa,EAAEC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEY,EAAEd,GAAG,GAAG,iBAAiBC,GAAG,iBAAiBC,EAAE,OAAO2N,GAAG5N,EAAEC,EAAE,EAAEsa,QAAQ,SAASza,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOA,EAAEQ,KAAKkV,GAAG,GAAG,EAAE+E,KAAKtL,GAAGuL,YAAYnK,GAAGoK,MAAM,SAAS5a,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,CAAC,MAAMD,EAAEiE,OAAOhE,GAAGqC,MAAM,IAAI,IAAIpC,EAAE,GAAGC,EAAE,EAAE,KAAKA,KAAKD,GAAGuQ,IAAIzQ,EAAEuN,MAAM,GAAGpN,IAAI,IAAID,EAAE,OAAO,IAAI+E,OAAOjF,EAAE6B,KAAK,IAAI,GAAGA,KAAK,KAAK3B,CAAC,CAAC,EAAE2a,MAAMtL,GAAGuL,UAAUrL,GAAGsL,QAAQrL,GAAGsL,IAAI,SAAShb,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAO,EAAEQ,KAAK4Q,IAAIpR,EAAE,EAAEgb,KAAK,SAASjb,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAO,GAAGQ,KAAKsQ,IAAI9Q,GAAGQ,KAAKsQ,KAAK9Q,GAAG,EAAEib,KAAK,SAASlb,GAAG,MAAME,EAAEa,EAAEf,GAAG,GAAG,iBAAiBE,EAAE,OAAO,IAAIA,EAAE,EAAEA,EAAEO,KAAKwI,IAAI/I,GAAG,MAAMD,CAAC,EAAEkb,IAAI,SAASnb,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOQ,KAAK8Q,IAAItR,EAAE,EAAEmb,KAAK,SAASpb,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOQ,KAAK+Q,KAAKvR,EAAE,EAAEob,MAAM,SAASrb,EAAEE,GAAG,MAAMC,EAAEY,EAAEb,GAAGE,EAAEJ,EAAE+R,MAAI,CAAG/R,EAAEC,IAAID,EAAEC,IAAI,GAAG,iBAAiBE,IAAIH,EAAE8W,MAAM9W,GAAG,iBAAiBe,EAAEf,KAAK,OAAOI,EAAED,EAAE,GAAG,MAAMF,CAAC,EAAEqb,KAAKpM,GAAGqM,OAAO,SAASvb,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,GAAGA,GAAG,EAAE,OAAOQ,KAAKsO,KAAK9O,EAAEQ,KAAKkV,GAAG,EAAE6F,MAAM1M,GAAG,UAAUA,GAAG,UAAUE,GAAGyM,OAAO,YAAYzb,GAAG,OAAOS,KAAKsO,KAAKJ,MAAM3O,GAAG,EAAE0b,OAAO1M,GAAG2M,QAAQ,YAAY3b,GAAG,OAAOS,KAAKsO,KAAKF,MAAM7O,GAAG,EAAE4b,MAAM,SAAS3b,EAAEC,GAAG,GAAGD,EAAEiB,SAAShB,EAAEgB,OAAO,MAAMf,EAAE,MAAMC,EAAEH,EAAEmS,QAAQpS,GAAG,iBAAiBA,IAAIW,EAAET,EAAEkS,QAAQpS,GAAG,iBAAiBA,IAAIc,EAAEV,EAAEc,OAAO,GAAG,IAAIJ,EAAE,MAAMd,EAAE,MAAMe,EAAEX,EAAEiS,QAAM,CAAGrS,EAAEC,IAAID,EAAEC,GAAG,GAAGa,EAAEG,EAAEN,EAAE0R,QAAM,CAAGrS,EAAEC,IAAID,EAAEC,GAAG,GAAGa,EAAE,IAAIM,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAE,IAAI,IAAItB,EAAE,EAAEA,EAAEc,EAAEd,IAAIoB,IAAIhB,EAAEJ,GAAGe,IAAIJ,EAAEX,GAAGiB,GAAGI,GAAGZ,KAAK6I,IAAIlJ,EAAEJ,GAAGe,EAAE,GAAGO,GAAGb,KAAK6I,IAAI3I,EAAEX,GAAGiB,EAAE,GAAG,GAAG,IAAIK,EAAE,MAAMtB,EAAE,OAAOS,KAAKsO,MAAM1N,EAAEZ,KAAK6I,IAAIlI,EAAE,GAAGE,IAAIR,EAAE,GAAG,EAAE+a,SAAS,SAAS7b,KAAKC,GAAG,MAAMC,EAAEa,EAAEf,GAAGG,EAAEc,EAAEhB,GAAG,GAAG,iBAAiBC,EAAE,OAAOA,GAAG,KAAK,EAAE,KAAK,IAAI,OAAO+N,MAAM9N,GAAG,KAAK,IAAI,KAAK,EAAE,OAAOgO,MAAMhO,GAAG,KAAK,IAAI,KAAK,EAAE,OAAOiO,MAAMjO,GAAG,KAAK,IAAI,KAAK,EAAE,OAAOkO,MAAMlO,GAAG,KAAK,IAAI,KAAK,EAAE,OAAOmO,MAAMnO,GAAG,KAAK,IAAI,KAAK,EAAE,OAAOoO,MAAMpO,GAAG,KAAK,IAAI,KAAK,EAAE,KAAK,IAAI,KAAK,GAAG,OAAO,KAAK,IAAI,KAAK,EAAE,OAAO6O,MAAM7O,GAAG,KAAK,IAAI,KAAK,EAAE,OAAO6N,MAAM7N,GAAG,KAAK,IAAI,KAAK,GAAG,OAAOyO,MAAMzO,GAAG,EAAE2b,IAAI9N,GAAG+N,WAAWvN,GAAGwN,MAAM,YAAYhc,GAAG,IAAIC,EAAE,EAAE,MAAMC,EAAEe,EAAEjB,GAAG,IAAI,IAAIA,EAAE,EAAEA,EAAEE,EAAEgB,OAAOlB,IAAI,CAAC,MAAMG,EAAEY,EAAEb,EAAEF,IAAI,iBAAiBG,IAAIF,GAAGQ,KAAK6I,IAAInJ,EAAE,GAAG,CAAC,OAAOF,CAAC,EAAEgc,SAAS,SAASjc,EAAEC,GAAG,IAAID,EAAEkc,MAAMlc,GAAG,iBAAiBe,EAAEf,OAAOC,EAAEic,MAAMlc,GAAG,iBAAiBe,EAAEf,KAAK,CAAC,IAAIE,EAAE,EAAE,IAAI,IAAIC,EAAE,EAAEA,EAAEH,EAAEkB,OAAOf,IAAID,GAAGF,EAAEG,GAAGH,EAAEG,GAAGF,EAAEE,GAAGF,EAAEE,GAAG,OAAOD,CAAC,CAAC,EAAEic,SAAS,SAASnc,EAAEC,GAAG,IAAID,EAAEkc,MAAMlc,GAAG,iBAAiBe,EAAEf,OAAOC,EAAEic,MAAMlc,GAAG,iBAAiBe,EAAEf,KAAK,CAAC,IAAIE,EAAE,EAAE,IAAI,IAAIC,EAAE,EAAEA,EAAEH,EAAEkB,OAAOf,IAAID,GAAGF,EAAEG,GAAGH,EAAEG,GAAGF,EAAEE,GAAGF,EAAEE,GAAG,OAAOD,CAAC,CAAC,EAAEkc,QAAQ,SAASpc,EAAEC,GAAG,IAAID,EAAEkc,MAAMlc,GAAG,iBAAiBe,EAAEf,OAAOC,EAAEic,MAAMlc,GAAG,iBAAiBe,EAAEf,KAAK,CAAC,IAAIE,EAAE,EAAE,IAAI,IAAIC,EAAE,EAAEA,EAAEH,EAAEkB,OAAOf,IAAID,GAAGO,KAAK6I,IAAItJ,EAAEG,GAAGF,EAAEE,GAAG,GAAG,OAAOD,CAAC,CAAC,EAAEmc,IAAI,SAASrc,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOQ,KAAKqU,IAAI7U,EAAE,EAAEqc,KAAK,SAAStc,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOQ,KAAK8b,KAAKtc,EAAE,EAAEuc,MAAM,SAASxc,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAO6N,GAAG7N,EAAE,EAAEwc,IAAI/N,GAAG,QAAQA,GAAG,QAAQE,GAAG8N,KAAK/N,GAAGgO,KAAK/N,GAAGgO,MAAM/N,GAAGgO,QAAQ5K,GAAG,eAAeA,IAAI,SAAS6K,GAAG9c,GAAG,YAAO,IAASA,EAAE,KAAKA,CAAC,CAAC,SAAS+c,GAAG/c,EAAEC,EAAEC,EAAEC,QAAG,IAASD,IAAIA,EAAE,GAAG,IAAIE,GAAG,EAAE,GAAG,IAAIF,EAAEE,EAAEH,EAAE2C,QAAQ5C,OAAO,CAAC,IAAIG,EAAE,iBAAiBH,EAAE,IAAG,IAAKE,EAAE,IAAIA,EAAED,EAAEoF,SAAO,CAAGpF,EAAEC,KAAKD,GAAGD,GAAGC,EAAEE,IAAIA,EAAEF,EAAEG,EAAEF,EAAG,KAAI,IAAIA,GAAGD,EAAEoF,SAAO,CAAGpF,EAAEC,KAAKD,GAAGD,GAAGC,EAAEE,IAAIA,EAAEF,EAAEG,EAAEF,EAAG,GAAE,CAAC,OAAOE,EAAE,CAAC,CAAC,MAAM4c,GAAG,CAACC,OAAO,SAASjd,EAAEC,EAAEC,GAAG,MAAMC,EAAE4c,GAAG/c,EAAEC,EAAE,GAAG,GAAG,IAAIE,EAAE,KAAK,OAAO,OAAOD,GAAGD,GAAGE,EAAE,EAAE,EAAE+c,QAAQ,SAASld,EAAEC,EAAEC,EAAEC,GAAG,IAAIC,GAAE,OAAG,IAASD,IAAIC,EAAEiB,EAAElB,IAAI,MAAMQ,EAAEV,EAAEkd,OAAOld,EAAEkd,OAAOld,EAAEiB,OAAOJ,EAAEic,GAAG/c,EAAEC,EAAEmY,MAAM,EAAEzX,GAAGP,EAAE,EAAE,GAAG,GAAG,IAAIU,EAAE,KAAK,OAAO,OAAOgc,GAAG7c,EAAEU,IAAIT,GAAG,GAAG,GAAGY,EAAE,GAAG,EAAEsc,QAAQ,SAASpd,EAAEC,EAAEC,EAAEC,GAAG,IAAIC,GAAE,OAAG,IAASD,IAAIC,EAAEiB,EAAElB,IAAI,MAAMQ,EAAEV,EAAEkd,OAAOld,EAAEkd,OAAO,EAAErc,EAAEb,EAAEiB,OAAOP,EAAE,IAAII,EAAE,GAAG,IAAID,EAAEC,EAAEd,MAAM,CAACc,EAAE,GAAG,IAAI,IAAIf,EAAE,EAAEA,EAAEc,EAAEd,IAAIe,EAAEuE,KAAKrF,EAAEU,EAAEX,GAAG,CAAC,MAAMiB,EAAEf,EAAEkB,EAAE2b,GAAG/c,EAAEe,EAAEX,EAAE,EAAE,GAAG,GAAG,IAAIgB,EAAE,KAAK,OAAO,OAAO0b,GAAG7c,EAAEU,GAAGS,EAAE,IAAIH,GAAG,GAAG,GAAG,EAAEoc,QAAQ,SAASrd,EAAEC,EAAEC,EAAEC,EAAEC,EAAEO,GAAG,MAAMG,EAAEic,GAAG/c,EAAEC,EAAEG,GAAG,GAAG,IAAIU,EAAE,CAAC,QAAG,IAASX,EAAE,OAAOA,EAAE,KAAK,MAAM,CAAC,OAAOD,GAAGD,GAAGa,EAAE,EAAE,EAAEwc,MAAM,SAAStd,EAAEC,EAAEC,GAAG,MAAMC,EAAEF,EAAEG,EAAEF,EAAE,OAAO4c,GAAG9c,GAAGA,EAAEmd,OAAOnd,EAAEmd,OAAO,IAAIhd,EAAE,IAAIC,GAAG,GAAG,GAAG,EAAEmd,MAAM,SAASvd,EAAEC,EAAEC,GAAG,IAAIC,EAAED,OAAE,IAASA,IAAIC,EAAE,GAAG,MAAMC,EAAE2c,GAAG/c,EAAEC,EAAEE,GAAG,GAAG,IAAIC,EAAE,KAAK,OAAO,OAAOA,CAAC,EAAEod,OAAO,SAASxd,EAAEC,EAAEC,EAAEC,GAAG,MAAMC,EAAE2c,GAAG/c,EAAEC,EAAEC,GAAG,GAAG,IAAIE,EAAE,KAAK,OAAO,OAAOA,CAAC,EAAEqd,OAAO,SAASzd,KAAKC,GAAG,IAAIC,EAAEa,EAAEf,GAAG,GAAGC,EAAEiB,OAAO,GAAG,iBAAiBhB,EAAE,CAAC,GAAGD,EAAEiB,OAAOhB,EAAE,KAAK,qEAAqE,GAAGA,GAAG,EAAE,KAAK,0CAA0C,OAAOA,IAAID,EAAEC,EAAE,CAAC,GAAG,IAAIwd,GAAGta,OAAOC,OAAO,CAACC,UAAU,KAAKqa,GAAG,SAAS3d,EAAEC,EAAEC,GAAG,OAAOF,EAAEC,EAAEC,CAAC,EAAE0d,IAAI,YAAY5d,GAAG,IAAI,IAAIC,EAAE,EAAEA,EAAED,EAAEkB,OAAOjB,IAAI,IAAIoB,EAAErB,EAAEC,IAAI,OAAM,EAAG,OAAM,CAAE,EAAE4d,IAAI,SAAS7d,GAAG,OAAOqB,EAAErB,EAAE,EAAE8d,GAAG,YAAY9d,GAAG,IAAI,IAAIC,EAAE,EAAEA,EAAED,EAAEkB,OAAOjB,IAAI,GAAGD,EAAEC,GAAG,OAAM,EAAG,OAAM,CAAE,EAAE8d,MAAM,WAAW,OAAM,CAAE,EAAEC,KAAK,WAAW,OAAM,CAAE,IAAQC,GAAG7a,OAAOC,OAAO,CAACC,UAAU,KAAK4a,QAAQ,SAASle,GAAG,OAAOoB,EAAEpB,EAAE,EAAEme,SAAS,SAASne,GAAG,MAAM,eAAekT,KAAK,GAAGlT,IAAI,EAAEoe,OAAO,SAASpe,GAAG,MAAMC,EAAEc,EAAEf,GAAG,MAAM,iBAAiBC,GAAGA,EAAE,GAAG,CAAC,EAAEoe,MAAM,SAASre,GAAG,MAAMC,EAAEc,EAAEf,GAAG,MAAM,iBAAiBC,GAAGA,EAAE,GAAG,CAAC,EAAEqe,UAAU,SAASte,GAAG,MAAM,iBAAiBA,CAAC,EAAEue,SAAS,SAASve,GAAG,MAAM,iBAAiBe,EAAEf,EAAE,EAAEwe,OAAO,SAASxe,GAAG,MAAM,iBAAiBA,CAAC,EAAEyC,EAAE,SAASzC,GAAG,MAAMC,EAAEc,EAAEf,GAAG,GAAG,iBAAiBC,EAAE,OAAOA,EAAE,MAAMC,EAAE,IAAIG,KAAKL,GAAG,OAAOE,EAAEW,UAAUC,EAAEZ,GAAG,SAASF,IAAG,IAAKA,EAAE,EAAE,CAAC,IAAI,MAAMye,GAAG,CAAC3C,IAAI9N,GAAG4F,QAAQ3F,GAAG4F,SAAS3F,GAAG8G,MAAM7G,GAAG8G,OAAO7G,GAAGmL,IAAIjL,GAAG+K,IAAIhL,GAAGiN,KAAKpM,GAAGmL,MAAMpL,GAAGgK,IAAI1I,GAAG6F,IAAInF,GAAGqJ,QAAQ/L,GAAGwN,WAAWvN,GAAGgE,IAAIrD,GAAGuL,KAAKtL,GAAGuL,YAAYnK,GAAGqK,MAAMtL,GAAGwL,QAAQrL,GAAGoL,UAAUrL,GAAGqJ,IAAIxJ,GAAGgF,QAAQpE,GAAGuG,MAAMnG,IAAIoO,GAAG,CAACnb,YAAY3B,EAAE6B,IAAIzB,EAAEwB,KAAK1B,EAAE4B,MAAMzB,EAAE0B,MAAMzB,EAAE0B,MAAMxB,EAAEyB,OAAOxB,EAAEyB,KAAKvB,EAAEwB,IAAItB,EAAEyC,OAAOrC,EAAE0B,KAAK5B,EAAE4C,QAAQtC,EAAEkC,WAAWrC,EAAEqF,IAAIxB,GAAGgY,GAAG,CAAChX,KAAK9B,EAAE+B,KAAK9B,EAAEiC,KAAK3B,EAAE0B,MAAM5B,EAAE2B,IAAI7B,EAAEgC,KAAK3B,EAAE4B,OAAO1B,EAAE2B,OAAOzB,EAAE2B,QAAQxB,GAAGgY,GAAGxb,OAAOyb,OAAOzb,OAAOyb,OAAOzb,OAAOyb,OAAOzb,OAAOyb,OAAOzb,OAAOyb,OAAOzb,OAAOyb,OAAO,CAAA,EAAGJ,IAAIC,IAAIC,IAAI3B,IAAIiB,IAAIP,IAAIoB,GAAG1b,OAAOyb,OAAO,CAAE,EAACD,IAAIG,GAAG,IAAI3b,OAAO4b,KAAKF,IAA6B,SAASG,GAAGjf,GAAGoD,OAAOyb,OAAOC,GAAG9e,EAAE,CAA8N,SAASkf,GAAGlf,EAAEC,EAAEC,EAAEC,EAAEC,EAAEO,GAAG,MAAMG,EAAEC,EAAEE,GAAGsK,GAAGvL,IAAIoB,EAAEC,EAAEC,GAAGiK,GAAGpL,GAAG,QAAOc,IAAIK,GAAMR,GAAGM,EAAEhB,GAAOU,EAAEb,GAAGmB,GAAOL,GAAGM,EAAEV,GAAMI,EAAEb,GAAGmB,EAAK,CAAC+B,OAAOyb,OAAO,CAAE,EAACJ,IAAIrb,OAAOyb,OAAO,CAAE,EAACH,IAAItb,OAAOyb,OAAO,CAAE,EAACF,IAAI,MAAMQ,GAAG1e,KAAK6I,IAAI,GAAG,GAAG,SAAS8V,GAAGpf,EAAEC,EAAEC,GAAGA,EAAEmf,IAAIrf,EAAEsf,IAAIrf,IAAIC,EAAEmf,IAAIpf,GAAGD,EAAEqf,IAAIpf,EAAE,CAAC,SAASsf,GAAGvf,GAAG,GAAGA,EAAEgf,KAAK,OAAO/Z,MAAMua,KAAKxf,EAAEgf,QAAQ,MAAM/e,EAAE,GAAG,OAAOD,EAAEqF,SAAO,CAAGrF,EAAEE,IAAID,EAAEqF,KAAKpF,KAAKD,CAAC,CAAC,SAASwf,GAAGzf,GAAG,GAAGA,EAAE0f,OAAO,OAAO1f,EAAE0f,SAAS,MAAMzf,EAAE,GAAGD,EAAEqF,UAAUrF,EAAEE,IAAID,EAAEqF,KAAKpF,KAAK,IAAIA,EAAE,EAAE,MAAM,CAACmf,IAAIrf,IAAIC,EAAEqF,KAAKtF,EAAC,EAAG2f,KAAK,KAAK,MAAM3f,EAAEC,EAAEC,GAAG,OAAOA,IAAI,CAAC0f,KAAK1f,EAAED,EAAEiB,OAAO2e,MAAM7f,EAAC,EAAG,CAAC,MAAM8f,GAAG,WAAAC,CAAY/f,IAAIA,EAAEA,GAAG,CAACggB,IAAI,KAAKC,IAAI,KAAKC,QAAO,MAAOC,KAAKC,QAAQpgB,EAAEggB,IAAIG,KAAKE,QAAQrgB,EAAEigB,IAAIE,KAAKG,QAAQtgB,EAAEkgB,QAAQC,KAAKI,QAAQzT,GAAGqT,KAAKK,SAASlT,GAAG6S,KAAKM,cAAc,CAACzT,KAAK,WAAY,EAACjB,SAAS,IAAI,GAAG2U,QAAQ,IAAI,KAAK3T,KAAK,WAAW,OAAO,CAAC,EAAErF,EAAE,GAAGyY,KAAKQ,OAAO,EAAER,KAAKS,MAAM,IAAIC,IAAIV,KAAKW,UAAU,IAAID,IAAIV,KAAKY,SAAS,GAAGZ,KAAKa,SAAS,CAACjgB,EAAE,CAACf,EAAEC,EAAEC,KAAKF,EAAEmd,OAAOld,EAAED,EAAEihB,QAAQ/gB,EAAEF,GAAG0F,EAAE1F,IAAI,IAAI,IAAIA,EAAE,MAAM,IAAIoH,MAAM,MAAMnH,EAAEkgB,KAAKC,QAAQpgB,GAAG,YAAO,IAASC,EAAE,KAAKA,GAAGC,EAAE,CAACF,EAAEC,KAAK,MAAMC,EAAEC,GAAGoL,GAAGvL,IAAII,EAAEO,GAAG4K,GAAGtL,GAAGa,EAAEV,EAAEF,EAAEa,EAAEJ,EAAER,EAAE,EAAEc,EAAE,GAAGA,EAAEkc,OAAOpc,EAAEE,EAAEggB,QAAQngB,EAAE,EAAE,IAAI,IAAIb,EAAE,EAAEA,GAAGa,EAAEb,IAAI,IAAI,IAAIC,EAAE,EAAEA,EAAEa,EAAEb,IAAIe,EAAEhB,EAAEc,EAAEb,GAAGigB,KAAKC,QAAQpgB,EAAE,GAAGE,EAAE,KAAKD,EAAE,IAAI,OAAOgB,GAAGW,EAAEkd,GAAG9e,EAAEA,IAAI,MAAMA,GAAG8B,EAAE9B,GAAGmgB,KAAKe,eAAelhB,GAAG,CAAC,cAAAmhB,CAAenhB,GAAG,OAAOmgB,KAAKW,UAAUd,IAAIhgB,EAAE,CAAC,QAAAohB,CAASphB,EAAEC,EAAEC,EAAEC,GAAG,KAAKF,IAAIA,EAAE,MAAMkgB,KAAKkB,gBAAgBrhB,EAAE,MAAMmgB,KAAKE,QAAQrgB,EAAEC,EAAEC,KAAKC,GAAGggB,KAAKmB,QAAQthB,GAAG,CAAC,KAAAuhB,CAAMvhB,GAAGmgB,KAAKkB,gBAAgBrhB,EAAE,KAAK,CAAC,QAAAwhB,CAASxhB,GAAG,OAAOmgB,KAAKC,QAAQpgB,EAAE,CAAC,OAAAyhB,GAAU,OAAOtB,KAAKuB,KAAK,CAAC,OAAAC,CAAQ3hB,GAAGmgB,KAAKuB,MAAMte,OAAOyb,OAAOzb,OAAOyb,OAAO,CAAA,EAAGsB,KAAKuB,OAAO1hB,EAAE,CAAC,cAAA4hB,CAAe5hB,EAAEC,GAAG,MAAMD,EAAEoD,OAAOye,QAAQ5hB,GAAGoF,SAASrF,GAAGmgB,KAAKyB,eAAe5hB,EAAE,GAAGA,EAAE,OAAO,OAAOC,SAASkgB,KAAKY,SAAS/gB,GAAGmgB,KAAKY,SAAS/gB,GAAGC,EAAEkgB,KAAK2B,MAAM,CAAC7hB,EAAEC,MAAK,SAAUF,EAAEC,EAAEC,GAAG,IAAI,IAAIC,EAAE,EAAEA,EAAEH,EAAEkB,OAAOf,GAAG,EAAE,GAAG,IAAIH,EAAEG,IAAIF,EAAEiD,OAAOlD,EAAEG,EAAE,GAAGH,EAAEG,EAAE,KAAKD,EAAE,OAAM,EAAG,OAAM,CAAG,EAAvG,CAAyGA,EAAE2L,KAAK3L,EAAE4L,OAAO9L,IAAImgB,KAAK4B,QAAQ9hB,EAAEC,EAAE4L,OAAOqU,KAAKM,cAAe,IAAG,CAAC,cAAAS,CAAelhB,GAAG,GAAG,MAAMA,EAAE,OAAOmgB,KAAKY,SAAS,MAAM9gB,EAAEkgB,KAAKY,SAAS/gB,GAAG,YAAO,IAASC,EAAE,KAAKA,CAAC,CAAC,OAAA8hB,CAAQ/hB,EAAEC,EAAEC,EAAEC,GAAG,MAAMC,EAAE+f,KAAK6B,UAAU/hB,EAAEC,GAAGS,EAAEwf,KAAK8B,WAAWjiB,EAAEI,GAAGD,GAAGggB,KAAK+B,gBAAgBvhB,EAAE,CAAC,OAAAwhB,CAAQniB,GAAGmgB,KAAK+B,gBAAgBliB,EAAE,CAAC,OAAAoiB,CAAQpiB,GAAG,OAAOmgB,KAAKS,MAAMZ,IAAIhgB,EAAE,CAAC,OAAAshB,CAAQthB,EAAEC,GAAG,MAAMC,EAAEigB,KAAKW,UAAUd,IAAIhgB,GAAG,GAAGE,EAAE,CAAC,MAAMF,GAAGC,EAAEA,IAAIA,EAAE,IAAIoiB,KAAK,IAAI,IAAIriB,EAAE,EAAEA,EAAEE,EAAEgB,OAAOlB,IAAIC,EAAEof,IAAInf,EAAEF,IAAIA,GAAGmgB,KAAKmC,WAAWriB,EAAE,CAAC,OAAO,IAAI,CAAC,UAAAqiB,CAAWtiB,GAAG,MAAMC,EAAE,IAAI4gB,IAAI,KAAK7gB,EAAEuiB,MAAM,CAAC,MAAMriB,EAAEuf,GAAGzf,GAAG,IAAIG,GAAE,EAAGH,EAAE,IAAI,IAAII,EAAEF,EAAEyf,QAAQvf,EAAEwf,KAAKxf,EAAEF,EAAEyf,OAAO,CAAC,MAAMzf,EAAEigB,KAAKS,MAAMZ,IAAI5f,EAAEyf,OAAO,IAAIlf,EAAEV,EAAE+f,IAAI5f,EAAEyf,OAAO,GAAGlf,IAAI,GAAGA,IAAIA,EAAEwf,KAAKqC,iBAAiBpiB,EAAEyf,MAAM3f,EAAEiN,SAASlN,IAAI,GAAGU,GAAG,SAAS,MAAMG,EAAEZ,EAAEiN,SAAS,GAAGrM,EAAE,IAAI,IAAIb,EAAE,EAAEA,EAAEa,EAAEI,OAAOjB,IAAI,GAAGD,EAAEsf,IAAIxe,EAAEb,IAAI,SAASD,EAAEmgB,KAAK+B,gBAAgB9hB,EAAEyf,MAAM7f,GAAGW,GAAGV,EAAEggB,IAAI7f,EAAEyf,MAAM,GAAG7f,EAAEyiB,OAAOriB,EAAEyf,OAAO1f,GAAE,CAAE,CAAC,IAAIA,EAAE,YAAYH,EAAEqF,SAASpF,GAAGkgB,KAAKuC,iBAAiBziB,EAAED,IAAI,CAAC,CAAC,QAAA2iB,GAAW,MAAM,CAACC,KAAKzC,KAAKS,MAAM2B,KAAKjB,QAAQnB,KAAKW,UAAUyB,KAAK,CAAC,gBAAAC,CAAiBxiB,EAAEC,EAAEC,GAAG,MAAMC,EAAE,IAAIkiB,IAAIpiB,EAAEoF,SAASrF,GAAGG,EAAEkf,IAAIrf,KAAK,MAAMI,EAAEqf,GAAGtf,GAAG,IAAI,IAAIF,EAAEG,EAAEuf,QAAQ1f,EAAE2f,KAAK3f,EAAEG,EAAEuf,OAAO,CAAC,GAAG1f,EAAE4f,OAAO7f,EAAE,OAAOE,EAAE+f,IAAIjgB,EAAE,GAAG,EAAE,MAAMW,EAAET,EAAE8f,IAAI/f,EAAE4f,OAAO,GAAGlf,GAAGA,EAAE,EAAE,OAAOT,EAAE+f,IAAIjgB,EAAEW,GAAGA,EAAE,MAAMG,EAAEqf,KAAKS,MAAMZ,IAAI/f,EAAE4f,OAAO/e,GAAGA,EAAEqM,UAAUrM,EAAEqM,SAAS9H,SAASrF,GAAGof,GAAGjf,EAAEH,EAAEI,IAAI,CAAC,OAAOF,EAAE+f,IAAIjgB,EAAE,GAAG,CAAC,CAAC,UAAAiiB,CAAWjiB,EAAEC,GAAG,GAAGkgB,KAAKkB,gBAAgBrhB,EAAEC,GAAG,CAAC,GAAGA,EAAEkN,SAAS,IAAI,IAAIlN,EAAEkN,SAASvK,QAAQ5C,IAAI,IAAIC,EAAEiN,OAAO,IAAI,IAAIhN,EAAE,EAAEA,EAAED,EAAEkN,SAASjM,OAAOhB,IAAI,CAAC,MAAMC,EAAEF,EAAEkN,SAASjN,GAAG,IAAIE,EAAE+f,KAAKW,UAAUd,IAAI7f,QAAG,IAASC,IAAIA,EAAE,GAAG+f,KAAKW,UAAUb,IAAI9f,EAAEC,IAAIA,EAAEkF,KAAKtF,EAAE,MAAMC,EAAEmD,OAAOyb,OAAOzb,OAAOyb,OAAO,CAAA,EAAG5e,GAAG,CAACiN,OAAO,IAAI,OAAOiT,KAAKS,MAAMX,IAAIjgB,EAAEC,GAAGD,CAAC,CAAC,CAAC,eAAAqhB,CAAgBrhB,EAAEC,GAAG,MAAMC,EAAEigB,KAAKS,MAAMZ,IAAIhgB,GAAG,IAAIE,EAAE,OAAM,EAAG,GAAGA,IAAID,EAAE,OAAM,EAAGC,EAAEid,QAAQgD,KAAK0C,WAAW7iB,GAAE,GAAI,MAAMG,EAAED,EAAEiN,SAAS,GAAGhN,GAAG,IAAID,EAAEgN,OAAO,IAAI,IAAIjN,EAAE,EAAEA,EAAEE,EAAEe,OAAOjB,IAAI,CAAC,MAAMC,EAAEC,EAAEF,GAAGG,EAAE+f,KAAKW,UAAUd,IAAI9f,GAAG,GAAGE,EAAE,CAAC,MAAMH,EAAEG,EAAEgS,QAAQnS,GAAGA,IAAID,IAAIC,EAAEiB,OAAOif,KAAKW,UAAUb,IAAI/f,EAAED,GAAGkgB,KAAKW,UAAU2B,OAAOviB,EAAE,CAAC,CAAC,OAAOigB,KAAKS,MAAM6B,OAAOziB,IAAG,CAAE,CAAC,KAAA8iB,CAAM9iB,EAAEC,GAAG,OAAOkgB,KAAKI,QAAQvgB,EAAEC,GAAGkgB,KAAKM,cAAc,CAAC,IAAAxT,CAAKjN,EAAEC,GAAG,MAAMC,EAAEigB,KAAK6B,UAAUhiB,EAAEC,GAAG,OAAOkgB,KAAK4C,MAAM7iB,EAAE,CAAC,IAAA4hB,CAAK9hB,GAAGuf,GAAGY,KAAKS,OAAOvb,SAASpF,GAAGD,EAAEC,EAAEkgB,KAAKS,MAAMZ,IAAI/f,KAAK,CAAC,SAAA+iB,CAAUhjB,GAAGmgB,KAAK8C,aAAajjB,CAAC,CAAC,OAAAkjB,CAAQljB,EAAEC,GAAG,OAAOD,EAAEkN,OAAO,EAAEjN,GAAGkgB,KAAK8C,cAAc9C,KAAK8C,aAAahjB,GAAGoL,EAAGrL,EAAEkN,OAAO,CAAC,KAAA6V,CAAM/iB,GAAG,GAAGA,EAAEkN,OAAO,GAAG,IAAIlN,EAAEkN,OAAO,OAAO7B,EAAGrL,EAAEkN,QAAQ,IAAI,MAAMjN,EAAED,EAAEiN,KAAKkT,KAAKa,UAAU,OAAOhhB,EAAEkN,OAAO,EAAE,iBAAiBjN,EAAE8W,SAAS9W,GAAGQ,KAAKG,MAAMX,EAAEkf,IAAIA,GAAGgB,KAAK+C,QAAQljB,GAAGC,CAAC,CAAC,MAAMA,GAAG,OAAOkgB,KAAK+C,QAAQljB,EAAEC,EAAE,CAAC,CAAC,QAAAwB,CAASzB,EAAEC,GAAG,OAAO2L,GAAG5L,EAAEC,GAAGkgB,KAAKM,cAAc,CAAC,UAAA0C,CAAWnjB,EAAEC,EAAEC,GAAGA,EAAEkD,OAAOyb,OAAO,CAAE,EAAC3e,GAAGigB,KAAKM,eAAelB,GAAGY,KAAKS,OAAOvb,SAASlF,IAAI,IAAIC,GAAE,EAAG,MAAMO,EAAEwf,KAAKS,MAAMZ,IAAI7f,GAAGW,EAAE2K,GAAGtL,GAAG,GAAGF,GAAGa,IAAId,EAAEmgB,KAAKkB,gBAAgBlhB,EAAE,UAAU,CAAC,IAAI,IAAIF,EAAE,EAAEA,EAAEU,EAAEkL,KAAK3K,OAAOjB,GAAG,EAAE,GAAG,IAAIU,EAAEkL,KAAK5L,IAAIwL,GAAG9K,EAAEkL,KAAK5L,EAAE,MAAMD,EAAE,CAACI,GAAE,EAAG,KAAK,CAACA,IAAIF,EAAEwH,EAAE5G,EAAEb,EAAEkgB,KAAK4B,QAAQ5hB,EAAEQ,EAAEmL,OAAO5L,IAAIS,EAAEmL,OAAOF,GAAGjL,EAAET,GAAGS,EAAEkL,KAAKsU,KAAKI,QAAQ5f,EAAEmL,OAAO5L,GAAG2L,MAAM,CAAE,GAAE,CAAC,WAAAuX,CAAYpjB,EAAEC,GAAGA,EAAEmD,OAAOyb,OAAO,CAAA,EAAG5e,GAAGkgB,KAAKM,eAAe,MAAMvgB,EAAE,IAAImiB,IAAIlC,KAAK2B,MAAM3hB,IAAI,GAAGH,EAAE,CAAC,MAAMA,EAAEmgB,KAAKS,MAAMZ,IAAI7f,GAAG,GAAGH,EAAEkN,QAAQ,IAAIlN,EAAEkN,OAAO,OAAOjN,EAAEyH,EAAE+D,GAAGtL,QAAQggB,KAAK4B,QAAQ5hB,EAAEH,EAAE8L,OAAO7L,EAAE,CAACC,EAAEmf,IAAIlf,EAAG,IAAGggB,KAAKmC,WAAWpiB,EAAE,CAAC,SAAA8hB,CAAUhiB,EAAEC,EAAEC,GAAG,MAAMC,EAAED,GAAGigB,KAAKI,QAAQvgB,EAAEC,GAAGkgB,KAAKM,eAAe,OAAON,KAAKK,SAASrgB,EAAEggB,KAAKG,SAASngB,EAAEgN,SAAS,SAASnN,GAAG,IAAIC,EAAE,GAAG,MAAMC,EAAEF,EAAE6L,KAAK1L,EAAED,EAAEgB,OAAO,IAAI,IAAIlB,EAAE,EAAEA,EAAEG,EAAEH,GAAG,EAAG,OAAOE,EAAEF,IAAI,KAAK,EAAE,KAAK,EAAE,CAAC,MAAMG,EAAED,EAAEF,EAAE,GAAGC,EAAEqF,KAAKnF,GAAG,KAAK,CAAC,KAAK,EAAEuL,GAAGxL,EAAEF,EAAE,GAAGE,EAAEF,EAAE,IAAIA,GAAGC,EAAEqF,KAAKtF,KAAM,GAAGC,EAAEiB,OAAO,GAAG,CAAC,MAAMlB,EAAE,IAAIqiB,IAAIpiB,EAAEA,EAAEmS,QAAQnS,IAAID,EAAEsf,IAAIrf,KAAKD,EAAEqf,IAAIpf,IAAG,IAAK,CAAC,OAAOA,EAAEiB,OAAOjB,EAAE,IAAI,CAAzQ,CAA2QE,GAAGA,CAAC,CAAC,eAAA+hB,CAAgBliB,EAAEC,GAAGkgB,KAAKQ,QAAQ,EAAE,MAAMzgB,EAAEigB,KAAKS,MAAMZ,IAAIhgB,GAAG,GAAGE,EAAE,CAAC,MAAMC,EAAEggB,KAAK4C,MAAM7iB,GAAG,GAAG+E,MAAMoe,QAAQljB,IAAO,KAAKsL,GAAGzL,GAAG,YAAYmgB,KAAKmD,eAAetjB,EAAEG,EAAEF,GAAGkgB,KAAKE,QAAQrgB,EAAEG,EAAE,IAAIggB,KAAKmB,QAAQthB,EAAEC,EAAE,CAAC,CAAC,cAAAqjB,CAAetjB,EAAEC,EAAEC,GAAG,MAAMid,OAAOhd,EAAE8gB,QAAQ7gB,GAAGH,EAAEU,EAAEwf,KAAKS,MAAMZ,IAAIhgB,GAAGW,EAAEwc,OAAOhd,EAAEQ,EAAEsgB,QAAQ7gB,EAAE,IAAIuL,GAAG3L,EAAEG,EAAEC,IAAID,EAAEC,KAAK+f,KAAKE,QAAQlgB,EAAEF,EAAEG,GAAG,EAAE,IAAIA,EAAE,KAAKJ,IAAImgB,KAAKmB,QAAQnhB,EAAED,EAAG,GAAE,CAAC,MAAMD,GAAGkgB,KAAK0C,WAAW7iB,GAAE,EAAG,CAAC,CAAC,UAAA6iB,CAAW7iB,EAAEC,GAAG,MAAMkd,OAAOjd,EAAE+gB,QAAQ9gB,GAAGggB,KAAKS,MAAMZ,IAAIhgB,GAAG2L,GAAG3L,EAAEE,EAAEC,GAAC,CAAGD,EAAEC,KAAQ,IAAIA,GAAGF,EAAEkgB,KAAKE,QAAQngB,EAAEmL,EAAG,GAAG,IAAI8U,KAAKmB,QAAQphB,IAASD,EAAEkgB,KAAKE,QAAQngB,EAAE,KAAK,EAAEF,GAAGmgB,KAAKE,QAAQngB,EAAE,KAAK,GAAG,KAAKigB,KAAKmB,QAAQphB,EAAI,GAAE,CAAC,gBAAAwiB,CAAiB1iB,EAAEC,GAAG,MAAMC,EAAEigB,KAAKS,MAAMZ,IAAIhgB,GAAGG,EAAEggB,KAAK+C,QAAQhjB,GAAGigB,KAAKE,QAAQrgB,EAAEG,EAAE,IAAIggB,KAAKmB,QAAQthB,EAAEC,EAAE,CAAC,KAAAsjB,CAAMvjB,EAAEC,GAAE,GAAI,MAAMC,EAAE,SAASF,GAAG,MAAMC,EAAED,EAAE6L,KAAK3L,EAAEF,EAAE8L,OAAO,IAAI3L,EAAE,GAAG,MAAMC,EAAEH,EAAEiB,OAAO,IAAI,IAAIlB,EAAE,EAAEA,EAAEI,EAAEJ,GAAG,EAAE,CAAC,MAAMI,EAAEH,EAAED,GAAG,IAAIW,EAAE,OAAOP,GAAG,KAAK,EAAEO,EAAE,SAAS,MAAM,KAAK,EAAEA,EAAE,OAAO,MAAM,KAAK,EAAEA,EAAE,OAAO,MAAM,KAAK,EAAEA,EAAE,SAAS,MAAM,KAAK,EAAEA,EAAE,OAAO,MAAM,KAAK,EAAEA,EAAE,MAAM,MAAM,KAAK,EAAEA,EAAE,QAAQ,MAAM,KAAK,EAAEA,EAAE,OAAO,MAAM,KAAK,GAAGA,EAAE,KAAK,MAAM,KAAK,GAAGA,EAAE,SAAS,MAAM,KAAK,EAAEA,EAAE,QAAQ,MAAM,KAAK,GAAGA,EAAE,QAAQ,MAAM,KAAK,GAAGA,EAAE,MAAMR,GAAG,IAAIC,EAAE,eAAeH,EAAED,EAAE,MAAMC,EAAED,EAAE,OAAO,KAAKI,EAAE,IAAIO,KAAKyM,GAAGzM,KAAKV,EAAED,EAAE,QAAQC,EAAED,EAAE,OAAO,IAAIW,KAAKyM,GAAGzM,KAAKT,EAAEgD,OAAOjD,EAAED,EAAE,GAAGC,EAAED,EAAE,OAAO,CAAC,OAAOG,CAAC,CAAriB,CAAuiBggB,KAAK2C,MAAM9iB,IAAI,GAAGC,EAAE,OAAOC,EAAEsjB,QAAQrZ,IAAIjK,EAAE,CAAC,SAAAujB,CAAUzjB,EAAEC,EAAEC,EAAEC,GAAGA,EAAEA,GAAGggB,KAAKM,cAAc,MAAMrgB,EAAEO,EAAEG,GAAGyK,GAAGvL,GAAGe,EAAE,IAAI8f,IAAI5f,EAAE,IAAI4f,IAAIzf,EAAE,IAAIihB,IAAI9C,GAAGY,KAAKS,OAAOvb,SAASrF,IAAI,MAAMqB,EAAEC,EAAEC,GAAGgK,GAAGvL,GAAGwB,EAAE2e,KAAKS,MAAMZ,IAAIhgB,GAAG4B,EAAEL,IAAIpB,EAAEuH,EAAEvH,EAAEiD,OAAOyb,OAAOzb,OAAOyb,OAAO,CAAA,EAAG1e,GAAG,CAACuH,EAAEnG,IAAIO,EAAEqe,KAAKuD,WAAWliB,EAAEpB,EAAEO,EAAEV,EAAEC,EAAEC,EAAEyB,GAAG,IAAII,EAAEhC,EAAE,GAAGuB,IAAIT,IAAIQ,GAAGX,GAAGU,GAAGjB,KAAK4B,EAAEsJ,GAAGjK,GAAGjB,EAAEiB,EAAEpB,EAAEoB,EAAEC,GAAGX,EAAEW,EAAEpB,EAAEoB,EAAEC,IAAIC,IAAIM,GAAG9B,IAAIgC,EAAE,CAAC,GAAGf,EAAEgf,IAAIjgB,EAAE8B,GAAGP,IAAIT,IAAIZ,EAAE,GAAGoB,GAAGX,GAAGW,EAAEX,EAAET,GAAGD,EAAE,GAAGoB,GAAGjB,GAAGiB,EAAEjB,EAAEH,GAAG,OAAOc,EAAEkf,IAAIje,EAAEF,GAAGN,EAAE0L,SAASpL,EAAEoL,QAAQ9L,EAAEie,IAAIrd,EAAE,CAAE,IAAGud,GAAGxe,GAAGsE,SAASrF,GAAGmgB,KAAK8B,WAAWjiB,EAAEe,EAAEif,IAAIhgB,MAAMiF,MAAMua,KAAKve,EAAE+d,QAAQ3Z,SAASrF,IAAIe,EAAEue,IAAItf,IAAImgB,KAAKkB,gBAAgBrhB,EAAE,KAAM,IAAGC,EAAE,GAAGkgB,KAAKwD,YAAYvjB,EAAEH,EAAEmB,GAAGlB,EAAE,GAAGigB,KAAKyD,eAAejjB,EAAET,EAAEkB,GAAGnB,EAAE,GAAGkgB,KAAKyD,eAAexjB,EAAE,EAAE,EAAEgB,GAAGlB,EAAE,GAAGigB,KAAKyD,eAAejjB,EAAE,EAAE,EAAES,GAAG+e,KAAKmC,WAAWlhB,EAAE,CAAC,cAAAwiB,CAAe5jB,EAAEC,EAAEC,GAAG,MAAMC,EAAEF,EAAED,EAAEC,EAAED,EAAEuf,GAAGY,KAAKW,WAAWzb,SAASpF,IAAI,MAAMG,EAArnpC,SAAYJ,GAAG,OAAOA,GAAG,EAAE,IAAI,CAAwlpC6jB,CAAG5jB,GAAGG,GAAGJ,GAAGI,EAAED,GAAGggB,KAAKmB,QAAQrhB,EAAEC,EAAG,GAAE,CAAC,WAAAyjB,CAAY3jB,EAAEC,EAAEC,GAAG,MAAMC,EAAEF,EAAED,EAAEC,EAAED,EAAEuf,GAAGY,KAAKW,WAAWzb,SAASpF,IAAI,MAAMG,EAAEoL,GAAGvL,GAAGG,GAAGJ,GAAGI,EAAED,GAAGggB,KAAKmB,QAAQrhB,EAAEC,EAAG,GAAE,CAAC,QAAA4jB,CAAS9jB,EAAEC,EAAEC,EAAEC,EAAEC,EAAEO,EAAEG,GAA2C,MAAxC,iBAAiBd,IAAIA,EAAEmgB,KAAK2C,MAAM9iB,EAAEW,IAAWwf,KAAK4D,UAAU/jB,EAAEC,EAAEC,EAAEC,EAAEC,EAAEU,GAAGH,GAAGmL,MAAM,CAAC,SAAAiY,CAAU/jB,EAAEC,EAAEC,EAAEC,EAAEC,EAAEO,GAAG,MAAMG,EAAEd,EAAE6L,KAAK,IAAI,IAAI7L,EAAE,EAAEA,EAAEc,EAAEI,OAAOlB,GAAG,EAAE,GAAG,IAAIc,EAAEd,GAAG,CAAC,IAAIW,EAAEI,GAAGwK,GAAGzK,EAAEd,EAAE,IAAIkf,GAAG9e,EAAE4jB,GAAG5jB,EAAEiB,EAAEjB,EAAEyC,EAAE/B,EAAEd,EAAE,GAAG,EAAE,KAAKW,GAAGV,EAAEc,GAAGb,EAAEY,EAAEd,EAAE,GAAGsL,GAAG3K,EAAEI,EAAEZ,IAAIH,GAAG,CAAC,MAAM,GAAG,IAAIc,EAAEd,GAAG,CAAC,IAAIW,EAAEI,GAAGwK,GAAGzK,EAAEd,EAAE,KAAKiB,EAAEG,GAAGmK,GAAGzK,EAAEd,EAAE,IAAIkf,GAAG9e,EAAE4jB,GAAG5jB,EAAEiB,EAAEjB,EAAEyC,EAAE/B,EAAEd,EAAE,GAAGiB,EAAEN,EAAE,EAAES,EAAEL,EAAE,KAAKJ,GAAGV,EAAEc,GAAGb,EAAEe,GAAGhB,EAAEmB,GAAGlB,EAAEY,EAAEd,EAAE,GAAGsL,GAAG3K,EAAEI,EAAEZ,GAAGW,EAAEd,EAAE,GAAGsL,GAAGrK,EAAEG,EAAEjB,IAAIH,GAAG,CAAC,CAAC,IAAIe,EAAE,CAAC8K,KAAK/K,EAAEoM,OAAOlN,EAAEkN,OAAOpB,OAAO9L,EAAE8L,OAAOqB,SAAS,KAAKF,KAAK,MAAM,OAAOlM,EAAEof,KAAKI,QAAQ3U,GAAG7K,EAAEJ,GAAGA,GAAGwf,KAAK6B,UAAUjhB,EAAE+K,OAAOnL,EAAEI,EAAE,CAAC,aAAAkjB,CAAcjkB,EAAEC,EAAEC,EAAEC,GAAmE,MAAhE,iBAAiBH,IAAIA,EAAEmgB,KAAK2C,MAAM9iB,EAAEG,IAAIA,EAAEA,GAAGggB,KAAKM,cAAqBN,KAAKuD,WAAW1jB,GAAG,GAAG,EAAEC,EAAEC,EAAEC,EAAEA,GAAG2L,MAAM,CAAC,UAAA4X,CAAW1jB,EAAEC,EAAEC,EAAEC,EAAEC,EAAEO,EAAEG,GAAG,IAAIC,GAAE,EAAGE,EAAEjB,EAAE6L,KAAK,MAAMzK,IAAInB,EAAE,GAAGC,EAAE,GAAG,IAAI,IAAIF,EAAE,EAAEA,EAAEiB,EAAEC,OAAOlB,GAAG,EAAE,GAAG,IAAIiB,EAAEjB,GAAG,CAAC,IAAIc,EAAEO,EAAEC,GAAGiK,GAAGtK,EAAEjB,EAAE,IAAI,GAAGW,EAAE+G,IAAIpG,EAAE,SAAS,MAAMC,EAAEN,EAAEjB,EAAE,GAAG,IAAIoB,GAAG,GAAGG,EAAE,UAAUH,KAAO,EAAEG,KAAK,IAAIpB,GAAGW,GAAGb,IAAIc,IAAIE,EAAE,GAAGE,OAAOF,GAAGF,GAAE,GAAID,GAAGX,GAAGW,EAAEb,GAAGa,EAAE,KAAKG,EAAEjB,GAAG,KAAKoB,KAAO,EAAEG,KAAK,IAAInB,GAAGiB,GAAGnB,IAAIa,IAAIE,EAAE,GAAGE,OAAOF,GAAGF,GAAE,GAAIM,GAAGjB,GAAGiB,EAAEnB,GAAGmB,EAAE,KAAKJ,EAAEjB,GAAG,IAAIe,IAAIE,EAAEjB,EAAE,GAAGsL,GAAGxK,EAAEO,EAAEC,IAAItB,GAAG,CAAC,MAAM,GAAG,IAAIiB,EAAEjB,GAAG,CAAC,MAAMc,EAAEG,EAAEjB,EAAE,GAAGqB,EAAEJ,EAAEjB,EAAE,GAAG,IAAIoB,GAAG,IAAIN,GAAG,IAAIO,EAAE,SAAS,IAAIC,EAAEC,EAAEC,GAAG+J,GAAGtK,EAAEjB,EAAE,KAAK4B,EAAEE,GAAGyJ,GAAGtK,EAAEjB,EAAE,IAAI,GAAGW,EAAE+G,IAAIlG,EAAE,SAAS,IAAIrB,KAAKiB,KAAO,EAAEN,MAAMX,EAAE,EAAEmB,GAAGrB,EAAEqB,EAAErB,KAAKc,IAAIE,EAAE,GAAGE,OAAOF,GAAGF,GAAE,GAAIO,GAAGnB,EAAEmB,EAAE,IAAIL,EAAEjB,GAAG,KAAKoB,KAAO,EAAEC,KAAKO,GAAG3B,IAAIc,IAAIE,EAAE,GAAGE,OAAOF,GAAGF,GAAE,GAAIa,GAAGzB,EAAEyB,EAAEN,IAAIL,EAAEjB,GAAG,KAAK,IAAII,KAAKgB,KAAO,EAAEN,MAAMV,EAAE,EAAEmB,GAAGrB,EAAEqB,EAAErB,KAAKa,IAAIE,EAAE,GAAGE,OAAOF,GAAGF,GAAE,GAAIQ,GAAGnB,EAAEmB,EAAE,IAAIN,EAAEjB,GAAG,KAAKoB,KAAO,EAAEC,KAAKS,GAAG5B,IAAIa,IAAIE,EAAE,GAAGE,OAAOF,GAAGF,GAAE,GAAIe,GAAG1B,EAAE0B,EAAEP,IAAIN,EAAEjB,GAAG,KAAKe,IAAIE,EAAEjB,EAAE,GAAGsL,GAAGhK,EAAEC,EAAEC,GAAGP,EAAEjB,EAAE,GAAGsL,GAAG1J,EAAEE,EAAEN,IAAIxB,GAAG,CAAC,CAAC,GAAGe,EAAE,OAAOf,EAAE,IAAIqB,EAAE,CAACwK,KAAK5K,EAAEiM,OAAOlN,EAAEkN,OAAOpB,OAAO9L,EAAE8L,OAAOqB,SAAS,KAAKF,KAAK,MAAM,OAAO5L,EAAE8e,KAAKI,QAAQ3U,GAAGvK,EAAEP,GAAGA,GAAGqf,KAAK6B,UAAU3gB,EAAEyK,OAAOhL,EAAEO,EAAE,EAAE,MAAM6iB,GAAG,WAAAnE,CAAY/f,EAAEC,EAAEC,GAAGigB,KAAKgE,IAAInkB,EAAEmgB,KAAKiE,OAAOnkB,EAAEkgB,KAAKuB,MAAM,CAAE,EAACvB,KAAKM,cAAcrd,OAAOyb,OAAOzb,OAAOyb,OAAO,CAAE,EAAC3e,GAAG,CAACwH,EAAE1H,IAAImgB,KAAKkE,QAAQlE,KAAKmE,YAAW,CAAE,CAAC,KAAAD,GAAQlE,KAAKS,MAAM,GAAGT,KAAKoE,MAAM,GAAGpE,KAAKqE,MAAM,GAAGrE,KAAKsE,OAAO,EAAE,CAAC,OAAAhD,GAAU,OAAOtB,KAAKuB,KAAK,CAAC,OAAAC,CAAQ3hB,GAAGmgB,KAAKuB,MAAMte,OAAOyb,OAAOzb,OAAOyb,OAAO,CAAE,EAACsB,KAAKuB,OAAO1hB,EAAE,CAAC,KAAA0kB,GAAQ,OAAOvE,KAAKgE,GAAG,CAAC,MAAAQ,CAAO3kB,EAAEC,GAAG,OAAOqL,GAAGtL,EAAEC,EAAEkgB,KAAKgE,IAAI,CAAC,OAAAS,GAAU,MAAM5kB,EAAEmgB,KAAKS,MAAM1f,OAAO,IAAIjB,EAAE,EAAE,OAAOkgB,KAAKS,MAAMvb,SAASrF,IAAIA,GAAGA,EAAEkB,OAAOjB,IAAIA,EAAED,EAAEkB,OAAQ,IAAG,CAAClB,EAAEC,EAAE,CAAC,UAAA4kB,GAAa,OAAO1E,KAAKM,aAAa,CAAC,MAAAqE,CAAO9kB,EAAEC,GAAGkgB,KAAKS,MAAMmE,OAAOC,MAAM7E,KAAKS,MAAMqE,GAAGjlB,EAAEC,IAAIkgB,KAAKiE,OAAOX,UAAUnY,GAAGtL,EAAE,EAAEmgB,KAAKgE,KAAKlkB,EAAE,EAAEkgB,KAAKM,eAAeN,KAAKoE,MAAMQ,OAAOC,MAAM7E,KAAKoE,MAAMU,GAAGjlB,EAAEC,IAAIkgB,KAAK+E,kBAAkBllB,EAAEC,EAAE,EAAE,CAAC,SAAAklB,CAAUnlB,EAAEC,GAAG,OAAOkgB,KAAKS,MAAMmE,OAAO/kB,EAAEC,GAAGkgB,KAAKiE,OAAOX,UAAUnY,GAAGtL,EAAE,EAAEmgB,KAAKgE,MAAMlkB,EAAE,EAAEkgB,KAAKM,eAAeN,KAAKoE,MAAMQ,OAAO/kB,EAAEC,GAAGkgB,KAAK+E,kBAAkBllB,GAAGC,EAAE,EAAE,CAAC,SAAAmlB,CAAUplB,EAAEC,GAAG,MAAMC,EAAE+kB,GAAGjlB,EAAEC,GAAGkgB,KAAKS,MAAMvb,SAASrF,IAAIA,GAAGA,EAAE+kB,OAAOC,MAAMhlB,EAAEE,EAAG,IAAGigB,KAAKiE,OAAOX,UAAUnY,GAAG,EAAEtL,EAAEmgB,KAAKgE,KAAK,EAAElkB,EAAEkgB,KAAKM,eAAeN,KAAKqE,MAAMO,OAAOC,MAAM7E,KAAKqE,MAAMS,GAAGjlB,EAAEC,IAAIkgB,KAAK+E,kBAAkBllB,EAAE,EAAEC,EAAE,CAAC,YAAAolB,CAAarlB,EAAEC,GAAGkgB,KAAKS,MAAMvb,SAASnF,IAAIA,GAAGA,EAAE6kB,OAAO/kB,EAAEC,EAAG,IAAGkgB,KAAKiE,OAAOX,UAAUnY,GAAG,EAAEtL,EAAEmgB,KAAKgE,KAAK,GAAGlkB,EAAEkgB,KAAKM,eAAeN,KAAKqE,MAAMO,OAAO/kB,EAAEC,GAAGkgB,KAAK+E,kBAAkBllB,EAAE,GAAGC,EAAE,CAAC,OAAAqlB,CAAQtlB,EAAEC,EAAEC,GAAG,IAAIC,EAAEggB,KAAKS,MAAM5gB,GAAGG,IAAIA,EAAEggB,KAAKS,MAAM5gB,GAAG,IAAI,MAAMI,EAAED,EAAEF,GAAGE,EAAEF,GAAGG,EAAEgD,OAAOyb,OAAOzb,OAAOyb,OAAOzb,OAAOyb,OAAO,CAAE,EAACze,GAAGF,GAAG,CAAC2f,MAAMzf,EAAEyf,QAAQ3f,OAAE,IAASA,EAAE2f,OAAOM,KAAKiB,SAASphB,EAAEC,EAAEC,EAAE2f,MAAM,CAAC,SAAA0F,CAAUvlB,EAAEC,GAAG,MAAMC,EAAEigB,KAAKS,MAAM5gB,GAAGE,GAAGA,EAAED,KAAKC,EAAED,GAAG,KAAKkgB,KAAKiE,OAAOhD,SAAS9V,GAAGtL,EAAEC,EAAEkgB,KAAKgE,KAAK,IAAI,CAAC,QAAA/C,CAASphB,EAAEC,EAAEC,EAAEC,GAAG,MAAMC,EAAEkL,GAAGtL,EAAEC,EAAEkgB,KAAKgE,KAAK,iBAAiBjkB,GAAGA,EAAEgB,OAAO,GAAG,MAAMhB,EAAE,GAAGigB,KAAKiE,OAAOrC,QAAQ3hB,EAAEF,EAAEgD,OAAO,GAAGid,KAAKM,eAAeN,KAAKiE,OAAOhD,SAAShhB,EAAEF,EAAEC,EAAE,CAAC,OAAAqlB,CAAQxlB,EAAEC,EAAEC,GAAG,IAAIC,EAAEggB,KAAKS,MAAM5gB,GAAGI,EAAED,EAAEA,EAAEF,GAAG,KAAK,OAAOG,IAAIF,IAAIC,IAAIA,EAAEggB,KAAKS,MAAM5gB,GAAG,IAAII,EAAED,EAAEF,GAAGG,IAAIA,EAAED,EAAEF,GAAG,CAAC4f,MAAM,QAAQzf,CAAC,CAAC,QAAAohB,CAASxhB,EAAEC,EAAEC,GAAG,GAAGA,EAAE,CAAC,MAAMA,EAAEigB,KAAKiE,OAAOhC,QAAQ9W,GAAGtL,EAAEC,EAAEkgB,KAAKgE,MAAM,GAAGjkB,EAAE,MAAM,IAAIA,EAAE4L,MAAM,CAAC,MAAM3L,EAAEggB,KAAKqF,QAAQxlB,EAAEC,GAAE,GAAI,OAAOE,EAAEA,EAAE0f,MAAM,IAAI,CAAC,QAAA4F,CAASzlB,EAAEC,EAAEC,EAAEC,GAAG,MAAMC,EAAE,GAAG,IAAI,IAAIO,EAAEX,EAAEW,GAAGT,EAAES,IAAI,IAAI,IAAIX,EAAEC,EAAED,GAAGG,EAAEH,IAAII,EAAEkF,KAAK6a,KAAKqB,SAAS7gB,EAAEX,GAAE,IAAK,OAAOI,CAAC,CAAC,YAAAslB,CAAa1lB,EAAEC,EAAEC,EAAEC,GAAG,MAAMC,EAAE,GAAG,IAAI,IAAIO,EAAEX,EAAEW,GAAGT,EAAES,IAAI,IAAI,IAAIX,EAAEC,EAAED,GAAGG,EAAEH,IAAII,EAAEkF,KAAK6a,KAAKqF,QAAQ7kB,EAAEX,IAAI,OAAOI,CAAC,CAAC,QAAAulB,CAAS3lB,GAAGmgB,KAAKS,MAAMvb,SAAO,CAAGpF,EAAEC,KAAKD,GAAGA,EAAEoF,UAAUpF,EAAEE,KAAKF,GAAGD,EAAEE,EAAEC,EAAEF,EAAG,GAAG,GAAE,CAAC,SAAA2lB,CAAU5lB,GAAG,MAAMC,EAAE,GAAG,OAAOkgB,KAAKwF,WAAWzlB,EAAEC,EAAEC,KAAK,GAAGA,EAAEgD,OAAOyb,OAAO,CAAE,EAACze,GAAGJ,EAAE,CAAC,MAAMA,EAAEmgB,KAAKiE,OAAOhC,QAAQ9W,GAAGpL,EAAEC,EAAEggB,KAAKuE,UAAU1kB,IAAII,EAAEyf,MAAM,IAAI7f,EAAE8L,OAAO,CAAC7L,EAAEqF,KAAK,CAACpF,EAAEC,EAAEC,GAAI,IAAGH,CAAC,CAAC,KAAA6iB,CAAM9iB,EAAEC,GAAGkgB,KAAKkE,QAAQlE,KAAKiE,OAAOtC,MAAM9hB,IAAIyL,GAAGzL,KAAKmgB,KAAKgE,KAAKhE,KAAKiE,OAAO7C,MAAMvhB,EAAG,IAAGmgB,KAAK0F,WAAW7lB,EAAEC,GAAE,EAAG,CAAC,UAAA4lB,CAAW7lB,EAAEC,EAAEC,GAAG,MAAMC,EAAE,IAAIkiB,IAAIlC,KAAKmE,YAAW,EAAGtkB,EAAEqF,SAAO,EAAIrF,EAAEI,EAAEO,MAAM,MAAMG,EAAEwK,GAAGtL,EAAEI,EAAE+f,KAAKgE,KAAKjkB,GAAGigB,KAAKiE,OAAO7C,MAAMzgB,GAAG,IAAIC,EAAEof,KAAKS,MAAM5gB,GAAGe,IAAIA,EAAEof,KAAKS,MAAM5gB,GAAG,IAAI,MAAMiB,GAAGN,EAAEI,EAAEX,GAAGgD,OAAOyb,OAAO,CAAA,EAAGle,IAAIkf,MAAM,GAAG5e,EAAE,GAAG,iBAAiBA,GAAGA,EAAEC,OAAO,GAAG,MAAMD,EAAE,GAAG,CAAC,MAAMjB,EAAEiB,EAAEiC,OAAO,GAAGid,KAAKiE,OAAOrC,QAAQjhB,EAAEd,EAAEmgB,KAAK0E,cAAa,GAAI1kB,EAAEkf,IAAIve,EAAE,MAAMb,IAAIU,EAAEkf,MAAM,KAAKM,KAAKiE,OAAOhD,SAAStgB,EAAEG,EAAE,MAAK,GAAIkf,KAAKiE,OAAO9C,QAAQxgB,EAAEX,GAAI,IAAGggB,KAAKiE,OAAO9B,WAAWniB,GAAGggB,KAAKmE,YAAW,CAAE,CAAC,UAAAwB,CAAW9lB,GAAG,IAAImgB,KAAKmE,WAAW,MAAMtkB,CAAC,CAAC,UAAA+lB,CAAW/lB,EAAEC,GAAG,MAAMC,EAAEigB,KAAKoE,MAAMvkB,IAAI,CAAA,EAAGmgB,KAAKoE,MAAMvkB,GAAGE,EAAEkD,OAAOyb,OAAOzb,OAAOyb,OAAO,CAAE,EAAC3e,GAAGD,GAAGA,CAAC,CAAC,UAAA+lB,CAAWhmB,EAAEC,GAAG,MAAMC,EAAEigB,KAAKoE,MAAMvkB,GAAG,GAAGC,IAAIC,EAAE,CAAC,MAAMD,EAAE,CAAA,EAAG,OAAOkgB,KAAKoE,MAAMvkB,GAAGC,EAAEA,CAAC,CAAC,OAAOC,GAAG,IAAI,CAAC,aAAA+lB,CAAcjmB,EAAEC,GAAG,MAAMC,EAAEigB,KAAKqE,MAAMxkB,IAAI,CAAA,EAAGmgB,KAAKqE,MAAMxkB,GAAGE,EAAEkD,OAAOyb,OAAOzb,OAAOyb,OAAO,CAAE,EAAC3e,GAAGD,GAAGA,CAAC,CAAC,aAAAimB,CAAclmB,EAAEC,GAAG,MAAMC,EAAEigB,KAAKqE,MAAMxkB,GAAG,GAAGC,IAAIC,EAAE,CAAC,MAAMD,EAAE,CAAA,EAAG,OAAOkgB,KAAKqE,MAAMxkB,GAAGC,EAAEA,CAAC,CAAC,OAAOC,GAAG,IAAI,CAAC,IAAA6R,CAAK/R,EAAEC,EAAEC,EAAE,EAAEC,EAAE,OAAO,MAAMC,EAAEO,GAAG4K,GAAGvL,IAAIc,EAAEC,GAAGwK,GAAGtL,GAAGgB,EAAE,QAAQd,EAAEiB,EAAE,GAAGC,EAAE,GAAG,IAAI,IAAIrB,EAAEI,EAAEJ,GAAGc,EAAEd,IAAI,CAAC,MAAMC,EAAE,GAAG,IAAI,IAAIC,EAAES,EAAET,GAAGa,EAAEb,IAAI,CAAC,MAAMC,EAAEggB,KAAKiE,OAAOhC,QAAQjC,KAAKwE,OAAO3kB,EAAEE,IAAID,EAAEqF,KAAK,CAACua,MAAMM,KAAKqB,SAASxhB,EAAEE,GAAGimB,IAAInmB,EAAE4iB,KAAKziB,GAAG,MAAM,CAACiB,EAAEkE,KAAKrF,EAAE,CAACmB,EAAE2Q,MAAI,CAAG/R,EAAEC,KAAK,MAAME,EAAEH,EAAEE,GAAG2f,MAAMzf,EAAEH,EAAEC,GAAG2f,MAAM,MAAM,iBAAiB1f,GAAG,iBAAiBC,GAAG,iBAAiBD,GAAG,iBAAiBC,EAAED,EAAEC,EAAEa,GAAG,EAAE,EAAEd,EAAEC,EAAEa,EAAE,GAAG,EAAE,EAAE,iBAAiBd,GAAG,EAAE,CAAE,IAAG,IAAI,IAAIH,EAAEI,EAAEJ,GAAGc,EAAEd,IAAI,IAAI,IAAIC,EAAEU,EAAEV,GAAGc,EAAEd,IAAI,CAAC,MAAMC,EAAEkB,EAAEpB,EAAEI,GAAGH,EAAEU,GAAG,GAAGT,EAAE0iB,KAAK,CAAC,MAAM3iB,EAAEC,EAAEimB,IAAInmB,EAAEG,EAAEggB,KAAKiE,OAAOH,cAAc/jB,EAAE0iB,MAAM3iB,EAAE,EAAEkgB,KAAKM,eAAevgB,EAAE2f,MAAM,IAAI1f,GAAG,CAACkB,EAAEiE,KAAK,CAACtF,EAAEC,EAAE,CAAC4f,MAAM3f,EAAE2f,QAAQ,CAACM,KAAK0F,WAAWxkB,EAAE,CAAC,OAAA+kB,CAAQpmB,EAAEC,EAAEC,GAAG,IAAIC,EAAE,KAAKF,EAAE,GAAGC,EAAE,GAAG,OAAOC,EAAEggB,KAAKsE,OAAO4B,WAAWpmB,GAAGA,EAAE+jB,KAAKhkB,UAAU,IAAIG,GAAGggB,KAAKsE,OAAOM,OAAO5kB,EAAE,IAAI,IAAI,IAAIA,EAAE,EAAEA,GAAGggB,KAAKsE,OAAOvjB,OAAO,EAAEf,IAAI,CAAC,MAAMC,EAAE+f,KAAKsE,OAAOtkB,GAAG+e,GAAGlf,EAAEC,EAAEC,EAAEE,EAAE4jB,GAAG5jB,EAAEkmB,KAAKC,MAAMnmB,EAAEkmB,KAAKE,SAASrG,KAAKsE,OAAOM,OAAO5kB,EAAE,EAAE,CAACggB,KAAKsE,OAAOnf,KAAK,CAAC0e,GAAGhkB,EAAEsmB,KAAK,CAACC,MAAMtmB,EAAEumB,OAAOtmB,IAAI,CAAC,OAAAumB,CAAQzmB,GAAG,OAAOmgB,KAAKsE,OAAOvI,MAAMjc,GAAGA,EAAE+jB,KAAKhkB,KAAK,IAAI,CAAC,QAAA0mB,GAAW,OAAOvG,KAAKsE,MAAM,CAAC,iBAAAS,CAAkBllB,EAAEC,EAAEC,GAAG,GAAGigB,KAAKsE,OAAOvjB,OAAO,IAAI,IAAIf,EAAEggB,KAAKsE,OAAOvjB,OAAO,EAAEf,GAAG,EAAEA,IAAI,CAAC,MAAMC,EAAE+f,KAAKsE,OAAOtkB,GAAG,IAAIqmB,OAAO7lB,EAAE4lB,MAAMzlB,GAAGV,EAAEkmB,MAAMvlB,EAAEE,GAAGsK,GAAGnL,EAAE4jB,IAAI/jB,KAAKc,EAAEJ,GAAGwf,KAAKwG,YAAY5lB,EAAEJ,EAAEX,EAAEC,IAAIC,KAAKe,EAAEH,GAAGqf,KAAKwG,YAAY1lB,EAAEH,EAAEd,EAAEE,IAAIY,EAAE,GAAGH,EAAE,GAAGG,EAAEH,GAAG,EAAEwf,KAAKsE,OAAOM,OAAO5kB,EAAE,IAAIC,EAAE4jB,GAAG1Y,GAAGvK,EAAEE,EAAEkf,KAAKgE,KAAK/jB,EAAEkmB,KAAKE,OAAO7lB,EAAEP,EAAEkmB,KAAKC,MAAMzlB,EAAE,CAAC,CAAC,WAAA6lB,CAAY3mB,EAAEC,EAAEC,EAAEC,GAAG,MAAMC,EAAEJ,EAAEC,EAAE,GAAGE,EAAE,EAAE,CAAC,MAAMQ,EAAET,GAAGC,GAAGA,GAAGD,EAAEF,EAAEE,GAAGE,IAAIH,GAAGQ,KAAKsJ,IAAI5J,EAAEH,EAAEC,EAAEC,IAAIS,EAAEX,GAAGC,GAAGU,EAAEX,EAAEA,EAAEG,GAAGQ,EAAEX,IAAIA,GAAGG,CAAC,MAAMD,GAAGF,EAAEA,GAAGG,EAAED,GAAGE,IAAIH,GAAGE,GAAG,MAAM,CAACH,EAAEC,EAAE,EAAE,SAASglB,GAAGjlB,EAAEC,GAAG,MAAMC,EAAE,CAACF,EAAE,GAAG,IAAI,IAAIA,EAAE,EAAEA,EAAEC,EAAED,IAAIE,EAAEoF,KAAK,MAAM,OAAOpF,CAAC,CAAC,MAAM0mB,GAAG,WAAA7G,CAAY/f,EAAEC,EAAEC,GAAGigB,KAAK0G,QAAQ,IAAIhG,IAAIV,KAAK2G,SAAS,EAAE3G,KAAK4G,YAAY,GAAG5G,KAAKiE,OAAOpkB,EAAEmgB,KAAK6G,MAAM/mB,EAAEkgB,KAAK8G,YAAY/mB,CAAC,CAAC,GAAA8f,CAAIhgB,GAAG,OAAOmgB,KAAKiE,OAAOhC,QAAQjC,KAAK0G,QAAQ7G,IAAIhgB,GAAG,CAAC,IAAAknB,CAAKlnB,GAAG,OAAOmgB,KAAK0G,QAAQ7G,IAAIhgB,EAAE,CAAC,GAAAqf,CAAIrf,EAAEC,GAAG,MAAMC,EAAEigB,KAAK0G,QAAQ7G,IAAIhgB,IAAImgB,KAAKgH,WAAWhH,KAAKiE,OAAOrC,QAAQ7hB,EAAED,EAAEkgB,KAAK6G,MAAMnC,cAAc1E,KAAK0G,QAAQ5G,IAAIjgB,EAAEE,GAAGigB,KAAKiH,SAASpnB,EAAE,CAAC,MAAAqnB,CAAOrnB,GAAGmgB,KAAK0G,QAAQpE,OAAOziB,GAAGmgB,KAAK2G,SAAS,EAAE3G,KAAKiH,SAASpnB,EAAE,CAAC,SAAA4lB,GAAY,OAAO3gB,MAAMua,KAAKW,KAAK0G,QAAQ7H,QAAQvZ,KAAKzF,GAAG,CAACA,EAAEmgB,KAAKH,IAAIhgB,GAAG8L,SAAS,CAAC,KAAAgX,CAAM9iB,GAAGA,EAAEqF,SAASrF,GAAGmgB,KAAKd,IAAIrf,EAAE,GAAGA,EAAE,KAAK,CAAC,QAAAonB,CAASpnB,GAAG,MAAMC,EAAED,EAAE4C,QAAQ,KAAK,IAAI1C,EAAE,IAAI,IAAID,IAAIC,EAAEF,EAAEkD,OAAO,EAAEjD,GAAGD,EAAEA,EAAEkD,OAAOjD,EAAE,IAAIkgB,KAAKiE,OAAOtC,MAAI,CAAG7hB,EAAEE,KAAK,GAAG,SAASH,EAAEC,EAAEC,EAAEC,GAAG,IAAI,IAAIC,EAAE,EAAEA,EAAEJ,EAAEkB,OAAOd,GAAG,EAAE,GAAG,IAAIJ,EAAEI,GAAG,CAAC,GAAG,KAAKF,EAAE,CAAC,GAAG,IAAIF,EAAEI,EAAE,IAAIH,EAAEiD,OAAOlD,EAAEI,EAAE,GAAGJ,EAAEI,EAAE,MAAMF,EAAE,SAAS,OAAM,CAAE,CAAC,GAAGD,EAAEiD,OAAOlD,EAAEI,EAAE,GAAGJ,EAAEI,EAAE,MAAMD,EAAE,OAAM,CAAE,CAAC,OAAM,CAAE,CAAnL,CAAqLA,EAAE0L,KAAK1L,EAAE2L,OAAO5L,EAAEF,GAAG,CAAC,MAAMA,EAAEyL,GAAGxL,GAAGkgB,KAAKiE,OAAOrC,QAAQ9hB,EAAEE,EAAE2L,OAAOqU,KAAK8G,YAAYjnB,GAAG6kB,aAAa,CAAE,GAAE,CAAC,QAAAsC,GAAW,KAAKhH,KAAK4G,YAAY5G,KAAK2G,WAAW3G,KAAK2G,WAAW,OAAO3G,KAAK4G,YAAY5G,KAAK2G,WAAU,EAAGxb,GAAG6U,KAAK2G,SAAS,EAAE3G,KAAK6G,MAAMtC,QAAQ,CAAC,UAAA4C,CAAWtnB,EAAEC,GAAGD,GAAG,IAAIC,IAAIA,GAAG,KAAKkgB,KAAK0G,QAAQxhB,SAAO,CAAGnF,EAAEC,EAAEC,KAAK,IAAID,EAAEyC,QAAQ5C,KAAKC,EAAEG,EAAE6f,IAAI9f,EAAE4C,QAAQ/C,EAAEC,GAAGC,GAAGigB,KAAKiE,OAAO7C,MAAMrhB,GAAGE,EAAEqiB,OAAOtiB,GAAI,GAAE,EAAE,MAAMonB,GAAG,WAAAxH,CAAY/f,EAAEC,GAAGkgB,KAAKiE,OAAOpkB,EAAEmgB,KAAK8G,YAAYhnB,CAAC,CAAC,IAAAunB,CAAKxnB,EAAEC,GAAGA,IAAIA,EAAED,GAAG,MAAME,EAAEigB,KAAKsH,WAAWznB,EAAEC,GAAG,OAAOkgB,KAAKiE,OAAOzC,QAAQ,CAAC+F,WAAWxnB,IAAIA,CAAC,CAAC,KAAAynB,CAAM3nB,EAAEC,EAAEC,EAAEC,EAAEC,EAAE+f,KAAKyH,oBAAoB,IAAIjnB,EAAE,GAAGR,EAAEA,GAAG,IAAI,QAAQQ,EAAET,EAAEA,GAAGigB,KAAKiE,OAAO3C,UAAUiG,kBAAa,IAAS/mB,OAAE,EAAOA,EAAEknB,KAAK3mB,QAAQ,OAAO,MAAMJ,EAAEC,EAAEE,GAAGsK,GAAGvL,IAAIoB,EAAEC,GAAGkK,GAAGtL,GAAGqB,EAAE6e,KAAK8G,YAAYhmB,IAAIM,EAAEC,GAAG+J,GAAGrL,EAAEsf,MAAM,GAAG5d,EAAE1B,EAAE2nB,KAAK/lB,EAAE,GAAGE,EAAElB,EAAES,EAAEU,EAAElB,EAAES,EAAE,GAAG,IAAIrB,EAAE,CAAC,MAAMH,EAAE4B,EAAE,GAAGV,OAAO,EAAE,IAAI,IAAIjB,EAAE,EAAEA,GAAG2B,EAAEV,OAAO,EAAEjB,IAAI,IAAI,IAAIC,EAAE,EAAEA,GAAGF,EAAEE,IAAI,CAAC,MAAMF,EAAE4B,EAAE3B,GAAGC,GAAGC,EAAEW,EAAEb,EAAEU,EAAEI,EAAEb,EAAEkB,EAAE+e,KAAK2H,YAAY3nB,EAAEQ,EAAEM,EAAEjB,EAAEgC,EAAEC,EAAE7B,GAAGgB,GAAGU,EAAEwD,KAAKlE,EAAE,CAAC,CAAC,GAAG,IAAIjB,EAAE,IAAI,IAAIH,EAAEc,EAAEd,GAAGoB,EAAEpB,IAAI,IAAI,IAAIC,EAAEc,EAAEd,GAAGoB,EAAEpB,IAAI,CAAC,MAAMC,EAAED,EAAEc,EAAEZ,EAAEyB,EAAE5B,EAAEc,GAAGZ,GAAGS,EAAEwf,KAAK2H,YAAY9nB,EAAEC,EAAEgB,EAAEd,EAAE6B,EAAEC,EAAE7B,GAAGO,GAAGmB,EAAEwD,KAAK3E,EAAE,CAAC,GAAG,IAAIR,EAAE,CAAC,IAAIH,EAAE,EAAE,IAAI,IAAIC,EAAEa,EAAEb,GAAGmB,EAAEnB,IAAI,CAAC,IAAIC,EAAE,EAAEF,IAAI4B,EAAEV,SAASlB,EAAE,GAAG,IAAI,IAAIG,EAAEY,EAAEZ,GAAGkB,EAAElB,IAAI,CAACD,IAAI0B,EAAE,GAAGV,SAAShB,EAAE,GAAG,MAAMS,EAAEiB,EAAE5B,GAAGE,GAAGY,EAAEb,GAAGsB,EAAEvB,GAAGe,EAAEZ,GAAGqB,EAAEtB,GAAGkB,EAAE+e,KAAK2H,YAAY7nB,EAAEE,EAAEc,EAAEN,EAAEG,EAAEC,EAAEX,GAAGgB,GAAGU,EAAEwD,KAAKlE,GAAGlB,GAAG,CAACF,GAAG,CAAC,CAACsB,EAAEukB,WAAW/jB,EAAE,CAAC,KAAAyf,CAAMvhB,EAAEC,EAAEC,GAAGA,EAAEA,GAAG,IAAI,MAAMC,EAAEC,EAAEO,GAAG4K,GAAGvL,IAAIc,EAAEC,GAAGwK,GAAGtL,GAAGgB,EAAEkf,KAAK8G,YAAYtmB,GAAGS,EAAE,GAAGC,EAAE,GAAG,IAAI,IAAIrB,EAAEG,EAAEH,GAAGc,EAAEd,IAAI,IAAI,IAAIC,EAAEG,EAAEH,GAAGc,EAAEd,IAAI,CAAC,MAAME,EAAEc,EAAEukB,QAAQxlB,EAAEC,GAAGG,EAAEkL,GAAGtL,EAAEC,EAAEU,GAAGG,EAAE,MAAMZ,EAAE,CAAA,EAAGkD,OAAOyb,OAAO,CAAE,EAAC1e,GAAG,GAAG,EAAED,EAAE,CAAC,MAAMF,EAAEmgB,KAAKiE,OAAOjD,eAAe/gB,GAAGJ,GAAGqB,EAAEiE,QAAQtF,UAAUc,EAAE+e,KAAK,CAACze,EAAEkE,KAAK,CAACtF,EAAEC,EAAEa,GAAG,CAACG,EAAE4kB,WAAWzkB,GAAG+e,KAAK4H,wBAAwB1mB,EAAE,CAAC,uBAAA0mB,CAAwB/nB,GAAGgoB,GAAGhoB,GAAGqF,SAASrF,GAAGmgB,KAAKiE,OAAOjC,QAAQniB,IAAI,CAAC,UAAAynB,CAAWznB,EAAEC,GAAG,MAAMC,EAAEC,EAAEC,GAAGmL,GAAGvL,IAAIW,EAAEG,GAAGyK,GAAGtL,GAAGc,EAAEof,KAAK8G,YAAY7mB,GAAGa,EAAE,CAACue,KAAKxf,EAAE6nB,KAAK,IAAI,IAAI,IAAI7nB,EAAEE,EAAEF,GAAGW,EAAEX,IAAI,CAAC,MAAMC,EAAE,GAAG,IAAI,IAAIC,EAAEC,EAAED,GAAGY,EAAEZ,IAAI,CAAC,MAAMC,EAAEY,EAAEykB,QAAQxlB,EAAEE,GAAGS,EAAEwf,KAAKiE,OAAOhC,QAAQ9W,GAAGtL,EAAEE,EAAEE,IAAI,IAAIU,EAAEH,IAAIG,EAAEH,EAAEmL,QAAQ,MAAM7K,EAAE,CAACd,EAAEiD,OAAOyb,OAAO,GAAG1e,GAAG,MAAMW,GAAGG,EAAEqE,KAAKxE,GAAGb,EAAEqF,KAAKrE,EAAE,CAACA,EAAE4mB,KAAKviB,KAAKrF,EAAE,CAAC,OAAOgB,CAAC,CAAC,KAAAojB,GAAQlE,KAAKiE,OAAOzC,QAAQ,CAAC+F,WAAW,MAAM,CAAC,IAAAO,CAAKjoB,EAAEC,GAAG,MAAM4nB,KAAK3nB,EAAEsf,KAAKrf,GAAGF,GAAGkgB,KAAKiE,OAAO3C,UAAUiG,YAAYtnB,EAAEO,EAAEG,GAAGyK,GAAGpL,GAAGY,EAAEb,EAAEgB,OAAOD,EAAEf,EAAE,GAAGgB,QAAQE,EAAEC,EAAEC,GAAGiK,GAAGvL,GAAGuB,EAAE,GAAGC,EAAE,GAAGI,EAAEue,KAAK8G,YAAY3lB,GAAGQ,EAAE,CAACkiB,GAAG7jB,EAAEkB,EAAEN,EAAE8B,EAAE5B,GAAG,IAAI,IAAIjB,EAAE,EAAEA,EAAEe,EAAEf,IAAI,IAAI,IAAIC,EAAE,EAAEA,EAAEgB,EAAEhB,IAAI,CAAC,MAAM+B,EAAE9B,EAAEF,GAAGC,IAAIgC,EAAEC,GAAGF,EAAEI,EAAEkJ,GAAGlL,EAAEJ,EAAEW,EAAEV,EAAEa,GAAGuB,EAAE8d,KAAKiE,OAAOjD,eAAe/e,GAAG,GAAGC,EAAE,CAAC,MAAMrC,EAAEmgB,KAAK+H,4BAA4B7lB,EAAElC,EAAEY,EAAEE,GAAGjB,EAAEkB,QAAQK,EAAE+D,QAAQtF,EAAE,CAAC,MAAMuC,EAAEnB,EAAEpB,EAAEyC,EAAEpB,EAAEpB,EAAE,GAAGgC,EAAE,CAAC,GAAGC,EAAE,CAAC,MAAMlC,EAAEmgB,KAAK8G,YAAYnmB,GAAG+jB,aAAa5kB,EAAEkgB,KAAKiE,OAAON,SAAS5hB,EAAEd,EAAEhB,EAAEiB,EAAEV,EAAEW,EAAEQ,EAAE9B,EAAE4B,EAAEijB,cAAc5iB,EAAE4d,MAAM,IAAI5f,GAAG,CAACuB,EAAE8D,KAAK,CAAC/C,EAAEE,EAAER,GAAG,MAAMT,EAAE8D,KAAK,CAAC/C,EAAEE,EAAE,IAAI,CAACb,EAAEikB,WAAWrkB,GAAG2e,KAAKgI,uBAAuB5mB,EAAEH,EAAEhB,EAAEiB,EAAEV,EAAEW,EAAEQ,EAAE,CAAC,sBAAAqmB,CAAuBnoB,EAAEC,EAAEC,EAAEC,EAAEC,GAAG4nB,GAAGhoB,GAAGqF,SAASrF,IAAI,QAAQW,GAAG4K,GAAGvL,GAAGc,EAAEqf,KAAKiE,OAAOhC,QAAQpiB,GAAGe,EAAEof,KAAK8G,YAAYtmB,GAAGkkB,aAAa5jB,EAAEkf,KAAKiE,OAAON,SAAShjB,EAAEb,EAAEC,EAAEC,EAAEC,EAAEW,GAAGof,KAAKiE,OAAOrC,QAAQ/hB,EAAEiB,EAAEF,EAAG,GAAE,CAAC,2BAAAmnB,CAA4BloB,EAAEC,EAAEC,EAAEC,GAAG,MAAMC,EAAE,GAAG,OAAOJ,EAAEqF,SAASrF,IAAIkf,GAAGjf,EAAEC,EAAEC,EAAEH,EAAE,EAAE,IAAII,EAAEkF,KAAKtF,EAAG,IAAGI,CAAC,CAAC,WAAA0nB,CAAY9nB,EAAEC,EAAEC,EAAEC,EAAEC,EAAEO,EAAEG,GAAG,MAAMC,EAAEE,GAAGd,EAAEiB,EAAE+e,KAAK8G,YAAY/mB,GAAGmB,EAAEN,EAAEqC,OAAOyb,OAAO,GAAG9d,GAAG,CAAC8e,MAAM,MAAMxe,EAAE+mB,QAAQnnB,EAAE,IAAIkf,KAAKiE,OAAOH,cAAchjB,EAAEb,EAAEO,KAAK,KAAK,MAAMW,EAAER,EAAEM,EAAEokB,QAAQxlB,EAAEC,IAAI,CAAA,EAAGoB,GAAG,OAAOC,EAAE,CAACtB,EAAEC,EAAEqB,GAAG,IAAI,CAAC,kBAAAsmB,CAAmB5nB,EAAEC,GAAG,OAAOA,EAAEmoB,UAAUnoB,EAAE4f,MAAM5f,EAAEmoB,SAASnoB,CAAC,CAAC,OAAAooB,CAAQroB,EAAEC,EAAE,KAAKC,EAAE,MAAM,MAAM,CAAC2nB,KAAK7nB,EAAEsC,MAAMrC,GAAGwF,KAAKzF,GAAGA,EAAEsC,MAAMpC,GAAGuF,KAAKzF,GAAG,CAAC,CAAC6f,MAAM7f,QAAQ,EAAE,SAASgoB,GAAGhoB,GAAG,MAAMC,EAAE,IAAIoiB,IAAIriB,GAAG,OAAOiF,MAAMua,KAAKvf,EAAE,CAAC,MAAMqoB,GAAG,WAAAvI,CAAY/f,GAAGmgB,KAAKoI,KAAKvoB,GAAG,CAACkgB,QAAO,GAAIC,KAAKqI,OAAO,GAAGrI,KAAKsI,WAAW,GAAGtI,KAAKuI,aAAa,IAAI7H,IAAIV,KAAKwI,UAAU,EAAExI,KAAKM,cAAc,CAAC1T,KAAK/M,GAAGmgB,KAAKuI,aAAa1I,IAAIhgB,GAAG+L,SAAS/L,GAAGmgB,KAAKsI,WAAWzoB,GAAG0gB,QAAQ1gB,GAAGmgB,KAAKqI,OAAOxoB,GAAGgN,KAAK,CAAChN,EAAEC,EAAEC,KAAK,MAAMC,EAAEH,EAAEkB,OAAOd,EAAEH,EAAEiD,OAAOlD,EAAEG,EAAE,GAAGH,EAAEG,EAAE,IAAI,IAAIQ,EAAE,GAAG,IAAIX,EAAEG,EAAE,GAAG,CAAC,MAAMD,EAAED,EAAEiD,OAAOlD,EAAEG,EAAE,GAAGH,EAAEG,EAAE,IAAIQ,EAAEwf,KAAK0G,QAAQK,KAAKhnB,EAAE,IAAIE,IAAI+f,KAAK0G,QAAQK,KAAK9mB,EAAE,MAAMO,EAAEwf,KAAK0G,QAAQK,KAAKhnB,EAAE6L,SAAS7L,EAAEwH,GAAG,IAAItH,IAAI+f,KAAK0G,QAAQK,KAAK9mB,GAAGJ,EAAEsF,KAAK,EAAE3E,IAAI,EAAE,EAAE,EAAE+G,EAAE,GAAG,MAAMzH,EAAEkgB,KAAKiE,OAAO,IAAItE,GAAG1c,OAAOyb,OAAOzb,OAAOyb,OAAO,GAAGsB,KAAKoI,MAAM,CAACvI,IAAIhgB,IAAI,MAAMC,EAAEC,EAAEC,GAAGoL,GAAGvL,GAAG,OAAOmgB,KAAKqI,OAAOroB,GAAGqhB,SAASvhB,EAAEC,EAAC,EAAG+f,IAAI,CAACjgB,EAAEE,EAAEC,EAAEC,KAAK,MAAMO,EAAEG,EAAEC,GAAGwK,GAAGvL,GAAGiB,EAAEkf,KAAKqI,OAAOznB,GAAGykB,QAAQ7kB,EAAEG,GAAE,GAAIM,EAAEhB,EAAE,KAAK,iBAAiBa,EAAE2nB,MAAM3nB,EAAE2nB,MAAM1oB,GAAG,IAAIA,EAAEe,EAAE6K,OAAO,KAAK,GAAG,IAAI3L,EAAE,CAAC,GAAGC,GAAG,IAAIa,EAAE2nB,MAAMxoB,EAAEa,EAAE6K,SAAS1L,GAAG,OAAM,EAAGa,EAAE6K,OAAO1L,EAAE,IAAI,MAAM,GAAG,OAAOF,IAAIE,GAAGa,EAAE6K,OAAO,OAAM,EAAM1L,GAAGJ,IAAII,GAAGa,EAAE6K,SAAS1L,IAAIa,EAAE4e,OAAO,IAAI5e,EAAE4e,OAAO,iBAAiB5e,EAAE6K,QAAQ7K,EAAE6K,SAAS1L,IAAI+f,KAAKqI,OAAOznB,GAAG+kB,WAAW,eAAe7kB,EAAE6K,SAAS1L,IAAIa,EAAE6K,OAAO1L,GAAG,MAAMiB,EAAE,IAAIlB,GAAG,IAAIA,EAAE,IAAI,MAAMA,GAAGkB,KAAKlB,EAAEc,EAAE4nB,SAAS,GAAG5nB,EAAE4nB,QAAQ1oB,EAAE,iBAAiBD,GAAG,GAAGC,GAAGD,EAAE,CAAC,IAAIF,EAAEwP,WAAWtP,GAAGmB,IAAIrB,EAAEA,EAAEyB,YAAYzB,GAAGE,IAAIA,EAAEsP,WAAWtP,GAAG,CAAC,MAAMoB,EAAEL,EAAE4e,QAAQ3f,EAAE,OAAOoB,IAAIL,EAAE4e,MAAM3f,GAAG,iBAAiBkB,GAAGnB,EAAEqiB,WAAW,IAAID,IAAI,CAACjhB,KAAKE,MAAMpB,EAAEigB,KAAKqI,OAAO,IAAI,IAAItE,GAAG,GAAG/D,KAAKiE,OAAOjE,KAAKM,eAAeN,KAAK0G,QAAQ,IAAID,GAAGzG,KAAKiE,OAAOlkB,EAAEigB,KAAK2I,QAAQC,KAAK5I,OAAOA,KAAK6I,IAAI,IAAIzB,GAAGpH,KAAKiE,OAAOjE,KAAK2I,QAAQC,KAAK5I,MAAM,CAAC,OAAA8I,CAAQjpB,GAAG,KAAKmgB,KAAKqI,OAAOrI,KAAKwI,YAAYxI,KAAKwI,YAAY,MAAM1oB,EAAEkgB,KAAKwI,UAAUzoB,EAAE,IAAIgkB,GAAGjkB,EAAEkgB,KAAKiE,OAAOjE,KAAKM,eAAe,OAAON,KAAKuI,aAAazI,IAAIjgB,EAAEC,GAAGkgB,KAAKqI,OAAOvoB,GAAGC,EAAEigB,KAAKsI,WAAWxoB,GAAGD,EAAEE,CAAC,CAAC,UAAAonB,CAAWtnB,EAAEC,GAAG,GAAGD,IAAIC,EAAE,OAAO,MAAMC,EAAEigB,KAAKuI,aAAa1I,IAAIhgB,GAAGmgB,KAAKuI,aAAajG,OAAOziB,GAAGmgB,KAAKuI,aAAazI,IAAIhgB,EAAEC,GAAGigB,KAAKsI,WAAWvoB,GAAGD,EAAEkgB,KAAK0G,QAAQS,WAAWtnB,EAAEC,GAAG,MAAME,EAAEggB,KAAKqI,OAAOtoB,GAAG2kB,aAAa1E,KAAKiE,OAAOjB,WAAWjjB,GAAE,EAAGC,EAAE,CAAC,UAAA+oB,CAAWlpB,GAAG,MAAMC,EAAEkgB,KAAKuI,aAAa1I,IAAIhgB,GAAGE,EAAEigB,KAAKqI,OAAOvoB,GAAG4kB,aAAa1E,KAAKuI,aAAajG,OAAOziB,GAAGmgB,KAAKqI,OAAOvoB,GAAGkgB,KAAKsI,WAAWxoB,GAAG,KAAKkgB,KAAKwI,UAAU,EAAExI,KAAK0G,QAAQS,WAAWtnB,EAAE,MAAMmgB,KAAKiE,OAAOjB,WAAWljB,GAAE,EAAGC,EAAE,CAAC,OAAA4oB,CAAQ9oB,GAAG,MAAM,iBAAiBA,IAAIA,EAAEmgB,KAAKuI,aAAa1I,IAAIhgB,IAAImgB,KAAKqI,OAAOxoB,EAAE,CAAC,SAAAmpB,GAAY,OAAOhJ,KAAK0G,OAAO,CAAC,QAAAuC,GAAW,OAAOjJ,KAAKiE,MAAM,CAAC,IAAAlI,CAAKlc,GAAGqpB,UAAUppB,EAAEqpB,aAAappB,EAAE,MAAM,MAAMC,EAAE,GAAG,OAAOggB,KAAKqI,OAAOnjB,SAAO,CAAGjF,EAAEO,KAAKP,EAAEulB,UAAU,CAACvlB,EAAEU,EAAEC,KAAK,MAAME,EAAEF,EAAE8e,MAAM7f,EAAEiB,KAAKhB,GAAG,IAAIE,EAAEe,SAASjB,GAAGE,EAAEe,OAAOhB,IAAIC,EAAEmF,KAAK,CAAC0e,GAAG1Y,GAAGlL,EAAEU,EAAEH,GAAGkf,MAAM5e,GAAI,GAAG,IAAGd,CAAC,CAAC,cAAAopB,GAAiB,OAAOpJ,KAAK6I,GAAG,ECE5q/D,IAAAQ,GAAA,CACdC,OAAO,CAENC,OAAU,SACVC,SAAY,WACZC,OAAU,SACVC,QAAW,UACXC,KAAQ,OACRC,OAAU,OACV,gBAAiB,SACjB,iBAAiB,iBACjBC,UAAY,kBACZC,SAAW,kBACX,kBAAkB,WAClB,cAAc,cACd,cAAc,yBAEd,YAAa,YACbC,KAAQ,OACRC,KAAQ,OACRC,KAAQ,OACRC,MAAS,QACTC,OAAU,SACVC,OAAU,SACVC,QAAW,UACXC,GAAM,KACNzF,MAAS,QAET0F,OAAU,SACVC,KAAQ,OAERC,MAAS,QAET,qBAAsB,qBACtB,qBAAsB,SACtB,mBAAoB,OACpBC,UAAa,YACb,oBAAqB,QACrB,uBAAwB,WACxB,sBAAsB,UACtB,wBAAwB,YAExBC,MAAS,QACT,cAAe,eACf,aAAc,OACd,cAAe,QACf,cAAe,QACf,eAAgB,OAEhB,WAAY,KACZ,cAAe,YACf,eAAgB,yBAChB,YAAa,sBAEb,kBAAmB,gBACnB,iBAAkB,OAClB,kBAAmB,QACnB,kBAAmB,QACnB,qBAAsB,WACtB,qBAAsB,WAEtB,eAAgB,aAChB,iBAAkB,iBAElB,iBAAkB,cAClB,wBAAyB,eACzB,iBAAkB,eAClB,iBAAkB,QAElBC,GAAM,KAEN,eAAgB,SAChB,qBAAsB,8CACtB,eAAgB,SAChB,cAAe,oBACf,oBAAoB,oBAEpB,aAAc,WACd,YAAa,OACb,WAAY,MAEZC,MAAS,QACT,iBAAiB,cACjB,gBAAgB,kBAEhBC,MAAS,QACT,gBAAgB,cAChB,YAAY,kBAEZC,SAAW,WACX,eAAe,eACf,YAAY,kBAEZC,QAAY,UACZtL,MAAU,QAEV,uBAAwB,yDACxB,uBAAwB,yDACxB,qBAAqB,+DACrB,cAAe,0BACf,aAAc,yBAEduL,MAAQ,QACR,cAAc,qBACd,iBAAiB,mBACjB,cAAc,aACd,eAAe,SACfC,OAAS,UACTC,UAAY,iBACZC,WAAa,iBACb,cAAc,mBACd,YAAY,kBACZC,OAAS,eACT,cAAc,SACd,UAAU,iBACV,UAAU,iBACV,aAAa,aACb,cAAc,cACd,gBAAgB,WAChB,iBAAiB,YACjB,cAAc,cACd,gBAAiB,qBAEjBC,QAAU,UAEVlF,MAAQ,QACRC,OAAS,SACT,cAAe,iBACf,eAAe,mBAEf,YAAY,OACZ,cAAc,SACd,aAAa,aAEb,eAAe,SACf,eAAe,SACf,eAAe,SAEf,cAAc,WACd,kBAAkB,eAClB,kBAAkB,YAClB,oBAAoB,aAEpB,aAAa,OACb,aAAa,OACb,YAAY,MACZ,cAAc,QACd,YAAY,MACZ,cAAc,QACd,eAAe,SACf,mBAAmB,cACnB,gBAAgB,UAEhB,cAAc,QACd,eAAe,SACf,eAAe,SACf,cAAc,QACd,oBAAoB,cACpB,oBAAoB,QACpB,oBAAoB,QACpB,kBAAkB,2BAClB,kBAAkB,2BAClB,kBAAkB,uBAClB,kBAAkB,uBAClB,oBAAoB,QACpB,qBAAqB,SACrB,oBAAoB,QACpB,kBAAkB,MAClB,mBAAmB,OACnB,mBAAmB,uDAEnB,eAAe,SACf,mBAAmB,wBACnB,mBAAmB,4BACnB,qBAAqB,eACrB,qBAAqB,QACrB,oBAAoB,OACpB,qBAAqB,QACrB,sBAAsB,SACtB,sBAAsB,iBACtB,mBAAmB,MACnB,sBAAsB,SACtB,sBAAsB,SAEtB,aAAa,OACb,gBAAgB,UAChB,mBAAmB,aACnB,cAAc,QACd,qBAAqB,QACrB,WAAW,WACX,aAAa,OACb,gBAAgB,WAChB,cAAc,SAEd,kBAAkB,mBAClB,gBAAgB,UAChB,aAAa,OAEb,gBAAgB,UAChB,uBAAuB,SACvB,yBAAyB,WACzB,wBAAwB,UACxB,sBAAsB,QAEtB,eAAe,KAEf,qBAAqB,gBAGrB,sBAAuB,sBACvB,yBAA0B,yBAC1B,yBAA0B,yBAC1B,gCAAiC,sCACjC,8BAA+B,YAC/B,kBAAmB,OACnB,iBAAkB,MAClB,kBAAmB,OACnB,oBAAqB,SACrB,kBAAmB,OACnB,yBAA0B,cAC1B,mBAAoB,QACpB,qBAAsB,gBACtB,0BAA2B,eAC3B,2BAA4B,gBAC5B,yBAA0B,cAC1B,2BAA4B,gBAC5B,0BAA2B,eAC3B,wBAAyB,OACzB,2BAA4B,UAC5B,+BAAgC,cAChC,8BAA+B,QAC/B,gCAAiC,eACjC,wBAAyB,OACzB,2BAA4B,WAE7BkF,SAAU,CACTC,MAAS,aACTC,WAAc,mBACd,cAAe,cACf,YAAa,YACb,aAAc,mBACd,iBAAkB,iBAClBpB,QAAW,UACX,aAAc,gBACd,eAAgB,cAChB,cAAe,aACf,gBAAiB,eACjB,iBAAkB,gBAClB,cAAe,cACf,gBAAiB,gBACjB,qBAAsB,yBACtB,gBAAiB,eACjB,aAAc,aACd,eAAgB,eAChB,cAAe,cACf,YAAa,YACb,eAAgB,eAChB,eAAgB,eAChBqB,KAAQ,QACRC,KAAQ,YACRC,KAAQ,OACRC,KAAQ,OACR1B,OAAU,gBACV,oBAAoB,0BACpB,oBAAoB,0BACpB,cAAe,OACf,aAAc,SACd2B,UAAa,YACbC,OAAU,SACV,iBAAkB,sBAClB,eAAgB,oBAChB,gBAAiB,qBACjB,gBAAiB,0BACjB,gBAAiB,wBACjB,iBAAmB,0BACnB,YAAa,kCACbC,YAAe,yBACf,YAAa,YACb,YAAa,mBACbC,MAAS,QACT,WAAY,WACZjG,IAAO,OACPoE,OAAU,UACVK,MAAS,QACT,YAAa,QACb,gBAAiB,QACjB,cAAe,UACf,kBAAoB,kBACpB,kBAAmB,kBACnByB,MAAS,QACT,aAAc,aACdC,WAAc,aACdpB,SAAW,WACXD,MAAS,QACTD,MAAS,SAEVuB,MAAM,CACL,eAAgB,eAChB,eAAgB,eAChB,aAAc,aACdC,KAAQ,OACRC,IAAO,MACP,YAAa,YACb,eAAgB,oBAChB,eAAgB,kBAChB7B,MAAS,SACT,aAAc,oBACd8B,KAAQ,OACRX,KAAQ,OACRC,KAAQ,OACRW,QAAW,UACX,gBAAiB,gBACjB,gBAAiB,gBACjB,cAAe,cACf,cAAe,cACf,gBAAiB,gBACjBC,KAAQ,OACR,aAAc,aACd,aAAc,aACd,WAAY,WACZ,WAAY,WACZ,aAAc,aACdC,OAAU,SACV,qBAAsB,qBACtBnD,OAAU,SACVS,KAAQ,OACRiC,MAAS,QACT,cAAc,SACd,cAAc,SACd,4BAA4B,sBAC5B,yBAAyB,YACzB,gBAAgB,UAChB,iBAAiB,WACjB,YAAY,MACZpB,MAAS,QACT,iBAAiB,cACjB,gBAAgB,kBAChBC,MAAS,QACT,gBAAgB,cAChB,YAAY,kBACZC,SAAW,WACX,eAAe,eACf,YAAY,kBACZrD,KAAQ,OACR,WAAY,WACZ,YAAa,eACb9V,KAAQ,OACR,WAAY,cACZ,YAAa,cACb+a,KAAQ,OACR,iBAAkB,0BAClB,cAAe,uBACf,iBAAkB,sBAClB,eAAgB,oBAChB,gBAAiB,qBACjB,gBAAiB,wBACjB,eAAgB,eAChB,YAAa,mBACb1B,MAAS,QACT,gBAAiB,0BACjB,cAAc,UACd2B,IAAO,MACPvF,KAAQ,OACRG,MAAS,QACT,gBAAiB,gBACjB,eAAgB,SAChB,iBAAkB,WAClB,eAAgB,SAChB,mBAAoB,sBACpB,mBAAoB,aACpB,sBAAuB,sBACvB,yBAA0B,yBAC1B,yBAA0B,yBAC1B,gCAAiC,sCACjC2E,WAAc,cAEfU,MAAM,CACL,aAAa,UACb,iBAAiB,QACjB,eAAe,oBAEhBC,WAAW,CACVP,KAAO,QACP,mBAAoBtpB,OAAOyb,ODjYyq/D,CAAM/C,IAAI,CAAC,CAAC,UAAU,qCAAqC,CAAC,UAAU,sCAAsC,CAAC,UAAU,sCAAsClI,QAAQ,CAAC,CAAC,UAAU,uEAAuE,CAAC,UAAU,wEAAwEC,SAAS,CAAC,CAAC,SAAS,gFAAgF,CAAC,SAAS,iFAAiFmB,MAAM,CAAC,CAAC,SAAS,gDAAgD,CAAC,SAAS,iDAAiDC,OAAO,CAAC,CAAC,SAAS,gDAAgD,CAAC,SAAS,iDAAiDsE,IAAI,CAAC,CAAC,UAAU,wFAAwF,CAAC,UAAU,yFAAyFF,IAAI,CAAC,CAAC,UAAU,wFAAwF,CAAC,UAAU,yFAAyFiC,KAAK,CAAC,CAAC,SAAS,oDAAoDjB,MAAM,CAAC,CAAC,SAAS,yCAAyC,CAAC,QAAQ,uDAAuDpB,IAAI,CAAC,CAAC,SAAS,sDAAsD,CAAC,OAAO,qDAAqD7C,IAAI,CAAC,CAAC,SAAS,6CAA6CkE,QAAQ,CAAC,CAAC,UAAU,oDAAoD,CAAC,UAAU,sDAAsDyB,WAAW,CAAC,CAAC,SAAS,6DAA6D,CAAC,SAAS,+DAA+DvJ,IAAI,CAAC,CAAC,SAAS,uDAAuDkI,KAAK,GAAGC,YAAY,CAAC,CAAC,SAAS,mEAAmE,CAAC,MAAM,oEAAoEE,MAAM,CAAC,CAAC,SAAS,kCAAkC,CAAC,aAAa,2DAA2DE,QAAQ,CAAC,CAAC,SAAS,qCAAqC,CAAC,aAAa,2DAA2DD,UAAU,CAAC,CAAC,SAAS,uCAAuC,CAAC,aAAa,2DAA2DhC,IAAI,CAAC,CAAC,SAAS,yDAAyDxE,QAAQ,CAAC,CAAC,SAAS,gDAAgD,CAAC,eAAe,iDAAiDmC,MAAM,CAAC,CAAC,SAAS,gDAAgD,CAAC,eAAe,iDAAiDlT,YAAY,CAAC,CAAC,QAAQ,oDAAoD,CAAC,QAAQ,qDAAqD,CAAC,QAAQ,qDAAqDE,IAAI,CAAC,CAAC,OAAO,uCAAuC,CAAC,YAAY,6DAA6D,CAAC,YAAY,mDAAmDD,KAAK,CAAC,CAAC,OAAO,wDAAwD,CAAC,YAAY,mGAAmGE,MAAM,CAAC,CAAC,OAAO,qEAAqE,CAAC,YAAY,iGAAiGC,MAAM,CAAC,CAAC,OAAO,+DAA+DC,MAAM,CAAC,CAAC,OAAO,qDAAqDC,OAAO,CAAC,CAAC,OAAO,gEAAgEC,KAAK,CAAC,CAAC,OAAO,yDAAyDC,IAAI,CAAC,CAAC,OAAO,sDAAsDmB,OAAO,CAAC,CAAC,YAAY,oCAAoC,CAAC,cAAc,wCAAwC,CAAC,YAAY,0DAA0DX,KAAK,CAAC,CAAC,YAAY,oCAAoC,CAAC,cAAc,wCAAwC,CAAC,YAAY,oFAAoFgB,QAAQ,CAAC,CAAC,WAAW,kCAAkC,CAAC,YAAY,0DAA0D,CAAC,YAAY,kDAAkD,CAAC,WAAW,iDAAiDJ,WAAW,CAAC,CAAC,OAAO,iCAAiC,CAAC,WAAW,kCAAkC,CAAC,WAAW,uCAAuC,CAAC,WAAW,oFAAoFgD,IAAI,GAAGR,KAAK,CAAC,CAAC,OAAO,8BAA8B,CAAC,QAAQ,+BAA+B,CAAC,MAAM,8BAA8BC,KAAK,CAAC,CAAC,OAAO,uDAAuD,CAAC,SAAS,yDAAyD,CAAC,SAAS,0DAA0DG,KAAK,CAAC,CAAC,OAAO,kCAAkCD,MAAM,CAAC,CAAC,gBAAgB,kCAAkCD,IAAI,CAAC,CAAC,OAAO,kCAAkCG,KAAK,CAAC,CAAC,gBAAgB,kCAAkCC,OAAO,CAAC,CAAC,gBAAgB,oCAAoCC,OAAO,CAAC,CAAC,gBAAgB,yDAAyDE,QAAQ,CAAC,CAAC,aAAa,4DAA4D,CAAC,WAAW,0DAA0D,CAAC,OAAO,6DAA6D6U,OAAO,CAAC,CAAC,eAAe,sCAAsC,CAAC,gBAAgB,yDAAyD,CAAC,gBAAgB,2DAA2DC,QAAQ,CAAC,CAAC,eAAe,mCAAmC,CAAC,cAAc,oDAAoD,CAAC,YAAY,yDAAyD,CAAC,eAAe,0GAA0GE,QAAQ,CAAC,CAAC,eAAe,mEAAmE,CAAC,cAAc,uDAAuD,CAAC,mBAAmB,qEAAqE,CAAC,eAAe,uEAAuEC,QAAQ,CAAC,CAAC,SAAS,+BAA+B,CAAC,eAAe,2CAA2C,CAAC,eAAe,2CAA2C,CAAC,YAAY,gDAAgD,CAAC,aAAa,+HAA+H,CAAC,cAAc,kIAAkIC,MAAM,CAAC,CAAC,QAAQ,qDAAqD,CAAC,UAAU,yDAAyD,CAAC,UAAU,4DAA4D,CAAC,WAAW,0DAA0DC,MAAM,CAAC,CAAC,eAAe,iDAAiD,CAAC,eAAe,qDAAqD,CAAC,aAAa,iGAAiGC,OAAO,CAAC,CAAC,eAAe,+BAA+B,CAAC,eAAe,2CAA2C,CAAC,aAAa,+HAA+H,CAAC,cAAc,kIAAkIC,OAAO,CAAC,CAAC,YAAY,8DAA8D,CAAC,SAAS,mDAAmD,CAAC,SAAS,qDAAqDS,QAAQ,CAAC,CAAC,QAAQ,kCAAkCC,SAAS,CAAC,CAAC,QAAQ,kCAAkCC,OAAO,CAAC,CAAC,QAAQ,0CAA0CC,MAAM,CAAC,CAAC,QAAQ,0CAA0CC,UAAU,CAAC,CAAC,QAAQ,kCAAkCC,SAAS,CAAC,CAAC,QAAQ,kCAAkCC,OAAO,CAAC,CAAC,QAAQ,kCAAkC/b,EAAE,CAAC,CAAC,QAAQ,gDAAgDkb,GAAG,CAAC,CAAC,eAAe,mFAAmF,CAAC,gBAAgB,sEAAsE,CAAC,iBAAiB,wEAAwEC,IAAI,CAAC,CAAC,WAAW,+DAA+D,CAAC,WAAW,iEAAiEC,IAAI,CAAC,CAAC,UAAU,oFAAoFC,GAAG,CAAC,CAAC,WAAW,+DAA+D,CAAC,WAAW,iEAAiEC,MAAM,GAAGC,KAAK,GAAGvL,KAAK,CAAC,CAAC,SAAS,qGAAqGE,MAAM,CAAC,CAAC,SAAS,0DAA0DE,KAAK,CAAC,CAAC,SAAS,yFAAyFE,MAAM,CAAC,CAAC,SAAS,mEAAmEC,IAAI,CAAC,CAAC,UAAU,qCAAqC,CAAC,UAAU,uCAAuCC,OAAO,CAAC,CAAC,aAAa,kEAAkEE,KAAK,CAAC,CAAC,SAAS,mGAAmGE,MAAM,CAAC,CAAC,SAAS,+BAA+BE,KAAK,CAAC,CAAC,SAAS,uDAAuDC,MAAM,CAAC,CAAC,QAAQ,kDAAkD,CAAC,QAAQ,mDAAmDE,MAAM,CAAC,CAAC,SAAS,gDAAgDC,OAAO,CAAC,CAAC,UAAU,uCAAuC,CAAC,UAAU,yCAAyCG,KAAK,CAAC,CAAC,SAAS,oDAAoD,CAAC,QAAQ,qCAAqC,CAAC,aAAa,mFAAmFE,UAAU,CAAC,CAAC,WAAW,sCAAsC,CAAC,SAAS,+CAA+C,CAAC,gBAAgB,uDAAuD,CAAC,aAAa,wFAAwF,YAAY,CAAC,CAAC,SAAS,6CAA6C,CAAC,gBAAgB,yDAAyD,CAAC,QAAQ,mCAAmC,mBAAmB,CAAC,CAAC,SAAS,mFAAmF,CAAC,gBAAgB,uHAAuH,CAAC,WAAW,qHAAqH,CAAC,YAAY,8MAA8M,aAAa,CAAC,CAAC,WAAW,sCAAsC,CAAC,SAAS,+CAA+C,CAAC,gBAAgB,uDAAuD,CAAC,aAAa,wFAAwFC,OAAO,CAAC,CAAC,UAAU,wCAAwC,CAAC,UAAU,yCAAyCC,UAAU,CAAC,CAAC,SAAS,2CAA2C,CAAC,eAAe,yFAAyFC,MAAM,CAAC,CAAC,UAAU,wCAAwC,CAAC,UAAU,yCAAyCC,UAAU,CAAC,CAAC,SAAS,2CAA2C,CAAC,eAAe,qGAAqGC,OAAO,CAAC,CAAC,UAAU,wCAAwC,CAAC,UAAU,yCAAyCE,OAAO,CAAC,CAAC,SAAS,wCAAwC,CAAC,gBAAgB,uDAAuDC,QAAQ,CAAC,CAAC,SAAS,wCAAwC,CAAC,gBAAgB,uDAAuDC,QAAQ,CAAC,CAAC,WAAW,8BAA8B,CAAC,QAAQ,mCAAmC,CAAC,SAAS,6CAA6CC,OAAO,CAAC,CAAC,SAAS,qCAAqC,CAAC,SAAS,6CAA6CC,IAAI,CAAC,CAAC,SAAS,kEAAkEC,KAAK,CAAC,CAAC,SAAS,oCAAoCC,IAAI,CAAC,CAAC,SAAS,6CAA6CE,KAAK,CAAC,CAAC,SAAS,cAAcG,WAAW,CAAC,CAAC,QAAQ,uDAAuDC,MAAM,CAAC,CAAC,SAAS,+CAA+C,CAAC,SAAS,iDAAiD,eAAe,CAAC,CAAC,SAAS,+CAA+C,CAAC,SAAS,iDAAiD,eAAe,CAAC,CAAC,SAAS,+CAA+C,CAAC,SAAS,iDAAiDC,IAAI,CAAC,CAAC,SAAS,6CAA6CC,KAAK,CAAC,CAAC,SAAS,cAAcC,QAAQ,CAAC,CAAC,SAAS,+DAA+D,CAAC,SAAS,oLAAoLC,QAAQ,CAAC,CAAC,SAAS,oEAAoE,CAAC,SAAS,6KAA6KC,QAAQ,CAAC,CAAC,SAAS,8DAA8D,CAAC,SAAS,mLAAmLC,QAAQ,CAAC,CAAC,SAAS,kDAAkD,CAAC,QAAQ,+EAA+EC,QAAQ,CAAC,CAAC,QAAQ,oEAAoEE,MAAM,CAAC,CAAC,UAAU,+BAA+B,CAAC,UAAU,iCAAiCC,MAAM,CAAC,CAAC,UAAU,uCAAuC,CAAC,UAAU,yCAAyCC,OAAO,CAAC,CAAC,UAAU,yCAAyC,CAAC,UAAU,6CAA6CC,GAAG,CAAC,CAAC,UAAU,uCAAuC,CAAC,UAAU,yCAAyCC,IAAI,CAAC,CAAC,cAAc,kDAAkD,CAAC,cAAc,4GAA4GC,KAAK,CAAC,CAAC,IAAI,oDAAoDC,KAAK,CAAC,CAAC,SAAS,yDAAyDG,KAAK,CAAC,CAAC,SAAS,kDAAkDC,WAAW,CAAC,CAAC,SAAS,oDAAoDC,OAAO,CAAC,CAAC,IAAI,qEAAqEC,UAAU,CAAC,CAAC,IAAI,yFAAyFE,MAAM,CAAC,CAAC,SAAS,gCAAgCE,IAAI,CAAC,CAAC,UAAU,+BAA+B,CAAC,UAAU,iCAAiCC,QAAQ,CAAC,CAAC,UAAU,uCAAuC,CAAC,UAAU,yCAAyCG,OAAO,CAAC,CAAC,SAAS,6CAA6C,CAAC,OAAO,mFAAmFC,GAAG,CAAC,CAAC,UAAU,uCAAuC,CAAC,UAAU,yCAAyCC,IAAI,CAAC,CAAC,UAAU,uCAAuC,CAAC,UAAU,yCAAyCC,QAAQ,CAAC,CAAC,UAAU,uCAAuC,CAAC,UAAU,yCAAyCC,QAAQ,CAAC,CAAC,SAAS,mEAAmE,CAAC,SAAS,oLAAoLC,QAAQ,CAAC,CAAC,SAAS,qEAAqEC,QAAQ,CAAC,CAAC,SAAS,kEAAkE,CAAC,SAAS,oLAAoLC,MAAM,CAAC,CAAC,UAAU,gCAAgCC,UAAU,CAAC,CAAC,UAAU,gCAAgCC,YAAY,CAAC,CAAC,UAAU,iEAAiEC,MAAM,CAAC,CAAC,UAAU,8DAA8DC,OAAO,CAAC,CAAC,UAAU,yEAAyEC,MAAM,GAAGC,MAAM,CAAC,CAAC,UAAU,gEAAgEC,OAAO,CAAC,CAAC,UAAU,2EAA2EC,MAAM,CAAC,CAAC,WAAW,gDAAgD,CAAC,WAAW,kDAAkDC,MAAM,CAAC,CAAC,UAAU,mEAAmEC,KAAK,CAAC,CAAC,UAAU,yEAAyEC,QAAQ,CAAC,CAAC,UAAU,+BAA+B,CAAC,SAAS,qCAAqCC,UAAU,CAAC,CAAC,WAAW,+BAA+B,CAAC,WAAW,gCAAgCE,OAAO,CAAC,CAAC,UAAU,gCAAgCC,MAAM,CAAC,CAAC,UAAU,8DAA8DC,OAAO,CAAC,CAAC,UAAU,yEAAyEC,MAAM,CAAC,CAAC,UAAU,4DAA4DC,OAAO,CAAC,CAAC,UAAU,uEAAuEC,OAAO,CAAC,CAAC,UAAU,mEAAmEC,MAAM,CAAC,CAAC,WAAW,+BAA+B,CAAC,WAAW,gCAAgCC,MAAM,CAAC,CAAC,WAAW,+BAA+B,CAAC,WAAW,gCAAgCC,MAAM,CAAC,CAAC,UAAU,+DAA+DE,MAAM,CAAC,CAAC,QAAQ,kDAAkD,CAAC,IAAI,gFAAgFC,GAAG,CAAC,CAAC,SAAS,yDAAyDE,MAAM,CAAC,CAAC,SAAS,uDAAuDC,GAAG,CAAC,CAAC,UAAU,uCAAuC,CAAC,UAAU,yCAAyCC,IAAI,CAAC,CAAC,UAAU,uCAAuC,CAAC,UAAU,yCAAyCE,OAAO,CAAC,CAAC,UAAU,uEAAuE,CAAC,UAAU,wEAAwEE,MAAM,CAAC,CAAC,UAAU,gDAAgD,CAAC,UAAU,+CAA+CC,IAAI,CAAC,CAAC,SAAS,uCAAuC,CAAC,UAAU,yCAAyCC,OAAO,CAAC,CAAC,SAAS,gDAAgD,CAAC,eAAe,iDAAiDC,YAAY,CAAC,CAAC,wBAAwB,wHAAwHC,SAAS,CAAC,CAAC,UAAU,qCAAqC,CAAC,UAAU,yCAAyCC,GAAG,CAAC,CAAC,UAAU,uCAAuC,CAAC,UAAU,yCAAyCC,QAAQ,CAAC,CAAC,SAAS,mQAAmQ,CAAC,SAAS,qMAAqMC,QAAQ,CAAC,CAAC,SAAS,oRAAoRC,QAAQ,CAAC,CAAC,SAAS,mRAAmR,CAAC,SAAS,qMAAqMC,IAAI,CAAC,CAAC,SAAS,wDAAwDC,WAAW,CAAC,CAAC,QAAQ,0BAA0B,CAAC,IAAI,kDAAkD,iBAAiB,CAAC,CAAC,QAAQ,0BAA0B,CAAC,IAAI,kDAAkD,iBAAiB,CAAC,CAAC,QAAQ,0BAA0B,CAAC,IAAI,2EAA2EC,OAAO,CAAC,CAAC,SAAS,wCAAwC,CAAC,gBAAgB,uDAAuDxE,GAAG,GAAGyE,IAAI,CAAC,CAAC,SAAS,yCAAyC,CAAC,QAAQ,uDAAuDG,SAAS,CAAC,CAAC,QAAQ,qDAAqD,CAAC,QAAQ,4CAA4C,eAAe,CAAC,CAAC,QAAQ,qDAAqD,CAAC,QAAQ,4CAA4C,eAAe,CAAC,CAAC,QAAQ,qDAAqD,CAAC,QAAQ,iDAAiDC,SAAS,CAAC,CAAC,YAAY,uCAAuC,CAAC,cAAc,uCAAuCC,QAAQ,CAAC,CAAC,QAAQ,sDAAsDG,MAAM,CAAC,CAAC,SAAS,8EAA8E,CAAC,OAAO,kDAAkDI,IAAI,CAAC,CAAC,SAAS,kEAAkEC,KAAK,GAAGC,KAAK,CAAC,CAAC,SAAS,6CAA6CC,IAAI,CAAC,CAAC,SAAS,gEAAgEC,KAAK,CAAC,CAAC,SAAS,oCAAoCC,MAAM,CAAC,CAAC,QAAQ,kDAAkD,CAAC,IAAI,iFAAiFE,OAAO,CAAC,CAAC,SAAS,oDAAoDC,MAAM,CAAC,CAAC,UAAU,sDAAsD,CAAC,UAAU,0CAA0C,UAAU,CAAC,CAAC,UAAU,sDAAsD,CAAC,UAAU,0CAA0C,UAAU,CAAC,CAAC,UAAU,sDAAsD,CAAC,UAAU,0CAA0CC,OAAO,CAAC,CAAC,UAAU,sDAAsD,CAAC,UAAU,0CAA0CC,OAAO,CAAC,CAAC,UAAU,sDAAsD,CAAC,UAAU,0CAA0CC,QAAQ,CAAC,CAAC,UAAU,sDAAsD,CAAC,UAAU,0CAA0CC,MAAM,CAAC,CAAC,YAAY,yDAAyD,CAAC,YAAY,4DAA4DC,SAAS,CAAC,CAAC,eAAe,kIAAkI,CAAC,OAAO,qDAAqD,CAAC,OAAO,sDAAsDG,MAAM,CAAC,CAAC,UAAU,2DAA2D,CAAC,UAAU,4DAA4DC,SAAS,CAAC,CAAC,UAAU,iEAAiE,CAAC,UAAU,mEAAmEE,SAAS,CAAC,CAAC,UAAU,iEAAiE,CAAC,UAAU,mEAAmEC,QAAQ,CAAC,CAAC,UAAU,iEAAiE,CAAC,UAAU,mEAAmEC,IAAI,CAAC,CAAC,SAAS,mEAAmEC,KAAK,CAAC,CAAC,SAAS,+BAA+BE,MAAM,CAAC,CAAC,SAAS,qCAAqC,CAAC,aAAa,8DAA8DC,IAAI,CAAC,CAAC,UAAU,wCAAwC,CAAC,UAAU,0CAA0C,QAAQ,CAAC,CAAC,UAAU,wCAAwC,CAAC,UAAU,0CAA0C,QAAQ,CAAC,CAAC,UAAU,wCAAwC,CAAC,UAAU,0CAA0CC,KAAK,CAAC,CAAC,UAAU,wCAAwC,CAAC,UAAU,0CAA0CC,KAAK,CAAC,CAAC,UAAU,wCAAwC,CAAC,UAAU,0CAA0CC,MAAM,CAAC,CAAC,UAAU,wCAAwC,CAAC,UAAU,0CAA0CC,QAAQ,CAAC,CAAC,IAAI,0DAA0D,CAAC,QAAQ,8CAA8C,CAAC,OAAO,8CAA8C,CAAC,aAAa,mDAAmD,eAAe,CAAC,CAAC,IAAI,0DAA0D,CAAC,QAAQ,8CAA8C,CAAC,OAAO,8CAA8C,CAAC,aAAa,mDAAmD7Y,KAAK,CAAC,CAAC,SAAS,0CAA0CG,MAAM,CAAC,CAAC,OAAO,iCAAiCC,KAAK,CAAC,CAAC,OAAO,0DAA0DE,MAAM,CAAC,CAAC,QAAQ,+CAA+C,CAAC,QAAQ,iDAAiDE,MAAM,CAAC,CAAC,SAAS,6CAA6C,CAAC,WAAW,sDAAsD,CAAC,YAAY,mFAAmFE,YAAY,CAAC,CAAC,OAAO,8CAA8C,CAAC,oBAAoB,+CAA+C,CAAC,kBAAkB,uDAAuDE,aAAa,CAAC,CAAC,OAAO,6BAA6B,CAAC,qBAAqB,oFAAoFE,WAAW,CAAC,CAAC,OAAO,mEAAmE,CAAC,qBAAqB,+DAA+DC,aAAa,CAAC,CAAC,OAAO,yDAAyD,CAAC,qBAAqB,sFAAsF,CAAC,cAAc,sEAAsEC,KAAK,CAAC,CAAC,OAAO,iCAAiC,CAAC,eAAe,kDAAkD5C,EAAE,CAAC,CAAC,QAAQ,2CAA2CgD,KAAK,CAAC,CAAC,qBAAqB,CAAC,6BAA6BI,YAAY,CAAC,CAAC,QAAQ,oDAAoD,CAAC,SAAS,oEAAoE6C,UAAU,CAAC,CAAC,YAAY,2CAA2CC,KAAK,CAAC,CAAC,WAAW,2BAA2B,CAAC,aAAa,8BAA8BC,QAAQ,CAAC,CAAC,aAAa,6BAA6B,CAAC,WAAW,2BAA2B,CAAC,SAAS,qFAAqFC,MAAM,CAAC,CAAC,aAAa,+CAA+C,CAAC,SAAS,2DAA2DE,QAAQ,CAAC,CAAC,aAAa,0FAA0F,CAAC,SAAS,+DAA+DC,WAAW,CAAC,CAAC,OAAO,0DAA0DC,YAAY,CAAC,CAAC,aAAa,6BAA6B,CAAC,WAAW,2BAA2B,CAAC,WAAW,gDAAgD,mBAAmB,CAAC,CAAC,aAAa,6BAA6B,CAAC,WAAW,2BAA2B,CAAC,UAAU,+EAA+E,CAAC,WAAW,4EAA4EC,UAAU,CAAC,CAAC,YAAY,uEAAuEG,QAAQ,CAAC,CAAC,aAAa,yDAAyD,CAAC,cAAc,qDAAqDE,QAAQ,CAAC,CAAC,gBAAgB,iEAAiE,CAAC,cAAc,8EAA8EC,QAAQ,CAAC,CAAC,aAAa,2CAA2C,CAAC,OAAO,0DAA0D,CAAC,WAAW,oEAAoE,eAAe,CAAC,CAAC,aAAa,6BAA6B,CAAC,OAAO,2BAA2B,CAAC,UAAU,+EAA+E,CAAC,WAAW,mFAAmFC,SAAS,CAAC,CAAC,aAAa,6BAA6B,CAAC,WAAW,2BAA2B,CAAC,QAAQ,8DAA8DM,QAAQ,CAAC,CAAC,KAAK,yCAAyC,CAAC,KAAK,8CAA8C,CAAC,KAAK,0CAA0C,CAAC,OAAO,wCAAwC,CAAC,MAAM,oCAAoC,CAAC,OAAO,mFAAmF,CAAC,QAAQ,sDAAsD,CAAC,OAAO,8DAA8DC,IAAI,CAAC,CAAC,OAAO,6CAA6C,CAAC,OAAO,wDAAwD,CAAC,KAAK,yEAAyE,CAAC,KAAK,gHAAgH,CAAC,OAAO,+FAA+FC,GAAG,CAAC,CAAC,OAAO,2CAA2C,CAAC,OAAO,kDAAkD,CAAC,MAAM,iFAAiF,CAAC,KAAK,yHAAyH,CAAC,OAAO,+FAA+FC,GAAG,CAAC,CAAC,OAAO,oCAAoC,CAAC,UAAU,yDAAyD,CAAC,OAAO,sDAAsD,CAAC,SAAS,qDAAqD,CAAC,QAAQ,kEAAkEC,IAAI,CAAC,CAAC,OAAO,oCAAoC,CAAC,UAAU,yDAAyD,CAAC,OAAO,sDAAsD,CAAC,SAAS,qDAAqD,CAAC,SAAS,6EAA6EE,OAAO,CAAC,CAAC,SAAS,oCAAoC,CAAC,WAAW,oFAAoFC,SAAS,CAAC,CAAC,oBAAoB,8DAA8D,CAAC,WAAW,0FAA0FK,SAAS,CAAC,CAAC,iBAAiB,iDAAiD,CAAC,WAAW,0FAA0FC,OAAO,CAAC,CAAC,eAAe,kDAAkD,CAAC,QAAQ,sDAAsDC,WAAW,CAAC,CAAC,YAAY,yCAAyC,CAAC,WAAW,sEAAsEC,IAAI,CAAC,CAAC,SAAS,8DAA8D,CAAC,QAAQ,iEAAiEC,KAAK,CAAC,CAAC,OAAO,2CAA2C,CAAC,MAAM,6CAA6C,CAAC,OAAO,kDAAkD,CAAC,KAAK,oEAAoE,CAAC,KAAK,iFAAiF,CAAC,OAAO,+FAA+FC,MAAM,CAAC,CAAC,OAAO,4BAA4B,CAAC,MAAM,+CAA+C,CAAC,OAAO,gCAAgC,CAAC,KAAK,6BAA6BC,IAAI,CAAC,CAAC,OAAO,4CAA4C,CAAC,SAAS,qDAAqD,CAAC,SAAS,uDAAuDC,QAAQ,CAAC,CAAC,cAAc,iDAAiD,CAAC,QAAQ,sDAAsDC,KAAK,CAAC,CAAC,OAAO,2CAA2C,CAAC,MAAM,2CAA2C,CAAC,KAAK,oEAAoE,CAAC,KAAK,yGAAyG,CAAC,OAAO,+FAA+FC,UAAU,CAAC,CAAC,OAAO,uCAAuC,CAAC,KAAK,8CAA8C,CAAC,KAAK,8CAA8CC,KAAK,CAAC,CAAC,OAAO,2CAA2C,CAAC,MAAM,6CAA6C,CAAC,OAAO,wDAAwD,CAAC,KAAK,oEAAoE,CAAC,KAAK,iFAAiF,CAAC,OAAO,+FAA+FC,GAAG,CAAC,CAAC,OAAO,2CAA2C,CAAC,OAAO,4CAA4C,CAAC,MAAM,2CAA2C,CAAC,KAAK,yDAAyD,CAAC,OAAO,sFAAsFC,IAAI,CAAC,CAAC,OAAO,oCAAoC,CAAC,UAAU,yDAAyD,CAAC,OAAO,sDAAsD,CAAC,SAAS,sDAAsDC,WAAW,CAAC,CAAC,aAAa,8CAA8C,CAAC,WAAW,4CAA4C,CAAC,WAAW,kDAAkDC,WAAW,CAAC,CAAC,aAAa,8CAA8C,CAAC,WAAW,4CAA4C,CAAC,QAAQ,+BCiYhtnG,CACrD8hB,MAAS,CACR,CACC,MACA,yBAGFC,UAAa,CACZ,CACC,gBACA,6JAED,CACC,gBACA,qNAGFC,UAAa,CACZ,CACC,QACA,kCAED,CACC,OACA,4BAED,CACC,iBACA,4BAED,CACC,iBACA,6BAGFC,SAAY,CACX,CACC,QACA,6BAGFC,MAAS,CACR,CACC,aACA,4CAED,CACC,aACA,4CAED,CACC,YACA,uCAED,CACC,YACA,0CAED,CACC,QACA,oCAKJC,QAAQ,CACPC,WAAc,aACdC,WAAc,cACdC,eAAkB,eAClBC,eAAkB,yBAClBC,cAAiB,oBACjBC,UAAa,WACbC,WAAc,CACb,UACA,SACA,WACA,+9GC5cHC,MAAMC,KAAKC,YAAczE,GCDzBuE,MAAMG,QAAQ,CACblhB,KAAM,eACNmhB,SAAS,aACTC,MAAO,SAASC,GACfA,EAAOC,QAAW,CACjBxB,KAAK,cACLyB,KAAK,CACJzB,KAAM,eACN0B,QAAS,CACRC,SAAS,aAEVC,OAAO,EAAGC,OAAO,GAElB9G,KAAMwG,EAAOxG,KAEf,GACCkG,MAAMa,GAAGC,YChBXd,MAAMG,QAAQ,CACblhB,KAAM,yBACN8hB,SAAS,CACRvI,MAAO,KAER6H,MAAO,SAASC,GACf,IAAMU,EAAOhB,MAAMgB,KAAKC,MACxBX,EAAOE,KAAO,CACb/C,OAAQ,EACRyD,KAAK,CACJ,CAAEnC,KAAM,eAAgBoC,QAAQ,EAAOC,QAAQ,EAC9CT,OAAQ,EACRC,OAAQ,EACRH,QAAS,CACRC,SAAU,SAASW,GAClB,OAAOrB,MAAMC,KAAKC,YAAYvC,SAAS,WAAW0D,EAAIpL,GACvD,GAEDqL,GAAG,CACFC,cAAe,WACAnP,KAAKoP,gBAAgBA,gBAC3BC,mBAAkB,EAC3B,GAEDf,SAAU,SAASW,GAElB,MAAO,iBADG,0DAA0DA,EAAIvP,OAC7C,WAC3B,EACDgI,KAAMwG,EAAOxG,MAEd,CAAEiF,KAAM,oBACR,CACCF,KAAK,CACJ,CAAEE,KAAM,eAAgB2C,IAAKpB,EAAOoB,IAAKziB,KAAMqhB,EAAOrhB,KAAMuZ,MAAO,GAClE1G,MAAgB,YAARkP,GAA8B,QAARA,EAAkB,UAAY,UAC5DP,QAAST,MAAMC,KAAKC,YAAYvC,SAAS,iBACzCgE,MAAO,8CACPL,GAAG,CACFM,SAAU,WACKxP,KAAKoP,gBAAgBA,gBAAgBA,gBAC3CC,mBAAkB,EAC3B,IAGF,CACC1C,KAAM,aAAc2C,IAAI,2BAA4B5P,MAAM,OAAQ+P,QAAQ,CACzEC,WAAU,EACVtJ,MAAM,IACNkJ,IAAK,uBACLlB,KAAM,CACLE,SAAS,oEAEV5G,KAAK,CACJ,CAAE7D,GAAG,QACL,CAAEA,GAAG,UACL,CAAEA,GAAG,SACL,CAAEA,GAAG,UACL,CAAEA,GAAG,UACL,CAAEA,GAAG,aAIR,MAMJ,EACDwL,kBAAmB,SAASM,GAC3B,IAAMjQ,EAAQM,KAAKqB,WACJuM,MAAMgC,GAAG5P,KAAKkO,OAAO2B,QAC7B5O,SAASvB,EAAO,QACpBiQ,GACF3P,KAAK2P,MACN,EACD1O,SAAU,SAASvB,GACfA,EAAM,IACRM,KAAK8P,UAAUd,OAAOtP,EAAM,IAC1BA,EAAM,IACRM,KAAK+P,eAAe9O,SAASvB,EAAM,IACjCA,EAAM,IACRM,KAAKgQ,cAAc/O,SAASvB,EAAM,GACnC,EACD2B,SAAU,WACT,MAAO,CAACrB,KAAK8P,UAAUG,gBAAiBjQ,KAAK+P,eAAe1O,YAAY,GAAIrB,KAAKgQ,cAAc3O,YAAY,GAC3G,EACDyO,QAAS,WACR,OAAO9P,KAAKkQ,UAAUC,gBAAgB,EACtC,EACDJ,aAAc,WACb,OAAO/P,KAAKkQ,UAAUC,gBAAgB,GAAGA,gBAAgB,EACzD,EACDH,YAAa,WACZ,OAAOhQ,KAAKkQ,UAAUC,gBAAgB,GAAGA,gBAAgB,EACzD,EACDC,YAAY,WACX,MAAO,2EACR,GACCxC,MAAMa,GAAGgB,SAEX7B,MAAMG,QAAQ,CACblhB,KAAM,iBACNmhB,SAAU,aACVC,MAAO,SAASC,GACfA,EAAOC,QAAU,CAChBxB,KAAM,yBACN+C,WAAW,EACXhI,KAAMwG,EAAOxG,MAGd1H,KAAKqQ,OAAOlrB,KAAKyoB,MAAMhF,MAAK,WAC3B5I,KAAKsQ,WAAWpC,OAAO2B,OAAS7P,KAAKkO,OAAOrK,KAC3C7D,MAEF,EACDiB,SAAU,SAASvB,EAAOwO,GACzB,GAAGN,MAAM1K,QAAQxD,GAAO,CACnBM,KAAKkO,OAAOxO,OAASA,EAAM,IAAOM,KAAKkO,OAAOxO,MAAM,IAAMA,EAAM,IAAOM,KAAKkO,OAAOxO,MAAM,IAC5FM,KAAKsQ,WAAWrP,SAASvB,GAE1B,IAAM6Q,EAAMvQ,KAAKkO,OAAOxO,MACxBM,KAAKkO,OAAOxO,MAAQA,EAChBA,EAAM,IACTM,KAAKwQ,UAAU,WAAY,CAACxQ,KAAKqB,WAAYkP,EAAKrC,GACpD,CACA,OAAOxO,CACP,EACD2B,SAAU,WACT,OAAQrB,KAAKsQ,WAAWjP,WAAW3f,KAAK,IACxC,EACDouB,QAAS,WACR,OAAO9P,KAAKsQ,WAAWJ,UAAUC,gBAAgB,EACjD,EACDJ,aAAc,WACb,OAAO/P,KAAKsQ,WAAWJ,UAAUC,gBAAgB,GAAGA,gBAAgB,EACrE,GACCvC,MAAMa,GAAGC,YCxIXd,MAAMG,QAAQ,CACbC,SAAU,aACVnhB,KAAM,oBACN8hB,SAAS,CACRtI,OAAQ,IACRD,MAAO,IACPkJ,IAAK,0BACLmB,QAAS,CACR,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WACpG,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WACpG,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WACpG,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WACpG,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WACpG,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WACpG,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WACpG,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,aAGtGxC,MAAM,WACLjO,KAAK0Q,YAAY,YAAY,SAAShR,GACrCM,KAAKoP,gBAAgBuB,eAAe,CAAEjR,MAAAA,IAAS,EAAO,OACvD,GACD,GACEkO,MAAMa,GAAGmC,YAEZhD,MAAMG,QAAQ,CACbC,SAAU,aACVnhB,KAAM,eACN8hB,SAAS,CACRW,IAAK,qBACLuB,KAAM,gBACNpB,QAAQ,CACPrE,YAAY,EACZgD,KAAK,CACJzB,KAAM,uBAITsB,MAAO,WACNjO,KAAK8Q,MAAMC,WAAa,qBACxB,EACDC,aAAc,SAAS9C,EAAQ+C,EAAUpN,GACxC,IAAM2H,EAASxL,KAAKkR,YAAYC,KAAKnR,MAKrC,OAJAiR,EAAWA,EAASruB,QAAQ,uBAAuB,SAAS8B,EAAO0sB,EAAIC,EAAIC,GAC1E,OAAOF,EAAGlD,EAAOqB,MAAO/D,EAAM8F,CAC/B,IAEO1D,MAAMa,GAAG8C,YAAYC,UAAUR,aAAaG,KAAKnR,KAAKkO,EAAQ+C,EAAUpN,EAC/E,EACD4N,UAAW,SAAS/R,GACnBA,EAAQA,GAAS,GACjBM,KAAK0R,eAAeC,MAAMC,gBAAkBlS,CAC5C,EACDwR,YAAa,WACZ,MAAO,8DAA8DlR,KAAKkO,OAAOxO,MAAM,YACvF,EACDgS,aAAc,WACb,OAAO1R,KAAK8Q,MAAMe,WAAWA,WAAWC,WAAW,EACnD,EACDC,YAAY,WACX,OAAOnE,MAAMa,GAAGzE,KAAKwH,UAAUO,YAAYlN,MAAM7E,KAAKgS,UACvD,GACCpE,MAAMa,GAAG8C,aC/DX,IAAMU,GAAQ,CACbvS,MAAO,KACPI,IAAK,SAASoS,EAAQrC,GACjB7P,KAAKN,MAMRwS,EAAOf,KAAKtB,IALZ7P,KAAKmS,QACLD,EAAOf,KAAKtB,GACZ7P,KAAKoS,MAIN,EACDD,MAAK,WACJnS,KAAKN,MAAQkO,MAAMyE,KACnB,EACDD,IAAG,WACFpS,KAAKN,MAAQ,IACd,GCbM,SAAS4S,KACfC,GAAeC,GACfD,GAAeE,GACfF,GAAeG,IACfH,GAAeI,EAChB,CA4DO,SAASC,GAAcjG,EAAM3G,EAAKoE,EAAQyI,EAAOjmB,GACvD,IAAM6V,EAAOkK,EAAKmG,aAAa9M,EAAKoE,GAAQ,EAAMxd,GAClD,GAAG,eAAemG,KAAK0P,GAAM,CAC5B,IAAAsQ,EAA6CtQ,EAAK/d,MAAM,aAAa,GAAGvC,MAAM,KAAKmD,KAAI,SAAAC,GAAC,OAAIA,EAAElD,UAAO2wB,EAAAC,GAAAF,EAAA,GAA9FG,EAAMF,EAAA,GAAEG,EAAMH,EAAA,GAAEI,EAAQJ,EAAA,GAAEK,EAAQL,EAAA,GAEzC,IAAa,IAAVH,EACFlG,EAAK2G,aAAatN,EAAKoE,EAAMppB,UAAAA,OAAYkyB,EAAMlyB,MAAAA,OAAKmyB,EAAM,MAAAnyB,OAAKoyB,EAAQ,MAAApyB,OAAKmyB,EAAcvmB,QAAAA,GAC1F+f,EAAK3K,eAGS2K,EAAKmG,aAAa9M,EAAKoE,GAAQ,IAE5C6H,GAAMnS,KAAI,WACT,IAAI,IAAI/f,EAAI,EAAGA,GAAKqzB,EAAUrzB,IAC7B,IAAI,IAAIkB,EAAI,EAAGA,GAAKoyB,EAAUpyB,IAC7B0rB,EAAK2G,aACJtN,EAAMkN,EAASnzB,EACfqqB,EAAS+I,EAASlyB,EAACD,UAAAA,OACTjB,EAAC,MAAAiB,OAAKC,EAACD,MAAAA,OAAKoyB,QAAQpyB,OAAKqyB,EAAQ,MAAAryB,OAAKjB,GAAKmzB,GAAUjyB,GAAKkyB,EAAS,EAAI,EAAC,KAClFvmB,GAEH+f,EAAK3K,SACN,GAEH,CACD,CAEO,SAASuR,GAAQ5G,EAAM9f,EAAM2mB,EAAS5hB,IP/Fwu1C,SAAY/R,EAAEC,GAAG6e,GAAG9e,GAAGC,CAAC,EOiG5y1C2zB,CADA5mB,EAAOA,EAAKrL,cACIgyB,GACb7G,EAAKiD,GAAG,eACV,CACChC,MAAMgC,GAAGjD,EAAKiD,GAAG,cAAc1B,OAAOuB,SAASK,UAC/ClC,MAAMgC,GAAGjD,EAAKiD,GAAG,iBAAiB1B,OAAOwF,OAAOxD,WAC/ChrB,SAAQ,SAAAyuB,GACLA,EAAKC,OAAO/mB,KACf8mB,EAAKzU,IAAI,CAAC2E,GAAGhX,EAAM6S,MAAM7S,IACtB+E,GACF+hB,EAAK/hB,KAAK,QAAS,MAAO,UAE7B,GAEF,CAEO,SAASiiB,GAAmBC,GAClC,IAAMnK,EAAO,IAAIzpB,KAAKI,KAAKG,MAA4B,OAArBqzB,EAAY,OAAiB,MAC/D,OAAO,IAAI5zB,KAAKypB,EAAKjpB,UAAuC,IAA3BipB,EAAKtpB,oBACvC,CAEO,SAAS0zB,GAAmBC,GAElC,OADuB,OAAUA,EAAOtzB,UAA0C,IAA7BszB,EAAO3zB,4BACtCiB,UACvB,CAEO,SAAS2yB,GAAgBxR,EAAM/C,GACrC,GAAkB,iBAAR+C,EAAiB,CAC1B,GAAG,kBAAkB1P,KAAK0P,GACzB,MAAAzhB,wDAAAA,OAA+D0e,EAAQ,SAAW,QAAO,aACrF,GAAG,eAAe3M,KAAK0P,GAC3B,MAAAzhB,qDAAAA,OAA4D0e,EAAQ,SAAW,QAAO,YACxF,CACA,OAAOA,CACR,uIAxHO,SAAciN,GACpB,IAAMlK,EAAO,CACZsK,MAAO,SAAAmH,GAAG,MAAAlzB,yCAAAA,OAA6C4sB,MAAMU,SAAS6F,OAAOD,GAAI,KAAI,EACrFlH,UAAW,SAACkH,EAAKlK,GAChB,IACIoK,EADED,EAASvG,MAAMU,SAAS6F,OAQ9B,OAJCC,EADY,KAAVF,EAAI,GACDlzB,iEAAAA,OAAoEmzB,EAAOD,EAAInxB,OAAO,IAAG,KAEzF/B,wBAAAA,OAA2BmzB,EAAOD,GAAO,KAE/ClzB,MAAAA,OAAaozB,EAAKpzB,KAAAA,OAAImzB,EAAOnK,GAAQkK,GAAI,OACzC,EACDjH,UAAW,SAACoH,EAAKC,EAAMC,EAAQC,GAC9B,IAAMtG,EAAS,CAAEoG,KAAAA,EAAM9I,MAAO+I,EAAQE,cAAcD,EAAQE,SAAS,EAAGC,SAAS,GAEtE,SAARL,EACF1G,MAAMgH,OAAO1G,EAAQ,CAACoG,KAAK,MAAOO,MAAM,IAAI,GAC7B,QAARP,GACP1G,MAAMgH,OAAO1G,EAAQ,CAACoG,KAAK,MAAOQ,WAAW,IAAI,GAElD,IAAI,IAAIt0B,EAAI,EAAIA,EAAI6zB,EAAItzB,OAAQP,IAC/B6zB,EAAI7zB,GAAK6zB,EAAI7zB,IAAI,EAElB,IAAMu0B,EAAcpI,EAAKiD,GAAG,SAAS1B,OAG/B8G,EAA0B,OAAf9G,EAAOoG,MAAyB,SAARA,EACnClO,EAAQ4O,EAAW,IAAMD,EAAYE,YACrC5O,EAAS2O,EAAW,IAAMD,EAAYG,UAC5C,OAAOtH,MAAMuH,WAAWC,YAAYlH,EAA7BN,CAAqCyG,EAAK,CAAEjO,MAAAA,EAAOC,OAAAA,GAC1D,EACD6G,SAAU,SAAA2F,GAAK,QAAMA,CAAK,EAC1B1F,MAAO,SAAC+F,EAAQC,EAAQC,EAAUC,EAAUR,GAAK,QAAOA,CAAK,GAGxDhU,EAAO5b,OAAO4b,KAAK4D,GACzB5D,EAAK3Z,SAAQ,SAACmwB,EAAK70B,GAAC,OAAK+yB,GAAQ5G,EAAM0I,EAAK5S,EAAK4S,GAAM70B,GAAKqe,EAAK9d,OAAS,MAE1E,IAAMu0B,EAAO3I,EAAKiD,GAAG,SACrB0F,EAAKC,SAA0B,gBAAI,SAASC,EAAIvL,GAC/C,IAAMvK,EAAQiN,EAAKmG,aAAa7I,EAAKjE,IAAKiE,EAAKG,QAAQ,GACvDuC,EAAK2G,aAAarJ,EAAKjE,IAAKiE,EAAKG,OAAMppB,aAAAA,OAAe0e,EAAQ,EAAI,QAClEiN,EAAK3K,WAENsT,EAAKC,SAAuB,aAAI,SAASC,EAAIvL,GAC5C2I,GAAcjG,EAAM1C,EAAKjE,IAAKiE,EAAKG,SAGpCuC,EAAK+D,YAAY,aAAa,SAAA+E,GACb,aAAbA,EAAO5R,GACT8I,EAAK+I,WACe,gBAAbD,EAAO5R,IACd8I,EAAKgJ,aACP,GACD,qBChEA,SAASC,GAAUlW,GAIlB,OAHKA,GAAmB,IAAVA,GAAkBA,aAAiBxf,MAAUW,MAAM6e,KAChEA,EAAQmU,GAAmBnU,IAErBA,CACR,CAEA,SAASmW,GAAanW,GAIrB,OAHIA,GAASA,aAAiBxf,OAC7Bwf,EAAQqU,GAAmBrU,IAErBA,CACR,CCuCO,SAAS8K,GAAKmC,EAAM9f,EAAM6a,GAChC,IACIwM,EADA1J,EAAOmC,EAAKuB,OAAO1D,KAEvB,GAAKA,EAAL,CAEA,GAAW,OAAR3d,EAAc,CAChB,IAAI2d,EAAKsL,IACR,OACDpO,EAAO,CAAEA,KAAMiF,EAAKlH,UAAU,CAAEyF,QAAQ,KACxCgJ,EAAM1J,EAAKsL,GACZ,MAEC5B,EAAsB,iBAAT1J,EAAoBA,EAAO,IAAM3d,EAAO2d,EAAK3d,GAK3D,GAFAqnB,EAAMtG,MAAMmI,MAAMC,OAAO9B,GAElB,CACN,GAAmB,mBAARA,EACV,OAAOA,EAAIrnB,EAAM6a,GAElB,GAAIwM,EAAI+B,QAAU/B,EAAI1J,KACrB,OAAO0J,EAAI1J,KAAKmC,EAAMjF,EAAM,KAAM,MAEnC,IAAIwO,EAAOtI,MAAMsI,OACJ,QAATrpB,GACHqpB,EAAKC,QAAQ,CAAE,eAAiB,qBACjCD,EAAKE,KAAKlC,EAAKxM,EAChB,CAzBW,CA0BZ,CDlEAkG,MAAMG,QAAQ,CACbC,SAAU,aACVnhB,KAAM,oBACNwU,SAAS,WAER,OAAOwU,GADOjI,MAAMa,GAAG4H,WAAW7E,UAAUnQ,SAASwD,MAAM7E,QAC7B,EAC9B,EACDsW,cAAc,SAAS5W,GAEtB,OADAA,EAAQkW,GAAUlW,GACXkO,MAAMa,GAAG4H,WAAW7E,UAAU8E,cAAczR,MAAM7E,KAAM,CAACN,GACjE,GACEkO,MAAMa,GAAG4H,YAEZzI,MAAMG,QAAQ,CACbC,SAAU,kBACVnhB,KAAM,yBACNwU,SAAS,WACR,IAAI3B,EAAQkO,MAAMa,GAAG4H,WAAW7E,UAAUnQ,SAASwD,MAAM7E,MAMzD,OALIN,KACHA,EAAQkO,MAAMvG,KAAK3H,IACbyS,MAAQ0D,GAAanW,EAAMyS,OACjCzS,EAAM0S,IAAMyD,GAAanW,EAAM0S,MAEzB1S,GAAS,EAChB,EACD4W,cAAc,SAAS5W,GAUtB,OATKA,EAGKA,EAAMyS,OAAUzS,EAAM0S,MAC/B1S,EAAQ,CAAEyS,MAAMzS,IAHhBA,EAAQ,CAAEyS,MAAM,KAAMC,IAAI,MAK3B1S,EAAMyS,MAAQyD,GAAUlW,EAAMyS,OAC9BzS,EAAM0S,IAAMwD,GAAUlW,EAAM0S,KAErBxE,MAAMa,GAAG8H,gBAAgB/E,UAAU8E,cAAczR,MAAM7E,KAAM,CAACN,GACtE,GACEkO,MAAMa,GAAG8H,iBErDZ3I,MAAMG,QAAQ,CACbC,SAAU,SACVnhB,KAAM,gBACNohB,MAAO,SAASC,GACflO,KAAK8Q,MAAMC,WAAa,uBACxB/Q,KAAKkO,OAAOsI,QAAUtI,EAAOsI,QAC7BxW,KAAKkO,OAAOuI,OAAQ,CACpB,EACDC,cAAe,SAASC,GACvBA,EAAQvL,YAAa,EACrB,IAAIwL,EAAW5W,KAAK6W,gBAAgBF,GAOpC,MANa,CACZhK,KAAM,OACN2C,IAAK,oBACLwH,QAASlJ,MAAMgB,KAAKmI,QAAQC,cAAcC,KAC1CL,SAAUA,EAGX,EACDC,gBAAiB,SAASF,GACzB,IAAIC,EAwBJ,OAvBGhJ,MAAM1K,QAAQyT,GAChBC,EAAUD,GAEVC,EAAW,IACFzxB,KAAKwxB,GAEZ3W,KAAKkO,OAAOsI,UACdI,EAASzxB,KAAK,CAACkhB,OAAO,IACtBuQ,EAASzxB,KAAM,CACdkmB,OAAQ,GACRyD,KAAK,CACJ,CAAA,EACA,CAACnC,KAAM,SAAU2C,IAAK,uBAAwB4H,MAAOtJ,MAAMC,KAAKC,YAAYxE,OAAOiB,OAAQ4M,WAAU,EAAMC,MAAO,WAChGpX,KAAKqX,mBACX7G,UAAU,gBAAgB,GACtC,GACA,CAAC7D,KAAM,SAAUuK,MAAOtJ,MAAMC,KAAKC,YAAYxE,OAAOkB,KAAM8M,OAAQ,QAASH,WAAU,EAAMC,MAAO,WAClFpX,KAAKqX,mBACX7G,UAAU,cAAc,GACpC,OAIIoG,CACP,EACDW,YAAa,SAAS7X,GAarB,MAZmB,UAAhB8X,GAAO9X,KACNkO,MAAM6J,YAAY/X,EAAMoX,WAC1BpX,EAAMoX,QAAUlJ,MAAMgB,KAAKmI,QAAQC,cAAcC,MACjC,QAAdvX,EAAMiN,MAAkBjN,EAAMkX,UAChClX,EAAMkX,SAAW5W,KAAK6W,gBAAgBnX,EAAMkX,UACxClX,EAAM4P,MACT5P,EAAM4P,IAAM,sBAGb5P,EAAQM,KAAK0W,cAAchX,IAGtBkO,MAAMa,GAAGiJ,OAAOlG,UAAU+F,YAAYpG,KAAKnR,KAAKN,EACvD,EACDiP,SAAS,CACR7G,MAAK,EACL6P,KAAM,SACNnB,SAAS,EACTC,OAAM,EAENmB,WAAU,EACVxR,MAAO,MAENwH,MAAMa,GAAGiJ,OAAQ9J,MAAMiK,SAI1BjK,MAAMG,QAAQ,CACbC,SAAU,YACVnhB,KAAM,sBACNohB,MAAO,SAASC,GACXA,EAAO4J,kBACV5J,EAAO4J,gBAAkB,IAC1B9X,KAAK8Q,MAAMC,WAAa,4BACzB,GACCnD,MAAMa,GAAGsJ,WClFXnK,MAAMG,QAAQ,CACblhB,KAAM,wBACN8hB,SAAS,CACRe,WAAU,EACVoH,QAAQ,EACR1L,YAAY,GAEb6C,MAAO,WACNjO,KAAK8Q,MAAMC,WAAa,uBACxB,EACDX,YAAa,SAASvM,GACrB,OAAO7D,KAAK8P,UAAUkI,QAAQnU,GAAInE,KACnC,GACEkO,MAAMa,GAAGgB,SAEZ7B,MAAMG,QAAQ,CACblhB,KAAM,sBACN8hB,SAAS,CACRmI,QAAQ,EACR1L,YAAY,GAEb6C,MAAO,WACNjO,KAAK8Q,MAAMC,WAAa,uBACzB,GACEnD,MAAMa,GAAGgB,SAEZ7B,MAAMG,QAAQ,CACbC,SAAU,cACVnhB,KAAM,qBACNohB,MAAO,WACNjO,KAAK8Q,MAAMC,WAAa,2BACxB,EACDpC,SAAS,CACRc,QAAQ,CACPrE,YAAY,EACZgD,KAAK,CACJzB,KAAM,wBAIPiB,MAAMa,GAAG8C,aCxCZ3D,MAAMG,QAAQ,CACblhB,KAAK,WACLoU,SAAS,SAASrgB,GAAI,OAAOof,KAAKiY,QAAQr3B,EAAK,EAC/CygB,SAAS,WAAY,MAAO,EAAI,GAC9BuM,MAAMa,GAAGH,UCJZV,MAAMG,QAAQ,CACblhB,KAAK,eACLmhB,SAAU,WACVC,MAAO,WACNjO,KAAK8Q,MAAMC,WAAa,wBACxB,EACDpC,SAAS,CACRvD,YAAY,EACZkD,SAAU,wDACVgG,KAAK,CACJlO,MAAO,GACPC,OAAQ,MAGTuH,MAAMa,GAAGyJ,UCdXtK,MAAMG,QAAQ,CACblhB,KAAM,iBACN8hB,SAAS,CACRmI,QAAQ,EACRxH,IAAK,yBAEL1B,MAAMa,GAAG0J,uDLNJ,SAAcxL,GAsBpB,IArBA,IAoBIyL,EApBEC,EAAS,CACd,CAACxrB,KAAK,aAAcynB,KAAK,UACzB,CAACznB,KAAK,gBAAiBynB,KAAK,UAC5B,CAACznB,KAAK,gBAAiBynB,KAAK,UAC5B,CAACznB,KAAK,qBAAsBynB,KAAK,SACjC,CAACznB,KAAK,gBACN,CAACA,KAAK,iBACN,CAACA,KAAK,YACN,CAACA,KAAK,kBACN,CAACA,KAAK,qBACN,CAACA,KAAK,uBACN,CAACA,KAAK,mBACN,CAACA,KAAK,eACN,CAACA,KAAK,gBACN,CAACA,KAAK,UACN,CAACA,KAAK,gBAAiB8f,KAAM,SAC7B,CAAC9f,KAAK,cAAe8f,KAAM,SAC3B,CAAC9f,KAAK,iBAAkB8f,KAAM,UAGpB2L,EAAAA,WAEV,IAAM9E,EAAU6E,EAAO73B,IACtBgzB,EAAQ7G,KAAOA,EAAKiD,GAAG4D,EAAQ7G,MAAQA,GAAM+D,YAAY8C,EAAQ3mB,MAAM,SAASA,EAAM0rB,EAASr2B,EAAGkvB,EAAIC,GACtG,IAAI1E,EAAK6L,gBAAiB7L,EAAK8L,aAA/B,CAEA,IAAIC,EACJ,GAAGlF,EAAQc,KACVoE,EAAyB,UAAhBlF,EAAQc,KAAmB,CAACd,EAAQc,KAAMiE,EAAS1rB,GAAQ,CAAC2mB,EAAQc,KAAMznB,OAChF,CACH,IAAI8rB,EAAchM,EAAKiM,iBACJ,YAAhBpF,EAAQ3mB,MAAsB0rB,EAAQ3rB,MAAQ2rB,EAAQ3rB,MAAQ+rB,EAChEA,EAAcJ,EAAQ3rB,MACkG,GAAjH,CAAC,eAAgB,cAAe,eAAgB,oBAAqB,kBAAkBnK,QAAQ+wB,EAAQ3mB,OAAeukB,GAAMuH,EACnIA,EAAcvH,GAC4D,GAAnE,CAAC,gBAAiB,uBAAuB3uB,QAAQ+wB,EAAQ3mB,OAAewkB,GAAMsH,EACrFA,EAActH,EACS,UAAhBmC,EAAQ3mB,OACf8rB,EAAcz2B,GACfw2B,EAAS,CAAC,SAAUC,EACrB,CAEAE,aAAaT,GACbA,EAASxK,MAAMkL,OAAM,WAAA,OAAMnM,EAAK6D,UAAU,WAAYkI,KAnBT,CAoB9C,KAvBQl4B,EAAI,EAAGA,EAAI63B,EAAOt3B,OAAQP,IAAG83B,IA0BtC3L,EAAK+D,YAAY,YAAY,WAC5BlG,GAAKmC,EAAM,MACZ,GACD,YMnDaoM,GAAS,CAAA,EACTC,GAAS,CAAA,EAEhBC,GAAQ,6BAEd,SAASC,GAAcC,GACtB,IAAMC,EAAQH,GAAMl4B,OACds4B,EAAW/4B,KAAKC,QAAQ44B,EAAQC,GACtC,OAAIC,EAAW,EACPH,GAAcG,GAAYJ,GAAME,EAAQC,GAEzCH,GAAME,EAAQC,EACtB,CAEO,SAASE,GAAgBC,GAG/B,IAFA,IAEQ/4B,EAFWyC,OAAO4b,KAAKma,IAAQj4B,OAEd,EAAGP,GAAK+4B,EAAW/4B,IAAI,CAC/C,IAAIg5B,EAAMN,GAAc14B,GAExBu4B,GAAOS,GAAOh5B,EACdw4B,GAAOx4B,GAAKg5B,CACb,CACD,CAEO,SAASC,GAAOzP,GAEtB,IADA,IAAI5H,EACI5hB,EAAI,EAAGA,EAAIwpB,EAAKjpB,OAAQP,IAC/B,GAAGwpB,EAAK9lB,WAAW1D,GAAK,GAAG,CAC1B4hB,EAAO5hB,EACP,KACD,CAED,IAAMk5B,EAAM1P,EAAKjnB,OAAO,EAAGqf,GAG3B,MAAO,CAAK,EAFA4H,EAAKjnB,OAAOqf,GAET2W,GAAOW,GACvB,CAEO,SAAS/O,GAAMX,EAAM2C,EAAM/f,GACjC,IAAM+sB,EAAO3P,EAAKvnB,QAAQ,KACtBgoB,EAAQ7d,GAAQ,IAGN,IAAV+sB,IAEc,OADjBlP,EAAQT,EAAKjnB,OAAO,EAAG42B,IACb,KACTlP,EAAQA,EAAM1nB,OAAO,EAAG0nB,EAAM1pB,OAAO,IACtCipB,EAAOA,EAAKjnB,OAAO42B,EAAK,IAGzB,IAAIC,EAAQ5P,EAAK7nB,MAAM,KACvB,GAAoB,GAAhBy3B,EAAM74B,OAAY,CACrB,IAAG4rB,EAgBF,OAAO,KAfP,IAAIjhB,EAAOihB,EAAKkN,OAAOC,QAAQ9P,EAAMS,GACrC,IAAI/e,KAEHA,EAAOihB,EAAKkN,OAAOC,QAAQ9P,GAAM,IAEhC,OAAO,KAGT,IAAM+P,EAAaruB,EAAKvJ,MAAM,MAC3B43B,EAAW,IAAMntB,GAAQ+f,EAAKiM,oBAChCnO,EAAQsP,EAAW,GAAGn3B,QAAQ,KAAK,KAEpCg3B,GADAluB,EAAOquB,EAAW,IACL53B,MAAM,IAIrB,CAEA,IAAM63B,EAAKP,GAAOG,EAAM,IAClBK,EAAKR,GAAOG,EAAM,IAExB,GAAGI,EAAG,IAAMA,EAAG,IAAMC,EAAG,IAAMA,EAAG,GAChC,MAAO,CAACD,EAAG,GAAIA,EAAG,GAAIC,EAAG,GAAIA,EAAG,GAAIxP,EACtC,CAGO,SAASyP,GAAYzP,GAC3B,OAA8B,GAAvBA,EAAMhoB,QAAQ,KAAagoB,EAAK,IAAAzpB,OAAOypB,EAAQ,IACvD,CAEO,SAAS0P,GAAQt0B,EAAEzD,EAAEg4B,EAAGC,EAAG5P,GACjC,OAAQA,EAAOyP,GAAYzP,GAAO,IAAK,IAAIuO,GAAO52B,GAAGyD,EAAE,IAAImzB,GAAOqB,GAAID,CACvE,CAKO,SAASE,GAAStQ,EAAM2C,GAC9B,GAAoB,WAAhB6K,GAAOxN,GAAmB,OAAOA,EACrC,IAAMppB,EAAI+pB,GAAMX,EAAM2C,GACtB,MAAO,CAAEwF,MAAM,CAAEnM,IAAIplB,EAAE,GAAIwpB,OAAOxpB,EAAE,IAAKwxB,IAAI,CAAEpM,IAAIplB,EAAE,GAAIwpB,OAAOxpB,EAAE,IAAM6pB,MAAO7pB,EAAE,GAClF,CAEO,SAAS25B,GAAUvQ,EAAM2C,EAAM6N,EAAU9S,GAE/C,IADA,IAAMiD,EAAQ2P,GAAStQ,GACdhE,EAAM2E,EAAMwH,MAAMnM,IAAKA,GAAO2E,EAAMyH,IAAIpM,IAAKA,IACrD,IAAK,IAAIoE,EAASO,EAAMwH,MAAM/H,OAAQA,GAAWO,EAAMyH,IAAIhI,OAAQA,IAClEoQ,EAAS7N,EAAM,CAAC3G,IAAKA,EAAKoE,OAAQA,GAAS1C,EAG9C,CAEO,SAAS+S,GAAQzQ,GACvB,GAAkB,iBAARA,EAAiB,CAC1B,IAAM0Q,EAAQ1Q,EAAK7nB,MAAM,KACzB,GAAmB,GAAhBu4B,EAAM35B,OAAY,CACpB,IAAI,IAAIP,EAAI,EAAGA,EAAIk6B,EAAM35B,OAAQP,IAAI,CAEpC,IAAIm6B,GADUD,EAAMl6B,GAAG2B,MAAM,KACZiL,OAChB,MACF,CACA,OAAO,CACR,CACD,CACD,CAEA,IAAMwtB,GAAW,iBACV,SAASD,GAAO3Q,GACtB,OAAO4Q,GAAS7nB,KAAKiX,EACtB,CAEO,SAAS6Q,GAAY7Q,EAAKnd,EAAKiuB,EAAI3I,GACzC,IAAI4I,GAAU,EAEd,GAAGN,GAAQzQ,GAAM,CAChB,IAAqCgR,EAAA/H,GAAXtI,GAAMX,GAAK,GAAhCiR,EAAED,EAAA,GAACE,EAAEF,EAAA,GAACG,EAAEH,EAAA,GAACI,EAAEJ,EAAA,GAACvQ,EAAKuQ,EAAA,GAGtB,GAAGC,EAAKE,EAAE,CAAA,IAAAE,EACE,CAACF,EAAIF,GAAfA,EAAEI,EAAA,GAAEF,EAAEE,EAAA,EAAA,CACR,GAAGH,EAAKE,EAAE,CAAA,IAAAE,EACE,CAACF,EAAIF,GAAfA,EAAEI,EAAA,GAAEF,EAAEE,EAAA,EAAA,CAER,GAAa,QAATzuB,GAAkBslB,EAAMnM,KAAOmV,EAAG,CAKrC,IAJIL,EAAM,GAAK3I,EAAMnM,IAAMiV,GAAQH,EAAM,GAAK3I,EAAMnM,KAAOiV,KAC1DA,GAAMH,IACPK,GAAML,GAEAG,EACL,MAAO,GAERF,GAAU,CACV,MACI,GAAa,WAATluB,GAAqBslB,EAAM/H,QAAUgR,EAAG,CAKhD,IAJIN,EAAM,GAAK3I,EAAM/H,OAAS8Q,GAAQJ,EAAM,GAAK3I,EAAM/H,QAAU8Q,KAChEA,GAAMJ,IACPM,GAAMN,GAEAI,EACL,MAAO,GAERH,GAAU,CACX,CACGA,IACF/Q,EAAOmQ,GAAQc,EAAGC,EAAGC,EAAGC,EAAG3Q,GAC7B,CAEA,OAAOT,CACR,CClKO,IAAMuR,GAAe,CAC3BnV,MAAM,GACNiF,OAAQ,EACRsJ,SAAU,EACV6G,cAAe,EACfC,aAAc,GAIJC,GAAgB,CAC1BlQ,MAAkB,UAClBC,WAAkB,UAClB,cAAkB,oBAClB,YAAc,KACd,aAAc,OACd,iBAAkB,SAClB,cAAe,UAGVkQ,GAAQ,CACbC,SAAU,uBACVC,KAAM,uBACNC,KAAM,oBACNC,QAAS,oBACTC,SAAU,oBACVC,OAAQ,0BACRC,KAAM,2BC1BA,SAASngB,GAAKsY,EAAK8H,GAEzB,OAAO9H,EADMnO,GAAUmO,EAAK8H,GAE7B,CAEO,SAASjW,GAAUmO,EAAK8H,GAE9B,IADA,IAAIC,GAAU,EACN57B,EAAG,EAAG47B,EAAO,GAAK57B,EAAI6zB,EAAItzB,OAAQP,IACtC27B,EAAK9H,EAAI7zB,MACX47B,EAAS57B,GAEX,OAAO47B,CACR,CAEO,SAASC,GAAa3U,EAAM4U,EAAO7P,EAAMqC,GAC/C,IAAI,IAAItuB,EAAE,EAAGA,EAAEknB,EAAK3mB,OAAQP,IAAI,CAE/B,IAAI+7B,EAAO7U,EAAKlnB,GACZ+7B,EAAK,GAAG9P,IAAMA,EAAK8P,EAAK,IACxBA,EAAK,GAAGzN,IAAMA,EAAKyN,EAAK,GAC7B,CAEA,GAAGD,EACF,IAAI,IAAI97B,EAAI,EAAGA,EAAI87B,EAAMv7B,OAAQP,IAAI,CAEpC,IAAMg8B,EAAaF,EAAM97B,GAAG,GAAK87B,EAAM97B,GAAG,GAAK,EACzCi8B,EAAaH,EAAM97B,GAAG,GAAK87B,EAAM97B,GAAG,GAAK,EAE5Cg8B,EAAa/P,IAAMA,EAAO+P,GAC1BC,EAAa3N,IAAMA,EAAO2N,EAC9B,CAED,MAAO,CAAM,EAALhQ,EAAa,EAALqC,EACjB,CCzBO,IAAM4N,GAAc,CAC1B,QAAQ,aAAa,aACrB,cAAc,YACd,aAAa,YAAY,cACzB,iBAAkB,OAAQ,UAAW,SACrC,eAAgB,gBAAgB,cAAe,aAC/C,SAAU,UAGLC,GAAa,CAClBxS,OAAQ,WAAA,MAAK,EAAE,EACf,aAAc,CACbyS,KAAM,WAAA,MAAM,6BAA6B,EACzCC,OAAQ,WAAA,MAAM,2CAA2C,EACzDC,MAAO,WAAA,MAAM,4CAA4C,GAE1D,iBAAkB,CACjBC,IAAK,WAAA,MAAM,yBAAyB,EACpCC,OAAQ,WAAA,MAAM,qBAAqB,EACnCC,OAAQ,WAAA,MAAM,uBAAuB,GAEtCtR,KAAM,CACLA,KAAM,WACL,MAAO,iCACR,GAED,cAAe,SAACsD,EAAKiO,GACpB,OAAOC,GAAa,cAAelO,EAAKiO,EACxC,EACD,aAAc,SAACjO,EAAKiO,GACnB,OAAOC,GAAa,aAAclO,EAAKiO,EACvC,EACD,eAAgB,SAACjO,EAAKiO,GACrB,OAAOC,GAAa,eAAgBlO,EAAKiO,EACzC,EACD,gBAAiB,SAACjO,EAAKiO,GACtB,OAAOC,GAAa,gBAAiBlO,EAAKiO,EAC1C,EACD,cAAe,SAAAjO,GAEd,MAAyB,QAAtBA,EAAI,eAEC,gBAA4B,yBADpBA,EAAI,gBAAkByM,GAAc,gBACS,IAAM,KAAO,IAEnE,EACP,EACD5P,UAAW,SAAAmD,GACV,IAAMnD,EAA6B,aAAjBmD,EAAInD,UAA2B,YAAc,GAC/D,GAAGA,EAAU,CACZ,IAAMC,EAAuB,UAAdkD,EAAIlD,OAAqB,eAAiB,GACzD,MAAA,oBAAA/qB,OAA2B8qB,EAAS9qB,KAAAA,OAAI+qB,EAAM,IAC/C,CACA,MAAO,EACP,EACDA,OAAQ,SAAAkD,GACP,MAAoB,aAAjBA,EAAInD,WAA0C,UAAdmD,EAAIlD,OAC/B,iCACD,EACP,EACDqR,OAAQ,SAACnO,EAAKiO,GACb,IAAMG,EAAqB,EAAbpO,EAAImO,OAClB,GAAGC,EAAQ,EAAE,CACZ,IAAMC,EAA2B,SAArBrO,EAAI,cAA2B,QAAU,OACrD,MAAO,CAAEsO,SAAQv8B,UAAAA,OAAYs8B,OAAGt8B,QAAa,EAARq8B,EAAY,IAAIH,EAAI,OAC1D,CACA,EACD,YAAa,SAACjO,EAAKiO,GAClB,IAAIM,EAAWvO,EAAI,aAKnB,OAHW,GAARiO,IACFM,EAAWvO,EAAI,aAAarsB,QAAQ,KAAK,IAAMs6B,EAAO,MAEhD,aAAaM,EAAS,GAC9B,GAGD,SAASL,GAAaG,EAAKrO,EAAKiO,GAC/B,IAAIO,EAASxO,EAAIqO,GACjB,GAAGG,EAAO,CACT,IAAqCC,EAAAzK,GAAjBwK,EAAOt7B,MAAM,KAAI,GAAhCqpB,EAAKkS,EAAA,GAAEpJ,EAAIoJ,EAAA,GAGZtb,EAAO,EAYX,MAXW,WAFXkS,EAAOA,GAAQ,QAGdlS,EAAO,EACQ,SAARkS,GAA2B,UAARA,IAC1BlS,EAAO,GAERA,EAAOA,EAAO8a,EAAO,MAG4B,GAA9C,CAAC,OAAQ,SAAU,SAASz6B,QAAQ6xB,KACtCA,EAAO,SAER,GAAAtzB,OAAUs8B,EAAG,MAAAt8B,OAAKohB,EAAIphB,KAAAA,OAAIszB,EAAItzB,KAAAA,OAAIwqB,EAAK,eACxC,CACA,MAAO,EACR,CAEA,IAmCImS,GAnCEC,GAAgB,CACrB,cAAgB,SAAS3T,EAAM4T,EAAMC,GAAO,OAAO7T,EAAKG,QAAUyT,EAAK1L,MAAM/H,QAAiB,MAAP0T,CAAc,EACrG,eAAiB,SAAS7T,EAAM4T,EAAMC,GAAO,OAAO7T,EAAKG,QAAUyT,EAAKzL,IAAIhI,QAAkB,OAAR0T,GAAwB,MAAPA,CAAc,EACrH,aAAe,SAAS7T,EAAM4T,EAAOC,GAAO,OAAO7T,EAAKjE,KAAO6X,EAAK1L,MAAMnM,KAAc,MAAP8X,CAAc,EAC/F,gBAAiB,SAAS7T,EAAM4T,EAAMC,GAAO,OAAO7T,EAAKjE,KAAO6X,EAAKzL,IAAIpM,KAAe,OAAR8X,GAAuB,MAAPA,CAAa,GAGxGC,GAAkB,CACvB1T,QAAW,SAASsC,EAAMgF,EAAOjS,EAAOuK,GACvC,IAAM4T,EAAOlR,EAAKiD,GAAG,SAASoO,gBAExB1J,GADN5U,EAAQA,EAAMvd,MAAM,MACD,GACfqpB,EAAQ9L,EAAM,GACdue,EAAYve,EAAM,GAElBwe,EAAQ,CAAC,cAAe,eAAgB,gBAAiB,cAElD,cAAR5J,EACF4J,EAAQ,CAAC,aAAa,iBAEN,MAAR5J,GAAwB,OAARA,GAAyB,SAARA,IACzC4J,EAAQ,CAAC,UAAU5J,IAEpB,IAAK,IAAI9zB,EAAI,EAAGA,EAAI09B,EAAMn9B,OAAQP,IAAI,CACrC,IAAIs9B,EAAOI,EAAM19B,GAEjB,IAAe,IADFmsB,EAAK6D,UAAU,WAAY,CAAC,gBAAiB,CAACxK,IAAIiE,EAAKjE,IAAKoE,OAAOH,EAAKG,OAAQyT,KAAAA,EAAMvJ,KAAAA,EAAMwJ,KAAAA,MAClFF,GAAcE,GAAM7T,EAAM4T,EAAMvJ,GAEtD3C,EAAQwM,GAAaxR,EAAMgF,EAAOmM,EADX,MAARxJ,EAAe,GAAEtzB,GAAAA,OAAMwqB,EAAK,KAAAxqB,OAAIi9B,GACChU,EAElD,CACA,OAAO0H,CACR,GAoBD,SAASzN,GAAMyI,GACdA,EAAKyR,QAAU,GACfzR,EAAK0R,cAAgB,GACrB1R,EAAK2R,YAAc,EAEnB,IAAIC,EAAS,QAAQ5R,EAAK6R,OAC1B5Q,MAAM6Q,KAAKC,YAAYH,EACxB,CAEO,SAASI,GAAWhS,GAC1B,IAAMjF,EAAO,CAAA,EACbJ,GAAWqF,EAAMjF,GACjBxD,GAAMyI,GACNiS,GAAOjS,EAAMjF,GAAM,EACpB,CAEO,SAASmX,GAASlS,EAAM1C,EAAMrd,EAAMkyB,GAC1C,GAAGlyB,GAAQA,GAAQ+f,EAAKiM,iBAAiB,CACxC,IAAMnO,EAAQkC,EAAKoS,OAAOpW,QAAQ/b,GAClC,GAAG6d,EAAM,CACR,IAAMwE,EAAMxE,EAAMpF,QAAQ4E,EAAKjE,IAAI,EAAGiE,EAAKG,OAAO,GAClD,GAAI6E,GAAOA,EAAI0C,MAAM,CACpB,IAAMqN,EAASjjB,GAAK4Q,EAAKsS,SAAS,SAAAxU,GAAK,OAAIA,EAAM5d,MAAQD,CAAI,IAAE+pB,QAAQqI,QAAU,GAC3ErN,EAAQ5V,GAAKijB,GAAQ,SAAAE,GAAG,OAAIA,EAAI,IAAMjQ,EAAI0C,SAChD,GAAGA,EACF,MAAO,CACN9N,GAAIoL,EAAI0C,MACR3H,KAAM2H,EAAM,GACZwN,MAAOC,GAAczN,EAAM,IAE9B,CACD,CACD,KACI,CACH,IAAM1C,EAAMtC,EAAK0S,OAAOha,QAAQ4E,EAAKjE,IAAI,EAAGiE,EAAKG,OAAO,GAClDsB,EAAOiB,EAAKiD,GAAG,SAAStJ,QAAQ2D,EAAKjE,IAAKiE,EAAKG,QAErD,GAAGsB,IAASoT,GAAiBpT,EAAK,IAAMzB,EAAKjE,KAAO0F,EAAK,IAAMzB,EAAKG,QAEnE,IADA,IAAMkV,EAAa5T,EAAK,GAAGvpB,MAAM,KACxB3B,EAAI,EAAGA,EAAI8+B,EAAWv+B,OAAQP,IAAI,CAC1C,IAAM++B,EAAY5S,EAAKyR,QAAQkB,EAAW9+B,IAC1C,GAAG++B,EACF,OAAOA,CACT,CAGD,GAAItQ,GAAOA,EAAI0C,MACd,OAAOhF,EAAKyR,QAAQnP,EAAI0C,MAC1B,CAEA,OAAO,IACR,CAEO,SAAS6N,GAAU7S,EAAM3G,EAAKoE,GACpC,IAAI6E,EAAMtC,EAAK0S,OAAOha,QAAQW,EAAI,EAAGoE,EAAO,GAC5C,OAAQ6E,GAAOA,EAAI9E,QAAW,EAC/B,CAQA,SAAS7C,GAAWqF,EAAMsC,GACzB,IAAI+P,EAAS,GAEb,IAAK,IAAI3J,KAAO1I,EAAK0R,cACpBW,EAAO75B,KAAK,CAACwnB,EAAK0R,cAAchJ,GAAKxR,GAAIwR,IAE1CpG,EAAI+P,OAASA,CACd,CAEO,SAASS,GAAS9S,EAAMwS,EAAOO,EAAQ9yB,GAC7C,IAaI6d,EAbEkH,EAAQ,CACbwN,MAAOC,GAAe1C,GAAYp3B,KAAI,WAAA,MAAI,EAAE,IAAE5D,KAAK,OAGpD,GAAIg+B,EACH,IAAK,IAAIrK,KAAOqK,EAAOP,MACtBxN,EAAMwN,MAAM9J,GAAOqK,EAAOP,MAAM9J,GAElC,IAAK,IAAKA,KAAO8J,EAChBxN,EAAMwN,MAAM9J,GAAO8J,EAAM9J,GAK1B,GAHA1D,EAAM3H,KAAO2V,GAAYhO,GAGtB/kB,GAAQA,GAAQ+f,EAAKiM,iBAAiB,CAExC,KADAnO,EAAQ1O,GAAK4Q,EAAKsS,SAAS,SAAAxU,GAAK,OAAIA,EAAM5d,MAAQD,MAEjD,OAAO,KACR,GAAG6d,EAAMkM,QAAQqI,OAAO,CACvB,IAAMY,EAAY7jB,GAAK0O,EAAMkM,QAAQqI,QAAQ,SAAAE,GAAG,OAAIA,EAAI,IAAMvN,EAAM3H,QACpE,GAAG4V,EACF,OAAOhS,MAAMgH,OAAOjD,EAAO,CAAC9N,GAAI+b,EAAU,IAC3C,MAEAnV,EAAMkM,QAAQqI,OAAS,EACzB,KACI,CACH,IAAMa,EAAQlT,EAAK0R,cAAc1M,EAAM3H,MACvC,GAAI6V,EACH,OAAOA,CACT,CAIA,OAFAC,GAAUnT,EAAMgF,GAAO,EAAOlH,GAEvBkH,CACR,CAEA,SAASiN,GAAOjS,EAAMsC,EAAKiO,GAC1B,GAAIjO,EAAI+P,OACP,IAAK,IAAIx+B,EAAE,EAAGA,EAAIyuB,EAAI+P,OAAOj+B,OAAQP,IAAI,CACxC,IAAIu/B,EAAW9Q,EAAI+P,OAAOx+B,GAO1Bs/B,GAAUnT,EANE,CACX9I,GAAIkc,EAAS,GACb/V,KAAK+V,EAAS,GACdZ,MAAOC,GAAcW,EAAS,MAGR,EACxB,CAED,IAAI7C,EACH,IAAK,IAAI18B,EAAI,EAAGA,EAAIyuB,EAAIvH,KAAK3mB,OAAQP,IAAI,CACxC,IAAAw/B,EAAA/M,GAA2BhE,EAAIvH,KAAKlnB,GAAE,GAAjCwlB,EAAGga,EAAA,GAAE5V,EAAM4V,EAAA,GAAI1Q,EAAG0Q,EAAA,GAEnB1Q,GACH2Q,GAAkBtT,EAAM3G,EAAKoE,EAAQuC,EAAKyR,QAAQ9O,GACpD,CACF,CA+BA,SAAS6O,GAAaxR,EAAMgF,EAAO9kB,EAAM6S,EAAOuK,GAC/C,GAAG8T,GAAgBlxB,GAClB,OAAOkxB,GAAgBlxB,GAAM8f,EAAMgF,EAAOjS,EAAOuK,GAGlD,GAAI0H,GAASA,EAAMwN,MAAMtyB,IAAS6S,EAAO,OAAOiS,EAEhD,IAAIuO,EAAS,CAAElW,KAAK,GAAInG,GAAG,EAAGsb,MAAQxN,EAAM/D,MAAMvG,KAAKsK,EAAMwN,OAAO,CAAC,GACrEe,EAAOf,MAAMtyB,GAAQ6S,EACrBwgB,EAAOlW,KAAO2V,GAAYO,GAE1B,IAAIL,EAAQlT,EAAK0R,cAAc6B,EAAOlW,MACtC,OAAI6V,IAGJC,GAAUnT,EAAKuT,GAERA,EACR,CAEA,SAASD,GAAkBtT,EAAM3G,EAAKoE,EAAQuH,EAAO/kB,GACpD,IAAMuzB,GAAiBvzB,GAAQA,GAAQ+f,EAAKiM,iBACtCnO,EAAQ0V,EAAgBxT,EAAK0S,OAAS1S,EAAKoS,OAAOpW,QAAQ/b,GAChE,GAAG6d,EAAM,CACR,IAAMwE,EAAMxE,EAAMpF,QAAQW,EAAI,EAAGoE,EAAO,GAAG,GAG3C,GAFA6E,EAAI0C,MAAQA,GAASA,EAAM9N,GAC3BoL,EAAI9E,OAASwH,GAASA,EAAMwN,MAAMhV,QAC9BgW,EAAc,CACjB,IAAMzY,EAAO3L,GAAK4Q,EAAKsS,SAAS,SAAAxU,GAAK,OAAIA,EAAM5d,MAAQD,KAAM+pB,QAAQjP,KAC/D0Y,EAAOrkB,GAAK2L,GAAM,SAAA0Y,GAAI,OAAIA,EAAK,IAAMpa,GAAOoa,EAAK,IAAMhW,KAC1DgW,EAAMA,EAAK,GAAKnR,EAAI0C,MAClBjK,EAAKviB,KAAK,CAAC6gB,EAAKoE,EAAQ,GAAI6E,EAAI0C,OACtC,CACD,CACD,CAEO,SAAS0O,GAAS1T,EAAM1C,EAAM0H,EAAO/kB,GAC3C,OAAO0zB,GAAU3T,EAAM1C,EAAM0H,EAAO/kB,EACrC,CAEO,SAAS2zB,GAAc5T,EAAMhC,EAAOgH,EAAO/kB,GACjD2tB,GAAU5P,EAAOgC,GAAM,SAACA,EAAM1C,EAAMvC,GAAI,OAAK4Y,GAAU3T,EAAM1C,EAAMvC,EAAKiK,MAAOjK,EAAK9a,QAAO,CAAC+kB,MAAAA,EAAO/kB,KAAAA,GACpG,CAEO,SAAS4zB,GAAY7T,EAAM3C,EAAMsF,EAAKmR,GAC5C9C,GAAO+C,UAAY1W,EACnB2T,GAAOhM,MAAMvL,MAAQqa,EAAYA,EAAU,KAAO,OAElD9C,GAAO5M,UAAY,+BAA+BzB,EAClD3C,EAAKgU,OAAO7P,MAAM8P,YAAYjD,IAE9B,IAAMvX,EAAQ9lB,KAAKsT,IAAI,EAAG+pB,GAAOkD,YAAY,GACvCxa,EAAS/lB,KAAKsT,IAAI,EAAG+pB,GAAOmD,aAAa,GAK/C,OAHAnU,EAAKgU,OAAO7P,MAAMiQ,YAAYpD,IAC9BA,GAAO+C,UAAY,GAEZ,CAAEta,MAAAA,EAAOC,OAAAA,EACjB,CAEA,SAASia,GAAU3T,EAAM1C,EAAM0H,EAAO/kB,GACrC,IAAM2jB,EAAMsO,GAASlS,EAAM1C,EAAMrd,GAC3B+rB,EAAchM,EAAKiM,iBACrBhsB,IACHA,EAAO+rB,GACLhM,EAAK6D,UAAU,sBAAuB,CAACvG,EAAKjE,IAAKiE,EAAKG,OAAQuH,EAAOpB,EAAK3jB,KAC5EqlB,GAAMnS,KAAI,WACT,IAAMqK,EAASwH,GAASA,EAAMwN,MAAMhV,QAAU,KACxC6W,EAAYzQ,GAAOA,EAAI4O,MAAMhV,QAAU,KACvC8W,EAAgB9W,GAAU6W,EAChC,KAAIC,GAAkBA,GAAiBtU,EAAK6D,UAAU,uBAAwB,CAACvG,EAAKjE,IAAKiE,EAAKG,OAAQD,EAAQ6W,EAAWp0B,OACxHqzB,GAAkBtT,EAAM1C,EAAKjE,IAAKiE,EAAKG,OAAQuH,EAAO/kB,GACtD+f,EAAK6D,UAAU,gBAAiB,CAACvG,EAAKjE,IAAKiE,EAAKG,OAAQuH,EAAOpB,EAAK3jB,IAEjEq0B,GACFtU,EAAK6D,UAAU,iBAAkB,CAACvG,EAAKjE,IAAKiE,EAAKG,OAAQD,EAAQ6W,EAAWp0B,IAE7E+f,EAAKuU,SAASjX,EAAKjE,IAAIiE,EAAKG,OAAOxd,GAEhCA,GAAQ+rB,GAAY,CACtB,IAAMwI,EAAMxU,EAAKsD,gBACdkR,GAAOA,EAAInb,KAAOiE,EAAKjE,KAAOmb,EAAI/W,QAAUH,EAAKG,QACnDuC,EAAK6D,UAAU,YAAa,CAAC,CAAC3M,GAAG,mBACnC,CAEF,GAEF,CA8BA,SAASic,GAAUnT,EAAMgF,EAAOyP,EAAQ3W,GACvC,GAAGA,GAASA,EAAM5d,MAAQ8f,EAAKiM,iBAAiB,CAE/C,IADA,IAAIO,EAAQ,GACLxH,EAAM9N,IAAM9H,GAAK0O,EAAMkM,QAAQqI,QAAQ,SAAAE,GAAG,OAAIA,EAAI,IAAMvN,EAAM9N,EAAG,KACvE8N,EAAM9N,GAAK,MAAOsV,IACnB1O,EAAMkM,QAAQqI,OAAO75B,KAAK,CAACwsB,EAAM9N,GAAI8N,EAAM3H,MAC5C,KACK,CAGJ,IAFA2C,EAAK0R,cAAc1M,EAAM3H,MAAQ2H,GAEzBA,EAAM9N,IAAM8I,EAAKyR,QAAQzM,EAAM9N,KACtC8N,EAAM9N,GAAK,MAAO8I,EAAK2R,cACxB3R,EAAKyR,QAAQzM,EAAM9N,IAAM8N,EAEzB,IAAA0P,EA1CF,SAAyB1U,EAAMgF,GAC9B,IAAIrC,EAAM,GACNiO,EAAW,GAEf,IAAK,IAAIlI,KAAO1D,EACf,GAAIA,EAAM0D,GACT,GAAIsH,GAAWtH,IACd,GAAGsH,GAAWtH,GAAK1D,EAAM0D,IACxB/F,GAAOqN,GAAWtH,GAAK1D,EAAM0D,IAAM1D,QAC/B,GAA8B,mBAAnBgL,GAAWtH,GAAmB,CAC7C,IAAMiM,EAAS3E,GAAWtH,GAAK1D,EAAOhF,EAAK4U,OAEvB,UAAjB/J,GAAO8J,IACThS,GAAOgS,EAAOhS,KAAO,GACrBiO,GAAY+D,EAAO/D,UAAY,IAG/BjO,GAAOgS,CACT,OAGAhS,GAAM+F,EAAI,IAAI1D,EAAM0D,GAAK,IAI5B,MAAO,CAAC/F,IAAAA,EAAKiO,SAAAA,EACd,CAgB0BiE,CAAgB7U,EAAMgF,EAAMwN,OAA7C7P,EAAG+R,EAAH/R,IAAKiO,EAAQ8D,EAAR9D,SACNgB,EAAS,QAAQ5R,EAAK6R,OAC5B5Q,MAAM6Q,KAAKgB,SAASlB,EAAO,KAAK5M,EAAM9N,GAAG,IAAIyL,EAAI,IAAKiP,GACtD3Q,MAAM6Q,KAAKgB,SAASlB,EAAO,KAAK5M,EAAM9N,GAAG,oBAAoB0Z,EAAS,IAAKgB,EAC5E,CAEK6C,GACJ5W,GAAKmC,EAAM,SAAU,CACpB9f,KAAM8kB,EAAM9N,GACZmG,KAAM2H,EAAM3H,KACZpd,KAAM6d,EAAQA,EAAM5d,KAAO8f,EAAKiM,kBAEnC,CAEO,SAAS+G,GAAYhO,GAE3B,IADA,IAAI9N,EAAK,GACArjB,EAAE,EAAGA,EAAEk8B,GAAY37B,OAAQP,IACnCqjB,EAAG1e,KAAKwsB,EAAMwN,MAAMzC,GAAYl8B,KACjC,OAAOqjB,EAAGniB,KAAK,IAChB,CAEO,SAAS09B,GAAcpV,GAG7B,IAFA,IAAI4P,EAAQ5P,EAAK7nB,MAAM,KACnBg9B,EAAQ,CAAA,EACH3+B,EAAE,EAAGA,EAAEk8B,GAAY37B,OAAQP,IACnC2+B,EAAMzC,GAAYl8B,IAAMo5B,EAAMp5B,GAC/B,OAAO2+B,CACR,CAIO,SAASsC,GAAgB9U,EAAMhC,EAAO/d,GAC5CqlB,GAAMnS,KAAI,WACTya,GAAU5P,EAAOgC,GAAM,SAASA,EAAM1C,GACzB4U,GAASlS,EAAM1C,EAAMrd,IAEhCyzB,GAAS1T,EAAM1C,EAAM,KAAMrd,EAC7B,GACD,GACD,CAEO,SAAS80B,GAAc/U,GAC7B,IAAMgV,EAAahV,EAAKlH,YACxBkc,EAAW3C,OAAS4C,GAAmBD,GAEvCzd,GAAMyI,GACNiS,GAAOjS,EAAMgV,EACd,CAEO,SAASC,GAAmBD,GAKlC,IAJA,IAAMja,EAAOia,EAAWja,KAClBsX,EAAS2C,EAAW3C,OAEpB6C,EAAO,CAAA,EACJrhC,EAAE,EAAGA,EAAEknB,EAAK3mB,OAAQP,IAAI,CAChC,IAAMqM,EAAO6a,EAAKlnB,GAAG,GACjBqM,IACHg1B,EAAKh1B,GAAQ,EACf,CAGA,IADA,IAAMi1B,EAAY,GACVthC,EAAI,EAAGA,EAAEw+B,EAAOj+B,OAAQP,IAAI,CAE/BqhC,EADS7C,EAAOx+B,GAAG,KAEtBshC,EAAU38B,KAAK65B,EAAOx+B,GACxB,CAEA,OAAOshC,CACR,mIAzXO,SAAcnV,GACpBA,EAAK+D,YAAY,cAAc,SAAC7jB,EAAM6S,GAAK,OAoJ5C,SAAsBiN,EAAM9f,EAAM6S,GACjCuS,GAAMnS,KAAI,WACT6M,EAAKoV,kBAAiB,SAAS9X,GAC9B,IAAMyB,EAAOiB,EAAKiD,GAAG,SAAStJ,QAAQ2D,EAAKjE,IAAKiE,EAAKG,UACjDsB,GAASA,GAAQA,EAAK,IAAMzB,EAAKjE,KAAO0F,EAAK,IAAMzB,EAAKG,SAO/D,SAA0BuC,EAAM1C,EAAMpd,EAAM6S,GAC3C,IAAMsiB,EAASnD,GAASlS,EAAM1C,GAE9B,GAAW,UAARpd,EAAiB,CACnB,IAAMo1B,EAAiD,GAAtCD,GAAUA,EAAO7C,MAAMtyB,IAAU,GAElD,IAAIo1B,IAAoB,GAAVviB,EACb,OAEDA,GAASuiB,CACV,CAEA,IAAM/B,EAAS/B,GAAaxR,EAAMqV,EAAQn1B,EAAM6S,EAAOuK,GAEnDiW,GAAUA,GAAU8B,GACvB1B,GAAU3T,EAAM1C,EAAMiW,EACxB,CAtBIgC,CAAiBvV,EAAM1C,EAAMpd,EAAM6S,EACrC,GACD,IACAiN,EAAK3K,SACN,CA7JiDmgB,CAAaxV,EAAM9f,EAAM6S,MACzEiN,EAAK+D,YAAY,eAAe,SAAChJ,GAAI,OAAKkX,GAAOjS,EAAMjF,MACvDiF,EAAK+D,YAAY,mBAAmB,SAAChJ,GAAI,OAAKJ,GAAWqF,EAAMjF,MAC/DiF,EAAK+D,YAAY,WAAW,WAAA,OAAMxM,GAAMyI,MACxCA,EAAK+D,YAAY,UAAU,SAAC4D,EAAMtO,EAAKoE,EAAQuH,GACnC,SAAR2C,GAqEL,SAAoB3H,EAAM3G,EAAKoE,EAAQuH,GACtC,IAAI1H,EAAO,CAACjE,IAAKA,EAAKoE,OAAQA,GAC9BiW,GAAS1T,EAAM1C,EAAM0H,EACtB,CAvEGyQ,CAAWzV,EAAM3G,EAAKoE,EAAQuH,EAChC,IAEAzN,GAAMyI,GAEDgR,KACJA,GAAS/P,MAAM6Q,KAAK4D,OAAO,MAAO,CAAE1Q,MAAM,yEAA0E,IACtH,oHCnJO,IAKI2Q,GACAC,GAEPnV,GACAoV,GATOC,GAAgB,CAAA,EAChB9U,GAAa,GAClB+U,GAAiB,CAACnZ,OAAO,GAaxB,SAASoZ,KACf,IAAMC,EAAgBhV,MAAMC,KAAKC,YAAYV,QAiE7C,IAAI,IAAI5sB,KA5DRmtB,IAFAA,IADAA,GAAa,CAAEC,MAAMC,KAAKgV,QACF7hC,OAAO4sB,MAAMvG,KAAKub,EAAcjV,cAEhCroB,KAAI,SAAA6kB,GAC3B,IAAMtG,EAXR,SAA2BsG,GAC1B,OAAOyD,MAAMU,SAASnE,EAAfyD,CAAuB,GAC/B,CASakV,CAAkB3Y,GAC7B,MAAO,CACNA,OAAAA,EACAtG,GAAAA,EACAnE,MAAOmE,EAAGxhB,OAEZ,IAEA+qB,GAAU,CAAA,EACVkV,GAAe,EACfE,GAAgB,CAAA,EAChBD,GAAc,CAAA,EACdE,GAAgB,CACfI,MAAQ,CACPrD,UAAY,SAAS9f,EAAOqjB,GAE3B,OADAA,EAAMzT,IAAM,4BACL1B,MAAMC,KAAKmV,YAAYtjB,EAC9B,EACDH,OAAOqO,MAAMgH,OAAO,CACnBqO,MAAOrV,MAAMC,KAAKqV,cAAcC,YAChCC,OAAQxV,MAAMC,KAAKgV,MAAMjgC,QAAQ,QAAQ,IACzCinB,UAAW,EAAGC,SAAS,EAAGwK,KAAM,SAC9B+O,GAAc,WAElBC,IAAQ,CACP9D,UAAY,SAAS9f,EAAOqjB,GAE3B,OADAA,EAAMzT,IAAM,0BACL1B,MAAMC,KAAK0V,aAAa7jB,EAC/B,EACDH,OAAOqO,MAAMgH,OAAO,CACnBqO,MAAOrV,MAAMC,KAAKsV,YAClBtZ,UAAW,EAAGC,SAAS,EAAGwK,KAAM,OAC9B+O,GAAc,SAElB3Z,QAAU,CACT8V,UAAY,SAAS9f,EAAOqjB,GAE3B,OADAA,EAAMzT,IAAM,8BACLhvB,KAAKG,MAAY,IAANif,GAAW,GAC7B,EACDH,OAAOqO,MAAMgH,OAAO,CACnBqO,MAAO,EAAGpZ,UAAW,EAAGC,SAAS,EAAGwK,KAAM,WACxC+O,GAAc,aAElB1Z,KAAO,CACN6V,UAAY,SAAS9f,EAAOqjB,GAE3B,OADAA,EAAMzT,IAAM,2BACLkU,GAAYZ,EAAcvV,WAAYgW,GAAc,QAApDG,CAA6D9jB,EACpE,EACDH,OAAQ,CAAE+U,KAAK,OAAQ3K,KAAKiZ,EAAcvV,aAE3CzD,OAAS,CACR4V,UAAY,SAAS9f,EAAOqjB,GAE3B,OADAA,EAAMzT,IAAM,2BACL5P,CACP,EACDH,OAAQ,CAAE+U,KAAK,YAKhBoO,GAAeliC,GAAK,EACpBgiC,GAAchiC,GAAKijC,GAAgBC,GAAaljC,EAAGiiC,GAAcjiC,GAAG+e,SACpEgjB,GAAYC,GAAchiC,IAAMA,CAElC,CAEO,SAAS6iC,GAAc/O,GAC7B,MAAW,SAARA,EACK,CAAEqP,UAAU/V,MAAMC,KAAKqV,cAAcU,eAAgBC,YAAYjW,MAAMC,KAAKqV,cAAcY,kBAE1F,CAAEH,UAAU/V,MAAMC,KAAK+V,eAAgBC,YAAYjW,MAAMC,KAAKiW,iBACvE,CAqBO,SAAStE,GAAU3yB,GACzB,OAAO41B,GAAc51B,GAAQ41B,GAAc51B,GAAM2yB,UAAYiD,GAAc51B,EAC5E,CAEO,SAASk3B,GAAgBl3B,EAAMm3B,GACrC,OAAGA,EAEKP,GADMQ,GAAY,CAAC1kB,OAAQkjB,GAAc51B,GAAM0S,OAAQ4K,OAAQqY,GAAc31B,MACrD,GAGxB21B,GAAc31B,EACvB,CAEA,SAASq3B,GAAiB1K,EAAKja,GAC9B,GAAIgjB,GAAY/I,GAAM,OAAO+I,GAAY/I,GAEzC,IAAI3sB,EAAyB,UAAlB2qB,GAAOjY,GAAsB,MAAO+iB,GAAgB/iB,EAqB/D,OApBA+iB,KAEAlV,GAAQvgB,GAAQ2sB,EAEK,iBAAXja,IACTA,EAoaF,SAAsB4K,GACrB,IAAMyY,EAAgBhV,MAAMC,KAAKC,YAAYV,QACvC+W,EAAQ,CACbvB,EAAcvV,WACduV,EAActV,WACdsV,EAAcpV,eACdoV,EAAcrV,gBAET0J,EAAO,CAAC9M,OAAAA,EAAQmK,KAAK,UAE3B,GAAGD,GAAS8P,GAAO,SAAAxa,GAAI,OAAIA,GAAQQ,CAAM,IACxCyD,MAAMgH,OAAOqC,EAAM,CAClB3C,KAAK,OAAQ3K,KAAKQ,IAChB,OAEA,CACH,IAMMia,EANiCC,EAAApR,GAAjB9I,EAAOhoB,MAAM,KAAI,GAAlCmiC,EAAKD,EAAA,GAAEE,EAAMF,EAAA,GAClB,GAAGC,GAASC,EACX,GAA6B,GAA1BD,EAAM7hC,QAAQ,UAA2C,GAA1B8hC,EAAO9hC,QAAQ,QAuBhD,GAtBA6hC,EAAQA,EAAM1hC,QAAQ,QAAS,IAID,IAH9B2hC,EAASA,EAAO3hC,QAAQ,OAAQ,KAGtBH,QAAQ,WACjB8hC,EAASA,EAAO3hC,QAAQ,QAAS,IACjCwhC,GAAM,GAGS,KAAbG,EAAO,IACTA,EAASA,EAAO3iC,UAAU,GAC1Bq1B,EAAKnN,SAAWsa,EAAM,EAAI,GAEnBA,IACS,KAAbG,EAAO,IAAwC,KAA3BA,EAAOA,EAAOxjC,OAAO,IAC3Ck2B,EAAKnN,SAAW,EAChBya,EAASA,EAAO3iC,UAAU,EAAG2iC,EAAOxjC,OAAO,IAG3Ck2B,EAAKnN,SAAW,GAGfmN,EAAKnN,UAAYwa,GAASC,EAAO,CACnC,IAAIjQ,EAAO,MACPkQ,GAAwC,GAAxBF,EAAM7hC,QAAQ,MAElC,GAA4B,KAAzB6hC,EAAMA,EAAMvjC,OAAO,GACrBujC,EAAQA,EAAM1iC,UAAU,EAAG0iC,EAAMvjC,OAAO,GACxCuzB,EAAO,eAGP,IAAI,IAAI9zB,EAAI,EAAGA,EAAImtB,GAAW5sB,OAAQP,IAAI,CACzC,IAAMgpB,EAAWmE,GAAWntB,GAAGqjB,GAC3B4gB,OAAO,EAaX,GAXGD,GACqC,GAApCF,EAAM7hC,QAAO,KAAAzB,OAAMwoB,EAAQ,QAC7B8a,EAAQA,EAAM1hC,QAAO,KAAA5B,OAAMwoB,EAAa,KAAA,IACxCib,GAAU,IAGwB,GAA5BH,EAAM7hC,QAAQ+mB,KACrB8a,EAAQA,EAAM1hC,QAAQ4mB,EAAU,IAChCib,GAAU,GAGRA,EAAQ,CACVnQ,EAAO,QACP2C,EAAKmM,OAAS5Z,EACd,KACD,CACD,CAGD,IAAMkb,EAAarB,GAAc/O,GAEa,GAA3CgQ,EAAM7hC,QAAQ,IAAIiiC,EAAWf,aAC/BW,EAAQA,EAAM1hC,QAAQ,IAAI8hC,EAAWf,UAAW,IAChD1M,EAAKpN,UAAY,GAGlB,IAA8D8a,EAAA1R,GAAnCqR,EAAMniC,MAAMuiC,EAAWb,aAAY,GAAvDe,EAAOD,EAAA,GAAEE,EAAOF,EAAA,GAClBC,GAAsB,KAAXA,GAAqBC,IAAW,SAAS9xB,KAAK8xB,KAC7D5N,EAAK3C,KAAOA,EACZ2C,EAAKyN,WAAaA,EAClBzN,EAAKgM,MAAQ4B,EAAUA,EAAQ9jC,OAAS,EAE1C,CAGH,CACA,OAAOk2B,CACR,CA/fW6N,CAAatL,IAEvB5L,MAAMgH,OACLrV,EACA8jB,GAAc,WAGfZ,GAAc51B,GAAQ,CACrB2yB,UAAUgE,GAAYhK,EAAK,CAACqK,YAAatkB,EAAOskB,YAAaF,UAAWpkB,EAAOokB,YAC/EpkB,OAAQA,GAGTijB,GAAc31B,GAAQ2sB,EACtB+I,GAAY/I,GAAO3sB,EAEZA,CACR,CAEO,SAASk4B,GAAUpY,EAAM3G,EAAKoE,EAAQD,EAAQmK,EAAM1nB,GACtD0nB,IACHA,EAAO,CAACnK,OAAAA,EAAQmK,KAAM,WAEvB,IAAM/D,EAAM5D,EAAKkS,SAAS7Y,EAAKoE,EAAQxd,GACjCC,EAAOq3B,GAAiB/Z,EAAQmK,GAEtC3H,EAAKsS,QAAQ35B,KAAI,SAAAmlB,GACZA,EAAMkM,QAAQvJ,UACjB3C,EAAMkM,QAAQvJ,QAAU,IACrBiH,GAAS5J,EAAMkM,QAAQvJ,SAAS,SAAAjD,GAAM,OAAIA,EAAO,IAAMtd,CAAI,KAC9D4d,EAAMkM,QAAQvJ,QAAQjoB,KAAK,CAAC0H,EAAMsd,GACpC,IAEA,IAAM6a,EAAMvF,GAAS9S,EAAM,CAAExC,OAAQtd,GAAQ0jB,EAAK3jB,GAClD+f,EAAK0T,SAASra,EAAKoE,EAAQ4a,EAAKp4B,EACjC,CAEO,SAASq4B,GAAatY,EAAM3G,EAAKoE,GACvC,IAAMmG,EAAM5D,EAAKkS,SAAS7Y,EAAKoE,GACzB4a,EAAMvF,GAAS9S,EAAM,CAAExC,OAAO,IAAMoG,GAC1C5D,EAAK0T,SAASra,EAAKoE,EAAQ4a,EAC5B,CAEA,SAASE,GAAY1L,GACpB,IAAIxN,EAAcwN,EAAI90B,MAAM,gBACxBk1B,EAAQJ,EAAIr3B,MAAM,KAStB,OARK6pB,GACA4N,EAAM74B,OAAS,IAClB64B,EAAM,IAAMA,EAAM74B,OAAS,EAAI,OAAS,SAAS64B,EAAM,GACvDA,EAAM,GAAK,OAAOA,EAAM,GACpBA,EAAM,KACTA,EAAM,GAAK,OAAOA,EAAM,KAGpBA,CACR,CAEO,SAAS4J,GAAYhK,EAAKkL,GAIhC,IAHA,IAQIxS,EAREiT,EAAevX,MAAMC,KAAKC,YAAYjB,MAAM,gBAC9C+M,EAAQsL,GAAY1L,GACpB9tB,EAAO,CAAC,4FACHlL,EAAE,EAAGA,EAAEo5B,EAAM74B,OAAQP,IAAI,CACjC,IAAI4kC,EAAYC,GAAYzL,EAAMp5B,IAClCkL,EAAKvG,KAAKmgC,GAAQF,EAAU1a,UAAW0a,EAAU5Z,MAAMxpB,cAAeojC,EAAUhC,OAAQgC,EAAUG,IAAK/kC,EAAGo5B,EAAM74B,OAAS,EAAG2jC,GAC7H,CAGA,IACCxS,EAAS,IAAI7kB,SAAS,MAAM,gBAAOrM,OAAU0K,EAAKhK,KAAK,8CAAKV,OAAuCmkC,EAAY,QAC/G,CACD,MAAMK,GACLtT,EAAS,WAAW,OAAOiT,EAC5B,CACA,OAAOjT,CACR,CAEA,SAASoT,GAAQG,EAAOja,EAAO4X,EAAQ7G,EAAMmJ,EAAKC,EAAOjB,GACxD,IAAIlL,EAAM,GAYV,OAXIiM,IACuBjM,GAArBkM,EAA0B,UAAhB,KACE,MAAbD,EAAM,KAAYA,EAAQ,IAAIA,GAClCjM,GAAK,OAAOiM,EAAM,KACdE,IAAOnM,GAAK,yBAEbhO,IACHgO,GAAK,oCAAqChO,EAAM,MAEjDgO,GAuDD,SAAuB+C,EAAMmI,EAAYtB,GACxC,IAAK7G,EACJ,MAAO,cAER,IAEIqJ,EAGAC,EAAOC,EAAmBC,EAI1BC,EATAxM,EAAM,YAGN+L,EAAM,GACNU,EAAW,EAEXtc,EAAO,GACPuc,EAAe,OAGnB,GAAG9C,EAAO,CACT,IAAM5Z,EAAW6K,GAAS1G,IAAY,SAAAwY,GAAG,OAAIA,EAAItiB,IAAMuf,KACvD4C,EAAY,OAETxc,IACFwc,EAAY3R,GAAc7K,EAASW,OAAOhoB,MAAM,UAAU,SAAAgkC,GAAG,OAAIA,KAAO,QAAU,OACpF,CAEA,IAAK,IAAI3lC,EAAE,EAAGA,EAAE+7B,EAAKx7B,OAAQP,IAAI,CAChC,IAAI4lC,EAAsBC,GAAY9J,EAAK/7B,EAAE,KAAK6lC,GAAY9J,EAAK/7B,EAAE,IACrE,GAAe,KAAX+7B,EAAK/7B,IAST,GAAKotB,MAAM6J,YAAYmO,GAKvB,GAHc,KAAXrJ,EAAK/7B,KACPylC,GAAoB,KAElB,WAAWlzB,KAAKwpB,EAAK/7B,IAAI,CAC3B,IAAM8lC,EAAWC,GAAiBhK,EAAKx5B,OAAOvC,GAAI0lC,GAClD,GAAGI,EAAS,CACX,GAAGR,GAAqBC,EACvB,MAAO,yCACRpc,EAAKxkB,KAAKmhC,EAASnc,QACnBqP,GAAO,WACP0M,EAAeI,EAAShS,KACxB9zB,GAAK8lC,EAASvlC,OAAO,EACrB,SAGAy4B,GAAGx4B,KAAAA,OAASu7B,EAAK/7B,GAAK,IACxB,MACK,GAAI+7B,EAAK/7B,KAAOkkC,EAAWb,aAAeuC,EAC9Cb,GAAMb,EAAWb,iBAEb,GAAY,KAATtH,EAAK/7B,GAAQ,CACpB,GAAGslC,GAAqBnc,EAAK5oB,OAC5B,MAAO,yCACJglC,IACHvM,GAAK,OACLuM,GAAkB,GAEnBR,GAAKhJ,EAAK/7B,EACV,MACI,GAAI6lC,GAAY9J,EAAK/7B,IAAI,CAC7B,GAAGulC,GAAmBpc,EAAK5oB,OAC1B,MAAO,uCACH+kC,IACY,QAAbE,IACFxM,GAAGx4B,KAAAA,OAASoiC,EAAS,MACtB5J,GAAK,OACW,SAAbwM,IACFxM,GAAGx4B,KAAAA,OAASoiC,EAAS,MACtB0C,GAAkB,GAEnBP,GAAKhJ,EAAK/7B,QAEF+7B,EAAK/7B,KAAOkkC,EAAWf,WAAayC,EAC5CP,GAAQ,EAERrM,GAAG,KAAAx4B,OAASu7B,EAAK/7B,GAAK,UAvDnBotB,MAAM6J,YAAYmO,GACpBA,EAAUplC,GAEVg5B,QAAGx4B,OAASu7B,EAAKx5B,OAAO6iC,EAAQ,EAAGplC,EAAEolC,EAAQ,GAAK,KAClDA,OAAUY,EAoDb,CAEA,GAAG7c,EAAK5oB,OAAO,EAEY,GAAvB4oB,EAAKlnB,QAAQ,QACfknB,EAAOA,EAAKrkB,KAAI,SAAAghC,GACf,OAAOA,GACN,IAAK,KAAM,MAAO,KAClB,IAAK,KAAM,MAAO,KAClB,QAAS,OAAOA,EAElB,KAED,IAAI,IAAI9lC,EAAI,EAAGA,EAAImpB,EAAK5oB,OAAQP,IAC/Bg5B,EAAMA,EAAI52B,QAAQ,WAAU,cAAA5B,OAAgBR,EAAC,KAC/C,CAEA,MAAA,SAAAQ,OACG2oB,EAAK5oB,OAAM,UAAAC,OAAa6yB,qDAAkB7yB,OAAiD2oB,EAAKjoB,KAAK,4BAA4B,GAAE,UAAAV,OACnIukC,EAAGvkC,GAAAA,OAIP,SAAsBukC,EAAKM,EAAOnB,EAAYuB,GAC7C,IAAIzM,EAAG,mBAAAx4B,OAAsBukC,EAA8C,6CACvEV,EAAUH,EAAWb,YACzB4C,EAAoBC,GAASnB,EAAKV,GAAQ8B,EAAA1T,GAAAwT,EAAA,GAArC7J,EAAI+J,EAAA,GAAE7J,EAAK6J,EAAA,GAChB7J,GAASA,GAAS,IAAI36B,MAAM,IAAIykC,UAAUllC,KAAK,IAG/C,IAAImlC,EAASjK,EAAKn6B,QAAQ,KAAUokC,GAAQ,IAAGA,EAASjK,EAAK77B,OAAS8lC,GACtE,IAAIC,EAASlK,EAAKn6B,QAAQ,KAAUqkC,GAAQ,IAAGA,EAASlK,EAAK77B,OAAS+lC,GACtE,IAAIC,EAASjK,EAAMr6B,QAAQ,KAAUskC,GAAQ,IAAGA,EAASjK,EAAM/7B,OAASgmC,GACxE,IAAIC,EAASlK,EAAMr6B,QAAQ,KAAUukC,GAAQ,IAAGA,EAASlK,EAAM/7B,OAASimC,GACxE,IAAIC,EAAOnK,EAAM/7B,OAyCjB,OAvCAy4B,GAAG,iBAAAx4B,OACSilC,mCAAQjlC,OACMimC,EAAI,2HAAAjmC,OAIV6lC,EAAM7lC,oCAAAA,OAAmC6lC,EAAM7lC,+CAAAA,OAC/C8lC,EAAM,iCAAA9lC,OAAgC8lC,EAAM,kCAAA9lC,OAC1D6kC,oTAAK7kC,OAUmB0jC,EAAWf,UAAS3iC,oFAAAA,OAI9B+lC,oMAAM/lC,OAUJgmC,EAAM,2CAAAhmC,OACKgmC,EAAMhmC,6DAAAA,OAGd6jC,EACxB,oBAEMrL,EAAI,KACZ,CAzDa+J,CAAagC,EAAKM,EAAOnB,EAAYuB,GAAS,KAAM,GAAEjlC,UAAAA,OAC/Dw4B,EAAG,IACP,CA7JQ0N,CAAc3K,EAAMmI,EAAYtB,GAEhC5J,GAAKiM,EAAM,IAAI,GACvB,CAEA,IAAM0B,GAAY,CACjBC,GAAM,KACNC,KAAQ,KACR5lC,EAAK,KACL6lC,GAAM,KACNC,IAAO,KACPC,KAAQ,KACRC,MAAQ,KACRpmC,EAAK,KACLqmC,GAAM,KACNC,IAAO,KACPC,KAAQ,MAGHC,GAAY,CACjB3mC,EAAK,KACL4mC,GAAM,KACNrmC,EAAK,KACL6lC,GAAM,KACNxmC,EAAK,KACLinC,GAAM,KACN,QAAS,MAGJC,GAAY/kC,OAAO4b,KAAKsoB,IAAWv1B,MAAK,SAAChR,EAAGkB,GAAC,OAAKA,EAAEf,OAASH,EAAEG,MAAM,IACrEknC,GAAYhlC,OAAO4b,KAAKgpB,IAAWj2B,MAAK,SAAChR,EAAGkB,GAAC,OAAKA,EAAEf,OAASH,EAAEG,MAAM,IAE3E,SAASwlC,GAAiBvc,EAAMkc,GAC/B,IAAMgC,EAAa,CAClB,CAACr7B,KAAK,OAAQs7B,MAAMH,GAAWI,MAAMjB,IACrC,CAACt6B,KAAK,OAAQs7B,MAAMF,GAAWG,MAAMP,KAIlB,eAAe90B,KAAKiX,IACN,QAAhBkc,GACjBgC,EAAWtB,UAEZ,IAAI,IAAIpmC,EAAI,EAAGA,EAAI0nC,EAAWnnC,OAAQP,IAErC,IADA,IAAM8zB,EAAO4T,EAAW1nC,GAChB2G,EAAI,EAAGA,EAAImtB,EAAK6T,MAAMpnC,OAAQoG,IACrC,GAAkC,GAA/B6iB,EAAKvnB,QAAQ6xB,EAAK6T,MAAMhhC,IAC1B,MAAO,CACNgjB,OAAQmK,EAAK8T,MAAM9T,EAAK6T,MAAMhhC,IAC9BpG,OAAQuzB,EAAK6T,MAAMhhC,GAAGpG,OACtBuzB,KAAMA,EAAKznB,KAGhB,CA+LO,SAASw7B,GAAmB1b,EAAMmO,EAAK9U,EAAKoE,EAAQxd,GAC1D,IAAMuzB,GAAiBvzB,GAAQA,GAAQ+f,EAAKiM,iBACtCnO,EAAQ0V,EAAgBxT,EAAK0S,OAAS1S,EAAKoS,OAAOpW,QAAQ/b,GAChE,GAAI6d,EAAJ,CAGA,IAAMiQ,EAwUP,SAAkB/N,EAAM3G,EAAKoE,GAC5B,GAAGpE,GAAOoE,EAAO,CAChB,GAAmB,WAAfoN,GAAOxR,IAAsC,WAAlBwR,GAAOpN,GAAoB,CAEzD,IADA,IAAIsQ,EAAQ,GACH36B,EAAIimB,EAAIA,IAAKjmB,GAAGqqB,EAAOpE,IAAKjmB,IACpC,IAAK,IAAIkB,EAAI+kB,EAAIoE,OAAQnpB,GAAGmpB,EAAOA,OAAQnpB,IAC1Cy5B,EAAMv1B,KAAK,CAAC6gB,IAAKjmB,EAAGqqB,OAAQnpB,IAC9B,OAAOy5B,CACP,CAEA,MAAO,CAAC,CAAC1U,IAAKA,EAAKoE,OAAQA,GAC5B,CAEA,OAAOuC,EAAKsD,eAAc,EAC5B,CAtVeqY,CAAS3b,EAAM3G,EAAKoE,GAClC,GAAmB,GAAhBsQ,EAAM35B,OAAT,CAGA,IAAMkuB,EAAMxE,EAAMpF,QAAQqV,EAAM,GAAG1U,IAAI,EAAG0U,EAAM,GAAGtQ,OAAO,GACpD4W,EAAY/R,GAAOA,EAAI9E,OACvBzK,EAASuP,GAAOA,EAAIvP,MAASuP,EAAIvP,MAAMpe,WAAa,GAE1D,IAAGssB,MAAM2a,MAAMC,SAAS9oB,IAAUshB,KACjC/O,GAAMnS,KAAI,WACT,IAAI,IAAItf,EAAI,EAAGA,EAAIk6B,EAAM35B,OAAQP,IAChCioC,GAAmB9b,EAAMmO,EAAKJ,EAAMl6B,GAAIoM,EAAM6d,EAChD,IAEG0V,GAAc,CAChBxT,EAAK3K,UAEL,IAAImI,EAASue,GAAc/b,EAAM+N,EAAM,GAAG1U,IAAK0U,EAAM,GAAGtQ,SAAW,SACnED,EAASwe,GAASxe,GAAU,SAAWA,EACvCwC,EAAK6D,UAAU,YAAa,CAAC,CAAC3M,GAAG,iBAAkBhX,KAAK,SAAU6S,MAAMyK,IACzE,CAlBA,CAJA,CAwBF,CAEA,SAASse,GAAmB9b,EAAMmO,EAAK7Q,EAAMrd,EAAM6d,GAClD,IAAIN,EACE8E,EAAMxE,EAAMpF,QAAQ4E,EAAKjE,IAAI,EAAGiE,EAAKG,OAAO,GAC5C4W,EAAY/R,GAAOA,EAAI9E,OACvBzK,EAASuP,GAAOA,EAAIvP,MAASuP,EAAIvP,MAAMpe,WAAa,GAEvD0/B,IACF7W,EAASyD,MAAMvG,KAAK,CAAC9H,OAAOkjB,GAAczB,GAAWzhB,OAAQ4K,OAAO4Z,GAAgB/C,MAC7E7W,OApET,SAAwBob,EAAKzK,EAAKqL,GAEjC,IADA,IAAIyC,EAAS3E,GAAYsB,GACjB/kC,EAAI,EAAGA,EAAIooC,EAAO7nC,OAAQP,IAAI,CACrC,GAAGooC,EAAOpoC,GAAGqoC,SACT/N,EAAI,EACN8N,EAAOpoC,GAAGs8B,MAAMgM,cAAgBhkC,MAAMg2B,EAAI,GAAGp5B,KAAK,KAElDknC,EAAOpoC,GAAGs8B,MAAMgM,aAAeF,EAAOpoC,GAAGs8B,MAAMgM,aAAa7wB,MAAM,EAAG6iB,OAEnE,CACH,IAAMiO,GAAeH,EAAOpoC,GAAGo8B,KAAK5S,OAAS4e,EAAOpoC,GAAGs8B,MAAM9S,KACvDgf,GAAuBJ,EAAOpoC,GAAGo8B,KAAKkM,eAAiBF,EAAOpoC,GAAGs8B,MAAMgM,aAE1EhO,EAAM,GAAKiO,GAAeC,GAAuBpb,MAAM2a,MAAMC,SAASrC,IAAQA,EAAI1jC,QAAQ,MAAQ,GACpGmmC,EAAOpoC,GAAGo8B,KAAKkM,aAAe,IAC9BF,EAAOpoC,GAAGs8B,MAAMgM,aAAehkC,MAAMqhC,EAAIhkC,MAAM,KAAK,GAAGpB,QAAQW,KAAKoD,MAAMg2B,EAAI,GAAGp5B,KAAK,OAG/Eo5B,EAAM,IAAM8N,EAAOpoC,GAAGo8B,KAAKkM,cAAgBC,KAClDH,EAAOpoC,GAAGo8B,KAAKkM,aAAeF,EAAOpoC,GAAGo8B,KAAKkM,cAAgB,IAC7DF,EAAOpoC,GAAGs8B,MAAMgM,aAAehkC,MAAMg2B,EAAI,GAAGp5B,KAAK,KACjDknC,EAAOpoC,GAAGqoC,UAAW,EAEvB,CACAD,EAAOpoC,GAAGqoC,SAAWD,EAAOpoC,GAAGs8B,MAAMgM,aAAa/nC,OAAS,CAC5D,CAEA,OAAO0iC,GAAgBmF,EACxB,CAwCkBK,CAAe9e,EAAQ2Q,EAAKpb,GAEzCyK,EAAO5K,QAAUtc,OAAOuuB,UAAU0X,eAAe/X,KAAKhH,EAAO5K,OAAQ,WACvE4K,EAAO5K,OAAO0jB,MAAQ3iC,KAAKsT,IAAIuW,EAAO5K,OAAO0jB,MAAMnI,EAAK,MAMzD3Q,EAAS,CAAC5K,OAAO,CAACuK,SAAS,EAAGmZ,MAFhBrV,MAAM2a,MAAMC,SAAS9oB,IAAUA,EAAMvd,MAAM,KAAK,GAAK7B,KAAKsT,IAAI8L,EAAMvd,MAAM,KAAK,GAAGpB,OAAO+5B,EAAK,GAAKx6B,KAAKsT,IAAIknB,EAAK,GAEpFjR,UAAU,EAAGyK,KAAK,SACtDnK,OAASsZ,GAAgBC,GAAavZ,EAAO5K,OAAO+U,KAAMnK,EAAO5K,SAEzEwlB,GAAUpY,EAAM1C,EAAKjE,IAAKiE,EAAKG,OAAQD,EAAOA,OAAQA,EAAO5K,OAAQ3S,EACtE,CAEO,SAAS+7B,GAAS97B,GACxB,OAAQ61B,GAAe71B,EACxB,CAEO,SAAS62B,GAAapP,EAAM6U,GAClC,GAAW,UAAR7U,EACF,MAAO,CAAC,CAACsI,KAAK,CAAC5S,KAAK,OACrB,GAAGmf,EAAWxf,KACb,MAAO,CAAC,CAACiT,KAAK,CAAC5S,KAAKmf,EAAWxf,QAEhC,IAAIpK,EAAS,CAAC,CAACmL,UAAU,MAAOkS,KAAK,CAAC5S,KAAK,IAAI8S,MAAM,CAAC9S,KAAK,KAAM,CAACU,UAAU,KAAMkS,KAAK,CAAC5S,KAAK,IAAK8S,MAAM,CAAC9S,KAAK,MAW9G,GAVA4D,MAAMgH,OAAOrV,EAAQ8jB,GAAc/O,IACnC/U,EAAO,GAAGud,MAAMgM,aAAevpB,EAAO,GAAGud,MAAMgM,aAAeK,EAAWlG,MAAQn+B,MAAMqkC,EAAWlG,MAAQ,GAAGvhC,KAAK,KAAO,GACzH6d,EAAO,GAAGsK,UAAYtK,EAAO,GAAGsK,UAAYsf,EAAWtf,WAAqB,WAARyK,EACpE/U,EAAO,GAAGqd,KAAKkM,aAAevpB,EAAO,GAAGqd,KAAKkM,aAAevpB,EAAO,GAAGsK,UAAY,IAAItK,EAAOokB,UAAW,IAAM,IAC9GpkB,EAAO,GAAGspB,SAAWtpB,EAAO,GAAGspB,WAAWM,EAAWlG,MACrD1jB,EAAO,GAAGiM,MAA+B,GAAvB2d,EAAWrf,SAAgB,MAAQ,GACrDvK,EAAO,GAAGqd,KAAK5S,MAAQmf,EAAWrf,SAAW,EAAI,IAAM,GAC7B,GAAvBqf,EAAWrf,WACbvK,EAAO,GAAGqd,KAAK5S,MAAQ,KAEZ,YAATsK,EACF/U,EAAO,GAAGud,MAAM9S,KAAOzK,EAAO,GAAGud,MAAM9S,MAAQ,SAC3C,GAAY,UAATsK,EAAiB,CACxB,IAAM8U,EAAWD,EAAW/F,OAEtB9F,EAAMjJ,GADKA,GAAS1G,IAAY,SAAAwY,GAAG,OAAIA,EAAItiB,IAAMulB,KACpBjf,OAAOhoB,MAAM,UAAU,SAAAgkC,GAAG,OAAIA,KAAO,QAAU,OAElF5mB,EAAO,GAAG+d,GAAK8F,OAAS7jB,EAAO,GAAG+d,GAAK8F,OAASgG,CACjD,CAKA,OAH0B,GAAvBD,EAAWrf,WACbvK,EAAO,GAAGud,MAAM9S,MAAQ,KAElBzK,CACR,CA+FO,SAASkkB,GAAgBlkB,EAAQ8pB,GAEvC,IADA,IAAI9D,EAAM,GACF/kC,EAAI,EAAGA,EAAI+e,EAAOxe,OAAQP,IAAI,CAMrC,GALG+e,EAAO/e,GAAGkqB,YACZ6a,GAAO,IAAIhmB,EAAO/e,GAAGkqB,UAAU,KAC7BnL,EAAO/e,GAAGgrB,QACZ+Z,GAAO,IAAIhmB,EAAO/e,GAAGgrB,MAAM,KAEzBjM,EAAO/e,GAAGo8B,KAAK,CACjB,GAAGrd,EAAO/e,GAAGo8B,KAAK5S,KAEjBub,GADehmB,EAAO/e,GAAGo8B,KAAK5S,KAK/B,GAFGzK,EAAO/e,GAAGo8B,KAAKwG,SACjBmC,GAAO,KAAKhmB,EAAO/e,GAAGo8B,KAAKwG,OAAO,KAChC7jB,EAAO/e,GAAGo8B,KAAKkM,aAAa,CAC9B,IAAIQ,EAAmB/pB,EAAO/e,GAAGo8B,KAAKkM,aACtCvD,GAAO8D,EAAUC,EAAiB1mC,QAAQ2c,EAAOokB,UAAW,KAAO2F,CACpE,CACD,CAKA,GAHG/pB,EAAO/e,GAAGqoC,WACZtD,GAAO8D,EAAU,IAAM9pB,EAAOskB,aAE5BtkB,EAAO/e,GAAGs8B,MAKZ,GAJGvd,EAAO/e,GAAGs8B,MAAMgM,eAClBvD,GAAOhmB,EAAO/e,GAAGs8B,MAAMgM,cACrBvpB,EAAO/e,GAAGs8B,MAAMsG,SAClBmC,GAAO,KAAKhmB,EAAO/e,GAAGs8B,MAAMsG,OAAO,KACjC7jB,EAAO/e,GAAGs8B,MAAM9S,KAGlBub,GAFgBhmB,EAAO/e,GAAGs8B,MAAM9S,KAK/BxpB,GAAK+e,EAAOxe,OAAS,IACvBwkC,GAAO,IACT,CACA,OAAOA,CACR,CAEA,SAAStB,GAAYsB,GAIpB,IAHA,IAAMgE,EAAWhE,EAAIpb,OAAOhoB,MAAM,KAC9Bod,EAAS,GAAG+Y,EAAAA,WAGf,IAAI8M,EAAYC,GAAYkE,EAAS/oC,IACrC+e,EAAO/e,GAAK,CAACgrB,MAAM4Z,EAAU5Z,MAAOd,UAAU0a,EAAU1a,UAAWkS,KAAK,CAAE,EAAEE,MAAM,CAAC,GAEnF,IAAM3S,EAASib,EAAUG,IAEzBhmB,EAAOokB,UAAY4B,EAAIhmB,OAAOokB,UAC9BpkB,EAAOskB,YAAc0B,EAAIhmB,OAAOskB,YAE7B1Z,EAAO1nB,QAAQ8c,EAAOokB,YAAc,IACtCpkB,EAAO/e,GAAGqpB,WAAY,GAEvB,IAAM2f,EAAc9C,GAASvc,EAAQ5K,EAAOskB,aAExCjH,EAAO4M,EAAY,GACnB1M,EAAQ0M,EAAY,IAAM,GAE3BA,EAAY,KACdjqB,EAAO/e,GAAGqoC,UAAW,GAEtBjM,EAAO6M,GAAiB7M,EAAM,OAAQrd,EAAOokB,WAC7C7G,EAAQ2M,GAAiB3M,EAAO,QAASvd,EAAOokB,WAEhDpkB,EAAO/e,GAAGo8B,KAAO,CAChB5S,KAAM4S,EAAK8M,SACXZ,aAAclM,EAAKkM,cAGpBvpB,EAAO/e,GAAGs8B,MAAQ,CACjB9S,KAAM4S,EAAK+M,UAAY7M,EAAM6M,UAC7Bb,aAAchM,EAAMgM,cAGrB,IAAM1F,EAASgC,EAAUhC,OACzB,GAAGA,EAAO,CACT,IAAM5Z,EAAW6K,GAAS1G,IAAY,SAAAwY,GAAG,OAAIA,EAAItiB,IAAMuf,KACnD9F,EAAM,OAEP9T,IACF8T,EAAMjJ,GAAc7K,EAASW,OAAOhoB,MAAM,UAAU,SAAAgkC,GAAG,OAAIA,KAAO,QAAU,QAE7E5mB,EAAO/e,GAAG88B,GAAK8F,OAASA,CACzB,GA1CO5iC,EAAI,EAAGA,EAAI+oC,EAASxoC,OAAQP,IAAG83B,IA4CvC,OAAO/Y,CACR,CAEA,SAASkqB,GAAiBG,EAAStV,EAAMqP,GACxC,IAAIkG,EACO,QAARvV,IAEFuV,GADAA,EAAmBD,EAAQllC,MAAM,UACKmlC,EAAiB1Q,MAAQ2Q,KAMhE,IAHA,IAAIJ,EAAW,GACXC,EAAY,GACZb,EAAe,GACXtiC,EAAI,EAAGA,EAAIojC,EAAQ7oC,OAAQyF,IAClC,GAAI6/B,GAAYuD,EAAQpjC,IAavBsiC,GAAgBc,EAAQpjC,OAbG,CAC3B,GAAGojC,EAAQpjC,IAAMm9B,GAAa0C,GAAYuD,EAAQpjC,EAAE,KAAO6/B,GAAYuD,EAAQpjC,EAAE,IAAI,CACpFsiC,GAAgBc,EAAQpjC,GACxB,QACD,CACA,GAAW,QAAR8tB,GACC9tB,EAAIqjC,EAAiB,CACvBH,GAAYE,EAAQpjC,GACpB,QACD,CACDmjC,GAAaC,EAAQpjC,EACtB,CAID,MAAO,CAACkjC,SAAUA,EAAUC,UAAWA,EAAWb,aAAcA,EACjE,CAEA,SAASzD,GAAY9I,GACpB,IAAI/Q,EAAQ,GACRia,EAAQ,GACRrC,EAAS,GAETjR,EAAQoK,EAAK95B,QAAQ,KACzB,IAAc,GAAV0vB,GACCoK,EAAK,GAAG73B,MAAM,SAAS,CAC1B,IAAI0tB,EAAMmK,EAAK95B,QAAQ,KACvBgjC,EAAQlJ,EAAKx5B,OAAOovB,EAAM,EAAGC,EAAID,EAAM,GACvCoK,EAAOA,EAAKx5B,OAAOqvB,EAAI,EACxB,CAID,IAAa,IADbD,EAAQoK,EAAK95B,QAAQ,OACN,CACd,IAAI2vB,EAAMD,EAAQoK,EAAKx5B,OAAOovB,GAAO1vB,QAAQ,KAC7C2gC,EAAS7G,EAAKx5B,OAAOovB,EAAM,EAAGC,EAAID,EAAM,GACxCoK,EAAOA,EAAKx5B,OAAO,EAAGovB,GAAOoK,EAAKx5B,OAAOqvB,EAAI,EAC9C,CAGA,IAAc,IADdD,EAAQoK,EAAK95B,QAAQ,MACL,CACf,IAAI2vB,EAAMmK,EAAK95B,QAAQ,KACvB+oB,EAAQ+Q,EAAKx5B,OAAOovB,EAAM,EAAGC,EAAID,EAAM,GACvCoK,EAAOA,EAAKx5B,OAAOqvB,EAAI,EACxB,CACA,MAAO,CAAC1H,UAAU+a,EAAOja,MAAAA,EAAO4X,OAAAA,EAAQmC,IAAIhJ,EAC7C,CAkBA,SAAS8J,GAAYF,GACpB,MAAe,MAARA,GAAuB,MAARA,GAAuB,MAARA,CACtC,CAEA,SAASO,GAASlN,EAAKqL,GAEtB,IAAMngC,EAAQ80B,EAAI90B,MAAM,UAAUmgC,EAAQ,UAC1C,OAAGngC,EACK,CAAC80B,EAAI53B,UAAU,EAAG8C,EAAMy0B,MAAM,GAAIK,EAAI53B,UAAU8C,EAAMy0B,MAAM,IAE5D,CAACK,EACV,CAGO,SAASuQ,GAAY5f,EAAQmK,EAAM0V,GAEzC,GADA7f,EAASA,GAAUA,EAAOob,IAAMpb,EAAOob,IAAMxB,GAAgB5Z,GAC7D,CACA,IAGI8f,EAFE7E,EAAYC,GADJH,GAAY/a,GACU,IAAIob,IAGxC,GAAGH,EACF,IAAI,IAAI5kC,EAAI,EAAGA,EAAI4kC,EAAUrkC,OAAQP,IAGpC,GAFmB,KAAhB4kC,EAAU5kC,KACZypC,GAAQA,IACNA,EAAH,CAEA,GAAW,QAAR3V,GAAkB,WAAWvhB,KAAKqyB,GAAW,CAC/C,IAAMkB,EAAWC,GAAiBnB,EAAUriC,OAAOvC,GAAI,QACvD,GAAG8lC,EAAS,CACX,IAAG0D,EAKF,OAAO,EAJP,GAAoB,QAAjB1D,EAAShS,KACX,OAAO,CAIV,CACD,CAEA,GAAW,UAARA,GAAoC,KAAhB8Q,EAAU5kC,GAChC,OAAO,CAfC,CATC,CA0Bb,CAEO,SAASkoC,GAAc/b,EAAM3G,EAAK0T,GACxC,IAAM0G,EAAOzT,EAAK0S,OAAOha,QAAQW,EAAI,EAAG0T,EAAI,GAC5C,OAAQ0G,GAAQA,EAAKjW,QAAW,IACjC,CAEO,SAAS+f,GAAcxqB,GAC7B,OAAOA,GAAS,cAAgBA,EAAQ,aACzC,CAEO,SAASyqB,GAAkBxd,EAAM3G,EAAK0T,GAC5C,IAAM0Q,EAAa1B,GAAc/b,EAAM3G,EAAK0T,GACtC2Q,EAASzc,MAAMC,KAAKC,YAAYV,QAChCkd,EAASP,GAAYK,EAAY,QAAQ,GAE/C,OAAOxc,MAAM1tB,KAAKqqC,UAAWF,EAAOC,EAAS,gBAAkB,aAChE,CAEO,SAASE,GAAkB9iB,EAAM+iB,GACvC,IACIlF,EADEmF,EAAYD,EAAM,GAExB,GAAGC,EAAU,CACZ,IAAI/Y,EAAQ0C,GAAS3M,EAAKsX,QAAQ,SAAA3K,GAAG,OAAIA,EAAI,IAAMqW,KACnD,GAAG/Y,EAAM,CAER,IAAMgZ,EAAUvL,GADhBzN,EAAQA,EAAM,IACuBxH,OAClCwgB,IACCjjB,EAAK0F,UACPmY,EAAMlR,GAAS3M,EAAK0F,SAAS,SAAAiH,GAAG,OAAIA,EAAI,IAAMsW,MAG9CpF,EADEA,EACIA,EAAI,GAEJxB,GAAgB4G,GAEzB,CACD,CACA,OAAOpF,CACR,8VAt4BO,SAAc5Y,GACpBA,EAAK+D,YAAY,eAAe,SAAChJ,GAAI,OA6GtC,SAAciF,EAAKjF,GAClB,IAAIlnB,EACH4sB,EAAU1F,EAAK0F,QAEhB,GAAGA,EACF,IAAI5sB,EAAI,EAAGA,EAAI4sB,EAAQrsB,OAAQP,IAC9B0jC,GAAiB9W,EAAQ5sB,GAAG,GAAG4sB,EAAQ5sB,GAAG,GAC7C,CApH2CoqC,CAAKje,EAAMjF,MACrDiF,EAAK+D,YAAY,mBAAmB,SAAChJ,EAAMwG,GAAM,OAkGlD,SAAmBvB,EAAMjF,GACxB,IAAM0F,EAAU,GAEhB,IAAI,IAAI5sB,KAAKgiC,GACRE,GAAeliC,IAClB4sB,EAAQjoB,KAAK,CAAC3E,EAAEgiC,GAAchiC,KAEhCknB,EAAK0F,QAAUA,CAChB,CA1GuD3H,CAAUkH,EAAMjF,KACvE,yFCNO,SAASmjB,GAAOC,GACtB,IAAMp/B,EAAOo/B,EAAK5mC,WAAW,GAC7B,OAAOwH,GAAQ,IAAMA,GAAQ,IAAc,IAARA,GAAsB,IAARA,GAAsB,IAARA,EAAaA,EAAO,GACpF,CAEO,SAASq/B,GAAiBvR,EAAKwR,GAErC,IADA,IAAIC,EAAWzR,EAAIz4B,OACXP,EAAIyqC,EAAW,EAAGzqC,GAAK,EAAGA,IAAI,CACrC,IAAIqqC,GAAOrR,EAAIh5B,IAAI,CAClB,GAAGwqC,GAAkBxC,GAAShP,EAAIh5B,IACjC,SACD,OAAOyqC,EAGPA,EAAWzqC,CACb,CACD,CAEA,SAASgoC,GAASsC,GACjB,IAAIp/B,EAAOo/B,EAAK5mC,WAAW,GAC3B,OAAOwH,GAAM,IAAMA,GAAM,EAC1B,CAEA,SAASw/B,GAAQjjB,EAASznB,GACzB,IAGI2G,EAHAsjB,EAAQ,GACR0gB,GAAS,EAGb,IAAIhkC,EAAE3G,EAAG2G,EAAE8gB,EAAQlnB,OAAQoG,IAAI,CAC9B,IAAMkuB,EAAOpN,EAAQ9gB,GACrB,GAAY,MAARkuB,GAKJ,IAAK8V,EACJ,GAAW,KAAP9V,EAAW,CACd,GAAiB,KAAdpN,EAAQznB,GACV,SAIiB,OADjBiqB,EAAQxC,EAAQllB,OAAOvC,EAAG2G,EAAE3G,IAClB,KACTiqB,EAAQA,EAAM1nB,OAAO,EAAG0nB,EAAM1pB,OAAO,IACtCP,EAAE2G,EAAE,CAEN,MACK,IAAK0jC,GAAOxV,KAASmT,GAASnT,GAClC,MAAO,CAACpN,EAAQllB,OAAOvC,EAAG2G,EAAE3G,GAAI2G,EAAG3G,EAAGiqB,QAjBvC0gB,GAAUA,CAoBZ,CAEA,MAAO,CAACljB,EAAQllB,OAAOvC,GAAI2G,EAAG3G,EAAGiqB,EAClC,CAEA,IAAI2gB,GAAU,kBAKP,SAASC,GAASC,GAIxB,IAHA,IAAItlB,EAAM,EAAGulB,EAAM,EAAG1lC,EAAI,EAAGi4B,EAAO,EAAG0N,EAAQ,EAC3CpS,GAAQ,EAEHjyB,EAAGmkC,EAAKvqC,OAAO,EAAGoG,GAAG,EAAGA,IAAI,CACpC,IAAIkuB,EAAMiW,EAAKnkC,GAAGjD,WAAW,GACjB,KAARmxB,EAKAA,EAAM,IAETkW,IAAQlW,EAAM,IAAIxvB,EAClBA,GAAK,KAEAuzB,IACJvzB,EAAI,EAAGmgB,EAAMulB,EAAKA,EAAM,EAAGnS,GAAQ,EAAM0E,GAAQ,GAGlDyN,IAAQlW,EAAM,IAAIxvB,EAClBA,GAAG,IAdH2lC,GAAc1N,CAgBhB,CAQA,MAAO,CAAC9X,EAAKulB,EAAKC,EACnB,CAEO,SAASrpC,GAAM8lB,EAAS0E,EAAM8e,EAAYC,GAKhD,IAJA,IAvCmB1hB,EAuCb2O,EAAchM,EAAKiM,iBACrB+S,EAAQ,GACRxS,EAAQ,EACRgS,GAAS,EAAOS,GAAK,EAChBprC,EAAmB,MAAfynB,EAAQznB,GAAa,EAAI,EAAGA,EAAIynB,EAAQlnB,OAAQP,IAAI,CAChE,IAAI60B,EAAMpN,EAAQznB,GAClB,GAAW,KAAP60B,EACH8V,GAAUA,OACJ,IAAKA,EACX,GAAW,KAAP9V,GAA8B,KAAhBpN,EAAQznB,EAAE,GAC3BorC,GAAK,OACC,GAAW,KAAPvW,GAA8B,KAAhBpN,EAAQznB,EAAE,GAClCorC,GAAK,OACC,IAAKA,EAAG,CACd,IAAMC,EAAkB,MAARxW,EAChB,GAAIwW,GAAWhB,GAAOxV,GAAK,CAC1B,IAA6CyW,EAAA7Y,GAAnBiY,GAAQjjB,EAASznB,GAAE,GAAxC8qC,EAAIQ,EAAA,GAAE1Z,EAAG0Z,EAAA,GAAGrhB,EAAKqhB,EAAA,GAClBtsB,EAAO4S,EAAM,EAGjB,GAAuB,MAApBnK,EAAQzI,EAAK,GACf,GA5DcwK,EA4DAshB,EA3DZF,GAAQr4B,KAAKiX,GA4DVS,GAASA,GAASkO,IAAe8S,IAEpCM,GAASJ,EAAO1jB,EAASznB,EAAG24B,EADpB1O,EAAQ,CAACA,EAAO6gB,EAAMO,GAAWP,GAEzCnS,EAAQ3Z,EAAK,QAId,GAAGisB,EAEFM,GAASJ,EAAO1jB,EAASznB,EAAG24B,EADpB1O,EAAQ,CAACA,EAAO6gB,EAAMO,GAAWP,GAEzCnS,EAAQ3Z,EAAK,MAEV,CAEH,IAAImL,EAAQgC,EAAKkN,OAAOC,QAAQwR,EAAM7gB,GAASihB,GAM/C,GAHI/gB,IACHA,EAAQgC,EAAKkN,OAAOC,QAAQwR,GAAM,IAEhC3gB,EAAM,CACR,IAAMiP,EAAQjP,EAAMxoB,MAAM,KACvBy3B,EAAM,IAAMjB,IAEdoT,GAASJ,EAAO1jB,EAASznB,EAAG24B,EADpB,CAAC1O,EAAO6gB,EAAMO,EAASjS,EAAM,KAErCT,EAAQ3Z,EAAK,EAEf,CACD,CAGFhf,EAAIgf,CACL,CACD,CAEF,CAIA,OAFI2Z,GAAOlR,EAAQlnB,QAClB4qC,EAAMxmC,KAAK8iB,EAAQllB,OAAOo2B,IACpBwS,CACR,CAEA,SAASI,GAASJ,EAAO1jB,EAASznB,EAAG24B,EAAOzZ,GACnC,IAAJlf,GACHmrC,EAAMxmC,KAAK8iB,EAAQllB,OAAOo2B,EAAO34B,EAAE24B,IACpCwS,EAAMxmC,KAAKua,EACZ,CCtKO,SAASssB,GAAcC,GAC7B,IAAMjiB,EAAOiiB,EAAO5qB,WACd6qB,EAAOD,EAAOE,eAEdC,EAAQxe,MAAM6Q,KAAK4N,OAAOH,GAE1BI,EAAiBJ,EAAKI,eACtBC,EAAY3e,MAAM6Q,KAAK+B,YAAYxW,EAAKpoB,UAAU,EAAG0qC,GAAiB,wBAAwBlmB,MAEpG,MAAO,CACNvgB,EAAGumC,EAAMvmC,EAAI0mC,EACbnqC,EAAGgqC,EAAMhqC,EAAIgqC,EAAM/lB,OAErB,CC0BO,SAASmmB,GAAS7f,EAAMjF,EAAM0Y,GACpC,IAAMmF,EAAMiF,GAAkB9iB,EAAM0Y,GAC9BnW,EAAO,CACZvK,MAAO0gB,EAAK,GACZmF,IAAKA,EAAM,CAACA,IAAAA,GAAO,KACnBjR,KAAM8L,EAAK,IAGZ,OADAqM,GAAQ9f,EAAM1C,GACPA,CACR,CAqCA,SAASyiB,GAAY/f,EAAM1C,EAAMN,EAAM/c,GACtC+c,EAAOoK,GAAmBpK,GAC1BM,EAAKvK,MAAQiK,EAERgD,EAAK6L,eAAiB7L,EAAKggB,iBAC/BhgB,EAAK2G,aAAarJ,EAAKjE,IAAKiE,EAAKyP,IAAK/P,EAAM/c,EAC9C,CAiBA,SAASggC,GAAcziB,GACtB,IAAI0iB,EAAa1iB,EAAS,SAAW,KAKrC,OAJG4f,GAAY5f,EAAQ,UACtB0iB,EAAa,SACN9C,GAAY5f,EAAQ,UAC3B0iB,EAAa,QACPA,CACR,CAEO,SAASC,GAAQngB,EAAM3G,EAAKoE,EAAQxd,GAE1C,IAAMwzB,GADNxzB,EAAOA,EAAO+f,EAAKoS,OAAOpW,QAAQ/b,GAAQ+f,EAAK0S,QAC7Bha,QAAQW,EAAI,EAAGoE,EAAO,GACxC,OAAQgW,GAAQA,EAAK9L,MAAS,IAC/B,CAEA,SAASmY,GAAQ9f,EAAM1C,EAAM0H,EAAO/kB,GACnC,IAAMmgC,IAAiB9iB,EAAKjE,KAAOiE,EAAKyP,KAGxC/M,EAAKqgB,UAAW,EAEhB,IAGIC,EAHEC,EAAiC,iBAAdjjB,EAAKvK,OAAsC,KAAjBuK,EAAKvK,MAAM,GACxDgO,IAAciE,GAAS1H,EAAKsb,KAAOxB,GAAgB,YAAcpX,EAAK6L,eAAiB7L,EAAKggB,iBAAgC,QAAb1iB,EAAKqK,MAGtHyY,GAAkBngC,GAAQA,GAAQ+f,EAAKiM,mBAC1CqU,EAAaC,IAAcjjB,EAAKsb,IFkC3B,SAAuB5Y,EAAMjN,GAMnC,IALA,IACIytB,EADAC,EAAQ,EAGNxT,EAAQz3B,GAAMud,EAAOiN,GAEnBnsB,EAAI,EAAGA,EAAIo5B,EAAM74B,OAAQP,IAEhC,GAAGA,EAAE,GAAM,EAAE,CAEZ,IAAM6sC,EAAUzT,EAAMp5B,GAAGkE,MAAM,6CAC5B2oC,GACFA,EAAQnoC,SAAQ,SAAAooC,GACZA,EAAK7qC,QAAQ,MAAQ,GACvB2qC,IAGID,GADgB,iEACWp6B,KAAKu6B,KACnCH,EAAaC,MAELA,EAAQD,IACjBA,EAAa,KACf,GACF,MAEK,IAAIA,EAAW,CACnB,GAAGvf,MAAM1K,QAAQ0W,EAAMp5B,IACtB,GAAG,cAAcuS,KAAK6mB,EAAMp5B,GAAG,IAC9Bo5B,EAAMp5B,GAAKo5B,EAAMp5B,GAAG,GAAG2B,MAAM,KAAK,OAC9B,IAAGy3B,EAAMp5B,GAAG,IAAMmsB,EAAKiM,iBAG3B,SAFAgB,EAAMp5B,GAAKo5B,EAAMp5B,GAAG,EAEX,CAIX,IAAMypB,EAAOohB,GAASzR,EAAMp5B,IACtBqM,EAAO67B,GAAc/b,EAAM1C,EAAK,GAAIA,EAAK,IAG/C,GAAGpd,EACF,MAAO,CAAC04B,IAAKxB,GAAgBl3B,GAC/B,CAEF,CE9EwC0gC,CAAc5gB,EAAM1C,EAAKvK,OAAS,MAEzE,IAAMmtB,EAAaD,GAAc3iB,EAAKsb,KAAO0H,GACvCO,EAvFP,SAAuB7gB,EAAM1C,EAAMyD,EAAWwf,EAAWL,EAAYlb,EAAO/kB,GAE3E,IAAI0nB,EAAO,SACX,IAAI1G,MAAM6J,YAAYxN,EAAKvK,OAC1B,GAAGwtB,EACF5Y,EAAO,SAEJ,uBAAuBvhB,KAAKkX,EAAKvK,OACnC4U,EAAO,OACA,yBAAyBvhB,KAAKkX,EAAKvK,SAC1C4U,EAAO,eAEJ,GAAIzzB,MAAMopB,EAAKvK,QAEf,GAAiB,UAAdmtB,GAA0Bnf,EAAU,CAG3C,IACMhO,EADSkO,MAAM1tB,KAAKutC,UAAW7f,MAAMC,KAAKC,YAAYV,QAAQK,cACrDigB,CAAOzjB,EAAKvK,OACf,IAATA,GAAgB7e,MAAM6e,KAIrBiS,EACF+a,GAAY/f,EAAM1C,EAAMvK,EAAO9S,GAE/B+f,EAAKghB,YAAW,WAAA,OAAMjB,GAAY/f,EAAM1C,EAAMvK,MAE/C4U,EAAO,OAET,OAjBCA,EAAO,SAmBT,OAAOA,CACR,CAsDoBsZ,CAAcjhB,EAAM1C,EAAMyD,EAAWwf,EAAWL,EAAYlb,EAAO/kB,GAItF,GAFAqd,EAAKqK,KA9CN,SAAmBA,EAAMkZ,EAAYX,EAAYK,EAAWxtB,GAY3D,OAXA4U,EAAOA,GAAQkZ,EAGE,UAAdA,EACFlZ,EAAO,SACAuY,IACPvY,EAAOuY,GAEG,QAARvY,IAAmB4Y,GAAahD,GAAcxqB,KAChD4U,EAAO,UAEDA,CACR,CAiCauZ,CAAU5jB,EAAKqK,KAAMkZ,EAAYX,EAAYK,EAAWjjB,EAAKvK,QAErEqtB,EAAa,CAChB,IACM3M,GADSxzB,GAAQA,GAAQ+f,EAAKiM,iBAAiCjM,EAAKoS,OAAOpW,QAAQ/b,GAAlC+f,EAAK0S,QACzCha,QAAQ4E,EAAKjE,IAAI,EAAGiE,EAAKyP,IAAI,GAAG,GACnD0G,EAAK1X,QAAwB,UAAdmkB,EAAyB,EAAI,EAQ9C,SAAoBlgB,EAAM1C,EAAMujB,EAAYX,EAAYI,EAAYrgC,GACnE,IAAMoZ,EAAMiE,EAAKjE,IACX0T,EAAMzP,EAAKyP,IACXoU,EAAgC,iBAAd7jB,EAAKvK,MAEvBwtB,EAAYY,GAA6B,KAAjB7jB,EAAKvK,MAAM,GACnCquB,EAAaphB,EAAKqhB,cAAchoB,EAAK0T,GACrCyG,GAAiBvzB,GAAQA,GAAQ+f,EAAKiM,iBAGvCjM,EAAK6L,eAAiB7L,EAAKggB,iBAAkC,WAAd1iB,EAAKqK,OAAqBwZ,GAAaZ,GAA4B,KAAfjjB,EAAKvK,OAC5GiN,EAAK2G,aAAatN,EAAK0T,EAAgB,EAAXzP,EAAKvK,MAAS9S,GAE3C,GAAGqgC,EACFtgB,EAAKshB,UAAUjoB,EAAK0T,EAAKuT,EAAW1H,UAChC,GAAgB,QAAbtb,EAAKqK,KAAe,CAE3B,GAAiB,QAAduY,EAAqB,CACvB,IAAMvC,EAAS4C,GAA2D,GAA9CjjB,EAAKvK,MAAMle,cAAciB,QAAQ,UACvD4nC,EAASzc,MAAMC,KAAKC,YAAYV,QAChCjD,EAASmgB,EAASD,EAAO/c,WAAa+c,EAAOhd,WACnDV,EAAKshB,UAAUjoB,EAAK0T,EAAKvP,EAAQvd,EAClC,CAGIsgC,GAAca,IAAc5N,GAC/BxT,EAAKuhB,cAAcloB,EAAK0T,EAAK,CAACuS,OAAQ,cAAer/B,EACvD,KACsB,UAAdigC,GAAuC,UAAb5iB,EAAKqK,MAAkC,UAAdkZ,GAE1D7gB,EAAKshB,UAAUjoB,EAAK0T,EAAK,IAAK9sB,GAI5BuzB,IAA+B,QAAblW,EAAKqK,MAAkB4Y,IAAca,GAAmC,cAArBA,EAAW9B,QAClFtf,EAAKuhB,cAAcloB,EAAK0T,EAAK,KAC/B,CA3CEyU,CAAWxhB,EAAM1C,EAAMujB,EAAYX,EAAYI,EAAYrgC,GAC3DwzB,EAAK9L,KAAOrK,EAAKqK,IAClB,QAEO3H,EAAKqgB,QACb,CCnJApf,MAAMG,QAAQ,CACblhB,KAAM,kBACN8hB,SAAU,CACTe,WAAW,EACXzd,OAAMA,SAACmuB,EAAM1gB,GACZ,IAAMusB,EAASre,MAAMgC,GAAG5P,KAAKkO,OAAO2B,QAC9Bue,EAASnC,EAAOE,eAAeG,eAC/BnG,EAAM8F,EAAO5qB,WAEnB,GAAqB,MAAlB8kB,EAAIkI,OAAO,GAAd,CAEA,IAAM7U,EAAM2M,EAAIvkC,UAAU,EAAGwsC,GACvBE,EAAS9U,EAAI53B,UAAWmpC,GAAiBvR,GAAK,IAC9C+U,EAAapI,EAAIkI,OAAOD,GAK9B,OAHGE,GAAWF,IAAWjI,EAAIplC,SAAY8pC,GAAO0D,IAAe,SAASx7B,KAAKw7B,MAC5E7uB,EAAQ4uB,GAEmE,IAArElO,EAAK1gB,MAAMpe,WAAWU,cAAcS,QAAQid,EAAM1d,cAT/B,CAU3B,GAEDisB,MAAK,WAAG,IAAAugB,EAAAxuB,KACPA,KAAK0Q,YAAY,gBAAgB,SAACwb,GACjC,GAAGA,EAAKuC,QAAQ,CACf,IAAMxC,EAASre,MAAMgC,GAAG4e,EAAKtgB,OAAO2B,QAC9B7F,EAAOiiB,EAAO5qB,WAGpB,SAAI2I,GAA2B,MAAnBA,EAAKqkB,OAAO,MAExBzgB,MAAMa,GAAGiF,MAAMlC,UAAUkd,KAAK7pB,MAAM2pB,EAAM,CAACxC,GAAcC,MAClD,EACR,CACD,GACA,EACDtb,eAAcA,SAACjJ,EAAM1F,GACpB,IAAMgI,EAAOtC,EAAK7D,GAAK7D,KAAKoQ,YAAY1I,EAAK7D,IAAO6D,EAAKsC,MAAMtC,EAAKhI,MACpEkO,MAAMgC,GAAG5P,KAAKkO,OAAO2B,QAAQ8e,aAAa3kB,GAErChI,GACJhC,KAAK2P,MAAK,GAEX3P,KAAKwQ,UAAU,iBAAkB,CAAC9I,EAAMsC,GACxC,EACD4kB,UAAW,WACV,GAAI5uB,KAAK6uB,YACR,OAAOjhB,MAAMa,GAAGgB,QAAQ+B,UAAUod,UAAU/pB,MAAM7E,KAAMgS,UAC1D,GACEpE,MAAMa,GAAGgB,8DD/CL,SAAc9C,GACpBA,EAAK+D,YAAY,gBAAgB,SAAS1K,EAAK0T,EAAKha,EAAO9S,GAC1D,GAAGA,GAAQoT,KAAK4Y,mBAAqB5Y,KAAKgtB,SAAS,CAClD,IAAM5C,EAAa1B,GAAc1oB,KAAMgG,EAAK0T,GAO5C+S,GAAQzsB,KANK,CACZgG,IAAAA,EACA0T,IAAAA,EACAha,MAAAA,EACA6lB,IAAK6E,EAAa,CAAC7E,IAAKxB,GAAgBqG,IAAe,MAGzD,CACD,IAEAzd,EAAK+D,YAAY,wBAAwB,SAAS1K,EAAK0T,EAAK0Q,EAAYpJ,EAAWp0B,GAC9EoT,KAAKgtB,UAORP,GAAQzsB,KANK,CACZgG,IAAAA,EACA0T,IAAAA,EACAha,MAAOiN,EAAKmG,aAAa9M,EAAK0T,GAAK,EAAM9sB,GACzC24B,IAAK,CAACA,IAAIxB,GAAgBqG,MAEP,EAAMx9B,EAE5B,IAEA+f,EAAK+D,YAAY,YAAY,SAAS+E,EAAQlW,GAChC,YAAVkW,GAAwBlW,EAAOuvB,UAAsC,cAA1BvvB,EAAOuvB,SAAS7C,SAEjC,QAAzBW,GADYlE,GAAc1oB,KAAMT,EAAOyG,IAAKzG,EAAO6K,OAAQ7K,EAAO3S,QAEpEoT,KAAKiuB,UAAU1uB,EAAOyG,IAAKzG,EAAO6K,OAAQwD,MAAMC,KAAKC,YAAYV,QAAQC,WAAY9N,EAAO3S,MAE/F,GACD,gBEeA,SAASmiC,GAAe5gB,GACvB,MAAO,CACNxB,KAAM,iBACN2C,IAAK,uBACL6H,WAAU,EACV7I,SAAU,SAASW,GAClB,IAAIjF,EAAO,GAIX,OAHGiF,EAAI4B,OACN7G,GAAQ,+DAAiEiF,EAAI4B,KAAO,cACrF7G,GAAQiF,EAAIvP,OAASkO,MAAMC,KAAKC,YAAY1B,MAAM6C,EAAIpL,KAAOoL,EAAIpL,EAEjE,EACD6D,KAAMyG,EACNe,GAAG,CACF8f,YAAa,SAASnrB,GACrB,IAAIorB,EAASjvB,KAAKkO,OAAO2B,OACzB,GAAGof,EAAO,CACT,IAAItiB,EAAOiB,MAAMgC,GAAGqf,GAAQ5X,mBACxBqB,EAAS,CAAC1Y,KAAKgY,QAAQnU,IAC3B,GAAG+J,MAAMgC,GAAGqf,GAAQ/gB,OAAO2P,KAAK,CAC/B,IAAIA,EAAOlR,EAAKiD,GAAG,SAASoO,gBACzBH,IACFnF,EAASA,EAAO13B,OAAO,CAAC68B,EAAK1L,MAAM0L,EAAKzL,MAC1C,CACAzF,EAAK6D,UAAU,YAAYkI,EAC5B,CACD,GAGH,CC9BO,SAASwW,GAAaviB,EAAMlK,EAAM7V,GAExC,OADAA,EAAOA,EAAO+f,EAAKoS,OAAOpW,QAAQ/b,GAAQ+f,EAAK0S,QACnC5Z,UAAUhD,GACpBnd,KAAI,SAAA+uB,GACJ,IAAI3U,EAAQ2U,EAAI,GAAG3U,MAGnB,OAFa,OAAVA,IACFA,EAAQ,IACF,GAAI2U,EAAI,KAAMA,EAAI,GAAI3U,EAAO2U,EAAI,GAAG1C,OAAO,GAAI0C,EAAI,GAAGC,KAC9D,IACCriB,QAAO,SAAAoiB,GACP,OAAOA,EAAI,IAAiB,IAAXA,EAAI,IAAYA,EAAI,EACtC,GACF,CCxDAzG,MAAMG,QAAQ,CACblhB,KAAM,cACNmhB,SAAS,gBACTC,MAAK,SAACC,GAAO,IAAAihB,EAAAnvB,KACN6P,EAAS7P,KAAKqX,mBAEpBrX,KAAKovB,YAAcxhB,MAAMa,GAAG,CAC3B9B,KAAM,QACNvG,MAAO,IACPipB,UAAW,IACXjhB,KAAK,CACJW,OAAQ,OACRugB,YAAY,EACZhhB,SAAU,SAAAW,GAIT,IAHA,IAAIwP,EAAIz9B,yCAAAA,OAA4CiuB,EAAIiD,OAAY,QAE9DwG,EAASzJ,EAAIyJ,OACXl4B,EAAI,EAAGA,EAAIk4B,EAAO33B,OAAQP,IAAI,CACrC,IAAM+uC,EAAK,kDAAAvuC,OAAqD03B,EAAOl4B,GAAG,GAAG,KAAa,WAC1Fi+B,GAAI,KAAAz9B,OAASiuB,EAAIxF,QAAUjpB,EAAI,8CAA8C,GAAE,KAAAQ,OAAIuuC,EAAKvuC,wDAAAA,OAAuD03B,EAAOl4B,GAAG,GAAQ,OAClK,CAEA,OAAOi+B,CACR,KAGF5O,EAAO2f,iBAAiBrqC,KAAK6a,KAAKovB,aAElClhB,EAAOuB,QAAU,CAChBrJ,MAAO,IACPC,OAAQ,IACRsG,KAAM,kBACN2C,IAAK,4BACL5H,KAAMwG,EAAOuhB,YACbnhB,SAAU,SAAAW,GAAG,OAAIA,EAAIqO,IAAMrO,EAAIpL,GAAKoL,EAAIvP,KAAK,EAC7C0O,KAAM,CACLE,SAAU,SAAAW,GACT,OAAgC,GAA7BA,EAAIpL,GAAGphB,QAAQ,WACjB,mCAAAzB,OAA0CiuB,EAAIvP,MAAK,+DAAA1e,OAA8DiuB,EAAIqO,IAAG,WAEjHrO,EAAIvP,KACb,GAEDwP,GAAI,CACHwgB,aAAc,WAAU,IAAAlB,EAAAxuB,KACjB2T,EAAO3T,KAAK8P,UAEZ6f,EAAYhc,EAAK5X,MAAK,SAAAkT,GAAG,OAAiC,GAA7BA,EAAIpL,GAAGphB,QAAQ,cAC/CktC,GACFA,EAAUzqC,SAAQ,SAAA+pB,GAAG,OAAI0E,EAAKzM,OAAO+H,EAAIpL,OAE1C,IAAM+rB,EAAY/f,EAAOgK,OAAOpU,UAAUoK,EAAO+I,kBAAkBtzB,KAAI,SAAAvF,GAAC,MAAK,CAC5E8jB,GAAI,UAAY9jB,EAAE,GAClB2f,MAAO3f,EAAE,GACTu9B,IAAKv9B,EAAE,GACP8vC,OAAQ9vC,EAAE,GACV,IAEK+vC,EAAgBF,EAAU39B,QAAO,SAAA0Y,GAAK,OAAKA,EAAMklB,UAEvDD,EAAU39B,QAAO,SAAA0Y,GAAK,OAAIA,EAAMklB,MAAM,IAAE3qC,SAAQ,SAAAylB,GAC3CmlB,EAAc/zB,MAAK,SAAAg0B,GAAM,OAAIA,EAAOrwB,OAASiL,EAAMjL,KAAK,KAC3DowB,EAAc3qC,KAAKwlB,EACrB,IAEAmlB,EAAc5qC,SAAQ,SAAAylB,GAAK,OAAIgJ,EAAKzU,IAAIyL,MAExCgJ,EAAK1hB,QAAO,SAAAmuB,GAAI,OAAIoO,EAAKtgB,OAAOjc,OAAO4S,MAAM2pB,EAAM,CAACpO,EAAMoO,EAAKwB,sBAC/Drc,EAAK/hB,KAAK,QAAS,MAAO,SAC3B,IAGFsc,EAAO+hB,UAAYjwB,KAAKiwB,UAExBjwB,KAAKkwB,kBAAoB,GACzBlwB,KAAK8Q,MAAMC,WAAa,wBAExB/Q,KAAK0Q,YAAY,cAAc,SAAChlB,EAAM7L,GAErC,UADOsvC,EAAKgB,cACD,IAARzkC,EAAY,CAEd,GAAK,IAAIxL,MAAUivC,EAAKiB,iBAAmB,GAAM,IAAI,CACpD,IAAMnmB,EAAOklB,EAAKjhB,OAAOmiB,WACzBlB,EAAKmB,iBAAgB,GACrBnB,EAAKoB,gBAAgBtmB,GAErBklB,EAAKhD,eAAeqE,MAErB,CACA5iB,MAAM6Q,KAAKgS,aAAa5wC,EACzB,MAEgB,IAAR6L,GACPyjC,EAAKmB,kBAEL1iB,MAAMkL,OAAM,WACX,IAAM7O,EAAO4F,EAAOI,gBACdgS,EAASkN,EAAKrc,aAAa7I,EAAKjE,IAAKiE,EAAKG,QAE7C+kB,EAAK9tB,YAAc4gB,EACrBpS,EAAOD,GAAG,SAAS5N,QAAQiI,EAAKjE,KAEhCmpB,EAAKluB,SAASghB,UAERpS,EAAO6gB,iBAEd9iB,MAAM+iB,UAAUC,SAAS/gB,EAAOD,GAAG,SACpC,KAEOlkB,GAAQ,IAAMA,GAAQ,IAC7ByjC,EAAK0B,iBACP,IAGA7wB,KAAK0Q,YAAY,eAAe,WAC/B1Q,KAAK6wB,iBACN,IAEA7wB,KAAK0Q,YAAY,iBAAiB,WAAU,IAAAogB,EAAA9wB,KAC3C4N,MAAMmjB,YAAY/wB,KAAKgxB,WAEvBhxB,KAAKgxB,UAAYpjB,MAAMqjB,MAAMjxB,KAAKmsB,eAAgB,WAAW,SAAAtsC,GAC5DixC,EAAKI,QAAQrxC,EACd,GACD,GACA,EACDgxC,gBAAe,WAAE,IAAAM,EAAAnxB,KAChB4N,MAAMkL,OAAM,WACX,IAAMpF,EAAQyd,EAAK/B,YACbplB,EAAOmnB,EAAK9vB,WAElB,GAAc,KAAX2I,EAAK,GAKP,IAJA,IAEIP,EAAS,EACT2nB,EAAW,EACP5wC,EAJO2wC,EAAKhF,eAAeG,eAIhB,EAAG9rC,EAAI,EAAGA,IAC5B,OAAQwpB,EAAKxpB,IACZ,IAAK,IACA4wC,GACH3nB,IACD,MACD,IAAK,IACJ2nB,IACA,MACD,IAAK,IACJ,IAAIA,EAAS,CACZ,IAAM5X,EAAMxP,EAAKpoB,UAAU,EAAGpB,GAC1B0xB,EAASsH,EAAI53B,UAAUmpC,GAAiBvR,GAAK,IACjD,GAAGtH,EAAO,CACTA,EAASA,EAAO1wB,cAChB,IAAMk3B,EAAS9K,MAAMC,KAAKC,YAAYhB,WAAW,oBAAoBoF,GACrE,GAAGwG,GAAUA,EAAO33B,OAAO,CAC1B,IAAMutB,EAAWoF,EAAMxD,UACvB5B,EAAS+iB,UAAU,CAClB3Y,OAAAA,EACAjP,OAAAA,EACAyI,OAAAA,IAGD,IAAMzC,EAAU7B,MAAMgC,GAAGuhB,EAAKjjB,OAAOuB,SAEjC6N,OAAG,EACP,GAAG7N,EAAQof,YAAY,CACtB,IAAMyC,EAAgB7hB,EAAQvB,OAC9BoP,EAAM,CACLz3B,EAAGyrC,EAAc1U,KACjBx6B,EAAGkvC,EAAcvU,IAAMtN,EAAQ3O,QAAU,GAE3C,MAECwc,EAAM0O,GAAcmF,GAErBzd,EAAMgb,KAAKpR,GAEX,IAAMiU,EAAcjjB,EAASwC,MAAM0gB,cAAc,qCACjD,GAAGD,EAAY,CACd,IAAME,EAAYF,EAAYG,UAAYH,EAAYzQ,aAAexS,EAASxN,QAC9EwN,EAASqjB,SAAS,EAAGF,EAAY,EAAIA,EAAY,EAClD,CAEAN,EAAKS,OACN,MAECle,EAAM/D,MACR,CACA,MACA,CAEAyhB,IAIL1d,EAAM/D,MACP,GACA,EACDsgB,UAAS,SAACvwB,GACTM,KAAK6wB,kBACL,IAAIpS,EAAO,GACL5O,EAAS7P,KAAKqX,mBACdwa,EAAajkB,MAAMU,SAAS6F,OAElC,IAAI,IAAI0J,KAAQ7d,KAAKkwB,kBAAkB,CACtC,IAAMxV,EAAQ1a,KAAKkwB,kBAAkBrS,GACrC7d,KAAK8xB,cAAcpX,EAAM,GAAIA,EAAM,GAAIA,EAAM,IAAI,EAClD,CAIA,GAHA1a,KAAKkwB,kBAAoB,GAGtBxwB,GAAmB,KAAVA,EAAM,GAMjB,IALA,IAAMka,EAAQz3B,GAAMud,EAAOmQ,EAAQ,KAAM7P,KAAK+xB,aACxCtnB,EAAQoF,EAAO+I,iBAEjBoZ,EAAa,EAETxxC,EAAI,EAAGA,EAAIo5B,EAAM74B,OAAQP,IAChC,GAAGA,EAAE,GAAM,EACVi+B,GAAQoT,EAAWjY,EAAMp5B,QACtB,CACH,IAAMyxC,EAAYrkB,MAAM1K,QAAQ0W,EAAMp5B,IAChC0xC,EAAYD,EAAYjyB,KAAKmyB,aAAavY,EAAMp5B,GAAG,GAAIo5B,EAAMp5B,GAAG,IAAM,GACtE4xC,EAAapyB,KAAK+xB,YAElBpZ,IAAesZ,GAAeG,GAAcA,GAAc3nB,GAC5DR,EAAOohB,GAAS4G,EAAYrY,EAAMp5B,GAAG,GAAKo5B,EAAMp5B,IAC9C6xC,EAAWJ,EAAYC,EAAUtY,EAAMp5B,GAAG,GAAKo5B,EAAMp5B,GAErD8xC,EAAYL,IAAclH,GAAiBnR,EAAMp5B,GAAG,IAE1D,GAAG8xC,GAAa3Z,GAAgBsZ,GAAarY,EAAMp5B,GAAG,IAAMiqB,EAAO,CAClE,IAAI8nB,OAAa,EAEjB,GAAkB,KAAd3Y,EAAMp5B,EAAE,IAAao5B,EAAMp5B,EAAE,IAAO8xC,EAAU,CACjD,IAAIE,OAAQ,EAAEC,OAAY,EAE1B,GAAGH,EAAU,CACZ,IAAM5X,EAAQd,EAAMp5B,GAAG,GAAG2B,MAAM,KAEhC8nB,EAAOohB,GAAS3Q,EAAM,IACtB8X,EAAWnH,GAAS3Q,EAAM,GAC3B,MAEC8X,EAAWnH,GAASzd,MAAM1K,QAAQ0W,EAAMp5B,EAAE,IAAMo5B,EAAMp5B,EAAE,GAAG,GAAKo5B,EAAMp5B,EAAE,IACxEiyC,EAAe7kB,MAAM1K,QAAQ0W,EAAMp5B,EAAE,IAAM0xC,EAAUtY,EAAMp5B,EAAE,GAAG,GAAKo5B,EAAMp5B,EAAE,GAC7EA,GAAG,EAGJ+xC,EAAgBvyB,KAAK0yB,SAASzoB,EAAK,GAAIA,EAAK,GAAIuoB,EAAS,GAAIA,EAAS,GAAIR,GAC1EvT,gDAAIz9B,OAAiDuxC,GAAeP,QAAUhxC,OAAKsxC,EAAYD,EAAWA,EAAS,IAAII,EAAqB,UAC7I,KAEK,IAAG7Y,EAAMp5B,EAAE,IAA2C,KAArCo5B,EAAMp5B,EAAE,GAAIo5B,EAAMp5B,EAAE,GAAGO,OAAO,GAAW,CAC9D09B,GAAQ4T,EACR,QACD,CAGCE,EAAgBvyB,KAAK0yB,SAASzoB,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAI+nB,GAClEvT,GAAI,6CAAAz9B,OAAiDuxC,GAAeP,EAAUhxC,MAAAA,OAAKqxC,EAAiB,UACrG,CAGIE,IACHP,GAFc,GAEAA,GAAuB,EAAgB,QAGtDvT,GAAQ4T,CACV,MAID5T,EAAOoT,EAAWnyB,GAMnB,OAJAmQ,EAAOD,GAAG,SAAS5N,UAEhB2wB,SAASC,eAAiB5yB,KAAKmsB,gBACjCnsB,KAAK6yB,aACCpU,CACP,EACD6R,gBAAe,SAACwC,GACf,IAAMjjB,EAAS7P,KAAKqX,mBACd/B,EAAOzF,EAAO8Q,OAEpB,GAAG3gB,KAAK+xB,YAAY,CACnB,GAAG/xB,KAAK+xB,aAAeliB,EAAO+I,iBAAiB,CAC9C,IAAM3O,EAAOjK,KAAKkO,OAAOmiB,WAEzBrwB,KAAK+yB,OAAO,CAAC1C,WAAW,OAExBxgB,EAAOmjB,UAAUhzB,KAAK+xB,aAEtBnkB,MAAMkL,OAAM,WACXxD,EAAKtG,OAAO/E,EAAKjE,KAAO8sB,EAAQ,EAAI,GAAI7oB,EAAKG,OAC9C,GACD,QACOpK,KAAK+xB,WACZ,MACOe,GACPllB,MAAMkL,OAAM,WACXxD,EAAK2d,cAAc,OACpB,GAED,EACDnB,cAAa,SAAC9rB,EAAK0T,EAAKP,EAAOjS,GAE9B,IADA,IAAMoI,EAAG,qCAAAtuB,OAAwCm4B,GACxCp5B,EAAIimB,EAAImM,MAAOpyB,GAAKimB,EAAIoM,IAAKryB,IACrC,IAAK,IAAIkB,EAAIy4B,EAAIvH,MAAOlxB,GAAMy4B,EAAItH,IAAKnxB,IACtC+e,KAAKqX,mBAAmBzH,GAAG,SAAS1I,EAAO,gBAAgB,cAAcnnB,EAAGkB,EAAGquB,GAAK,EACtF,EACD4hB,QAAO,SAACrxC,GAII,IAHEA,EAAEqzC,OAASrzC,EAAEszC,WAIzBvlB,MAAM6Q,KAAKgS,aAAa5wC,GAExBmgB,KAAKmsB,eAAeqE,OACpBxwB,KAAKuwB,kBACLvwB,KAAKqX,mBAAmBsJ,OAAOsS,cAAcpzC,EAAEuzC,SAAW,OAAS,SAEpE,EACDP,WAAU,WACT,IAAMhjB,EAAS7P,KAAKqX,mBACpB,IAAIrX,KAAK+xB,aAAe/xB,KAAK+xB,aAAeliB,EAAO+I,iBAAiB,CACnE,IAAM3O,EAAOjK,KAAKkO,OAAOmiB,WACnBnE,EAAOrc,EAAO8Q,OAAO0S,YAAYppB,GACpCA,GAAQiiB,IACVA,EAAKxL,UAAS1/B,QAAAA,OAAW4sB,MAAMU,SAAS6F,OAAOnU,KAAKqB,YAAmB,UACzE,CACA,EACDkvB,gBAAe,SAACtmB,GACf,IAAMqpB,EAAOtzB,KAAKqB,WACZwO,EAAS7P,KAAKqX,oBACpBpN,EAAOA,GAAQjK,KAAKkO,OAAOmiB,YAOvBiD,IAFSzjB,EAAOiD,aAAa7I,EAAKjE,IAAKiE,EAAKG,UAG9CpK,KAAKkO,OAAOxO,MAAQ4zB,EACpBzjB,EAAOyD,aAAarJ,EAAKjE,IAAKiE,EAAKG,OAAQkpB,GAC3CzjB,EAAO7N,WAPRhC,KAAKiB,SAAS,WAWR4O,EAAO6gB,gBACd,EACD6C,cAAa,SAAC7zB,GACbM,KAAK2uB,aAAajvB,EAClB,EACDivB,aAAY,SAACjvB,GACZM,KAAKowB,gBAAkB,IAAIlwC,KAE3B,IAAM+nB,EAAUjI,KAAKqB,WACrB,GAAG4G,GAA+B,MAApBA,EAAQomB,OAAO,GAAS,CACrC,IAAMD,EAASpuB,KAAKmsB,eAAeG,eAC/BkH,EAAOvrB,EAAQrmB,UAAU,EAAGwsC,GAC1BqF,EAAOxrB,EAAQrmB,UAAUwsC,GAEL,KAAvBoF,EAAKA,EAAKzyC,OAAO,KACnByyC,EAAOA,EAAK5xC,UAAU,EAAG4xC,EAAKzyC,OAAO,IAEtCyyC,EAAOA,EAAK5xC,UAAU,EAAGmpC,GAAiByI,GAAM,IAEhD,IAAM7oB,EAAoC,GAA5BjL,EAAMjd,QAAQ,WACzBkoB,IACFjL,EAAQA,EAAM3c,OAAO,IAGtBywC,GAAQ9zB,GAASiL,GAAoB,KAAX8oB,EAAK,GAAY,GAAK,KAEhDzzB,KAAKiB,SAASuyB,EAAOC,GACrBzzB,KAAKmsB,eAAeuH,kBAAkBF,EAAKzyC,OAAQyyC,EAAKzyC,OACzD,CACA,EACD4yC,eAAc,SAACC,GACd,IAAM5pB,EAAOhK,KAAKqB,WAElB,GAAc,KAAX2I,EAAK,GAAU,CAEjB,IADA,IAAIokB,EAASwF,EAAY5pB,EAAKjpB,OAASif,KAAKmsB,eAAeG,eACnC,KAAlBtiB,EAAKokB,EAAO,IACjBA,IACD,OAAOpkB,EAAKokB,EAAO,IAAMpkB,EAAKokB,EAAO,GAAG1pC,MAAM,eAC/C,CACA,EACDmvC,SAAQA,SAAClpB,EAAO/nB,GACf,IAGI4wC,EAAMC,EAHJrF,EAASpuB,KAAKmsB,eAAeG,eAC7BrkB,EAAUjI,KAAKqB,WAKlBze,IACFA,EAAUod,KAAKmwB,eAAiB/B,GAAUpuB,KAAKmwB,cAAc7S,IAAMtd,KAAKmwB,cAAc2D,KAEvF,IAAMC,EAAUnxC,EAAUod,KAAKmwB,cAAc7S,IAAM8Q,EAEnDoF,EAAOvrB,EAAQrmB,UAAU,EAAGmyC,GAAWppB,EACvC8oB,EAAOxrB,EAAQrmB,UAAUwsC,GAEzBpuB,KAAKmwB,cAAgB,CAAC7S,IAAKyW,EAASD,IAAKnpB,EAAM5pB,QAE/Cif,KAAKiB,SAASuyB,EAAOC,EACrB,EACDtB,aAAYA,SAAC1nB,EAAOohB,GACnB,OAAIphB,IAEcmD,MAAM6J,YAAYoU,IAAkC,GAAvBphB,EAAMhoB,QAAQ,KAAaopC,GACzD7qC,IAAAA,OAAOypB,EAAK,KAAMA,GAAS,IAFpC,EAGR,EACDupB,YAAWA,SAAC1P,EAAOC,GAClB,MAAO,CACNpS,MAAO7xB,KAAKsJ,IAAI06B,EAAOC,GACvBnS,IAAK9xB,KAAKsT,IAAI0wB,EAAOC,GAEtB,EACDmO,SAAQ,SAACuB,EAAMC,EAAMC,EAAMC,EAAM5oB,GAChC,IAAMxF,EAAMhG,KAAKg0B,YAAYC,EAAME,GAC7Bza,EAAM1Z,KAAKg0B,YAAYE,EAAME,GAC7Bjb,EAAQ,CAACnT,EAAImM,MAAOnM,EAAIoM,IAAKsH,EAAIvH,MAAOuH,EAAItH,KAAK1wB,KAAK,KACtD2yC,EAAcr0B,KAAKkwB,kBAAkB/W,GAE3C,GAAIkb,EAKH,OAAOA,EAAY,GAJnBr0B,KAAKkwB,kBAAkB/W,GAAS,CAACnT,EAAK0T,EAAKlO,GAC3CxL,KAAK8xB,cAAc9rB,EAAK0T,EAAKlO,EAI9B,EACDsH,aAAYA,SAAC9M,EAAKoE,GACjB,IAAMyF,EAAS7P,KAAKqX,mBAChB3X,EAAQmQ,EAAOiD,aAAa9M,EAAKoE,GACF,QAAhC0iB,GAAQjd,EAAQ7J,EAAKoE,IAAiC,KAAZ1K,EAAM,KAElDA,EADeyqB,GAAkBta,EAAQ7J,EAAKoE,EACtCD,CAAO0J,GAAmBnU,KAEnC,OAAOA,CACR,GACEkO,MAAMa,GAAG6lB,eC/bZ1mB,MAAMG,QAAQ,CACblhB,KAAM,mBACN8hB,SAAS,CACRW,IAAK,8BACLhB,SAAU,IACVlI,MAAO,EACPgF,YAAY,IAEZwC,MAAMa,GAAG9B,MCRXiB,MAAMG,QAAQ,CACblhB,KAAM,SACN8hB,SAAS,CACR4lB,OAAQ,IACRnpB,YAAY,EACZkE,IAAI,qBACJN,QAAQ,EACRwlB,KAAM,QACNC,WAAW,IACX1lB,QAAO,IAEPnB,MAAM8mB,YAAY9mB,MAAMa,GAAGkF,MCV7B/F,MAAMG,QAAQ,CACbC,SAAU,SACVnhB,KAAK,gBACL8nC,OAAO,WACN,IAAMpkB,EAAMvQ,KAAKqB,WAEbkP,GAAOA,GAAOvQ,KAAKkO,OAAO0mB,SAG7B50B,KAAKkO,OAAOxO,MAAQM,KAAKkO,OAAO0mB,WAAY,EAF5C50B,KAAKkO,OAAOxO,MAAQM,KAAKkO,OAAO2mB,UAAW,EAI5C,IAAM1O,EAAMnmB,KAAKqB,WACjBrB,KAAKyR,UAAU0U,GACfnmB,KAAKwQ,UAAU,WAAY,CAAC2V,EAAK5V,EAAK,QACtC,EACDkB,UAAU,SAAS/R,GACfA,GAASM,KAAKkO,OAAO0mB,SACvBl1B,GAAQ,EACDA,GAASM,KAAKkO,OAAO2mB,UAC5Bn1B,GAAQ,GACTkO,MAAMa,GAAGkmB,OAAOnjB,UAAUC,UAAUN,KAAKnR,KAAKN,EAC9C,EACD2B,SAAS,WACR,IAAI6M,EAASlO,KAAKkO,OACdxO,EAAQwO,EAAOxO,MACnB,OAASA,GAASA,GAAOwO,EAAO0mB,SAAmC1mB,EAAO2mB,UAAS,EAAzC3mB,EAAO0mB,WAAU,CAC3D,EACDjmB,SAAS,CACRL,SAAS,SAASW,EAAK1F,GACtB,IAAI+F,GAAqB,IAAdL,EAAIvP,OAAkBuP,EAAIvP,OAASuP,EAAI4lB,QAAW,iBAAmB,GAC5EC,EAAMvrB,EAAOyH,aAAa/B,EAAK1F,GACnC,MAAO,2BAA2B+F,EAAI,kBAAkBL,EAAI8lB,OAAO,cAAc9lB,EAAI+lB,QAAQ,OAAOF,EAAI,QACzG,IAEClnB,MAAMa,GAAGkmB,QAIZ/mB,MAAMG,QAAQ,CACblhB,KAAK,uBACLmhB,SAAS,SACTinB,cAAa,EACbh0B,SAAS,WACRjB,KAAKk1B,aACLtnB,MAAMa,GAAGkmB,OAAOnjB,UAAUvQ,SAAS4D,MAAM7E,KAAMgS,WAC/ChS,KAAKm1B,cACN,GACEvnB,MAAMa,GAAGkmB,QChDZ/mB,MAAMG,QAAQ,CACblhB,KAAM,mBACN8hB,SAAS,CACRvD,YAAY,GAEb6C,MAAO,WACNjO,KAAK8Q,MAAMC,WAAa,4BACzB,GACCnD,MAAMa,GAAGH,UNRXV,MAAMG,QAAQ,CACblhB,KAAM,gBACNmhB,SAAU,SACVW,SAAS,CACR2F,KAAK,aACLlO,MAAO,IAER6H,MAAO,SAASC,GACf,IAAMknB,EAAWlnB,EAAOmnB,MAAQ,4BAA8B,GACxDC,EAAUpnB,EAAOgJ,MAAQ,GAAK,0BAEpC,GADAlX,KAAK8Q,MAAMC,WAAa,uBAAuBqkB,EAASE,EACrDpnB,EAAOgJ,OAAShJ,EAAO2C,KAAK,CAC9B,IAAIA,EAAQ3C,EAAO2C,MAAM3C,EAAOrhB,KAC/Bmd,EAAOkE,EAAOgJ,OAAO,GACtB,GAAGhJ,EAAOmnB,MAETrrB,GAAQ,wGADM4D,MAAMgB,KAAKmI,QAAQwe,aAAa,EACwE,eAEvHrnB,EAAOgJ,MAAQ,+DAA+DrG,EAAK,aAAa7G,EAChGkE,EAAOG,QAAUT,MAAMC,KAAKC,YAAYvC,SAAS2C,EAAOrhB,OAAO,EAChE,CACGqhB,EAAOC,UAAYD,EAAOwF,QAC5BxF,EAAOwF,MAAQqb,GAAe7gB,EAAOC,SACvC,GACCP,MAAMa,GAAGwgB,QAGXrhB,MAAMG,QAAQ,CACblhB,KAAM,yBACNmhB,SAAU,SACVW,SAAS,CACR2F,KAAK,aACLlO,MAAO,GACPC,OAAQ,IAET4H,MAAO,SAASC,GAEf,GADAlO,KAAK8Q,MAAMC,WAAa,0BACrB7C,EAAOgJ,MAAO,CAChB,IAAIrG,EAAQ3C,EAAO2C,MAAQ3C,EAAOrhB,MAAM,GACvCmd,EAAOkE,EAAOgJ,MACfhJ,EAAOgJ,MAAQ,+DAAiErG,EAAO,iBACvF3C,EAAOgJ,OAAS,6CAA6ClN,EAAK,UAC9DkE,EAAOmnB,QACVnnB,EAAOgJ,OAAS,oFACjBhJ,EAAOG,QAAUT,MAAMC,KAAKC,YAAYvC,SAAS2C,EAAOrhB,OAAO,EAChE,CACGqhB,EAAOC,UAAYD,EAAOwF,QAC5BxF,EAAOwF,MAAQqb,GAAe7gB,EAAOC,SACvC,GACCP,MAAMa,GAAGwgB,QO/CXrhB,MAAMG,QAAQ,CACblhB,KAAK,gBACL8hB,SAAS,CACRmI,QAAQ,EACRxC,KAAK,QACLlJ,YAAW,EACXoqB,eAAe,CACdC,WAAW,IAGbxnB,MAAM,SAASC,GACdA,EAAOzB,KAAO,CAAC,CAACpG,OAAO,OACvBrG,KAAKqQ,OAAOlrB,MAAK,WAChB6a,KAAK01B,eACN,GACA,EACDA,cAAa,WACZ11B,KAAK0Q,YAAY,YAAY,SAAS4iB,GACrC,IAAMzmC,EAAOmT,KAAK21B,aAAaznB,OAAOrhB,KAGtC,GADAmT,KAAKk1B,aACM,QAARroC,EAAe,CACjB,IAAI,IAAIrM,KAAKwf,KAAK4W,SACjB5W,KAAK4W,SAASp2B,GAAGygB,SAASqyB,GACvBA,GACHtzB,KAAK41B,iBAAiB,GAAG30B,SAAS,EACpC,KACI,CACH,IAAMvB,EAAQM,KAAKqB,UAAS,GAE5B,GAAGuM,MAAM1K,QAAQxD,MAAYA,EAAM3e,SAAWszB,GAAS3U,GAAO,SAAAwO,GAAM,OAAKA,EAAO2nB,YAAY,KAE3FxhB,GADmBrU,KAAK41B,kBACH,SAAA30C,GAAC,OAAKA,EAAEitB,OAAO2nB,YAAY,IAAE50B,SAAS,GAG5DjB,KAAK4W,SAASkf,KAAK70B,UAAiC,IAAxBjB,KAAKqB,UAAS,GAAiB,EAAI,EAChE,CACArB,KAAKm1B,cACN,GACA,EACDl0B,SAAS,SAASvB,GAIjB,GAHAM,KAAK4W,SAAW,GAChB5W,KAAK+1B,OAASr2B,EAAM3e,OAEjB2e,EAAM3e,OAAS,EAAE,CACnB,IAAI61B,EAAW,GACXof,EAAO,GAGXt2B,EAAMxa,SAAQ,SAAAulB,GACb,IAAMoG,EAAI7vB,kCAAAA,OAAqCypB,EAAMwrB,OAAS,SAAW,GAAa,aACtFD,EAAK7wC,KAAK,CAAEwnB,KAAM,WAAYupB,WAAYrlB,EAAOpG,EAAM5d,KAAMA,KAAM4d,EAAM5d,KAAM6S,MAAO+K,EAAM0rB,OAAQN,aAAcprB,EAAMwrB,QACzH,IAEA,IAAMG,EAAaJ,EAAKj1C,OAAS6sB,MAAMgB,KAAKmI,QAAQsf,YAC9CtnB,EAASqnB,EARG,IAUlBxf,EAASzxB,KAAK,CACbwnB,KAAK,aAAcyB,KAAK,CAAC3B,KAAKupB,GAC9BjnB,OAAQA,EACR1I,OAAQ0I,EAbS,IAaYqnB,IAG9Bxf,EAASzxB,KAAK,CAAEmpB,SAAS,kCAAmCjI,OAAO,KACnEuQ,EAASzxB,KAAK,CAAEwnB,KAAK,WAAYupB,WAAWtoB,MAAMC,KAAKC,YAAYxE,OAAO,qBAAsBzc,KAAK,OAAQ6S,MAAM,IAEnHkO,MAAMa,GAAGmI,EAAU5W,KACnB,MACOA,KAAKmQ,gBAAgBpvB,OAAS,GACrC6sB,MAAMa,GAAG,CAAC,CAACpI,OAAO,OAAYrG,KAE/B,EACDqB,SAAS,SAAS6M,GAKjB,IAJA,IAAMooB,EAAat2B,KAAK41B,iBACpBW,EAAS,GAGL/1C,EAAI,EAAGA,EAAI81C,EAAWv1C,OAAQP,IACrC,GAAG81C,EAAW91C,GAAG6gB,WAAW,CAC3B,IAAMm1B,EAAMF,EAAW91C,GAAG0tB,OAC1BqoB,EAAOpxC,KAAK+oB,EAASsoB,EAAMA,EAAI3pC,KAChC,CAED,OAAG0pC,EAAOx1C,QAAUif,KAAK+1B,QAGlBQ,CACP,EACDX,eAAc,WACb,IAAMa,EAAaz2B,KAAK02B,UAAU,cAClC,OAAOD,EAAaA,EAAWvmB,UAAUC,gBAAkB,EAC5D,GACEvC,MAAMa,GAAGwI,MC9FZrJ,MAAMG,QAAQ,CACblhB,KAAK,WACL8hB,SAAS,CACRgG,SAAU,EACVtO,OAAQ,KAET4H,MAAM,SAASC,GAAO,IAAAsgB,EAAAxuB,KAErBkO,EAAOY,KAAO,CACb,CACCQ,IAAI,kBACJhB,SAASJ,EAAOgJ,MAChB9Q,MAAM8H,EAAOunB,WACbrqB,YAAW,GAEZ,CACCuB,KAAK,OACLjF,KAAKwG,EAAOxG,KACZ4H,IAAIpB,EAAOoB,IACXhB,SAASJ,EAAOI,SAChBU,QAAQ,EACRD,QAAO,EACP3D,YAAW,EACX8D,GAAG,CACFynB,eAAe,WACdnI,EAAKpf,gBAAgBoB,UAAU,WAAY,GAC5C,IAIH,EACDvP,SAAS,SAASvB,GAAOM,KAAKmQ,gBAAgB,GAAGnB,OAAOtP,EAAQ,EAChE2B,SAAS,WAAW,OAAOrB,KAAKmQ,gBAAgB,GAAGF,eAAiB,EACpEjO,QAAS,WAAWhC,KAAKmQ,gBAAgB,GAAGnO,SAAW,EACvD4vB,MAAM,WAAW,GACfhkB,MAAMa,GAAG8lB,QCnCZ3mB,MAAMG,QAAQ,CACblhB,KAAM,YACN8hB,SAAS,CACR7G,MAAK,EACLwH,IAAI,oCACJqI,MAAK,EACLif,QAAO,EACPC,SAAQ,EACRC,SAAS,GACTC,UAAU,IACVC,SAAQ,EACRC,SAAQ,GAEThpB,MAAM,WAELjO,KAAK8Q,MAAMomB,aAAa,cAAe,KAEvCl3B,KAAKqQ,OAAOlrB,MAAK,WAChByoB,MAAM+iB,UAAUwG,UAAU,SAAUvpB,MAAMhF,KAAK5I,KAAKo3B,YAAap3B,OACjE4N,MAAM+iB,UAAUwG,UAAU,YAAavpB,MAAMhF,KAAK5I,KAAKo3B,YAAap3B,OACpEA,KAAKq3B,SACN,IACAr3B,KAAK0Q,YAAY,cAAc,WAC9B9C,MAAMmjB,YAAY/wB,KAAKs3B,UACvBt3B,KAAKu3B,MAAMC,YACZ,GACA,EACDC,YAAY,SAAS/3B,GAIpB,OAHIA,GACHkO,MAAM8pB,YAAYC,QAAQ33B,KAAK8Q,MAAO9Q,MAEhCN,CACP,EACDk4B,SAAS,SAASta,EAAKz9B,GAEtB,OADAmgB,KAAKwQ,UAAU,aAAc,CAAC8M,EAAKz9B,IAC5By9B,CACP,EACDua,YAAY,SAASC,EAAQj4C,GAC5B,IAAMk4C,EAAMl4C,EAAEm4C,OACd,GAAKD,EAAIE,eAAgBF,EAAIE,aAAa,wBAAyBF,EAAIE,aAAa,eAApF,CAGAj4B,KAAKq3B,UAAU1nB,OACf,IAAMuoB,EAAWtqB,MAAM6Q,KAAK4N,OAAOyL,GAC7BK,EAAQvqB,MAAM6Q,KAAKnB,IAAIz9B,GACvBu4C,EAAUxqB,MAAM6Q,KAAK4N,OAAOyL,EAAOO,YACnCxlB,EAAQjF,MAAMgC,GAAG5P,KAAKkO,OAAO2B,QAAQyoB,iBAK3C,OAHA1qB,MAAM8pB,YAAY3a,IAAMmb,EAAS91C,EAAI+1C,EAAM/1C,EAAIg2C,EAAQh2C,EACvDwrB,MAAM8pB,YAAY9a,KAAOsb,EAASryC,EAAIsyC,EAAMtyC,EAAIuyC,EAAQvyC,EAAIgtB,EAAMhtB,EAE3D+nB,MAAM2qB,OAAOv4B,KAAK8Q,MAXxB,CAYD,EACD0nB,aAAa,SAAStM,EAAMsI,GAC3B,IAAM3uC,EAAIma,KAAKkO,OAAO0O,KAAO7yB,SAASyqC,EAAK7iB,MAAMiL,KAAK,IAChDx6B,EAAI4d,KAAKkO,OAAO6O,IAAMhzB,SAASyqC,EAAK7iB,MAAMoL,IAAI,IAEpDnP,MAAM8pB,YAAY3a,IAAMnP,MAAM8pB,YAAY9a,KAAO,EAEjD5c,KAAKwQ,UAAU,gBAAiB,CAAC3qB,EAAGzD,GAEpC,EACDi1C,QAAQ,WAAU,IAAA7I,EAAAxuB,KACXsJ,EAASsE,MAAMC,KAAKC,YAAYxE,OACtC,IAAItJ,KAAKu3B,MAAM,CACd,IAAI7vB,EAAO,CACV,CAAEhI,MAAM4J,EAAO,eAAgBmvB,QAAQ,CACtC,CAAE50B,GAAG,MAAOnE,MAAM4J,EAAO,oBACzB,CAAEzF,GAAG,MAAOnE,MAAM4J,EAAO,oBACzB,CAAEzF,GAAG,QAASnE,MAAM4J,EAAO,yBAIzBsE,MAAMgC,GAAG5P,KAAKkO,OAAO2B,QAAQwH,mBAAmBnJ,OAAOwqB,WAC1DhxB,EACC,CAAA,CAAE7D,GAAG,OAAQnE,MAAM4J,EAAO,eAActoB,OAAA23C,GACrCjxB,GACH,CAAA,CAAE7D,GAAG,MAAOnE,MAAM4J,EAAO,mBAG3BtJ,KAAKu3B,MAAQ3pB,MAAMa,GAAG,CACrB9B,KAAK,cACLisB,cAAc,CACbC,WAAY74B,KAAKkO,OAAOrK,IAEzB6D,KAAKA,EACLwH,GAAG,CACF4pB,gBAAiB,SAAAj1B,GAAE,OAAI2qB,EAAKuK,aAAal1B,EAAG,EAC5C6rB,aAAc,WAAA,OAAMlB,EAAKwK,cAAc,KAGzC,IAAMC,EAAOrrB,MAAM6Q,KAAK4D,OAAO,OAAQ,CAAC6W,MAAQ,+CAChDl5B,KAAKs3B,SAAW1pB,MAAMqjB,MAAMgI,EAAM,SAAS,WACvCzK,EAAK+I,MAAM1I,YACbL,EAAK+I,MAAM5nB,OAEX6e,EAAK+I,MAAM7I,KAAKuK,EAClB,IACAj5B,KAAK8Q,MAAMe,WAAW+O,YAAYqY,EACnC,CACA,OAAOj5B,KAAKu3B,KACZ,EACDwB,aAAa,SAASl1B,GACrB,OAAOA,GACN,IAAK,MACJ7D,KAAKwQ,UAAU,eAAgB,IAC/B,MACD,IAAK,OACJxQ,KAAKwQ,UAAU,aAAc,IAC7B,MACD,IAAK,MACJ5C,MAAMurB,MAAMn5B,KAAKkQ,UAAW,CAAClF,QAAQ,UACrC,MACD,IAAK,MACJ4C,MAAMwrB,MAAMp5B,KAAKkQ,WACjB,MACD,IAAK,QACJtC,MAAMyb,QAAQrpB,KAAKkQ,UAAW,CAACmpB,QAAQ,IAGzC,EACDL,aAAa,WACZ,IAAMrsB,EAAO3M,KAAKkQ,UACfvD,EAAKjF,MAAQiF,EAAKjF,KAAK4xB,KACzBt5B,KAAKu3B,MAAMgC,aAAa,SAExBv5B,KAAKu3B,MAAMiC,aAAa,QACzB,EACDpC,YAAY,SAASzqB,GACjBA,GAAQA,EAAK0K,oBAAsBrX,MACrCA,KAAKwQ,UAAU,eAAgB,GACjC,GACE5C,MAAMa,GAAGiJ,QCpIZ9J,MAAMG,QAAQ,CACblhB,KAAM,gBACNohB,MAAO,SAASC,GAAO,IAAAsgB,EAAAxuB,KACtBA,KAAKi2B,OAAS,GACd/nB,EAAOzB,KAAO,CACb,CACCE,KAAM,aACNvB,YAAY,EACZgD,KAAM,CACLzB,KAAM,YACN2C,IAAK,yBACLjE,OAAQuC,MAAMgB,KAAKmI,QAAQ0iB,aAAaxiB,KACxCyiB,OAAO,EACPplB,KAAM,QACN7H,KAAM,CACLzM,KAAK25B,qBAGPzqB,GAAG,CACF0qB,cAAc,WAEbhsB,MAAM4C,UAAU,UAAW,GAC5B,IAGF,CAAE7D,KAAK,SAAUuK,MAAMtJ,MAAMC,KAAKC,YAAYxE,OAAO,YAAa8N,MAAM,WACvEoX,EAAKqL,YACN,GAED,EACDF,iBAAkB,SAASn5C,GAAE,IAAA2uC,EAAAnvB,KACtB2M,EAAO3M,KACPsJ,EAASsE,MAAMC,KAAKC,YAAYxE,OAChCwwB,EAAY,sEACZhjB,EAAUlJ,MAAMgB,KAAKmI,QAAQgjB,YAAY,EAE/C,MAAO,CACNptB,KAAK,gBACL0sB,OAAM,GAAAr4C,OAAIsoB,EAAO,mBAAatoB,OAAIR,EAAIA,EAAE,EAAI,EAACQ,KAAAA,OAAI84C,GACjD1rB,KAAK,CACJzB,KAAK,OACLmK,QAAAA,EACA0e,eAAe,CACdC,WAAW,KAEZvmB,GAAG,CACFM,SAAU,WACT2f,EAAK3e,UAAU,WAAY,GAC5B,GAEDoG,SAAS,CACR,CAAEjK,KAAK,OAAQuK,MAAM5N,EAAO,eAAgBzc,KAAK,QAAS8d,OAAM,EAAMuE,GAAG,CACxEM,SAAU,SAAS2W,EAAKlE,GACvB,IAAM+X,EAAQ7T,EAAI3kC,cACf2kC,GAAO6T,IACTh6B,KAAKk1B,aACLl1B,KAAKiB,SAAS+4B,GACdh6B,KAAKm1B,gBAENxoB,EAAK6D,UAAU,gBAAiB,CAACwpB,EAAO/X,GACzC,IAED,CAAEtV,KAAK,qBAAsBuK,MAAM5N,EAAO,sBAAuBzc,KAAK,QAASopC,OAAQj2B,KAAKi2B,OAAOzqB,OACnG,CAAEmB,KAAK,WAAYuK,MAAM5N,EAAO,iBAAkBzc,KAAK,WACvD,CAAE8f,KAAK,WAAYuK,MAAM5N,EAAO,eAAgBzc,KAAK,QAASopC,OAAQj2B,KAAKi2B,OAAO/e,OAClF,CAAEvK,KAAK,aAAcuK,MAAM5N,EAAO,iBAAkB5J,MAAM,SAAU7S,KAAK,SAAUopC,OAAQj2B,KAAKi2B,OAAOgE,OACtGxqB,QAAQ,CACP9C,KAAM,sBACNjF,KAAM,CACL,CAAC7D,GAAG,SAAUnE,MAAM4J,EAAO,yBAC3B,CAACzF,GAAG,WAAYnE,MAAM4J,EAAO,2BAC7B,CAACzF,GAAG,UAAWnE,MAAM4J,EAAO,0BAC5B,CAACzF,GAAG,QAASnE,MAAM4J,EAAO,6BAM/B4wB,QAAQ,CACP,YAAa,WACZ,IAAM3F,EAASv0B,KAAKoP,gBACpBmlB,EAAO4F,WAAWn6B,MAIlB,IAFA,IAAMo6B,EAAS7F,EAAOpkB,gBAEb3vB,EAAI,EAAGA,EAAI45C,EAAOr5C,OAAQP,IAClC45C,EAAO55C,GAAGuyC,OAAO,CAACsG,UAAMr4C,OAAIsoB,EAAO,cAAa,KAAAtoB,OAAIR,EAAE,EAACQ,KAAAA,OAAI84C,KAC3DM,EAAO55C,GAAGwhB,UAIX,OADA2K,EAAK6D,UAAU,WAAY,KACpB,CACR,GAGF,EACDqpB,WAAY,WACX,IAAMtF,EAASv0B,KAAKq6B,YACdC,EAAY/F,EAAOpkB,gBAAgBpvB,OACnCw5C,EAAWhG,EAAOiG,QAAQx6B,KAAK25B,iBAAiBW,IAEtD1sB,MAAMgC,GAAG2qB,GAAU7D,UAAU,CAAC7pC,KAAM,UAAU+kC,OAC9C,EACD3wB,SAAU,SAASvB,GAClBA,EAAQA,GAAS,GAEjB,IACM06B,EADSp6B,KAAKq6B,YACElqB,gBAChBkN,EAAQ+c,EAAOr5C,OAErB,GAAGs8B,EAAQ3d,EAAM3e,OAChB,IAAI,IAAIP,EAAI68B,EAAO78B,EAAIkf,EAAM3e,OAAQP,IACpCwf,KAAKq6B,YAAYF,WAAWC,EAAO55C,EAAE,SAClC,GAAGkf,EAAM3e,OAASs8B,EACtB,IAAI,IAAI78B,EAAIkf,EAAM3e,OAAQP,EAAI68B,EAAO78B,IACpCwf,KAAK65B,aAEP,IAAI,IAAIr5C,EAAI,EAAGA,EAAI45C,EAAOr5C,OAAQP,IAAI,CACrC,IAAMy2B,EAAOmjB,EAAO55C,GAAG2vB,gBAAgB,GACjCxF,EAAQsM,EAAKyf,UAAU,CAAC7pC,KAAM,UAGpC8d,EAAMuqB,aACNje,EAAKoa,UAAU3xB,EAAMlf,IACrBmqB,EAAMwqB,cACP,CACA,EACDsF,YAAa,SAASC,EAAKh7B,GAC1Bg7B,EAAIxF,aACJwF,EAAIz5B,SAASvB,GACbg7B,EAAIvF,cACJ,EACDkF,UAAS,WACR,OAAOr6B,KAAK02B,UAAU,cAAcxmB,SACpC,EACDyqB,aAAYA,SAAC9tC,EAAM6hC,GAClB1uB,KAAKi2B,OAAOppC,IAAS6hC,EAErB1uB,KAAK02B,UAAU,CAAE7pC,KAAAA,GAAQ,OAAO3H,SAAQ,SAAAynB,GACpC+hB,EACF/hB,EAAK+hB,OAEL/hB,EAAKgD,MACP,GACA,EACDtO,SAAU,WACT,IAAM3B,EAAQ,GAMd,OAJeM,KAAKq6B,YACblqB,gBAAgBjrB,SAAQ,SAAA01C,GAC9Bl7B,EAAMva,KAAKy1C,EAAMzqB,gBAAgB,GAAG0qB,YACrC,IACOn7B,CACR,GACEkO,MAAMa,GAAG8lB,QC1JZ3mB,MAAMG,QAAQ,CACblhB,KAAM,4BACNiuC,SAAU,WACT,IAAM14B,EAAOwL,MAAMa,GAAGgoB,WAAWjlB,UAAUspB,SAASj2B,MAAM7E,KAAMgS,WAC1D+oB,EAAW/6B,KAAKkQ,UAAU4qB,SAAS,EAAG,GAExC/rB,EAAS,EAQb,OAPG/O,KAAKkO,OAAOa,OACdA,EAASnB,MAAMotB,IAAIC,WAEnBj7B,KAAK8Q,MAAMa,MAAM,cAAgB,SAElCvP,EAAK,GAAKA,EAAK,GAAK24B,EAAS,GAAKhsB,EAE3B3M,CACP,EACD84B,SAAU,SAASr1C,EAAEzD,GAAE,IAAAosC,EAAAxuB,KAChB+6B,EAAW/6B,KAAKkQ,UAAU4qB,SAAS,EAAG,GACtCK,EAAYn7B,KAAKkO,OAAOa,OACxBA,EAASlpB,EAAIk1C,EAAS,IAAK,IAEjC,GAAGhsB,GAAUosB,EAEZ,OADAn7B,KAAK+yB,OAAO,CAAChkB,OAAAA,IACNnB,MAAMkL,OAAM,WAClB0V,EAAKoI,QACN,IAGDhpB,MAAMa,GAAGgoB,WAAWjlB,UAAU0pB,SAASr2B,MAAM7E,KAAM,CAACna,EAAGzD,GACxD,GACCwrB,MAAMa,GAAGgoB,sEV9BJ,SAAc9pB,GAEpBA,EAAK+D,YAAY,eAAe,SAAChJ,GAAI,OA+BtC,SAAgBiF,EAAMsC,GACrB,IAAMmsB,EAAUnsB,EAAIpC,OAAS,CAAEwuB,cAAgB,EAAGC,WAAa,GAC/D3uB,EAAK4uB,eAAiB5uB,EAAK6uB,YAAc,EACrCJ,IACExtB,MAAM6J,YAAY2jB,EAAQC,gBAC9B1uB,EAAK8uB,cAAcL,EAAQC,eACvBztB,MAAM6J,YAAY2jB,EAAQE,aAC9B3uB,EAAK+uB,WAAWN,EAAQE,aAGvBrsB,EAAImd,OACNzf,EAAKiD,GAAG,SAASmjB,OAAO,kBAAkB,EAC5C,CA3C2CnU,CAAOjS,EAAMjF,MACvDiF,EAAK+D,YAAY,mBAAmB,SAAChJ,EAAMwG,GAAM,OASlD,SAAoBvB,EAAMsC,EAAKf,GAC9B,IAAIzL,GAAQyL,IAAwB,IAAdA,EAAOzL,KAEzB6S,EAAO3I,EAAKiD,GAAG,SACfiD,EAAQyC,EAAKqmB,WACbnvB,EAAUqG,EAAM+oB,IAAI56C,OAAO6xB,EAAMojB,QAGrCzpB,EAAQ5H,OAAO4H,EAAQ/pB,QAAQ,SAAU,GAEzCwsB,EAAIvH,KAAOwnB,GAAaviB,EAAMlK,GAE9BmL,MAAMgH,OACL3F,EAAIpC,MACJ,CACCwuB,cAAiB1uB,EAAK4uB,gBAAkB,EACxCD,WAAc3uB,EAAK6uB,aAAe,GAGrC,CA5BuDl0B,CAAWqF,EAAMjF,EAAMwG,MAG7EvB,EAAK+D,YAAY,UAAU,SAAC4D,EAAMtO,EAAKoE,EAAQ1K,GACnC,SAAR4U,GAwCL,SAAoB3H,EAAM3G,EAAKoE,EAAQ1K,GACtCiN,EAAK2G,aAAatN,EAAKoE,EAAQ1K,EAChC,CAzCGm8B,CAAWlvB,EAAM3G,EAAKoE,EAAQ1K,EAChC,GACD,IWFMyO,GAAU,CACf,eACA,eACA,aACA,cAGK2tB,GAAY,CACjB,eAAgB,SAAAnvB,GAAI,OAkVrB,SAAiBA,GAChBA,EAAKovB,QAAQ,CACZ/xB,KAAM4D,MAAMC,KAAKC,YAAYxE,OAAO,0BAClC0yB,MAAK,WACP90B,GAAOyF,EAAMA,EAAKsvB,aACnB,GACD,CAxVyBC,CAAQvvB,EAAK,EACrC,eAAgB,SAAAA,GAAI,OAAIJ,GAAKI,EAAK,EAClC,YAAa,SAAAA,GAAI,OAAIzN,GAAIyN,EAAK,EAC9B,aAAc,SAAAA,GAAI,OAgoBnB,SAAcA,GACbzN,GAAIyN,EAAMA,EAAKlH,YAChB,CAloBuB4B,CAAKsF,EAAK,EAChC,aAAc,SAAAA,GAAI,OAAIwvB,GAASxvB,EAAMA,EAAKsvB,aAAc,SAAS,GAG3D,SAASG,GAAKzvB,GACpBA,EAAK+D,YAAY,mBAAmB,WAAA,OAqIrC,SAAe/D,GACd0vB,GAAQ1vB,GAERA,EAAK+D,YAAY,oBAAoB,SAAC7jB,GAAI,OAqL3C,SAAqB8f,EAAK9f,GACtB8f,EAAKiD,GAAG,YACVjD,EAAKiD,GAAG,UAAUZ,OAAOniB,GACzB8f,EAAKiD,GAAG,UAAU0sB,SAASzvC,GAE7B,CA1LgD0vC,CAAY5vB,EAAK9f,MAEhE8f,EAAK+D,YAAY,aAAa,SAAS8rB,GACnCV,GAAUU,EAAQ34B,KACpBi4B,GAAUU,EAAQ34B,IAAI7D,KACxB,IAEG2M,EAAKiD,GAAG,YACVjD,EAAKiD,GAAG,UAAUlI,KAAKgJ,YAAY,kBAAkB,WACpD+rB,GAAsB9vB,GACtB+vB,GAAkB/vB,EACnB,IACAA,EAAKiD,GAAG,UAAUc,YAAY,gBAAiB9C,MAAM+uB,MAAK,WACzD/uB,MAAMkL,OAAM,WAAA,OAAK2jB,GAAsB9vB,KACvC,KACDA,EAAKiD,GAAG,UAAUc,YAAY,iBAAiB,WAAA,OAAMgsB,GAAkB/vB,MACvEA,EAAKiD,GAAG,UAAUc,YAAY,eAAe,SAACksB,GAAO,OAqFvD,SAAmBjwB,EAAM9f,EAAMgwC,GAC9B,IAAK,IAAIh5B,KAAM8I,EAAKsS,QACnB,GAAItS,EAAKsS,QAAQpb,GAAIhX,MAAQA,EAAM,CAClC,IAAMuzB,EAAOzT,EAAKsS,QAAQra,OAAOf,EAAI,GACrC8I,EAAKsS,QAAQra,OAAOi4B,EAAK,EAAGzc,EAAK,IACjC,KACD,CAEF,CA7F4D0c,CAAUnwB,EAAKiwB,EAAQzqB,MAAMyqB,EAAQzjB,UAC/FxM,EAAKiD,GAAG,UAAUc,YAAY,mBAAmB,SAACmC,GAAK,OAAKkqB,GAAOpwB,EAAKkG,EAAMtC,IAAIsC,EAAMnT,UAE1F,CA3J2Cs9B,CAAMrwB,KACjD,CAEO,IAAMswB,GAAU,CAAC,GAAK,IAAM,GAAK,EAAG,IAAK,KAAM,IAAK,KAAM,EAAG,EAAG,GAEhE,SAASC,GAAcvwB,GAC7B,IAAM0d,EAASzc,MAAMC,KAAKC,YAAYvC,SAChCmtB,EAAW/rB,EAAKuB,OAAOwqB,SACvByE,EAAWxwB,EAAKuB,OAAOkvB,cACvBC,EAA0B,QAAZF,EAAqBxwB,EAAKgC,SAASyuB,cAAgBD,EAEjEG,EAAW,CAChB3wB,KAAM,UACN9I,GAAI,iBACJyL,IAAK,mDACLqF,SAAU,EACVtO,OAAQ,GACRuQ,SAAS,CACR,CACCqf,OAAOyC,EACP5hB,QAAS,CACRiG,IAAK,EACLE,OAAQ,EACRL,KAAM,GAEP9N,KAAK,CACJ,CACCnC,KAAK,OAAQkE,KAAK,WAAYzK,MAAM,GAAIvC,GAAI,YAAauT,MAAO,WAAA,OAAKlY,GAAIyN,EAAK,EAC9E0B,QAAST,MAAMC,KAAKC,YAAYvC,SAAS,cAE1C,CACCoB,KAAK,OAAQkE,KAAK,WAAYzK,MAAM,GAAIvC,GAAI,aAAc6P,MAAO6pB,GAAe5wB,GAChF0B,QAAST,MAAMC,KAAKC,YAAYvC,SAAS,iBAI5C,CACC1H,GAAG,SACH8I,KAAK,SACL6wB,SAAU,EAAIH,EACdvG,SAAUuG,EACVI,UAAU/E,EACVgF,WAAY,WACZzR,OAAO,OACP0R,UAAU,QACVrpB,KAAK,CACJlO,MAAO+2B,EACP92B,OAAQ,GACRiI,SAAU,SAASW,GAClB,MAAO,gBAAgBypB,EAAW,iCAAmC,4BAA4B,KAAKzpB,EAAIvP,MAAM,UAC7Gg5B,EAAuF,GAA9E,8EACZ,EAEDppB,IAAI,uBAEL4qB,QAAQ,CACP0D,yBAA0B,SAAS/9C,EAAGgkB,IAgJ3C,SAAuB8I,EAAM9sB,EAAGgkB,GAC3B8I,EAAKkxB,aACRlxB,EAAKkxB,WAAajwB,MAAMa,GA/F1B,SAAkB9B,GAEjB,IADA,IAAIjF,EAAO,GACHlnB,EAAE,EAAGA,EAAI2tB,GAAQptB,OAAOP,IAC/BknB,EAAKviB,KAAK,CAAC0e,GAAIsK,GAAQ3tB,GAAIkf,MAAMkO,MAAMC,KAAKC,YAAY1B,MAAM+B,GAAQ3tB,KAAK2tB,GAAQ3tB,KAEpF,IAAIs9C,EAAQ,CACXnxB,KAAM,iBACNjF,KAAMA,GAGP,OADAiF,EAAK6D,UAAU,aAAc,CAAC,aAAcstB,IACrCA,CACR,CAoF6BC,CAASpxB,IACpCA,EAAK6iB,iBAAiBrqC,KAAKwnB,EAAKkxB,YAChClxB,EAAKkxB,WAAWntB,YAAY,eAAe,SAAA7M,GAAE,OAmb/C,SAAoB8I,EAAM9I,GACrB8I,EAAKkxB,WAAWn2B,KAAKs2B,QAAQn6B,EAAI,oBACjCi4B,GAAUj4B,GACZi4B,GAAUj4B,GAAI8I,GAEdA,EAAK6D,UAAU,YAAa,CAAC,CAAC3M,GAAAA,KAEjC,CA1bmDo6B,CAAWtxB,EAAK9I,OAGlE,IAAMq6B,EAAwC,GAA7BvxB,EAAKiD,GAAG,UAAUyN,QAEhC1Q,EAAKkxB,WAAW7lB,QAAQ,iBAC1BrL,EAAKkxB,WAAWK,EAAW,cAAgB,cAAc,gBAEvDvxB,EAAKkxB,WAAW7lB,QAAQ,eAC1BrL,EAAKkxB,WAAWK,EAAW,cAAgB,cAAc,cAEvDvxB,EAAK6D,UAAU,oBAAqB,CAAC3M,KACvC8I,EAAKkxB,WAAWnP,KAAK7uC,EACvB,CAhKMs+C,CAAcxxB,EAAM9sB,EAAGgkB,EACxB,GAEDqL,GAAG,CACF8f,YAAa,SAASnrB,GAClBA,GAAM8I,EAAKsvB,cACbtvB,EAAKqmB,UAAUnvB,EACjB,IAGF,CACC8I,KAAM,SAAU2H,KAAK,aAAclO,MAAO,GAAIvC,GAAI,aAAcu6B,UAAS,EAAMnI,QAAO,EACtF/e,MAAO,iDAAkDmnB,MAAM,QAC/DjnB,MAAM,WAAWknB,GAAa3xB,GAAO,EAAG,GAEzC,CACCA,KAAM,SAAU2H,KAAK,aAAclO,MAAO,GAAIvC,GAAI,aAAcoyB,QAAO,EACvE/e,MAAO,kDAAmDmnB,MAAM,QAChEjnB,MAAM,WAAWknB,GAAa3xB,EAAM,EAAG,GAExC,CAAC4xB,QAAQ,MACT,CACC5xB,KAAM,cACNswB,QAAAA,GACAv9B,MAAO,EACP0G,MAAO,IACPiI,QAASgc,EAAc,MACvBxmB,GAAI,OACJqL,GAAI,CACHM,SAAU,SAACjqB,EAAGi5C,EAAMtwB,GACL,QAAVA,GAAkBvB,EAAKuQ,KAAK33B,EACjC,MAQJ,OAFAonB,EAAK6D,UAAU,aAAc,CAAC,iBAAkB8sB,IAEzCA,CACR,CAEA,SAASgB,GAAa3xB,EAAM8xB,GAC3B,IAAMvzB,EAASyB,EAAKiD,GAAG,UACnB8uB,EAAO/xB,EAAKuB,OAAOkvB,cACZ,QAARsB,IACFA,EAAO/xB,EAAKgC,SAASyuB,eACtBlyB,EAAOymB,SAASzmB,EAAOotB,iBAAiBzyC,EAAG44C,EAAUC,EAAO,EAC7D,CAoDA,SAASnB,GAAe5wB,GACvB,MAAO,CACNA,KAAM,QACN2C,IAAK,uBACLlJ,MAAO,IACPgI,KAAK,CACJzB,KAAM,OACNqC,QAAQ,EACRM,IAAK,yBACLhB,SAAU,kDACVY,GAAG,CACFC,cAAe,SAAStL,GACvBs4B,GAASxvB,EAAM9I,EAAI,WACnB8I,EAAKqmB,UAAUnvB,GACf7D,KAAKoP,gBAAgBO,MACtB,GAED0f,UAAW,IACXC,YAAY,GAEbpgB,GAAG,CACFyvB,OAAQ,WACP3+B,KAAKkQ,UAAUosB,SAAS3vB,EAAKiM,iBAC7B,EACD8W,aAAc,WACb,IAAMhoB,EAAOiF,EAAKsS,QAChBhtB,QAAO,SAAAwY,GAAK,MAAmB,cAAfA,EAAMoI,KAAqB,IAC3CvtB,KAAI,SAAAmlB,GACJ,MAAO,CACN5G,GAAI4G,EAAM5d,KACVgkB,KAAqB,UAAfpG,EAAMoI,MAAoB,YAAc,MAEhD,IAEKc,EAAO3T,KAAKkQ,UAClByD,EAAKirB,WACLjrB,EAAKhR,MAAM+E,GACXiM,EAAK3E,OAAOrC,EAAKiM,iBAClB,GAGH,CAqBA,SAAS8jB,GAAkB/vB,GAC1B,IAAMzB,EAASyB,EAAKiD,GAAG,UACjBivB,EAAY3zB,EAAOotB,iBAAiBzyC,EAC1C,GAAgB,GAAbg5C,EACFlyB,EAAKiD,GAAG,cAAckvB,eAGtB,GADAnyB,EAAKiD,GAAG,cAAcmvB,SACnB7zB,EAAO4F,MAAMkuB,YAAcH,GAAa3zB,EAAOlO,OACjD,OAAO2P,EAAKiD,GAAG,cAAckvB,UAE/BnyB,EAAKiD,GAAG,cAAcmvB,QACvB,CAEA,SAAStC,GAAsB9vB,GAC9B,IAAMzB,EAASyB,EAAKiD,GAAG,UACvBjD,EAAKiD,GAAG,kBAAkBqvB,UAAU,QAAS/zB,EAAOlO,QAAUkO,EAAO4F,MAAMkuB,YAC5E,CAYO,SAAS7C,GAASxvB,EAAMlC,EAAOoI,GACrC,IAAMqsB,EAAMC,GAASxyB,EAAMlC,GAE3B,GAAGoI,GAASqsB,EAAIrsB,QAAmB,WAATA,GAAuBqsB,EAAIrsB,OAArD,CAGA,GAAY,WAATA,EAAmB,CACrB,IAAMusB,EAAgBC,GAAW1yB,GAGjC,GAA2B,GAAxByyB,EAAcr+C,QAAeq+C,EAAc,KAAOF,EACpD,OAGEz0B,GAASkC,EAAKsvB,cAChBqD,GAAa3yB,EAAMlC,EACrB,CAEAy0B,EAAIrsB,MAAQA,EACZ0sB,GAAY5yB,GAEZA,EAAK6D,UAAU,qBAAsB,CAAC/F,EAAOoI,GAjB5C,CAkBF,CAEA,SAAS0sB,GAAY5yB,GACpB,IAAM6yB,EAAO7yB,EAAKiD,GAAG,UAClB4vB,GACFA,EAAKvtC,QAAO,SAAAgd,GACX,IAAM4D,EAAQssB,GAASxyB,EAAMsC,EAAIpL,IAAIgP,MACrC,MAAgB,UAATA,GAA8B,cAATA,CAC7B,GACF,CAEO,SAAS3T,GAAIyN,EAAMgK,EAAS9pB,EAAM6hC,GACxC,IAAIvV,EAAOsmB,EAyBX,OAvBAtmB,EAAQ9E,GAAc1H,EAAKsS,SAAS,SAAAp5B,GAAC,OAAIA,EAAEgH,MAAQ8f,EAAKsvB,gBACxDwD,EAAWtmB,GAAO,EAAEA,EAAM,EAAExM,EAAKsS,QAAQl+B,OAErC8L,IAAQwnB,GAAS1H,EAAKsS,SAAS,SAAAxU,GAAK,OAAIA,EAAM5d,MAAQA,CAAI,MAC7DA,EAsBF,SAAqB8f,GACpB,IAAIwM,EAAQxM,EAAKsS,QAAQl+B,OAAO,EAChC,KAAMo+C,GAASxyB,EAAOiB,MAAMC,KAAKC,YAAYxE,OAAOmB,MAAM0O,IACzDA,IACD,IAAItsB,EAAO+gB,MAAMC,KAAKC,YAAYxE,OAAOmB,MAAM0O,EAC/C,OAAOtsB,CACR,CA5BS6yC,CAAY/yB,IAEpBgK,EAAUA,GAAW,CAACjP,KAAK,IAC3BiF,EAAKsS,QAAQra,OAAO66B,EAAU,EAAG,CAChC5yC,KAAAA,EACA8pB,QAAAA,IAGEhK,EAAKiD,GAAG,WACVjD,EAAKiD,GAAG,UAAU1Q,IAAI,CAAC2E,GAAIhX,EAAM6S,MAAO7S,GAAM4yC,GAE/C9yB,EAAKoS,OAAOjW,QAAQjc,GAEpBkgC,GAAapgB,EAAM9f,EAAM8pB,EAAShK,EAAKuB,OAAOyxB,cAElC,IAATjR,GACF/hB,EAAKqmB,UAAUnmC,GAChB8f,EAAK6D,UAAU,aAAc,CAAC3jB,IAEvBA,CACR,CAiBO,SAAS0f,GAAKI,EAAK9f,GACrBA,IACHA,EAAO8f,EAAKsvB,cACbtvB,EAAKiD,GAAG,UAAUrD,KAAK1f,EACxB,CAUA,SAASwyC,GAAW1yB,GACnB,OAAOA,EAAKsS,QAAQhtB,QAAO,SAAAnR,GAAC,MAAe,UAAXA,EAAE+xB,OAAgC,cAAX/xB,EAAE+xB,QAC1D,CAEA,SAASysB,GAAa3yB,EAAM9f,GAC3B,IAAMuyC,EAAgBC,GAAW1yB,GAE7BwM,EAAQ9E,GAAc+qB,GAAe,SAAAv5C,GAAC,OAAIA,EAAEgH,MAAQA,KAEpD+yC,EAAYzmB,EAAQ,EACpBimB,EAAcQ,KACjBA,EAAY,GACbR,EAAcx6B,OAAOuU,EAAO,GAE5BxM,EAAKqmB,UAAUoM,EAAcQ,GAAW/yC,KACzC,CAEO,SAASqa,GAAOyF,EAAM9f,GAC5B,GAAG8f,EAAKsS,QAAQl+B,OAAS,EAAE,CAC1B,IAAMq+C,EAAgBC,GAAW1yB,GAGjC,GAA2B,GAAxByyB,EAAcr+C,QAAeq+C,EAAc,KAAOD,GAASxyB,EAAM9f,GACnE,OAGE8f,EAAKsvB,cAAgBpvC,GACvByyC,GAAa3yB,EAAM9f,GAEpB,IAAMssB,EAAQ9E,GAAc1H,EAAKsS,SAAS,SAAAp5B,GAAC,OAAIA,EAAEgH,MAAQA,KACzD8f,EAAKsS,QAAQra,OAAOuU,EAAO,GAC3BxM,EAAKoS,OAAOhW,WAAWlc,GAEpB8f,EAAKiD,GAAG,YACVjD,EAAKiD,GAAG,UAAU1I,OAAOra,GACzB8f,EAAKiD,GAAG,UAAU5N,WAGnB2K,EAAK6D,UAAU,gBAAiB,CAAC3jB,GAClC,CACD,CAEO,SAASkwC,GAAOpwB,EAAK9f,EAAK0rB,GAChC,GAAI1rB,GAAQ0rB,EAAZ,CAIA,IADA,IAAI/3B,EAAI,GACA+3B,GAAW4mB,GAASxyB,EAAM4L,IACjCA,EAAU3K,MAAMC,KAAKC,YAAYxE,OAAOmB,MAAQjqB,EAChDA,IAED+3B,EAAUA,EAAQ31B,QAAQ,eAAe,IAAIhB,UAAU,EAAG,IAE1D,IAAI6oB,EAAQ00B,GAASxyB,EAAM9f,GACvBqe,EAASyB,EAAKiD,GAAG,UAMrB,GAJAnF,EAAM5d,KAAO0rB,EACV5L,EAAKsvB,cAAgBpvC,IACvB8f,EAAKsvB,aAAe1jB,GAElBrN,EACSA,EAAO8M,QAAQnrB,GACrB6S,MAAQ6Y,EACbrN,EAAOxD,KAAKm4B,SAAShzC,EAAK0rB,GAC1BrN,EAAOlJ,QAAQuW,GAGhB5L,EAAKoS,OAAO5X,WAAWta,EAAM0rB,GAC7B5L,EAAK6D,UAAU,gBAAiB,CAAC3jB,EAAM0rB,GAzBlB,CA0BtB,CAyBA,SAASwU,GAAapgB,EAAM9f,EAAMoiB,EAAK0wB,GACtChzB,EAAKkN,OAAOlX,MAAMsM,EAAI4K,OAAQhtB,GAE9B+gB,MAAMgH,OAAO3F,EAAK,CACjB+P,OAAQ,GACR5R,QAAS,GACT0yB,QAAS,KAGV,IAAMlzC,EAAO+f,EAAKoS,OAAOpW,QAAQ9b,GAC3B6a,EAAOuH,EAAIvH,KAAKpiB,KAAI,SAAA+uB,GACzB,IAAM0rB,EAAenyB,MAAM6J,YAAYpD,EAAI,KAAkB,OAAXA,EAAI,GAEtD,GAAGsrB,EAAY,CACd,GAAGI,EACF1rB,EAAI,GAAK,OACL,CACJ,IAAM2rB,EAAY,YACE,iBAAV3rB,EAAI,IAAkB2rB,EAAUjtC,KAAKshB,EAAI,MAElDA,EAAI,GAAKA,EAAI,GAAGzxB,QAAQo9C,EAAW,eAErC,CAEA,IAAM/1B,EAAOuiB,GAAS7f,EAAMsC,EAAKoF,GAEjCA,EAAI,GAAKpK,EAAKvK,MACd2U,EAAI,GAAKA,EAAI,IAAM,GACnBA,EAAI,GAAKpK,EAAKqK,KAEd2rB,GAAY5rB,EAAKpF,QAEb,GAAG8wB,EACP,KAAA,wBAAA/+C,OAA8Bk5B,GAAYrtB,GAAK7L,KAAAA,OAAIg4B,GAAO3E,EAAI,KAAGrzB,OAAGqzB,EAAI,IAEzE,MAAO,CAAEA,EAAI,GAAG,EAAGA,EAAI,GAAG,EAAG,CAC5B3U,MAAO2U,EAAI,GACXC,KAAMD,EAAI,GACV1C,MAAO0C,EAAI,GACX3L,QAASqhB,GAAY,CAAExE,IAAKiF,GAAkBvb,EAAKoF,IAAQ,UAAY,EAAI,GAE7E,IAEAznB,EAAK+V,MAAM+E,GAAM,EAClB,CAEO,SAASu4B,GAAYh2B,EAAMvC,EAAMw4B,GACvC,IAAMC,EAAoB,QAAXl2B,EAAK,GACpB,GAAGk2B,GAAUD,EAAO,CACnB,IAAMpS,EAA6B,iBAAX7jB,EAAK,GAEvBm2B,EAAOF,GAAUpS,GAAY,iBAAiB/6B,KAAKkX,EAAK,IAExDo2B,EAAkBp2B,EAAK,GAAKoK,GAAS3M,EAAKsX,QAAQ,SAAArN,GAAK,OAAIA,EAAM,IAAM1H,EAAK,EAAE,IAAI,KAClF8V,EAAWsgB,EAAkBjhB,GAAcihB,EAAgB,IAAM,GAEjEpU,EAASkU,GAAUz4B,EAAKo4B,QAAUzrB,GAAS3M,EAAKo4B,SAAS,SAAA7T,GAAM,OAAIA,EAAO,IAAMhiB,EAAK,IAAMgiB,EAAO,IAAMhiB,EAAK,EAAE,IAAI,KAEzH,GAAIk2B,KAAYE,IAAoBtgB,EAAS5V,SAAYi2B,EAAK,CAC7D,IAAIjhB,EAAQ,CAAA,EAETihB,GACFn2B,EAAK,GAAK,YAAco2B,EAAkB,IAAIp2B,EAAK,GAAK,IACxDkV,EAAQ,CAAE3T,MAAO,UAAWM,UAAW,cAEhCgiB,GAAY,YAAY/6B,KAAKkX,EAAK,KACzCA,EAAK,GAAK,iBAAmBo2B,EAAkB,IAAIp2B,EAAK,GAAK,IAC7DkV,EAAMhV,OAASF,EAAK,GAAG,OACvBvC,EAAK0F,QAAQjoB,KAAK,CAACg6B,EAAMhV,OAAQyD,MAAMC,KAAKC,YAAYV,QAAQE,eAGhErD,EAAK,GAAK,iBAAmBo2B,EAAkB,IAAIp2B,EAAK,GAAK,IAC7DkV,EAAMhV,OAAS,QAGbg2B,IAAWlU,IACTvkB,EAAKo4B,UACRp4B,EAAKo4B,QAAU,IAChBp4B,EAAKo4B,QAAQ36C,KAAK,CAAC8kB,EAAK,GAAIA,EAAK,GAAI,CAACgiB,OAAQ,iBAG3C5X,GAAS3M,EAAKsX,QAAQ,SAAArN,GAAK,OAAIA,EAAM,IAAM1H,EAAK,EAAE,KACrDvC,EAAKsX,OAAO75B,KAAK,CAChB8kB,EAAK,GACL0V,GAAY,CAACR,MAAOvR,MAAMgH,OAAOmL,EAAUZ,GAAO,MAErD,CACD,CACD,CAoBO,SAASkd,GAAQ1vB,EAAMsC,EAAK0wB,GAC9B1wB,IAAKA,EAAM,CAACvH,KAAK,KACjBuH,EAAI/D,SACP+D,EAAMqxB,GAASrxB,IAGhBtC,EAAKsvB,aAAe,GACpBtvB,EAAKsS,QAAUhQ,EAAI/D,OACnByB,EAAKoS,OAAS,IAAIwhB,GAAU,CAACxgC,OAAQ4M,EAAKuB,OAAOnO,SAGjDkP,EAAI/D,OAAOhmB,SAAQ,SAAAulB,GAClBkC,EAAKoS,OAAOjW,QAAQ2B,EAAM5d,KAC3B,IAEAoiB,EAAI/D,OAAOhmB,SAAQ,SAAAulB,GAClB,IAAMkM,EAAUlM,EAAMkM,QAChB6pB,EAAY/1B,EAAM5d,KAExBkgC,GAAapgB,EAAM6zB,EAAW7pB,EAASgpB,EACxC,IAxbM,SAAehzB,EAAMsC,GAC3B,IAAMuwB,EAAO7yB,EAAKiD,GAAG,UACrB,GAAI4vB,EAAK,CACRA,EAAKZ,WACL,IAAM9+B,EAAM,GACZmP,EAAI/D,OAAOhmB,SAAQ,SAASulB,GAC3B3K,EAAI3a,KAAK,CAAC0e,GAAG4G,EAAM5d,KAAM6S,MAAO+K,EAAM5d,MACvC,IACA2yC,EAAK78B,MAAM7C,GACXy/B,GAAY5yB,EACb,CACD,CA+aCzI,CAAMyI,EAAMsC,GACZyf,GAAK/hB,EAAM0yB,GAAW1yB,GAAM,GAAG9f,KAChC,CAEO,SAASyzC,GAASrxB,GACxB,MAAO,CACN/D,OAAO,CAAC,CACPre,KAAM+gB,MAAMC,KAAKC,YAAYxE,OAAOmB,MAAQ,EAC5CkM,QAAS1H,IAGZ,CAEO,SAASyf,GAAK/hB,EAAM9f,GAC1B,GAAIA,GAAQ8f,EAAKsvB,cAEdtvB,EAAK6D,UAAU,oBAAqB,CAAC3jB,IAAO,CAC1C8f,EAAKsvB,eACRkD,GAASxyB,EAAMA,EAAKsvB,cAActlB,QAAUhK,EAAKlH,aAElDkH,EAAKsvB,aAAepvC,EACpB,IAAMoiB,EAAMkwB,GAASxyB,EAAM9f,GAAM8pB,QAEjChK,EAAK0S,OAAS1S,EAAKoS,OAAOpW,QAAQ9b,GAElCmV,GAAQ2K,EAAMsC,GAEdtC,EAAK6D,UAAU,mBAAoB,CAAC3jB,GACrC,CACD,CAEO,SAASsyC,GAASxyB,EAAM9f,GAC9B,OAAOwnB,GAAS1H,EAAKsS,SAAS,SAAAp5B,GAAC,OAAIA,EAAEgH,MAAQA,IAC9C,CAEO,SAASgiC,GAAUliB,EAAMlC,GAE/B,MAAsB,WADtBA,EAAQ00B,GAASxyB,EAAMlC,IACVoI,OAAoC,cAAfpI,EAAMoI,KACzC,CAWA,SAAS7Q,GAAQ2K,EAAMsC,GACtB,IAEmGwxB,EAAAxtB,GAAhFoB,GAFN6a,GAAaviB,GAEgBsC,EAAIqN,MAAO3P,EAAKuB,OAAOkF,SAAUzG,EAAKuB,OAAOwyB,aAAY,GAA9Fj0B,EAAIg0B,EAAA,GAAE3xB,EAAI2xB,EAAA,GAEXh0B,GAAQE,EAAKuB,OAAOkF,UAAYtE,GAAQnC,EAAKuB,OAAOwyB,cACvD/zB,EAAKuB,OAAOkF,SAAW3G,EACvBE,EAAKuB,OAAOwyB,YAAc5xB,EAC1BnC,EAAKg0B,eAGNrnB,GAAgBxK,GAEhBnC,EAAK6D,UAAU,UAAW,IAE1B7D,EAAK6L,eAAgB,EACrB7L,EAAK6D,UAAU,cAAe,CAACvB,IAC/BtC,EAAK6L,eAAgB,EAErB7L,EAAKgU,OAAO3e,UACT2K,EAAKuB,OAAO0yB,WACdj0B,EAAKiD,GAAG,UAAU5N,SACpB,CC3lBA,SAASyD,GAAUkH,EAAMjF,EAAMm5B,GAW9B,IAVA,IAAMzU,EAAQ,GACR9W,EAAO3I,EAAKiD,GAAG,SACfpD,EAAU8I,EAAKqmB,WAAWxT,MAC1BA,EAAQ7S,EAAK5N,KAAKygB,MAElBjL,EAAO2jB,GAAWl0B,EAAK4U,MAEvBuf,EAAWxrB,EAAKpH,OAAO+G,YACvB8rB,EAAYzrB,EAAKpH,OAAOgH,UAErB10B,EAAI,EAAGA,EAAIgsB,EAAQzrB,OAAQP,IAAI,CACvC,IAAM4lB,EAAQ9lB,KAAKyG,KAAKuuB,EAAK0rB,gBAAgBx0B,EAAQhsB,IAAI4lB,MAAQ8W,GAC7D9W,GAASA,GAAS06B,GACrB1U,EAAMjnC,KAAK,CAAC,EAAG3E,EAAG4lB,GACpB,CAEA,IAAK,IAAI5lB,EAAI,EAAGA,EAAI2nC,EAAMpnC,OAAQP,IAAI,CACrC,IAAM6lB,EAAS/lB,KAAKyG,KAAKuuB,EAAK0C,QAAQmQ,EAAM3nC,IAAIsgB,QAAUoc,GACtD7W,GAAUA,GAAU06B,GACvB3U,EAAMjnC,KAAK,CAAU,EAATgjC,EAAM3nC,GAAM,EAAG6lB,GAC7B,CAEAqB,EAAK0kB,MAAQA,CACd,CAEO,SAASxB,GAAKje,EAAMjF,GAC1B,IAAIwV,EAAO,EACRxV,EAAKmF,OAASnF,EAAKmF,MAAMqQ,OAC3BA,EAAOxV,EAAKmF,MAAMqQ,MAMnB,IAJA,IAAM5H,EAAO3I,EAAKiD,GAAG,SACfkxB,EAAWxrB,EAAKpH,OAAO+G,YACvB8rB,EAAYzrB,EAAKpH,OAAOgH,UAEtB10B,EAAI,EAAGA,GAAKmsB,EAAKuB,OAAOkF,SAAU5yB,IAAI,CACjCmsB,EAAKiD,GAAG,SAASoI,QAAQx3B,GACjCsgB,QAAUigC,EAAU7jB,CACzB,CAEA,IAAMhI,GAAiC,YAApBtH,MAAMgB,KAAKC,OAA2C,QAApBjB,MAAMgB,KAAKC,MAAkB,GAAK,IAAMqO,EACvF+jB,EAAQt0B,EAAKu0B,UAAU,SAC7BD,EAAM76B,MAAQ,GAAK8W,EACnB+jB,EAAM5H,OAAO,GAAGhzB,OAAS6O,EAEzB,IAAI,IAAI10B,EAAI,EAAGA,GAAKmsB,EAAKuB,OAAOwyB,YAAalgD,IAAI,CAChD,IAAMk5B,EAAM/M,EAAKu0B,UAAU1gD,GAC3Bk5B,EAAI2f,OAAO,GAAGhzB,OAAS6O,EACvBwE,EAAItT,MAAQ06B,EAAS5jB,CACtB,CAEA,GAAIxV,EAAK0kB,MACR,IAAK,IAAI5rC,EAAE,EAAGA,EAAEknB,EAAK0kB,MAAMrrC,OAAQP,IAAI,CACtC,IAAM4hB,EAAOsF,EAAK0kB,MAAM5rC,GACxB,GAAY,EAAR4hB,EAAK,IAAS,EAAE,CACnB,IAAM4D,EAAM2G,EAAKiD,GAAG,SAASoI,QAAQ5V,EAAK,IACvC4D,IAAKA,EAAIlF,QAAUsB,EAAK,GAAG8a,EAC/B,KAAO,CACN,IAAMxD,EAAM/M,EAAKu0B,UAAU9+B,EAAK,IAC7BsX,IAAKA,EAAItT,MAAQhE,EAAK,GAAG8a,EAC7B,CACD,CAGDvQ,EAAK3K,SAAQ,EACd,CAEO,SAASm/B,GAAUx0B,EAAMk0B,GAC/B,IAAMn5B,EAAO,CAACmF,MAAM,CAACqQ,KAAKvQ,EAAK4U,QAC/B9b,GAAUkH,EAAMjF,EAAMm5B,GACtBjW,GAAKje,EAAMjF,EACZ,CA4DA,SAAS05B,GAAiBz0B,EAAM3G,EAAKoE,GACpC,IAAGuC,EAAK6L,cAAR,CAGA,IAAM7G,EAAQkN,GAASlS,EAAM,CAAC3G,IAAIA,EAAKoE,OAAOA,IAG9C,GAAIuH,GAASA,EAAMwN,MAAMxT,KAAK,CAC7B,IAAM2J,EAAO3I,EAAKgU,OACZP,EAAO9K,EAAK0C,QAAQhS,GACtBK,EAAS+Z,EAAKtf,SAAWwU,EAAKpH,OAAOgH,UAEzCI,EAAK+rB,YAAW,SAAS3nB,EAAKxL,GAC7B,IAAMyD,EAAQkN,GAASlS,EAAM,CAAC3G,IAAIA,EAAKoE,OAAOsP,IAE9C,GAAG/H,GAASA,EAAMwN,OAA8B,SAArBxN,EAAMwN,MAAMxT,KAAgB,CACtD,IAII21B,EAJAt3B,EAAOhK,KAAKuhC,QAAQv7B,EAAK0T,GACzB+G,EAAYvS,EAAO9H,MAEjBsF,EAAO4J,EAAKhP,QAAQN,EAAK0T,GAG/B,GAAGhO,EAAK,CACP,IAAMwgB,EAAO5W,EAAKksB,YAAY,CAACx7B,IAAI0F,EAAK,GAAItB,OAAOsB,EAAK,KACxD+U,EAAYyL,EAAKrL,YACjBygB,EAAapV,EAAKpL,YACnB,EAEGnU,EAAKqhB,cAAchoB,EAAK0T,IAAQ/M,EAAK80B,cAAcz7B,EAAK0T,MAC1D+G,GAAa,IAEd,IAAIihB,EAAalhB,GAAY7T,EAAM3C,EAAM2H,EAAM9N,GAAI4c,GAAWpa,OAE3Di7B,IACFI,EAAaJ,GAAcI,EAAa,EAAIA,EAAaJ,EAAaj7B,GAEvEA,EAAS/lB,KAAKsT,IAAIyS,EAAQq7B,EAC3B,CACD,IAEAthB,EAAKtf,QAAWuF,CACjB,CAvCC,CAwCF,2CA/NO,SAAcsG,GAEpB,GAAIA,EAAKuB,OAAOyzB,WAAW,CAC1B,IAAIrsB,EAAO3I,EAAKiD,GAAG,SACnB0F,EAAKyd,OAAO,YAAa,CAAE6O,YAAY,EAAMx/B,KAAM,KACnDkT,EAAKyd,OAAO,eAAgB,CAAE6O,YAAY,EAAMx/B,KAAM,KACtDkT,EAAKyd,OAAO,kBAAkB,GAE9Bzd,EAAK5E,YAAY,eAAe,SAAC7M,GAChC8I,EAAKiD,GAAG,SAASiyB,oBACjBr3B,GAAKmC,EAAM,QAAS,CAAE3G,IAAKnC,EAAIuG,OAAQ,EAAGhI,KAAMuK,EAAKiD,GAAG,SAASoI,QAAQnU,GAAI/C,QAASlU,KAAM+f,EAAKiM,kBAClG,IACAtD,EAAK5E,YAAY,kBAAkB,SAAC7M,GACnC8I,EAAKiD,GAAG,SAASiyB,oBACjBr3B,GAAKmC,EAAM,QAAS,CAAE3G,IAAK,EAAGoE,OAAQvG,EAAIzB,KAAMuK,EAAKu0B,UAAUr9B,GAAIuC,MAAOxZ,KAAM+f,EAAKiM,kBACtF,IAGAjM,EAAK+D,YAAY,UAAU,SAAC4D,EAAMtO,EAAKoE,EAAQ1K,GACnC,YAAR4U,GAA8B,YAARA,GAwG5B,SAAqB3H,EAAM3G,EAAKoE,EAAQ1K,GACvC,IAAMmN,EAAQF,EAAKiD,GAAG,SACnB5J,GACF6G,EAAMmL,QAAQhS,GAAKlF,QAAUpB,EAC7B8K,GAAKmC,EAAM,QAAS,CAAE3G,IAAIA,EAAKoE,OAAQ,EAAGhI,KAAM1C,EAAO9S,KAAM+f,EAAKiM,oBAGlE/L,EAAMi1B,eAAe13B,EAAQ1K,GAG9BmN,EAAMg1B,mBACP,CAlHIE,CAAYp1B,EAAM3G,EAAKoE,EAAQ1K,EACjC,GACD,CAEAiN,EAAK+D,YAAY,eAAe,SAAChJ,GAChCkjB,GAAKje,EAAKjF,EACX,IAGAiF,EAAK+D,YAAY,mBAAmB,SAAChJ,GACpCjC,GAAUkH,EAAKjF,EAChB,IAEAiF,EAAK+D,YAAY,YAAY,SAAC+E,EAAQ9zB,GACxB,sBAAV8zB,GAsGL,SAAwB9I,EAAM9f,EAAMiuB,EAAKpT,EAAMyK,GAC9C,IAAI3xB,EACH4rC,EAAQ1kB,EAAK0kB,MACb4V,EAAS,GAEV,GAAGlnB,EAAI,CACN,IAAIt6B,EAAI4rC,EAAMrrC,OAAS,EAAGP,GAAK,EAAGA,IAAI,CACrC,IAAAyhD,EAAAhvB,GAA0BmZ,EAAM5rC,GAAE,GAA7BwlB,EAAGi8B,EAAA,GAAE73B,EAAM63B,EAAA,GAAE7/B,EAAI6/B,EAAA,GAEtB,GAAGj8B,GAAe,OAARnZ,GAAiBmZ,GAAOmM,EAAMnM,IAAI,CAC3C,GAAG8U,EAAM,GAAK9U,EAAMmM,EAAMnM,IAAM8U,EAC/B,SACDknB,EAAO78C,KAAK,CAAK,EAAJ6gB,EAAQ8U,EAAK1Q,EAAQhI,GACnC,MACK,GAAGgI,GAAkB,UAARvd,GAAoBud,GAAU+H,EAAM/H,OAAO,CAC5D,GAAG0Q,EAAM,GAAK1Q,EAAS+H,EAAM/H,OAAS0Q,EACrC,SACDknB,EAAO78C,KAAK,CAAC6gB,EAAY,EAAPoE,EAAW0Q,EAAK1Y,GAClC,MAEA4/B,EAAO78C,KAAKinC,EAAM5rC,GACpB,CAEA,GAAGs6B,EAAM,EAER,GAAW,UAARjuB,EACF,IADmB,IAAAyrB,EAAA,SAAA4pB,GAElB,IAAM9/B,EAAOiS,GAAS+X,GAAO,SAAA/X,GAAG,OAAIA,EAAI,IAAMlC,EAAM/H,OAAS5pB,KAC1D4hB,GACF4/B,EAAO78C,KAAK,CAAC,EAAGgtB,EAAM/H,OAAS5pB,EAAG4hB,EAAK,MAHjC5hB,EAAI,EAAGA,EAAIs6B,EAAKt6B,IAAG83B,EAAA4pB,QAO3B,IADG,IAAAC,EAAA,SAAAC,GAEF,IAAMhgC,EAAOiS,GAAS+X,GAAO,SAAA/X,GAAG,OAAIA,EAAI,IAAMlC,EAAMnM,IAAMxlB,KACvD4hB,GACF4/B,EAAO78C,KAAK,CAACgtB,EAAMnM,IAAMxlB,EAAG,EAAG4hB,EAAK,MAH9B5hB,EAAI,EAAGA,EAAIs6B,EAAKt6B,IAAG2hD,EAAAC,GAQ7B16B,EAAK0kB,MAAQ4V,CACd,CACD,CAhJGK,CAAe11B,EAAMhrB,EAAEkL,KAAMlL,EAAEm5B,IAAKn5B,EAAE+lB,KAAM/lB,EAAEwwB,MAChD,IAEAxF,EAAK+D,YAAY,uBAAuB,SAAS1K,EAAKoE,EAAQpqB,EAAGC,IAC5DA,GAAsB,SAAjBA,EAAEk/B,MAAMxT,MAAqB3rB,GAAKA,EAAEm/B,MAAMxT,MAAQ1rB,EAAEk/B,MAAMxT,aAC3DgB,EAAKgU,OAAO3I,QAAQhS,GAAKlF,OAElC,IACA6L,EAAK+D,YAAY,iBAAiB,SAAC3wB,EAAEkB,GAAC,OAAKmgD,GAAiBz0B,EAAK5sB,EAAEkB,MACnE0rB,EAAK+D,YAAY,gBAAgB,SAAC3wB,EAAEkB,EAAEsE,EAAE5D,GACpCA,GAAKgrB,EAAKiM,kBACZwoB,GAAiBz0B,EAAK5sB,EAAEkB,EAC1B,GACD,yBCjDaqhD,GAAU,aAsBhB,SAASC,GAAS51B,EAAM3G,EAAKoE,EAAQ0T,EAAMsD,EAAQx1B,EAAU42C,GACnE,IAAM7pB,EAAchM,EAAKiM,iBACrBhtB,IACHA,EAAW+sB,GAEZ,IAAM9L,EAAQF,EAAKiD,GAAG,SACtB,GAAmB,WAAf4H,GAAOxR,IAAsC,WAAlBwR,GAAOpN,GACrC6H,GAAMnS,KAAI,YA0CZ,SAAwBqS,EAAOC,EAAKoB,EAAS3D,GAC5C,IAAK,IAAIhqB,EAAIssB,EAAMnM,IAAKngB,GAAKusB,EAAIpM,IAAKngB,IACrC,IAAK,IAAIzD,EAAI+vB,EAAM/H,OAAQhoB,GAAKgwB,EAAIhI,OAAQhoB,IAC3CoxB,EAAQrC,KAAanR,KAAMna,EAAGzD,EACjC,CA7CGqgD,CAAez8B,EAAKoE,GAAQ,SAASpE,EAAKoE,GACzCm4B,GAAS51B,EAAM3G,EAAKoE,EAAQ0T,GAAM,EAAMlyB,GAAU,EACnD,GACD,SAGA,GADAkyB,GAAkB,IAATA,EACNlyB,GAAY+sB,EAAY,EACXhM,EAAK+1B,OAAO18B,GAAO2G,EAAK+1B,OAAO18B,IAAQ,IAC/CoE,GAAU0T,EACbA,EACHjR,EAAM81B,WAAW38B,EAAKoE,EAAQk4B,IAAS,GAEvCz1B,EAAM+1B,cAAc58B,EAAKoE,EAAQk4B,IAAS,EAC5C,KACI,CACH,IAAM11C,EAAOmP,GAAK4Q,EAAKsS,SAAS,SAAAxU,GAAK,OAAIA,EAAM5d,MAAQjB,KACvD,GAAGgB,EAAK,CACP,IAAMi2C,EAASj2C,EAAK+pB,QAAQksB,OAC5B,GAAGA,EAAO,CACT,IAAMA,EAASj2C,EAAK+pB,QAAQksB,OACtB1pB,EAAQjT,GAAU28B,GAAQ,SAAA54B,GAAI,OAAIA,EAAK,IAAMjE,GAAOiE,EAAK,IAAMG,KAClE0T,GACW,GAAV3E,GACF0pB,EAAO19C,KAAK,CAAC6gB,EAAKoE,KAEF,GAAV+O,GACP0pB,EAAOj+B,OAAOuU,EAAO,EACtB,MACQ0pB,GAAU/kB,IAClBlxB,EAAK+pB,QAAQksB,OAAS,CAAC,CAAC78B,EAAKoE,IAC/B,CACD,CAGGo4B,GACH71B,EAAK6D,UAAU,WAAY,CAAC,OAAQ,CAAExK,IAAAA,EAAKoE,OAAAA,EAAQ1K,OAAQoe,EAAMgR,SAAUhR,KAEvEsD,GACJvU,EAAM7K,SACR,CAQO,SAAS8gC,GAAan2B,EAAM3G,EAAKoE,EAAQxd,GAC/C,OAAIA,GAAQA,GAAQ+f,EAAKiM,qBAGxBhsB,EAAOmP,GAAK4Q,EAAKsS,SAAS,SAAAxU,GAAK,OAAIA,EAAM5d,MAAQD,QACtCA,EAAK+pB,QAAQksB,WACd9mC,GAAKnP,EAAK+pB,QAAQksB,QAAQ,SAAA54B,GAAI,OAAIA,EAAK,IAAMjE,GAAOiE,EAAK,IAAMG,KAJlEuC,EAAK+1B,OAAO18B,IAAM2G,EAAK+1B,OAAO18B,GAAKoE,KAAgB,CAO5D,2CApFO,SAAcuC,GACpBA,EAAK+1B,OAAS,GACd/1B,EAAK+D,YAAY,WAAW,WAAA,OAc7B,SAAe/D,GACdA,EAAK+1B,OAAS,EACf,CAhBmCx+B,CAAMyI,MACxCA,EAAK+D,YAAY,UAAU,SAAC4D,EAAMtO,EAAKoE,EAAQ0T,GACjC,SAATxJ,GAAiBiuB,GAAS51B,EAAM3G,EAAKoE,IAAU0T,GAAM,EAC1D,IACAnR,EAAK+D,YAAY,aAAa,SAACqyB,GAChB,cAAVA,EAAGl/B,IAgGT,SAAc8I,GACb,IAAMq2B,EAAQr2B,EAAKiD,GAAG,SAASoO,gBAC/B,GAAIglB,EAAM,CACT,IAAMllB,EAAOnR,EAAKm2B,aAAaE,EAAM7wB,MAAMnM,IAAKg9B,EAAM7wB,MAAM/H,QAC5DuC,EAAK41B,SAASS,EAAM7wB,MAAO6wB,EAAM5wB,KAAM0L,EACxC,CACD,CArGGmlB,CAAKt2B,EACP,IACAA,EAAK+D,YAAY,YAAY,SAAC+E,EAAQ9zB,GACxB,sBAAV8zB,GAoGL,SAAwB9I,EAAM9f,EAAMiuB,EAAKpT,EAAMyK,GAC9C,IAAI0wB,EAASn7B,EAAKm7B,OACjBriD,EAAIqiD,EAAO9hD,OAEZ,GAAG+5B,EACF,KAAMt6B,KAAI,CACT,IAAA0iD,EAAAjwB,GAAmB4vB,EAAOriD,GAAE,GAAvBwlB,EAAGk9B,EAAA,GAAC94B,EAAM84B,EAAA,IACZl9B,GAAe,OAARnZ,GAAiBmZ,GAAOmM,EAAMnM,KAAOoE,GAAkB,UAARvd,GAAoBud,GAAU+H,EAAM/H,UAChF,OAARvd,EACCmZ,EAAMmM,EAAMnM,IAAM8U,EACrB+nB,EAAOj+B,OAAOpkB,EAAE,GAEhBqiD,EAAOriD,GAAG,GAAS,EAAJwlB,EAAQ8U,EACN,UAARjuB,IACNud,EAAS+H,EAAM/H,OAAS0Q,EAC3B+nB,EAAOj+B,OAAOpkB,EAAG,GAEjBqiD,EAAOriD,GAAG,GAAY,EAAP4pB,EAAW0Q,GAG9B,CAEF,CAzHGunB,CAAe11B,EAAMhrB,EAAEkL,KAAMlL,EAAEm5B,IAAKn5B,EAAE+lB,KAAM/lB,EAAEwwB,MAChD,GACD,uBAkFO,SAAcxF,EAAKjF,GACzB,IAAMm7B,EAASn7B,EAAKm7B,OACpB,GAAGA,EACF,IAAI,IAAIriD,EAAI,EAAGA,EAAIqiD,EAAO9hD,OAAQP,IACjC+hD,GAAS51B,EAAMk2B,EAAOriD,GAAG,GAAGqiD,EAAOriD,GAAG,IAAI,GAAM,EACnD,mCAfO,SAAmBmsB,EAAKjF,GAC9B,IAAMm7B,EAAS,GACf,IAAI,IAAI78B,KAAO2G,EAAK+1B,OACnB,IAAI,IAAIt4B,KAAUuC,EAAK+1B,OAAO18B,GAC1B2G,EAAK+1B,OAAO18B,GAAKoE,IACnBy4B,EAAO19C,KAAK,CAAC6gB,EAAIoE,IAEpB1C,EAAKm7B,OAASA,CACf,IC3DA,SAASv8B,GAAQqG,EAAM3G,EAAKoE,GAC3B,IAAIgW,EAAOzT,EAAKiD,GAAG,SAAStJ,UAAUN,GACtC,GAAIoa,EACH,OAAOA,EAAKhW,EACd,CAeO,SAAS3E,GAAUkH,EAAMjF,GAC/B,IAAI4U,EAAQ,GACRgd,EAAO3sB,EAAKiD,GAAG,SAAStJ,UAC5B,GAAIgzB,EAAK,CACR,IAAK,IAAI6J,KAAO7J,EAAK,CACpB,IAAItzB,EAAMszB,EAAK6J,GACf,IAAK,IAAIC,KAAOp9B,EAAI,CACnB,IAAI0F,EAAO1F,EAAIo9B,GACf9mB,EAAMn3B,KAAK,CAAK,EAAJg+C,EAAW,EAAJC,EAAO13B,EAAK,GAAIA,EAAK,IACzC,CACD,CAEAhE,EAAK4U,MAAQA,CACd,CACA,OAAO5U,CACR,CAEO,SAASzB,GAAQ0G,EAAM1C,EAAMpkB,EAAGzD,EAAGg/B,EAAQx0B,GAGjD,GAFAA,EAAOA,GAAQ+f,EAAKiM,mBAEhB/yB,EAAE,GAAKzD,EAAE,KAEVg/B,GAAUzU,EAAK6D,UAAU,eAAgB,CAACvG,EAAKjE,IAAKiE,EAAKG,OAAQ,CAACvkB,EAAGzD,GAAIwK,KAAO,CAClF,GAAGA,GAAQ+f,EAAKiM,iBAAiB,CAChC,IAAM3J,EAAMtC,EAAK0S,OAAOha,QAAQ4E,EAAKjE,IAAI,EAAGiE,EAAKG,OAAO,GACpDkF,EAAQL,GAAOA,EAAI0C,OAAW,GAC9B0xB,EAAWC,GAAY32B,EAAM1C,EAAKjE,IAAKiE,EAAKG,QAC5Ci5B,IACH/zB,GAAO,IAAM+zB,GACd12B,EAAKiD,GAAG,SAAS3J,QAAQgE,EAAKjE,IAAKiE,EAAKG,OAAQvkB,EAAGzD,EAAG,KAAMktB,EAC7D,KACI,CACH,IAAM7E,EAAQ00B,GAASxyB,EAAM/f,GAC1B6d,IACEA,EAAMkM,QAAQ2F,QACjB7R,EAAMkM,QAAQ2F,MAAQ,IACvB7R,EAAMkM,QAAQ2F,MAAMn3B,KAAK,CAAC8kB,EAAKjE,IAAKiE,EAAKG,OAAQhoB,EAAGyD,IAEtD,EAoIF,SAAsB8mB,EAAM1C,EAAMpkB,EAAGzD,EAAGwK,GAKvC,IAJA,IAAMoZ,EAAe,EAATiE,EAAKjE,IACXoE,EAAqB,EAAZH,EAAKG,OAChBm5B,GAAW52B,EAAKmG,aAAa9M,EAAKoE,EAAQxd,GAEtCpM,EAAIwlB,EAAKxlB,EAAIwlB,EAAI5jB,EAAG5B,IAC3B,IAAI,IAAI2G,EAAIijB,EAAQjjB,EAAIijB,EAAOvkB,EAAGsB,IAAK,CACtC,IAAMuY,EAAQiN,EAAKmG,aAAatyB,EAAG2G,EAAGyF,GACzB,KAAV8S,GAAiBvY,GAAKijB,GAAU5pB,GAAKwlB,IACpCu9B,IACFA,GAAU,EACV52B,EAAK2G,aAAatN,EAAKoE,EAAQ1K,EAAO9S,IAEvC+f,EAAK2G,aAAa9yB,EAAG2G,EAAG,GAAIyF,GAE9B,CAEF,CAnJE42C,CAAa72B,EAAM1C,EAAMpkB,EAAGzD,EAAGwK,GAE1Bw0B,IACJzU,EAAK6D,UAAU,cAAe,CAACvG,EAAKjE,IAAKiE,EAAKG,OAAQ,CAACvkB,EAAGzD,GAAIwK,IAC9D4d,GAAKmC,EAAM,QAAS,CACnB/f,KAAAA,EACAoZ,IAAIiE,EAAKjE,IAAKoE,OAAQH,EAAKG,OAC3BvkB,EAAAA,EAAGzD,EAAAA,IAGN,CACD,CAEO,SAASqhD,GAAW92B,EAAM1C,EAAMrd,GAEtC,IAAI8e,EAAMyN,EAAO1O,EAEX0V,GAHNvzB,EAAOA,GAAQ+f,EAAKiM,mBAGUjM,EAAKiM,iBAChCuH,EACFzU,EAAOiB,EAAKiD,GAAG,SAAStJ,QAAQ2D,EAAKjE,IAAKiE,EAAKG,SAE/CK,EAAQ00B,GAASxyB,EAAM/f,KACX6d,EAAMkM,QAAQ2F,QACzBnD,EAAQ9E,GAAc5J,EAAMkM,QAAQ2F,OAAO,SAAA5Q,GAAI,OAAIA,EAAK,IAAMzB,EAAKjE,KAAO0F,EAAK,IAAMzB,EAAKG,WAC7E,GAAV+O,IACFzN,EAAOjB,EAAMkM,QAAQ2F,MAAMnD,KAG3BzN,GAAQiB,EAAK6D,UAAU,gBAAiB,CAAEvG,EAAKjE,IAAKiE,EAAKG,OAAQ,CAACsB,EAAK,GAAIA,EAAK,IAAK9e,MACpFuzB,EACFxT,EAAKiD,GAAG,SAAS6zB,WAAWx5B,EAAKjE,IAAKiE,EAAKG,QAE3CK,EAAMkM,QAAQ2F,MAAM1X,OAAOuU,EAAO,GAEnCxM,EAAK6D,UAAU,eAAgB,CAAEvG,EAAKjE,IAAKiE,EAAKG,OAAQ,CAACsB,EAAK,GAAIA,EAAK,IAAK9e,IAC5E4d,GAAKmC,EAAM,QAAS,CACnB3G,IAAIiE,EAAKjE,IAAKoE,OAAQH,EAAKG,OAC3BvkB,EAAE,EAAGzD,EAAE,EAAGwK,KAAAA,IAGb,CAEO,SAAS0Y,GAAS6b,GACxB,IAAIuiB,EAAIC,EAAIC,EAAIC,EAChBD,EAAKC,EAAK,EACVH,EAAKC,EAAK7Z,IAEV,IAAK,IAAItpC,EAAE,EAAGA,EAAE2gC,EAAIpgC,OAAQP,IAAI,CAC/B,IAAIsjD,EAAmB,EAAd3iB,EAAI3gC,GAAG4pB,OACZ25B,EAAgB,EAAX5iB,EAAI3gC,GAAGwlB,IAEhB09B,EAAKpjD,KAAKsJ,IAAIk6C,EAAIJ,GAClBE,EAAKtjD,KAAKsT,IAAIkwC,EAAIF,GAClBD,EAAKrjD,KAAKsJ,IAAIm6C,EAAIJ,GAClBE,EAAKvjD,KAAKsT,IAAImwC,EAAIF,EACnB,CAEA,MAAO,CACN55B,KAAK,CAAEjE,IAAI29B,EAAIv5B,OAAOs5B,GACtB79C,EAAG+9C,EAAGF,EAAG,EACTthD,EAAGyhD,EAAGF,EAAG,EAEX,CAEO,SAASK,GAAWr3B,EAAM3G,EAAKoE,EAAQkF,EAAKpQ,GAClD,IAAMwM,EAAOpF,GAAQqG,EAAM3G,EAAKoE,GAC5BsB,IACCxM,GAC0B,GAAzBwM,EAAK,GAAGjpB,QAAQ6sB,KACnB5D,EAAK,IAAM,IAAM4D,GAElB5D,EAAK,GAAKA,EAAK,GAAG9oB,QAAQ,IAAM0sB,EAAK,IAGxC,CAEA,SAASg0B,GAAY32B,EAAM3G,EAAKoE,GAC/B,IAAIi5B,EAAW,GAKf,OAJG12B,EAAKqhB,cAAchoB,EAAKoE,IAC1Bi5B,EAASl+C,KAAK,aACZwnB,EAAK80B,cAAcz7B,EAAKoE,IAC1Bi5B,EAASl+C,KAAK,aACRk+C,EAAS3hD,KAAK,IACtB,CAgCA,IAAIuiD,GAAe,CAClB,eAAiB,SAASj+B,EAAKoE,EAAQsB,EAAMmS,GAC5C,OAAOA,EAAKzL,IAAIhI,QAAUA,EAAOsB,EAAK,GAAG,CACzC,EACD,gBAAiB,SAAS1F,EAAKoE,EAAQsB,EAAMmS,GAC5C,OAAOA,EAAKzL,IAAIpM,KAAOA,EAAI0F,EAAK,GAAG,CACpC,GA4BM,SAASw4B,GAAYx4B,EAAM+J,EAAQtD,EAAOC,EAAKzF,EAAMjF,EAAMy8B,GACjE,IAAIpjD,EAAyB,OAAhB00B,EAAOxD,MAAiBvG,EAAK,GAAKA,EAAK,GAChD04B,EAA4B,OAAhB3uB,EAAOxD,MAAiB,CAAS,EAARvG,EAAK,GAAc,EAARA,EAAK,GAAKA,EAAK,GAAG,GAAK,CAAS,EAARA,EAAK,GAAc,EAARA,EAAK,GAAKA,EAAK,GAAG,GACrGP,EAA4B,OAAhBsK,EAAOxD,MAAiB,CAACE,EAAMnM,IAAKoM,EAAIpM,KAAO,CAACmM,EAAM/H,OAAQgI,EAAIhI,QAG9E0Q,EAAM3P,EAAU,GAAKA,EAAU,GAAK,EAExCA,EAAU,GAAK7qB,KAAKsT,IAAIuX,EAAU,GAAIi5B,EAAU,IAChDj5B,EAAU,GAAK7qB,KAAKsJ,IAAIuhB,EAAU,GAAIi5B,EAAU,IAEhD,IAAIC,EAAcl5B,EAAU,IAAMi5B,EAAU,GAE5C,GAAGj5B,EAAU,IAAMA,EAAU,GAAG,CAI/B,GAHgB,OAAbsK,EAAO5R,KACTiX,GAA0C,GAAnC3P,EAAU,GAAKA,EAAU,GAAI,IAErB,OAAbsK,EAAO5R,IAAewgC,GAAetjD,GAAU,EAAE+5B,EAAI,CACvD,IAAMsF,EAAO/L,GAAS3M,GAAM,SAAA2M,GAAG,OAAIA,EAAI,IAAM3I,EAAK,IAAM2I,EAAI,IAAM3I,EAAK,MACpE0U,GACF+jB,EAASh/C,KAAKi7B,EAChB,CAEKikB,GAA4B,OAAb5uB,EAAO5R,KAC1B6H,EAAK,GAAqB,UAAhB+J,EAAOxD,MAAoBvG,EAAK,GAAGoP,EAAMpP,EAAK,GACxDA,EAAK,GAAqB,OAAhB+J,EAAOxD,MAAiBvG,EAAK,GAAGoP,EAAMpP,EAAK,GAEvD,CACA,OAAOA,CACR,CAEO,SAAS44B,GAAU33B,EAAMoW,EAAO/c,EAAK0T,EAAK6qB,EAAQC,GAExD,IAAI1jD,EAAI6rB,EAAKgU,OAAOra,QAAQN,EAAK0T,GACjC,GAAGqJ,GAASA,EAAMrX,KAAK,CACtB,IAAIA,EAAOqX,EAAMrX,KAEd1F,GAAe,EAAR0F,EAAK,GAAK84B,EAAUx+B,KAAO0T,GAAe,EAARhO,EAAK,GAAK84B,EAAUp6B,SAE/DuC,EAAKgU,OAAO8jB,SAASz+B,EAAK0T,EAAKhO,EAAK,GAAIA,EAAK,IAAI,SAAChM,EAAOyjC,EAAKC,IAC7DtiD,EAAI6rB,EAAKgU,OAAOra,QAAQ68B,EAAIC,KACtBK,GAAW92B,EAAM,CAAC3G,IAAIllB,EAAE,GAAIspB,OAAOtpB,EAAE,IAC3C,IAAE,GACHmlB,GAAQ0G,EAAM,CAAC3G,IAAIA,EAAKoE,OAAOsP,GAAMhO,EAAK,GAAIA,EAAK,IACrC,IAAX64B,GACFd,GAAW92B,EAAM,CAAC3G,IAAI+c,EAAM/c,IAAKoE,OAAO2Y,EAAMrJ,MAEjD,MACQ54B,GACP2iD,GAAW92B,EAAM,CAAC3G,IAAIllB,EAAE,GAAIspB,OAAOtpB,EAAE,IACvC,gFArSO,SAAc6rB,GACpBA,EAAK+D,YAAY,iBAAiB,SAAC1K,EAAKoE,EAAQuH,GAC/C,IAAIjG,EAAOpF,GAAQqG,EAAM3G,EAAKoE,GAC9B,GAAIsB,EAAK,CACR,IAAI23B,EAAWC,GAAY32B,EAAM3G,EAAKoE,GACtCsB,EAAK,IAAMiG,EAAQA,EAAM9N,GAAK,KAAOw/B,EAAY,IAAMA,EAAY,GACpE,CACD,IAEA12B,EAAK+D,YAAY,eAAe,SAAChJ,IAgClC,SAAeiF,EAAMjF,GACpB,GAAIA,EAAK4U,MACR,IAAK,IAAI97B,EAAI,EAAGA,EAAIknB,EAAK4U,MAAMv7B,OAAQP,IAAK,CAC3C,IAAIkrB,EAAOhE,EAAK4U,MAAM97B,GACtBylB,GAAS0G,EACR,CAAE3G,IAAK0F,EAAK,GAAItB,OAAQsB,EAAK,IACrB,EAARA,EAAK,GACG,EAARA,EAAK,IACL,EAEF,CACF,CA1CE/I,CAAMgK,EAAMjF,EACb,IAEAiF,EAAK+D,YAAY,mBAAmB,SAAChJ,GACpCjC,GAAUkH,EAAMjF,EACjB,IAEAiF,EAAK+D,YAAY,UAAU,SAAC4D,EAAMtO,EAAKoE,EAAQ1K,EAAOglC,GAC1C,QAARpwB,GAA0B,SAARA,IACR,QAARA,IACHowB,GAAUA,GA+Jd,SAAkB/3B,EAAK3G,EAAKoE,EAAO1K,EAAMglC,GACrCA,EACFjB,GAAW92B,EAAK,CAAC3G,IAAKA,EAAKoE,OAAQA,IAGnCnE,GAAQ0G,EAAM,CAAC3G,IAAKA,EAAKoE,OAAQA,GAAS1K,EAAM,GAAIA,EAAM,GAE5D,CArKGilC,CAASh4B,EAAM3G,EAAKoE,EAAQ1K,EAAOglC,GAErC,IAEA/3B,EAAK+D,YAAY,YAAY,SAAC7jB,EAAMshB,GACnC,GAAW,QAARthB,GAAkBshB,EAAQvhB,MAAQ+f,EAAKiM,iBACzCorB,GAAWr3B,EAAMwB,EAAQnI,IAAKmI,EAAQ/D,OAAQk4B,GAASn0B,EAAQ2gB,eAC3D,GAAW,sBAARjiC,GAgKV,SAAwB8f,EAAM9f,EAAMiuB,EAAKpT,EAAMyK,GAC9C,IAAImK,EAAQ5U,EAAK4U,MACjB,GAAGxB,EACF,IAAI,IAAIt6B,EAAI87B,EAAMv7B,OAAO,EAAEP,GAAI,EAAEA,IAAI,CACpC,IAAAokD,EAAA3xB,GAAmBqJ,EAAM97B,GAAE,GAAtBwlB,EAAG4+B,EAAA,GAACx6B,EAAMw6B,EAAA,GAEZ9pB,EAAM,IACG,OAARjuB,GAAiBmZ,GAAOmM,EAAMnM,IAAI8U,EAAI,EACxCA,EAAM3I,EAAMnM,IAAMsW,EAAM97B,GAAG,GACX,UAARqM,GAAoBud,GAAU+H,EAAM/H,OAAO0Q,EAAI,IACvDA,EAAM3I,EAAM/H,OAASkS,EAAM97B,GAAG,MAGrB,OAARqM,GAAiBmZ,GAAMmM,EAAMnM,KAAe,UAARnZ,GAAoBud,GAAU+H,EAAM/H,UAC1EkS,EAAM97B,GAAG,GAAc,OAARqM,EAAkB,EAAJmZ,EAAQ8U,EAAI9U,EACzCsW,EAAM97B,GAAG,GAAa,UAARqM,EAAwB,EAAPud,EAAW0Q,EAAI1Q,EAEhD,CAEF,CAlLGi4B,CAAe11B,EAAMwB,EAAQthB,KAAMshB,EAAQ2M,IAAK3M,EAAQzG,KAAMyG,EAAQgE,YAClE,GAAW,iBAARtlB,EACP,OA2LH,SAA0B8f,EAAM3G,EAAKoE,EAAQyT,EAAMC,GAClD,IAAIpS,EAAOpF,GAAQqG,EAAM3G,EAAKoE,GAC9B,SAAOsB,IAAMu4B,GAAanmB,KAAMmmB,GAAanmB,GAAM9X,EAAKoE,EAAQsB,EAAMmS,EACvE,CA9LUgnB,CAAiBl4B,EAAMwB,EAAQnI,IAAKmI,EAAQ/D,OAAQ+D,EAAQ0P,KAAM1P,EAAQ2P,KACnF,GACD,0DCnCO,SAAS7S,GAAM0B,EAAMwB,EAAS22B,GACpC,IAAMC,EAAQ,GACR5c,EAAQ,CAAA,EACRgO,EAASxpB,EAAKsvB,aAEdxd,EAiEP,SAAoB9R,EAAMwB,EAASgoB,EAAQ4O,EAAO5c,GACjD,IAAM6c,EAAMp3B,MAAM6Q,KAAK4D,OAAO,MAAO,CAAE6W,MAAQ,uBAE/C/qB,EAAQ82B,YAAc,EACtB92B,EAAQkrB,OAASlrB,EAAQkrB,SAAU,EACnClrB,EAAQ9rB,OAAOurB,MAAM6J,YAAYtJ,EAAQ9rB,OAAe8rB,EAAQ9rB,KAChE8rB,EAAQ+2B,aAAat3B,MAAM6J,YAAYtJ,EAAQ+2B,aAAqB/2B,EAAQ+2B,WAC5E,IAAMC,EAAYx4B,EAAK6R,OACjB4mB,EAAWC,GAAYl3B,GAEzBjD,EAASiD,EAAQjD,OAIfxD,EAAOyG,EAAQzG,KAEjBwD,GAAkB,WAARxD,GAA6B,aAARA,EAEV,iBAAVwD,EACdA,EAAS,CAACA,IACQ,IAAXA,GAA2B,OAARxD,IAC1BwD,EAASyB,EAAKsS,QAAQ35B,KAAI,SAAAmlB,GAAK,OAAIA,EAAM5d,SAJzCqe,EAAS,CAACirB,GAsGX,OAhGAjrB,EAASA,EAAOjZ,QAAO,SAAAwY,GAAK,OAAIokB,GAAUliB,EAAMlC,MAEhDS,EAAOhmB,SAAQ,SAAC2H,EAAMrM,GACrBmsB,EAAK6R,OAAS2mB,EAAU,IAAI3kD,EAC5B,IAAM80B,EAAO3I,EAAKiD,GAAG,SAErBjD,EAAKqmB,UAAUnmC,GACf,IAAMg0C,EAAUl0B,EAAK4U,MACrB5U,EAAKghB,YAAW,WAAA,OAAMhhB,EAAKuQ,KAAK,MAEhC,IAAMqB,EAAS,OAAO5R,EAAK6R,OAE3B7R,EAAK24B,QAAS,EACd,IAAMz4B,EAAQyI,EAAKiwB,aAAap3B,GAAS,UAClCxB,EAAK24B,OAEZ,IAAME,EAAM34B,EAAMgF,WAElB,GAAG2zB,EAAI,CAON,IANA,IAAAC,EAAAxyB,GAAuBuyB,EAAIE,SAAQ,GAA5BrM,EAAMoM,EAAA,GAAEr3B,EAAIq3B,EAAA,GAEbE,EAAWtM,EAAOuM,kBAClBpF,EAAYryB,EAAQ+2B,WAAa,GAAK,EACxCW,EAAcrF,EAET1/C,EAAI,EAAGA,GAAK6kD,EAAU7kD,IAC9B+kD,GAAevwB,EAAK0C,QAAQl3B,GAAGggB,SAAWwU,EAAKpH,OAAOgH,UAEvD,GAAG2wB,EAAcT,EAAS/+B,OAAS,EAClC,IAAK,IAAI7lB,EAAImlD,EAAW,EAAGnlD,GAAK,EAAGA,IAC/B4tB,EAAKyD,WACPjE,MAAM6Q,KAAKqnB,aAAazM,EAAOqM,SAASllD,GAAI4tB,EAAKyD,YAEjDzD,EAAKwS,YAAYyY,EAAOqM,SAASllD,IAGpC,GAAGggD,EAAU,CACZ,IAAMuF,EAAYn4B,MAAM6Q,KAAK4D,OAAO,KAAM,CAAC6W,MAAM,0BAAyBl4C,OAAAA,OAAS6L,aAEhFwsC,EAAOxnB,WACTjE,MAAM6Q,KAAKqnB,aAAaC,EAAW1M,EAAOxnB,YAE1CwnB,EAAOzY,YAAYmlB,EACrB,CAEA,IAAM7Z,EAAOrf,EAAMgF,WACfqa,IACAr/B,GAAQspC,GACVvoB,MAAM6Q,KAAKunB,UAAU9Z,EAAM,OAAOiZ,GACnCv3B,MAAM6Q,KAAKwnB,OAAO/Z,EAAM3N,IAGzBymB,EAAIpkB,YAAY/T,EACjB,CAEA,GAAGsB,EAAQ+3B,SAAQ,CAAA,IAAA5tB,EAAAA,WAEjB,IAAM6tB,EAAYx5B,EAAKo4B,MAAMqB,MAAMviC,GACnC,GAAqB,SAAlBsiC,EAAU7xB,KAAgB,CAC5B,IAAM+xB,EAAMz4B,MAAM6Q,KAAK4D,OAAO,MAAO,CACpCikB,IAAKH,EAAUz+B,KACftB,OAAQ+/B,EAAUj4B,OAAO9H,OAAS,KAAK,KACvCC,QAAS8/B,EAAUj4B,OAAO7H,QAAU,KAAK,OAGpCkgC,EAAU34B,MAAM24B,QAAQC,QAC9BzB,EAAM5/C,KAAKohD,GACXF,EAAII,OAAS,WAAA,OAAKF,EAAQG,SAAS,EAEnC1B,EAAIpkB,YAAYylB,EACjB,KACI,CACH,IAAMxN,EAAajrB,MAAMgC,GAAG/L,GAAIqM,UAChC,GAAG2oB,EAAW0M,aAAa,CAC1B,IAAMoB,EAAc9N,EAAW0M,aAAa,CAACnjC,KAAM+L,EAAQ/L,OAAO,GAC/DukC,EAAY3K,MACd7T,EAAM4c,EAAMhkD,QAAUikD,EAAIY,kBAC1Bb,EAAM5/C,KAAKwhD,IAGX3B,EAAIpkB,YAAa+lB,EACnB,MAEC3B,EAAIpkB,YAgBV,SAAwBjU,GACvB,IAAMyB,EAAOzB,EAAKmE,MAAM81B,WAAU,GAG5BC,EAAWl6B,EAAKmE,MAAMg2B,qBAAqB,UACjD,GAAGD,EAAS9lD,OACX,IAAI,IAAIP,EAAIqmD,EAAS9lD,OAAO,EAAGP,GAAI,EAAGA,IAAI,CACzB4tB,EAAK04B,qBAAqB,UAAUtmD,GAAGkkB,WAAW,MAC1DqiC,UAAUF,EAASrmD,GAAI,EAAG,EACnC,CAED,IAAMwmD,EAAYp5B,MAAM6Q,KAAK4D,OAAO,MAAO,CAAC6W,MAAM,oBAGlD,OAFA8N,EAAUpmB,YAAYxS,GAEf44B,CACR,CA/BuBC,CAAer5B,MAAMgC,GAAG/L,GAAIqM,WAC/C,GA5BD,IAAI,IAAIrM,KAAM8I,EAAKo4B,MAAMqB,MAAK9tB,GA6B7B,CAEF,GAAG93B,EAAE,EAAImsB,EAAKsS,QAAQl+B,SAAWykD,GAAQr3B,EAAQ+3B,UAAYjjD,OAAO4b,KAAK8N,EAAKo4B,MAAMqB,OAAOrlD,QAAS,CACnG,IAAMke,EAAK2O,MAAM6Q,KAAK4D,OAAO,MAAO,CAAC6W,MAAQ,0BAC7C8L,EAAIpkB,YAAY3hB,EACjB,CAEA0N,EAAK6R,OAAS2mB,EACdx4B,EAAKghB,YAAW,WAAA,OAAMhhB,EAAKuQ,KAAK2jB,KACjC,IAEOmE,CACR,CAzLckC,CAAWv6B,EAAMwB,EAASgoB,EAAQ4O,EAAO5c,GACtDxb,EAAKqmB,UAAUmD,GAEf,IAAMoQ,EAAU34B,MAAM24B,QAAQC,QAiB9B,OAhBA54B,MAAM24B,QAAQzwB,IAAIivB,GAAO/I,MAAK,SAAAmL,GAE7B,IADA,IAAMtoC,EAAO5b,OAAO4b,KAAKspB,GAAOv2B,KAAM+a,EAAKiD,GAAG,SAASlI,KAAK0/B,QAAQC,GAAE,KAC7D7mD,EAAIqe,EAAK9d,OAAS,EAAGP,GAAK,EAAGA,IAAK,CAC1C,IAAM24B,EAAQta,EAAKre,GACnBi+B,EAAKqnB,aAAaqB,EAAIhuB,GAAQsF,EAAK3M,WAAYqW,EAAMhP,IACtD,CAEA,GAAG2rB,EACF,OAAOyB,EAAQG,QAAQjoB,GAExB7Q,MAAM6Q,KAAKqnB,aAAarnB,EAAMtQ,EAAQm5B,UAAW3U,SAASvkB,MAC1DsJ,OAAOzM,QA2CT,SAAoB0B,EAAM8R,GACzB7Q,MAAM6Q,KAAKvX,OAAOuX,GAElB9R,EAAKsS,QAAQ/5B,SAAQ,SAACulB,EAAOjqB,GAC5BotB,MAAM6Q,KAAKC,YAAY,QAAQ/R,EAAK6R,OAAO,IAAIh+B,EAChD,GACD,CAhDE+mD,CAAW56B,EAAM8R,GAEjB8nB,EAAQG,SACT,IACOH,CACR,CAuLA,SAASlB,GAAYl3B,GACpB,IAAM/L,EAAOwL,MAAMotB,IAAIwM,WAAWzrC,MAAK,SAAAqG,GAAI,OAAIA,EAAKyB,IAAMsK,EAAQs5B,SAC5DC,EAA4B,aAAhBv5B,EAAQ2P,KAEpBzS,EAAS8C,EAAQ9C,OAAS,EAAIuC,MAAMotB,IAAI2M,YAAc,EAE5D,MAAO,CACNvhC,MAAOhE,EAAKslC,EAAY,SAAW,SAAW95B,MAAMotB,IAAI4M,SAAWv8B,EACnEhF,OAAQjE,EAAKslC,EAAY,QAAU,UAAY95B,MAAMotB,IAAI4M,SAAWv8B,EAEtE,CAEO,SAASw8B,GAAYl7B,EAAMm7B,GACjC,IAAGA,GAAWn7B,EAAKo7B,cAAcC,QAAjC,CAGAC,GAAwBt7B,GAYxB,IAVA,IAAMtC,EAAU,CAACoC,KAAK,CAAE,EAAEqC,KAAK,CAAC,GAC1BwG,EAAO3I,EAAKiD,GAAG,SACfzB,EAAUxB,EAAKo7B,cAEf3C,EAAWC,GAAYl3B,GAEvBqyB,EAAYryB,EAAQ+2B,WAAa,GAAK,EACxCS,EAAWrwB,EAAKpH,OAAOy3B,SACvBE,EAAcrF,EAET1/C,EAAI,EAAGA,GAAK6kD,EAAU7kD,IAC9B+kD,IAAgBvwB,EAAK0C,QAAQl3B,GAAGggB,SAAWwU,EAAKpH,OAAOgH,WAAavI,EAAK4U,MAEvEskB,EAAcT,EAAS/+B,OAAS,IAClCs/B,EAAW,EACXE,EAAcrF,GAIf,IADA,IAAI0H,EAAarC,EACR9lD,EAAI4lD,EAAW,EAAG5lD,GAAK4sB,EAAKuB,OAAOkF,SAAUrzB,IAAK,CAC1D,IAAMsmB,GAAUiP,EAAK0C,QAAQj4B,GAAG+gB,SAAWwU,EAAKpH,OAAOgH,WAAavI,EAAK4U,MAEtE2mB,EAAa7hC,EAAS++B,EAAS/+B,SACjC6hC,EAAarC,EACbx7B,EAAQoC,KAAU,GAAL1sB,EAASA,EAAIA,EAAE,GAAK,GAGlCmoD,GAAc7hC,CACf,CAEA,GAAkB,QAAf8H,EAAQg6B,IAEV,IADA,IAAIC,EAAY,EACPnnD,EAAI,EAAGA,GAAK0rB,EAAKuB,OAAOwyB,YAAaz/C,IAAK,CAClD,IAAMmlB,GAASkP,EAAK0rB,gBAAgB//C,GAAGmlB,OAASkP,EAAKpH,OAAO+G,aAAetI,EAAK4U,MAE7E6mB,EAAYhiC,EAAQg/B,EAASh/B,QAC/BgiC,EAAY,EACZ/9B,EAAQyE,KAAU,GAAL7tB,EAASA,EAAIA,EAAE,GAAK,GAGlCmnD,GAAahiC,CACd,CAGDuG,EAAKo7B,cAAcC,QAAU39B,EAC7BsC,EAAK3K,SAjDJ,CAkDF,CAEO,SAASqmC,GAAmB17B,EAAM3G,EAAKoE,GAC7C,IAAIkF,EAAM,GAEJjF,EAAUsC,EAAKo7B,cAAcC,QAC7Bt8B,EAAOiB,EAAKiD,GAAG,SAAStJ,QAAQN,EAAKoE,GAE3C,GAAGsB,EAAK,CACP,IAAM48B,EAAkB,EAAR58B,EAAK,IAAMA,EAAK,GAAG,GAC7B68B,EAAkB,EAAR78B,EAAK,IAAMA,EAAK,GAAG,GAEnCs4B,GAAWr3B,EAAMjB,EAAK,GAAIA,EAAK,GAAI,8BAA+BrB,GAAWA,EAAQyE,KAAKy5B,IAC1FvE,GAAWr3B,EAAMjB,EAAK,GAAIA,EAAK,GAAI,+BAAgCrB,GAAWA,EAAQoC,KAAK67B,IAE3F,IAAME,EAAsB77B,EAAKo7B,cAAcU,qBAE/C,GAAGp+B,EAAQ,CACV,IAAMq+B,EAAmBt+B,GAAUm+B,GAAWl+B,EAAQyE,KAAK1E,GACrDu+B,EAAoB3iC,GAAOsiC,GAAWj+B,EAAQoC,KAAKzG,IAEtD0iC,GAAoBC,KAClBH,EAAoB98B,EAAK,MAC5B88B,EAAoB98B,EAAK,IAAM,IAC5B88B,EAAoB98B,EAAK,IAAIA,EAAK,MACrC88B,EAAoB98B,EAAK,IAAIA,EAAK,IAAM,IAEtCg9B,GACFE,GAAmBj8B,EAAM67B,EAAoB98B,EAAK,IAAIA,EAAK,IAAKA,EAAMtB,EAAQ,SAC5Eu+B,GACFC,GAAmBj8B,EAAM67B,EAAoB98B,EAAK,IAAIA,EAAK,IAAKA,EAAM1F,EAAK,UAE9E,MACKiiC,GAAwBt7B,EAC9B,CASA,OAPGtC,IACCA,EAAQyE,KAAK1E,KACfkF,GAAO,+BACLjF,EAAQoC,KAAKzG,KACfsJ,IAAQA,EAAM,IAAM,IAAM,iCAGrBA,CACR,CAEO,SAAS24B,GAAwBt7B,GACvC,IAAM67B,EAAsB77B,EAAKo7B,cAAcU,qBAC/C,IAAI,IAAIziC,KAAOwiC,EACd,IAAI,IAAI9uB,KAAO8uB,EAAoBxiC,GAClC,IAAI,IAAIsO,KAAQk0B,EAAoBxiC,GAAK0T,GACxC9L,MAAM6Q,KAAKvX,OAAOshC,EAAoBxiC,GAAK0T,GAAKpF,IACnD3H,EAAKo7B,cAAcU,qBAAuB,EAC3C,CAEA,SAASG,GAAmBj8B,EAAMk8B,EAAUn9B,EAAM2f,EAAU/W,GACvDu0B,EAASv0B,KAAOu0B,EAASv0B,GAAQ,IAErC,IAAImJ,EAASorB,EAASv0B,GAAM+W,GACtB/V,EAAQ3I,EAAKiD,GAAG,SAEtB,IAAI6N,EAAO,CAEV,IADA,IAAIH,EAAM,EACF98B,EAAkC,EAA9BkrB,EAAa,SAAR4I,EAAkB,EAAI,GAAM9zB,GAAK6qC,EAAU7qC,IAE1D88B,GADU,SAARhJ,EACKgB,EAAK0rB,gBAAgBxgD,GAAG4lB,OAASkP,EAAKpH,OAAO+G,YAE7CK,EAAK0C,QAAQx3B,GAAGsgB,SAAWwU,EAAKpH,OAAOgH,UAEhDuI,EAASorB,EAASv0B,GAAM+W,GAAYzd,MAAM6Q,KAAK4D,OAAO,MAAO,CAAC6W,MAAAl4C,yBAAAA,OAA+BszB,GAAQ3C,MAAK3wB,GAAAA,OAAY,SAARszB,EAAkB,OAAS,MAAKtzB,KAAAA,OAAIs8B,EAAI,EAAC,QACxJ,CAEA1P,MAAMkL,OAAM,WACX,IAAMgwB,EAAWxzB,EAAKksB,YAAY,CAACx7B,IAAK0F,EAAK,GAAItB,OAAQsB,EAAK,KAC1Do9B,EAASC,SAAStrB,IACrBqrB,EAASloB,YAAYnD,EACvB,GACD,iEAlUO,SAAc9Q,GACpBA,EAAK44B,aAAe,SAASp3B,EAAS22B,GACrC,OAAO75B,GAAM0B,EAAMwB,EAAS22B,IAG7Bn4B,EAAKo7B,cAAgB,CACpBN,MAAO75B,MAAMotB,IAAIwM,WAAWzrC,MAAK,SAAAjb,GAAC,MAAY,MAARA,EAAE+iB,EAAU,IAAI,KAAO+J,MAAMotB,IAAIwM,WAAW,GAAG3jC,GACrFskC,IAAK,OACLrqB,KAAM,YACNzS,OAAQ,EACR65B,WAAY,EACZuD,qBAAsB,CAAC,GAGxB97B,EAAK+D,YAAY,UAAU,SAAC+E,EAAQzP,EAAKoE,EAAQ1K,GAClC,iBAAV+V,GACH9I,EAAKq8B,iBAAiBtpC,EACxB,IAEAiN,EAAK+D,YAAY,oBAAoB,WAAA,OAAKm3B,GAAYl7B,GAAM,MAC5DA,EAAK+D,YAAY,YAAY,SAAC4D,EAAM1nB,GACxB,UAAR0nB,GAAoB1nB,GAAQ+f,EAAKiM,kBACnCivB,GAAYl7B,GAAM,EACpB,IACAA,EAAK+D,YAAY,gBAAgB,SAAC3wB,EAAGkB,EAAGyqB,EAAM9e,GAC7C,IAAM47C,EAAsB77B,EAAKo7B,cAAcU,qBAC/C,GAAG77C,GAAQ+f,EAAKiM,kBAAoB4vB,EAAoBzoD,IAAMyoD,EAAoBzoD,GAAGkB,GAAG,CACvF,IAAI,IAAIqzB,KAAQk0B,EAAoBzoD,GAAGkB,GACtC2sB,MAAM6Q,KAAKvX,OAAOshC,EAAoBzoD,GAAGkB,GAAGqzB,WACtCk0B,EAAoBzoD,GAAGkB,EAC/B,CACD,GAED,uDC1DMgoD,GAAY,CAAA,EAaX,SAAS/rB,GAAKvQ,EAAMmiB,EAAUlE,EAAMh+B,GAC1C,IAAI8S,EAGJ,IAFA9S,EAAOA,GAAQ+f,EAAKiM,mBAETjM,EAAKiM,iBAAiB,CAChC,IAAMtD,EAAO3I,EAAKiD,GAAG,SAYrB,GAXAlQ,EAAQiN,EAAK4U,OAAS,EAEP,MAAZuN,GAAgC,OAAZA,IACtBA,EAAWoa,GAAQxpC,EAAmB,MAAZovB,EAAmB,GAAK,EAAGmO,KAEtDtwB,EAAK4U,MAAQuN,EACbxZ,EAAKyd,OAAO,CAAEoW,eAAgB,GAAGra,IAE9BniB,EAAKiD,GAAG,SACVjD,EAAKiD,GAAG,QAAQ3O,SAAS6tB,GAEvBA,GAAYpvB,EAAM,CACpB,IAAM8d,EAAW5P,MAAMgB,KAAKmI,QAAQyG,SAAWsR,EACzC5Z,EAAgC,YAApBtH,MAAMgB,KAAKC,OAA2C,QAApBjB,MAAMgB,KAAKC,MAAkB,GAAK,GAChFkC,EAAY,qBAAqB+d,EAASxtC,WAAWsB,QAAQ,IAAK,KAExE0yB,EAAKxE,MAAMC,UAAYuE,EAAKxE,MAAMC,UAAUnuB,QAAQ,yBAAyB,IAC7E0yB,EAAKyd,OAAO,CAACzjB,IAAKyB,IAEd6Z,IACHqd,GAAwBt7B,GACxBw0B,GAAUx0B,EAAMjN,GAChBif,GAAWhS,IAGRs8B,GAAUl4B,IAA0B,GAAZ+d,IAC3Bma,GAAUl4B,GAAa,EAGvBnD,MAAM6Q,KAAKgB,SAAQ,gBAAAz+B,OACf+vB,EAAS/vB,oBAAAA,OAAmB+vB,EAAS,0CAAA/vB,OAC1Bw8B,qCAAQx8B,OAGnB+vB,EAAS,0DAAA/vB,OACE,GAAG8tC,qCAAQ9tC,OAGtB+vB,EAAS,4FAAA/vB,OACF,EAAE8tC,EAAQ,6BAAA9tC,OACT,EAAE8tC,yCAAQ9tC,QACCk0B,EAAY,GAAG4Z,EAAQ,yCAAA9tC,QACrBk0B,EAAY,GAAG4Z,EAAQ,mCAAA9tC,OAG5C+vB,EAAS/vB,wCAAAA,OACA,EAAE8tC,EAAQ9tC,uCAAAA,OAGnB+vB,2DAAS/vB,OACC,GAAG8tC,iCAKjBlhB,MAAM6Q,KAAKgB,SAAQ,gBAAAz+B,OACf+vB,EAAS/vB,6BAAAA,OAA4B+vB,EAAS,wDAAA/vB,OAC/B,GAAG8tC,EAAQ,iCAAA9tC,OAE1B+vB,EAAS/vB,2BAAAA,OAA0B+vB,EAAS,0DAAA/vB,OACjC,GAAG8tC,8BAAQ9tC,OACf,EAAE8tC,mCAAQ9tC,OAEjB+vB,EAAS,gEAAA/vB,OACF,GAAG8tC,EAAQ,iCAAA9tC,OAElB+vB,EAAS/vB,kEAAAA,OACM,GAAG8tC,EAAQ9tC,iCAAAA,OAE1B+vB,EAAS,iDAAA/vB,OACEw8B,EAAQx8B,iCAAAA,OAEnB+vB,EAAS,mEAAA/vB,OACS,EAAE8tC,0CAAQ9tC,OACT,EAAE8tC,iCAI3B,CACD,KACI,CACH,IAAMrkB,EAAQ00B,GAASxyB,EAAM/f,GAC7B,IAAG6d,EAWE,OAVAA,EAAMkM,QAAQ9J,QACjBpC,EAAMkM,QAAQ9J,MAAQ,CAACqQ,KAAM,IAE9Bxd,EAAQ+K,EAAMkM,QAAQ9J,MAAMqQ,KAEb,MAAZ4R,GAAgC,OAAZA,IACtBA,EAAWoa,GAAQxpC,EAAmB,MAAZovB,EAAmB,GAAK,EAAGmO,KAEtDxyB,EAAMkM,QAAQ9J,MAAMqQ,KAAO4R,CAG7B,CAEIlE,GAAQlrB,GAASovB,GACpBniB,EAAK6D,UAAU,SAAU,CAACse,EAAUpvB,EAAO9S,GAC7C,CAEO,SAAS6Y,GAAUkH,EAAMjF,GAC/BA,EAAKmF,MAAQ,CACZqQ,KAAMvQ,EAAK4U,MAEb,CAEO,SAASqJ,GAAKje,EAAMjF,GAC1B,IAAIhI,EAAQ,EACTgI,EAAKmF,OAASnF,EAAKmF,MAAMqQ,OAC3Bxd,EAAQgI,EAAKmF,MAAMqQ,MAEpBA,GAAKvQ,EAAMjN,GAAO,EACnB,CAEO,SAASwpC,GAAQxpC,EAAOg/B,EAAMzB,GACpC,IAKImM,EALEjwB,EAAQ8jB,EAAQx6C,QAAQid,GAE9B,IAAa,GAAVyZ,EACF,OAAO8jB,EAAQ9jB,EAAQulB,IAASh/B,EAGjC,IAAI,IAAIlf,EAAI,EAAGA,EAAIy8C,EAAQl8C,OAAQP,IAClC,GAAGy8C,EAAQz8C,GAAKkf,EAAM,CACrB,GAAGg/B,EAAO,IACE,KAANl+C,EACJ,OAAOkf,EAET0pC,EAAYnM,EAAQz8C,GACpB,KACD,CAMD,OAHGk+C,EAAO,IAAM0K,IACfA,EAAYnM,EAAQA,EAAQl8C,OAAS,IAE/BqoD,GAAa1pC,CACrB,sDAzJO,SAAciN,GACpBA,EAAK+D,YAAY,UAAU,SAAC+E,EAAQzP,EAAKoE,EAAQ1K,GAClC,QAAV+V,GACHyH,GAAKvQ,EAAMjN,EAEb,IAEAiN,EAAK+D,YAAY,mBAAmB,SAAChJ,GAAI,OAAKjC,GAAUkH,EAAMjF,MAC9DiF,EAAK+D,YAAY,eAAe,SAAChJ,GAAI,OAAKkjB,GAAKje,EAAMjF,KACtD,iCCfAkG,MAAMG,QACL,CACClhB,KAAM,cACNmhB,SAAU,4BACVC,MAAO,WAAW,IAAAugB,EAAAxuB,KACjBA,KAAK0Q,YAAY,iBAAiB,WACjC8d,EAAK/c,UAAU+c,EAAKtgB,OAAOxO,OAC3B8uB,EAAKrC,eAAekd,UAAW,EAC/Bz7B,MAAMqjB,MAAMzC,EAAK1d,MAAMe,WAAY,WAAW,SAAAhyB,GAAC,OAC9C+tB,MAAM6Q,KAAKgS,aAAa5wC,EAAE,GAE5B,GACA,EACD4xB,UAAW,SAAS/R,GACnBM,KAAKmsB,eAAezsB,MAAQ3V,SAAiB,IAAR2V,EAAa,IAAM,GACxD,EACD4pC,MAAO,SAAS5K,EAAMxwB,GACrB,IAGMxO,EAAQwpC,GAHJlpC,KAAKkO,OAAOxO,MAGGg/B,EAFb1+B,KAAKkO,OAAO+uB,SAGxBj9B,KAAKiB,SAASvB,EAAOwO,EACtB,GAEDN,MAAMa,GAAG86B,SCvBV37B,MAAMkyB,QAAQ0J,WAAa57B,MAAMgH,OAAO,CACvC60B,YAAY,WACX,IAAMxd,EAASre,MAAMkyB,QAAQ0J,WAE7B,IAAIvd,EAAOvY,MAAM,CAChB,IAAMA,EAAQ9F,MAAMa,GAAG,CACtB9B,KAAK,QACLyB,KAAK,CACJzB,KAAK,WACL+8B,OAAM,EACNC,YAAW,EACXz6B,GAAG,CACFM,SAAU,SAAS2W,GAClBA,EAAMA,EAAI,GACVnmB,KAAKoP,gBAAgBw6B,mBAAmBlqC,MAAQymB,EAAMpS,GAAmBoS,GAAO,GAChFvY,MAAM4C,UAAU,YAAa,GAC9B,IAGFtB,GAAG,CACF26B,QAAS,WACRj8B,MAAM4C,UAAU,YAAa,GAC9B,KAGFyb,EAAOvY,MAAQA,EAAMxF,OAAOrK,EAC7B,CAEA,OAAOooB,EAAOvY,KACd,EACDo2B,OAAO,WAAU,IAAAtb,EAAAxuB,KACVksB,EAAOte,MAAM6Q,KAAK4D,OAAO,MAAO,CACrC6W,MAAQ,mBACN,uBAMH,OAJAl5B,KAAK0T,MAAQ1T,KAAKypC,cAElB77B,MAAMqjB,MAAM/E,EAAKra,WAAY,SAAS,WAAA,OAAK2c,EAAKle,WAAWoe,KAAKxC,MAEzDA,CACP,EACD5b,SAAQ,WACP,OAAO1C,MAAMgC,GAAG5P,KAAK0T,MACrB,EACDq2B,UAAU,WACT,IAAMC,EAAQhqC,KAAKmsB,eACbzY,EAAQ1T,KAAKsQ,WAEnBoD,EAAMk2B,mBAAqBI,EAC3Bt2B,EAAMgb,KAAKsb,GAEXA,EAAM9S,aAAa,gBAAiB,OACpC,EACD+S,eAAc,SAACvqC,GACd,IAAMwqC,EAAWlqC,KAAKsQ,WAAWJ,UAEjCg6B,EAAShV,aACTgV,EAASjpC,SAASvB,GAClBwqC,EAAS/U,cACT,EACDgV,YAAY,WACXnqC,KAAK+pC,WACL,EACD9oC,SAAS,SAASvB,GAEjBA,EAD0B,KAAVA,GAAgB7e,MAAY,EAAN6e,GACrB,IAAIxf,KAAS2zB,GAAmBnU,GACjDM,KAAKiqC,eAAevqC,GAEpB,IAAMiN,EAAOiB,MAAMgC,GAAG5P,KAAKkO,OAAOge,MAAMwK,WAAU,SAAA91C,GAAC,MAAe,gBAAXA,EAAEiM,IAAsB,GAAE,UAC3Esd,EAASggB,GAAkBxd,EAAM3M,KAAKkO,OAAOlI,IAAInC,GAAI7D,KAAKkO,OAAOrK,IACvE7D,KAAKmsB,eAAezsB,MAAQyK,EAAOzK,EACnC,EACD2B,SAAS,WACR,IAAM3B,EAAQM,KAAKmsB,eAAezsB,MAElC,OADAM,KAAKsQ,WAAWX,OACTjQ,CACR,GACEkO,MAAMkyB,QAAQ91B,MChFjB4D,MAAMkyB,QAAQsK,cAAgBx8B,MAAMgH,OAAO,CAC1C4K,UAAU,SAAS9f,GAClB,IACI0gB,EADEzM,EAAO3T,KAAKmsB,eAKlB,OAFIzsB,GAASiU,EAAKC,OAAOlU,KACxB0gB,EAAOzM,EAAKqE,QAAQtY,IACd0gB,GAAQA,EAAKjW,MACpB,EACDkgC,UAAU,SAAS32B,GAClB9F,MAAMkyB,QAAQpxB,WAAW27B,UAAUxlC,MAAM7E,KAAMgS,WAE/C0B,EAAM5D,UAAUijB,OAAO,YAAY,SAAS9jB,GAC3C,OAAOA,EAAIq7B,QAAUr7B,EAAIvP,KAC1B,GACD,GACEkO,MAAMkyB,QAAQpxB,YCdV,IAAM67B,GAAU,CACtB7+B,KAAM,SAAAiB,GACL,IAAMhC,EAAQgC,EAAKiD,GAAG,SAASoO,gBAC/B,GAAGrT,EACF,GAoCH,SAAkBgC,EAAKhC,GACtB,IAAInqB,EAAG2G,EACNqjD,EAAK7/B,EAAMwH,MACX+I,EAAKvQ,EAAMyH,IAEZ,IAAK5xB,EAAW,EAAPgqD,EAAGxkC,IAAOxlB,GAAY,EAAP06B,EAAGlV,IAAOxlB,IACjC,IAAK2G,EAAc,EAAVqjD,EAAGpgC,OAAUjjB,GAAe,EAAV+zB,EAAG9Q,OAAUjjB,IACvC,GAAGwlB,EAAKiD,GAAG,SAAStJ,QAAQ9lB,EAAG2G,GAC9B,OAAO,EAGV,OAAO,CACR,CAhDMsjD,CAAS99B,EAAKhC,GAChBgC,EAAK+9B,gBACD,CAEJ,IADA,IAAMnrC,EAAS,GACPxf,EAAI4qB,EAAMwH,MAAMnM,IAAKjmB,GAAG4qB,EAAMyH,IAAIpM,IAAKjmB,IAAI,CAClD,IAAI,IAAIkB,EAAI0pB,EAAMwH,MAAM/H,OAAQnpB,GAAG0pB,EAAMyH,IAAIhI,OAAQnpB,IAAI,CACxD,IAAIye,EAAQiN,EAAKmG,aAAa/yB,EAAEkB,GAEhC,GADGye,GAAOH,EAAOpa,KAAKua,GACnBH,EAAOxe,OAAQ,EAAG,KACtB,CACA,GAAGwe,EAAOxe,OAAQ,EAAG,KACtB,CACGwe,EAAOxe,OAAO,EAChB4rB,EAAKovB,QAAQ,CACZ/xB,KAAK4D,MAAMC,KAAKC,YAAYxE,OAAO,wBACjC0yB,MAAK,WAAA,OAAKrvB,EAAKg+B,cAAc,IAGhCh+B,EAAKg+B,cACP,CAED,EACD/+B,KAAM,SAAAe,GAAI,OAAIA,EAAKf,MAAM,EACzBC,KAAM,SAAAc,GAAI,OAAIA,EAAKd,MAAM,EACzB,iBAAkB,SAAAc,GAAI,OAAIA,EAAKi+B,cAAc,SAAS,EACtD,eAAgB,SAAAj+B,GAAI,OAAIA,EAAKk+B,YAAY,SAAS,EAClD,iBAAkB,SAAAl+B,GAAI,OAAIA,EAAK8uB,eAAe,EAC9C,cAAe,SAAA9uB,GAAI,OAAIA,EAAK+uB,YAAY,EACxC,oBAAqB,SAAA/uB,GAAI,OAAI0b,GAAmB1b,EAAM,EAAE,EACxD,oBAAqB,SAAAA,GAAI,OAAI0b,GAAmB1b,GAAO,EAAE,EACzD,kBAAmB,SAAAA,GAAI,OAAIA,EAAK6D,UAAU,aAAc,CAAC,SAAU,GAAG,EACtE,kBAAmB,SAAA7D,GAAI,OAAIA,EAAK6D,UAAU,aAAc,CAAC,UAAW,GAAG,EACvE,gBAAiB,SAAA7D,GAAI,OAAIA,EAAKm+B,aAAa,SAAS,EACpD,gBAAiB,SAAAn+B,GAAI,OAAIA,EAAKq8B,iBAAiB,SAAS,GCnClD,IAAM+B,GAAa,CACzB,CAAClnC,GAAI,QAASnE,MAAO,SACrB,CAACmE,GAAI,uBAAwBnE,MAAO,UACpC,CAACmE,GAAI,oBAAqBnE,MAAO,WACjC,CAACmE,GAAI,0BAA2BnE,MAAM,aACtC,CAACmE,GAAI,SAAUnE,MAAO,UACtB,CAACmE,GAAI,UAAWnE,MAAO,WACvB,CAACmE,GAAI,kBAAmBnE,MAAM,YAiBxB,SAASsrC,GAAmBr+B,GAClC,IAAM0d,EAASzc,MAAMC,KAAKC,YAAY1B,MAClC6+B,EAAgB,CACnB,CAAEpnC,GAAG,MAAUoO,MAAM,SAAUvS,MAAM2qB,EAAO,kBAC5C,CAAExmB,GAAG,MAAUoO,MAAM,SAAUvS,MAAM2qB,EAAO,kBAC5C,CAAExmB,GAAG,OAAUoO,MAAM,SAAUvS,MAAM2qB,EAAO,eAAgB6gB,WAAU,GACtE,CAAErnC,GAAG,OAAUoO,MAAM,SAAUvS,MAAM2qB,EAAO,iBAI7C,OAF6B,GAA1B1d,EAAKuB,OAAOyzB,YACdsJ,EAAc9lD,KAAK,CAAE0e,GAAG,SAAUoO,MAAM,SAAUvS,MAAM2qB,EAAO,mBACzD4gB,CACR,CAEO,SAASE,GAAgBx+B,GAC/B,IAAM0d,EAASzc,MAAMC,KAAKC,YAAY1B,MAClCg/B,EAAgB,CACnB,CAAEvnC,GAAG,MAAUoO,MAAM,MAAOvS,MAAM2qB,EAAO,eACzC,CAAExmB,GAAG,MAAUoO,MAAM,MAAOvS,MAAM2qB,EAAO,eACzC,CAAExmB,GAAG,OAAUoO,MAAM,MAAOvS,MAAM2qB,EAAO,YAAa6gB,WAAU,GAChE,CAAErnC,GAAG,OAAUoO,MAAM,MAAOvS,MAAM2qB,EAAO,cAI1C,OAF6B,GAA1B1d,EAAKuB,OAAOyzB,YACdyJ,EAAcjmD,KAAK,CAAE0e,GAAG,SAAUoO,MAAM,MAAOvS,MAAM2qB,EAAO,gBACtD+gB,CACR,CAGO,SAASC,KACf,MAAO,CACN,CAACxnC,GAAI,cAA6BnE,MAAO4rC,GAAe,UACxD,CAACznC,GAAI,cAA6BnE,MAAO4rC,GAAe,UACxD,CAACznC,GAAI,4BAA6BnE,MAAO4rC,GAAe,wBACxD,CAACznC,GAAI,yBAA6BnE,MAAO4rC,GAAe,qBACxD,CAACznC,GAAI,gBAA6BnE,MAAO4rC,GAAe,YACxD,CAACznC,GAAI,iBAA6BnE,MAAO4rC,GAAe,aACxD,CAAEC,UAAW,aACb,CAAC1nC,GAAI,YAA6BnE,MAAO4rC,GAAe,QAE1D,CAGA,IAAMjhC,GAAU,CACf,CAACxG,GAAI,KAAMnE,MAAO,MAClB,CAACmE,GAAI,OAAQnE,MAAO,QACpB,CAACmE,GAAI,MAAOnE,MAAO,OACnB,CAACmE,GAAI,QAASnE,MAAO,SACrB,CAACmE,GAAI,SAAUnE,MAAO,UACtB,CAACmE,GAAI,MAAOnE,MAAO,OACnB,CAACmE,GAAI,QAASnE,MAAO,SACrB,CAACmE,GAAI,aAAcnE,MAAO,eAG3B,SAAS4rC,GAAe5rC,GACvB,IAAI2qB,EAASzc,MAAMC,KAAKC,YAAY1B,MACpC,OAAOie,EAAc,MAAI,IAAMA,EAAO,SAAS3qB,GAAO1d,aACvD,CAUO,IAAMwpD,GAAe,CAC3B,cAAe,OACf,aAAc,SACd1/B,UAAa,YACbC,OAAU,UAGE0C,GAAK,CACjBwgB,OAAQ,SAAS/gB,GAChB,MAAO,CACNvB,KAAM,gBAAiBvG,MAAO8H,EAAO9H,OAAOmV,GAAanV,MAAOvC,GAAIqK,EAAOrhB,KAAMA,KAAMqhB,EAAOrhB,KAAOqqB,MAAOhJ,EAAOgJ,MACnH5H,IAAKpB,EAAOoB,KAAK,GAAIulB,QAAS2W,GAAat9B,EAAOrhB,MAAO+nC,SAAU,SACnEvmB,QAAST,MAAMC,KAAKC,YAAYvC,SAAS2C,EAAOrhB,OAAO,GAExD,EACD4+C,YAAa,SAASv9B,GACrB,MAAO,CACNvB,KAAM,eAAiB2C,IAAKpB,EAAOoB,IAAMziB,KAAMqhB,EAAOrhB,KAAMuZ,MAAO8H,EAAO9H,OAAOmV,GAAanV,MAAM,GACpGmJ,MAAO,8FAA8FrB,EAAOrhB,KAAK,aACjHwhB,QAAST,MAAMC,KAAKC,YAAYvC,SAAS2C,EAAOrhB,OAAO,GAExD,EACD6+C,aAAc,SAASx9B,GACtB,MAAO,CACNvB,KAAM,uBAAwBvG,MAAOmV,GAAanV,MAAOvC,GAAIqK,EAAOrhB,KAAMA,KAAMqhB,EAAOrhB,KACvFqqB,MAAO,gEAAgEhJ,EAAO2C,MAAM3C,EAAOrhB,MAAM,YACjGwhB,QAAST,MAAMC,KAAKC,YAAYvC,SAAS2C,EAAOrhB,OAAO,GAExD,EACD8+C,WAAY,SAASz9B,GACpB,IAAI09B,EAAMh+B,MAAMvG,KAAK6G,GAUrB,OATAN,MAAMgH,OAAOg3B,EAAK,CAACj/B,KAAM,SAAUvG,MAAOmV,GAAanV,MAAOvC,GAAIqK,EAAOrhB,KACxEqqB,MAAO,+DAA+DhJ,EAAOrhB,KAAK,YAClFyiB,IAAK,GACLjB,QAAST,MAAMC,KAAKC,YAAYvC,SAAS2C,EAAOrhB,OAAO+gB,MAAMC,KAAKC,YAAY1B,MAAM8B,EAAOrhB,OAAO,KAEhGqhB,EAAO2mB,SACTjnB,MAAMgH,OAAOg3B,EAAI,CAACj/B,KAAM,gBAAiBkoB,QAAS3mB,EAAO2mB,QAASD,SAAU1mB,EAAO0mB,WAAU,GAGvFgX,CACP,EACDC,UAAW,SAAS39B,GACnB,MAAQ,CACPvB,KAAM,YAAa9f,KAAMqhB,EAAOrhB,KAAMyiB,IAAIpB,EAAOoB,KAAK,GAAIlJ,MAAO8H,EAAO9H,OAAOmV,GAAanV,MAAM,GAAK+H,QAAQD,EAAOC,QAEvH,EACDa,OAAQ,SAASd,GAyBhB,OAxBAN,MAAMgH,OAAO1G,EAAO,CACnBvB,KAAM,aACN9I,GAAIqK,EAAOrhB,KACX6S,MAAOgc,GAAcxN,EAAOrhB,MAC5B4iB,QAAS,CACRH,IAAK,uBACLwH,QAAS,EACTpP,KAAMwG,EAAOC,WAIfD,EAAOG,QAAUT,MAAMC,KAAKC,YAAYvC,SAAS2C,EAAOrhB,OAAO,GAC5DqhB,EAAO49B,aACT59B,EAAOuB,QAAQC,WAAY,EAC3BxB,EAAOuB,QAAQrJ,MAAQ8H,EAAO49B,YAE5B59B,EAAO69B,gBACT79B,EAAOuB,QAAQrB,KAAO,CACrBE,SAAUJ,EAAO69B,gBAEhB79B,EAAO89B,cACT99B,EAAOuB,QAAQrB,KAAOF,EAAOuB,QAAQrB,MAAQ,GAC7CF,EAAOuB,QAAQrB,KAAKc,GAAKhB,EAAO89B,aAE1B99B,CACP,EACDrE,UAAW,WACV,MAAO,CACN8C,KAAM,mBAEP,EACD4C,MAAO,SAASrB,GACf,IAAIqB,EAAQrB,EAAOqB,MAKnB,OAJ0B,IAAvBA,EAAM9sB,QAAQ,OAChB8sB,EAAQ,IAGF,CACNjB,SAHDiB,EAAQ3B,MAAMC,KAAKC,YAAYxE,OAAO4E,EAAOqB,QAAQA,EAGnC5C,KAAM,mBAAoBtG,OAAQkV,GAAa0wB,YAEjE,EACD5hC,QAAS,SAAS6D,GACjB,MAAO,CAACvB,KAAM,iBAAkBvG,MAAM8H,EAAO9H,OAAOmV,GAAanV,MAAM,GAAIsB,KAAM2C,GAASxG,GAAIqK,EAAOrhB,KAAMA,KAAMqhB,EAAOrhB,KACvHwhB,QAAST,MAAMC,KAAKC,YAAYvC,SAAS2C,EAAOrhB,MACjD,EACDqd,MAAO,SAASgE,GACf,MAAO,CAACvB,KAAM,eAAgBjN,MAAOgc,GAAcxN,EAAOrhB,MAAOuZ,MAAM8H,EAAO9H,OAAOmV,GAAanV,MAAM,GAAIsB,KAAMwG,EAAOC,QACxHthB,KAAMqhB,EAAOrhB,KAAMwhB,QAAST,MAAMC,KAAKC,YAAYvC,SAAS2C,EAAOrhB,MACpE,EACDq/C,WAAY,SAASh+B,GACpB,MAAO,CACNvB,KAAM,qBACNvG,MAAO,GACPvC,GAAIqK,EAAOrhB,KACXA,KAAMqhB,EAAOrhB,KAEf,GAGYs/C,GAAa,CACzB,cAAe,WACd,OAAQ19B,GAAGO,OAAO,CAACniB,KAAM,cAAeshB,QAAQ48B,GAAY3kC,MAAO,IAAKuG,KAAK,SAC7E,EACD,YAAa,WACZ,OAAQ8B,GAAGO,OAAO,CAACniB,KAAM,YAAashB,QAtHhC,CACN,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAC5B,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,MAoH+B/H,MAAO,GAAIuG,KAAK,OAAQkE,KAAM,gBAAiBvB,IAAK,oBAChHJ,GAAI,CACH8f,YAAa,WACZ,IAAMvf,EAAU7B,MAAMgC,GAAG5P,KAAKkO,OAAOuB,SACjCA,EAAQof,aACXpf,EAAQif,KAAK1uB,KAAKmsB,eACpB,IAGF,EACD,cAAe,WACd,OAAO1d,GAAGwgB,OAAO,CAACpiC,KAAK,cAAcqqB,MAAO,IAAK5H,IAAK,qBACtD,EACD,aAAc,WACb,OAAOb,GAAGwgB,OAAO,CAACpiC,KAAM,aAAaqqB,MAAO,IAAI5H,IAAI,uBACpD,EACDxD,UAAa,WACZ,OAAO2C,GAAGwgB,OAAO,CAACpiC,KAAM,YAAYqqB,MAAO,IAAI5H,IAAK,0BACpD,EACDvD,OAAU,WACT,OAAO0C,GAAGwgB,OAAO,CAACpiC,KAAM,SAASqqB,MAAO,IAAI5H,IAAK,uBACjD,EACD9D,MAAS,WACR,OAAOiD,GAAGg9B,YAAY,CAAC5+C,KAAM,QAAQgkB,KAAK,OAAOvB,IAAI,sBACrD,EACD7D,WAAc,WACb,OAAQgD,GAAGg9B,YAAY,CAAC5+C,KAAM,aAAagkB,KAAK,cAAcvB,IAAI,0BAA2BlJ,MAAO,IACpG,EACDiE,QAAW,WACV,OAAOoE,GAAGpE,QAAQ,CAAExd,KAAM,WAC1B,EACD,aAAc,WACb,IAAIw9B,EAASzc,MAAMC,KAAKC,YAAYvC,SACpC,OAAOkD,GAAGvE,MAAM,CAACrd,KAAM,aAAcyiB,IAAK,qBAAsBnB,QAAQ,CACvE,CAACtK,GAAI,OAAQyL,IAAK,6BAA8BjB,QAASgc,EAAO,eAChE,CAACxmB,GAAI,SAAUyL,IAAK,+BAAgCjB,QAASgc,EAAO,iBACpE,CAACxmB,GAAI,QAASyL,IAAK,8BAA+BjB,QAASgc,EAAO,kBAEnE,EACD,iBAAkB,WACjB,IAAIA,EAASzc,MAAMC,KAAKC,YAAYvC,SACpC,OAAQkD,GAAGvE,MAAM,CAACrd,KAAM,iBAAkByiB,IAAK,qBAAsBnB,QAAQ,CAC5E,CAACtK,GAAI,MAAOyL,IAAK,4BAA6BjB,QAASgc,EAAO,cAC9D,CAACxmB,GAAI,SAAUyL,IAAK,+BAAgCjB,QAASgc,EAAO,iBACpE,CAACxmB,GAAI,SAAUyL,IAAK,+BAAgCjB,QAASgc,EAAO,mBAErE,EACD1e,KAAQ,WACP,OAAO8C,GAAGk9B,WAAW,CAAC9+C,KAAM,OAAQgoC,QAAQ,OAAQD,SAAS,UAC7D,EACDzqB,OAAU,WACT,OAAOsE,GAAGO,OAAO,CAChBniB,KAAM,SAAUuZ,MAAO,IAAK+H,SAjPxBkc,EAASzc,MAAMC,KAAKC,YAAYxE,OAC/B,CACN,CAACzF,GAAI,SAAUnE,MAAO2qB,EAAO9gB,QAC7B,CAAC1F,GAAI,QAASnE,MAAO2qB,EAAO7gB,SAAU4iC,QAAS,SAC/C,CAACvoC,GAAI,MAAOnE,MAAO2qB,EAAO5gB,OAAQ2iC,QAAS,WAC3C,CAACvoC,GAAI,UAAWnE,MAAO2qB,EAAO3gB,QAAS0iC,QAAQ,OAC/C,CAACvoC,GAAI,OAAQnE,MAAO2qB,EAAO1gB,KAAMyiC,QAAQ,SACzC,CAACvoC,GAAI,SAAUnE,MAAO2qB,EAAOzgB,OAAQwiC,QAAQ,UAC7C,CAACvoC,GAAI,SAAUnE,MAAO2qB,EAAO,oBAyO0ByhB,WAAY,IAClEC,cAAe,SAAS98B,GAEvB,IAAI9E,EAAUsY,GAAcxT,EAAIpL,IAAM4e,GAAcxT,EAAIpL,IAAI2b,UAAY,GACpEvV,EAAO,CAACqF,IAAI,IACZ88B,EAAUjiC,GAAU8E,EAAIm9B,QAAQjiC,EAAO8E,EAAIm9B,QAASniC,GAAM,GAC9D,OAAOgF,EAAIvP,OAASyK,EAAO,mCAAmCF,EAAKqF,IAAI,IAAIrF,EAAKqF,IAAI,IAAI,KAAK88B,EAAQ,UAAU,GAC/G,EACDJ,YAAY,CACXhd,YAAa,SAASnrB,GACZ,UAANA,GACF7D,KAAKqX,mBAAmB7G,UAAU,YAAa,CAAC,CAAC3M,GAAGA,IACtD,KA9PJ,IACOwmB,CAgQL,EACDjgB,OAAU,SAASuC,GAClB,MAAO,CACN9f,KAAM,SACN8f,KAAM,gBAAiBkE,KAAM,SAC7BwkB,OAAO,EAAMxX,MAAM,EAAMzX,MAAO,GAChC+H,QAAQ68B,GAAmBr+B,GAE5B,EACD3G,IAAO,SAAS2G,GACf,MAAO,CACN9f,KAAM,MAAO8f,KAAM,gBAAiBkE,KAAM,MAC1CwkB,OAAO,EAAMxX,MAAM,EAAMzX,MAAO,GAChC+H,QAAQg9B,GAAgBx+B,GAEzB,EACDV,MAAS,WACR,MAAO,CACNpf,KAAM,QAAS8f,KAAM,gBAAiBkE,KAAM,eAC5CwkB,OAAO,EAAMxX,MAAM,EAAMzX,MAAO,GAChC+H,QAAQk9B,KAET,EACDl/B,WAAc,WACb,MAAO,CACNtf,KAAM,aAAc8f,KAAM,gBAAiBkE,KAAM,aACjDwkB,OAAO,EAAMxX,MAAM,EAAMzX,MAAO,GAChC+H,QAAQ,CACP,CAACtK,GAAG,sBAAuBnE,MAAOkO,MAAMC,KAAKC,YAAYxE,OAAO,wBAChE,CAACzF,GAAG,yBAA0BnE,MAAOkO,MAAMC,KAAKC,YAAYxE,OAAO,2BACnE,CAACzF,GAAG,yBAA0BnE,MAAOkO,MAAMC,KAAKC,YAAYxE,OAAO,2BACnE,CAACzF,GAAG,gCAAiCnE,MAAOkO,MAAMC,KAAKC,YAAYxE,OAAO,mCAG5E,EACDuB,MAAQ,WACP,MAAO,CACNhe,KAAK,QAAS8f,KAAK,gBAAiBkE,KAAK,YACzCwkB,OAAM,EAAMlnB,QAAQ,CACnB,CAACtK,GAAG,iBAAkBnE,MAAOkO,MAAMC,KAAKC,YAAYxE,OAAO,mBAC3D,CAACzF,GAAG,gBAAiBnE,MAAOkO,MAAMC,KAAKC,YAAYxE,OAAO,mBAG5D,EACDwB,MAAQ,WACP,MAAO,CACNje,KAAK,QAAS8f,KAAK,gBAAiBkE,KAAK,gBACzCwkB,OAAM,EAAMlnB,QAAQ,CACnB,CAACtK,GAAG,gBAAiBnE,MAAMkO,MAAMC,KAAKC,YAAYxE,OAAO,kBACzD,CAACzF,GAAG,YAAanE,MAAOkO,MAAMC,KAAKC,YAAYxE,OAAO,eAGxD,EACDyB,SAAW,WACV,MAAO,CACNle,KAAK,WAAY8f,KAAK,gBAAiBkE,KAAK,cAC5CwkB,OAAM,EAAMlnB,QAAQ,CACnB,CAACtK,GAAG,eAAgBnE,MAAMkO,MAAMC,KAAKC,YAAYxE,OAAO,iBACxD,CAACzF,GAAG,YAAanE,MAAOkO,MAAMC,KAAKC,YAAYxE,OAAO,eAGxD,EACDgC,QAAW,WACV,MAAO,CACNze,KAAM,UACN8f,KAAM,gBAAiBkE,KAAM,WAC7BwkB,OAAO,EAAMxX,MAAM,EAAMzX,MAAO,GAEjC,EACD,gBAAiB,WAChB,OAAOqI,GAAGi9B,aAAa,CAAC7+C,KAAM,iBAC9B,EACD,iBAAkB,WACjB,OAAO4hB,GAAGi9B,aAAa,CAAC7+C,KAAM,kBAC9B,EACD,eAAgB,WACf,OAAO4hB,GAAGi9B,aAAa,CAAC7+C,KAAM,gBAC9B,EACD,gBAAiB,WAChB,OAAO4hB,GAAGi9B,aAAa,CAAC7+C,KAAM,iBAC9B,EACD,gBAAiB,WAChB,OAAO4hB,GAAGi9B,aAAa,CAAC7+C,KAAM,gBAAiBgkB,KAAK,cACrD,GCrUD,SAASw7B,GAAa1/B,EAAM6J,GAE3B,IADA,IAAI1H,EAAO,GACHtuB,EAAG,EAAGA,EAAIg2B,EAAQz1B,OAAQP,IAAI,CACrC,IAAIqM,EAAO2pB,EAAQh2B,GACnB,GAAkB,UAAfg3B,GAAO3qB,GACTiiB,EAAK3pB,KAAK0H,OAEN,CACJ,IAAImpC,EAAOmW,GAAWt/C,GAAQs/C,GAAWt/C,GAAM8f,GAAQ8B,GAAGk9B,WAAW,CAAC9+C,KAAKA,IAC3EiiB,EAAK3pB,KAAK6wC,EACX,CACD,CACA,OAAOlnB,CACR,CAGA,SAASw9B,GAAc3/B,EAAM9f,EAAM2f,GAalC,MAZY,CACXC,KAAK,CACJ,CACCqK,QAAQ,EACRhI,KAAK,CAAC,CACLzD,OAAQ,EACRyD,KAAMu9B,GAAa1/B,EAAMH,MAG3BiC,GAAGc,MAAM,CAACA,MAAM1iB,KAInB,CC1DA,SAAS00C,GAAQv3B,GAChB,IAAIqgB,EAASzc,MAAMC,KAAKC,YACxB,OAAOuc,EAAOje,MAAMpC,IAASqgB,EAAO/gB,OAAOU,IAASqgB,EAAO9e,SAASvB,IAASA,CAC9E,CAkBO,SAASuiC,GAAe7T,GAC9B,IAAMtM,EAlBP,WACC,IAAI5rC,EAAGqM,EAAMuZ,EACZomC,EAAS,CACR5gC,KAAO,CAAC,OAAO,QACfc,OAAS,CAAC,gBAAgB,YAAY,gBAEvC0P,EAAS,CAAA,EAEV,IAAKvvB,KAAQ2/C,EAEZ,IADApwB,EAAOvvB,GAAQ,EACXrM,EAAE,EAAGA,EAAIgsD,EAAO3/C,GAAM9L,OAAQP,IACjC4lB,EAAQwH,MAAM6Q,KAAK+B,YAAY+gB,GAAQiL,EAAO3/C,GAAMrM,IAAK,+BAA+B4lB,MAAQ,EAChGgW,EAAOvvB,GAAQvM,KAAKsT,IAAIwS,EAAMgW,EAAOvvB,IAGvC,OAAOuvB,CACR,CAEeqwB,GACRR,EAAc1wB,GAAa0wB,YAEjC,OAAGvT,EACK,CACN,CACC5hB,QAAS,EACTzL,OAAQ,EACRoB,KAAM,CACL,CACCpB,OAAQ,EACRyD,KAAK,CACJ,CAAC49B,QAAS,gBACV,CAACA,QAAS,SACV,CAACA,QAAS,mBAGZ,CAACp+B,SAAUizB,GAAQ,QAAS50B,KAAM,mBAAoBtG,OAAQ4lC,KAGhE,CAACt/B,KAAM,oBACP,CACCmK,QAAS,EACTzL,OAAQ,EACRoB,KAAM,CACL,CACCpB,OAAQ,EACRyD,KAAK,CACJ,CAAC49B,QAAQ,kBACT,CAACA,QAAQ,gBACT,CAACA,QAAQ,mBAGX,CAACp+B,SAAUizB,GAAQ,QAAS50B,KAAM,mBAAoBtG,OAAQ4lC,KAGhE,CAACt/B,KAAM,oBACP,CAAE,GAGG,CACN,CACCmK,QAAS,EACTzL,OAAQ,EACRoB,KAAK,CACJ,CACCpB,OAAQ,EACRyD,KAAM,CACL,CACCjiB,KAAM,QAAS8f,KAAM,yBAA0BuK,MAAOqqB,GAAQ,SAAUlM,OAAO,EAC/ElnB,QAAQ,CACP,CAACtK,GAAI,aACL,CAACA,GAAI,cACL,CAACA,GAAI,gBACL,CAACA,GAAI,gBAGP,CACC4I,KAAK,CACJ,CAACigC,QAAS,gBACV,CAACA,QAAS,kBAGZ,CACCjgC,KAAK,CACJ,CAACigC,QAAS,SACV,CAACA,QAAS,qBAKd,CAACp+B,SAAUizB,GAAQ,QAAS50B,KAAM,mBAAoBtG,OAAQ4lC,EAAa7lC,MAAO,MAGpF,CAACuG,KAAM,oBACP,CACCmK,QAAS,EACTrK,KAAK,CACJ,CAACigC,QAAS,OAAQ//B,KAAM,gBAAiBuK,MAAOqqB,GAAQ,QAASn7B,MAAOgmB,EAAMxgB,MAC9E,CAAC8gC,QAAS,OAAQ//B,KAAM,gBAAiBuK,MAAOqqB,GAAQ,QAASn7B,MAAOgmB,EAAMxgB,MAC9E,CAAC0C,SAAUizB,GAAQ,aAAc50B,KAAM,mBAAoBtG,OAAQ4lC,KAGrE,CAACt/B,KAAM,oBACP,CACCmK,QAAS,EACTrK,KAAK,CACJ,CACCpB,OAAQ,EACRyD,KAAK,CACJ,CACCzD,OAAQ,EACRyD,KAAK,CACJ,CAAC49B,QAAS,cAAetmC,MAA0C,GAAlCwH,MAAMgB,KAAKmI,QAAQsf,YAAY,GAAK,GACrE,CAACqW,QAAS,eAGZ,CAACA,QAAS,aAGZ,CACCrhC,OAAQ,EACRyD,KAAK,CACJ,CACCzD,OAAQ,EACRyD,KAAK,CACJ,CAAC49B,QAAS,eACV,CAACA,QAAS,cACV,CAACA,QAAS,aACV,CAACA,QAAS,YAIZ,CAACA,QAAS,cACV,CAACA,QAAS,WAIZ,CAACp+B,SAAUizB,GAAQ,QAAS50B,KAAM,mBAAoBtG,OAAQ4lC,KAGhE,CAACt/B,KAAM,oBACP,CACCmK,QAAS,EACTrK,KAAK,CACJ,CACCpB,OAAQ,EACRyD,KAAK,CACJ,CAAC49B,QAAS,cACV,CAACA,QAAS,QACV,CAACA,QAAS,qBAGZ,CACCrhC,OAAQ,EACRyD,KAAK,CACJ,CAAC49B,QAAS,kBACV,CAACA,QAAS,QACV,CAACA,QAAS,qBAGZ,CAACp+B,SAAUizB,GAAQ,SAAU50B,KAAM,mBAAoBtG,OAAQ4lC,KAGjE,CAACt/B,KAAM,oBACP,CACCmK,QAAS,EACTrK,KAAK,CACJ,CAACigC,QAAS,UACV,CACCrhC,OAAQ,EACRyD,KAAK,CACJ,CAAC49B,QAAS,qBACV,CAACA,QAAS,uBAIZ,CAACp+B,SAAUizB,GAAQ,UAAW50B,KAAM,mBAAoBtG,OAAQ4lC,KAGlE,CAACt/B,KAAM,oBACP,CACCmK,QAAS,EACTrK,KAAK,CACJ,CAACqC,KAAK,CACL,CAAE49B,QAAS,YACX,CAAEA,QAAS,iBACX,CAAEA,QAAS,sBACX,CAAEA,QAAS,YACX,CAAEA,QAAS,WAEZ,CAAC59B,KAAK,CACL,CAAE49B,QAAS,aACX,CAAEA,QAAS,aACX,CAAEA,QAAS,aACX,CAAEA,QAAS,gBACX,CAAEA,QAAQ,gBAEX,CAACp+B,SAAUizB,GAAQ,QAAS50B,KAAM,mBAAoBtG,OAAQ4lC,KAGhE,CAACt/B,KAAM,oBACP,CACCmK,QAAS,EACTrK,KAAK,CACJ,CAACqC,KAAK,CACL,CAAC49B,QAAS,QAAS//B,KAAM,gBAAiBuK,MAAOqqB,GAAQ,SAAUn7B,MAAMgmB,EAAM1f,QAC/E,CAACggC,QAAS,cAAe//B,KAAM,gBAAiBuK,MAAOqqB,GAAQ,WAAYn7B,MAAMgmB,EAAM1f,UAExF,CAACoC,KAAK,CACL,CAAC49B,QAAS,QAAS//B,KAAM,gBAAiBuK,MAAOqqB,GAAQ,SAAUn7B,MAAMgmB,EAAM1f,QAC/E,CAACggC,QAAS,WAAY//B,KAAM,gBAAiBuK,MAAOqqB,GAAQ,YAAan7B,MAAMgmB,EAAM1f,UAEtF,CAAC4B,SAAUizB,GAAQ,UAAW50B,KAAM,mBAAoBtG,OAAQ4lC,KAGlE,CAACt/B,KAAM,oBACP,CACCmK,QAAS,EACTrK,KAAK,CACJ,CACCqC,KAAK,CACJ,CAACrC,KAAK,CACL,CAACigC,QAAQ,OACT,CAACA,QAAQ,YAEV,CACCjgC,KAAK,CACJ,CAACigC,QAAQ,kBACT,CAACA,QAAQ,kBAGX,CACCjgC,KAAK,CACJ,CAACigC,QAAQ,eACT,CAACA,QAAQ,oBAGX,CACCjgC,KAAK,CACJ,CAACigC,QAAQ,iBACT,OAKJ,CAACp+B,SAAUizB,GAAQ,QAAS50B,KAAM,mBAAoBtG,OAAQ4lC,KAGhE,CAACt/B,KAAM,oBACP,CAAE,EAEJ,CCzPA,IAAM6J,GAAU,CACf,YAAa,CAAC,OAAO,QACrBzM,KAAQ,CAAC,cAAc,YAAY,cAAc,aAAa,YAAY,SAAS,QAAQ,aAAa,WACxGG,MAAS,CAAC,aAAa,iBAAiB,OAAO,OAAO,kBAAkB,mBACxEC,OAAU,CAAC,WAIL,SAASiyB,GAAKzvB,GACpBA,EAAK+D,YAAY,mBAAmB,WAAA,OA8ErC,SAAe/D,GACdA,EAAK+D,YAAY,iBAAiB,SAACi8B,GAAQ,OAAKtb,GAAU1kB,EAAMggC,KACjE,CAhF2C3P,CAAMrwB,MAChDA,EAAK+D,YAAY,aAAa,SAAC+E,GACb,kBAAbA,EAAO5R,KACP4R,EAAO5oB,KAoFb,SAAqB8f,EAAM9f,EAAM6S,GAChC,IAAMktC,EAAUjgC,EAAKiD,GAAG,OAAOgH,SAAS/pB,GAEpC+/C,GACHA,EAAQ3rC,SAASvB,EACnB,CAxFImtC,CAAYlgC,EAAM8I,EAAO5oB,KAAM4oB,EAAO/V,OAEtC2xB,GAAU1kB,EAAMA,EAAKsD,eAAc,IAEtC,IAEA,IAAI2G,EAAW,GAEf,GAAGjK,EAAKuB,OAAOovB,QAAQ,CACtB,IAAIwP,EAAengC,EAAKuB,OAAOovB,QACb,QAAfwP,IACFA,EAAcC,GAAmBpgC,EAAKuB,OAAOwqB,UAC1C9qB,MAAM6J,YAAY9K,EAAKuB,OAAO0yB,aAChCj0B,EAAKuB,OAAO0yB,WAAY,IAE1BhqB,EFjCK,SAAwBjK,EAAKqgC,GACnC,IAAIC,EAAe,SAASvyB,GAC3B,IAAI,IAAIl6B,EAAG,EAAGA,EAAIk6B,EAAM35B,OAAQP,IAAI,CACnC,IAAIqM,EAAO6tB,EAAMl6B,GAAGksD,QACpB,GAAI7/C,EAAK,CACR,IAAImpC,EAAOmW,GAAWt/C,GAAQs/C,GAAWt/C,GAAM8f,GAAQ8B,GAAGk9B,WAAW,CAAC9+C,KAAKA,IAC3E+gB,MAAMgH,OAAO8F,EAAMl6B,GAAIw1C,EACxB,CAEGtb,EAAMl6B,GAAGisB,MACXwgC,EAAavyB,EAAMl6B,GAAGisB,MACpBiO,EAAMl6B,GAAGsuB,MACXm+B,EAAavyB,EAAMl6B,GAAGsuB,KACxB,GAGD,OADAm+B,EAAaD,GACNA,CACR,CEgBeE,CAAevgC,EAAMmgC,EACnC,MAECl2B,EFjBK,SAAoBjK,EAAKqgC,GAC/B,IAAI9+B,EAAS,GACb,IAAI,IAAI80B,KAASgK,EAChB9+B,EAAO/oB,KAAKmnD,GAAc3/B,EAAMq2B,EAAOgK,EAAUhK,KACjD90B,EAAO/oB,KAAKspB,GAAG5E,aAEhB,OAAOqE,CACR,CEUei/B,CAAWxgC,EAAMA,EAAKuB,OAAOsI,SAAWA,IAEtD,IAAM42B,EAAM,CACXzgC,KAAMiB,MAAMotB,IAAIqS,cAAgB,aAAe,4BAC/Ct+B,OAAQ,IACRX,KAAM,CACLzB,KAAK,UACL2C,IAAK,4CACLzL,GAAG,MACHiT,QAAQ,EACRF,SAAAA,EACA1H,GAAI,CACHM,SAAU,SAAU9P,EAAO6Q,EAAKrC,GAC/B,GAAa,QAAVA,EAAiB,CACnB,IAAMviB,EAASqU,KAAK21B,aACd9oC,EAAOlB,EAAOuiB,OAAOrhB,KAChB,UAARA,GAA6B,UAAT6S,IACtBA,EAAQ,IAET,IAAM0C,EAAe,aAARvV,EACb,IAAIuV,GAAgB,eAARvV,MAA4B6S,GAAU0C,GAAQvhB,MAAM6e,IAC/D,OAAO/T,EAAOsV,SAASsP,GACnB,GAAGnO,EAAK,CACZ,IAAMkrC,EAAUhtD,KAAKC,MAAM,IAAM,KAC3BgtD,EAAUjtD,KAAKsT,IAAI,EAAGtT,KAAKsJ,IAAI0jD,EAAS5tC,IAC1C6tC,GAAW7tC,IACdA,EAAQ6tC,EACR5hD,EAAOsV,SAASvB,IAGjBA,GAAS,IACV,CAGa,UAAR7S,GAA6B,UAAT6S,GACxBiN,EAAK6D,UAAU,aAAc,CAAC3jB,EAAM6S,IAErCkO,MAAM+iB,UAAUC,SAASjkB,EAAKiD,GAAG,SAClC,CACA,EACDof,YAAa,SAAUnrB,GACtB,IAAI2pC,EAAS7gC,EAAK8gC,QAAQ5pC,GACtB0mC,GAAQiD,GACXjD,GAAQiD,GAAQr8B,KAAKnR,KAAM2M,GAE3BA,EAAK6D,UAAU,YAAa,CAAC,CAAE3M,GAAI2pC,IACrC,KAMH,OADA7gC,EAAK6D,UAAU,aAAc,CAAC,UAAW48B,IAClCA,CAER,CAMA,SAAS/b,GAAU1kB,EAAMggC,GACxB,IAAMe,EAWP,SAAsB/gC,EAAMggC,GAc3B,IAbA,IAAMgB,EAAY,CACjB,cACA,YACA,aACA,iBACA,SACA,aACA,SAGK1jC,EAAO0iC,EAAS,GAChBe,EAAYE,GAAcjhC,EAAM1C,GAE9BzpB,EAAI,EAAGA,EAAImsD,EAAS5rD,OAAQP,IAAI,CAGvC,IAFA,IAAMqtD,EAAYD,GAAcjhC,EAAMggC,EAASnsD,IAEvCgG,EAAImnD,EAAU5sD,OAAO,EAAGyF,GAAK,EAAGA,IAAI,CAC3C,IAAMsnD,EAAWH,EAAUnnD,GACxBknD,EAAUI,IAAaD,EAAUC,YAC5BJ,EAAUI,GACjBH,EAAU/oC,OAAOpe,EAAG,GAEtB,CAEA,IAAImnD,EAAU5sD,OACb,KACF,CAEA,OAAO2sD,CACR,CAzCmBK,CAAaphC,EAAMggC,GACrChgC,EAAKiD,GAAG,OAAOyhB,UAAUqc,EAC1B,CAyCA,SAASE,GAAcjhC,EAAM1C,GAC5B,IAAMyB,EAAOiB,EAAKiD,GAAG,SAAStJ,QAAQ2D,EAAKjE,IAAKiE,EAAKG,QACrD,GAAGsB,EAAI,CAAA,IAAAsiC,EAAA/6B,GACoBvH,EAAI,GAA7BzB,EAAKjE,IAAGgoC,EAAA,GAAE/jC,EAAKG,OAAM4jC,EAAA,EAAA,CAEvB,IAAM/+B,EAAM4P,GAASlS,EAAM1C,GACrB+U,EAAS/P,EAAMrB,MAAMvG,KAAK4H,EAAIkQ,OAAS,GAE7C,IAAK,IAAI3+B,KAAKk7B,GACTsD,EAAOx+B,KACVw+B,EAAOx+B,GAAKk7B,GAAcl7B,IAE5Bw+B,EAAO,aAAeA,EAAO,aAAap8B,QAAQ,KAAM,IAExD,IAAMunB,EAASqV,GAAU7S,EAAM1C,EAAKjE,IAAKiE,EAAKG,SAAW,SAGzD,OAFA4U,EAAO7U,OAASwe,GAASxe,GAAU,SAAWA,EAEvC6U,CACR,CC7JO,SAASivB,GAAUjoC,EAAK2G,EAAMuhC,GACpC,IAAI1hC,EAAUG,EAAKiD,GAAG,SAAS1B,OAAO1B,QAGlC2F,EAAQ,CACXnM,IAAIA,EACJoE,OAAOoC,EAJ2B,SAAjBA,EAAQ,GAAG3I,GAAgB,EAAI,GAIpBA,IAEzBsqC,EAAO,CACVnoC,IAAMkoC,GAAUloC,EAChBoE,OAAQoC,EAAQA,EAAQzrB,OAAO,GAAG8iB,IAGhCsO,EAAM/H,QAAU+jC,EAAK/jC,QACvBgkC,GAAaj8B,EAAOg8B,EAAMxhC,EAC5B,CAEO,SAAS0hC,GAAU1hC,GACzB,IAAIwb,EAAQxb,EAAKiD,GAAG,SAASlI,KAAKygB,MAC9B3b,EAAUG,EAAKiD,GAAG,SAAS1B,OAAO1B,QAClC8hC,EAA+B,SAAjB9hC,EAAQ,GAAG3I,GAAgB,EAAI,EAE7CsO,EAAQ,CACXnM,IAAKmiB,EAAM,GACX/d,OAAQoC,EAAQ8hC,GAAazqC,IAE1BsqC,EAAO,CACVnoC,IAAKmiB,EAAMA,EAAMpnC,OAAO,GACxBqpB,OAAQoC,EAAQA,EAAQzrB,OAAO,GAAG8iB,IAGhCsO,EAAM/H,QAAU+jC,EAAK/jC,QACvBgkC,GAAaj8B,EAAOg8B,EAAMxhC,EAC5B,CAEO,SAAS4hC,GAAankC,EAAQuC,EAAM6hC,GAC1C,IAAIrmB,EAAQxb,EAAKiD,GAAG,SAASlI,KAAKygB,MAOlCimB,GAHY,CAACpoC,IAHEmiB,EAAM,GAGO/d,OAAQA,GACzB,CAACpE,IAHEmiB,EAAMA,EAAMpnC,OAAO,GAGPqpB,OAASokC,GAAapkC,GAEtBuC,EAC3B,CAEO,SAAS8hC,GAAcrkC,EAAQuC,GACrC,IAAM+hC,EAAe/hC,EAAKiD,GAAG,SAASoO,gBACtC,SAAI0wB,GACCtkC,GAAUskC,EAAav8B,MAAM/H,QAAUA,GAAUskC,EAAat8B,IAAIhI,OAIxE,CAEO,SAASukC,GAAe3oC,EAAKoE,EAAQuC,GAC3C,OAAOiiC,GAAc5oC,EAAK2G,IAAS8hC,GAAcrkC,EAAQuC,EAC1D,CAEO,SAASiiC,GAAc5oC,EAAK2G,GAClC,IAAM+hC,EAAe/hC,EAAKiD,GAAG,SAASoO,gBACtC,SAAI0wB,GACC1oC,GAAO0oC,EAAav8B,MAAMnM,KAAOA,GAAO0oC,EAAat8B,IAAIpM,IAI/D,CAEO,SAAS6oC,GAAczkC,EAAQuC,GACrC,IAAM+hC,EAAe/hC,EAAKiD,GAAG,SAASoO,gBAEjC0wB,EAKJH,GAFWjuD,KAAKsJ,IAAI8kD,EAAav8B,MAAM/H,OAAQskC,EAAat8B,IAAIhI,OAAQA,GAErDuC,EADRrsB,KAAKsT,IAAI86C,EAAav8B,MAAM/H,OAAQskC,EAAat8B,IAAIhI,OAAQA,IAHxEmkC,GAAankC,EAAQuC,EAMvB,CAEA,SAASyhC,GAAaxtD,EAAGkB,EAAG6qB,GAC3BA,EAAKiD,GAAG,SAASk/B,cAAcluD,EAAGkB,EACnC,CAGO,SAASitD,GAAa3kC,EAAQuC,GACpC,IAAM2I,EAAO3I,EAAKiD,GAAG,SACjBxJ,EAAQ,EACN6O,EAAcK,EAAK0rB,gBAAgB52B,GAAQhE,MAEjDkP,EAAK05B,SAAQ,SAAShpC,GACrB,IAAIipC,EAAe,GACbvjC,EAAO4J,EAAKhP,QAAQN,EAAKoE,GAC/B,KAAGsB,GAAQA,EAAK,GAAK,GAArB,CAGA,IAAMhM,EAAQiN,EAAKmG,aAAa9M,EAAKoE,GAC/BJ,EAAOhK,KAAKuhC,QAAQv7B,EAAKoE,GACzBuH,EAAQhF,EAAKkS,SAAS7Y,EAAKoE,GAC3BkF,EAAMqC,EAAQA,EAAM9N,GAAK,GAE/B,GAAImG,EAAKpnB,QAAQ,kBAAmB,IAEnCqsD,EADazuB,GAAY7T,EAAM3C,EAAMsF,GACjBlJ,MAGrB,IAAM8W,EAAOvQ,EAAK4U,MACf5U,EAAKqhB,cAAchoB,EAAKoE,KAC1B6kC,GAAgB,GAAK/xB,GACnBvQ,EAAK80B,cAAcz7B,EAAKoE,KAC1B6kC,GAAgB,GAAK/xB,GACnB,wBAAwBnqB,KAAK2M,KAC/BuvC,GAAgB,GAAK/xB,GACnBvL,GAA6B,QAApBA,EAAMwN,MAAMxT,MAAkBsjC,EAAeh6B,IACxDg6B,EAAeh6B,GACZg6B,EAAe7oC,IAClBA,EAAQ6oC,EAtBR,CAuBF,IAEA35B,EAAKwsB,eAAe13B,EAAQhE,EAC7B,CAEO,SAAS8oC,GAAUlpC,EAAK2G,GAC9B,IAAItG,EAAS,GAEbsG,EAAKgU,OAAO0gB,YAAW,SAASj3B,GAC/B,GAAa,SAAVA,EAAkB,CACpB,IAAMJ,EAAOhK,KAAKuhC,QAAQv7B,EAAKoE,GAG3BhE,EAAQpG,KAAKghC,gBAAgB52B,GAAQhE,MACnCsF,EAAOiB,EAAKgU,OAAOra,QAAQN,EAAKoE,GACnCsB,IACFtF,EAAQuG,EAAKgU,OAAO6gB,YAAY,CAACx7B,IAAI0F,EAAK,GAAItB,OAAOsB,EAAK,KAAKmV,aAEhE,IAAIlP,EAAQhF,EAAKkS,SAAS7Y,EAAKoE,GAC3BkF,EAAMqC,EAAQA,EAAM9N,GAAK,GAE7B,GAAImG,EAAKpnB,QAAQ,kBAAmB,IAAK,CACxC,IAAIwf,EAAOoe,GAAY7T,EAAM3C,EAAMsF,EAAKlJ,GACpChE,EAAKiE,OAASA,IAAQA,EAASjE,EAAKiE,OACzC,CACD,CACD,IACAsG,EAAKgU,OAAOwuB,aAAanpC,EAAKK,EAC/B,CAEO,SAAS+oC,GAAgBj9B,EAAOC,EAAKzF,GAC3C,GAAIA,EAAKgU,OAAOzS,OAAOmrB,OAAvB,CAEA,IAAM/jB,EAAO3I,EAAKgU,OAEZrR,EAAM,kBAER3Q,EAAKwT,EAAMnM,IAAKpJ,EAAKwV,EAAIpM,IAAKqpC,EAAKl9B,EAAM/H,OAAQklC,EAAKl9B,EAAIhI,OAExDoC,EAAU8I,EAAKpH,OAAO1B,QACtB8hC,EAAc9hC,EAAQ,GAAG3I,GAa/B,GAXS,SAANwrC,EACCA,GAAMC,GACRn9B,EAAM/H,OAASilC,EAAKf,EACpBl8B,EAAIhI,OAASklC,EAAK9iC,EAASA,EAAQzrB,OAAO,GAAI8iB,IAG9CsO,EAAM/H,OAASilC,EAAKf,EAER,SAANgB,IACPl9B,EAAIhI,OAASklC,EAAKhB,GAEhB1xC,EAAG+B,EAAE,CAAA,IAAA0c,EAAa,CAACze,EAAI+B,GAAfA,EAAE0c,EAAA,GAAEze,EAAEye,EAAA,EAAA,CACjB,GAAGi0B,EAAGD,EAAE,CAAA,IAAA/zB,EAAa,CAACg0B,EAAID,GAAfA,EAAE/zB,EAAA,GAAEg0B,EAAEh0B,EAAA,EAAA,CAoBjB,GAlBAhG,EAAK05B,SAAQ,SAAShpC,GAClBA,EAAMrH,GAAMqH,EAAMpJ,EACpB0Y,EAAKstB,cAAc58B,EAAK,QAASsJ,GAAK,GAEtCgG,EAAKqtB,WAAW38B,EAAK,QAASsJ,GAAK,EACrC,IACA1B,MAAMkL,OAAM,WAAA,OAAMxD,EAAKtT,aAEvBsT,EAAK+rB,YAAW,SAAS3nB,GACxB,IAAMwS,EAAO5W,EAAKi6B,cAAc71B,GACtB,SAAPA,GAAmBwS,IAEnBxS,EAAM21B,GAAM31B,EAAM41B,EACpB1hC,MAAM6Q,KAAKunB,UAAU9Z,EAAM5c,GAE3B1B,MAAM6Q,KAAKwnB,OAAO/Z,EAAM5c,GAAK,GAC/B,IAEG3C,EAAKiD,GAAG,cAAc,CACxB,IAAIjF,EAAQ,GAEZ,GAAG0kC,GAAMC,EAAG,CACX,IAAI3wC,EAAG,CACN,IAAMwpB,EAAQ7S,EAAK5N,KAAKygB,MACxBxpB,EAAKwpB,EAAM,GACXvrB,EAAKurB,EAAMA,EAAMpnC,OAAO,EACzB,CAEA,IAAM25B,GADN/P,EAAQwP,GAAQxb,EAAI0wC,EAAIzyC,EAAI0yC,IACRntD,MAAM,KACvBu4B,EAAM,IAAMA,EAAM,KACpB/P,EAAQ+P,EAAM,GAChB,CAEA/N,EAAKiD,GAAG,cAAc3O,SAAS0J,EAChC,CA3D+B,CA4DhC,uMCjNA,SAAS42B,GAAQv3B,GAEhB,OADa4D,MAAMC,KAAKC,YAAYxE,OACtBU,IAASA,CACxB,CAUA,SAASm2B,GAAOzgC,GACf,OAAOA,IAAU7e,MAAM6e,KAAWwqB,GAAcxqB,EACjD,CAEO,IAAM8vC,GAAa,CACzB/lC,OAAO,CACN,CAAE5F,GAAG,UAAWw6B,MAAM,OAAQ7qB,QAAQ,SAAS5yB,EAAEkB,GAChD,MAAa,KAANlB,GAAe,EAAFA,EAAQ,EAAFkB,CAC3B,GACA,CAAE+hB,GAAG,OAAQw6B,MAAM,OAAQ7qB,QAAQ,SAAS5yB,EAAEkB,GAC7C,MAAa,KAANlB,GAAe,EAAFA,EAAQ,EAAFkB,CAC3B,GACA,CAAE+hB,GAAG,iBAAkBw6B,MAAM,OAAQ7qB,QAAQ,SAAS5yB,EAAEkB,GACvD,MAAa,KAANlB,GAAe,EAAFA,GAAS,EAAFkB,CAC5B,GACA,CAAE+hB,GAAG,cAAew6B,MAAM,OAAQ7qB,QAAQ,SAAS5yB,EAAEkB,GACpD,MAAa,KAANlB,GAAe,EAAFA,GAAS,EAAFkB,CAC5B,GACA,CAAE+hB,GAAG,QAASw6B,MAAM,OAAQ7qB,QAAQ,SAAS5yB,EAAEkB,GAAI,OAAOlB,GAAKkB,CAAG,GAClE,CAAE+hB,GAAG,WAAYw6B,MAAM,OAAQ7qB,QAAQ,SAAS5yB,EAAEkB,GAAI,OAAOlB,GAAKkB,CAAG,GACrE,CAAE+hB,GAAG,WAAYw6B,MAAM,OAAQ7qB,QAAQ,SAAS5yB,EAAEkB,GACjD,OAA2E,IAApElB,EAAEU,WAAWU,cAAcS,QAAQX,EAAER,WAAWU,cACxD,GACA,CAAE6hB,GAAG,cAAew6B,MAAM,OAAQ7qB,QAAQ,SAAS5yB,EAAEkB,GACpD,OAA2E,IAApElB,EAAEU,WAAWU,cAAcS,QAAQX,EAAER,WAAWU,cACxD,IAEDgoB,KAAM,CACL,CAAEnG,GAAG,WAAYw6B,MAAM,OAAQ7qB,QAAQ,SAAS5yB,EAAEkB,GACjD,OAA2E,IAApElB,EAAEU,WAAWU,cAAcS,QAAQX,EAAER,WAAWU,cACxD,GACA,CAAE6hB,GAAG,cAAew6B,MAAM,OAAQ7qB,QAAQ,SAAS5yB,EAAEkB,GACpD,OAA2E,IAApElB,EAAEU,WAAWU,cAAcS,QAAQX,EAAER,WAAWU,cACxD,GACA,CAAE6hB,GAAG,QAASw6B,MAAM,OAAQ7qB,QAAQ,SAAS5yB,EAAEkB,GAC9C,OAAOlB,EAAEU,WAAWU,gBAAkBF,EAAER,WAAWU,aACpD,GACA,CAAE6hB,GAAG,WAAYw6B,MAAM,OAAQ7qB,QAAQ,SAAS5yB,EAAEkB,GACjD,OAAOlB,EAAEU,WAAWU,gBAAkBF,EAAER,WAAWU,aACpD,GACA,CAAE6hB,GAAG,aAAcw6B,MAAM,OAAQ7qB,QAAQ,SAAS5yB,EAAEkB,GACnD,OAAiF,IAA1ElB,EAAEU,WAAWU,cAAcytD,YAAY3tD,EAAER,WAAWU,cAAe,EAC3E,GACA,CAAE6hB,GAAG,gBAAiBw6B,MAAM,OAAQ7qB,QAAQ,SAAS5yB,EAAEkB,GACtD,OAAiF,IAA1ElB,EAAEU,WAAWU,cAAcytD,YAAY3tD,EAAER,WAAWU,cAAe,EAC3E,GACA,CAAE6hB,GAAG,WAAYw6B,MAAM,OAAQ7qB,QAAQ,SAAS5yB,EAAEkB,GAGjD,OAFAlB,EAAIA,EAAEU,WACNQ,EAAIA,EAAER,YACoE,IAAnEV,EAAEoB,cAAcS,QAAQX,EAAEE,cAAepB,EAAEG,OAASe,EAAEf,OAC9D,GACA,CAAE8iB,GAAG,cAAew6B,MAAM,OAAQ7qB,QAAQ,SAAS5yB,EAAEkB,GAGpD,OAFAlB,EAAIA,EAAEU,WACNQ,EAAIA,EAAER,YACoE,IAAnEV,EAAEoB,cAAcS,QAAQX,EAAEE,cAAepB,EAAEG,OAASe,EAAEf,OAC9D,IAED4oB,KAAM,CACL,CAAE9F,GAAG,UAAWw6B,MAAM,aAAc7qB,QAAS,SAAS5yB,EAAGkB,GACxD,OAAOq+C,GAAOv/C,IAAMA,EAAIkB,CACzB,GACA,CAAE+hB,GAAG,OAAQw6B,MAAM,aAAc7qB,QAAS,SAAS5yB,EAAGkB,GACrD,OAAOq+C,GAAOv/C,IAAMA,EAAIkB,CACzB,GACA,CAAE+hB,GAAG,iBAAkBw6B,MAAM,aAAc7qB,QAAS,SAAS5yB,EAAGkB,GAC/D,OAAOq+C,GAAOv/C,IAAMA,GAAKkB,CAC1B,GACA,CAAE+hB,GAAG,cAAew6B,MAAM,aAAc7qB,QAAS,SAAS5yB,EAAGkB,GAC5D,OAAOq+C,GAAOv/C,IAAMA,GAAKkB,CAC1B,GACA,CAAE+hB,GAAG,QAASw6B,MAAM,aAAc7qB,QAAS,SAAS5yB,EAAGkB,GACtD,OAAOq+C,GAAOv/C,IAAMA,GAAKkB,CAC1B,GACA,CAAE+hB,GAAG,WAAYw6B,MAAM,aAAc7qB,QAAS,SAAS5yB,EAAGkB,GACzD,OAAQq+C,GAAOv/C,IAAMA,GAAKkB,CAC3B,GACA,CAAE+hB,GAAG,UAAWw6B,MAAO,kBAAmB7qB,QAAS,SAAS5yB,EAAGkB,GAC9D,QAAKq+C,GAAOv/C,OACHkB,EAAEqwB,OAASvxB,EAAIkB,EAAEqwB,UAAYrwB,EAAEswB,KAAOxxB,EAAIkB,EAAEswB,KACtD,GACA,CAAEvO,GAAG,aAAcw6B,MAAO,kBAAmB7qB,QAAS,SAAS5yB,EAAGkB,GACjE,QAAKq+C,GAAOv/C,MACHkB,EAAEqwB,OAASvxB,GAAKkB,EAAEqwB,QAAYrwB,EAAEswB,KAAOxxB,GAAKkB,EAAEswB,IACxD,KAIWs9B,GAAuB9hC,MAAMvG,KAAKmoC,IC9C/C,SAASG,KACR,IAAMpnB,EAAQ3a,MAAMvG,KAAKmoC,IASzB,OARAjnB,EAAM9e,OAAS8e,EAAM9e,OAAOzoB,OAAO,CAClC,CAAE6iB,GAAG,UAAW2P,QAAS,SAAS5yB,EAAGkB,GACpC,QAASA,EAAEqwB,OAASvxB,EAAIkB,EAAEqwB,UAAYrwB,EAAEswB,KAAOxxB,EAAIkB,EAAEswB,IACtD,GACA,CAAEvO,GAAG,aAAc2P,QAAS,SAAS5yB,EAAGkB,GACvC,OAASA,EAAEqwB,OAASvxB,GAAKkB,EAAEqwB,QAAYrwB,EAAEswB,KAAOxxB,GAAKkB,EAAEswB,GACxD,KAEMmW,CACR,CAEA,SAASzV,GAAanG,EAAMjN,GAW3B,OAVG7e,MAAY,EAAN6e,GACe,KAAnBA,EAAM2uB,OAAO,IAAa3uB,EAAM3e,OAAS,GAE/B,QADb2e,EAAQiN,EAAKoS,OAAO9V,WAAWnc,KAAK4S,EAAM9d,UAAU,GAAI+qB,EAAK0S,OAAO3a,iBAEnEhF,EAAQ,IAIVA,GAAc,EAERA,CACR,CAkCO,SAASkwC,GAAgBjjC,EAAM3G,EAAKoE,EAAQy+B,GAClD,IAAIv5B,EAAM,GAEV,IAAK3C,EAAK6iC,WAAWK,OAAO,CAC3B,IAAMC,EAAanjC,EAAK6iC,WAAW3vC,IAAImG,EAAKoE,GAC5C,GAAG0lC,EAAW,CACb,IAAMpkC,EAAOiB,EAAKiD,GAAG,SAAStJ,QAAQN,EAAKoE,GACvC1K,EAAQiN,EAAKmG,aAAa9M,EAAIoE,GAAO,GACrC1K,GAAmB,IAAVA,IACZA,EAAQ,IAET,IAAI4U,EAAOwY,GAAQngB,EAAM3G,EAAKoE,GAC1BkK,GAAgB,UAARA,IACXA,EAAO,QAER,IAFe,IAAAgE,EAAAA,WAGd,IAGI9E,EAHAu8B,EAAerwC,EACbswC,EAAOF,EAAWtvD,GAAG,GACrByvD,EAAWtjC,EAAK6iC,WAAWS,SAG7BC,EAAa,CAAC,OAAQ57B,EAAM,SAAU,QAC1C47B,EAAaA,EAAWj+C,QAAO,SAAC1M,EAAG/E,GAAC,OAAK0vD,EAAWztD,QAAQ8C,IAAM/E,KAElE,IAAI,IAAIgG,EAAI,EAAGA,EAAI0pD,EAAWnvD,OAAQyF,IAAI,CACzC,IAAMqnC,EAAYqiB,EAAW1pD,GAG7B,GADAgtB,EAAUa,GAAS47B,EAASpiB,IAAY,SAAA5e,GAAG,OAAIA,EAAIpL,IAAMmsC,KAC9C,CACVx8B,EAAUA,EAAQA,QACF,QAAbqa,GAA+B,SAARmiB,GAA2B,YAARA,IAC5CD,EAAelH,GAChB,KACD,CACD,CAEA,IAAIsH,EAAUL,EAAWtvD,GAAG,GAS5B,GAPC2vD,EADEviC,MAAM1K,QAAQitC,GACN,CACTh+B,MAAOW,GAAanG,EAAMwjC,EAAQ,IAClC/9B,IAAKU,GAAanG,EAAMwjC,EAAQ,KAGvBr9B,GAAanG,EAAMwjC,IAE1B7gC,GAAOkE,GAAWA,EAAQu8B,EAAcI,GAAS,CAEpD,GADA7gC,EAAMwgC,EAAWtvD,GAAG,IAChBkrB,EAAI,OAAA,EAERs4B,GAAWr3B,EAAM3G,EAAKoE,EAAQ0lC,EAAWtvD,GAAG,IAAI,EACjD,MAECwjD,GAAWr3B,EAAM3G,EAAKoE,EAAQ0lC,EAAWtvD,GAAG,IAAI,IArCzCA,EAAIsvD,EAAW/uD,OAAS,EAAGP,GAAK,IAAM83B,IAAH93B,KAuC7C,CACD,CACA,OAAO8uB,CACR,CAGA,SAAS8gC,GAAmB9W,EAAMtzB,EAAKoE,EAAQyI,GAM9C,OALAA,EAAMg9B,QAAS,EACXvW,EAAKtzB,KACRszB,EAAKtzB,GAAO,IACTszB,EAAKtzB,GAAKoE,KACbkvB,EAAKtzB,GAAKoE,GAAU,IACdkvB,EAAKtzB,GAAKoE,EAClB,CAGA,SAASzH,GAAMgK,EAAMjF,EAAM9a,GAC1B,GAAGA,GAAQA,GAAQ+f,EAAKiM,iBAAiB,CACxC,IAAMnO,EAAQ00B,GAASxyB,EAAM/f,GAC1B6d,IACFA,EAAMkM,QAAQ64B,WAAa9nC,EAC7B,KACI,CAEH,IAAM2oC,EAAgB,CACrB,IAAK,UACL,IAAK,OACL,IAAK,QACL,KAAM,WACN,KAAM,WAIP,GADArwC,KAAK6vC,QAAS,GACTnoC,EAAM,OAGX,IADA,IAAIlnB,EAAIknB,EAAK3mB,OACPP,KAAI,CACT,IAAMS,EAAIymB,EAAKlnB,GACTsvD,EAAaM,GAAmBpwC,KAAKomC,MAAMnlD,EAAE,GAAGA,EAAE,GAAG+e,MAC3D/e,EAAE,GAAKovD,EAAepvD,EAAE,KAAQA,EAAE,GAClC6uD,EAAW3qD,KAAK,CAAClE,EAAE,GAAGA,EAAE,GAAGA,EAAE,IAC9B,CACD,CACD,CAEA,SAASgrB,GAAMU,EAAM/f,GACpB,GAAGA,GAAQA,GAAQ+f,EAAKiM,iBAAiB,CACxC,IAAMnO,EAAQ00B,GAASxyB,EAAM/f,GAC1B6d,IACFA,EAAMkM,QAAQ64B,WAAa,GAC7B,MAECxvC,KAAKomC,MAAQ,EACf,CAEA,SAASlG,GAAOvzB,EAAM3G,EAAKoE,EAAQkmC,EAAS1jD,GAG3C,GAFA0jD,EAAQhrD,KAAI,SAAA86B,GAAI,OAAImwB,GAAgB5jC,EAAMyT,MAEvCxzB,GAAQA,GAAQ+f,EAAKiM,iBAAiB,CACxC,IAAMnO,EAAQ00B,GAASxyB,EAAM/f,GAC1B6d,IACFvD,GAAOyF,EAAM3G,EAAKoE,EAAQxd,GAEtB6d,EAAMkM,QAAQ64B,aACjB/kC,EAAMkM,QAAQ64B,WAAa,IAE5Bc,EAAQprD,SAAQ,SAAAwlB,GACfD,EAAMkM,QAAQ64B,WAAWrqD,KAAM6gB,CAAAA,EAAKoE,GAAMppB,OAAA23C,GAAKjuB,IAChD,IAEF,MAEC0lC,GAAmBpwC,KAAKomC,MAAOpgC,EAAKoE,EAAQpK,MAC5CA,KAAKomC,MAAMpgC,GAAKoE,GAAUkmC,CAE5B,CAEA,SAASzwC,GAAI8M,EAAM3G,EAAKoE,EAAQxd,GAC/B,IAAI8d,EACJ,GAAG9d,GAAQA,GAAQ+f,EAAKiM,iBAAiB,CACxC,IAAMnO,EAAQ00B,GAASxyB,EAAM/f,GAC7B,GAAG6d,GAASA,EAAMkM,QAAQ64B,WAAW,CAIpC,IAHA,IACIr2B,EADEq2B,EAAa5hC,MAAMvG,KAAKoD,EAAMkM,QAAQ64B,YAExCgB,EAAe,IACuF,IAAnGr3B,EAAQ9E,GAAcm7B,GAAY,SAAA9kC,GAAS,OAAIA,EAAU,IAAM1E,GAAO0E,EAAU,IAAMN,OAC5FomC,EAAarrD,KAAKqqD,EAAWr2B,GAAOlhB,MAAM,EAAE,IAC5Cu3C,EAAW5qC,OAAOuU,EAAO,GAEvBq3B,EAAazvD,SACf2pB,EAAY8lC,EACd,CACD,MACQxwC,KAAKomC,MAAMpgC,IAAQhG,KAAKomC,MAAMpgC,GAAKoE,KAC1CM,EAAY1K,KAAKomC,MAAMpgC,GAAKoE,IAAW,MACxC,OAAOM,GAAa,IACrB,CAEA,SAASxL,GAAIyN,EAAM3G,EAAKoE,EAAQM,EAAWhL,EAAOiS,EAAO/kB,GACxD,IAAM6jD,EAAeF,GAAgB5jC,EAAM,CAACjC,EAAWhL,EAAOiS,IAE9D,GAAG/kB,GAAQA,GAAQ+f,EAAKiM,iBAAiB,CACxC,IAAMnO,EAAQ00B,GAASxyB,EAAM/f,GAC1B6d,IACEA,EAAMkM,QAAQ64B,aACjB/kC,EAAMkM,QAAQ64B,WAAa,IAC5B/kC,EAAMkM,QAAQ64B,WAAWrqD,KAAM6gB,CAAAA,EAAKoE,GAAMppB,OAAA23C,GAAK8X,KAEjD,MAECL,GAAmBpwC,KAAKomC,MAAOpgC,EAAKoE,EAAQpK,MAAM7a,KAAKsrD,EACzD,CAEA,SAASvpC,GAAOyF,EAAM3G,EAAKoE,EAAQxd,GAClC,GAAGA,GAAQA,GAAQ+f,EAAKiM,iBAAiB,CACxC,IAAMnO,EAAQ00B,GAASxyB,EAAM/f,GAC7B,GAAG6d,GAASA,EAAMkM,QAAQ64B,WAEzB,IADA,IAAIr2B,GACoH,IAAjHA,EAAQ9E,GAAc5J,EAAMkM,QAAQ64B,YAAY,SAAA9kC,GAAS,OAAIA,EAAU,IAAM1E,GAAO0E,EAAU,IAAMN,OAC1GK,EAAMkM,QAAQ64B,WAAW5qC,OAAOuU,EAAO,EAG1C,KACI,CACgBnZ,KAAKH,IAAImG,EAAKoE,WAEzBpK,KAAKomC,MAAMpgC,GAAKoE,EACzB,CACD,CAEA,SAAS3E,GAAUkH,EAAM/f,GACxB,IAAI8a,EAAO,GACX,GAAG9a,GAAQA,GAAQ+f,EAAKiM,iBAAiB,CACxC,IAAMnO,EAAQ00B,GAASxyB,EAAM/f,GAC1B6d,GAASA,EAAMkM,QAAQ64B,aACzB9nC,EAAO+C,EAAMkM,QAAQ64B,WACvB,MAEC,IAAI,IAAIxpC,KAAOhG,KAAKomC,MACnB,IAAI,IAAIh8B,KAAUpK,KAAKomC,MAAMpgC,GAC5B,IAAI,IAAIxlB,EAAI,EAAGA,EAAIwf,KAAKomC,MAAMpgC,GAAKoE,GAAQrpB,OAAQP,IAAI,CACtD,IAAMkqB,EAAY1K,KAAKomC,MAAMpgC,GAAKoE,GAAQ5pB,GAC1CknB,EAAKviB,KAAK,CAAC6gB,EAAKoE,EAAQM,EAAU,GAAIA,EAAU,GAAIA,EAAU,IAC/D,CAEH,OAAOhD,CACR,CA0BO,SAASgpC,GAAwB/jC,EAAMhC,EAAO/d,GACpDqlB,GAAMnS,KAAI,WACTya,GAAU5P,EAAOgC,GAAM,SAASA,EAAM1C,GACrC,IAAMS,EAAYiC,EAAK6iC,WAAW3vC,IAAIoK,EAAKjE,IAAKiE,EAAKG,OAAQxd,GAC1D8d,GACFimC,GAAiB,SAAU1mC,EAAKjE,IAAKiE,EAAKG,OAAQM,EAAW,KAAMiC,EAAM/f,EAC3E,IACA+f,EAAK3K,SACN,GACD,CAEO,SAAS4uC,GAAejkC,EAAMoW,EAAO/c,EAAK0T,EAAK6qB,GACrD,IAAM75B,EAAYqY,EAAMrY,UAExBimC,GAAiB,SAAU3qC,EAAK0T,EADb/M,EAAK6iC,WAAW3vC,IAAImG,EAAI0T,IACO,KAAOhP,EAAWiC,GACtD,IAAX43B,GACFoM,GAAiB,SAAU5tB,EAAM/c,IAAK+c,EAAMrJ,IAAKhP,EAAW,KAAMiC,EACpE,CAEO,SAASgkC,GAAiB9jD,EAAMmZ,EAAKoE,EAAQymC,EAAcJ,EAAc9jC,EAAM/f,GACjF+f,EAAK6D,UAAU,uBAAwB,CAACxK,EAAKoE,EAAQymC,EAAcJ,EAAc7jD,MACpF+f,EAAK6iC,WAAW3iD,GAAMgY,MAAM8H,EAAK6iC,WAAY,CAACxpC,EAAKoE,EAAgB,UAARvd,EAAmBD,EAAO6jD,IACrF9jC,EAAK6D,UAAU,sBAAuB,CAACxK,EAAKoE,EAAQymC,EAAcJ,EAAc7jD,IAElF,CAEA,SAAS2jD,GAAgB5jC,EAAMjC,GAC9B,IAAMyb,EAAMzb,EAAU,GAGtB,MAFa,KAAVyb,EAAI,KACNzb,EAAU,GAAKiC,EAAKoS,OAAO9V,WAAWtG,MAAMwjB,GAAKx6B,QAC3C+e,CACR,CD7QAglC,GAAqBoB,WAAa,CACjC,CAAEjtC,GAAG,UAAW2P,QAAS,SAAC5yB,EAAEkB,GAAC,OAAKlB,EAAEU,WAAWP,OAASe,CAAC,GACzD,CAAE+hB,GAAG,OAAQ2P,QAAS,SAAC5yB,EAAEkB,GAAC,OAAKlB,EAAEU,WAAWP,OAASe,CAAC,GACtD,CAAE+hB,GAAG,iBAAkB2P,QAAS,SAAC5yB,EAAEkB,GAAC,OAAKlB,EAAEU,WAAWP,QAAUe,CAAC,GACjE,CAAE+hB,GAAG,cAAe2P,QAAS,SAAC5yB,EAAEkB,GAAC,OAAKlB,EAAEU,WAAWP,QAAUe,CAAC,GAC9D,CAAE+hB,GAAG,QAAS2P,QAAS,SAAC5yB,EAAEkB,GAAC,OAAKlB,EAAEU,WAAWP,QAAUe,CAAC,GACxD,CAAE+hB,GAAG,WAAY2P,QAAS,SAAC5yB,EAAEkB,GAAC,OAAKlB,EAAEU,WAAWP,QAAUe,CAAC,IAE5D4tD,GAAqBjmC,OAASimC,GAAqBjmC,OAAOzoB,OAAO,CAChE,CAAE6iB,GAAG,UAAW2P,QAAS,SAAS5yB,EAAGkB,GACpC,QAASA,EAAEqwB,OAASvxB,EAAIkB,EAAEqwB,UAAYrwB,EAAEswB,KAAOxxB,EAAIkB,EAAEswB,IACtD,GACA,CAAEvO,GAAG,aAAc2P,QAAS,SAAS5yB,EAAGkB,GACvC,OAASA,EAAEqwB,OAASvxB,GAAKkB,EAAEqwB,QAAYrwB,EAAEswB,KAAOxxB,GAAKkB,EAAEswB,GACxD,iHC7GM,SAAczF,GACpBA,EAAK6iC,WAAa,CACjBK,QAAO,EACPzJ,MAAO,CAAE,EACT6J,SAAUN,KACVzwC,IAAK,SAASnf,EAAGkB,EAAG8vD,EAAM5qB,EAAKxU,EAAO/kB,GACrCsS,GAAI2F,MAAM7E,KAAM,CAAC2M,EAAM5sB,EAAGkB,EAAG8vD,EAAM5qB,EAAKxU,EAAO/kB,GAC/C,EACDszC,OAAQ,SAASngD,EAAGkB,EAAGymB,EAAM9a,GAC5BszC,GAAOr7B,MAAM7E,KAAM,CAAC2M,EAAM5sB,EAAGkB,EAAGymB,EAAM9a,GACtC,EACDsa,OAAQ,SAASnnB,EAAGkB,EAAG2L,GACtBsa,GAAOrC,MAAM7E,KAAM,CAAC2M,EAAM5sB,EAAGkB,EAAG2L,GAChC,EACDiT,IAAK,SAAS9f,EAAGkB,EAAG2L,GACnB,OAAOiT,GAAIgF,MAAM7E,KAAM,CAAC2M,EAAM5sB,EAAGkB,EAAG2L,GACpC,EACD+V,MAAO,SAAS+E,EAAM9a,GACrB+V,GAAMkC,MAAM7E,KAAM,CAAC2M,EAAMjF,EAAM9a,GAC/B,EACD6Y,UAAW,SAAS7Y,GACnB,OAAO6Y,GAAUZ,MAAM7E,KAAM,CAAC2M,EAAM/f,GACpC,EACDqf,MAAO,SAASrf,GACfqf,GAAMpH,MAAM7E,KAAM,CAAC2M,EAAM/f,GAC1B,GAGD+f,EAAK+D,YAAY,kBAAkB,SAAChJ,GAAI,OAmDzC,SAAuBiF,EAAMjF,GAC5BuK,GAAMnS,KAAI,WACT6M,EAAKoV,kBAAiB,SAAC9X,GACtB,IAAM6lC,EAAanjC,EAAK6iC,WAAW3vC,IAAIoK,EAAKjE,IAAKiE,EAAKG,QACtD,GAAG0lC,EACF,IAAK,IAAItvD,EAAI,EAAGA,EAAIsvD,EAAW/uD,OAAQP,IACtCwjD,GAAWr3B,EAAM1C,EAAKjE,IAAKiE,EAAKG,OAAQ0lC,EAAWtvD,GAAG,IAAI,GAC5DmwD,GAAiB,SAAU1mC,EAAKjE,IAAKiE,EAAKG,OAAS0lC,GAAY,KAAOpoC,EAAMiF,EAC7E,GACD,IACAA,EAAK3K,SACN,CA9D8CgvC,CAAcrkC,EAAMjF,MAEjEiF,EAAK+D,YAAY,UAAU,SAACugC,EAAajrC,EAAKoE,EAAQ1K,GACnC,aAAfuxC,GA6DL,SAAwBtkC,EAAM3G,EAAKoE,EAAQ1K,GACvCiN,EAAK6iC,WAAW3vC,IAAImG,EAAKoE,IAC3BuC,EAAK6iC,WAAWtoC,OAAOlB,EAAKoE,GAC1B1K,GACFiN,EAAK6iC,WAAWtP,OAAOl6B,EAAKoE,EAAQ1K,EACtC,CAjEGwxC,CAAevkC,EAAM3G,EAAKoE,EAAQ1K,EACpC,IAEAiN,EAAK+D,YAAY,mBAAmB,SAAChJ,GAAI,OAgE1C,SAAoBiF,EAAMsC,GACzBA,EAAIugC,WAAa7iC,EAAK6iC,WAAW/pC,WAClC,CAlE+C6B,CAAWqF,EAAMjF,MAC/DiF,EAAK+D,YAAY,eAAe,SAAChJ,GAAI,OAmEtC,SAAgBiF,EAAMsC,GACrBtC,EAAK6iC,WAAW7sC,MAAMsM,EAAIugC,WAC3B,CArE2C5wB,CAAOjS,EAAMjF,MAEvDiF,EAAK+D,YAAY,WAAW,WAAA,OAAM/D,EAAK6iC,WAAWvjC,OAAO,IAEzDU,EAAK+D,YAAY,YAAY,SAAC+E,EAAQ9zB,GACxB,sBAAV8zB,GA4QL,SAAwB9I,EAAM9f,EAAMiuB,EAAKpT,EAAMyK,GAC9C,IAAIq9B,EAAa9nC,EAAK8nC,WACrBhvD,EAAIgvD,EAAWzuD,OAEhB,GAAG+5B,EACF,KAAMt6B,KAAI,CACT,IAAA2wD,EAAAl+B,GAAmBu8B,EAAWhvD,GAAE,GAA3BwlB,EAAGmrC,EAAA,GAAC/mC,EAAM+mC,EAAA,IACJ,OAARtkD,GAAiBmZ,GAAMmM,EAAMnM,KAAe,UAARnZ,GAAoBud,GAAU+H,EAAM/H,UAC9D,OAARvd,EACCmZ,EAAMmM,EAAMnM,IAAM8U,EACrB00B,EAAW5qC,OAAOpkB,EAAE,GAEpBgvD,EAAWhvD,GAAG,GAAS,EAAJwlB,EAAQ8U,EACV,UAARjuB,IACNud,EAAS+H,EAAM/H,OAAS0Q,EAC3B00B,EAAW5qC,OAAOpkB,EAAG,GAErBgvD,EAAWhvD,GAAG,GAAY,EAAP4pB,EAAW0Q,GAGlC,CAEF,CAjSGunB,CAAe11B,EAAMhrB,EAAEkL,KAAMlL,EAAEm5B,IAAKn5B,EAAE+lB,KAAM/lB,EAAEwwB,MAChD,IAgCD,SAAexF,GACdA,EAAK6iC,WAAWvjC,OACjB,CAhCC/H,CAAMyI,EACP,sBCgBA,SAAS9M,GAAI8M,EAAM3G,EAAKoE,EAAQxd,GAC/B,IAAIuf,EACJ,GAAGvf,GAAQA,GAAQ+f,EAAKiM,iBAAiB,CACxC,IAAMnO,EAAQ00B,GAASxyB,EAAM/f,GAC1B6d,GAASA,EAAMkM,QAAQxK,aACzBA,EAAapQ,GAAK0O,EAAMkM,QAAQxK,YAAY,SAAAA,GAAU,OAAIA,EAAW,IAAMnG,GAAOmG,EAAW,IAAM/B,QAElG+B,EAAaA,EAAW,GAE3B,MACQQ,EAAKR,WAAWi6B,MAAMpgC,IAAQ2G,EAAKR,WAAWi6B,MAAMpgC,GAAKoE,KAChE+B,EAAaQ,EAAKR,WAAWi6B,MAAMpgC,GAAKoE,IACzC,OAAO+B,GAAc,IACtB,CAEA,SAASjN,GAAIyN,EAAM3G,EAAKoE,EAAQ+B,EAAYiV,EAAQx0B,GACnDA,EAAOA,GAAQ+f,EAAKiM,iBACpB,IAAMw4B,EAAWvxC,GAAI8M,EAAM3G,EAAKoE,EAAQxd,GAExC,GAAGA,GAAQ+f,EAAKiM,iBAAiB,CAChC,IAAMnO,EAAQ00B,GAASxyB,EAAM/f,GACzB6d,EAAMkM,QAAQxK,aACjB1B,EAAMkM,QAAQxK,WAAa,IAEzBilC,EACFr1C,GAAK0O,EAAMkM,QAAQxK,YAAY,SAAAA,GAAU,OAAIA,EAAW,IAAMnG,GAAOmG,EAAW,IAAM/B,CAAO,IAAC,GAAK+B,EAEnG1B,EAAMkM,QAAQxK,WAAWhnB,KAAK,CAAC6gB,EAAKoE,EAAQ+B,GAC9C,MAEKQ,EAAKR,WAAWi6B,MAAMpgC,KACzB2G,EAAKR,WAAWi6B,MAAMpgC,GAAO,CAAA,GAE9B2G,EAAKR,WAAWi6B,MAAMpgC,GAAKoE,GAAU+B,EAGjCiV,GACJzU,EAAK6D,UAAU,WAAY,CAAC,aAAc,CAACxK,IAAAA,EAAKoE,OAAAA,EAAQ0kB,SAAS3iB,EAAYzM,MAAM0xC,EAAUxkD,KAAAA,IAC/F,CAuBA,SAASsa,GAAOyF,EAAM3G,EAAKoE,EAAQgX,EAAQx0B,GAC1CA,EAAOA,GAAQ+f,EAAKiM,iBAEpB,IAAMrI,EAAM1Q,GAAI8M,EAAM3G,EAAKoE,EAAQxd,GACnC,GAAG2jB,EAAI,CACN,GAAG3jB,GAAQ+f,EAAKiM,iBAAiB,CAChC,IAAMzM,EAAagzB,GAASxyB,EAAM/f,GAAM+pB,QAAQxK,WAC1CgN,EAAQjT,GAAUiG,GAAY,SAAAA,GAAU,OAAIA,EAAW,IAAMnG,GAAOmG,EAAW,IAAM/B,KAC3F+B,EAAWvH,OAAOuU,EAAO,EAC1B,aAEQxM,EAAKR,WAAWi6B,MAAMpgC,GAAKoE,GAClCuC,EAAKiD,GAAG,SAASyhC,WAAWrrC,EAAKoE,GAE7BgX,GACJzU,EAAK6D,UAAU,WAAY,CAAC,aAAc,CAACxK,IAAAA,EAAKoE,OAAAA,EAAQ0kB,SAAU,KAAMpvB,MAAO6Q,EAAK3jB,KAAAA,IACtF,CACD,CAqCA,SAASkmB,GAAanG,EAAMjN,GAW3B,OAVG7e,MAAY,EAAN6e,GACe,KAAnBA,EAAM2uB,OAAO,IAAa3uB,EAAM3e,OAAS,GAE/B,QADb2e,EAAQiN,EAAKoS,OAAO9V,WAAWnc,KAAK4S,EAAM9d,UAAU,GAAI+qB,EAAK0S,OAAO3a,iBAEnEhF,EAAQ,IAIVA,GAAc,EAERA,CACR,CAEO,SAAS4xC,GAAU3kC,EAAM3G,EAAKoE,EAAQy+B,EAAUj8C,GACtD,IAAI2kD,GAAU,EACRvB,EAAOrjC,EAAKR,WAAWtM,IAAImG,EAAKoE,EAAQxd,GAC9C,GAAGojD,EAAK,CACP,IAEItwC,EAFE4U,EAAO07B,EAAK17B,KAQlB,GAAa,MAFZ5U,EAHGkO,MAAM6J,YAAYoxB,IAAsB,QAARv0B,GAA0B,cAARA,EAG7C3H,EAAKmG,aAAa9M,EAAKoE,GAAQ,EAAOxd,GAFtCi8C,GAKR,QAASmH,EAAKwB,YAEf,IAAIrB,EAAUH,EAAKtwC,MAChBywC,IAEDA,EADEviC,MAAM1K,QAAQitC,GACN,CACTh+B,MAAOW,GAAanG,EAAMwjC,EAAQ,IAClC/9B,IAAKU,GAAanG,EAAMwjC,EAAQ,KAGvBr9B,GAAanG,EAAMwjC,IAG/B,IAAMF,EAAWtjC,EAAKR,WAAW8jC,SAAS37B,GAC1C,GAAG27B,GAEEz8B,EADYzX,GAAKk0C,GAAU,SAAAhhC,GAAG,OAAIA,EAAIpL,IAAMmsC,EAAKtlC,SAAS,IAAE8I,SACpD9T,EAAOywC,KAAUoB,GAAU,GAGxC,IAAIA,EACH,OAAOj9B,GACN,IAAK,SACD07B,EAAKprB,SAAW76B,SAAS2V,IAAUA,IACrC6xC,GAAU,GACX,MACD,IAAK,OACmC,QAApCzkB,GAAQngB,EAAM3G,EAAKoE,EAAQxd,KAC7B2kD,GAAU,GACX,MACD,IAAK,QACC3jC,MAAM1K,QAAQitC,KAAuC,GAA3BA,EAAQ1tD,QAAQid,KAC9C6xC,GAAU,GAGf,CACA,OAAOA,CACR,CAEO,SAASE,GAAiB9kC,EAAM3G,EAAKoE,EAAQy+B,GACnD,IAAIv5B,EAAM,GASV,OAPG3C,EAAKR,WAAWulC,YAAcJ,GAAU3kC,EAAM3G,EAAKoE,EAAQy+B,KAC7Dv5B,EAAM,yBAEM3C,EAAKiD,GAAG,SAAStJ,QAAQN,EAAKoE,IAE1C45B,GAAWr3B,EAAM3G,EAAKoE,EAAQ,0BAA2BkF,GAEnDA,CACR,CAEA,SAASqiC,GAAoBhlC,GAC5B,IAAGA,EAAKilC,YAAR,CAGA,IAAIzwB,EAAMxU,EAAKsD,eAAc,GACzByD,EAAQ/G,EAAKR,WAAW0lC,cAC5B,IAAIllC,EAAK9L,UAAYsgB,GAAqB,GAAdA,EAAIpgC,OAAY,CAE3C,IAAMilB,GADNmb,EAAMA,EAAI,IACMnb,IACV0T,EAAMyH,EAAI/W,OAEV+B,EAAaQ,EAAKR,WAAWtM,IAAImG,EAAK0T,GAC5C,GAAGvN,GAAcA,EAAW2lC,aAAa,CACpCp+B,IACHA,EAAQ/G,EAAKR,WAAW0lC,cAAgBjkC,MAAMa,GAAG,CAChD9B,KAAM,QACN2C,IAAK,kCACLwnB,SAAS,IACTC,UAAU,GACV1wB,OAAO,IACPD,MAAM,IACNwwB,QAAO,EACPxoB,KAAK,CACJW,OAAO,OACPT,SAAU,OAGZ3B,EAAK6iB,iBAAiBrqC,KAAKuuB,IAE5BA,EAAMxD,UAAU+H,QAAQ9L,EAAW2lC,cAEnC,IAAMx8B,EAAO3I,EAAKiD,GAAG,SACflE,EAAO4J,EAAKhP,QAAQN,EAAK0T,GACzB0G,EAAO1U,EAAO,CAAC1F,IAAAA,EAAKoE,OAAgB,EAARsB,EAAK,GAAKA,EAAK,GAAG,GAAMyV,EAE1D,OAAOzN,EAAMgb,KAAKpZ,EAAK+d,YAAYjT,GAAO,CAAC9C,IAAK,UACjD,CACD,CACG5J,GACFA,EAAM/D,MArCN,CAsCF,CAEO,SAASoiC,GAAgBplC,EAAMoW,EAAO/c,EAAK0T,EAAK6qB,GACtD,IAAMp4B,EAAa4W,EAAM5W,WAEzBQ,EAAKR,WAAWjN,IAAI8G,EAAK0T,EAAKvN,GACf,IAAXo4B,GACH53B,EAAKR,WAAWjF,OAAO6b,EAAM/c,IAAK+c,EAAMrJ,IAC1C,+DAhTO,SAAc/M,GACpBA,EAAKR,WAAa,CACjB8jC,SAAUriC,MAAMvG,KAAKqoC,IACrB7vC,IAAK,SAACmG,EAAKoE,EAAQxd,GAAI,OAAKiT,GAAI8M,EAAM3G,EAAKoE,EAAQxd,EAAK,EACxDsS,IAAK,SAAC8G,EAAKoE,EAAQ4lC,EAAMpjD,GAAI,OAAKsS,GAAIyN,EAAM3G,EAAKoE,EAAQ4lC,GAAM,EAAOpjD,EAAK,EAC3Esa,OAAQ,SAAClB,EAAKoE,EAAQxd,GAAI,OAAKsa,GAAOyF,EAAM3G,EAAKoE,GAAQ,EAAOxd,EAAK,EACrEqjC,UAAW,SAACpd,EAAOjmB,GAAI,OAiGzB,SAAmB+f,EAAMkG,EAAOjmB,GAE/B,GADAA,EAAOA,GAAQ+f,EAAKiM,iBACjBhsB,GAAQ+f,EAAKiM,iBAAiB,CAChC,IAAMnO,EAAQ00B,GAASxyB,EAAM/f,GACzB6d,EAAMkM,QAAQ9J,QACjBpC,EAAMkM,QAAQ9J,MAAQ,IAEtBgG,EADW,UAATA,GACOpI,EAAMkM,QAAQ9J,MAAMmlC,mBAEnBn/B,EACXpI,EAAMkM,QAAQ9J,MAAMmlC,iBAAmBn/B,EAAQ,EAAI,CACpD,MAGElG,EAAKR,WAAWulC,WADL,UAAT7+B,GAC4BlG,EAAKR,WAAWulC,aAEf7+B,EAChClG,EAAK3K,SAEP,CApH8BiuB,CAAUtjB,EAAMkG,EAAOjmB,EAAK,EACxDw5C,MAAM,CAAC,GAGRz5B,EAAK+D,YAAY,WAAW,WAAA,OAoK7B,SAAe/D,GACdA,EAAKR,WAAWi6B,MAAQ,EACzB,CAtKmCliC,CAAMyI,MACxCA,EAAK+D,YAAY,UAAU,SAAC4D,EAAMtO,EAAKoE,EAAQ1K,GACjC,eAAT4U,GA2JN,SAAc3H,EAAM3G,EAAKoE,EAAQ1K,GAC7BG,GAAI8M,EAAM3G,EAAKoE,IACjBlD,GAAOyF,EAAM3G,EAAKoE,GAAQ,GACxB1K,GACFR,GAAIyN,EAAM3G,EAAKoE,EAAQ1K,GAAO,EAChC,CA/JGkM,CAAKe,EAAM3G,EAAKoE,EAAQ1K,EAC1B,IAEAiN,EAAK+D,YAAY,YAAY,SAAC+E,EAAQ9zB,GACxB,sBAAV8zB,GA8HL,SAAwB9I,EAAM9f,EAAMiuB,EAAKpT,EAAMyK,GAC9C,IAAIhG,EAAazE,EAAKyE,WACrB3rB,EAAI2rB,EAAWprB,OAEhB,GAAG+5B,EACF,KAAMt6B,KAAI,CACT,IAAAyxD,EAAAh/B,GAAmB9G,EAAW3rB,GAAE,GAA3BwlB,EAAGisC,EAAA,GAAC7nC,EAAM6nC,EAAA,IACZjsC,GAAe,OAARnZ,GAAiBmZ,GAAOmM,EAAMnM,KAAOoE,GAAkB,UAARvd,GAAoBud,GAAU+H,EAAM/H,UAChF,OAARvd,EACCmZ,EAAMmM,EAAMnM,IAAM8U,EACrB3O,EAAWvH,OAAOpkB,EAAE,GAEpB2rB,EAAW3rB,GAAG,GAAS,EAAJwlB,EAAQ8U,EACV,UAARjuB,IACNud,EAAS+H,EAAM/H,OAAS0Q,EAC3B3O,EAAWvH,OAAOpkB,EAAG,GAErB2rB,EAAW3rB,GAAG,GAAY,EAAP4pB,EAAW0Q,GAGlC,CAEF,CAnJGunB,CAAe11B,EAAMhrB,EAAEkL,KAAMlL,EAAEm5B,IAAKn5B,EAAE+lB,KAAM/lB,EAAEwwB,MAChD,IAEAxF,EAAK+D,YAAY,aAAa,SAAA+E,GACb,0BAAbA,EAAO5R,GACT8I,EAAKR,WAAW8jB,WAAU,GACN,iCAAbxa,EAAO5R,GACd8I,EAAKR,WAAW8jB,YACI,0BAAbxa,EAAO5R,IACdoO,GAAMnS,KAAI,WAAA,OAAK6M,EAAKoV,kBAAiB,SAAA9X,GAAI,OAAI0C,EAAKR,WAAWjF,OAAO+C,EAAKjE,IAAKiE,EAAKG,aACrF,IAEAuC,EAAK+D,YAAY,mBAAmB,SAAAhJ,GAAI,IAAAJ,EAAA4qC,EAAA,OAAA5qC,EAUzC,SAAmBqF,GAClB,IAAM2sB,EAAO3sB,EAAKR,WAAWi6B,MACvB1+B,EAAO,GACb,IAAI,IAAI1B,KAAOszB,EACd,IAAI,IAAIlvB,KAAUkvB,EAAKtzB,GACtB0B,EAAKviB,KAAK,CAAC6gB,EAAKoE,EAAQkvB,EAAKtzB,GAAKoE,KACpC,MAAO,CAAC1C,EAAMiF,EAAKR,WAAWulC,WAAa,EAAI,EAChD,CAjB8FjsC,CAAUkH,GAAKulC,EAAAj/B,GAAA3L,EAAA,GAA/DI,EAAKyE,WAAU+lC,EAAA,GAAExqC,EAAKmF,MAAMmlC,iBAAgBE,EAAA,GAAA5qC,CAAA,IACzFqF,EAAK+D,YAAY,eAAe,SAAAhJ,GAAI,OAkBrC,SAAeiF,EAAMjF,GACpB,IAAMyE,EAAazE,EAAKyE,WACxB,GAAGA,EACF,IAAI,IAAI3rB,EAAI,EAAGA,EAAI2rB,EAAWprB,OAAQP,IAAI,CACzC,IAAM4/B,EAAOjU,EAAW3rB,GACpBmsB,EAAKR,WAAWi6B,MAAMhmB,EAAK,MAC9BzT,EAAKR,WAAWi6B,MAAMhmB,EAAK,IAAM,CAAA,GAClCzT,EAAKR,WAAWi6B,MAAMhmB,EAAK,IAAIA,EAAK,IAAMA,EAAK,EAChD,CACE1Y,EAAKmF,OAASnF,EAAKmF,MAAMmlC,mBAC3BrlC,EAAKR,WAAWulC,YAAa,EAE/B,CA9ByC/uC,CAAMgK,EAAMjF,MACpDiF,EAAK+D,YAAY,WAAW,WAC3B/D,EAAKR,WAAWi6B,MAAQ,GACxBz5B,EAAKR,WAAWulC,YAAa,CAC9B,IACA/kC,EAAK+D,YAAY,YAAY,WAAA,OAAKihC,GAAoBhlC,MACtDA,EAAKiD,GAAG,SAASc,YAAY,kBAAkB,WAAA,OAAMihC,GAAoBhlC,KAC1E,oCC1CA,SAASwlC,GAAMxlC,EAAMyU,GAMpB,OALIA,GACHzU,EAAKylC,MAAM,CACV99B,KAAM,cACNtK,KAAM4D,MAAMC,KAAKC,YAAYxE,OAAO,iBAE/B,CACR,CAEO,SAAS+oC,GAAU1lC,EAAM2lC,EAAKlxB,GACpC,IACC,IAAInG,EAAIE,EAAID,EAAIE,EAAI3Q,EAEhB8nC,EAAUD,EAAInwD,MAAM,KACxB,OAAOowD,EAAQxxD,QACd,KAAK,EACHwxD,EAAkBt/B,GAAPs/B,EAAO,GAAX,GACR,MACD,KAAK,EAAC,IACqBC,EAAAv/B,GAAPs/B,EAAO,GAC1B,GADC9nC,EAAK+nC,EAAA,GAAED,EAAOC,EAAA,IACW,GAAvB/nC,EAAMhoB,QAAQ,OAA2B,KAAZgoB,EAAM,IAAwC,KAA3BA,EAAMA,EAAM1pB,OAAS,IACvE,OAAOoxD,GAAMxlC,EAAMyU,GACpB,MACD,QACC,OAAO+wB,GAAMxlC,EAAMyU,GAGrB,GAAGzG,GAAO43B,GAAQ,CAAA,IACSE,EAAAx/B,GAAfwG,GAAO84B,GAAQ,GAAzBt3B,EAAEw3B,EAAA,GAAEv3B,EAAEu3B,EAAA,OACJ,CACH,IAAMC,EAAWptC,GAASgtC,EAAK3lC,GAC/B,IAAG+lC,EAGF,OAAOP,GAAMxlC,EAAMyU,GAHT,IAAAuxB,EAAA1/B,GACgBy/B,EAAQ,GAAjCz3B,EAAE03B,EAAA,GAAEz3B,EAAEy3B,EAAA,GAAEx3B,EAAEw3B,EAAA,GAAEv3B,EAAEu3B,EAAA,GAAEloC,EAAKkoC,EAAA,EAGxB,CAEA,GAAGloC,EAAM,CAER,IAAI00B,GAASxyB,EADblC,EAAQA,EAAMmoC,WAAW,IAAK,KAE7B,OAAOT,GAAMxlC,EAAMyU,GACjB3W,GAASkC,EAAKiM,kBAChBjM,EAAKqmB,UAAUvoB,EACjB,CAEA,IAAM6K,EAAO3I,EAAKiD,GAAG,SAOrB,OANA0F,EAAKu9B,SAAS53B,EAAIC,GAClB5F,EAAKw5B,cACJ,CAAE9oC,IAAKiV,EAAI7Q,OAAQ8Q,GACnB,CAAElV,IAAKmV,GAAMF,EAAI7Q,OAAQgR,GAAMF,KAGzB,CACP,CACD,MAAMsK,GACL,OAAO2sB,GAAMxlC,EAAMyU,EACpB,CACD,CCnDO,SAASgb,GAAKzvB,EAAMoW,GAC1BpW,EAAK+D,YAAY,mBAAmB,WAAA,OA4BrC,SAAe/D,GACd,IAsEImmC,EACAC,EAvEAz9B,EAAO3I,EAAKgU,OAEZqyB,EAAqBplC,MAAMqjB,MAAM0B,SAASvkB,KAAM,cAAe,WAClE,IAAIgK,EACJ,OAAO,SAASv4B,GACO,UAAlBA,EAAEozD,cAENp6B,aAAaT,GACbA,EAASxK,MAAMkL,OAAM,SAASj5B,GAC7B,IAAG8sB,EAAKumC,SAASC,eAAeC,WAAhC,CAGA,IAAInpC,EAAOqL,EAAK+9B,OAAOxzD,GACnByzD,EAAU3mC,EAAKumC,SAASK,cAAgB5mC,EAAKumC,SAASK,aAAa1kB,YAEvE,GAAG5kB,GAAQ0C,EAAKumC,SAASrzC,IAAIoK,EAAKjE,IAAKiE,EAAKG,QAAQ,CACnD,IAAIimB,EAAa1jB,EAAKumC,SAASC,eAAelpC,OAC1ComB,GAAeA,EAAWrqB,KAAOiE,EAAKjE,KAAOqqB,EAAWjmB,QAAUH,EAAKG,SAAakpC,GACvF3mC,EAAK6D,UAAU,YAAY,CAAC,CAAC3M,GAAI,cAAeoG,KAAAA,EAAMupC,UAAU,UAE1DF,IAAY3mC,EAAKumC,SAASK,aAAaziC,MAAMi4B,SAASlpD,EAAEm4C,SAC/DrrB,EAAK6D,UAAU,gBAAiB,GAXhC,CAYD,IAAE,EAAM,CAAC3wB,GAAI,MAEf,CAtBkE,IAyB/D8sB,EAAKuB,OAAOzL,OACf6S,EAAKpH,OAAOulC,UAAW,GAuDxB,SAASC,IACR,IAAI9X,EAAMtmB,EAAKrF,eAAc,GAC7B,GAAG2rB,EAAI76C,OAAO,CAGb4yD,GAFY/X,EAAI,GACNA,EAAIA,EAAI76C,OAAO,GAAG66C,EAAIA,EAAI76C,OAAO,GAAG66C,EAAI,GAClBjvB,EACjC,KACK,CACJ,IAAIjF,EAAO,CAAC1B,IAAI,EAAGoE,OAAO,GAC1BupC,GAAoBjsC,EAAMA,EAAMiF,EACjC,CACD,CA9DA2I,EAAK5E,YAAY,oBAAoB,SAAChiB,EAAIklD,GACzCt+B,EAAKu+B,SAAU,EACf,IAAMtjC,EAAM5D,EAAKmG,aAAa8gC,EAAG5tC,IAAK4tC,EAAGxpC,QAE7B,KAARmG,GAA2B,KAAb7hB,EAAGgR,QAEjBhR,EAAGgR,OAAS6Q,IACf5D,EAAK2G,aAAasgC,EAAG5tC,IAAK4tC,EAAGxpC,OAAQ1b,EAAGgR,OACxC4V,EAAKtT,WAENtT,EAAGgR,MAAQhR,EAAG6hB,IACf,IAEA+E,EAAK5E,YAAY,WAAW,SAAS8E,GAChCF,EAAKw+B,aACRlmC,MAAMkL,OAAM,WACXxD,EAAK2d,cAAc,OACpB,IAEDrlB,MAAM6Q,KAAKgS,aAAajb,EACzB,IAGA7I,EAAK+D,YAAY,qBAAqB,SAAC1K,EAAKoE,GAAM,OAAMuC,EAAKm2B,aAAa98B,EAAKoE,MAC/EkL,EAAK5E,YAAY,oBAAoB,SAAA2K,GAAmB,IAAjBrV,EAAGqV,EAAHrV,IAAKoE,EAAMiR,EAANjR,OACvC7kB,EAAIonB,EAAKmG,aAAa9M,EAAKoE,GAE5BkL,EAAKu+B,UACPv+B,EAAKu+B,SAAU,EACftuD,EAAI,IAGL+vB,EAAKw+B,YAAY7yC,SAAS1b,EAC3B,IACA+vB,EAAK5E,YAAY,qBAAqB,SAACub,GAAM,OAC5Ctf,EAAK6D,UAAU,oBAAqB,CAACyb,EAAOjmB,IAAKimB,EAAO7hB,QAAQ,IAOjEkL,EAAK5E,YAAY,kBAAkB,SAAC7M,GAAE,MAAkB,SAAbA,EAAGuG,MAAiB,IAC/DkL,EAAK5E,YAAY,uBAAuB,SAACyB,EAAOC,EAAK2hC,GACpDJ,GACCI,EAAY5hC,EAAQvE,MAAMvG,KAAK8K,GAC/B4hC,EAAY3hC,EAAMxE,MAAMvG,KAAK+K,GAC7BzF,EAEF,IAeA2I,EAAK5E,YAAY,kBAAkB,WAAA,OAAMgjC,OACzCp+B,EAAK5E,YAAY,qBAAqB,WACrC9C,MAAMkL,OAAM,WAAA,OAAM46B,MACnB,IACAp+B,EAAK5E,YAAY,kBAAkB,WAClC9C,MAAMkL,OAAM,WAAA,OAAM46B,MACnB,IAEA9lC,MAAMqjB,MAAM3b,EAAKxE,MAAMe,WAAY,aAAa,SAAAhyB,GAC/C,IAAMm0D,EAAe1+B,EAAKpH,OAAO8lC,aAC3Bt6B,EAAMpE,EAAK+9B,OAAOxzD,GAExB,GAAG65B,GAAOA,EAAIu6B,KAAK,CAClB,GAAGD,EAAa,CACf,IAAME,EAAK5+B,EAAK0rB,gBAAgBtnB,EAAItP,QAAQhE,MACtCkX,EAAM1P,MAAM6Q,KAAK01B,YAAYt0D,GACnC,GAAGy9B,EAAIz3B,EAAImuD,EAAa5xC,MAAQ8xC,EAAG52B,EAAIz3B,EAAImuD,EAAa5xC,KAAK,EAC5D,MACF,CACA0wC,EAAkBp5B,EAAIu6B,IACvB,CACD,IAEArmC,MAAMqjB,MAAM3b,EAAKxE,MAAMe,WAAY,aAAa,SAAAhyB,GAC/C,GAAGizD,EAAgB,CAClB,IAAMp5B,EAAMpE,EAAK+9B,OAAOxzD,GAErB65B,IACFq5B,EAAgBr5B,EAAIu6B,KACpBN,GACC,CAACvpC,OAAQkL,EAAK8+B,SAAStB,IACvB,CAAC1oC,OAAQkL,EAAK8+B,SAASrB,GAAe,IACtCpmC,GAGH,CACD,IAEA,IAAM0nC,EAAsBzmC,MAAMqjB,MAAM0B,SAASvkB,KAAM,WAAW,WAC9D0kC,IACkB,MAAjBC,IACFY,GACCr+B,EAAK8+B,SAAStB,GACdnmC,EACA2I,EAAK8+B,SAASrB,GAAe,IAE9BA,EAAgB,MAEjBD,EAAkB,KAEpB,IAEAx9B,EAAK5E,YAAY,kBAAkB,SAAC7M,GACjB,UAAdA,EAAGuG,QACNupC,GAAc9vC,EAAGmC,IAAK2G,EACxB,IAEA,IAAI2nC,EAAkB,EACtBh/B,EAAK5E,YAAY,iBAAiB,SAAC7M,EAAIhkB,GACtC,GAAgB,SAAbgkB,EAAGuG,OAAN,CAIA,IAAImqC,EAAc,IAAIr0D,KACNq0D,EAAcD,GAAmB,IAGhDX,GAAiB9vC,EAAGuG,OAAQuC,IAE5B2nC,EAAkBC,EACd10D,EAAEuzC,SACLugB,GAAkB9vC,EAAGuG,OAAQuC,GAE7BgnC,GAAiB9vC,EAAGuG,OAAQuC,GAX9B,MAFCgnC,GAAchnC,EAgBhB,IAGA,IAAI6nC,EAAiB,KACrBl/B,EAAK5E,YAAY,eAAe,SAACzG,EAAMpqB,GAClB,UAAhBoqB,EAAKG,SACHvqB,EAAEuzC,UAGDohB,EAGJb,GAAca,EAAgB7nC,EAAM1C,EAAKjE,KAL1C2tC,GAAc1pC,EAAKjE,IAAK2G,GAOzB6nC,EAAiBvqC,EAAKjE,IAExB,IAGA2G,EAAK+D,YAAY,WAAW,WAAA,OAAMxM,GAAMyI,MAExCA,EAAK+D,YAAY,qBAAqB,WAAA,OAAM4E,EAAKm/B,cAEjDn/B,EAAK5E,YAAY,UAAU,WAG1B9C,MAAMkL,OAAM,WACX,IAAMkf,EAASrF,SAASC,cAExB,IAAIoF,GAA4B,SAAlBA,EAAOvJ,QAArB,CAEA,IAAMmD,EAAQhkB,MAAM+iB,UAAU+jB,WACX9iB,IACjBA,EAAM1jB,OAAOymC,WACd/iB,GAAStc,GACTsc,EAAMva,kBACNua,EAAMva,qBAAuB1K,GAG7BiB,MAAM+iB,UAAUC,SAAStb,EAVe,CAY1C,GAAGtV,KAAM,GAAI,IACd,IAEAsV,EAAK5E,YAAY,mBAAmB,SAACzG,EAAM6T,EAAM82B,GAC9B,SAAf3qC,EAAKG,QAA6B,QAAR0T,GAAkB82B,EAAQC,OACtD5qC,EAAKG,OAAS,EAChB,IA+ID,SAAuBuC,GACtBiB,MAAM6Q,KAAKgB,SAAS,IAAI9S,EAAKgU,OAAO7P,MAAMjN,GAAG,mDAC9C,CA/ICixC,CAAcnoC,GAEdA,EAAK+D,YAAY,cAAc,WAC9B9C,MAAMmjB,YAAYiiB,GAClBplC,MAAMmjB,YAAYsjB,EACnB,GACD,CAhQ2CrX,CAAMrwB,MAEhD,IAAIoL,EAAY,CACfpL,KAAK,YAAa9I,GAAG,QAASyL,IAAI,4CAA4C3C,EAAK6R,OACnF1G,gBAAqC,YAApBlK,MAAMgB,KAAKC,OAA2C,QAApBjB,MAAMgB,KAAKC,MAAkB,GAAK,GACrFyN,OAAO,EACPy4B,UAAW,EACXC,YAAW,EACX7L,eAAe,GACf1L,UAAS,EACTC,WAAY3a,EAAMjW,WAAa,SAAW,WAC1CmoC,aAAa,EACbC,YAAW,EACXhb,QAAQ,CACPib,iBAAqB,SAAAlkB,GACpB,IAAMqhB,EAAMrhB,EAAM+G,OAAOC,aAAa,YAAY2a,WAAW,SAAU,KACvE,GAAGP,GAAU1lC,EAAM2lC,GAClB,OAAO,CACT,IAOF,OAHIvvB,IACHhL,EAAYnK,MAAMgH,OAAOmD,EAAWgL,GAAO,IAErChL,CACR,CAwOO,SAASq9B,GAAczoC,EAAMsC,EAAK1F,EAAQ8rC,EAAIjrC,EAAQkrC,GAC5D,IAAMC,EAAe5oC,EAAKiD,GAAG,SAAS1B,OAAO48B,eAAiBwK,EAExD57B,EAAMtP,EAAOvG,GACbmC,EAAMiJ,EAAIpL,GAEhB,IAAK8I,EAAK0S,OAAQ,MAAO,GACzB,IAAMpV,EAAO0C,EAAK0S,OAAOha,QAAQW,EAAI,EAAG0T,EAAI,GAExCha,EAAQuK,EAAOA,EAAKvK,MAAQ,GAC1ByK,EAASF,EAAOA,EAAKE,OAAS,GAE9B1H,EAAOkK,EAAKmG,aAAa9M,EAAK0T,GAKpC,GAHG67B,IACF71C,EAAQ+C,GAENA,GAAQ/C,EAAM,CAChB,IAAM2qB,EAASzc,MAAMC,KAAKC,YAAYjB,MAErCnN,EADW,SAATA,EACM2qB,EAAO,kBACC,UAAT3qB,EACC2qB,EAAO,cAEPpW,GAAgBxR,EAAM/C,EAChC,CAEA,IAAI4P,EAAM,GACJtF,EAAwB,iBAATtK,GAAwC,KAAnBA,EAAMrd,OAAO,KAAgBqd,GAAmB,IAAVA,GAAgB7e,MAAM6e,GAChG81C,GAAeD,GAAgBhwB,GAAgBpb,EAAQ,SAAWob,GAAkB7lB,GAEtFqjB,EAAQ,GAOZ,GANKuyB,IACJvyB,GAASpW,EAAKumC,SAASrzC,IAAImG,EAAK0T,GAAO,4CAA8C,GACrFqJ,GAASpW,EAAK80B,cAAcz7B,EAAK0T,GAAO,yCAA2C,KAIhF87B,IAAgC,kBAAT91C,IAAuBsK,GAAQub,GAAgBpb,EAAQ,WACjF,GAAIA,EAAO,CACV,IAAMF,EAAO,CAAEqF,IAAI,IACbmmC,EAASlwB,GAAcpb,GAC7B,GAAIsrC,EAAO,CACV,IAAI3mB,EAAW2mB,EAAO/1C,EAAOuK,GAE1B6kB,GAAYlhB,MAAMC,KAAKC,YAAYjB,MAAM,iBACvC5C,EAAKqF,MACRA,EAAGtuB,UAAAA,OAAaipB,EAAKqF,IAAM,MAC5B5P,EAAQovB,GAEA9kB,IACRtK,GAAS,EACX,OAGAA,GAAS,EAIX,OAAGiN,EAAK24B,SAAY5lC,GAAmB,IAAVA,EACrB,KAELkO,MAAM6J,YAAY/X,IAAoB,OAAVA,KAC9BA,EAAQ,IAET,QAAA1e,OAAesuB,EAAGtuB,KAAAA,OAAI0e,EAAK,UAAA1e,OAAS2rB,EAAK24B,OAAS,GAAKviB,GACxD,CAEO,SAAS7e,GAAMyI,GACrB,IAAM2I,EAAO3I,EAAKiD,GAAG,SACrB0F,EAAKspB,WAeL,IAbA,IAAMpyB,EAAUG,EAAKuB,OAAOwyB,YACtBj0B,EAAOE,EAAKuB,OAAOkF,SAEnBtE,EAAO,CAAC,CACbjL,GAAG,QACHw1B,OAAO,GACPjzB,MAAM,GACNkJ,IAAI,iBACJhB,SAAS,SAAConC,GACT,OAAOA,EAAG7xC,EACX,IAGQrjB,EAAE,EAAGA,GAAGgsB,EAAShsB,IACzBsuB,EAAK3pB,KAAK,CACT0e,GAAGrjB,EACHyrC,OAAO,OACPoN,OAAO,CACNrvB,KAAM2rC,GAAWn1D,IAElB8tB,SAAS,SAASW,EAAK1F,EAAQ7J,EAAO0K,GACrC,OAAOgrC,GAAczoC,EAAMsC,EAAK1F,EAAQ7J,EAAO0K,EAC/C,EACDwrC,UAAU,SAASl2C,EAAOuP,EAAKjJ,EAAKoE,GACnC,IAAMy+B,EAAWgN,GAAiBlpC,EAAM3G,EAAKoE,GACvCH,EAAO0C,EAAK0S,OAAOha,QAAQW,EAAI,EAAGoE,EAAO,GAE3CkF,EAAMrF,GAAQA,EAAK0H,OAAe,GAEhC3F,EAAc4jC,GAAgBjjC,EAAM3G,EAAKoE,EAAQy+B,GACpD78B,IACFsD,IAAQA,EAAM,IAAM,IAAMtD,GAE3B,IAAMf,EAAQo9B,GAAmB17B,EAAM3G,EAAKoE,GACzCa,IACFqE,IAAQA,EAAM,IAAM,IAAMrE,GAE3B,IAAMkB,EAAaslC,GAAiB9kC,EAAM3G,EAAKoE,EAAQy+B,GAIvD,OAHG18B,IACFmD,IAAQA,EAAM,IAAM,IAAMnD,GAEpBmD,CACR,IAED3C,EAAK6D,UAAU,eAAe,CAAC1B,EAAKtuB,KAErC80B,EAAKwgC,eAAehnC,GAGpB,IADA,IAAMpH,EAAO,GACJlnB,EAAE,EAAGA,GAAGisB,EAAMjsB,IACtBknB,EAAKviB,KAAK,CAAE0e,GAAGrjB,IAEhB80B,EAAK3S,MAAM+E,EACZ,CAEO,SAASmuC,GAAiBlpC,EAAM3G,EAAK0T,GAE3C,OAAO07B,GAAczoC,EAAM,CAAC9I,GAAImC,GAAM,EAAM,EAAM,CAACnC,GAAI6V,IAAM,GAAM92B,QADhD,YACoE,GACxF,CC1YO,SAASw5C,GAAKzvB,GACpB,IAAM2I,EAAO3I,EAAKiD,GAAG,SACfyF,EAAMzH,MAAMotB,IAAI+a,MAAQ,UAAY,OAK1C,GAHAnoC,MAAM+iB,UAAUwG,UAAU9hB,EAAI,MAAM,WAAYC,EAAKw+B,aAAazF,GAAU1hC,EAAQ,GAAE2I,GACtF1H,MAAM+iB,UAAUwG,UAAU9hB,EAAI,MAAM,SAAC9vB,EAAG1F,GAAC,OAkE1C,SAAgBgkB,EAAI8I,EAAM9sB,GAEzB,OADA8sB,EAAK6D,UAAU,YAAY,CAAC,CAAC3M,GAAAA,KACtB+J,MAAM6Q,KAAKgS,aAAa5wC,EAChC,CArE+Cm2D,CAAO,QAASrpC,EAAM9sB,EAAE,GAAEy1B,IAEpE3I,EAAKuB,OAAOwqB,SAAS,CACxB9qB,MAAM+iB,UAAUwG,UAAU,OAAO,SAACxqB,EAAM6I,GACvC,IAAM9pB,EAAO8pB,EAAG0d,OAAS1d,EAAG2d,QACtB8iB,EAAa,KAARvqD,EAGX,KAAY,IAARA,GAAeA,GAAQ,KAAOA,GAAQ,MAAQuqD,GAAlD,CAEA,IAAM90B,EAAMxU,EAAKsD,eAAc,GAC3BkR,EAAIpgC,SACF4rB,EAAKuB,OAAOpB,YAAcmpC,IAC9B3gC,EAAKu+B,SAAU,GAChBv+B,EAAK/I,KAAK4U,EAAI,IANwC,CAQvD,GAAE7L,GAEH1H,MAAM+iB,UAAUwG,UAAU,SAAS,SAACxqB,GACnC,IAAMwU,EAAMxU,EAAKsD,eAAc,GAC3BkR,EAAIpgC,SACF4rB,EAAKuB,OAAOpB,aAAewI,EAAK9E,UAAU,qBAAsB,CAAC2Q,EAAI,MACzE7L,EAAK/I,KAAK4U,EAAI,IAEhB,GAAE7L,GAEH1H,MAAM+iB,UAAUwG,UAAU,aAAa,WAAA,OAAM+e,GAAIvpC,EAAK,GAAE2I,GACxD1H,MAAM+iB,UAAUwG,UAAU,UAAU,WAAA,OAAM+e,GAAIvpC,EAAK,GAAE2I,GAErD,IAAMzJ,EAAO+B,MAAMotB,IAAI+a,MAAQ,kBAAoB,SACnDnoC,MAAM+iB,UAAUwG,UAAUtrB,GAAM,WAAA,OAAMc,EAAKd,MAAM,GAAEyJ,GACnD1H,MAAM+iB,UAAUwG,UAAU9hB,EAAI,MAAM,WAAA,OAAM1I,EAAKf,MAAM,GAAE0J,GAEvD1H,MAAM+iB,UAAUwG,UAAU9hB,EAAI,MAAM,WAAA,OAAM8gC,GAAYxpC,EAAM,cAAc,GAAE2I,GAC5E1H,MAAM+iB,UAAUwG,UAAU9hB,EAAI,MAAM,WAAA,OAAM8gC,GAAYxpC,EAAM,aAAa,GAAE2I,GAC3E1H,MAAM+iB,UAAUwG,UAAU9hB,EAAI,MAAM,SAAC9vB,EAAG1F,GAAC,OA0B3C,SAAe8sB,EAAM9sB,GAEpB,OADAs2D,GAAYxpC,EAAM,aACXiB,MAAM6Q,KAAKgS,aAAa5wC,EAChC,CA7BgDu2D,CAAMzpC,EAAM9sB,EAAE,GAAEy1B,GAE9D,IAAMvJ,EAAS6B,MAAMotB,IAAI+a,MAAQ,kBAAoB,aACrDnoC,MAAM+iB,UAAUwG,UAAUprB,GAAQ,WAAA,OAAMoqC,GAAYxpC,EAAM,SAAS,GAAE2I,GAErE1H,MAAM+iB,UAAUwG,UAAU9hB,EAAI,QAAQ,SAAC9vB,EAAG1F,GAAC,OAAKq9B,GAAKvQ,EAAM,KAAM9sB,EAAE,GAAEy1B,GACrE1H,MAAM+iB,UAAUwG,UAAU9hB,EAAI,MAAM,SAAC9vB,EAAG1F,GAAC,OAAKq9B,GAAKvQ,EAAM,KAAM9sB,EAAE,GAAEy1B,GACnE1H,MAAM+iB,UAAUwG,UAAU9hB,EAAI,aAAa,SAAC9vB,EAAG1F,GAAC,OAAKq9B,GAAKvQ,EAAM,MAAO9sB,EAAE,GAAEy1B,GAC3E1H,MAAM+iB,UAAUwG,UAAU9hB,EAAI,MAAM,SAAC9vB,EAAG1F,GAAC,OAAKq9B,GAAKvQ,EAAM,EAAG9sB,EAAE,GAAEy1B,GAChE1H,MAAM+iB,UAAUwG,UAAU9hB,EAAI,MAAM,WAAA,OAAM1I,EAAKm+B,aAAa,SAAS,GAAEx1B,EACxE,CACD,CAEA,SAAS4gC,GAAIvpC,GACRA,EAAKiD,GAAG,SAASkkC,aACpB7hC,GAAMnS,KAAI,WACT6M,EAAKoV,kBAAiB,SAAC9X,GAAI,OAAK0C,EAAK2G,aAAarJ,EAAKjE,IAAIiE,EAAKG,OAAQ,OACxEuC,EAAK3K,SACN,GACF,CAEA,SAASkb,GAAKvQ,EAAMjN,EAAO7f,GAE1B,OADA8sB,EAAKuQ,KAAKxd,GACHkO,MAAM6Q,KAAKgS,aAAa5wC,EAChC,CAYA,SAASs2D,GAAYxpC,EAAM0pC,GAC1B,IAAIpsC,EAAO0C,EAAKsD,gBAChB,GAAGhG,EAAK,CACP,IAAI0H,EAAQhF,EAAKkS,SAAS5U,EAAKjE,IAAKiE,EAAKG,QAErCksC,EAAY9K,GAAa6K,IAAOA,EAGhCxjC,EAASlB,GAASA,EAAMwN,MAAMk3B,KAAUC,EAF3B,SAEoDA,EACrE3pC,EAAK6D,UAAU,aAAc,CAAC6lC,EAAMxjC,GACrC,CACD,CCzFO,SAASupB,GAAKzvB,GAGpB,OAFAA,EAAK+D,YAAY,mBAAmB,WAAA,OA4MrC,SAAe/D,GACd,IAAMsf,EAAStf,EAAKiD,GAAG,cACjB2mC,EAAM5pC,EAAKiD,GAAG,cACd0F,EAAO3I,EAAKgU,OAuHlB,SAAS61B,EAAaxwC,EAAKoE,GAC1B,IAAMimB,EAAapE,EAAO/d,OAAOmiB,WAC9BA,GAAcA,EAAWrqB,KAAOA,GAAOqqB,EAAWjmB,QAAUA,GAC9DqsC,GAAW9pC,EAAM,CAAC3G,IAAAA,EAAKoE,OAAAA,GACzB,CAEA,SAASssC,EAAU7pC,EAAO5C,EAAMgC,GAE/B,IAAKU,EAAKqhB,cAAc/jB,EAAKjE,IAAKiE,EAAKG,SAAWqsC,GAAW9pC,EAAM1C,EAAMgC,GAAO,CAG/E,GAFAggB,EAAO2F,SAEH3lB,EAAM,CACTggB,EAAO4G,aAEP,IAAMmX,EAAQ/d,EAAOE,eACfwqB,EAAU3M,EAAMtqC,MAAM3e,OAC5BipD,EAAMtW,kBAAkBijB,EAASA,EAClC,CACA,OAAO,CACR,CACA,OAAO,CACR,CAEA,SAASC,IACR3qB,EAAO8G,OAAO,CAAC1C,WAAW,OAC1BpE,EAAOhrB,SAAS,IAChBgrB,EAAO6S,SACR,CA9IAxpB,EAAK5E,YAAY,qBAAqB,SAASzG,GAC9C,IAAM6T,EAAOxI,EAAKu+B,QAGlB,OAFAv+B,EAAKu+B,SAAU,EAER6C,EAAU12C,KAAMiK,EAAM6T,EAC9B,IAEAxI,EAAK5E,YAAY,sBAAsB,SAASzG,GAC/C,OAAOysC,EAAU12C,KAAMiK,GAAM,EAC9B,IAEAqL,EAAK5E,YAAY,kBAAkB,SAASzG,GACzB,SAAfA,EAAKG,SACJuC,EAAKqhB,cAAc/jB,EAAKjE,IAAKiE,EAAKG,QACpCpK,KAAKuM,KAAKtC,GAEVysC,EAAU12C,KAAMiK,GAAM,GAEzB,IAEAqL,EAAK5E,YAAY,iBAAiB,WAC9Bub,EAAOnb,MAAMi4B,SAASpW,SAASC,gBACjC3G,EAAO4G,YACT,IAEAlmB,EAAK+D,YAAY,gBAAgB,SAAC3wB,EAAEkB,EAAEsE,EAAE5D,GACvC,GAAGA,GAAKgrB,EAAKiM,iBAAiB,CAC7B,IAAM3O,EAAOgiB,EAAO/d,OAAOmiB,WACvBpmB,GAAQA,EAAKjE,KAAOjmB,GAAKkqB,EAAKG,QAAUnpB,GAC3CgrC,EAAOhrB,SAAS1b,EAClB,CACD,IAEAonB,EAAK+D,YAAY,iBAAiB,SAAAhJ,GAC5BiF,EAAK+jB,kBACT+lB,GAAW9pC,EAAMjF,EAAK,GACxB,IAEAiF,EAAK+D,YAAY,YAAY,SAAAoN,GAC5B,GAAY,UAARA,GAAoBmO,EAAO4qB,YAAY,CAC1C,IAAM5sC,EAAOgiB,EAAO/d,OAAOmiB,WACxBpmB,GAAQgiB,EAAO5qB,YAAcsL,EAAKmG,aAAa7I,EAAKjE,IAAKiE,EAAKG,iBACzD6hB,EAAOkE,cACdlE,EAAOqE,kBACPrE,EAAOsE,kBAET,CACD,IAEA5jB,EAAK+D,YAAY,qBAAqB,SAAA7jB,GACrC,IAAG8f,EAAKmqC,aAAR,CAEA,IAAM7sC,EAAOgiB,EAAO/d,OAAOmiB,WAC3B,GAAGpmB,EAAK,CACP,IAAMmkB,EAASnC,EAAOE,eAAeG,eAC/BnG,EAAM8F,EAAO5qB,WAChBsL,EAAKmG,aAAa7I,EAAKjE,IAAKiE,EAAKG,SAAW+b,GAC1C8F,EAAO8F,cACV9F,EAAO8F,YAAcplB,EAAKiM,kBAC3BhL,MAAMkL,OAAM,WACX,GAAGjsB,GAAQo/B,EAAO8F,YAAY,CAC7BplB,EAAK+jB,iBAAmB,KACxB,IAAMzmB,EAAOgiB,EAAO/d,OAAOmiB,WAC3B/a,EAAKtG,OAAO/E,EAAKjE,IAAKiE,EAAKG,OAC5B,CAEA6hB,EAAOhrB,SAASklB,GAEhB8F,EAAOjqB,UAEPiqB,EAAOE,eAAeuH,kBAAkBtF,EAAQA,GAChDnC,EAAO4G,aAEPlmB,EAAK+jB,iBAAmB,SAAS9vC,EAAEkB,EAAE4M,EAAG2a,GAAK,OAAO0tC,GAAWpqC,EAAMje,EAAI2a,EAAIzoB,GAC9E,MAGA21D,EAAIt1C,SAAS,IACb21C,IAEF,CA7BC,CA8BF,IAEAjqC,EAAK+D,YAAY,WAAW,WACvB/D,EAAKmqC,eACRnqC,EAAK+jB,iBAAmB,KAC1B,IACA/jB,EAAKiD,GAAG,SAASc,YAAY,WAAW,WAEpCub,EAAO8F,aACTnkB,MAAMkL,OAAM,WAAA,OAAImT,EAAO2F,UAEzB,IAEAjlB,EAAK+D,YAAY,eAAe,WAAA,OAAMkmC,OAEtCjqC,EAAK+D,YAAY,YAAY,SAAS7jB,EAAMshB,GAC3C,IAAIA,EAAQvhB,MAAQuhB,EAAQvhB,MAAQ+f,EAAKiM,iBAAzC,CACA,IAAM3O,EAAOgiB,EAAO/d,OAAOmiB,WAC3B,GAAW,SAARxjC,EACF,OAAO4pD,GAAW9pC,EAAM1C,KACJA,GAAQA,EAAKjE,KAAOmI,EAAQnI,KAAOiE,EAAKG,QAAU+D,EAAQ/D,SACnD,QAARvd,GAA0B,YAARA,GACrCmqD,GAAcrqC,EAAMwB,EAAQnI,IAAKmI,EAAQ/D,OANiB,CAO5D,IAEAuC,EAAK+D,YAAY,kBAAkB,SAAC3wB,EAAGkB,EAAGG,EAAG61D,EAAIt1D,GAC7CA,GAAKgrB,EAAKiM,kBACZ49B,EAAaz2D,EAAGkB,EAClB,IACA0rB,EAAK+D,YAAY,gBAAgB,SAAC3wB,EAAGkB,EAAGsE,EAAI5D,GACxCA,GAAKgrB,EAAKiM,kBACZ49B,EAAaz2D,EAAGkB,EAClB,GA8BD,CAlW2C+7C,CAAMrwB,MAEzC,CACNA,KAAK,UACL2C,IAAI,uBACJsH,SAAS,CACR,CACCjK,KAAK,OACLkE,KAAM,gBACN3B,GAAI,CACH8f,YAAa,WACZ,IAAMvf,EAAU7B,MAAMgC,GAAG5P,KAAKkO,OAAOuB,SACjCA,EAAQof,aACXpf,EAAQif,KAAK1uB,KAAKmsB,eACnB,EACD3c,SAAU,SAAC2W,EAAKlE,EAAQ/T,GACV,QAAVA,GAA4B,KAARiY,GACtBxZ,EAAKkmC,SAAS1sB,EAChB,GAED1W,QAAS,CACR9C,KAAK,wBACL2C,IAAK,2BACLlB,KAAM,CACLE,SAAU,+FACVlI,MAAO,KAER8I,GAAG,CACFwgB,aAAc,WACb,IAAMhoB,EAAOiF,EAAKkN,OAAOpU,UAAUkH,EAAKiM,kBAAkBtzB,KAAI,SAAAvF,GAAC,MAAK,CAAC8M,KAAM9M,EAAE,GAAI2f,MAAO3f,EAAE,GAAG,IAE7F,IAAI2nB,EAAK3mB,OACR,OAAO,EAER,IAAM4yB,EAAO3T,KAAK8P,UAClB6D,EAAKirB,WACLjrB,EAAKhR,MAAM+E,EACZ,GAEDA,KAAM,IAEPtB,MAAO,IACPvC,GAAI,cAEL,CACC8I,KAAM,oBAEP,CACCA,KAAK,QACLuK,MAAMtJ,MAAMC,KAAKC,YAAYhB,WAAiB,KAC9C1G,MAAM,IAEP,CACCuG,KAAM,SACN9I,GAAG,gBACHqT,MAAO,OACPC,WAAU,EACVzD,MAAO,CACN/G,KAAM,QACNuC,GAAG,CACFwgB,aAAc,WAAW,IAAAlB,EAAAxuB,KACxB,IAAI2M,EAAKsD,gBAAiB,OAAO,EACjCrC,MAAMkL,OAAM,WACX,IAAMjM,EAAQ2hB,EAAKte,UAChBrD,EAAMqqC,UAAUrqC,EAAMqqC,WACzBrqC,EAAM8kB,SAAS,EAAE,GACjB,IAAM1/B,EAAS4a,EAAMsqC,UAAU,SAC/BllD,EAAOyN,MAAQ,GACfzN,EAAO2/B,QACP/kB,EAAMuqC,aACP,GACA,EACDC,OAAQ,WACP1qC,EAAKiD,GAAG,cAAcgiB,OACvB,GAEDxrB,MAAO,IACPgI,KAAM,CACLzB,KAAM,YACNgoC,WAAW,EACX5lC,OAAO,IACPrH,KAAM4vC,KACN9qC,QAAS,CACR,CACC3I,GAAI,QACJw1B,OAAQ,CAAC,CAAE1iB,QAAS,eACpB4gC,WAAW,IAGbroC,GAAI,CACH8f,YAAa,SAAUnrB,GACtB2zC,GAAc7qC,EAAM3M,KAAM6D,EAC1B,EACD4zC,WAAY,SAAS/rD,GACpB,GAAW,IAARA,EACFsU,KAAK2P,YACD,GAAW,IAARjkB,EAAW,CAClB,IAAMy1B,EAAMnhB,KAAKiQ,gBACdkR,GACFq2B,GAAc7qC,EAAM3M,KAAMmhB,EAAInb,IAChC,CACD,MAKJ,CACC2G,KAAK,cACLyxB,UAAS,EACTv6B,GAAG,aACH4rB,YAAa6nB,OAIjB,CAEO,SAASb,GAAW9pC,EAAM1C,EAAMgC,GACtC,IAAMggB,EAAStf,EAAKiD,GAAG,cACvB,GAAKqc,GAAUhiB,EAAf,CACA,IAAMm0B,EAAW4Y,GAAcrqC,EAAM1C,EAAKjE,IAAKiE,EAAKG,QAOpD,OANA6hB,EAAO/d,OAAOmiB,WAAapmB,EAC3BgiB,EAAOhrB,SAAUgL,EAAQ,GAAKggB,EAAOnZ,aAAa7I,EAAKjE,IAAKiE,EAAKG,SAE7DuC,EAAKmqC,eACRnqC,EAAK+jB,iBAAmB0N,EAAW,KAAO,SAASx9C,EAAEkB,EAAE4M,EAAG2a,GAAK,OAAO0tC,GAAWpqC,EAAMje,EAAI2a,EAAIzoB,MAExFw9C,CARc,CASvB,CAEA,SAAS4Y,GAAcrqC,EAAM3G,EAAKoE,GACjC,IAAM6hB,EAAStf,EAAKiD,GAAG,cACjBwuB,EAAWzxB,EAAKqhB,cAAchoB,EAAKoE,IAAWuC,EAAKm2B,aAAa98B,EAAKoE,GAK3E,OAJGg0B,EACFnS,EAAO6S,UAEP7S,EAAO8S,SACDX,CACR,CAEA,SAAS2Y,GAAWpqC,EAAMje,EAAI2a,EAAIY,GACjC,IAWIU,EAXEshB,EAAStf,EAAKiD,GAAG,cACjB8nC,EAAczrB,EAAOkE,cACvB/B,EAASnC,EAAOE,eAAeG,eAE/B7hB,EAAQ,GACZ,GAAGwhB,EAAO8F,YAAY,CACrB,IAAMpZ,EAAchM,EAAKiM,iBACtBqT,EAAO8F,aAAepZ,IACxBlO,EAAQwhB,EAAOkG,aAAaxZ,GAC9B,CAGGjqB,GAAM2a,EAERsB,EADiF,KAAnEshB,EAAO5qB,YAAaq2C,EAAcA,EAAYp6B,IAAM8Q,GAAQ,GAC1D1/B,EAAK+b,EAAM/b,EAG3Bic,EAAK3pB,GAAAA,OAAMypB,EAAM/b,EAAE1N,KAAAA,OAAIqoB,GAExB,GAAGquC,GAAeA,EAAYp6B,KAAO8Q,EAASspB,EAAY5jB,IACzD7H,EAAO4H,SAASlpB,GAAO,GACvByjB,EAASnC,EAAOkE,cAAc7S,IAAM3S,EAAM5pB,WAEtC,KAAGkrC,EAAO0H,iBAKd,OASF,SAAiBhnB,EAAMje,GACtB,IAAMu9B,EAAStf,EAAKiD,GAAG,cACvB,GAAIqc,EAAO4qB,YAAY,CACtB,IAAM5sC,EAAOgiB,EAAO/d,OAAOmiB,WAC3BpE,EAAOqE,kBACPrE,EAAOsE,gBAAgBtmB,GACvBgiB,EAAOhrB,SAASvS,EAAKie,EAAKmG,aAAapkB,EAAGsX,IAAKtX,EAAG0b,QAAU,GAC7D,CACA,OAAO,CACR,CAlBS8mB,CAAQvkB,EAAM1C,GAJrBgiB,EAAO4H,SAASlpB,GAChByjB,GAAUzjB,EAAM5pB,MAGU,CAM3B,OAJAkrC,EAAO2F,QACP3F,EAAOE,eAAeuH,kBAAkBtF,EAAQA,GAChDnC,EAAO4G,cAEA,CACR,CAaA,SAAS2kB,GAAc7qC,EAAME,EAAOhJ,GACnC,IAAMooB,EAAStf,EAAKiD,GAAG,cACjB3H,EAAU4E,EAAMmL,QAAQnU,GAAInE,MAC5BA,EAAQusB,EAAO5qB,WAEjBytB,EAAW7mB,EAAU,IAGxB6mB,EADwB,GAAtBpvB,EAAMjd,QAAQ,KACLid,GAASusB,EAAO0H,gBAAe,GAAQ,GAAK,KAAO7E,EAEnD,IAAMA,EAElBjiB,EAAMuC,gBAAgBO,OACtBsc,EAAOhrB,SAAS6tB,EACjB,CC3MA,IAAa6oB,GAAM,WAGjB,OAAAC,IAFD,SAAAD,EAAYhrC,GAAKkrC,QAAAF,GAChB33C,KAAK2M,KAAOA,CACb,GAAC,CAAA,CAAA0I,IAAA,QAAA3V,MACD,WAAQ,GAAC,CAAA2V,IAAA,QAAA3V,MACT,WAAQ,GAAC,CAAA2V,IAAA,QAAA3V,MACT,WAAQ,GAAC,CAAA2V,IAAA,OAAA3V,MACT,WAAM,IAAA8uB,EAAAxuB,KACL,GAAIA,KAAK83C,SAWJ,GAAG93C,KAAK83C,QAAQjpB,YACpB,YAXA7uB,KAAK83C,QAAUlqC,MAAMa,GAAGzO,KAAKiO,SAC7BjO,KAAK2M,KAAK6iB,iBAAiBrqC,KAAK6a,KAAK83C,SACrC93C,KAAK83C,QAAQpnC,YAAY,UAAU,WAClC8d,EAAKupB,QACLnqC,MAAM+iB,UAAUC,SAASpC,EAAK7hB,KAC/B,IACA3M,KAAK83C,QAAQpnC,YAAY,UAAU,WAClC9C,MAAM+iB,UAAUC,SAASpC,EAAKspB,QAC/B,IAKD,IAAM7gC,EAAOjX,KAAK83C,QAAQ5nC,UAC1BlQ,KAAK83C,QAAQppB,QAC0B,IAAnC1uB,KAAKg4C,MAAMh4C,KAAK83C,QAAS7gC,IAC5BjX,KAAKyW,OACP,GAAC,CAAApB,IAAA,QAAA3V,MACD,WACCM,KAAK83C,QAAQnoC,MACd,IAAC,CA7BiB,GC2CnB,SAASsoC,GAASjuC,GACjB,OAAKA,GAGW,OADhBA,EAAOA,EAAK3nB,QACH,KACR2nB,EAAOA,EAAKjnB,OAAO,IACQ,MAAxBinB,EAAKA,EAAKjpB,OAAO,KACpBipB,EAAOA,EAAKjnB,OAAO,EAAGinB,EAAKjpB,OAAO,IAC5BipB,GAPW,EAQnB,CCnDO,IAEMkuC,YAASC,GAAA,SAAAD,IAAA,OAAAL,QAAAK,GAAAE,GAAAp4C,KAAAk4C,EAAAlmC,UAAA,CAAA,OAAAqmC,GAAAH,EAAAC,GAAAP,GAAAM,EAAA,CAAA,CAAA7iC,IAAA,QAAA3V,MACrB,SAAM44C,EAAKrhC,GAEV,GADAjX,KAAKiK,KAAOjK,KAAK2M,KAAKsD,iBAClBjQ,KAAKiK,KACR,OAAO,EAERgN,EAAKL,SAAS2hC,QAAQtgC,QAAQ,IAC9BhB,EAAKL,SAAS1C,IAAIjT,SAAS,IAG3B,IACIyG,EDGC,SAAoBhI,GAC1B,GAAIA,GAAyB,iBAATA,GAAkD,IAA7BA,EAAMjd,QAAQ,WACtD,MAAO,CACNyxB,IAAK+jC,GAASv4C,EAAM3c,OAAO,EAAG2c,EAAM3e,OAAO,IAE9C,CCRay3D,CADCx4C,KAAK2M,KAAKmG,aAAa9S,KAAKiK,KAAKjE,IAAKhG,KAAKiK,KAAKG,SAExD1C,GAAQA,EAAKwM,KAChB+C,EAAKL,SAAS1C,IAAIjT,SAASyG,EAAKwM,KAEjC+C,EAAKL,SAAS1C,IAAI0d,OACnB,GAAC,CAAAvc,IAAA,QAAA3V,MACD,WAAO,IAAA8uB,EAAAxuB,KACAwK,EAAOxK,KAAK2M,KAAKuB,OAAO1D,KACxBiuC,EAAUjuC,GAAQA,EAAKkuC,QAAW,KAExC,MAAO,CACN/rC,KAAM,gBACNgL,KAAM/J,MAAMC,KAAKC,YAAYxE,OAAO,eACpCxB,MAAM,EACNujB,SAAU,SACVjd,KAAK,CACJzB,KAAK,OACLiK,SAAS,CACR,CAAEjK,KAAK,OAAQ9f,KAAK,MAAQw5B,YAAYzY,MAAMC,KAAKC,YAAYxE,OAAO,aAAc4F,GAAG,CACtFM,SAAW,SAAC3E,GAAK,OAAK2jB,EAAKmqB,YAAY9tC,EAAM,IAE9C,CAAE8B,KAAK,QAASuK,MAAMtJ,MAAMC,KAAKC,YAAYxE,OAAO,YAAaY,MAAO,UACxE,CAAEyC,KAAK,WAAYuK,MAAMtJ,MAAMC,KAAKC,YAAYxE,OAAO,gBAAiBsvC,OAAOH,EAAQvpC,GAAG,CACzF2pC,gBAAiB,SAASxsC,GAAK,IAAA8iB,EAAAnvB,KAC9B,IAAKA,KAAKkO,OAAO0qC,OAAO,CACvB,IAAME,EAAS,IAAIC,WAGnB,OAFAD,EAAOrS,OAAS,SAAC5mD,GAAC,OAAKsvC,EAAK6pB,cAAcpiC,SAAS1C,IAAIjT,SAASphB,EAAEm4C,OAAO5b,OAAO,EAChF08B,EAAOG,cAAc5sC,EAAKA,OACnB,CACR,CAECrM,KAAKg5C,cAAcpiC,SAAS2hC,QAAQtgC,QAAQ,GAC7C,EACDihC,aAAc,SAAS94B,EAAM+4B,GAC5Bn5C,KAAKg5C,cAAcpiC,SAAS1C,IAAIjT,SAASk4C,EAASC,SACnD,IAED,CAAEzsC,KAAK,WAAY9f,KAAK,UAAWue,YAAY,EAAMkE,IAAK,uBAAwBhB,SAAS,GAAIjI,OAAO,MAIxG6I,GAAG,CACFmqC,YAAa,WAAA,OAAM7qB,EAAK8qB,SAAS,EACjCC,cAAe,WAAA,OAAM/qB,EAAK/X,OAAO,GAGpC,GAAC,CAAApB,IAAA,UAAA3V,MACD,WACC,IAAMuK,EAAOjK,KAAKiK,KACZY,EAAQ7K,KAAKw5C,QAAQx5C,KAAK83C,QAAQ5nC,UAAU0G,SAAS1C,IAAI7S,YAC/DrB,KAAK2M,KAAK8sC,SAASxvC,EAAKjE,IAAKiE,EAAKG,OAAQS,GAC1C7K,KAAKyW,OACN,GAAC,CAAApB,IAAA,UAAA3V,MACD,SAAQwU,GAGP,MAFK,mCAAmCnhB,KAAKmhB,KAC5CA,EAAM,UAAYA,GACZA,CACR,GAAC,CAAAmB,IAAA,cAAA3V,MACD,SAAYmL,GACPA,IACHA,EAAQ+C,MAAMU,SAAS6F,OAAOnU,KAAKw5C,QAAQ3uC,IAC3C7K,KAAK83C,QAAQphB,UAAU,QAAQ9f,SAAS2hC,QAAQtgC,QAAQ,yCAAyCpN,EAAM,YAEzG,IAAC,EA1E6B8sC,yDAFT,mBCCTO,YAASwB,GAAA,SAAAxB,IAAA,OAAAL,QAAAK,GAAAE,GAAAp4C,KAAAk4C,EAAAlmC,UAAA,CAAA,OAAAqmC,GAAAH,EAAAwB,GAAA9B,GAAAM,EAAA,CAAA,CAAA7iC,IAAA,OAAA3V,MACrB,SAAK+V,GACJzV,KAAKkO,OAASuH,EAAOvH,OACrBlO,KAAK25C,OAASlkC,EAAOkkC,OAErB35C,KAAK2M,KAAK6D,UAAU,gBAAiB,CAACxQ,KAAK25C,OAAQ,UAEnDrB,GAAc9mC,UAAUooC,KAAK/0C,MAAM7E,KAAMgS,UAC1C,GAAC,CAAAqD,IAAA,QAAA3V,MACD,WACCM,KAAK2M,KAAK6D,UAAU,eAAgB,CAACxQ,KAAK25C,OAAQ,UAClD35C,KAAKkO,OAASlO,KAAK25C,OAAS,IAC7B,GAAC,CAAAtkC,IAAA,QAAA3V,MACD,WAAO,IAAA8uB,EAAAxuB,KAWN,OAVAA,KAAK2M,KAAK+D,YAAY,iBAAiB,SAAC7M,EAAIyQ,GACxCka,EAAKspB,SAAWtpB,EAAKspB,QAAQjpB,aAAuB,SAARva,GAC9Cka,EAAK/X,OACP,IAEAzW,KAAK2M,KAAK+D,YAAY,aAAa,SAAAzB,GACrB,mBAAVA,EAAIpL,IAA2B2qB,EAAKspB,SAAWtpB,EAAKspB,QAAQjpB,aAC9DL,EAAK/X,OACP,IAEO6hC,GAAc9mC,UAAUvD,MAAMpJ,MAAM7E,KAAMgS,UAClD,GAAC,CAAAqD,IAAA,QAAA3V,MACD,SAAM44C,EAAKrhC,GAEVA,EAAKL,SAAS2hC,QAAQtgC,QAAQ,IAC9BhB,EAAKL,SAAS1C,IAAIjT,SAAS,IAExBjB,KAAKkO,QAAUlO,KAAKkO,OAAOxG,MAC7BuP,EAAKL,SAAS1C,IAAIjT,SAASjB,KAAKkO,OAAOxG,MAExCuP,EAAKL,SAAS1C,IAAI0d,OACnB,GAAC,CAAAvc,IAAA,UAAA3V,MACD,WACC,IAAMmL,EAAQ7K,KAAKw5C,QAAQx5C,KAAK83C,QAAQ5nC,UAAU0G,SAAS1C,IAAI7S,YAC/D,GAAGrB,KAAK25C,OACP35C,KAAK2M,KAAKo4B,MAAM7E,OAAOlgC,KAAK25C,OAAQ9uC,OACjC,CACH,IAAMhH,EAAK7D,KAAK2M,KAAKo4B,MAAM7lC,IAAI,KAAM,KAAM,QAAS2L,GACpD7K,KAAK2M,KAAKo4B,MAAM9U,UAAUpsB,EAC3B,CACA7D,KAAKyW,OACN,IAAC,EA7C6B6hC,yDAFT,kBCElBuB,IAAkB,EAsFf,SAASjuC,GAAKe,GACpBmtC,GAAentC,GAAM,EACtB,CAEO,SAASd,GAAKc,GACpBmtC,GAAentC,EAAK,EACrB,CAEO,SAASzI,GAAMyI,GACjBktC,KACHltC,EAAKotC,eAAiB,GACtBptC,EAAKqtC,eAAiB,EAExB,CAEA,SAASC,GAAattC,EAAMjF,GACvBiF,EAAKutC,cAAiBvtC,EAAK6L,gBAE9B7L,EAAKotC,eAAen1C,OAAO+H,EAAKqtC,cAAc,GAE9CrtC,EAAKotC,eAAe50D,KAAKuiB,GACzBiF,EAAKqtC,gBAEP,CAEO,SAASrsB,GAAWxR,EAAMxP,GAChCA,EAAKutC,eACL,IACC/9B,EAAKhL,KAAKxE,EACX,CACQ,QACPA,EAAKutC,cACN,CACD,CAEO,SAASC,GAAYh+B,GAC3B09B,IAAkB,EAClB19B,IACA09B,IAAkB,CACnB,CAEA,SAASC,GAAentC,EAAM+xB,GAC7B,IAAIh3B,EAAOiF,EAAKotC,eAAerb,EAAK,EAAG/xB,EAAKqtC,cAActb,EAAM/xB,EAAKqtC,eACrE,GAAGtyC,EAAK,CACP,IAAIhI,EAAQg/B,EAAO,EAAIh3B,EAAKonB,SAAWpnB,EAAKhI,MACxC++B,EAAYC,EAAK,EACjBhmB,EAAS,CAAChR,EAAK+N,OAAQ/N,EAAK1B,IAAK0B,EAAK0C,OAAQ1K,EAAO++B,EAAW/2B,EAAKqb,OAEzEpW,EAAKqtC,eAAiBtb,EAGtB,IAAIzsB,EAAQvK,EAAKuK,MACbmoC,EAAWztC,EAAKotC,eAAerb,EAAK,EAAG/xB,EAAKqtC,cAActb,EAAM/xB,EAAKqtC,eAEzErsB,IAAW,WACVhhB,EAAK6D,UAAU,SAAUkI,GACpBzG,GAAWmoC,GAAYnoC,GAASmoC,EAASnoC,QAC7CtF,EAAK3K,UACL2K,EAAK6D,UAAU,cAAe,IAE/B,GAAC7D,GAECytC,GAAYnoC,GAASA,GAASmoC,EAASnoC,OACzC6nC,GAAentC,EAAM+xB,EAEvB,CACD,KC2HItmB,sEDjRG,SAAczL,GACpBzI,GAAMyI,GAuJP,SAAsBA,GACrBA,EAAK+D,YAAY,UAAU,SAAS4D,EAAMtO,EAAKoE,EAAQ1K,GACtD,OAAQ4U,GACP,IAAK,aACJ3H,EAAK+uB,WAAWh8B,GAChB,MACD,IAAK,gBACJiN,EAAK8uB,cAAc/7B,GAGtB,GACD,CAjKC26C,CAAa1tC,GACbA,EAAK+D,YAAY,eAAe,WAAA,OAAMxM,GAAMyI,MAC5CA,EAAK+D,YAAY,oBAAoB,WAAA,OAAMxM,GAAMyI,MAEjDA,EAAK+D,YAAY,uBAAuB,SAAC1K,EAAKoE,EAAQ8V,EAAQ8B,GAC7D,GAAI8gB,GAAan2B,EAAM3G,EAAKoE,GAAS,OAAO,EAC5C6vC,GAAattC,EAAM,CAAC8I,OAAQ,QAASzP,IAAIA,EAAKoE,OAAQA,EAAQ1K,MAAOsiB,EAAQ8M,SAAU5O,EAAQjO,MAAOA,GAAMvS,OAC7G,IAEAiN,EAAK+D,YAAY,uBAAuB,SAAC1K,EAAKoE,EAAQkwC,EAAQC,EAAQ3tD,GACrE,GAAIk2C,GAAan2B,EAAM3G,EAAKoE,EAAQxd,GAAO,OAAO,EAC/CA,GAAQ+f,EAAKiM,kBACfqhC,GAAattC,EAAM,CAAC8I,OAAQ,QAASzP,IAAIA,EAAKoE,OAAQA,EAAQ1K,MAAO66C,EAAQzrB,SAAUwrB,EAAQroC,MAAOA,GAAMvS,OAC9G,IAEAiN,EAAK+D,YAAY,gBAAgB,SAAC1K,EAAKoE,EAAQ1K,GAC9C,GAAIojC,GAAan2B,EAAM3G,EAAKoE,GAAS,OAAO,EAC5C6vC,GAAattC,EAAM,CAAC8I,OAAQ,OAAQzP,IAAIA,EAAKoE,OAAQA,EAAQ1K,MAAOA,EAAOovB,SAASpvB,EAAOuS,MAAOA,GAAMvS,OACzG,IAEAiN,EAAK+D,YAAY,iBAAiB,SAAC1K,EAAKoE,EAAQ1K,GAC/C,GAAIojC,GAAan2B,EAAM3G,EAAKoE,GAAS,OAAO,EAC5C6vC,GAAattC,EAAM,CAAC8I,OAAQ,QAASzP,IAAIA,EAAKoE,OAAQA,EAAQ1K,MAAOA,EAAOovB,SAASpvB,EAAOuS,MAAOA,GAAMvS,OAC1G,IAEAiN,EAAK+D,YAAY,YAAY,SAAC+E,EAAQxG,GAChCA,EAAIriB,MAAQqiB,EAAIriB,MAAQ+f,EAAKiM,kBACjCqhC,GACCttC,EACA,CACC8I,OAAAA,EACAzP,IAAKiJ,EAAIjJ,KAAO,KAChBoE,OAAQ6E,EAAI7E,QAAU,KACtB1K,MAAOkO,MAAM6J,YAAYxI,EAAIvP,OAAS,KAAOuP,EAAIvP,MACjDovB,SAAUlhB,MAAM6J,YAAYxI,EAAI6f,UAAY,KAAO7f,EAAI6f,SACvD/L,MAAO9T,EAAI8T,OAAS,KACpB9Q,MAAOA,GAAMvS,OAGjB,IAGAiN,EAAKiD,GAAG,SAASc,YAAY,kBAAkB,SAACtG,EAAQkwC,EAAQC,GAAM,OACrEN,GAAattC,EAAM,CAAC8I,OAAQ,WAAYzP,IAAI,EAAGoE,OAAOA,EAAQ1K,MAAO66C,EAAQzrB,SAAUwrB,EAAQroC,MAAOA,GAAMvS,OAAO,IAGpHiN,EAAK+D,YAAY,qBAAqB,SAAC+E,EAAQtD,EAAOC,EAAKxlB,GACvDA,GAAQ+f,EAAKiM,kBAA+B,QAAXnD,GAA+B,QAAXA,GACvDwkC,GAAattC,EAAM,CAAE8I,OAAO,CAAC5R,GAAI4R,EAAQxD,MAAM,UAAWA,MAAOA,GAAMvS,MAAO0K,OAAQ,CACrF+H,MAAO,CAAE/H,OAAO+H,GAASC,IAAK,CAAEhI,OAAOgI,KAE1C,IAEAzF,EAAK+D,YAAY,kBAAkB,SAAC+E,EAAQtD,EAAOC,EAAKxlB,GACpDA,GAAQ+f,EAAKiM,kBAA+B,QAAXnD,GAA+B,QAAXA,GACvDwkC,GAAattC,EAAM,CAAE8I,OAAQ,CAAC5R,GAAI4R,EAAQxD,MAAM,OAAQA,MAAOA,GAAMvS,MAAOsG,IAAK,CAChFmM,MAAO,CAACnM,IAAKmM,GAAQC,IAAK,CAACpM,IAAKoM,KAEnC,IAEAzF,EAAKiD,GAAG,SAASc,YAAY,eAAe,SAAC1K,EAAMs0C,EAAQC,GAAM,OAChEN,GAAattC,EAAM,CAAC8I,OAAQ,WAAYzP,IAAKA,EAAKoE,OAAO,EAAG1K,MAAO66C,EAAQzrB,SAAUwrB,EAAQroC,MAAOA,GAAMvS,OAAO,IAIlHiN,EAAK+D,YAAY,wBAAwB,SAAC1K,EAAKoE,EAAQ1K,EAAO46C,EAAQ1tD,GACrE,GAAGk2C,GAAan2B,EAAM3G,EAAKoE,EAAQxd,GAAO,OAAO,EAC9CA,GAAQ+f,EAAKiM,mBACflZ,EAAQA,EAAQkO,MAAMvG,KAAK3H,GAAS,KACpCu6C,GAAattC,EAAM,CAAC8I,OAAQ,YAAazP,IAAAA,EAAKoE,OAAAA,EAAQ1K,MAAAA,EAAOovB,SAAUwrB,EAAQroC,MAAOA,GAAMvS,QAE9F,IAGAiN,EAAK+D,YAAY,UAAU,SAAChR,EAAOuiB,EAAQr1B,GACvCA,GAAQ+f,EAAKiM,kBACfqhC,GAAattC,EAAM,CAAC8I,OAAQ,OAAQ/V,MAAOuiB,EAAQ6M,SAAUpvB,EAAOuS,MAAOA,GAAMvS,OACnF,IAEAiN,EAAKutC,aAAe,CACrB,6BCgMA,SAASM,GAAU7tC,GAClBkM,aAAaT,IACbA,GAASxK,MAAMkL,OAAM,WACpB,IAAMrK,EAAK9B,EAAKo4B,MAChB,IAAI,IAAIlhC,KAAM4K,EAAG23B,MAAM,CACtB,IAAMqU,EAAOhsC,EAAG23B,MAAMviC,GAEhB62C,EAAcjsC,EAAGksC,OAAOF,EAAKnmC,MAC7Bw1B,EAAS4Q,EAAY5Q,OACrB8Q,EAAQF,EAAYE,MAEvBA,GACFC,GAAUluC,EAAM8B,EAAG5O,IAAIgE,GAAK+2C,EAAOH,EAAM3Q,EAC3C,CACD,GACD,CAEA,SAAS+Q,GAAUluC,EAAMuf,EAAM0uB,EAAOH,EAAM3Q,GAC3C,IAAMpiC,EAAOozC,GAAWnuC,EAAM8tC,GAE9B,GAAgB,SAAbA,EAAKnmC,KAAgB,CACpBw1B,IACF5d,EAAO4d,EAAO5d,EAAMuuB,EAAM/yC,GAAM,IAEjC,IAAMwG,EAASusC,EAAKvsC,OACjBA,IAAW6sC,GAAO7sC,EAAOoG,OAmT9B,SAAuBD,EAAKomC,EAAM9tC,GACjC,IAAMuB,EAASusC,EAAKvsC,OACQ,UAAzBsJ,GAAOtJ,EAAO8sC,UAChB9sC,EAAO8sC,OAAS,CAACC,WAAY/sC,EAAO8sC,SAErC,IAAMA,EAAS9sC,EAAO8sC,OAEtB,GAAGA,EAAOC,SACT5mC,EAAIi1B,aACA,GAAG0R,EAAOrwC,MAId,IAHA,IAAMuwC,EAAQC,GAAUxuC,EAAM8tC,GACxBW,EAAuC,QAArBltC,EAAOmtC,WACzBC,EAAc70B,GAAUu0B,EAAOrwC,MAAOywC,EAAiBF,GACpD16D,EAAI,EAAGA,EAAI86D,EAAYv6D,OAAQP,IAAI,CAC3C,IAAM4/B,EAAOk7B,EAAY96D,UAClB6zB,EAAI,GAAG+L,EACf,CAEF,CApUGm7B,CAAc7zC,EAAM+yC,EAAM9tC,EAC5B,CAEAiuC,EAAM1uB,EAAMxkB,EACb,CA2BA,SAAS8zC,GAAS7uC,EAAM2Q,GAIvB,IAAI,IAAIzZ,KAFR+J,MAAM4C,UAAU,UAAW,IAEb7D,EAAKo4B,MAAMqB,MAAM,CAC9B,IAAMqV,EAAM7tC,MAAMgC,GAAG/L,GACf42C,EAAO9tC,EAAKo4B,MAAMqB,MAAMviC,GAC3ByZ,IACFm9B,EAAK50D,EAAI61D,GAAY/uC,EAAM8tC,EAAKvsC,OAAO9H,MAAOq0C,EAAK50D,EAAG,KACtD40D,EAAKr4D,EAAIs5D,GAAY/uC,EAAM8tC,EAAKvsC,OAAO7H,OAAQo0C,EAAKr4D,EAAG,MAExDu5D,GAAShvC,EAAM8uC,EAAKhB,EACrB,CACD,CAEA,SAASkB,GAAShvC,EAAM8uC,EAAKhB,GAC5B,IAAM5nC,EAAQlG,EAAKgU,OAAO2X,iBAE1BmjB,EAAI1oB,OAAO,CACV3sB,MAAOq0C,EAAKvsC,OAAO9H,MAAQuG,EAAK4U,MAChClb,OAAQo0C,EAAKvsC,OAAO7H,OAASsG,EAAK4U,QAEnCk6B,EAAI7kB,SAEJ6kB,EAAI/sB,KAAK,CACR7oC,EAAE40D,EAAK50D,EAAI8mB,EAAK4U,MAChBn/B,EAAGq4D,EAAKr4D,EAAIuqB,EAAK4U,MAAS1O,EAAMzwB,GAElC,CAEA,SAASs5D,GAAY/uC,EAAMivC,EAASr2D,EAAG+uB,GACtC,GAAI/uB,GAAU,IAALA,EAEL,CACH,IAAM6c,GAAgB,KAARkS,EAiChB,SAAmB3H,GAClB,IAAIvG,EAAQ,EAKZ,OAJAuG,EAAKgU,OAAO0gB,YAAW,SAASx9B,GACrB,UAAPA,IACFuC,GAASpG,KAAKghC,gBAAgBn9B,GAAIuC,MACpC,IACOA,EAAQuG,EAAK4U,KACrB,CAxC8Bs6B,CAAUlvC,GA0CxC,SAAoBA,GACnB,IAAItG,EAAS,EAIb,OAHAsG,EAAKgU,OAAOjZ,KAAK/F,MAAK,SAASsN,GAC9B5I,GAAU4I,EAAInO,SAAW8M,MAAMgB,KAAKmI,QAAQ7B,SAC7C,IACO7O,EAASsG,EAAK4U,KACtB,CAhDgDu6B,CAAWnvC,IAASivC,EAClEr2D,EAAIjF,KAAKsJ,IAAItJ,KAAKsT,IAAIrO,EAAG,GAAI6c,EAC9B,MAJC7c,EAAIonB,EAAKgU,OAAO2X,iBAAiBhkB,GAAM,GAKxC,OAAO/uB,CACR,CAuMA,SAASw2D,GAASr0C,GACjB,MAAsB,iBAARA,IAAoD,IAAhCA,EAAKjlB,QAAQ,aAChD,CAEA,SAASq4D,GAAWnuC,EAAM8tC,GACzB,IAAI/yC,EAAO+yC,EAAK/yC,KAEhB,GAAG,yBAAyB3U,KAAK2U,GAChC,OAAOA,EAER,IAAM2M,EAAM,GACZ,GAAG3M,EAAK,CACP,IACM0zC,EAAuC,QAD9BX,EAAKvsC,OACWmtC,WAC3B/gB,EAAY,EAEhB5yB,EAAOs0C,GAAct0C,GACrB,IAAI,IAAIlnB,EAAI,EAAGA,EAAIknB,EAAK3mB,OAAQP,IAAI,CACnC,IAAMk6B,EAAQqhC,GAASr0C,EAAKlnB,IAAMmqB,GAAMjD,EAAKlnB,GAAImsB,GAAQ,KACzD,GAAG+N,EAAM,CACR,IAAM9tB,EAAO8tB,EAAM,GAAK/N,EAAKoS,OAAOpW,QAAQ+R,EAAM,IAAM/N,EAAK0S,OAG7D,GAFA3E,EAAM,GAAK4f,EAER1tC,EAAK,CACP,IAAMqvD,EAAUb,EAAkBc,GAAar3C,MAAMjY,EAAM8tB,GAASyhC,GAAat3C,MAAMjY,EAAM8tB,GAC7F4f,GAAa2hB,EAAQ,GACrB,IAAI,IAAIz7D,EAAI,EAAGA,EAAIy7D,EAAQ,GAAGl7D,OAAQP,IACjC6zB,EAAI7zB,KACP6zB,EAAI7zB,GAAK,IACVotB,MAAMgH,OAAOP,EAAI7zB,GAAIy7D,EAAQ,GAAGz7D,GAElC,CACD,CACD,CACD,CACA,OAAO6zB,CACR,CAsBA,SAAS8mC,GAAUxuC,EAAM8tC,GACxB,IAAI/yC,EAAO+yC,EAAK/yC,KAEhB,IAAG,yBAAyB3U,KAAK2U,GAAjC,CAGA,IAAIwzC,EAAQ,CAAA,EACZ,GAAGxzC,EAAK,CACP,IACM0zC,EAAuC,QAD9BX,EAAKvsC,OACWmtC,WAC3B/gB,EAAY,EAEhB5yB,EAAOs0C,GAAct0C,GACrB,IAAI,IAAIlnB,EAAI,EAAGA,EAAIknB,EAAK3mB,OAAQP,IAAI,CACnC,IAAMk6B,EAAQqhC,GAASr0C,EAAKlnB,IAAMmqB,GAAMjD,EAAKlnB,GAAImsB,GAAQ,KACzD,GAAG+N,EAAM,CACR,IAAM9tB,EAAO8tB,EAAM,GAAK/N,EAAKoS,OAAOpW,QAAQ+R,EAAM,IAAM/N,EAAK0S,OAG7D,GAFA3E,EAAM,GAAK4f,EAER1tC,EAAK,CACP,IAAMqvD,EAAUb,EAAkBc,GAAar3C,MAAMjY,EAAM8tB,GAASyhC,GAAat3C,MAAMjY,EAAM8tB,GAC7F4f,GAAa2hB,EAAQ,GACrBruC,MAAMgH,OAAOsmC,EAAOe,EAAQ,GAC7B,CACD,CACD,CACD,CACA,OAAOf,CAvBN,CAwBF,CAEO,SAASc,GAAct0C,GAC7B,OAAOA,EAAK9kB,QAAQ,MAAO,IAAIT,MAAM,IACtC,CAEO,SAAS44D,GAAOzmC,GACtB,MAAO,YAAYvhB,KAAKuhB,EACzB,CAEO,SAAS8nC,GAAWzvC,EAAMjF,EAAM2zC,EAAYllB,EAAQkmB,GAC1D,IAAMC,EAAoB,QAAdjB,EACRkB,EAAO,GAEX,GAAG70C,EAAK,CACP,IAAI80C,EAAQ,GACRxB,EAAS,GACTyB,EAAa,GAEdtmB,IACCA,EAAO6kB,SACTA,EAASv0B,GAAU0P,EAAO6kB,OAAQsB,IAChCnmB,EAAOqmB,QACTA,EAAQ/1B,GAAU0P,EAAOqmB,MAAOF,IAC9BnmB,EAAOumB,SACTD,EAAatmB,EAAOumB,OAAOzqD,QAAO,SAAAk0B,GAAG,OAAkC,GAA9B60B,EAAOv4D,QAAQ0jC,EAAIxb,SAA6C,GAA7B6xC,EAAM/5D,QAAQ0jC,EAAIxb,YAGhGjD,EAAOs0C,GAAct0C,GACrB,IAAIsqB,EAAa,EACb2qB,EAAa,EACjBj1C,EAAKxiB,SAAQ,SAAA+2D,GACZ,IAAMS,EAASjiC,GAAQwhC,GAAWtxC,GAAMsxC,EAAStvC,GAAQ,KACzD,GAAG+vC,EAAO,CAKT,IAJA,IAGIE,EAHEzqC,EAAQmqC,EAAMI,EAAO,GAAKA,EAAO,GACjCtqC,EAAMkqC,EAAMI,EAAO,GAAKA,EAAO,GAElBpkC,EAAAA,WAElB,IAAM3N,EAAQ2xC,EAAMniC,GAAQ35B,EAAGk8D,EAAO,GAAIl8D,EAAGk8D,EAAO,GAAIA,EAAO,IAAMviC,GAAQuiC,EAAO,GAAIl8D,EAAGk8D,EAAO,GAAIl8D,EAAGk8D,EAAO,IAC1GG,EAAQxoC,GAASooC,GAAY,SAAAt2B,GAAG,OAAIA,EAAIxb,OAASA,KAAWwb,EAAIgQ,QAAUhQ,EAAIgQ,QAAU8lB,MAE3FY,IACEA,EAAM1mB,SACT0mB,EAAM1mB,OAAS8lB,GAChBW,EAAiB,IAPXp8D,EAAI2xB,EAAO3xB,GAAK4xB,EAAK5xB,IAAG83B,IAWhC,IAFC,IAAA6pB,EAAAA,WAGA,IAAMx3B,EAAQ2xC,EAAMniC,GAAQ35B,EAAGk8D,EAAO,GAAIl8D,EAAGk8D,EAAO,GAAIA,EAAO,IAAMviC,GAAQuiC,EAAO,GAAIl8D,EAAGk8D,EAAO,GAAIl8D,EAAGk8D,EAAO,IAChH,IAA6B,GAA1B1B,EAAOv4D,QAAQkoB,KAAyC,GAAzB6xC,EAAM/5D,QAAQkoB,GAAY,OAAA,EAG5D,IAkEcwO,EACZ2jC,EAnEIC,EAAYN,EAAWxqD,QAAO,SAAAk0B,GAAG,OAAIA,EAAIxb,OAASA,GAASwb,EAAIgQ,QAAU8lB,KAAS,GAExF,GAAGW,IAAmBG,KAAeV,IAAiBM,GAAcn8D,GAAK2xB,GAAM,OAAA,EAG/EoqC,EAAKp3D,KAAK43D,GAAa,CACtB5mB,OAAQ8lB,EACRtxC,MAAAA,EACAsvB,OAAQ,SACR5rB,QAAS,EACT7C,OAwDa2N,EAxDI6Y,EAyDhB8qB,EAAS,CACd,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WAEvEA,EAAO3jC,EAAM2jC,EAAO/7D,WAzDvBixC,GACA,EAnBOxxC,EAAI2xB,EAAO3xB,GAAK4xB,EAAK5xB,IAAG2hD,IAoBhCwa,EAAa,CACd,CACD,GACD,CACA,OAAOJ,CACR,CAEO,SAAS91B,GAAU5M,EAAQyiC,EAAKU,GACtC,IAAMpjC,EAAQ,GAmBd,OAjBAC,EAASmiC,GAAcniC,IAChB30B,SAAQ,SAAA+3D,GAEd,GADAA,EAAWxiC,GAAQwiC,GAAYtyC,GAAMsyC,GAAY,KAKhD,IAHA,IAAM9qC,EAAQmqC,EAAMW,EAAS,GAAKA,EAAS,GACrC7qC,EAAMkqC,EAAMW,EAAS,GAAKA,EAAS,GAEjCz8D,EAAI2xB,EAAO3xB,GAAK4xB,EAAK5xB,IAAI,CAChC,IAAMmqB,EAAQ2xC,EACbniC,GAAQ35B,EAAGy8D,EAAS,GAAIz8D,EAAGy8D,EAAS,GAAIA,EAAS,IACjD9iC,GAAQ8iC,EAAS,GAAIz8D,EAAGy8D,EAAS,GAAIz8D,EAAGy8D,EAAS,IAElDrjC,EAAMz0B,KAAK63D,EAAYA,EAAUryC,GAASA,EAC3C,CAEF,IAEOiP,CACR,CAEO,SAASsjC,GAAiBhvC,GAkBhC,MAjB2B,UAAxBsJ,GAAOtJ,EAAOsuC,SAChBtuC,EAAOsuC,MAAQ,CAACvB,WAAY/sC,EAAOsuC,QAER,UAAzBhlC,GAAOtJ,EAAO8sC,UAChB9sC,EAAO8sC,OAAS,CAACC,WAAY/sC,EAAO8sC,SAErC9sC,EAAO8sC,OAASptC,MAAMgH,OAAO1G,EAAO8sC,OAAQ,CAC3CzmB,OAAO,IACPrqB,MAAM,SACNizC,OAAO,WAGJjvC,EAAOhC,QACVgC,EAAOhC,MAAQ,CACdyf,MAAM,IAGDzd,CACR,CASA,SAASiuC,GAAalhC,EAAGC,EAAGC,EAAGC,EAAGolB,EAAUlG,GAG3C,IAFA,IAAM5yB,EAAO,GACP01C,EAAc,CAAA,EACX58D,EAAIy6B,EAAIoiC,EAAO,EAAG78D,GAAK26B,EAAI36B,IAAK68D,IAAO,CAC/C31C,EAAK21C,GAAQ,GACb,IAAK,IAAIl2D,EAAI+zB,EAAI+4B,EAAO3Z,EAAWnzC,GAAKi0B,EAAIj0B,IAAK8sD,IAC7CzzD,GAAK26B,IACPiiC,KAAWp8D,OAAIw/C,EAAYA,EAAU,IAAM,IAAEx/C,OAAGg4B,GAAO7xB,IAAEnG,OAAGi6B,EAAEj6B,KAAAA,OAAIg4B,GAAO7xB,IAAEnG,OAAGm6B,WAAKn6B,OAAUizD,GAC7F3Z,KAED5yB,EAAK21C,GAAK,OAAAr8D,OAAQizD,IAAUj0C,KAAKqB,SAAS7gB,EAAE,EAAE2G,EAAE,EAElD,CACA,MAAO,CAACugB,EAAM01C,EAAa9iB,EAC5B,CAEA,SAAS4hB,GAAajhC,EAAGC,EAAGC,EAAGC,EAAGolB,EAAUlG,GAG3C,IAFA,IAAM5yB,EAAO,GACP01C,EAAc,CAAA,EACX58D,EAAI06B,EAAI+4B,EAAO,EAAGzzD,GAAK46B,EAAI56B,IAAKyzD,IAAO,CAC/CvsC,EAAKusC,GAAQ,GACb,IAAK,IAAI9sD,EAAI8zB,EAAIoiC,EAAO/iB,EAAWnzC,GAAKg0B,EAAIh0B,IAAKk2D,IAC7C78D,GAAK46B,IACPgiC,KAAWp8D,OAAIw/C,EAAYA,EAAU,IAAM,IAAEx/C,OAAGg4B,GAAOkC,IAAGl6B,OAAGmG,EAACnG,KAAAA,OAAIg4B,GAAOoC,IAAGp6B,OAAGmG,WAAInG,OAAUq8D,GAC7F/iB,KAED5yB,EAAKusC,GAAK,OAAAjzD,OAAQq8D,IAAUr9C,KAAKqB,SAASla,EAAE,EAAE3G,EAAE,EAElD,CACA,MAAO,CAACknB,EAAM01C,EAAa9iB,EAC5B,qHA7yBO,SAAc3tB,GACpB,IA2MI2wC,EA3MEhoC,EAAO3I,EAAKgU,OAAO7P,MAAM0gB,cAAc,oBAE7C7kB,EAAKo4B,MAAQ,CACZwY,SAAS,SAASjpC,EAAMw1B,EAAQ8Q,GAC3B56C,KAAK26C,OAAOrmC,KACftU,KAAK26C,OAAOrmC,GAAQ,CAAEw1B,OAAOA,EAAQ8Q,MAAMA,GAC5C,EACD9yC,KAAM,SAASjE,EAAIhe,EAAGzD,GACrB,IAAMq5D,EAAM7tC,MAAMgC,GAAG/L,GACf0M,EAAM3C,MAAMvG,KAAKrH,KAAKomC,MAAMviC,IAClC7D,KAAKomC,MAAMviC,GAAIhe,EAAI61D,GAAY/uC,EAAM4D,EAAIrC,OAAO9H,MAAOvgB,EAAE8mB,EAAK4U,MAAO,KACrEvhB,KAAKomC,MAAMviC,GAAIzhB,EAAIs5D,GAAY/uC,EAAM4D,EAAIrC,OAAO7H,OAAQjkB,EAAEuqB,EAAK4U,MAAO,KACtE5U,EAAK6D,UAAU,WAAY,CAAC,YAAa,CAAExK,IAAInC,EAAIirB,SAASlhB,MAAMvG,KAAKrH,KAAKomC,MAAMviC,IAAMnE,MAAM6Q,KAC9ForC,GAAShvC,EAAM8uC,EAAKz7C,KAAKomC,MAAMviC,GAC/B,EACD3E,IAAK,SAASrZ,EAAGzD,EAAGkyB,EAAM5M,EAAMwG,EAAQrK,GAAG,IAAA2qB,EAAAxuB,KAC1CkO,EAASA,GAAU,GACR,SAARoG,IACFpG,EAASN,MAAMgH,OAAO1G,EAAQ,CAC7BoG,KAAM,OACN+mC,WAAW,aAIb,IAAMh1C,EAAS6H,EAAO7H,OAAS6H,EAAO7H,QAAU,IAC1CD,EAAQ8H,EAAO9H,MAAQ8H,EAAO9H,OAAS,IAEvCq1C,EAAM7tC,MAAMa,GAAG,CACpB5K,GAAGA,GAAM,aAAa+J,MAAMyE,MAC5B1F,KAAM,YACNq6B,UAAU1xB,EAAMzF,OAAOlD,EAAKgU,OAAOzS,OAAOrK,GAC1CuC,MAAMA,EAAOC,OAAOA,IA+BrB,OA5BAo1C,EAAI/qC,YAAY,iBAAiB,SAAC7qB,EAAGzD,GACpC,IAAMywB,EAAQlG,EAAKgU,OAAO2X,iBAC1B9J,EAAK1mB,KAAKjE,EAAIhe,EAAGzD,EAAEywB,EAAMzwB,EAC1B,IACAq5D,EAAI/qC,YAAY,gBAAgB,WAC/B,IAAM+pC,EAAQjsB,EAAK4X,MAAMviC,GACnB0M,EAAM3C,MAAMvG,KAAKozC,GAEvBA,EAAKvsC,OAAO7H,OAASo1C,EAAI36C,QACzB25C,EAAKvsC,OAAO9H,MAAQq1C,EAAIz+C,OACxB2P,EAAK6D,UAAU,WAAY,CAAC,cAAe,CAAExK,IAAInC,EAAIirB,SAASlhB,MAAMvG,KAAKozC,GAAO/6C,MAAM6Q,IACvF,IACAkrC,EAAI/qC,YAAY,cAAc,WAC7B,IAAMxC,EAASsgB,EAAK4X,MAAMviC,GACpB24B,EAAUhO,EAAKgvB,UAAUtvC,EAAOoG,OAASpG,EAAOoG,KACtD3H,EAAK6D,UAAU,YAAa,CAAC,CAAE3M,GAAG24B,EAASmd,OAAO91C,EAAIqK,OAAAA,IACvD,IACAutC,EAAI/qC,YAAY,gBAAgB,WAAA,OAAM8d,EAAKtnB,OAAOrD,MAElDA,EAAK43C,EAAIvtC,OAAOrK,GAEhBhe,EAAI61D,GAAY/uC,EAAMtG,EAAQxgB,EAAG,KACjCzD,EAAIs5D,GAAY/uC,EAAMvG,EAAOhkB,EAAG,KAEhC4d,KAAKomC,MAAMviC,GAAM,CAAEhe,EAAAA,EAAGzD,EAAAA,EAAGkyB,KAAAA,EAAM5M,KAAAA,EAAMwG,OAAAA,GACrClO,KAAKkgC,OAAOr8B,EAAI6D,EAAMwG,GAAQ,GAC9BytC,GAAShvC,EAAM8uC,EAAKz7C,KAAKomC,MAAMviC,IAExBA,CACP,EACDqD,OAAQ,SAASrD,GAChB,IAAM0M,EAAMvQ,KAAKomC,MAAMviC,GACvB+J,MAAMgC,GAAG/L,GAAI4S,eACNzW,KAAKomC,MAAMviC,GAElB8I,EAAK6D,UAAU,WAAY,CAAC,WAAY,CAAExK,IAAInC,EAAIirB,SAAS,KAAMpvB,MAAM6Q,IACvE,EACD1Q,IAAI,SAASgE,GACZ,OAAO+J,MAAMgC,GAAG/L,GAAIqM,SACpB,EACDutC,UAAU,SAAS55C,GAClB,OAAO7D,KAAKomC,MAAMviC,EAClB,EACDq8B,OAAO,SAASr8B,EAAI6D,EAAMwG,EAAQwvC,GACjC,IAAMntC,EAAMmtC,EAAQ,KAAO9vC,MAAMvG,KAAKrH,KAAKomC,MAAMviC,IAC3C42C,EAAOz6C,KAAKomC,MAAMviC,GAClB0mC,EAAUvqC,KAAK26C,OAAOF,EAAKnmC,MAOjC,GALA5M,EAAOA,GAAQwG,EAAOxG,MAAQ,UAC9BwG,EAASA,GAAU,IAELxG,KAEE,SAAb+yC,EAAKnmC,KAAgB,CACvB,IAAMA,EAAOpG,EAAOoG,KACpB,GAAGA,IAASpG,EAAOwuC,OAAO,CACzB,IAGIL,EAHEG,EAAQtuC,EAAOsuC,OAAStuC,EAAOsuC,MAAM7xC,MACrCqwC,EAAS9sC,EAAO8sC,QAAU9sC,EAAO8sC,OAAOrwC,MAG3C4F,GAAOA,EAAIrC,SACV6sC,GAAOzmC,GACN/D,EAAIrC,OAAO8sC,QAAUzqC,EAAIrC,OAAO8sC,OAAOC,WACzCoB,EAAgB,GAEV9rC,EAAIrC,OAAOsuC,OAASjsC,EAAIrC,OAAOsuC,MAAMvB,WAC5CoB,EAAgB,IAGlBnuC,EAAOwuC,OAASN,GAAWzvC,EAAMjF,EAAMwG,EAAOmtC,WAAY,CAACmB,MAAAA,EAAOxB,OAAAA,GAASqB,EAC5E,CACD,CAEA,IAAMZ,EAAM7tC,MAAMgC,GAAG/L,GAEfwC,EAAS6H,EAAO7H,QAAU,IAC1BD,EAAQ8H,EAAO9H,OAAS,IAE3Bq1C,EAAIz+C,QAAUoJ,GAASq1C,EAAI36C,SAAWuF,IACxCo1C,EAAI1oB,OAAO,CAAC3sB,MAAAA,EAAOC,OAAAA,IACnBo1C,EAAI7kB,UAGL6jB,EAAK/yC,KAAOA,EACZ+yC,EAAKvsC,OAASA,EAEd,IAAIge,EAAOlsB,KAAKH,IAAIgE,GAIpB,GAFA6D,EAAOozC,GAAWnuC,EAAM8tC,GAErBlQ,EAAQT,OAAO,CACjB,IAAM6T,EAAe/vC,MAAMvG,KAAKozC,GAGhCkD,EAAazvC,OAAO9H,MAAQu3C,EAAazvC,OAAO7H,OAAS,EAiS7D,SAAwB6lB,GACvB,IAAM0xB,EAAQ,SAASjxC,GACtB,MAAoB,aAAbA,EAAK9f,MAAoC,aAAb8f,EAAK9f,MAErCgxD,EAAS3xB,EAAKwK,UAAUknB,EAAO,QACxBC,EAARA,EAAiB,CAACA,GACP3xB,EAAKwK,UAAUknB,EAAO,OACpCC,EAAO34D,SAAQ,SAAC8J,GAAE,OAAKA,EAAG8vC,YAC3B,CAtSIgf,CADA5xB,EAAOqe,EAAQT,OAAO5d,EAAMyxB,EAAcj2C,GAE3C,CAEG6iC,EAAQqQ,OACVC,GAAUluC,EAAMuf,EAAMqe,EAAQqQ,MAAOH,GAEtC9tC,EAAK6D,UAAU,WAAY,CAAC,WAAY,CAAExK,IAAInC,EAAIirB,SAASlhB,MAAMvG,KAAKrH,KAAKomC,MAAMviC,IAAMnE,MAAM6Q,IAC7F,EACD0f,UAAU,SAASpsB,GAClB,IAAM43C,EAAM7tC,MAAMgC,GAAG/L,GACfyL,EAAM,0BAENyuC,EAASnwC,MAAMgC,GAAG5P,KAAKg+C,YAC1BD,IAAWA,EAAOE,aACpBrwC,MAAM6Q,KAAKunB,UAAU+X,EAAOjtC,MAAOxB,GAEjCmsC,GACFz7C,KAAKg+C,WAAan6C,EAClB+J,MAAM6Q,KAAKwnB,OAAOwV,EAAI3qC,MAAOxB,WAGtBtP,KAAKg+C,UACb,EACDR,UAAU,CACT3yC,MAAQ,gBACRqzC,MAAQ,aAETvD,OAAO,CAAE,EACTvU,MAAM,CAAC,GAIRz5B,EAAKgU,OAAOjQ,YAAY,YAAY,WAAA,OAAM8qC,GAAS7uC,EAAK,IACxDA,EAAKgU,OAAOjQ,YAAY,aAAa,WAAA,OAAM8qC,GAAS7uC,EAAK,IACzDA,EAAKgU,OAAOjQ,YAAY,aAAa,WAAA,OAAM8qC,GAAS7uC,EAAK,IAEzDA,EAAK+D,YAAY,WAAW,WAAA,OA6M7B,SAAgB/D,GACfghB,IAAW,WACV,IAAI,IAAI9pB,KAAM8I,EAAKo4B,MAAMqB,MACxBz5B,EAAKo4B,MAAM79B,OAAOrD,EACnB,GAAE8I,EACJ,CAlNmCwxC,CAAOxxC,MACzCA,EAAK+D,YAAY,UAAU,SAAC4D,EAAMtO,EAAKoE,EAAQ1K,GAC9C,IAAMoI,EAAgB,cAATwM,GACTxM,GAAgB,eAARwM,GAAkC,aAATA,IAiNvC,SAAiB3H,EAAM7E,EAAMjE,EAAInE,GAChC,GAAGA,EAAM,CACR,IAAO7Z,EAA4B6Z,EAA5B7Z,EAAGzD,EAAyBsd,EAAzBtd,EAAGkyB,EAAsB5U,EAAtB4U,KAAM5M,EAAgBhI,EAAhBgI,KAAMwG,EAAUxO,EAAVwO,OACtBvB,EAAKo4B,MAAMqB,MAAMviC,GAChBiE,EACF6E,EAAKo4B,MAAMj9B,KAAKjE,EAAIhe,EAAGzD,GAEvBuqB,EAAKo4B,MAAM7E,OAAOr8B,EAAI6D,EAAMwG,GAG7BvB,EAAKo4B,MAAM7lC,IAAIrZ,EAAGzD,EAAGkyB,EAAM5M,EAAMwG,EAAQrK,GAE1C,IAAMooB,EAAStf,EAAKiD,GAAG,eACpBqc,GAAUA,EAAOuhB,QAAU3pC,GAC7BooB,EAAOyK,UAAU,QAAQrF,UAAUnjB,EACpC,MAEAvB,EAAKo4B,MAAM79B,OAAOrD,EACpB,CAlOGu6C,CAAQzxC,EAAM7E,EAAM9B,EAAKtG,EAC3B,IACAiN,EAAK+D,YAAY,YAAY,SAAC+E,EAAQ9zB,GACxB,eAAV8zB,EACF+lC,GAAS7uC,GACQ,sBAAV8I,GAmIV,SAAqB9I,EAAM9f,EAAMiuB,EAAKpT,EAAMyK,GAE3C,IADA,IAAM4yB,EAAQr9B,EAAKq9B,MACXvkD,EAAI,EAAGA,EAAIukD,EAAMhkD,OAAQP,IAChC,GAAGu7D,GAAShX,EAAMvkD,GAAG,IAAI,CACxB,IAAMk8D,EAAS3X,EAAMvkD,GAAG,GAAGk8D,OACxBA,GACFA,EAAOx3D,SAAQ,SAAA+pB,GACdA,EAAItE,MAAQkQ,GAAY5L,EAAItE,MAAO9d,EAAMiuB,EAAK3I,GAC9ClD,EAAIknB,OAAStb,GAAY5L,EAAIknB,OAAQtpC,EAAMiuB,EAAK3I,EACjD,IAGD,IAAM6oC,EAASjW,EAAMvkD,GAAG,GAAGw6D,QAAUjW,EAAMvkD,GAAG,GAAGw6D,OAAOrwC,MACrDqwC,IACFjW,EAAMvkD,GAAG,GAAGw6D,OAAOrwC,MAAQqxC,GAAchB,GAAQ11D,KAAI,SAAAqlB,GAAK,OAAIkQ,GAAYlQ,EAAO9d,EAAMiuB,EAAK3I,EAAM,IAAEzwB,KAAK,MAE1G,IAAM86D,EAAQzX,EAAMvkD,GAAG,GAAGg8D,OAASzX,EAAMvkD,GAAG,GAAGg8D,MAAM7xC,MAClD6xC,IACFzX,EAAMvkD,GAAG,GAAGg8D,MAAM7xC,MAAQkQ,GAAY2hC,EAAO3vD,EAAMiuB,EAAK3I,IAEzD4yB,EAAMvkD,GAAG,GAAKw7D,GAAcjX,EAAMvkD,GAAG,IAAI8E,KAAI,SAAAqlB,GAAK,OAAIkQ,GAAYlQ,EAAO9d,EAAMiuB,EAAK3I,EAAM,IAAEzwB,KAAK,IAClG,CAEF,CAzJG28D,CAAY1xC,EAAMhrB,EAAEkL,KAAMlL,EAAEm5B,IAAKn5B,EAAE+lB,KAAM/lB,EAAEwwB,MAC7C,IACAxF,EAAK+D,YAAY,UAAU,SAACnrB,EAAEtF,EAAE0B,GAC5BA,GAAKgrB,EAAKiM,kBACZ4iC,GAAS7uC,GAAM,EACjB,IACAA,EAAK+D,YAAY,qBAAqB,SAAC9vB,EAAEE,EAAEjB,EAAE8B,GACzCA,GAAKgrB,EAAKiM,kBACZ4iC,GAAS7uC,GAAM,EACjB,IACAA,EAAK+D,YAAY,kBAAkB,SAAC9vB,EAAEE,EAAEjB,EAAE8B,GACtCA,GAAKgrB,EAAKiM,kBACZ4iC,GAAS7uC,GAAM,EACjB,IACAA,EAAK+D,YAAY,eAAe,SAAChJ,GAAI,OA+DtC,SAAgBiF,EAAMjF,GACrB,IAAMq9B,EAAQr9B,EAAKq9B,MAChBA,GACFpX,IAAW,WACVoX,EAAM7/C,SAAQ,SAAA+pB,GAAG,OAAItC,EAAKo4B,MAAM7lC,IAAI2F,MAAM8H,EAAKo4B,MAAO91B,KACtD,GAAEtC,EAEL,CAtE2CiS,CAAOjS,EAAMjF,MACvDiF,EAAK+D,YAAY,mBAAmB,SAAChJ,EAAMwG,GAAM,OAuElD,SAAoBvB,EAAMjF,EAAMwG,GAE/B,IAAI,IAAI1tB,KADRknB,EAAKq9B,MAAQ,GACAp4B,EAAKo4B,MAAMqB,MAAM,CAC7B,IAAMqU,EAAO9tC,EAAKo4B,MAAMqB,MAAM5lD,GACxB89D,EAAM,CAAC7D,EAAK50D,EAAG40D,EAAKr4D,EAAGq4D,EAAKnmC,KAAMmmC,EAAK/yC,KAAM+yC,EAAKvsC,QACrDA,GAAUA,EAAOqwC,SACnBD,EAAIn5D,KAAK3E,GACVknB,EAAKq9B,MAAM5/C,KAAKm5D,EACjB,CACD,CAhFuDh3C,CAAWqF,EAAMjF,EAAMwG,MAC7EvB,EAAK+D,YAAY,gBAAgB,SAAC3wB,EAAEkB,EAAEsE,EAAE5D,GACpCA,GAAKgrB,EAAKiM,kBACZ4hC,GAAU7tC,EACZ,IACAA,EAAK+D,YAAY,iBAAiB,WAAA,OAAM8pC,GAAU7tC,MAElDA,EAAK+D,YAAY,cAAc,WAC9B,IAAI,IAAIlwB,KAAKmsB,EAAKo4B,MAAMqB,MAAOx4B,MAAMgC,GAAGpvB,GAAGg3C,YAC5C,IAGA5pB,MAAM8C,YAAY,WAAW,SAAS8E,GACrC,IAAIoc,EAAQhkB,MAAMgC,GAAG4F,GAClBoc,GAASA,EAAM1jB,OAAO2qB,aACxBjH,EAAQhkB,MAAMgC,GAAGgiB,EAAM1jB,OAAO2qB,aAE/B,IAAMpqB,EAAKmjB,IAAUA,EAAM8E,UAAU,YAAY,SAAW9E,EAAM8E,UAAU,YAAY,WAExF,GAAGjoB,EAAG,CACL9B,EAAKo4B,MAAM9U,UAAUxhB,GACrB,IAAM5K,EAAK4K,EAAGP,OAAOrK,GAElBy5C,IACC3wC,EAAKo4B,MAAM0Y,UAAU55C,GAAIyQ,MAAQgpC,EACnC7uC,EAAG+B,UAAU,aAAc,IAE3B7D,EAAK6D,UAAU,YAAa,CAAC,CAAE3M,GAAG,qBAEpC,MACQy5C,GACR3wC,EAAKo4B,MAAM9U,WACb,IAEAtjB,EAAK+D,YAAY,iBAAiB,SAAS7M,EAAIyQ,GAC9C3H,EAAKo4B,MAAM9U,UAAUpsB,GACrBy5C,EAAahpC,CACd,IAEA3H,EAAK+D,YAAY,gBAAgB,SAAS7M,EAAIyQ,GAC1CgpC,GAAchpC,GAChB1G,MAAMkL,OAAM,WACXwkC,EAAa,IACd,GACF,IAGA3wC,EAAKo4B,MAAMwY,SAAS,SAAS,SAACrxB,EAAMuuB,EAAM/yC,GACzC,IACMwG,EAwMR,SAAyBusC,EAAM/yC,EAAMs1C,GACpC,IAAMwB,EAAa,YACftwC,EAASN,MAAMvG,KAAKozC,EAAKvsC,QAE7BA,EAASgvC,GAAiBhvC,GAE1B,IAAMhC,EAAQgC,EAAOhC,MAAMyf,MACrB8yB,EAAavwC,EAAOhC,MAAMV,YAASgb,EACnClS,EAAQpG,EAAOoG,KApBtB,SAAsBpG,GACrB,IAAMoG,EAAOpG,EAAOoG,KACjBpG,EAAOwwC,UAAuC,GAA5BpqC,EAAK7xB,QAAQ,aACjCyrB,EAAOoG,KAAO,UAAUpG,EAAOoG,KAAK+Z,OAAO,GAAG7sC,cAAc0sB,EAAOoG,KAAKvxB,OAAO,IAC7EmrB,EAAO,QAAgC,GAAvBoG,EAAK7xB,QAAQ,QAC/ByrB,EAAOoG,MAAQ,MACbpG,EAAO4G,aAAoC,GAAtBR,EAAK7xB,QAAQ,OACpCyrB,EAAOoG,MAAQ,KAEhB,OAAOpG,EAAOoG,IACf,CAU6BqqC,CAAazwC,GACnC0wC,EAAM7D,GAAOzmC,GAEbqX,EAAQzd,EAAOwuC,OACrBxuC,EAAOwuC,OAAS,GAChB,IAGImC,EACAvD,EAJEkB,EAAQtuC,EAAOsuC,MAEfsC,EAAe5wC,EAAO8sC,OAItBA,EAAS,CACd30C,OAAO,GACP6D,MAAO40C,EAAa50C,OAAS,SAC7BizC,OAAQ2B,EAAa3B,QAAU,UAIhC,GAFAnC,EAAOzmB,OAA0B,UAAjBymB,EAAOmC,OAAqB,IAAM,IAE/CyB,EACCE,EAAa7D,SACf4D,EAAY,QACLC,EAAan0C,QACpBk0C,EAAY7B,EAAU8B,EAAan0C,QAEpCqwC,EAAO1sC,SAAQ,IAAAttB,OAAO69D,EAAY,SAE/B,CAIH,GAHA7D,EAAOz7C,OAAS,GAEhB+7C,GAAewD,EAAa7D,UAAY6D,EAAan0C,MACtC,CACd,IAAMywC,EAAuC,QAArBltC,EAAOmtC,WAC/BC,EAAc70B,GAAUq4B,EAAan0C,MAAOywC,EAAiB4B,EAC9D,CAGA,IAAI,IAAIlP,KADR5/B,EAAO6wC,MAAQ7wC,EAAO6wC,OAAO,CAAA,EACT7wC,EAAO6wC,MACI,KAA3B7wC,EAAO6wC,MAAMjR,WACR5/B,EAAO6wC,MAAMjR,GAEtB5/B,EAAO6wC,MAAQnxC,MAAMgH,OAAO1G,EAAO6wC,MAAO,CACzCC,UAAWP,EACXjzC,MAAOizC,EACP9yB,MAAOzf,EACP+yC,UAAW/wC,EAAOhC,MAAMgzC,OAAS,MAAQ,YAGvC1C,EAAMvB,SACRuB,EAAM7xC,MAAQ2wC,EAAcr4D,OAAO4b,KAAK6I,EAAK,IAAIzV,QAAO,SAAAsqB,GAAI,OAAkC,GAA9B++B,EAAY74D,QAAQ85B,EAAY,IAAC,GAAK,QAC/FigC,EAAM7xC,QACb6xC,EAAM7xC,MAAQqyC,EAAUR,EAAM7xC,OAChC,CAEA,IAAI,IAAInqB,EAAI,EAAGA,EAAImrC,EAAM5qC,OAAQP,IAAI,CACpC,IAAMgrB,EAAQmgB,EAAMnrC,GAAGgrB,MACjB4U,EAAO48B,EAAUrxB,EAAMnrC,GAAGmqB,OAEhC,GAAGyV,GAAQo8B,EAAM7xC,SAAWi0C,GAAOx+B,GAAQy+B,GAA4E,CACtH,IAAM/9D,EAAI,CACT4e,MAAK1e,IAAAA,OAAKo/B,EAAO,KACjB/R,QAAQ,CACPC,SAAUqd,EAAMnrC,GAAG6tB,QAAOrtB,IAAAA,OAAOo/B,EAAU,KAAA,KAgB7C,GAZAt/B,EAAE89D,EAAM,eAAiB,SAAWjzB,EAAMnrC,GAAG02B,MAAK,IAAAl2B,OAAOo/B,OAAU,GAExD,SAAR9L,GAA2B,QAARA,GAA0B,UAARA,GAA4B,WAARA,GAC3DxzB,EAAEy7B,KAAO,CAAE/Q,MAAAA,GACX1qB,EAAEs/B,KAAO,CAAE++B,YAAY3zC,EAAO8I,KAAKqX,EAAMnrC,GAAGy5C,SAEpC2kB,IACR99D,EAAE0qB,MAAQA,GAEA,QAAR8I,GAA0B,cAARA,IACpBxzB,EAAEm4B,MAAQ,IAERvR,EAAK,KAAOk3C,IAAQtD,GAAewD,EAAa7D,UAAU,CAC5D,IAAM90B,EAAMm1B,EAAc5zC,EAAK,GAAG4zC,EAAY96D,IAAMknB,EAAK,GAAG0Y,GACtDpW,EAAQmc,GAAe,IAARA,GAAcA,EAAI,IAAIvjC,QAAQ47D,EAAY,IAAM,GACrExD,EAAOz7C,OAAOpa,KAAK,CAAC6kB,KAAAA,EAAMwB,MAAAA,GAC3B,CAEA0C,EAAOwuC,OAAOv3D,KAAKrE,EACpB,CACD,CAEI89D,IACH1wC,EAAOsuC,MAAQ,CACdjtC,MAAOrB,EAAOsuC,MAAMjtC,MACpByvC,UAAWP,EACXjzC,MAAOizC,EACP9yB,MAAOzf,GAGRgC,EAAe,QAARoG,GAA0B,eAARA,EAAwB,QAAU,SAAShG,SAAW,SAAAW,GAC9E,IAAMkX,EAAMlX,EAAIutC,EAAM7xC,OACtB,OAAQwb,GAAe,IAARA,GAAcA,EAAI,IAAIvjC,QAAQ47D,EAAY,IAAM,KAI9DK,GAAc7D,EAAOz7C,QAAUy7C,EAAOz7C,OAAOxe,OAC/CmtB,EAAO8sC,OAASA,SAET9sC,EAAO8sC,OAEJ,WAAR1mC,IACFpG,EAAOkxC,OAASlxC,EAAOsuC,MAAMluC,SAC7BJ,EAAOwR,OAAS,cACTxR,EAAOsuC,MAAMluC,UAGrB,OAAOV,MAAMgH,OAAO,CACnBjI,KAAK,QACLmK,QAAQ,CACP8F,KAAK,KAEJ1O,GAAQ,EACZ,CAtUiBmxC,CAAgB5E,EAAM/yC,EADnByzC,GAAUxuC,EAAM8tC,IAElC,OAAO7sC,MAAMa,GAAGP,EAAQge,EACzB,IAAG,SAACvf,EAAMjF,GACTiF,EAAKiyB,WACLjyB,EAAKhK,MAAM+E,EACZ,IAEAiF,EAAKo4B,MAAMwY,SAAS,SAAS,SAACrxB,EAAMuuB,EAAM/yC,GACzC,IAAMwG,EAASN,MAAMgH,OAAO,CAAEtF,IAAI,uBAAwBhB,SAAQ,aAAAttB,OAAc0mB,EAAI,QAAS+yC,EAAKvsC,QAAQ,CAAE,GAAE,GAC9G,OAAON,MAAMa,GAAGP,EAAQge,EACzB,GACD,IC9PM5iB,GAASsE,MAAMC,KAAKC,YAAYxE,OAE/B,SAAS8yB,GAAKzvB,GACpBA,EAAK+D,YAAY,mBAAmB,WAAA,OAiHrC,SAAe/D,GACd,IAAM2yC,EAAc3yC,EAAKiD,GAAG,eACtBqH,EAAOqoC,EAAY5oB,UAAU,QAC7B9f,EAAWK,EAAKL,SA2ItB,SAAS2oC,IACR,GAAG3oC,EAAS,mBAAmBvV,WAAW,CACzC,IAAMmS,EAAUunC,GAAOnkC,EAAStC,KAAKjT,YAAcm+C,EAAgBC,EACnEC,EAAe9oC,EAAS,gBAAiBpD,IAC1C,CACD,CAEA,SAASmsC,EAAkBx5B,GACvBA,GAEFuxB,EAAY,GADQ9gC,EAAS,gBAAgBvV,YAI9C,IAAMmS,EAAUunC,GAAOnkC,EAAStC,KAAKjT,YAAcm+C,EAAgBC,EACnEt5B,EAAMA,EAAM3S,IAAY,GAExBksC,EAAe9oC,EAAS,gBAAiBuP,EAC1C,CAEA,SAASy5B,EAAiBz5B,GACtBA,GAEFuxB,EAAY,GADO9gC,EAAS,eAAevV,YAI5C8kB,EAAMA,EAAMq5B,IAAkB,GAE9BE,EAAe9oC,EAAS,eAAgBuP,EACzC,CAEA,SAASu5B,EAAe9S,EAASzmB,GAChCymB,EAAQ1X,aACR0X,EAAQ3rC,SAASklB,GACjBymB,EAAQzX,cACT,CAEA,SAASqqB,IACR,IAAM93C,EAAOkP,EAASjM,MAAMtJ,WACtBg6C,EAAazkC,EAASykC,WAAWh6C,WACjCi6C,EAAc1kC,EAAS,gBAAgBvV,WACzCw+C,EAAa,GAEXnD,EAASN,GAAWzvC,EAAMjF,EAAM2zC,EAAY,CAACL,OAAQM,GAAe,KAK1E,OAHGoB,EAAO37D,SACT8+D,EAAanD,EAAO,GAAG/xC,OAEjBk1C,CACR,CAEA,SAASJ,IACR,IAAM/3C,EAAOs0C,GAAcplC,EAASjM,MAAMtJ,YACpCi7C,EAAwC,QAAlC1lC,EAASykC,WAAWh6C,WAC1By+C,EAAa9D,GAAcplC,EAAS,eAAevV,YACrD0+C,EAAS,GAgBb,OAdAr4C,EAAKxiB,SAAQ,SAAA+2D,GACZ,IAAmC,GAAhC6D,EAAWr9D,QAAQw5D,GAAe,CACpC,IAAM3uB,EAAO3iB,GAAMsxC,EAAStvC,GAC5B,GAAG2gB,EAAK,CACP,IAAM3iB,EAAQ2xC,EACbniC,GAAQmT,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IACjDnT,GAAQmT,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,KAEvB,GAAxB5lB,EAAKjlB,QAAQkoB,IACfo1C,EAAO56D,KAAKwlB,EACd,CACD,CACD,IAEOo1C,EAAOr+D,KAAK,IACpB,CAEA,SAASg2D,EAAYvxB,EAAKlE,GACzB,IAAIva,EAAOkP,EAASjM,MAAMtJ,WAEpB25C,EAASpkC,EAAS,gBAAgBvV,WAClCm7C,EAAQ5lC,EAAS,eAAevV,WAChCg6C,EAAazkC,EAASykC,WAAWh6C,WAEjCq7C,EAASN,GAAWzvC,EAAMjF,EAAM2zC,EAAY,CAACL,OAAAA,EAAQwB,MAAAA,IAE3Dv6B,EAAS+5B,GAAc/5B,GAEvBva,EAAOs0C,GAAct0C,GAAMzV,QAAO,SAAAk0B,GAAG,OAA4B,GAAxBlE,EAAOx/B,QAAQ0jC,MAErDA,IACFA,EAAM61B,GAAc71B,IAChBjhC,SAAQ,SAAAylB,GACG+xC,EAAOzqD,QAAO,SAAAgd,GAAG,OAAIA,EAAItE,OAASA,KACtC5pB,QACT2mB,EAAKviB,KAAKwlB,EACZ,IAGD+0C,EAAe9oC,EAASjM,MAAOjD,EAAKhmB,KAAK,KAC1C,CAEA,SAASs+D,EAAY75B,GACpB,IACMxS,EADQiD,EAAS,gBACJ9G,UAET,UAAPqW,EACCxS,EAAKC,OAAO,WACdD,EAAKzM,OAAO,UAELyM,EAAKC,OAAO,WACpBD,EAAKzU,IAAI,CAAC2E,GAAG,SAAUnE,MAAM4J,GAAO,wBAAyB,EAC/D,CAEA,SAAS22C,EAAa95B,GACrB,IACMxS,EADQiD,EAAS,iBACJ9G,UAET,UAAPqW,EACCxS,EAAKC,OAAO,WACdD,EAAKzM,OAAO,UAELyM,EAAKC,OAAO,WACpBD,EAAKzU,IAAI,CAAC2E,GAAG,SAAUnE,MAAM4J,GAAO,wBAAyB,EAC/D,CAEA,SAAS42C,EAAW/5B,GACnBo5B,IAEA,IAAMY,EAAQpF,GAAO50B,GACfi6B,EAAe,OAAPj6B,EACRu2B,EAAS9lC,EAAS8lC,OAClB2D,EAAwB,SAAPl6B,GAAyB,QAAPA,GAAwB,UAAPA,GAA0B,WAAPA,EAE7Eu2B,EAAO/hB,aAAa,SAAU0lB,GAC9B3D,EAAO/hB,aAAa,QAAS0lB,GAAkBD,GAASD,GACxDzD,EAAO/hB,aAAa,SAAUwlB,GAEpB,QAAPh6B,GAAiBi6B,EAAOxpC,EAAS8nC,QAAQhwB,OACvC4xB,EAAU1pC,EAAS8nC,SAErB0B,EAAOxpC,EAAS9B,WAAW4Z,OACzB4xB,EAAU1pC,EAAS9B,YAEd,SAAPqR,EACFvP,EAAS,gBAAgB8X,OAEzB4xB,EAAU1pC,EAAS,iBAEjBupC,GACFI,EAAU,QACVA,EAAU,OAAO,KAGjBA,EAAU,QAAQ,GAClBA,EAAU,QAGRJ,GAAgB,SAAPh6B,EACXo6B,EAAU,aAEVA,EAAU,aAAa,GAExBC,GACD,CAEA,SAASC,EAAaC,GACrB,IAAIh5C,EAAOkP,EAASjM,MAAMtJ,WAEtBq7C,EAAS9lC,EAAS8lC,OAAOr7C,WACvB25C,EAASpkC,EAAS,gBAAgBvV,WAClCm7C,EAAQ5lC,EAAS,eAAevV,WAChCg6C,EAAazkC,EAASykC,WAAWh6C,WAEvCq7C,EAASN,GAAWzvC,EAAMjF,EAAM2zC,EAAY,CAACqB,OAAAA,EAAQ1B,OAAAA,EAAQwB,MAAAA,GAAQkE,GAErE9pC,EAAS8lC,OAAOz7C,SAASy7C,EAC1B,CAEA,SAAS8D,IACR,IAAMlE,EAAwC,QAAlC1lC,EAASykC,WAAWh6C,WAC1ByT,EAAa8B,EAAS9B,WAAWzT,WACjCu9C,EAAM7D,GAAOnkC,EAAStC,KAAKjT,aAE5Bu9C,GAAOtC,IAAUA,GAAOsC,GAC5BhoC,EAAS,mBAAmBmc,OAAO,QAASzpB,GAAO,qBACnDsN,EAAS,kBAAkBmc,OAAO,QAASzpB,GAAO,cAAgBwL,EAAa,QAAU,aAGzF8B,EAAS,mBAAmBmc,OAAO,QAASzpB,GAAO,qBACnDsN,EAAS,kBAAkBmc,OAAO,QAASzpB,GAAO,cAAgBwL,EAAa,QAAU,YAE1F8B,EAAS,mBAAmB5U,UAC5B4U,EAAS,kBAAkB5U,SAC5B,CAEA,SAASs+C,EAAUK,GACfA,EAAM1/C,UACRy+C,EAAeiB,GAChBA,EAAMhxC,MACP,CAEA,SAAS4wC,EAAUliB,EAAOiV,GACzBr8B,EAAKyf,UAAU,CAAC2H,MAAMA,GAAQ,OAAOn5C,SAAQ,SAAAy7D,GACzCrN,EACFqN,EAAMjyB,OAEN4xB,EAAUK,EACZ,GACD,CAEA,SAASC,EAASrhD,GAYjB,MAXA,CACC,CAACG,MAAM,IAAK7S,KAAK,cACjB,CAAC6S,MAAM,WACP,CAACA,MAAM,OACNxa,SAAQ,SAAA4oD,IACkC,GAAxCvuC,EAAO+U,KAAK7xB,QAAQqrD,EAASpuC,SAC/BH,EAAOuuC,EAASjhD,MAAQihD,EAASpuC,OAAS,EAC1CH,EAAO+U,KAAO/U,EAAO+U,KAAK1xB,QAAQkrD,EAASpuC,MAAO,IAAI1d,cAExD,IAEOud,CACR,CArWAoN,EAAK+D,YAAY,aAAa,SAAA+E,GAC7B,GAAgB,aAAbA,EAAO5R,GAAkB,CAC3B,IAAMqK,EAASuH,EAAOvH,OAClB3O,EAAS2O,GAAUA,EAAOA,QAAU,CAAA,EAExCoxC,EAAY5wB,OAEZ/hB,EAAK+jB,iBAAmB,SAAShiC,EAAI0jB,EAAKxxB,EAAGkB,GAC5C,IAAM8vC,EAAQhkB,MAAM+iB,UAAU+jB,WAE9B,GAAG4K,EAAY5oB,WAAU,SAAA/pB,GAAI,OAAIA,GAAQilB,CAAK,IAC7C,GAAGA,GAAShb,EAASjM,OAASinB,GAAShb,EAAS,gBAAgB,CAC/D,IAAIuP,EAAMyL,EAAMvwB,WACV8sC,EAAOhoB,EAAIspB,YAAY,KAE7BtpB,GAAe,GAATgoB,EAAa,GAAKhoB,EAAIvkC,UAAU,EAAGusD,EAAO,GAChDvc,EAAM3wB,SAASklB,EAAMvlC,EAAE,IAAIkB,EAC5B,MACQ8vC,EAAM1jB,OAAOvD,OACpBinB,EAAM3wB,SAASrgB,EAAE,IAAIkB,GAGvB,OAAO,GAGRm1B,EAAKhL,QACLU,EAAKiD,GAAG,aAAa3O,SAAS,WAE9B1B,EAAS29C,GAAiB39C,IAEnBoL,MAAQuD,EAASA,EAAOxG,KAAOiF,EAAKk0C,mBAC3CvB,EAAY9R,OAAS/3B,EAAOkkC,OAASlkC,EAAOkkC,OAAShtC,EAAKo4B,MAAM7lC,IAAI,KAAM,KAAM,QAASK,EAAOoL,MAAOpL,GAEvGoN,EAAK6D,UAAU,gBAAiB,CAAC8uC,EAAY9R,OAAQ,UAErDyS,EAAa1gD,EAAOy7C,OAAO9wC,OAC3B81C,EAAYzgD,EAAOy7C,OAAOmC,QAE1B,IAAMh0B,EAAay3B,EAASrhD,GAC5B0X,EAAKoa,UAAUlI,GACf+2B,EAAW/2B,EAAW7U,OAElBymC,GAAO5xB,EAAW7U,OAAS/U,EAAOy7C,OAAOC,UAC5C0E,EAAkBpgD,EAAOy7C,OAAOC,UAC9B17C,EAAOi9C,MAAMvB,UACf2E,EAAiBrgD,EAAOi9C,MAAMvB,UAE/BwF,IAEAxpC,EAAKyf,UAAU,gBAAiB,OAAOxxC,SAAQ,SAAAynB,GAAI,OAAIA,EAAKm0C,YAE5DlqC,EAASjM,MAAMinB,OAChB,CACD,IAEAjlB,EAAK+D,YAAY,iBAAiB,SAAC7M,EAAIyQ,GACnCgrC,EAAYzwB,aAAuB,SAARva,GAC7BysC,GAAYp0C,EACd,IAEAA,EAAK+D,YAAY,aAAa,SAAAzB,GAChB,mBAAVA,EAAIpL,IAA2By7C,EAAYzwB,aAC7CkyB,GAAYp0C,EACd,IAEAA,EAAK+D,YAAY,YAAY,SAAC7M,EAAItE,GACxB,YAANsE,GAAqBtE,EAAOuvB,UAC3BwwB,EAAYzwB,aAAeywB,EAAY9R,QAAUjuC,EAAOyG,KAC1D+6C,GAAYp0C,EAEf,IAEAsK,EAAKvG,YAAY,YAAY,SAASyV,EAAKlE,GAC1C,IAAMt2B,EAASqU,KAAK21B,aAGpB,GAAGhqC,IAAWirB,EAASjM,OAAShf,IAAWirB,EAAS,gBAAkBjrB,IAAWirB,EAAS,gBAAgB,CACzG,IAAMgD,EAAQuM,EAAIhkC,MAAM,KAClB63C,EAAwB,GAAhBpgB,EAAM74B,OAAc64B,EAAM,GAAG,IAAIA,EAAM,GAAGp4B,cAAgB2kC,EAAI3kC,cAEzE2kC,GAAO6T,IACT7T,EAAM6T,EACN0lB,EAAe/zD,EAAQquC,GAEzB,CAEA,OAAQruC,GACP,KAAKirB,EAAStC,KACb4rC,EAAW/5B,GACX,MACD,KAAKvP,EAAS9B,WACb0rC,IACA,MACD,KAAK5pC,EAASjM,MACd,KAAKiM,EAASykC,WACVr7C,KAAK21B,cAAgB/e,EAASykC,YAChCmF,IACE5pC,EAAS,mBAAmBvV,YAC9Bk+C,IACE3oC,EAAS,kBAAkBvV,YAC7Bq+C,EAAe9oC,EAAS,eAAgB4oC,KACzCiB,IACA,MACD,KAAK7pC,EAAS,kBACbgpC,EAAiBz5B,GAEjBs6B,EAAax+B,GACb,MACD,KAAKrL,EAAS,mBACb+oC,EAAkBx5B,GAElBs6B,EAAa1F,GAAOnkC,EAAStC,KAAKjT,YAAc4gB,EAAS,GACzD,MACD,KAAKrL,EAAS,gBACbqpC,EAAa95B,GACb,MACD,KAAKvP,EAAS,iBACbopC,EAAY75B,GACZ,MACD,KAAKvP,EAAS,eACVA,EAAS,kBAAkBvV,YAC7Bq+C,EAAe9oC,EAAS,mBACzB8gC,EAAYvxB,EAAKlE,GACjB,MACD,KAAKrL,EAAS,gBACVA,EAAS,mBAAmBvV,YAC9Bq+C,EAAe9oC,EAAS,oBACzB8gC,EAAYvxB,EAAKlE,GAInB,IAAM/T,EAAS+I,EAAK4jB,YACpBluB,EAAKo4B,MAAM7E,OAAOof,EAAY9R,OAAQt/B,EAAOvD,MAAOuD,EACrD,IAEA0I,EAAS8lC,OAAOhsC,YAAY,gBAAiBgnC,EA+N9C,CA5d2C1a,CAAMrwB,MAChD,IAAMq0C,EAAapzC,MAAMgB,KAAKmI,QACxBD,EAAUkqC,EAAWjnB,YAAY,EACjC1uB,EAAS21C,EAAWvnB,aAAaxiB,KAEvC,MAAO,CACN7Q,MAAM,IACN6vB,QAAQ,EACRpyB,GAAG,cACHyL,IAAI,eACJ7C,KAAK,CACJ,CACCpG,OAAQ26C,EAAWC,UACnB3xC,IAAK,2BACLwH,QAAS,CAAE8F,KAAK,GAChB9N,KAAM,CACL,CAAEnC,KAAK,OAAQ0pB,YAAY2qB,EAAW3qB,YAAa/e,OAAO,MAAOzG,KAAK,mCAAoCuG,MAAO,WAAA,OAAM2pC,GAAYp0C,EAAK,GACxI,CAAE2H,KAAK,SAAUlJ,YAAW,EAAMkD,SAAUhF,GAAO,iBAGrD,CACCqD,KAAK,OACLu0C,aAAY,EACZ91C,YAAY,EACZ0L,QAAQ,CACPiG,IAAK,GAENyY,eAAe,CACdC,WAAW,KAEZ7e,SAAS,CAAC,CACTjK,KAAK,UACL9I,GAAG,YACH6W,MAAM,CACL,CAAE7W,GAAG,SAAUuH,YAAW,EAAMkJ,KAAK,OAAQI,SAAS,EAAG2kB,OAAO/vB,GAAO,gBAAiBmD,KAAK,CAC5F,CAACE,KAAK,aAAcyB,KAAK,CACxB/C,OAAAA,EACAoB,KAAK,CACJ00C,GAAc,OAAQ,aAAcC,MACpC,CAAEz0C,KAAK,WAAYuK,MAAM5N,GAAO,iBAAkBzc,KAAK,UAAWopC,QAAO,GACzE,CAAEtpB,KAAK,WAAYuK,MAAM5N,GAAO,oBAAqBzc,KAAK,aAAcopC,QAAO,GAC/E,CAAEtpB,KAAK,WAAYuK,MAAM5N,GAAO,gBAAiBzc,KAAK,KAAMwxC,MAAM,OAClE,CAAE1xB,KAAK,OAAQuK,MAAM5N,GAAO,eAAgBzc,KAAK,SACjD,CAAE8f,KAAK,WAAYuK,MAAM5N,GAAO,mBAAoBzc,KAAK,iBAAkBwxC,MAAM,QACjF,CAAE1xB,KAAK,WAAYuK,MAAM5N,GAAO,oBAAqBzc,KAAK,mBAC1D,CAAE8f,KAAK,QAASuK,MAAM5N,GAAO,mBAAoBzc,KAAK,aAAcw0D,UAAS,EAAMlzC,QAAQ,CAC1F,CAACtK,GAAG,UAAWnE,MAAM4J,GAAO,kBAC5B,CAACzF,GAAG,OAAQnE,MAAM4J,GAAO,iBAE1B,QAIH,CAAEzF,GAAG,WAAYuH,YAAW,EAAMkJ,KAAK,OAAQI,SAAS,EAAGoC,QAAQ,CAACmG,OAAO,GAAIoc,OAAO/vB,GAAO,gBAAiBmD,KAAK,CAClH,CAAEE,KAAM,gBAAiB9f,KAAK,YAE/B,CAAEgX,GAAG,SAAUuH,YAAW,EAAMkJ,KAAK,OAAQI,SAAS,EAAG2kB,OAAO/vB,GAAO,gBAAiBmD,KAAK,CAC5F,CAACE,KAAK,aAAcyB,KAAK,CACxBzB,KAAM,YACNtB,OAAQuC,MAAMgB,KAAKmI,QAAQ0iB,aAAaxiB,KACxC3H,IAAK,yBACLoqB,OAAO,EACPplB,KAAM,QACN7H,KAAK,CACJ,CAAE4sB,OAAO/vB,GAAO,gBAAiB8E,KAAK,CACrC/C,OAAAA,EACAyL,QAAAA,EACArK,KAAK,CACJ,CAAEE,KAAM,OAAQuK,MAAM5N,GAAO,sBAAuBzc,KAAK,gBACzDs0D,GAAc,eAAgB,qBAybjC,CACN,CAACt9C,GAAG,OAAQnE,MAAM4J,GAAO,sBACzB,CAACzF,GAAG,SAAUnE,MAAM4J,GAAO,wBAC3B,CAACzF,GAAG,QAASnE,MAAM4J,GAAO,yBA3bjB63C,GAAc,gBAAiB,sBAgclC,CACN,CAACt9C,GAAG,MAAOnE,MAAM4J,GAAO,qBACxB,CAACzF,GAAG,SAAUnE,MAAM4J,GAAO,wBAC3B,CAACzF,GAAG,SAAUnE,MAAM4J,GAAO,6BAhcpB,CAAE+vB,OAAO/vB,GAAO,eAAgB+0B,MAAM,OAAQx6B,GAAG,QAASuK,KAAK,CAC9D/C,OAAAA,EACAyL,QAAAA,EACArK,KAAK,CACJ,CAAEE,KAAK,WAAYuK,MAAM5N,GAAO,eAAgBzc,KAAK,cAAewxC,MAAM,QAC1E,CAAE1xB,KAAK,WAAYuK,MAAM5N,GAAO,sBAAuBzc,KAAK,eAAgBopC,QAAO,GACnF,CAAEtpB,KAAK,qBAAsBuK,MAAM5N,GAAO,qBAAsBzc,KAAK,cAAewxC,MAAM,WAG5F,CAAEhF,OAAO/vB,GAAO,gBAAiB+0B,MAAM,OAAQjwB,KAAK,CACnD/C,OAAAA,EACAyL,QAAAA,EACArK,KAAK,CACJ,CAAEE,KAAK,OAAQuK,MAAM5N,GAAO,qBAAsBzc,KAAK,cAAe8d,OAAM,EAAM0zB,MAAM,QACxF,CAAE1xB,KAAK,OAAQuK,MAAM5N,GAAO,qBAAsBzc,KAAK,cAAewxC,MAAM,gBAG9E,CAAEhF,OAAO/vB,GAAO,gBAAiB+0B,MAAM,OAAQjwB,KAAK,CACnD/C,OAAAA,EACAyL,QAAAA,EACArK,KAAK,CACJ,CAAEE,KAAK,OAAQuK,MAAM5N,GAAO,qBAAsBzc,KAAK,cAAewxC,MAAM,aAC5E,CAAE1xB,KAAK,OAAQuK,MAAM5N,GAAO,sBAAuBzc,KAAK,SAAUwxC,MAAM,OAAQijB,WAAW,CAAEhtC,KAAK,WAClG,CAAE3H,KAAK,QAASuK,MAAM5N,GAAO,oBAAqBgG,IAAI,cAAejJ,OAAO,IAC5E,CAAEsG,KAAK,OAAQuK,MAAM5N,GAAO,qBAAsBzc,KAAK,cAAewxC,MAAM,OAAQijB,WAAW,CAAEhtC,KAAK,WACtG,CAAE3H,KAAK,OAAQuK,MAAM5N,GAAO,mBAAoBzc,KAAK,YAAawxC,MAAM,OAAQijB,WAAW,CAAEhtC,KAAK,WAClG,CAAE3H,KAAK,OAAQuK,MAAM5N,GAAO,oBAAqBzc,KAAK,aAAcwxC,MAAM,OAAQijB,WAAW,CAAEhtC,KAAK,cAGtG,aAST,CA+WA,SAASysC,GAAYp0C,GACpB,IAAM2yC,EAAc3yC,EAAKiD,GAAG,eAC5BjD,EAAK6D,UAAU,eAAgB,CAAC8uC,EAAY9R,OAAQ,UACpD8R,EAAY9R,OAAS,KACrB7gC,EAAK+jB,iBAAmB,KACxB4uB,EAAY3vC,MACb,CAEA,SAASwxC,GAAct0D,EAAMqqB,EAAOxP,GACnC,MAAO,CAAEiF,KAAM,aAAc9f,KAAKA,EAAMqqB,MAAM5N,GAAO4N,GAAQzH,QAAQ,CACpE9C,KAAM,sBACNjF,KAAMA,GAER,CAEO,SAAS05C,GAASG,GACxB,IAAMn5B,EAAQ,CACb,CAACvkB,GAAG,OAAQnE,MAAM4J,GAAO,eACzB,CAACzF,GAAG,SAAUnE,MAAM4J,GAAO,iBAC3B,CAACzF,GAAG,aAAcnE,MAAM4J,GAAO,qBAC/B,CAACzF,GAAG,OAAQnE,MAAM4J,GAAO,eACzB,CAACzF,GAAG,MAAOnE,MAAM4J,GAAO,cACxB,CAACzF,GAAG,QAASnE,MAAM4J,GAAO,gBAC1B,CAACzF,GAAG,MAAOnE,MAAM4J,GAAO,cACxB,CAACzF,GAAG,QAASnE,MAAM4J,GAAO,iBAI3B,OAFIi4C,GACHn5B,EAAMjjC,KAAK,CAAC0e,GAAG,UAAWnE,MAAM4J,GAAO,mBACjC8e,CACR,CC5fO,IAED9e,GAASsE,MAAMC,KAAKC,YAAYxE,OAEzB4uC,YAASC,GAAA,SAAAD,IAAA,OAAAL,QAAAK,GAAAE,GAAAp4C,KAAAk4C,EAAAlmC,UAAA,CAAA,OAAAqmC,GAAAH,EAAAC,GAAAP,GAAAM,EAAA,CAAA,CAAA7iC,IAAA,QAAA3V,MACrB,SAAM44C,EAAKrhC,GAEV,GADAjX,KAAKiK,KAAOjK,KAAK2M,KAAKsD,iBAClBjQ,KAAKiK,KACR,OAAO,EAER,IAAMu3C,EAAMvqC,EAAKL,SACjB5W,KAAK2M,KAAK+jB,iBAAmB,SAAShiC,EAAI0jB,EAAKxxB,EAAGkB,GAEjD,OADA0/D,EAAI72C,MAAM1J,SAASrgB,EAAE,IAAIkB,IAClB,GAGR0/D,EAAI72C,MAAM1J,SAAS,IAGnB,IACIyG,ENCC,SAAoBhI,GAC1B,GAAIA,GAAyB,iBAATA,GAAsD,IAAjCA,EAAMjd,QAAQ,eAAqB,CAC3E,IAAIunB,EAAOtK,EAAM3c,OAAO,GAAI2c,EAAM3e,OAAO,IAAIoB,MAAM,KAC7Ci6B,EAAS,CACdzR,MAAOX,EAAK,GACZsK,KAAM2jC,GAASjuC,EAAK,IACpBwB,MAAOysC,GAASjuC,EAAK,IACrByK,cAAewjC,GAASjuC,EAAK,KAQ9B,MALkB,QAAfoS,EAAO9H,OACT8H,EAAO9H,KAAO,MACd8H,EAAOtH,WAAa,GAGdsH,CACR,CACD,CMlBaqlC,CADCzhD,KAAK2M,KAAKmG,aAAa9S,KAAKiK,KAAKjE,IAAKhG,KAAKiK,KAAKG,SAExD1C,IACHuP,EAAKie,aACLssB,EAAIltC,KAAKrT,SAASyG,EAAK4M,MACvBktC,EAAI72C,MAAM1J,SAASyG,EAAKiD,OACpBjD,EAAK8D,QACRg2C,EAAIE,UAAUzgD,SAASyG,EAAK8D,OAC5Bg2C,EAAIG,UAAU1gD,SAASyG,EAAK8D,QAEzB9D,EAAK+M,eACR+sC,EAAII,UAAU3gD,SAASyG,EAAK+M,eACzB/M,EAAKoN,YACR0sC,EAAI1sC,WAAW7T,SAAS,GAEzBgW,EAAKke,eACLn1B,KAAK6hD,iBAGNL,EAAI72C,MAAMinB,OACX,GAAC,CAAAvc,IAAA,QAAA3V,MACD,WACCM,KAAK2M,KAAK+jB,iBAAmB,IAC9B,GAAC,CAAArb,IAAA,QAAA3V,MACD,WAAO,IAAA8uB,EAAAxuB,KACN,MAAO,CACN2M,KAAM,gBACNgL,KAAKrO,GAAO,mBACZxB,MAAM,EACNujB,SAAU,SACVjd,KAAK,CACJzB,KAAK,OAAQm1C,aAAa,EAAG5yC,GAAG,CAAEM,SAAW,WAAA,OAAKgf,EAAKqzB,eAAe,GAAKjrC,SAAS,CACnF,CAACjK,KAAM,aAAc9f,KAAK,OAAQqqB,MAAM5N,GAAO,kBAAmB5J,MAAM,OAAQqiD,cAAc,OAAQtyC,QAAQ,CAC7G9C,KAAO,sBACPjF,KAAK05C,IAAS,IACZlyC,GAAG,CACLM,SAAU,SAAS8E,GAClB,IAAM2C,EAAOjX,KAAKg5C,cAClB,OAAO1kC,GACN,IAAK,MACL,IAAK,QACJ2C,EAAKgoB,UAAU,GACf,MACD,IAAK,MACJhoB,EAAKgoB,UAAU,GACf,MACD,QACChoB,EAAKgoB,UAAU,GAElB,IAED,CAAEtyB,KAAK,OAAQuK,MAAM5N,GAAO,mBAAoBzc,KAAK,SACrD,CAAE8f,KAAK,qBAAsBuK,MAAM5N,GAAO,mBAAoBzc,KAAK,YAAagX,GAAG,sBAAuBnE,MAAM,UAAW2+B,MAAM,KACjI,CAAE1xB,KAAK,qBAAsBuK,MAAM5N,GAAO,sBAAuBzc,KAAK,YAAa6S,MAAM,UAAW2+B,MAAM,KAC1G,CAAE1xB,KAAK,qBAAsBuK,MAAM5N,GAAO,sBAAuBzc,KAAK,YAAa6S,MAAM,UAAW2+B,MAAM,KAC1G,CAAE1xB,KAAK,WAAYuK,MAAM5N,GAAO,oBAAqBzc,KAAK,aAAcwxC,MAAM,KAC9E,CAAE1xB,KAAK,WAAY9f,KAAK,UAAWue,YAAW,EAAMkE,IAAI,uBAAwBjJ,OAAO,MAGzF6I,GAAG,CACFmqC,YAAa,WAAA,OAAM7qB,EAAK8qB,SAAS,EACjCC,cAAe,WAAA,OAAM/qB,EAAK/X,OAAO,GAGpC,GAAC,CAAApB,IAAA,aAAA3V,MACD,SAAWsK,GACV,GAAGA,GAAQW,GAAMX,EAAMhK,KAAK2M,MAC3B,OAAO,EACR3M,KAAK2M,KAAKylC,MAAM,CAACpoC,KAAKV,GAAO,gBAC9B,GAAC,CAAA+L,IAAA,UAAA3V,MACD,WACC,IACMgI,EADO1H,KAAK83C,QAAQ5nC,UACR2qB,YAGlB,GAFAnzB,EAAKiD,MAAQjD,EAAKiD,MAAMnpB,cAEpBkmB,EAAKiD,OAAS3K,KAAKgiD,WAAWt6C,EAAKiD,OAAO,CAC7C,IAAMuD,EAASlO,KAAKiiD,YAAYv6C,GAEhC1H,KAAK2M,KAAKu1C,aAAaliD,KAAKiK,KAAKjE,IAAKhG,KAAKiK,KAAKG,OAAQ8D,GACxDlO,KAAKyW,OACN,CACD,GAAC,CAAApB,IAAA,gBAAA3V,MAED,WACC,IAAMuX,EAAOjX,KAAK83C,QAAQ5nC,UACpBxI,EAAOuP,EAAK4jB,YAGlB,GAFAnzB,EAAKiD,MAAQjD,EAAKiD,MAAMnpB,cAEpBkmB,EAAKiD,OAAS3K,KAAKgiD,WAAWt6C,EAAKiD,OAAO,CAK7C,IAJA,IAAM2S,EAAM3S,GAAMjD,EAAKiD,MAAO3K,KAAK2M,MAC7BpN,EAASS,KAAK2M,KAAK0S,OAAO/Z,SAASgY,EAAI,GAAG,EAAGA,EAAI,GAAG,EAAGA,EAAI,GAAG,EAAGA,EAAI,GAAG,GACxEpP,EAASlO,KAAKiiD,YAAYv6C,GAAM,GAE9BlnB,EAAI,EAAGA,EAAI+e,EAAOxe,OAAQP,IACjC+e,EAAO/e,GAAK+e,EAAO/e,IAAI,EACxBy2B,EAAKL,SAAS2hC,QAAQt3C,SAAS2M,MAAMuH,WAAWC,YAAYlH,EAA7BN,CAAqCrO,EAAQ,CAAE6G,MAAM,IAAKC,OAAQ,KACjG,MAEA4Q,EAAKL,SAAS2hC,QAAQt3C,SAAS,GACjC,GAAC,CAAAoU,IAAA,cAAA3V,MAED,SAAYwO,EAAQqqC,GACnBrqC,EAASN,MAAMvG,KAAK6G,GACpB,IAAM+I,EAAOjX,KAAK83C,QAAQ5nC,UAW1B,MAToB,QAAhBhC,EAAOoG,MACVpG,EAAO1C,MAAQ0C,EAAOyzC,UACtBzzC,EAAOuG,cAAgBvG,EAAO0zC,WAEvB3qC,EAAKL,SAAS8qC,UAAU7yB,YAC/B3gB,EAAO1C,MAAQ0C,EAAOwzC,UACA,SAAfxzC,EAAOoG,MAAmBikC,GACjC3qC,MAAMgH,OAAO1G,EAAQ,CAACoG,KAAK,MAAOO,MAAM,IAAI,GAEtC3G,CACR,IAAC,EAlI6BypC,yDAJT,kBCCTO,YAASC,GAAA,SAAAD,IAAA,OAAAL,QAAAK,GAAAE,GAAAp4C,KAAAk4C,EAAAlmC,UAAA,CAAA,OAAAqmC,GAAAH,EAAAC,GAAAP,GAAAM,EAAA,CAAA,CAAA7iC,IAAA,QAAA3V,MACrB,SAAM44C,GAAI,IAAA9pB,EAAAxuB,KACHiX,EAAOqhC,EAAI1oC,GAAG,QAEpBqH,EAAKhL,QACLgL,EAAKkrC,kBAEYlrC,EAAKL,SAEb/pB,KAAK+kC,QAEd,IAAIwwB,EAAepiD,KAAK2M,KAAKk0C,mBAC1BuB,IACFA,EAAeloC,GAAYla,KAAK2M,KAAKiM,kBAAkB,IAAIwpC,GAE5DnrC,EAAKoa,UAAU,CACd1mB,MAAOy3C,EACPC,MAAO,YAGRriD,KAAKq+C,cAELr+C,KAAK2M,KAAKmqC,cAAe,EACzB92C,KAAK2M,KAAK+jB,iBAAmB,SAAChiC,EAAI0jB,EAAKxxB,EAAGkB,GAEzC,OADAm1B,EAAKL,SAASjM,MAAM1J,SnDyDhB,SAAsBpb,EAAEzD,EAAEqoB,GAChC,OAAQA,EAAOyP,GAAYzP,GAAO,IAAK,IAAI5kB,EAAE,IAAIzD,CAClD,CmD3DgCkgE,CAAa1hE,EAAEkB,EAAE0sC,EAAK7hB,KAAKiM,oBACjD,EAET,GAAC,CAAAvD,IAAA,QAAA3V,MACD,WACCM,KAAK2M,KAAK+jB,iBAAmB,KAC7B1wB,KAAK2M,KAAKmqC,aAAe,IAC1B,GAAC,CAAAzhC,IAAA,YAAA3V,MACD,WACC,IAAMiN,EAAO3M,KAAK2M,KACZsK,EAAOjX,KAAK83C,QAAQloC,GAAG,QACvBlI,EAAOuP,EAAK4jB,YAElB,GAAGnzB,EAAKiD,MAAM,CACb,IAAMoP,EAAarS,EAAKiD,MAAMxoB,MAAM,KAEZ,GAArB43B,EAAWh5B,QACbg5B,EAAWwoC,QAASroC,GAAYvN,EAAKiM,mBAEtClR,EAAKiD,MAAQoP,EAAW,GAAG,IAAIA,EAAW,GAAGv4B,aAC9C,CAMA,GAJAkmB,EAAK7a,KAAO6a,EAAK7a,KAAKrL,cAEtBy1B,EAAKoa,UAAU3pB,GAEXuP,EAAKurC,WAAW,CACnB,IAAM31C,EAAQ7M,KAAK83C,QAAQloC,GAAG,SAE9B,GAAGlI,EAAK7D,GAAG,CACV,IAAM4+C,EAAU51C,EAAMmL,QAAQtQ,EAAK7D,IAEnC8I,EAAKkN,OAAO3S,OAAOu7C,EAAQ51D,KAAMmT,KAAK0iD,UAAUD,IAChD51C,EAAMwkC,WAAW3pC,EAAK7D,GAAI6D,EAC3B,MAECmF,EAAM3N,IAAIwI,GAEXiF,EAAKkN,OAAO3a,IACXwI,EAAK7a,KACL6a,EAAKiD,MACL3K,KAAK0iD,UAAUh7C,IAGhBiF,EAAK3K,UAEL6K,EAAMqqC,WACNjgC,EAAKoa,UAAU,CAACgxB,MAAO,WACxB,CACD,GAAC,CAAAhtC,IAAA,YAAA3V,MACD,SAAUgI,GACT,MAAqB,WAAdA,EAAK26C,OAA4B36C,EAAK26C,KAC9C,GAAC,CAAAhtC,IAAA,cAAA3V,MACD,SAAYmE,GAAG,IAAAsrB,EAAAnvB,KACR2M,EAAO3M,KAAK2M,KAClBA,EAAKovB,QAAQ,CACZ/xB,KAAM4D,MAAMC,KAAKC,YAAYxE,OAAO,0BAClC0yB,MAAK,WACP,IAAMnvB,EAAQsiB,EAAK2oB,QAAQloC,GAAG,SACxBwQ,EAAOvT,EAAMmL,QAAQnU,GAE3B8I,EAAKkN,OAAO3S,OAAOkZ,EAAKvzB,KAAMsiC,EAAKuzB,UAAUtiC,IAE7CzT,EAAK3K,UACL6K,EAAM3F,OAAOrD,EACd,GACD,GAAC,CAAAwR,IAAA,YAAA3V,MACD,SAAUmE,GACT,IAAMoT,EAAOjX,KAAK83C,QAAQloC,GAAG,QACvB/C,EAAQ7M,KAAK83C,QAAQloC,GAAG,SAE9BqH,EAAKkrC,kBACL,IAAM/hC,EAAOxS,MAAMvG,KAAKwF,EAAMmL,QAAQnU,IAEtCoT,EAAKoa,UAAUjR,EAChB,GAAC,CAAA/K,IAAA,QAAA3V,MACD,WAAO,IAAAoxB,EAAA9wB,KACNA,KAAK2M,KAAK+D,YAAY,iBAAiB,SAAC7jB,EAAM0rB,GAAO,OAAIuY,EAAKutB,YAAYxxD,EAAM0rB,MAChFvY,KAAK2M,KAAK+D,YAAY,iBAAiB,SAAC7jB,GAAI,OAAIikC,EAAKutB,YAAYxxD,MACjEmT,KAAK2M,KAAK+D,YAAY,cAAc,WAAA,OAAKogB,EAAKutB,iBAE9C,IAAMh0B,EAASzc,MAAMC,KAAKC,YAAYxE,OAChCq5C,EAAU,CACf7rC,QAAQ,EACRxC,KAAM,QACNxF,KAAK,CACJ,CAAEnC,KAAM,sBAAuB9I,GAAI,QAASuH,YAAW,EAAMoB,QAAQ,CACpE,CAAE3I,GAAG,OAAQw1B,OAAOhP,EAAO,cAAejkB,MAAO,KACjD,CAAEvC,GAAG,QAASw1B,OAAOhP,EAAO,eAAgBjkB,MAAO,KACnD,CAAEvC,GAAG,QAASw1B,OAAOhP,EAAO,eAAgBjkB,MAAO,GAAIkI,SAAU,SAAAW,GAChE,MAAoB,WAAbA,EAAIozC,MAAqBh4B,EAAO,gBAAkBpb,EAAIozC,KAC9D,GACA,CAAE/zC,SAAS,iEAAkElI,MAAM,IACnF,CAAEkI,SAAS,gEAAiElI,MAAM,KAEnF+Q,WAAU,EAAM9Q,OAAQ,IAAK2I,OAAO,MACpCE,GAAG,CACF0zC,eAAgB,SAAA/+C,GACf,OAAOA,GAAMitB,EAAKgnB,QAAQloC,GAAG,QAAQirB,YAAYh3B,EAClD,GAEDq2B,QAAQ,CACP,YAAY,SAAC1kB,EAAI3R,GAAE,OAAKitB,EAAK+xB,YAAYh/C,EAAG,EAC5C,aAAa,SAAC2R,EAAI3R,GAAE,OAAKitB,EAAKgyB,UAAUj/C,EAAG,IAE5C,CAAEuC,MAAO,IAAKuG,KAAM,OAAQ9I,GAAG,OAC9B0kB,MAAM,CACL17B,KAAM,SAAC3K,EAAG+sB,GAKT,OAJkB6hB,EAAKgnB,QAAQloC,GAAG,SAAS7T,MAAK,SAAAqkB,GAC/C,OAAOA,EAAKvzB,MAAQoiB,EAAIpiB,MAAQuzB,EAAKiiC,OAASpzC,EAAIozC,OAASjiC,EAAKvc,IAAMoL,EAAIpL,EAC1E,IAAE,KAEmBknB,GAAiB9b,EAAIpiB,KAC3C,EACD8d,MAAO8P,GACP4nC,MAAOz0C,MAAM2a,MAAMw6B,YAEpBvtB,eAAe,CACdC,WAAY,IAEb7e,SAAS,CACR,CAAEjK,KAAM,OAAQ9f,KAAK,OAAQqqB,MAAOmT,EAAO,eAC3C,CAAE1d,KAAM,OAAQ9f,KAAK,QAASgX,GAAG,QAASqT,MAAOmT,EAAO,eAAgBnb,GAAG,CAC1E8zC,QAAQ,WAAA,OAAMlyB,EAAKnkB,KAAKkmC,SAAS/hB,EAAKgnB,QAAQloC,GAAG,SAASvO,YAAY,EAAK,IAE5E,CAAEsL,KAAM,aAAc9f,KAAK,QAASgX,GAAG,SAAUqT,MAAOmT,EAAO,eAAgB5a,QAAQ,CACtF9C,KAAM,sBACNyB,KAAK,CACJ1G,KAAM,UAQZ,MAAO,CACNiF,KAAM,gBACN7E,MAAK,EACL6P,KAAM/J,MAAMC,KAAKC,YAAYxE,OAAO,eACpCgmB,YAAY,EACZlpB,MAAO,IACPilB,SAAU,SACVjd,KAAMu0C,EACNzzC,GAAG,CACFmqC,YAAa,WAAA,OAAMvoB,EAAKmyB,WAAW,EACnC1J,cAAe,WAAA,OAAMzoB,EAAKra,OAAO,GAGpC,GAAC,CAAApB,IAAA,cAAA3V,MACD,SAAY7S,EAAM0rB,GACjB,GAAIvY,KAAK83C,QAAQjpB,YAAjB,CAGA,IAAMhV,EAAS7Z,KAAK2M,KAAKoS,OAAO/V,YAC1BqhB,EAASzc,MAAMC,KAAKC,YAAYxE,OAChCuD,EAAQ7M,KAAK83C,QAAQloC,GAAG,SACxBqH,EAAOjX,KAAK83C,QAAQloC,GAAG,QAEzBkzC,EAAYj2C,EAAMmL,QAASf,EAAK4jB,YAAYh3B,IAChD,GAAGi/C,EAAU,CACZ,IAAIxwB,EAAYwwB,EAAUj2D,KAO1Bi2D,GAJCxwB,EADEzlC,GAAQi2D,EAAUT,MACR9pC,EAAUA,EAAQ,IAAI+Z,EAAY,KAElCwwB,EAAUT,MAAM,IAAI/vB,GAETzY,EAAOha,IAAIyyB,GAAa,IACjD,CAEAzlB,EAAM+xB,WAMN,IAJA,IAGIskB,EAHEtzB,EAAY/V,EAAOpU,YACnBiC,EAAO,GAGLlnB,EAAI,EAAGA,EAAIovC,EAAU7uC,OAAQP,IAAI,CACxC,IAAMqjB,EAAKrjB,EAAE,EACb2iE,EAAAlwC,GAAoB2c,EAAUpvC,GAAE,GAA3BqM,EAAIs2D,EAAA,GAAEx4C,EAAKw4C,EAAA,GAEbL,GAAajpC,EAAOha,IAAIhT,IAASi2D,IACnCI,EAAar/C,GAEd,IAAMu/C,EAAYv2D,EAAK1K,MAAM,KAE7BulB,EAAKviB,KAAK,CACTk9D,MAA2B,GAApBe,EAAUriE,OAAc,UAAYqiE,EAAU,GACrDv2D,KAAMu2D,EAAU,IAAMA,EAAU,GAChCz4C,MAAAA,EACA9G,GAAAA,GAEF,CAEAgJ,EAAMlK,MAAM+E,GAEZuP,EAAKoa,UAAU,CAACxtB,GAAGq/C,IAAa,GAC7BA,GACFr2C,EAAMmC,OAAOk0C,GAEd,IAAMl0C,EAAShP,KAAK83C,QAAQloC,GAAG,UACzByzC,EAAar0C,EAAOc,UAE1BuzC,EAAWzkB,WAEX,IAAM1zB,EAAS,CAAC,CACfrH,GAAI,UAAWnE,MAAO2qB,EAAO,kBAO9B,GALArqB,KAAK2M,KAAKsS,QAAQ/5B,SAAQ,SAAAulB,GACzBS,EAAO/lB,KAAK,CAAC0e,GAAG4G,EAAM5d,KAAM6S,MAAO+K,EAAM5d,MAC1C,IACAw2D,EAAW1gD,MAAMuI,GAEdre,EAAK,CACP,IAAM8d,EAAQ3K,KAAK83C,QAAQloC,GAAG,SACxB0zC,EAAW34C,EAAMtJ,WAGvBkX,EAAUA,GAAWvY,KAAK2M,KAAKiM,iBAEe,GAA3C0qC,EAAS7gE,QAAQy3B,GAAYrtB,GAAM,MACrC8d,EAAM1J,SAASiZ,GAAY3B,GAAS,IAAI+qC,EAASnhE,MAAM,KAAK,IAE1D6sB,EAAO3N,YAAcxU,GACvBmiB,EAAO/N,SAASsX,EAClB,CAzEC,CA0EF,IAAC,EA1P6Bo/B,yDAFT,cCETO,YAASC,GAAA,SAAAD,IAAA,OAAAL,QAAAK,GAAAE,GAAAp4C,KAAAk4C,EAAAlmC,UAAA,CAAA,OAAAqmC,GAAAH,EAAAC,GAAAP,GAAAM,EAAA,CAAA,CAAA7iC,IAAA,QAAA3V,MACrB,WACC,IAAIuX,EAAOjX,KAAK83C,QAAQloC,GAAG,QAE3B,GADA5P,KAAKiK,KAAOjK,KAAK2M,KAAKsD,eAAc,IAC/BjQ,KAAKiK,KAAKlpB,OACd,OAAO,EAERk2B,EAAKhL,QAGL,IAAMvM,EAAQM,KAAK2M,KAAKqhB,cAAchuB,KAAKiK,KAAK,GAAGjE,IAAKhG,KAAKiK,KAAK,GAAGG,QAClE1K,GACFuX,EAAKoa,UAAU,CACd1mB,MAAOjL,EAAMyO,QACbo1C,MAAO7jD,EAAM6jD,QAGfvjD,KAAK2M,KAAK+jB,iBAAmB,SAAShiC,EAAI0jB,EAAKxxB,EAAGkB,GAEjD,OADAm1B,EAAKL,SAASjM,MAAM1J,SAASrgB,EAAE,IAAIkB,IAC5B,GAGRm1B,EAAKL,SAASjM,MAAMinB,OACrB,GAAC,CAAAvc,IAAA,QAAA3V,MACD,WACCM,KAAK2M,KAAK+jB,iBAAmB,IAC9B,GAAC,CAAArb,IAAA,QAAA3V,MACD,WAAO,IAAA8uB,EAAAxuB,KACN,MAAO,CACN2M,KAAM,gBACN0e,SAAS,SACT1T,KAAK/J,MAAMC,KAAKC,YAAYxE,OAAO,kBACnCxB,MAAM,EACNsG,KAAK,CACJ0I,QAAQ,EACRnK,KAAK,OACL9I,GAAG,OACH2xB,eAAgB,CACfC,WAAY,KAEbhpB,KAAK,CACJ,CAAEE,KAAK,OAAQuK,MAAMtJ,MAAMC,KAAKC,YAAYxE,OAAO,kBAAmBzc,KAAK,SAC3E,CAAE8f,KAAK,WAAYuK,MAAMtJ,MAAMC,KAAKC,YAAYxE,OAAO,yBAA0Bzc,KAAK,WAGxFqiB,GAAG,CACFmqC,YAAa,WAAA,OAAM7qB,EAAK8qB,SAAS,EACjCC,cAAe,WAAA,OAAM/qB,EAAK/X,OAAO,GAGpC,GAAC,CAAApB,IAAA,UAAA3V,MACD,WACC,IAAMH,EAASS,KAAK83C,QAAQloC,GAAG,QAAQirB,YAEnClwB,GAAMpL,EAAOoL,MAAO3K,KAAK2M,OAG5BsF,GAAMnS,KAAI,WACT,IAAK,IAAItf,EAAI,EAAGA,EAAIwf,KAAKiK,KAAKlpB,OAAQP,IACrCwf,KAAK2M,KAAKuhB,cAAcluB,KAAKiK,KAAKzpB,GAAGwlB,IAAKhG,KAAKiK,KAAKzpB,GAAG4pB,OAAQ,CAAE6hB,OAAO,gBAAiB9d,QAAQ5O,EAAOoL,MAAO44C,MAAMhkD,EAAOgkD,OAC7H,GAAEvjD,MACHA,KAAKyW,SANLzW,KAAK2M,KAAKylC,MAAM,CAACpoC,KAAK4D,MAAMC,KAAKC,YAAYxE,OAAO,eAAgBgL,KAAM,eAQ5E,IAAC,EA/D6BqjC,yDAFT,iBCChB6L,GAAM,WAGV,OAAA5L,IAFD,SAAA4L,EAAY72C,GAAKkrC,QAAA2L,GAChBxjD,KAAKyjD,QAAU92C,CAChB,GAAC,CAAA,CAAA0I,IAAA,QAAA3V,MACD,SAAM2iD,GAAM,IAAA7zB,EAAAxuB,KACLyK,EAAwB,iBAAT43C,EAAoBA,EAAQriD,KAAKyjD,QAAQ7qC,iBAC/C5Y,KAAKyF,UAAUgF,GACvBvlB,SAAQ,SAAAylB,KACD,IAAV03C,GACC13C,EAAM,KAKT6jB,EAAKtnB,OAAOyD,EAAM,GAAI03C,EACxB,GACD,GAAC,CAAAhtC,IAAA,iBAAA3V,MACD,SAAe7S,EAAMw1D,GAGpB,OAFa,IAAVA,IACFx1D,GAAQw1D,GAASriD,KAAKyjD,QAAQ7qC,kBAAkB,IAAI/rB,GAC9CA,CACR,GAAC,CAAAwoB,IAAA,kBAAA3V,MACD,SAAgBiL,EAAO03C,GAItB,OAFwB,GADL13C,EAAMxoB,MAAM,KACjBpB,SACb4pB,GAAyB,iBAAT03C,EAAoBA,EAAQriD,KAAKyjD,QAAQ7qC,kBAAoB,IAAMjO,GAC7EA,CACR,GAAC,CAAA0K,IAAA,MAAA3V,MACD,SAAI7S,EAAM8d,EAAO03C,GAChB,IAAM11C,EAAO3M,KAAKyjD,QAElB92C,EAAK6D,UAAU,kBAAmB,CAAC3jB,EAAM8d,EAAO03C,IAEhDx1D,EAAOmT,KAAK0jD,eAAe72D,EAAMw1D,GAEjC11C,EAAKoS,OAAO/V,YAAY9J,IAAIrS,EAAMmT,KAAK2jD,gBAAgBh5C,EAAO03C,IAC9D11C,EAAK6D,UAAU,gBAAiB,GACjC,GAAC,CAAA6E,IAAA,UAAA3V,MACD,SAAQ7S,EAAMw1D,GACbx1D,EAAOmT,KAAK0jD,eAAe72D,EAAMw1D,GAEjC,IAAM13C,EAAQ3K,KAAKyjD,QAAQ1kC,OAAO/V,YAAYnJ,IAAIhT,GAClD,GAAG8d,EACF,OAAOA,EAAMhf,MACf,GAAC,CAAA0pB,IAAA,SAAA3V,MACD,SAAO7S,EAAMw1D,GACZx1D,EAAOmT,KAAK0jD,eAAe72D,EAAMw1D,GAEjCriD,KAAKyjD,QAAQ1kC,OAAO/V,YAAY9B,OAAOra,GACvCmT,KAAKyjD,QAAQjzC,UAAU,gBAAiB,GACzC,GAAC,CAAA6E,IAAA,QAAA3V,MACD,SAAMgI,EAAM+C,GACX,GAAI/C,EAEJ,IAAI,IAAIlnB,EAAI,EAAGA,EAAIknB,EAAK3mB,OAAQP,IAAI,CACnC,IAAMq5B,EAAS7Z,KAAKyjD,QAAQ1kC,OAAO/V,YACnC46C,EAAA3wC,GAAiCvL,EAAKlnB,GAAE,GAAnCqM,EAAI+2D,EAAA,GAAEj5C,EAAKi5C,EAAA,GAAEC,EAAWD,EAAA,GAC7B/2D,EAAOmT,KAAK0jD,eAAe72D,EAAMg3D,GAAap5C,GAE1CoP,EAAOha,IAAIhT,IACdgtB,EAAO3a,IAAIrS,EAAMmT,KAAK2jD,gBAAgBh5C,EAAOF,GAC/C,CACD,GAAC,CAAA4K,IAAA,YAAA3V,MACD,SAAU+K,GACTA,EAAQA,GAASzK,KAAKyjD,QAAQ7qC,iBAI9B,IAHA,IAAMgX,EAAY5vB,KAAKyjD,QAAQ1kC,OAAO/V,YAAYvD,YAC5Cq+C,EAAM,GAEJtjE,EAAI,EAAGA,EAAIovC,EAAU7uC,OAAQP,IAAI,CACxC,IAAM6zB,EAAMub,EAAUpvC,GAChB4iE,EAAY/uC,EAAI,GAAGlyB,MAAM,KACzB0hE,EAAkC,GAApBT,EAAUriE,QAE3B8iE,GAAeT,EAAU,IAAM34C,IACjCq5C,EAAI3+D,KAAK,CACRi+D,EAAWS,EAAc,EAAI,GAC7BxvC,EAAI,GACJwvC,GAEH,CAEA,OAAOC,CACR,GAAC,CAAAzuC,IAAA,YAAA3V,MACD,SAAU+K,GAET,OADazK,KAAKyF,UAAUgF,GAChBnlB,KAAI,SAAA+uB,GACf,MAAO,CACNxnB,KAAMwnB,EAAI,GACV1J,MAAO0J,EAAI,GACXwb,OAAQxb,EAAI,GAEd,GACD,IAAC,CA5FU,GA4GZ,SAAS/O,GAASqH,EAAMsO,EAAIC,EAAIC,EAAIC,EAAIkB,GAIvC,IAHA,IAAMwnC,EAAM,GACNnrC,EAAchM,EAAK0S,SAAWrf,KAE3Bxf,EAAIy6B,EAAG,EAAGz6B,GAAK26B,EAAG,EAAG36B,IAC7B,IAAK,IAAI2G,EAAI+zB,EAAG,EAAG/zB,GAAKi0B,EAAG,EAAGj0B,IAAI,CAEjC,IADA,IAAI48D,OAAM,EACFjjE,EAAI,EAAGA,EAAIw7B,EAAMv7B,OAAQD,IAAI,CACpC,IAAM4qB,EAAO4Q,EAAMx7B,GACbklB,EAAMxlB,EAAI,EACVk5B,EAAMvyB,EAAI,EAChB,IAAK6e,GAAO0F,EAAK,IAAMgO,GAAOhO,EAAK,KAAO1F,GAAO0F,EAAK,IAAM1F,EAAM0F,EAAK,GAAKA,EAAK,IAAMgO,GAAOhO,EAAK,IAAMgO,EAAMhO,EAAK,GAAKA,EAAK,GAAG,CAChIq4C,GAAS,EACT,KACD,CACD,CACA,IAAGA,EAAH,CAEA,IAAI90C,EAAMjP,KAAKqF,QAAQ7kB,EAAG2G,GACtB8iB,OAAI,EAOPA,EALGgF,EAKIrB,MAAMvG,KAAK4H,GAJX,CACNvP,MAAO,IAKNiZ,EACF1O,EAAKqgC,OAAS8K,GAAczoC,EAAM,CAAC9I,GAAIrjB,EAAE,GAAI,EAAM,EAAM,CAACqjB,GAAG1c,EAAE,IAAI,UAE5D8iB,EAAKE,OAEbF,EAAKpG,GAAKoG,EAAKvK,MACfokD,EAAI3+D,KAAK8kB,EAjBR,CAkBF,CAGD,OAAO65C,CACR,CAEO,SAASE,GAAar3C,EAAM3C,EAAM+Y,GACxC,IAAIxjB,EAAS,GACb,GAAmB,iBAARyK,EAAiB,CAC3B,IAAMsT,EAAM2mC,GAAYj6C,EAAM2C,GAC9B,GAAI2Q,EAAI,CACP,IAAI1wB,EAAO+f,EAAK0S,OAIhB,GAHG/B,EAAI,KACN1wB,EAAO+f,EAAKoS,OAAOpW,QAAQ2U,EAAI,KAE7B1wB,EAAK,CACP,IAAM0vB,GACL1vB,GAAQ+f,EAAK0S,OACZ9Y,GAASoG,EAAM,CAAA,GACf0H,GAAS1H,EAAKsS,SAAS,SAAAxU,GAAK,OAAIA,EAAM5d,MAAQywB,EAAI,MAAI3G,SACtD2F,MACF/c,EAAS+F,GAAST,MAAMjY,EAAM,CAAC+f,EAAM2Q,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIhB,GACtE,CACD,CACA,MACI,GAAI1O,MAAM1K,QAAQ8G,GACtB,IAAK,IAAIxpB,EAAE,EAAGA,EAAEwpB,EAAKjpB,OAAQP,IAAI,CAChC,IAAI+E,EAAKykB,EAAKxpB,IAAkB,IAAZwpB,EAAKxpB,GAAYwpB,EAAKxpB,GAAK,GAC/C+E,EAAkB,WAAbiyB,GAAOjyB,GAAkBqoB,MAAMvG,KAAK9hB,GAAK,CAAEse,GAAGte,EAAGma,MAAMna,GAC5Dga,EAAOpa,KAAKI,EACb,CAGD,IADA,IAAMwN,EAAO,CAAA,EACJvS,EAAE+e,EAAOxe,OAAO,EAAGP,GAAG,EAAGA,IAAI,CACrC,IAAM0jE,EAAqC,kBAApB3kD,EAAO/e,GAAGkf,MAC9BwkD,IACF3kD,EAAO/e,GAAGkf,OAAS,IACjBwkD,GAA4B,IAAjB3kD,EAAO/e,GAAGqjB,MACvBtE,EAAO/e,GAAGqjB,GAAK/f,OAAOyb,EAAO/e,GAAGkf,QAE9BqjB,GAASA,EAAMohC,SACbpxD,EAAKwM,EAAO/e,GAAGqjB,IAClBtE,EAAOqF,OAAOpkB,EAAG,GAEjBuS,EAAKwM,EAAO/e,GAAGqjB,KAAM,EAExB,CAEA,GAAIkf,EAAM,CAET,IADA,IAAIwgC,GAAQ,EACH/iE,EAAE+e,EAAOxe,OAAO,EAAGP,GAAG,EAAGA,IAAI,CACrC,IAAIkf,EAAQH,EAAO/e,GAAGkf,MACjBA,GAAmB,IAAVA,EAKdH,EAAO/e,GAAGkf,MAAQ5b,OAAO4b,IAJxBH,EAAOqF,OAAOpkB,EAAG,GACjB+iE,GAAQ,EAIV,CAEIxgC,EAAMoF,OACT5oB,EAAO3N,MAAK,SAASwyD,EAAMC,GAC1B,IAAMC,EAAU33C,EAAKiD,GAAG,SAASlI,KAAK0/B,QAAQC,GACxCzmD,EAAIwjE,EAAK1kD,MACT5d,EAAIuiE,EAAK3kD,MAEf,OAAOkO,MAAM2a,MAAMC,SAAS5nC,IAAMgtB,MAAM2a,MAAMC,SAAS1mC,GAAKwiE,EAAO,IAAK1jE,EAAGkB,GAAKwiE,EAAQ16C,OAAOhpB,EAAGkB,EACnG,IAEGyhE,GAASxgC,EAAM9wB,QAClBsN,EAAOgjD,QA5GF,CAAE1+C,GAAG,SAAUnE,MAAM,GAAI4qC,OAAO,oCADxB18B,MAAMC,KAAKC,YAAYxE,OAC4C,kBAAkB,YA8G/FyZ,EAAMwgC,OACThkD,EAAOgjD,QAAQ,CAAE1+C,GAAG,SAAU0gD,QAAO,EAAM7kD,MAAM,IACnD,CACA,OAAOH,CACR,2CA5HO,SAAcoN,GACpBA,EAAKkN,OAAS,IAAI2pC,GAAO72C,GAEzBA,EAAK+D,YAAY,mBAAmB,SAAAhJ,GACnCA,EAAKmS,OAASlN,EAAKkN,OAAOpU,WAC3B,GACD,oBC3BA,SAASvB,GAAMyI,GACdA,EAAKgU,OAAO6jC,WAAa,GACzBC,GAAc93C,EACf,CAEO,SAAS+3C,GAAW73C,GAC1B,IAAM83C,EAAU93C,EAAM23C,WAChB1uC,EAAM,GACZ,IAAK,IAAI9P,KAAO2+C,EACf,IAAK,IAAIv6C,KAAUu6C,EAAQ3+C,GAC1B8P,EAAI3wB,KAAKw/D,EAAQ3+C,GAAKoE,IACxB,OAAO0L,CACR,CAwBO,SAAS8uC,GAAaj4C,EAAMhC,EAAO/d,GACzC,IAAIi4D,GAAW,EACftqC,GAAU5P,EAAOgC,GAAM,SAASA,EAAM1C,GAClC0C,EAAK80B,cAAcx3B,EAAKjE,IAAKiE,EAAKG,OAAQxd,KACxCA,GAAQA,GAAQ+f,EAAKiM,mBACxBisC,GAAW,GACZl4C,EAAKm4C,cAAc76C,EAAKjE,IAAKiE,EAAKG,OAAQ,KAAMxd,GAElD,IACGi4D,GACFl4C,EAAKo4C,mBACP,CAOO,SAASC,GAAer4C,EAAM3G,EAAKoE,EAAQO,EAAO29B,EAAS79B,IAC7DE,IACHA,EAAQ,CAACyH,IAAI,CAACpM,IAAIA,KAEf2E,EAAMyH,OAETzH,EAsBF,SAAwBgC,EAAM3G,EAAKoE,EAAQ8jC,EAAQ5F,EAAS79B,GAC3D,IAAMiB,EAAOpF,GAAQqG,EAAM3G,EAAKoE,EAAQK,GACxC,GAAIzE,IAAQkoC,GAAWxiC,GAAQ1F,GAAOkoC,EAASxiC,EAAK,GAAK,EACxD,IAAKwiC,EAASloC,EAAKkoC,EAASvhC,EAAKuB,OAAOkF,SAAU86B,IAAS,CAC1D,IAAMnuD,EAAImuD,EAAO,EAEXxiC,EAAOpF,GAAQqG,EAAM5sB,EAAGqqB,EAAQK,GACtC,IAAGiB,GAAQA,EAAK,IAAM3rB,EAAtB,CAGA,IAAM2f,EAAQiN,EAAKmG,aAAa/yB,EAAGqqB,GAAQ,EAAOK,EAAQA,EAAM5d,KAAO,MACvE,IAAI6S,GAAmB,IAAVA,EACZ,KAJA,CAKF,CAGD,OAAG4oC,EACK4F,EAED/zB,GAAQnU,EAAI,EAAGoE,EAAQ8jC,EAAQ9jC,EACvC,CA1CU66C,CAAet4C,EAAM3G,EAAKoE,EADrBO,EAAMyH,IAAIpM,IAC2BsiC,EAAS79B,IAE5D,OAAOE,CACR,CAEO,SAASu6C,GAAcxlD,GAC7B,SAAUA,EAAMylD,UAAazlD,EAAMgL,WAAahL,EAAMgL,UAAUzY,OACjE,CAEA,SAASmzD,GAAez4C,GACvB,IAAMg4C,EAAUh4C,EAAKgU,OAAO6jC,WAC5B,IAAK,IAAIx+C,KAAO2+C,EACf,IAAK,IAAIv6C,KAAUu6C,EAAQ3+C,GAC1B,GAAI2+C,EAAQ3+C,GAAKoE,GAAS,OAAO,EACnC,OAAO,CACR,CAEA,SAASq6C,GAAc93C,GACtB,IAAMjN,EAAQ0lD,GAAez4C,GAC7BA,EAAK6D,UAAU,YAAa,CAAC,CAAC3M,GAAG,iBAAkBhX,KAAK,gBAAiB6S,MAAAA,IAC1E,CAwBA,SAAS4G,GAAQqG,EAAM3G,EAAKoE,EAAQK,GACnC,OAAIA,EAEIA,EAAMkM,QAAQ2F,MACdvgB,GAAK0O,EAAMkM,QAAQ2F,OAAO,SAACv8B,EAAGkB,EAAGokE,EAAIC,GAAE,OAAKt/C,GAAOjmB,GAAKimB,EAAMjmB,EAAIulE,GAAMl7C,GAAUnpB,GAAKmpB,EAASnpB,EAAIokE,UADvG,EADG14C,EAAKgU,OAAOra,QAAQN,EAAKoE,EAGlC,CAEO,SAASm7C,GAAc54C,EAAM3G,EAAKoE,GACxC,IAAK,IAAI5pB,EAAEwlB,EAAI,EAAGxlB,EAAEmsB,EAAKuB,OAAOkF,SAAU5yB,IAAI,CAC7C,IAAMkf,EAAQiN,EAAKmG,aAAatyB,EAAG4pB,GAEnC,GAAI1K,GAAmB,IAAVA,EAAY,CACxB,IAAM4U,EAAOwY,GAAQngB,EAAMnsB,EAAG4pB,GAC9B,MAAgB,UAARkK,GAA4B,QAARA,EAAkBA,EAAO,MACtD,CACK,GAAc,KAAV5U,EACR,KACF,CACA,MAAO,MACR,CA+CO,SAAS8lD,GAAY74C,EAAMoW,EAAO/c,EAAK0T,EAAK6qB,EAAQC,GAC1D,IAAMvyC,EAAS8wB,EAAM9wB,OAErBA,EAAOkc,QAAU0M,GAAY5oB,EAAOkc,QAAS,MAAOq2B,EAAUx+B,IAAK,CAACoE,OAAO2Y,EAAMrJ,IAAK1T,IAAI+c,EAAM/c,MAChG/T,EAAOkc,QAAU0M,GAAY5oB,EAAOkc,QAAS,SAAUq2B,EAAUp6B,OAAQ,CAACA,OAAO2Y,EAAMrJ,IAAK1T,IAAI+c,EAAM/c,MAEnG/T,EAAOq2C,UACTr2C,EAAOq2C,SAAW9D,EAAUx+B,YAEtB/T,EAAOyN,aAAczN,EAAOuhB,QACnC7G,EAAKm4C,cAAc9+C,EAAK0T,EAAKznB,EAC9B,CAEO,SAASwzD,GAAgB3nC,EAAMxJ,GAErC,IADA,IAAMrzB,EAAIuuD,GAAW1xB,GACZt9B,EAAE,EAAGA,EAAES,EAAEF,OAAQP,IACzB,GAAIS,EAAET,GAAGqjB,IAAMyQ,EAAM,OAAOrzB,EAAET,EAChC,CAEO,SAASklE,GAAc74D,GAC7B,OAAO+gB,MAAMvG,KAAMmoC,GAAW3iD,GAC/B,CAEO,SAAS84D,GAAkB7nC,EAAMpe,GACvC,IAAQylD,EAAwBzlD,EAAxBylD,SAAUz6C,EAAchL,EAAdgL,UACZk7C,EAAMH,GAAgB3nC,EAAMpT,EAAU4J,MACtCd,EAAUoyC,EAAMA,EAAIpyC,QAAU,WAAY,OAAO,GAEvD,GAAI2xC,EACH,IAAK,IAAI3kE,EAAE,EAAGA,EAAE2kE,EAASpkE,OAAQP,IAChC2kE,EAAS3kE,GAAKsD,OAAOqhE,EAAS3kE,IAGhC,OAAO,SAASkf,GACf,OAAIylD,GACiC,IAA7BA,EAAS1iE,QAAQid,GAEI,KAArBgL,EAAUzY,QAAiBuhB,EAAQ9T,EAAOgL,EAAUzY,QAG9D,qKAzRO,SAAc0a,GACpB,IAAME,EAAQF,EAAKgU,OAEnBhU,EAAK+D,YAAY,WAAW,WAAA,OAAMxM,GAAMyI,MACxCzI,GAAMyI,GAENE,EAAM0I,SAASswC,mBAAqB,SAAChmE,EAAGgkB,GACvC,IAAM5R,EAAS4a,EAAM23C,WAAW3gD,EAAGmC,KAAKnC,EAAGuG,QACrC0T,EAAO7rB,EAAO6rB,MAAQynC,GAAc54C,EAAM9I,EAAGmC,IAAKnC,EAAGuG,QAEvD+D,EAAU,GACVlc,EAAOkc,UACmB,iBAAlBlc,EAAOkc,QACjBA,EAAU61C,GAAar3C,EAAM1a,EAAOkc,QAAS,CAAEg2C,QAAO,EAAMh8B,OAAM,EAAMl2B,QAAO,IACvE2b,MAAM1K,QAAQjR,EAAOkc,WAC7BA,EAAU61C,GAAar3C,EAAM1a,EAAOkc,QAAS,CAAElc,QAAO,MAExD0a,EAAK6D,UAAU,YAAa,CAAC,CAAC3M,GAAG,eAAgBoG,KAAKpG,EAAIia,KAAAA,EAAM3P,QAAAA,EAASlc,OAAAA,MAE1E4a,EAAMi5C,YAAYD,mBAAqB,WAAA,OAAM,CAAK,EAElDl5C,EAAK+D,YAAY,aAAa,SAACqyB,GAChB,kBAAVA,EAAGl/B,IA8KT,SAAuB8I,GACtB,IAAMhC,EAAQgC,EAAKgU,OAAO3C,gBAEtBonC,GAAez4C,IAClBsF,GAAMnS,KAAI,WAAA,OAAK6M,EAAKo5C,mBAChBp7C,GACHgC,EAAKgU,OAAOmuB,cAAcnkC,EAAMwH,MAAOxH,EAAMyH,MAEtCzH,GACRsH,GAAMnS,KAAI,WAET,IADA,IAAIkG,EAAM2E,EAAMwH,MAAMnM,IACbxlB,EAAImqB,EAAMwH,MAAM/H,OAAQ5pB,GAAKmqB,EAAMyH,IAAIhI,OAAQ5pB,IACvDmsB,EAAKm4C,cAAc9+C,EAAKxlB,EAAG,CAAE2tB,QAAQxD,EAAO29B,QAAS0c,GAAer4C,EAAM3G,EAAKxlB,EAAGmqB,GAAO,IAC3F,IACD85C,GAAc93C,EACf,CA5LGq5C,CAAcr5C,EAChB,IAEA,IAAIk4C,GAAW,EACfl4C,EAAK+D,YAAY,UAAU,SAAC4D,EAAMtO,EAAKoE,EAAQ1K,GAC9C,GAAY,UAAR4U,EACH5U,EAAyB,UAAhB8X,GAAO9X,GAAqBA,EAAQ,KAC7CiN,EAAKm4C,cAAc9+C,EAAKoE,EAAQ1K,GAChCmlD,GAAW,OAEP,GAAY,gBAARvwC,EAAuB,CAC/B,IAAMriB,EAAS0a,EAAK80B,cAAcz7B,EAAKoE,GAIvC,GAFAnY,EAAOyN,MAAQA,SACRzN,EAAOuhB,QACV9T,GAASA,EAAMgL,UAAU,CAC5B,IAAMoT,EAAO7rB,EAAO6rB,MAAQynC,GAAc54C,EAAM3G,EAAKoE,GACrDnY,EAAOuhB,QAAUmyC,GAAkB7nC,EAAM7rB,EAAOyN,MACjD,CACAmlD,GAAW,EAGX,IAAM3lD,EAAMQ,GAASwlD,GAAcxlD,GACnCmN,EAAM3N,EAAI,aAAa,iBAAiB8G,EAAKoE,EAAQ,oBACrD45B,GAAWr3B,EAAM3G,EAAKoE,EAAQ,mBAAoBlL,EACnD,CACD,IAEAyN,EAAK+D,YAAY,eAAe,WAC3Bm0C,IACHl4C,EAAKo4C,oBACLF,GAAW,EAEb,IAEAl4C,EAAK+D,YAAY,YAAY,SAAC+E,EAAQ9zB,GACvB,UAAV8zB,EACA9zB,EAAEiL,MAAQ+f,EAAKiM,mBACjBorB,GAAWr3B,EAAMhrB,EAAEqkB,IAAKrkB,EAAEyoB,OAAQ,YAAazoB,EAAEmtC,UACjDkV,GAAWr3B,EAAMhrB,EAAEqkB,IAAKrkB,EAAEyoB,OAAQ,mBAAqBzoB,EAAEmtC,UAAYntC,EAAEmtC,SAASpvB,OAASwlD,GAAcvjE,EAAEmtC,SAASpvB,QAClH+kD,GAAc93C,IAGG,sBAAV8I,GAmJX,SAAwB9I,EAAM9f,EAAMiuB,EAAKpT,EAAMyK,GAC9C,IAAMwyC,EAAUj9C,EAAKi9C,QACrB,GAAI7pC,EACH,IAAI,IAAIt6B,EAAEmkE,EAAQ5jE,OAAO,EAAGP,GAAG,EAAGA,IAAI,CACrC,IAAAylE,EAAAhzC,GAA0B0xC,EAAQnkE,GAAE,GAA/BwlB,EAAGigD,EAAA,GAAC77C,EAAM67C,EAAA,GAACh0D,EAAMg0D,EAAA,GACtB,GAAY,OAARp5D,GAAiBmZ,GAAOmM,EAAMnM,KAAe,UAARnZ,GAAoBud,GAAU+H,EAAM/H,OAAO,CACnF,GAAY,OAARvd,EAAc,CACjB,GAAImZ,EAAMmM,EAAMnM,IAAM8U,EAAI,CACzB6pC,EAAQ//C,OAAOpkB,EAAE,GACjB,QACA,CACAmkE,EAAQnkE,GAAG,GAAS,EAAJwlB,EAAQ8U,EACtB7oB,EAAOq2C,UACTr2C,EAAOq2C,SAAWxtB,EACpB,MACK,GAAY,UAARjuB,EAAiB,CACzB,GAAIud,EAAS+H,EAAM/H,OAAS0Q,EAAI,CAC/B6pC,EAAQ//C,OAAOpkB,EAAG,GAClB,QACD,CACCmkE,EAAQnkE,GAAG,GAAY,EAAP4pB,EAAW0Q,CAC7B,CACA7oB,EAAOkc,QAAU0M,GAAY5oB,EAAOkc,QAASthB,EAAMiuB,EAAK3I,EACzD,CACD,CAEF,CA5KGkwB,CAAe11B,EAAMhrB,EAAEkL,KAAMlL,EAAEm5B,IAAKn5B,EAAE+lB,KAAM/lB,EAAEwwB,MAChD,GACD,WAmDO,SAAkBxF,EAAM3G,EAAKoE,GACnC,IAAMu6C,EAAUh4C,EAAKgU,OAAO6jC,WAC5B,OAAOG,EAAQ3+C,MAAU2+C,EAAQ3+C,GAAKoE,EACvC,wBA3BO,SAAcuC,EAAKjF,GACzB,IAAMi9C,EAAUj9C,EAAKi9C,QAErB,GAAIA,EAAQ,CACX,IAAK,IAAInkE,EAAI,EAAGA,EAAImkE,EAAQ5jE,OAAQP,IACnCmsB,EAAKm4C,cAAcH,EAAQnkE,GAAG,GAAImkE,EAAQnkE,GAAG,GAAKmkE,EAAQnkE,GAAG,IAAM,CAAC2tB,QAAQ,KAE7ExB,EAAKo4C,mBACN,CACD,2BApBO,SAAmBp4C,EAAKjF,GAI9B,IAHA,IAAMi9C,EAAUD,GAAW/3C,EAAKgU,QAC1BvE,EAAS1U,EAAKi9C,QAAU,GAErBnkE,EAAI,EAAGA,EAAEmkE,EAAQ5jE,OAAQP,IAAI,CACrC,IAAA0lE,EAAmDvB,EAAQnkE,GAAtDwlB,EAAGkgD,EAAHlgD,IAAKoE,EAAM87C,EAAN97C,OAAQ+D,EAAO+3C,EAAP/3C,QAAS2P,EAAIooC,EAAJpoC,KAAMpe,EAAKwmD,EAALxmD,MAAO4oC,EAAO4d,EAAP5d,QACxC5oC,EAAQA,GAASkO,MAAMvG,KAAK3H,GAC5B0c,EAAOj3B,KAAK,CAAC6gB,EAAKoE,EAAQ,CAAC1K,MAAAA,EAAOyO,QAAAA,EAAS2P,KAAAA,EAAMwqB,QAAAA,IAClD,CACD,ICjGa4P,YAASC,GAAA,SAAAD,IAAA,OAAAL,QAAAK,GAAAE,GAAAp4C,KAAAk4C,EAAAlmC,UAAA,CAAA,OAAAqmC,GAAAH,EAAAC,GAAAP,GAAAM,EAAA,CAAA,CAAA7iC,IAAA,OAAA3V,MACrB,SAAK+V,GAAO,IAAA+Y,EAAAxuB,KAMX,GALAA,KAAKiK,KAAOwL,EAAOxL,KACnBjK,KAAKmmD,MAAQ1wC,EAAOqI,KACpB9d,KAAKomD,QAAU3wC,EAAOxjB,QAGjB+N,KAAKiK,MAERjK,KAAK2M,KAAKm2B,aAAa9iC,KAAKiK,KAAKjE,IAAKhG,KAAKiK,KAAKG,QACjD,OAAO,EAGR,IAAKpK,KAAK83C,QAAQ,CACjB93C,KAAK83C,QAAUlqC,MAAMa,GAAGzO,KAAKiO,SAC7BjO,KAAK2M,KAAK6iB,iBAAiBrqC,KAAK6a,KAAK83C,SACrC93C,KAAK83C,QAAQpnC,YAAY,UAAU,WAAA,OAAM8d,EAAKupB,WAE9C,IAAMlrC,EAAQ7M,KAAK2M,KAAKiD,GAAG,SAC3B/C,EAAM6D,YAAY,aAAa,WAAA,OAAM8d,EAAK63B,gBAC1Cx5C,EAAM6D,YAAY,aAAa,WAAA,OAAM8d,EAAK63B,eAC3C,CAEA,IAAuD,IAAnDrmD,KAAKg4C,MAAMh4C,KAAKomD,QAAQ1mD,MAAO+V,EAAOtH,SACzC,OAAOnO,KAAKyW,QACbzW,KAAK83C,QAAQppB,KAAM1uB,KAAKsmD,iBACzB,GAAC,CAAAjxC,IAAA,iBAAA3V,MACD,WACC,IAAMmN,EAAQ7M,KAAK2M,KAAKiD,GAAG,SAE3B,OADa/C,EAAMvG,QAAQtG,KAAKiK,KAAKjE,IAAKhG,KAAKiK,KAAKG,QACtCyC,EAAM20B,YAAYxhC,KAAKiK,MAAQ4C,EAAMwmB,YAAYrzB,KAAKiK,KACrE,GAAC,CAAAoL,IAAA,QAAA3V,MACD,SAAMA,EAAOyO,GACZ,IAAMwF,EAAO3T,KAAK8P,UACZ7d,EAAS+N,KAAKm3C,YAEhBllD,EAAOic,OAAO4P,OAAS9d,KAAKmmD,QAC/Bl0D,EAAO8gC,OAAO,aAAc/yB,KAAK0lD,cAAc1lD,KAAKmmD,QACpDl0D,EAAO8gC,OAAO,OAAQ/yB,KAAKmmD,QAI5B,IAAM7xC,EAAO5U,GAASA,EAAM8vC,YAAc9vC,EAAM8vC,WAAWl7B,KACvDA,IAASiyC,GAAoBvmD,KAAKmmD,MAAO7xC,KAC5C5U,EAAQ,IAETiU,EAAKirB,WACLjrB,EAAKjM,KAAK8+C,WAAWr4C,GAGrBlc,EAAOic,OAAOxO,MAAQ,GACtBzN,EAAOgP,SAAU2M,MAAMvG,KAAK3H,GAAO,CAAE,GACtC,GAAC,CAAA2V,IAAA,QAAA3V,MACD,WAAO,IAAAyvB,EAAAnvB,KACAqqB,EAASzc,MAAMC,KAAKC,YAAYxE,OACtC,MAAO,CACNqD,KAAK,QACL2C,IAAI,gBACJwH,QAAQ,EACR2vC,SAAS,QACTr4C,KAAK,CACJ/C,OAAO,EACPoB,KAAK,CACJ,CACCE,KAAK,SACLg0C,MAAM,QACN7iC,KAAK,OACL0xB,WAAWxvC,KAAK0lD,cAAc,QAC9BgB,OAAO,CACN,OACA,CAAE/5C,KAAK,oBAAqBg9B,YAAW,EAAMtL,MAAM,aAAcnvB,GAAG,CACnEM,SAAS,WAAA,OAAM2f,EAAKgoB,YAAYwP,aAAa,IAE9C,CAAEh6C,KAAK,yBAA0Bg9B,YAAW,EAAMtL,MAAM,kBAAmBnvB,GAAG,CAC7EM,SAAS,WAAA,OAAM2f,EAAKgoB,YAAYwP,aAAa,KAG/Cr4C,SAAS,SAASW,GACjB,OAAOA,EAAIq7B,QAAUr7B,EAAIvP,KAC1B,GAED,CAAEoP,KAAK,CACN,CAAA,EACA,CAAEnC,KAAK,SAAUuK,MAAMmT,EAAe,OAAGlT,WAAU,EAAM7H,IAAI,oBAAqBJ,GAAG,CACpF8f,YAAe,WAAA,OAAMG,EAAK1Y,OAAO,IAElC,CAAE9J,KAAK,SAAUuK,MAAMmT,EAAc,MAAGlT,WAAU,EAAM7H,IAAI,kBAAmBJ,GAAG,CACjF8f,YAAe,WAAA,OAAMG,EAAKw3B,aAAa,QAM7C,GAAC,CAAAtxC,IAAA,cAAA3V,MACD,WACC,IAAMzN,EAAS+N,KAAKm3C,YACd/F,EAAWpxC,KAAKomD,QAAQ1mD,MACxBA,EAAQM,KAAKomD,QAAQ1mD,MAAQzN,EAAOoP,WAC1CrB,KAAKomD,QAAQ5yC,QAAU+yC,GAAsBvmD,KAAKmmD,MAAOzmD,GAEzDM,KAAK2M,KAAKo4C,oBACV/kD,KAAK2M,KAAK6D,UAAU,WAAY,CAAC,eAAgB,CAAExK,IAAIhG,KAAKiK,KAAKjE,IAAKoE,OAAOpK,KAAKiK,KAAKG,OAAQ1K,MAAM0xC,EAAUtiB,SAASpvB,KACxHM,KAAK4mD,aAAa5mD,KAAKiK,KAAKjE,IAAKhG,KAAKiK,KAAKG,OAAQ,mBAAoBm8C,GAAkB7mD,IAEzFM,KAAKyW,OACN,GAAC,CAAApB,IAAA,eAAA3V,MACD,SAAasG,EAAKoE,EAAQkF,EAAKpQ,GAC9B,IAAM2N,EAAQ7M,KAAK2M,KAAKiD,GAAG,SACrBlE,EAAO1L,KAAKsG,QAAQuG,EAAO7G,EAAKoE,GAElCsB,IACCxM,GAC0B,GAAzBwM,EAAK,GAAGjpB,QAAQ6sB,KACnB5D,EAAK,IAAM,IAAM4D,GAElB5D,EAAK,GAAKA,EAAK,GAAG9oB,QAAQ,IAAM0sB,EAAK,KAGvCzC,EAAM3N,EAAI,aAAa,iBAAiB8G,EAAKoE,EAAQkF,EACtD,GAAC,CAAA+F,IAAA,UAAA3V,MACD,SAAQmN,EAAO7G,EAAKoE,GACnB,IAAIgW,EAAOvT,EAAMvG,UAAUN,GAC3B,GAAIoa,EACH,OAAOA,EAAKhW,EACd,GAAC,CAAAiL,IAAA,UAAA3V,MACD,WACC,OAAOM,KAAKm3C,YAAYhnC,gBAAgB,EACzC,GAAC,CAAAkF,IAAA,YAAA3V,MACD,WACC,OAAOM,KAAK83C,QAAQ5nC,UAAUC,gBAAgB,EAC/C,GAAC,CAAAkF,IAAA,aAAA3V,MACD,WACC,GAAIM,KAAK83C,QAAQjpB,YAAY,CAC5B,IAAM3C,EAAOlsB,KAAKsmD,iBACZz5C,EAAQ7M,KAAK2M,KAAKiD,GAAG,SAEvBi3C,GAAW,EACf,GAAI36B,EAAK,CACR,IAAM46B,EAAal5C,MAAM6Q,KAAK4N,OAAQH,GAChC66B,EAAcn5C,MAAM6Q,KAAK4N,OAAQxf,EAAMiE,MAAMk2C,uBAAuB,iBAAiB,IACrFC,EAAQH,EAAW1kE,EAAI2kE,EAAY3kE,EACnC8kE,EAAQJ,EAAWjhE,EAAIkhE,EAAYlhE,EAAIihE,EAAW1gD,MAExDygD,EAAYI,EAAQ,GAAKA,EAAMH,EAAWzgD,OAAS0gD,EAAY1gD,QAC9D6gD,EAAQ,GAAKA,EAAMJ,EAAW1gD,MAAQ2gD,EAAY3gD,MAAQwH,MAAMotB,IAAIC,UACtE,EACK/O,GAAQ26B,EACZ7mD,KAAK83C,QAAQppB,KAAK,CAAC7oC,GAAG,KAAMzD,GAAG,OAE/B4d,KAAK83C,QAAQppB,KAAKxC,EACpB,CACD,GAAC,CAAA7W,IAAA,gBAAA3V,MACD,SAAc7S,GAIb,IAHA,IAAMw9B,EAASzc,MAAMC,KAAK5b,OACpBu9C,EAAa+W,GAAkB15D,GAE5BrM,EAAE,EAAGA,EAAEgvD,EAAWzuD,OAAQP,IAC9BgvD,EAAWhvD,GAAGqjB,KACjB2rC,EAAWhvD,GAAGkf,MAAQ2qB,EAAOmlB,EAAWhvD,GAAGqjB,KAE7C,OAAO2rC,CACR,IAAC,EAjK6BmI,yDAFT,iBCITO,YAASC,GAAA,SAAAD,IAAA,OAAAL,QAAAK,GAAAE,GAAAp4C,KAAAk4C,EAAAlmC,UAAA,CAAA,OAAAqmC,GAAAH,EAAAC,GAAAP,GAAAM,EAAA,CAAA,CAAA7iC,IAAA,QAAA3V,MACrB,WAMC,GALAM,KAAKiX,KAAOjX,KAAK83C,QAAQloC,GAAG,QAC5B5P,KAAK2T,KAAO3T,KAAK83C,QAAQloC,GAAG,QAC5B5P,KAAKu4C,QAAUv4C,KAAK83C,QAAQloC,GAAG,WAE/B5P,KAAKiK,KAAOjK,KAAK2M,KAAKsD,eAAc,IAC/BjQ,KAAKiK,KAAKlpB,OACd,OAAO,EAERif,KAAKmnD,SAASnnD,KAAK2M,MAEnB3M,KAAK2M,KAAK+jB,iBAAmB,WAC5B,OAAO,EAET,GAAC,CAAArb,IAAA,QAAA3V,MACD,WACCM,KAAK2M,KAAK+jB,iBAAmB,IAC9B,GAAC,CAAArb,IAAA,QAAA3V,MACD,WAAO,IAAA8uB,EAAAxuB,KACA6N,EAAOD,MAAMC,KAAKC,YAClBs5C,EAAev5C,EAAKvE,OACpBsZ,EAAgB/U,EAAKT,QAGrBsX,EAAaa,GAAkB,OAE/B8hC,EAAe,CACpB,CACCx6D,KAAK,QACL8f,KAAK,UACL2C,IAAI,uBACJ4H,MAAMkwC,EAAa,kBACnB1nD,MAAM,EACN2+B,MAAM,UAEP,CACCxxC,KAAM,YACN8f,KAAK,WACLuK,MAAMkwC,EAAwB,UAC9B/oB,MAAM,UAEP,CACC1xB,KAAK,aACL9f,KAAK,SACLqqB,MAAMkwC,EAAa,mBACnBj5C,QAAQoX,GACR8Y,MAAM,UAEP,CACC1xB,KAAK,WACLuK,MAAMkwC,EAAuB,SAC7B/gD,OAAQ,IACRxZ,KAAK,WACLwxC,MAAM,SACN/uB,IAAI,+BACJhB,SAAU,SAAAW,GACT,GAAGuf,EAAK7a,KAAK,CACZ,IAAIxJ,EAASqkB,EAAKhP,UAAUvQ,EAAIpL,IAE1B8N,EAAQ,CAACrC,IAAI,IACb5P,GAFNyK,EAASob,GAAgBpb,EAAOob,IAAKpb,EAAOua,cAEtB,WAAY/S,GAElC,MAAO,gBAAgBA,EAAMrC,IAAI,KAAK5P,EAAM,SAC7C,CACA,EACDgI,KAAK,CAAC,CAAC7D,GAAG,GAAI,CAACA,GAAG,GAAI,CAACA,GAAG,GAAI,CAACA,GAAG,MAI9ByjD,EAAe,CACpB,CACC36C,KAAK,OACLuK,MAAOkwC,EAAa,kBACpBv6D,KAAK,SACLk1D,cAAc,MACd1jB,MAAM,SACNhY,YAAY,UAAU3B,EAAWf,UAAU,MAAMe,EAAWb,YAAY,eAEzE,CACChgB,GAAI,OACJyK,SAAU,2IAAyD84C,EAAa,eAAe,OAC/Fh8C,YAAW,EACXizB,MAAM,WAIFkpB,EAAa,CAClB,CACC16D,KAAK,OACLwxC,MAAM,OACN1xB,KAAK,WACL8oB,WAAY,GACZpvB,OAAQ,IACR6Q,MAAMkwC,EAAa,eACnB93C,IAAI,2BACJhB,SAAU,SAAAW,GAAG,OAAIsW,GAAgBtW,EAAIvP,MAAOglB,EAA3Ba,CAAuC,KAAM,EAC9D7d,KAAK,CACJkb,EAAcvV,WACduV,EAActV,WACdsV,EAAcpV,eACdoV,EAAcrV,kBAKjB,MAAO,CACNZ,KAAM,gBACN0e,SAAS,SACTjlB,MAAM,IACNuR,KAAMyvC,EAAa,gBACnBt/C,MAAM,EACNsG,KAAK,CACJ0I,QAAQ,EACRhI,KAAK,CACJ,CACCnC,KAAK,OACL9I,GAAG,OACHyL,IAAI,2BACJlJ,MAAM,IACN2I,QAAO,EACPrH,KAAK1H,KAAKwnD,aACVx4C,QAAO,EACPE,GAAG,CACFynB,eAAgB,SAAC9yB,GAEhB,OADA2qB,EAAKi5B,aACE5jD,EAAG,IACT,IAAK,SACL,IAAK,OACJ2qB,EAAKvX,KAAKgoB,UAAUp7B,EAAG,IACvB,MACD,QACC,IAAM+S,EAAW4X,EAAKvX,KAAKL,SAC3B4X,EAAKvX,KAAKgoB,UAAU,UAEpBroB,EAAS/M,UAAoB,WAAThG,EAAG,GAAkB,OAAS,UAClD+S,EAASwM,OAAiB,SAATvf,EAAG,GAAgB,OAAS,UAGhD,IAGF,CACC8I,KAAK,OACL9I,GAAG,OACHwC,OAAO,IACPsO,SAAS,EACTD,SAAS,GACTkC,SAAS,CACR,CACC/S,GAAI,UACJyK,SAAU,SAASW,GAClB,OAAGA,EAAIvP,OAASmO,EAAKhB,MAAM,gBACnBoC,EAAIvP,MACL,iBAAiBuP,EAAIK,IAAI,KAAKL,EAAIvP,MAAM,SAC/C,EACD4P,IAAK,8BACLggB,YAAY,EACZlkB,YAAW,IAEXpqB,OAAOqmE,EAAcC,EAAcC,GACrC/xB,eAAgB,CACfC,WAAY,KAEbvmB,GAAI,CACHM,SAAU,WAAA,OAAMgf,EAAKi5B,YAAY,MAKrCv4C,GAAG,CACFmqC,YAAa,WAAA,OAAM7qB,EAAK8qB,SAAS,EACjCC,cAAe,WAAA,OAAM/qB,EAAKk5B,UAAU,GAGvC,GAAC,CAAAryC,IAAA,UAAA3V,MACD,WAAS,IAAAyvB,EAAAnvB,KACJsU,EAAOtU,KAAK2T,KAAK1D,gBACjB1Q,EAAkB,UAAR+U,EAAkB,CAACnK,OAAOnK,KAAKiX,KAAK4jB,YAAY1wB,QAAQnK,KAAKiX,KAAK4jB,YAChFt7B,EAAO+U,KAAOA,EAEdrC,GAAMnS,KAAI,WACT,IAAK,IAAItf,EAAI,EAAGA,EAAI2uC,EAAKllB,KAAKlpB,OAAQP,IACrC+kC,GAAc4J,EAAKxiB,KAAMwiB,EAAKllB,KAAKzpB,GAAGwlB,IAAKmpB,EAAKllB,KAAKzpB,GAAG4pB,OAAQ7K,EAAO4K,OAAQ5K,EACjF,IAEAS,KAAK2M,KAAKiD,GAAG,SAAS5N,UACtBhC,KAAK0nD,UACN,GAAC,CAAAryC,IAAA,WAAA3V,MACD,WACC,IACM7S,EADS2yB,GAAUxf,KAAK2M,KAAM3M,KAAKiK,KAAK,GAAGjE,IAAKhG,KAAKiK,KAAK,GAAGG,SAC5C,SAGnBmb,GAAa14B,IAChBmT,KAAK2M,KAAK6D,UAAU,YAAa,CAAC,CAAC3M,GAAG,iBAAkBhX,KAAK,SAAU6S,MAAM7S,KAC9EmT,KAAKyW,OACN,GAAC,CAAApB,IAAA,YAAA3V,MACD,SAAUoK,GACT,IAAMwK,EAAOtU,KAAK2T,KAAK1D,gBACnB1Q,EAASS,KAAKiX,KAAK4jB,YAGvB,OADAt7B,EAAOuK,SAAWA,GAAYvK,EAAOuK,SAC1B,UAARwK,GACS,QAARA,IACF/U,EAAOoK,KAAO,IAGR,CACN4b,IAAKA,GAFNhmB,EAASgmB,GAAiBjR,EAAM/U,IAG/BmlB,WAAWa,GAAkBjR,KAIvB,CACNiR,IAAKhmB,EAAO4K,OACZua,WAAYa,GAAkBjR,GAEjC,GAAC,CAAAe,IAAA,WAAA3V,MACD,SAASiN,GACR,IAGI2H,EAHE+V,EAASzc,MAAMC,KAAKC,YACpB3D,EAASqV,GAAU7S,EAAM3M,KAAKiK,KAAK,GAAGjE,IAAKhG,KAAKiK,KAAK,GAAGG,QAC1D7K,EAAS,CAAE0jB,MAAM,EAAGpZ,UAAW,EAAGC,SAAU,EAAGH,KAAM0gB,EAAOjd,QAAQC,WAAY+V,OAAOmC,GAAe,GAAG7lB,MAAOyK,OAAQ,IAGxHtd,EAAOsd,GAAU,GAErB5K,EAAO4K,OAASob,GAAoB14B,GAAQ,SASjC,WAJVynB,EAHGznB,EAEY,UAARA,EACAA,EAAO,SAEP04B,GAAkB14B,GAAM0S,OAAO+U,KAJ/BznB,EAAO,UAOd+gB,MAAMgH,OAAOrV,EAAQgmB,GAAkB14B,GAAM0S,QAAQ,GAEtD,IAAM6gB,EAAOpgB,KAAK2M,KAAKiD,GAAG,SAASoI,QAAQhY,KAAKiK,KAAK,GAAGjE,KAClD0T,EAAM1Z,KAAKiK,KAAK,GAAGG,OAEzBpK,KAAKN,MAAQkO,MAAM6J,YAAY2I,EAAK1G,IAAQ,GAAK0G,EAAK1G,GAEtD1Z,KAAKiX,KAAKoa,UAAU9xB,GACpBS,KAAK2T,KAAK3E,OAAOsF,GACjBtU,KAAKynD,YACN,GAAC,CAAApyC,IAAA,aAAA3V,MACD,WACC,IAAMuX,EAAOjX,KAAKiX,KAAKL,SACjBzM,EAASnK,KAAKwf,YAChB9f,EAAQM,KAAKN,MAEXioD,EAAmB,KAAVjoD,GAAgB7e,MAAM6e,GAElC6lB,GAAgBpb,EAAQ,UAAYw9C,GAAUpiC,GAAkB7lB,IAClEA,EAAQ,KACDioD,IAAWpiC,GAAgBpb,EAAQ,YAC1CzK,EAAQ,YAET,IAAIiS,EAAQ,CAACrC,IAAI,IACjB5P,EAAQ6lB,GAAgBpb,EAAOob,IAAKpb,EAAOua,WAAnCa,CAA+C7lB,EAAOiS,GAG9D3R,KAAKu4C,QAAQ51C,MAAM,CAACjD,MAAMA,EAAO4P,IAAIqC,EAAMrC,MAC3C2H,EAAKnN,SAAS9H,UACdiV,EAAKtN,KAAK3H,UAGViV,EAAK9M,OAAOlJ,SAASkJ,EAAOob,IAC7B,GAAC,CAAAlQ,IAAA,aAAA3V,MACD,WACC,IAAM2qB,EAASzc,MAAMC,KAAKC,YAAYxE,OACtC,MAAO,CACN,CAACzF,GAAI,QAASnE,MAAO2qB,EAAO7gB,UAC5B,CAAC3F,GAAI,MAAOnE,MAAO2qB,EAAO5gB,QAC1B,CAAC5F,GAAI,UAAWnE,MAAO2qB,EAAO3gB,SAC9B,CAAC7F,GAAI,OAAQnE,MAAO2qB,EAAO1gB,MAC3B,CAAC9F,GAAI,SAAUnE,MAAO2qB,EAAO,kBAE/B,IAAC,EAxR6BstB,yDAFT,WCWTO,IAAAA,YAASC,GAAA,SAAAD,IAAA,OAAAL,QAAAK,GAAAE,GAAAp4C,KAAAk4C,EAAAlmC,UAAA,CAAA,OAAAqmC,GAAAH,EAAAC,GAAAP,GAAAM,EAAA,CAAA,CAAA7iC,IAAA,cAAA3V,MACrB,WACC,IAAM8vC,EAAaxvC,KAAK2M,KAAK6iC,WAAWS,SACxC,MAAO,CACN,CACCvwC,MAAOkO,MAAMC,KAAKC,YAAYxE,OAAO,sBACrC80B,UAAS,EACTwpB,KAAK,+BACL5mE,OAAA23C,GACE6W,EAAW7lC,MAAI,CAClB,CACCjK,MAAOkO,MAAMC,KAAKC,YAAYxE,OAAO,oBACrC80B,UAAS,EACTwpB,KAAK,+BACLjvB,GACE6W,EAAWxlC,OACb1kB,KAAI,SAAA0qD,GAGL,OAFIA,EAAKtwC,QACRswC,EAAKtwC,MAAQkO,MAAMC,KAAK5b,OAAQ+9C,EAAKnsC,KAC/BmsC,CACR,GACD,GAAC,CAAA36B,IAAA,gBAAA3V,MAED,WAAgB,IAAA8uB,EAAAxuB,KACT2M,EAAO3M,KAAK2M,KACZpN,EAASS,KAAK6nD,iBAAiBxmD,WAE/BqG,EAAO,GACbnI,EAAOra,SAAQ,SAAAK,GACd,IAAM66B,EAAO,CAAC76B,EAAEmlB,WACG,WAAfnlB,EAAEmlB,WAAyC,cAAfnlB,EAAEmlB,UACjC0V,EAAKj7B,KAAKqpC,EAAK+hB,gBAAgBhrD,EAAEma,MAAOna,EAAEmlB,YAE1C0V,EAAKj7B,KAAK,CACTqpC,EAAK+hB,gBAAgBhrD,EAAEma,MAAOna,EAAEmlB,WAChC8jB,EAAK+hB,gBAAgBhrD,EAAEuiE,OAAQviE,EAAEmlB,aAGnC0V,EAAKj7B,KAAKI,EAAEosB,OACZ,IAAK,IAAInxB,EAAE,EAAGA,EAAE4/B,EAAKr/B,OAAQP,IAC5B,GAAgB,KAAZ4/B,EAAK5/B,IAAcotB,MAAM1K,QAAQkd,EAAK5/B,MAA+B,GAAxB4/B,EAAK5/B,GAAGiC,QAAQ,IAChE,OAAO,EAETilB,EAAKviB,KAAKi7B,EACX,IAEAzT,EAAK6D,UAAU,iBAAkB,CAAC9I,GACnC,GAAC,CAAA2N,IAAA,WAAA3V,MAED,SAAS9e,GACR,IAAMi8C,EAAMxtC,WAAWzO,GACvB,OAAIi8C,GAAOj8C,EAAUi8C,EACdj8C,CACR,GAAC,CAAAy0B,IAAA,gBAAA3V,MAED,WAAgB,IAAAyvB,EAAAnvB,KAET8vC,EADO9vC,KAAK2M,KACM6iC,WAAW3vC,IAAIG,KAAKiK,KAAKjE,IAAKhG,KAAKiK,KAAKG,QAE1D1C,EAAO,GAgBb,IAfIooC,GACHA,EAAW5qD,SAAQ,SAAAk7B,GAClB,IAAM7gB,EAAS,CAAA,EACfA,EAAOmL,UAAY0V,EAAK,GACpBxS,MAAM1K,QAAQkd,EAAK,KACtB7gB,EAAOG,MAAQyvB,EAAK44B,aAAa3nC,EAAK,GAAG,GAAI7gB,EAAOmL,WACpDnL,EAAOuoD,OAAS34B,EAAK44B,aAAa3nC,EAAK,GAAG,GAAI7gB,EAAOmL,YAErDnL,EAAOG,MAAQyvB,EAAK44B,aAAa3nC,EAAK,GAAI7gB,EAAOmL,WAElDnL,EAAOoS,MAAQyO,EAAK,GACpB1Y,EAAKviB,KAAKoa,EACX,IAGMmI,EAAK3mB,OAAS,GACpB2mB,EAAKviB,KAAK,CAAA,GAEX6a,KAAK6nD,iBAAiB5mD,SAASyG,EAChC,GAAC,CAAA2N,IAAA,iBAAA3V,MAED,WACC,OAAOM,KAAK83C,QAAQ5nC,UAAUC,gBAAgB,GAAGA,gBAAgB,GAAGD,SACrE,GAAC,CAAAmF,IAAA,eAAA3V,MAED,SAAaA,EAAOgL,GACnB,OAAKA,GAAa1K,KAAKgoD,eAAet9C,KAClC1K,KAAKioD,YAAwB,KAAVvoD,GAA4B,KAAZA,EAAM,GAKtCA,EAAMpe,YAJXoe,EAAQmU,GAAmBnU,GACpBM,KAAKioD,WAAWvoD,GAI1B,GAAC,CAAA2V,IAAA,kBAAA3V,MAED,SAAgBA,EAAOgL,GAClB1K,KAAKgoD,eAAet9C,KACpB1K,KAAKioD,WACJpnE,MAAM6e,GACO,KAAZA,EAAM,KAERA,EADekO,MAAM1tB,KAAKutC,UAAW7f,MAAMC,KAAKC,YAAYV,QAAQK,cAC5DigB,CAAOhuB,GACfA,EAAQ7e,MAAM6e,GAAS,GAAKqU,GAAmBrU,IAIhDA,EAAQwqB,GAAcxqB,GAAS,GAAKA,EAGrCA,EAAQM,KAAKkoD,SAASxoD,EAAO,KAE/B,OAAOA,CACR,GAAC,CAAA2V,IAAA,iBAAA3V,MAED,SAAegL,GACd,MAAgB,SAAbA,GAAqC,YAAbA,GAEpB3O,GAAKiE,KAAK2M,KAAK6iC,WAAWS,SAASjmC,MAAM,SAAAiF,GAAG,OAAIA,EAAIpL,IAAM6G,IAClE,GAAC,CAAA2K,IAAA,UAAA3V,MAED,WACCM,KAAKmoD,gBACLnoD,KAAKyW,OACN,GAAC,CAAApB,IAAA,QAAA3V,MAED,WAAO,IAAAoxB,EAAA9wB,KAEN,GADAA,KAAKiK,KAAOjK,KAAK2M,KAAKsD,iBAClBjQ,KAAKiK,KACR,OAAO,EAER,IAAMqK,EAAOwY,GAAQ9sB,KAAK2M,KAAM3M,KAAKiK,KAAKjE,IAAKhG,KAAKiK,KAAKG,QAE9C,QAARkK,IACFtU,KAAKioD,WAAa99B,GAAkBnqB,KAAK2M,KAAM3M,KAAKiK,KAAKjE,IAAKhG,KAAKiK,KAAKG,SAEzEpK,KAAK83C,QAAQphB,UAAU,OAAQ,OAAOxxC,SAAQ,SAAAynB,GAC7CA,EAAKomB,OAAO,CAAC1M,YAAqB,QAAR/R,EAAiBwc,EAAKi3B,aAAa,MAAS,KACtEp7C,EAAK3K,SACN,IAEAhC,KAAK2M,KAAK+jB,iBAAmB,SAAChiC,EAAI0jB,EAAKxxB,EAAGkB,GAIzC,OAHIgvC,EAAKs3B,aAAexnE,GAAKkB,GAC5BgvC,EAAKs3B,YAAYnnD,SAAS,IAAIrgB,IAExB,GAERof,KAAKgxC,eACN,GAAC,CAAA37B,IAAA,QAAA3V,MAED,WACCM,KAAK2M,KAAK+jB,iBAAmB,YACtB1wB,KAAKioD,WACZjoD,KAAK6nD,iBAAiBjpB,UACvB,GAAC,CAAAvpB,IAAA,UAAA3V,MAED,SAAQgI,GAAK,IAAAypB,EAAAnxB,KACNg2C,EAASh2C,KACf,MAAO,CACN2M,KAAM,OACNmK,QAAS,EACT1L,YAAY,EACZkE,IAAI,wBACJsH,SAAU,CAAC,CACVvL,OAAQ,GACRyL,QAAS,CAAEgG,MAAO,GAClBhO,KAAM,CACL,CACCnC,KAAK,aACL9f,KAAM,QACNuZ,MAAM,IACNigB,YAAazY,MAAMC,KAAKC,YAAYxE,OAAO,qBAC3CgG,IAAK,8BACLG,QAAS,CACRqH,QAAQ,EACR1L,YAAY,EACZkE,IAAK,4BACLlB,KAAM,CACLE,SAAQ,SAACW,GACR,IAAMK,EAAM,wBAAwBL,EAAIK,IACxC,MAAAtuB,eAAAA,OAAsBsuB,EAAG,MAAAtuB,OAAKiuB,EAAIpiB,KAAI,SACtC,EACD6a,KAAMA,KAIT,CACCiF,KAAK,aACLvG,MAAO,IACPvZ,KAAM,YACNw5B,YAAazY,MAAMC,KAAKC,YAAYxE,OAAO,wBAC3C4F,GAAI,CACHM,SAAU,SAAS8jB,GAClB,IAAM1c,EAAW5W,KAAKg5C,cAAcpiC,SAEpC,GAAIo/B,EAAOiS,WAAW,CACrB,GAAIjS,EAAOgS,eAAe10B,GACzB1c,EAASlX,MAAMqzB,OAAO,CAAC1M,YAAa,SAChC,CACJ,IAAM3mB,EAAQs2C,EAAOzF,gBAAgB35B,EAASlX,MAAM2B,WAAYiyB,GAChE1c,EAASlX,MAAMuB,SAAS+0C,EAAO+R,aAAaroD,EAAO4zB,IACnD1c,EAASlX,MAAMqzB,OAAO,CAAC1M,YAAa2vB,EAAO+R,aAAa,OACzD,CACAnxC,EAASlX,MAAMsC,SAChB,CAEY,WAARsxB,GAA6B,cAARA,EACxB1c,EAASkxC,OAAOp5B,OAEhB9X,EAASkxC,OAAOn4C,MAClB,GAEDF,QAAQ,CACP9C,KAAM,sBACNyB,KAAK,CACJ1G,KAAM1H,KAAKqoD,iBAId,CACCv5C,KAAM,CACL,CACCnC,KAAM,OACNuC,GAAI,CACH8zC,QAAS,SAACsF,GACTn3B,EAAKi3B,YAAcE,CACnB,EACDC,OAAQ,SAACD,GACR,IAAI5oD,EAAQ4oD,EAAajnD,WACzB,GAAa,KAAV3B,EAAa,CACf,IACMgL,EADW49C,EAAatP,cAAcpiC,SACjBlM,UAAUrJ,WACrC3B,EAAQyxB,EAAKof,gBAAgB7wC,EAAOgL,GACpC49C,EAAarnD,SAASkwB,EAAK42B,aAAaroD,EAAOgL,GAChD,CACD,GAED7d,KAAM,SAEP,CACC8f,KAAM,OACN9f,KAAM,SACNqiB,GAAI,CACH8zC,QAAS,SAACsF,GACTn3B,EAAKi3B,YAAcE,CACnB,EACDC,OAAQ,SAACD,GACR,IAAI5oD,EAAQ4oD,EAAajnD,WACzB,GAAa,KAAV3B,EAAa,CACf,IACMgL,EADW49C,EAAatP,cAAcpiC,SACjBlM,UAAUrJ,WACrC3B,EAAQyxB,EAAKof,gBAAgB7wC,EAAOgL,GACpC49C,EAAarnD,SAASkwB,EAAK42B,aAAaroD,EAAOgL,GAChD,CACD,GAEDurB,QAAQ,KAIX,CAAEtpB,KAAK,OAAQ2C,IAAI,4BAA6BuB,KAAK,YAAauG,MAAO,SAAAoxC,GACxE,IAAMvxC,EAAOrJ,MAAMgC,GAAG44C,GAAKxP,cACrByP,EAAUt3B,EAAK02B,iBACrBY,EAAQpnD,WAER,IAAM8X,EAAQsvC,EAAQt4C,gBAAgB1tB,QAAQw0B,GAC9CwxC,EAAQvhD,OAAOuhD,EAAQC,aAAavvC,IAEhCsvC,EAAQprC,QAAU,GAAGorC,EAAQvpD,IAAI,CAAA,EACtC,MAGJ,GAAC,CAAAmW,IAAA,QAAA3V,MAED,WAAO,IAxRmBgI,EAwRnBihD,EAAA3oD,KACAqL,EAASuC,MAAMgB,KAAKmI,QAAQ0iB,aAAaxiB,KAC/C,MAAO,CACNtK,KAAM,gBACNgL,KAAM/J,MAAMC,KAAKC,YAAYxE,OAAO,sBACpC+hB,SAAU,SACVjlB,MAAO,IACP0B,MAAM,EACNuD,OAAAA,EACA+C,KAAM,CAAE/C,OAAO,EAAGoB,KAAK,CACtB,CACCpG,OAAQ,GACRyQ,QAAS,CAAE8F,KAAM,IACjB9N,KAAM,CACL,CAAEnC,KAAK,QAASvG,MAAO,IAAK8Q,MAAOtJ,MAAMC,KAAKC,YAAYxE,OAAO0B,SACjE,CAAE2B,KAAK,QAASvG,MAAO,IAAK8Q,MAAOtJ,MAAMC,KAAKC,YAAYxE,OAAOoB,WACjE,CAAEiC,KAAK,QAASuK,MAAOtJ,MAAMC,KAAKC,YAAYxE,OAAO5J,OACrD,CAAEiN,KAAK,OAAQ2C,IAAI,4BAA6BuB,KAAK,kBACpDuG,MAAO,WACN,IAAMqxC,EAAUE,EAAKd,iBACrBY,EAAQpnD,WACRonD,EAAQvpD,IAAI,CAAA,EACb,GAED,CAAEkH,MAAO,EAAIwH,MAAMotB,IAAIC,cAGzB,CACCtuB,KAAM,aACN0iB,UAA4C,EAAjCzhB,MAAMgB,KAAKmI,QAAQsf,YAAkB,EAChDjrB,YAAY,EACZ2D,OAAQ,IACRX,KAAM,CACLzB,KAAM,aACNmK,QAAS,EACT1L,YAAY,EACZqB,KAAM,CAAEzM,KAAK4oD,SA5TQlhD,EA4TkB1H,KAAK2M,KAAKuB,OAAO26C,eA3TtDnhD,EAAKpiB,KAAI,SAAA86B,GAEf,OADAA,EAAKvc,GAAKuc,EAAK9Q,IACR8Q,CACR,WA4TElR,GAAI,CACHmqC,YAAa,WAAA,OAAMsP,EAAKrP,SAAS,EACjCC,cAAe,WAAA,OAAMoP,EAAKlyC,OAAO,GAGpC,IAAC,EA9T6BkhC,yDATT,uBCHTO,YAASC,GAAA,SAAAD,IAAA,OAAAL,QAAAK,GAAAE,GAAAp4C,KAAAk4C,EAAAlmC,UAAA,CAAA,OAAAqmC,GAAAH,EAAAC,GAAAP,GAAAM,EAAA,CAAA,CAAA7iC,IAAA,QAAA3V,MACrB,SAAM44C,EAAKrhC,GACVjX,KAAK2M,KAAK+jB,iBAAmB,WAC5B,OAAO,GAGRzZ,EAAKL,SAAS1L,OAAOjK,SAASjB,KAAK8oD,aACnC7xC,EAAKL,SAASmyC,SAAS9nD,SAAS,QAChCgW,EAAKL,SAASmyC,SAAS58B,eAAend,QACvC,GAAC,CAAAqG,IAAA,QAAA3V,MACD,WACCM,KAAK2M,KAAK+jB,iBAAmB,IAC9B,GAAC,CAAArb,IAAA,QAAA3V,MACD,WAAO,IAAA8uB,EAAAxuB,KACN,MAAO,CACN2M,KAAM,gBACNgL,KAAM/J,MAAMC,KAAKC,YAAYxE,OAAO,gBACpCxB,MAAM,EACNujB,SAAU,SACVjd,KAAK,CACJzB,KAAK,OACLiK,SAAS,CACR,CAAEjK,KAAK,OAAQ9f,KAAK,WAAaw5B,YAAYzY,MAAMC,KAAKC,YAAYxE,OAAO,gBAC3E,CAAEqD,KAAK,gBAAiB9f,KAAK,SAAUyiB,IAAI,gCAG7CJ,GAAG,CACFmqC,YAAa,WAAA,OAAM7qB,EAAK8qB,SAAS,EACjCC,cAAe,WAAA,OAAM/qB,EAAK/X,OAAO,GAGpC,GAAC,CAAApB,IAAA,YAAA3V,MACD,WAKC,IAJA,IAAMiN,EAAO3M,KAAK2M,KACZzB,EAASyB,EAAKsS,QAChBvf,EAAQ,GAEJlf,EAAI,EAAGA,EAAI0qB,EAAOnqB,OAAQP,IAAI,CACrC,IAAMqyB,EAAQ3H,EAAO1qB,GAAGqyB,MACZ,cAATA,GAGHnT,EAAMva,KAAK,CACV0H,KAAMqe,EAAO1qB,GAAGqM,KAChBopC,OAAiB,UAATpjB,EACRsjB,OAAQxpB,EAAKsvB,eAAiB/wB,EAAO1qB,GAAGqM,KAAO,EAAI,GAErD,CAEA,OAAO6S,CACR,GAAC,CAAA2V,IAAA,UAAA3V,MACD,WACC,IAAMH,EAASS,KAAK83C,QAAQ5nC,UAAU2qB,YACtCjtB,MAAMyb,QAAQrpB,KAAK2M,KAAMpN,GACzBS,KAAKyW,OACN,IAAC,EAvD6BkhC,yDAFT,iBCETO,YAASC,GAAA,SAAAD,IAAA,OAAAL,QAAAK,GAAAE,GAAAp4C,KAAAk4C,EAAAlmC,UAAA,CAAA,OAAAqmC,GAAAH,EAAAC,GAAAP,GAAAM,EAAA,CAAA,CAAA7iC,IAAA,QAAA3V,MACrB,SAAM44C,EAAKrhC,GAEV,IADajX,KAAK2M,KAAKsD,gBAEtB,OAAO,EACHjQ,KAAKgpD,aAAa/xC,IACtBA,EAAKhL,QACNgL,EAAKL,SAAS/pB,KAAK+kC,QAEnB5xB,KAAK2M,KAAK+jB,iBAAmB,SAAChiC,EAAI0jB,EAAKxxB,GAEtC,OADAq2B,EAAKL,SAAS1C,IAAIjT,SAAS,IAAIrgB,IACxB,EAET,GAAC,CAAAy0B,IAAA,QAAA3V,MACD,WACCM,KAAK2M,KAAK+jB,iBAAmB,IAC9B,GAAC,CAAArb,IAAA,eAAA3V,MACD,SAAauX,GACZ,IAAMhN,EAAOjK,KAAK2M,KAAKsD,gBACvB,GAAIhG,EAAK,CACR,IAAMvK,EAAQM,KAAK2M,KAAKmG,aAAa7I,EAAKjE,IAAKiE,EAAKG,QACpD,GAAI1K,GAAyB,iBAATA,GAAqD,IAAhCA,EAAMjd,QAAQ,cAAoB,CAC1E,IAAMm3B,EAAQla,EAAMvd,MAAM,KAK1B,OAJA80B,EAAKoa,UAAU,CACdxkC,KAAO+sB,EAAM,IAAM,GACnB1F,IAAM0F,EAAM,IAAM,MAEZ,CACR,CACD,CACA,OAAO,CACR,GAAC,CAAAvE,IAAA,QAAA3V,MACD,WAAO,IAAA8uB,EAAAxuB,KACN,MAAO,CACN2M,KAAM,gBACNgL,KAAM/J,MAAMC,KAAKC,YAAYxE,OAAO,cACpCxB,MAAM,EACNujB,SAAU,SACVjd,KAAK,CACJzB,KAAK,OACLiK,SAAS,CACR,CAAEjK,KAAK,OAAQ9f,KAAK,OAASw5B,YAAYzY,MAAMC,KAAKC,YAAYxE,OAAO,cACvE,CAAEqD,KAAK,OAAQ9f,KAAK,MAAQw5B,YAAYzY,MAAMC,KAAKC,YAAYxE,OAAO,eAGxE4F,GAAG,CACFmqC,YAAa,WAAA,OAAM7qB,EAAK8qB,SAAS,EACjCC,cAAe,WAAA,OAAM/qB,EAAK/X,OAAO,GAGpC,GAAC,CAAApB,IAAA,UAAA3V,MACD,WACC,IAAMuK,EAAOjK,KAAK2M,KAAKsD,gBACjBvI,EAAO1H,KAAK83C,QAAQ5nC,UAAU2qB,YAEhC7wB,EAAO,GACPtC,EAAKwM,MACRxM,EAAK7a,KAAO6a,EAAK7a,MAAQ6a,EAAKwM,IACzB,sBAAsBnhB,KAAK2U,EAAKwM,OACpCxM,EAAKwM,IAAM,UAAYxM,EAAKwM,KAC7BlK,EAAIhpB,eAAAA,OAAkB0mB,EAAKwM,IAAGlzB,OAAAA,OAAM0mB,EAAK7a,KAAQ,OAGlDmT,KAAK2M,KAAK2G,aAAarJ,EAAKjE,IAAKiE,EAAKG,OAAQJ,GAC9ChK,KAAK2M,KAAK3K,UACVhC,KAAKyW,OACN,IAAC,EAlE6BkhC,yDAFT,aCITO,YAASC,GAAA,SAAAD,IAAA,OAAAL,QAAAK,GAAAE,GAAAp4C,KAAAk4C,EAAAlmC,UAAA,CAAA,OAAAqmC,GAAAH,EAAAC,GAAAP,GAAAM,EAAA,CAAA,CAAA7iC,IAAA,QAAA3V,MACrB,SAAM44C,EAAKrhC,GACV,IAAMtD,EAAOsD,EAAKL,SAAS1L,OAAO4E,UAClC6D,EAAKirB,WACLjrB,EAAKhR,MAAO3C,KAAK8oD,UAAU9oD,KAAK2M,OAEhCsK,EAAKoa,UAAU,CACd3pB,KAAK,OACLwD,OAAQlL,KAAK2M,KAAKiM,mBAChB,EACJ,GAAC,CAAAvD,IAAA,QAAA3V,MACD,WAAO,IAGFupD,EAHEz6B,EAAAxuB,KACAsJ,EAASsE,MAAMC,KAAKC,YAAYxE,OAIhCk+B,EAAa55B,MAAMotB,IAAIwM,WAAWliD,KAAI,SAAA8c,GAI3C,MAHc,MAAXA,EAAKyB,KACPolD,EAAY,MACb7mD,EAAK1C,MAAQ4J,EAAO,QAAQlH,EAAKyB,KAAOzB,EAAKyB,GACtCzB,CACR,IAIA,OAFI6mD,IAAWA,EAAYzhB,EAAW,GAAG3jC,IAElC,CACN8I,KAAM,gBACNgL,KAAMrO,EAAO,eACbxB,MAAM,EACNohD,OAAM,EACN9iD,MAAM,IACNilB,SAAU,SACV7U,SAAQ,EACRtH,GAAG,CACFmoC,OAAQ,WACPzpC,MAAMgH,OAAO4Z,EAAK7hB,KAAKo7B,cAAevZ,EAAKqM,aAAa,GACxDgN,GAAYrZ,EAAK7hB,MAAM,EACxB,GAEDyB,KAAK,CACJzB,KAAK,OACL6oB,eAAe,CACdC,WAAY,GAEb7e,SAAS,CACR,CAAEtC,KAAK,UAAWhG,SAAUhF,EAAO,mBACnC,CAAEwF,KAAK,CACN,CAAEnC,KAAK,QAAS9f,KAAK,OAAQw0D,UAAS,EAAMlzC,QAAQ,CACnD,CAAEtK,GAAG,OAAQnE,MAAO4J,EAAe,QACnC,CAAEzF,GAAG,YAAanE,MAAO4J,EAAkB,YACzC4F,GAAG,CACLM,SAAS,SAAS8jB,GACjB,IAAM1c,EAAW5W,KAAKg5C,cAAcpiC,SAC9B1L,EAAS0L,EAAS1L,OAEb,QAARooB,GACF1c,EAASsuB,WAAWjkC,SAAS,GAC7BiK,EAAO6zB,UAGP7zB,EAAO4zB,SACT,IAED,CACChoB,QAAQ,CACPgG,MAAM,IAEPrQ,KAAK,CACJ,CACC5f,KAAM,SACN8f,KAAM,cACNvG,MAAO,IACP+iD,cAAa,EACb15C,QAAS,CACR4+B,WAAW,EACXjgC,KAAK,CACJ1G,KAAK,MAIR,KAGF,CAAE+E,KAAK,CACN,CAACE,KAAK,WAAY9f,KAAK,aAAc6S,MAAM,EAAGw2B,WAAW5sB,EAAO,gBAChE,CAACqD,KAAK,WAAY9f,KAAK,aAAcqpC,WAAW5sB,EAAmB,YACnE,CAACqD,KAAK,WAAY9f,KAAK,WAAYqpC,WAAW5sB,EAAO,cACrD,CAACqD,KAAK,WAAY9f,KAAK,SAAUqpC,WAAW5sB,EAAe,QAC3D,CAACqD,KAAK,WAAY9f,KAAK,WAAYqpC,WAAW5sB,EAAO,oBAGvD,CAAEgL,KAAK,UAAWhG,SAAUhF,EAAO,gBACnC,CAAEqD,KAAK,QAAS9f,KAAK,QAAS6S,MAAMupD,EAAW96C,QAAQq5B,GACvD,CAAElzB,KAAK,UAAWhG,SAAUhF,EAAO,iBACnC,CAAEmD,KAAK,CACN,CAACE,KAAK,QAAS9f,KAAK,MAAO6S,MAAM,OAAQyO,QAAQ,CAChD,CAAEtK,GAAG,OAAQnE,MAAM4J,EAAO,eAC1B,CAAEzF,GAAG,OAAQnE,MAAM4J,EAAO,kBAE3B,CAAEqD,KAAK,QAAS9f,KAAK,OAAQ6S,MAAM,YAAayO,QAAQ,CACvD,CAAEtK,GAAG,WAAYnE,MAAM4J,EAAO,kBAC9B,CAAEzF,GAAG,YAAanE,MAAM4J,EAAO,uBAGjC,CACCwF,KAAK,CACJ,CAAA,EACA,CAAEnC,KAAM,SAAU2C,IAAI,uBAAwBgI,OAAO,MACpD5X,MAAO4J,EAAOiB,OAAQ4M,WAAU,EAChCC,MAAO,WAAA,OAAMoX,EAAK/X,OAAO,GAE1B,CAAE9J,KAAM,SAAUjN,MAAO4J,EAAO,iBAAkB6N,WAAU,EAC3DC,MAAO,WAAA,OAAMoX,EAAK46B,cAAc,GAEjC,CAAEz8C,KAAM,SAAUjN,MAAO4J,EAAO2B,MAAOqM,OAAO,QAASH,WAAU,EAChEC,MAAO,WAAA,OAAMoX,EAAK8qB,SAAS,OAOlC,GAAC,CAAAjkC,IAAA,YAAA3V,MACD,WACC,IAAMgI,EAAO1H,KAAK83C,QAAQ5nC,UAAU2qB,UAAU,CAACuD,UAAS,IAExD,OADA12B,EAAK2D,OAAS3D,EAAK2D,OAAO,EAAE,CAAA,EACrB3D,CACR,GAAC,CAAA2N,IAAA,eAAA3V,MACD,WACCM,KAAKyW,QACLzW,KAAK2M,KAAKq8B,kBAAiB,EAC5B,GAAC,CAAA3zB,IAAA,YAAA3V,MACD,SAAUiN,GACT,OAAOA,EAAKsS,QACV35B,KAAI,SAAAmlB,GAAK,MAAK,CAAC/K,MAAO+K,EAAM5d,KAAMgX,GAAI4G,EAAM5d,KAAK,IACjDoF,QAAO,SAAAwY,GAAK,OAAIokB,GAAUliB,EAAMlC,EAAM5G,MACzC,GAAC,CAAAwR,IAAA,UAAA3V,MACD,WACC,IAAMgI,EAAO1H,KAAK83C,QAAQ5nC,UAAU2qB,UAAU,CAACuD,UAAS,IACxD12B,EAAK2D,OAAS3D,EAAK2D,OAAO,EAAE,CAAA,EAC5BrL,KAAKyW,QACL7I,MAAM3C,MAAMjL,KAAK2M,KAAMjF,EACxB,IAAC,EA9I6BiwC,yDAFT,UCATO,YAASC,GAAA,SAAAD,IAAA,OAAAL,QAAAK,GAAAE,GAAAp4C,KAAAk4C,EAAAlmC,UAAA,CAAA,OAAAqmC,GAAAH,EAAAC,GAAAP,GAAAM,EAAA,CAAA,CAAA7iC,IAAA,OAAA3V,MACrB,SAAK+V,GAAO,IAAA+Y,EAAAxuB,KAKX,GAHAA,KAAKiK,KAAOwL,EAAOxL,KAAOwL,EAAOxL,KAAOjK,KAAK2M,KAAKsD,iBAG7CjQ,KAAKiK,MAERjK,KAAK2M,KAAKm2B,aAAa9iC,KAAKiK,KAAKjE,IAAKhG,KAAKiK,KAAKG,UAAYqL,EAAO+9B,WAElExzC,KAAK2M,KAAK6D,UAAU,sBAAuB,CAACxQ,KAAKiK,KAAKjE,IAAKhG,KAAKiK,KAAKG,QAASqL,EAAO+9B,WACvF,OAAO,EAGRxzC,KAAK2M,KAAKumC,SAASC,eAAiB,CAACC,YAAa39B,EAAO+9B,SAAUvpC,KAAMjK,KAAKiK,MAE1EjK,KAAK83C,UACR93C,KAAK83C,QAAUlqC,MAAMa,GAAGzO,KAAKiO,SAC7BjO,KAAK2M,KAAK6iB,iBAAiBrqC,KAAK6a,KAAK83C,SACrC93C,KAAK2M,KAAKumC,SAASK,aAAevzC,KAAK83C,QACvC93C,KAAK83C,QAAQpnC,YAAY,UAAU,WAAA,OAAI8d,EAAKupB,WAC5C/3C,KAAK2M,KAAK+D,YAAY,iBAAiB,WAAA,OAAI8d,EAAKspB,QAAQnoC,WAGzD,IAAMsH,EAAOjX,KAAK83C,QAAQ5nC,UAEpBxE,EAAO1L,KAAK2M,KAAKiD,GAAG,SAAStJ,QAAQtG,KAAKiK,KAAKjE,IAAKhG,KAAKiK,KAAKG,QAC9DgW,EAAO1U,EAAO,CAAC1F,IAAKhG,KAAKiK,KAAKjE,IAAKoE,OAAgB,EAARsB,EAAK,GAAKA,EAAK,GAAG,GAAM1L,KAAKiK,KAE9E2D,MAAMkL,OAAM,WACX0V,EAAKspB,QAAQppB,KAAKF,EAAK7hB,KAAKiD,GAAG,SAASyjB,YAAYjT,IACpDoO,EAAK66B,aACN,KACuC,IAAnCrpD,KAAKg4C,MAAMh4C,KAAK83C,QAAS7gC,IAC5BjX,KAAKyW,OACP,GAAC,CAAApB,IAAA,QAAA3V,MACD,WACCM,KAAKspD,SAAWtpD,KAAK83C,QAAQphB,UAAU,CAAC/pB,KAAK,aAC7C3M,KAAKsO,SAAWtO,KAAK83C,QAAQphB,UAAU,CAAC/pB,KAAK,YAC9C,GAAC,CAAA0I,IAAA,QAAA3V,MACD,WAAO,IAAAyvB,EAAAnvB,KACN,MAAO,CACN2M,KAAM,QACN2C,IAAI,kBACJwnB,SAAS,IACTC,UAAU,IACV0vB,SAAS,QACT7vB,QAAO,EACP1nB,GAAG,CACFq6C,aAAa,WACZp6B,EAAK2oB,QAAQnoC,OACbwf,EAAK2oB,QAAQppB,OACVS,EAAKm6B,SAASz6B,aAChBM,EAAKm6B,SAAS13B,OAChB,GAEDxjB,KAAK,CACJo7C,SAAQ,EACR9uC,MAAM,CACL,CACC/N,KAAM,WACN2C,IAAI,sBACJlE,YAAY,EACZ2D,OAAO,OACPmrB,QAAQ,CACPuvB,oBAAsB,WAChBt6B,EAAKxiB,KAAKuB,OAAOwqB,UAAYvJ,EAAKxiB,KAAKm2B,aAAa3T,EAAKllB,KAAKjE,IAAKmpB,EAAKllB,KAAKG,SACjF+kB,EAAKu6B,UAAUv6B,EAAKxiB,KAAKumC,SAASrzC,IAAIsvB,EAAKllB,KAAKjE,IAAKmpB,EAAKllB,KAAKG,QACjE,IAGF,CACCuC,KAAM,WACNuC,GAAG,CACFM,SAAS,WACR2f,EAAKw6B,YACL,EACD3G,QAAQ,WACP7zB,EAAKxiB,KAAKumC,SAASC,eAAiB,CAACC,YAAY,EAAMnpC,KAAMklB,EAAKllB,KAClE,EACDs+C,OAAO,WACNp5B,EAAKxiB,KAAKumC,SAASC,eAAiB,CAAA,EACpChkB,EAAK2oB,QAAQnoC,MACd,MAMN,GAAC,CAAA0F,IAAA,cAAA3V,MACD,WACC,IAAM4L,EAAUtL,KAAK2M,KAAKumC,SAASrzC,IAAIG,KAAKiK,KAAKjE,IAAKhG,KAAKiK,KAAKG,QAC7DpK,KAAK2M,KAAKumC,SAASC,eAAeC,WACpCpzC,KAAK0pD,UAAUp+C,GAEftL,KAAK4pD,aAAat+C,EACpB,GAAC,CAAA+J,IAAA,eAAA3V,MACD,SAAasK,GACZhK,KAAKsO,SAASogB,OACd1uB,KAAKsO,SAAS2J,QAAQjO,EACvB,GAAC,CAAAqL,IAAA,YAAA3V,MACD,SAAUsK,GAAK,IAAA8mB,EAAA9wB,KACdA,KAAK2M,KAAKilC,aAAc,EACxB5xC,KAAK2M,KAAKiD,GAAG,SAASZ,OAAOhP,KAAKiK,KAAKjE,IAAKhG,KAAKiK,KAAKG,eAC/CpK,KAAK2M,KAAKilC,YACjBhkC,MAAMkL,OAAM,WACXgY,EAAK+4B,eAAe7/C,GACpB8mB,EAAKw4B,SAAS56B,OACdoC,EAAKw4B,SAAS13B,OACf,GACD,GAAC,CAAAvc,IAAA,aAAA3V,MACD,WACCM,KAAK2M,KAAKumC,SAASh0C,IAAIc,KAAKiK,KAAKjE,IAAKhG,KAAKiK,KAAKG,OAAQpK,KAAKspD,SAASjoD,WACvE,GAAC,CAAAgU,IAAA,iBAAA3V,MACD,SAAesK,GACdhK,KAAKspD,SAASp0B,aACdl1B,KAAKspD,SAASroD,SAAS+I,GAAM,IAC7BhK,KAAKspD,SAASn0B,cACf,IAAC,EAtH6BwiB,yDAFT,gBCCTO,YAASC,GAAA,SAAAD,IAAA,OAAAL,QAAAK,GAAAE,GAAAp4C,KAAAk4C,EAAAlmC,UAAA,CAAA,OAAAqmC,GAAAH,EAAAC,GAAAP,GAAAM,EAAA,CAAA,CAAA7iC,IAAA,OAAA3V,MACrB,SAAK+V,GACJzV,KAAKiS,MAAQwD,EAAOxD,MACpBjS,KAAKq5B,OAAS5jB,EAAO/V,MACrBi4C,GAAOnmC,UAAUooC,KAAK/0C,MAAM7E,KAAMgS,UACnC,GAAC,CAAAqD,IAAA,QAAA3V,MACD,WACC,IAAMyhB,EAAMnhB,KAAK2M,KAAKsD,gBACtB,IAAIkR,EACH,OAAO,EACRnhB,KAAK2M,KAAK+jB,iBAAmB,WAC5B,OAAO,GAGR,IAAM9Z,EAAW5W,KAAK83C,QAAQ5nC,UAAU0G,SACxC5W,KAAKsU,KAAOsC,EAAe,KAC3B5W,KAAKoC,KAAOwU,EAAe,KAE3B5W,KAAK83C,QAAQgS,UAAU35C,gBAAgB,GAAG8H,QAAQjY,KAAKq5B,QACvD,IAEI35B,EAFE4V,EAAOtV,KAAK2M,KAAKiD,GAAG,SAIzBlQ,EADgB,OAAdM,KAAKiS,MACCqD,EAAK0C,QAAQmJ,EAAInb,KAAKlF,SAAWwU,EAAKpH,OAAOgH,UAE7CI,EAAK0rB,gBAAgB7f,EAAI/W,QAAQhE,OAASkP,EAAKpH,OAAO+G,YAE/DvV,GAAgBM,KAAK2M,KAAK4U,MAE1BvhB,KAAKsU,KAAKy1C,UAAU,GAAGrqD,MAAQkO,MAAMC,KAAKC,YAAYxE,OAAqB,OAAdtJ,KAAKiS,MAAiB,SAAW,SAC9FjS,KAAKsU,KAAKrT,SAAS,GACnBjB,KAAKsU,KAAKtS,UAEVhC,KAAKoC,KAAKnB,SAAS3gB,KAAKyG,KAAK2Y,IAC7BM,KAAKoC,KAAKwvB,OACX,GAAC,CAAAvc,IAAA,QAAA3V,MACD,WACCM,KAAK2M,KAAK+jB,iBAAmB,IAC9B,GAAC,CAAArb,IAAA,UAAA3V,MACD,WACC,IAAM4U,EAAOtU,KAAKsU,KAAKjT,WAEnBe,EAAO,OACA,GAARkS,EACFlS,EAA4B,EAArBpC,KAAKoC,KAAKf,WACF,GAARiT,IACPlS,EAAOpC,KAAK2M,KAAKiD,GAAG,SAAS1B,OAAqB,OAAdlO,KAAKiS,MAAiB,YAAc,gBAExD,OAAdjS,KAAKiS,MACPjS,KAAK2M,KAAKwiC,aAAa,KAAM/sC,GAE7BpC,KAAK2M,KAAKm1B,eAAe,KAAM1/B,GAEhCpC,KAAKyW,OACN,GAAC,CAAApB,IAAA,QAAA3V,MACD,WAAO,IAAA8uB,EAAAxuB,KACAqqB,EAASzc,MAAMC,KAAKC,YAAYxE,OACtC,MAAO,CACNqD,KAAM,gBACN0e,SAAS,SACTjlB,MAAO,IACP0B,MAAM,EACNsG,KAAK,CACJ0I,QAAQ,EACRhI,KAAK,CACJ,CACCnC,KAAK,QAAS9f,KAAK,OAAQw0D,UAAS,EAAM2I,aAAa,GACvD96C,GAAG,CACFM,SAAU,SAAA3L,GACA,GAANA,EACF2qB,EAAKpsB,KAAK28B,SAEVvQ,EAAKpsB,KAAK08B,SACZ,GAED3wB,QAAQ,CACP,CAACtK,GAAG,EAAGnE,MAAO,IACd,CAACmE,GAAG,EAAGnE,MAAO2qB,EAAO,gBACrB,CAACxmB,GAAG,EAAGnE,MAAO2qB,EAAO,mBAGvB,CAAC5d,KAAM,CACN,CAACE,KAAK,OAAQ9f,KAAM,OAAQuZ,MAAM,SAIrC8I,GAAG,CACFmqC,YAAa,WAAA,OAAM7qB,EAAK8qB,SAAS,EACjCC,cAAe,WAAA,OAAM/qB,EAAK/X,OAAO,GAGpC,IAAC,EA3F6BkhC,yDAFT,WCQTO,YAASC,GAAA,SAAAD,IAAA,OAAAL,QAAAK,GAAAE,GAAAp4C,KAAAk4C,EAAAlmC,UAAA,CAAA,OAAAqmC,GAAAH,EAAAC,GAAAP,GAAAM,EAAA,CAAA,CAAA7iC,IAAA,QAAA3V,MACrB,SAAM44C,EAAKrhC,GAAK,IAAAuX,EAAAxuB,KACTiK,EAAOjK,KAAKiK,KAAOjK,KAAK2M,KAAKsD,gBACnC,IAAIhG,EACH,OAAO,EAERjK,KAAKgpD,aAAa/xC,EAAMhN,GAExBjK,KAAK2M,KAAK+jB,iBAAmB,SAAChiC,EAAI0jB,EAAKxxB,EAAGkB,GACzC,IAAMwyB,EAAOka,EAAKspB,QAAQ5nC,UAAU0G,SAAStC,KAAKjT,WAGlD,OAFImtB,EAAK45B,aAAe55B,EAAK45B,YAAYv5B,aACxCL,EAAK45B,YAAYnnD,SAAS,KAAa,SAARqT,EAAkB1zB,EAAIA,EAAE,IAAIkB,KACrD,EAET,GAAC,CAAAuzB,IAAA,QAAA3V,MACD,WACCM,KAAK2M,KAAK+jB,iBAAmB,KAC7B1wB,KAAK83C,QAAQ5nC,UAAUjE,OACxB,GAAC,CAAAoJ,IAAA,eAAA3V,MACD,SAAauX,EAAMhN,GAClB,IAAI+lC,EAAOhwC,KAAK2M,KAAKR,WAAWtM,IAAIoK,EAAKjE,IAAKiE,EAAKG,QAC/C4lC,IACHA,EAAO,IACRpiC,MAAMgH,OAAOo7B,EAAM,CAAE17B,KAAM,MAAO21C,YAAa,gBAC/ChzC,EAAKoa,UAAU2e,GACfhwC,KAAKkqD,YAAYjzC,EAAKL,SAASlX,OAC/BM,KAAKkqD,YAAYjzC,EAAKL,SAASkxC,OAChC,GAAC,CAAAzyC,IAAA,oBAAA3V,MACD,WACC,IAAMuwC,EAAWjwC,KAAK2M,KAAKR,WAAW8jC,SACtC,IAAI,IAAIpjD,KAAQojD,EACfA,EAASpjD,GAAMvH,KAAI,SAAA0qD,GAGlB,OAFIA,EAAKtwC,QACRswC,EAAKtwC,MAAQkO,MAAMC,KAAK5b,OAAQ+9C,EAAKnsC,KAC/BmsC,CACR,IACDhwC,KAAKiwC,SAAWA,CACjB,GAAC,CAAA56B,IAAA,mBAAA3V,MACD,SAAiBA,EAAO0xC,GACvB,IAAMn6B,EAAOjX,KAAK83C,QAAQ5nC,UACpB0G,EAAWK,EAAKL,SAEhBtC,EAAOsC,EAAStC,KAAKjT,WACrBqJ,EAAYkM,EAASlM,UAE3B,OAAO4J,GACN,IAAK,MACJ2C,EAAKgoB,UAAU,OACf,MACD,IAAK,OACL,IAAK,OACL,IAAK,aACJhoB,EAAKgoB,UAAU,SACfhoB,EAAKgoB,UAAU,aAAa,GAC5B,MACD,IAAK,SACJhoB,EAAKgoB,UAAU,SACfhoB,EAAKgoB,UAAU,aAAa,GAC5BhoB,EAAKgoB,UAAU,UAAU,GACzB,MACD,IAAK,QACJhoB,EAAKgoB,UAAU,SAIjB,IAAMkrB,EAAiBz/C,EAAUrJ,WACjC,GAAGqJ,EAAUmkB,YAAY,CACxBnkB,EAAUoF,UAAU8uB,WACpB,IAAMl3B,EAAIixB,GAAO34B,KAAKiwC,SAAS37B,IAE3BvY,GAAK2L,GAAM,SAAAuH,GAAG,OAAIA,EAAIpL,IAAMsmD,CAAc,KAC7Cz/C,EAAUzJ,WAEXyJ,EAAUoF,UAAUnN,MAAM+E,GAEL,WAAlByiD,GAAiD,cAAlBA,EACjCvzC,EAASkxC,OAAOp5B,OAEhB9X,EAASkxC,OAAOn4C,MAClB,MAECiH,EAASkxC,OAAOn4C,OAEjB,IAAM0a,EAASzc,MAAMC,KAAKC,YAAYxE,OAChCwf,EAAe,CACpB9e,KAAMqgB,EAAO,gCAAkC,YAC/CymB,WAAYzmB,EAAO,kCAAoC,IACvD1gB,KAAM0gB,EAAO,gCAAkCF,GAAkBnqB,KAAK2M,KAAM3M,KAAKiK,KAAKjE,IAAKhG,KAAKiK,KAAKG,OAAtD+f,CAA8D,IAAIjqC,MACjHupB,OAAQ4gB,EAAO,kCAAoC,IACnD1f,MAAO0f,EAAO,iCAAmC,UAGlDzT,EAASlX,MAAMwO,OAAOmY,YAAczP,EAASkxC,OAAO55C,OAAOmY,YAAcyC,EAAaxU,GAEvE,QAAZ88B,GACFx6B,EAASlX,MAAMuB,SAASjB,KAAKoqD,eAAexzC,EAASlX,MAAM2B,WAAY,SACvEuV,EAASkxC,OAAO7mD,SAASjB,KAAKoqD,eAAexzC,EAASkxC,OAAOzmD,WAAY,UAEzD,QAAT3B,IACPM,KAAKkqD,YAAYtzC,EAASlX,OAC1BM,KAAKkqD,YAAYtzC,EAASkxC,SAG3BlxC,EAASlX,MAAMsC,UACf4U,EAASkxC,OAAO9lD,SACjB,GAAC,CAAAqT,IAAA,iBAAA3V,MACD,SAAeA,EAAO4U,GAClB1G,MAAM6J,YAAY/X,KACpBA,EAAQ,IAET,IAAMouB,EAAWjtC,MAAM6e,GACvB,GAAGouB,GAAwB,KAAZpuB,EAAM,GACpB,OAAOA,EAGG,SADX4U,EAAOA,GAAQtU,KAAK83C,QAAQ5nC,UAAU0G,SAAStC,KAAKjT,YAKlD3B,EAHEouB,EAGgB,MADlBpuB,EADekO,MAAM1tB,KAAKutC,UAAW7f,MAAMC,KAAKC,YAAYV,QAAQK,cAC5DigB,CAAOhuB,KACS7e,MAAM6e,GAAS,GAAKqU,GAAmBrU,GAGvDwqB,GAAcxqB,GAAS,GAAKA,EAErB,UAAR4U,GAA4B,cAARA,IAAyBwZ,IACrDpuB,EAAQ,IAET,OAAOA,CACR,GAAC,CAAA2V,IAAA,cAAA3V,MACD,SAAYA,EAAO4U,GAClB,MAAW,QAARA,GAA4B,KAAV5U,GAA4B,KAAZA,EAAM,IAC1CA,EAAQmU,GAAmBnU,GACpByqB,GAAkBnqB,KAAK2M,KAAM3M,KAAKiK,KAAKjE,IAAKhG,KAAKiK,KAAKG,OAAtD+f,CAA8DzqB,IAE/DA,EAAMpe,UACd,GAAC,CAAA+zB,IAAA,cAAA3V,MACD,SAAYiN,GACX,IAAIjN,EAAQiN,EAAKtL,WACjB,GAAa,KAAV3B,EAAa,CACf,IACM4U,EADW3H,EAAKqsC,cAAcpiC,SACdtC,KAAKjT,WAC3B3B,EAAQM,KAAKoqD,eAAe1qD,EAAO4U,GACnC3H,EAAK1L,SAASjB,KAAKqqD,YAAY3qD,EAAO4U,GACvC,CACD,GAAC,CAAAe,IAAA,QAAA3V,MACD,WAAO,IAAAyvB,EAAAnvB,KACNA,KAAKsqD,oBACL,IAAMjgC,EAASzc,MAAMC,KAAKC,YAAYxE,OAEtC,MAAO,CACNqD,KAAM,gBACNvG,MAAO,IACPuR,KAAM0S,EAAO,uBACbviB,MAAM,EACNujB,SAAU,SACVjd,KAAK,CACJzB,KAAK,OACL6oB,eAAgB,CACfC,WAAY,KAEblN,MAAM,CACL7oB,MAAOkO,MAAM2a,MAAMw6B,WACnB+E,OAAQl6C,MAAM2a,MAAMw6B,WACpBr4C,UAAWkD,MAAM2a,MAAMw6B,WACvBkH,YAAar8C,MAAM2a,MAAMw6B,YAE1BnsC,SAAS,CACR,CAAEjK,KAAK,aAAcuK,MAAMmT,EAAO,mBAAoBx9B,KAAK,OAC1DshB,QAAQ,CACP,CAACtK,GAAG,MAAOnE,MAAM2qB,EAAO,mBACxB,CAACxmB,GAAG,OAAQnE,MAAM2qB,EAAO,oBACzB,CAACxmB,GAAG,SAAUnE,MAAM2qB,EAAO,sBAC3B,CAACxmB,GAAG,OAAQnE,MAAM2qB,EAAO,oBACzB,CAACxmB,GAAG,aAAcnE,MAAM2qB,EAAO,2BAC/B,CAACxmB,GAAG,QAASnE,MAAM2qB,EAAO,sBAE3Bnb,GAAI,CACHM,SAAU,SAAC9P,EAAO0xC,GAAQ,OAAKjiB,EAAKo7B,iBAAiB7qD,EAAO0xC,EAAS,IAGvE,CAAEzkC,KAAK,WAAYuK,MAAMmT,EAAO,sBAAuBgU,MAAM,SAAUxxC,KAAK,WAC5E,CAAE8f,KAAK,WAAYuK,MAAMmT,EAAO,2BAA4BgU,MAAM,QAASxxC,KAAK,eAChF,CACCqqB,MAAMmT,EAAkB,UACxBmgC,UAAU,EACVnsB,MAAM,YACN1xB,KAAK,aACL9f,KAAM,YACNqiB,GAAI,CACHM,SAAU,SAAS8jB,GAClB,IAAM1c,EAAW5W,KAAKg5C,cAAcpiC,SACxB,WAAR0c,GAA6B,cAARA,EACxB1c,EAASkxC,OAAOp5B,OAEhB9X,EAASkxC,OAAOn4C,OACjBiH,EAASlM,UAAU83C,UACpB,GAED/yC,QAAQ,CACP9C,KAAM,sBACNyB,KAAK,CACJ1G,KAAM,MAIT,CACC22B,MAAM,QACNvvB,KAAM,CACL,CACCoI,MAAMmT,EAAc,MACpBmgC,UAAU,EACV79C,KAAM,OACNuC,GAAI,CACH8zC,QAAS,SAAAsF,GAAY,OAAIn5B,EAAKi5B,YAAcE,CAAY,EACxDC,OAAQ,SAAAD,GACPn5B,EAAK+6B,YAAY5B,GACjBA,EAAa9F,UACd,GAED31D,KAAM,SAEP,CACC8f,KAAM,OACN69C,UAAU,EACV39D,KAAM,SACNuZ,MAAO,IACP8I,GAAI,CACH8zC,QAAS,SAAAsF,GAAY,OAAIn5B,EAAKi5B,YAAcE,CAAY,EACxDC,OAAQ,SAAAD,GACPn5B,EAAK+6B,YAAY5B,GACjBA,EAAa9F,UACd,GAEDvsB,QAAQ,KAIX,CACCppC,KAAM,eACN8f,KAAM,WACNuK,MAAOmT,EAAO,6BAEf,CAAE1d,KAAK,aAAc0xB,MAAM,QAASnnB,MAAMmT,EAAO,2BAA4Bx9B,KAAK,cACjFshB,QAAQ,CACP,CAACtK,GAAG,cAAenE,MAAM2qB,EAAO,iCAChC,CAACxmB,GAAG,UAAWnE,MAAM2qB,EAAO,6BAC5B,CAACxmB,GAAG,OAAQnE,MAAM2qB,EAAO,2BAE1Bnb,GAAG,CACFM,SAAU,WACTxP,KAAKwiD,UACN,IAGF,CACC31D,KAAM,aACN8f,KAAM,OACN0xB,MAAM,QACNnnB,MAAOmT,EAAO,2BAEf,CACCx9B,KAAM,eACN8f,KAAM,WACN0xB,MAAM,QACNnnB,MAAOmT,EAAO,+BAIjBnb,GAAG,CACFmqC,YAAa,WAAA,OAAMlqB,EAAKmqB,SAAS,EACjCC,cAAe,WAAA,OAAMpqB,EAAK1Y,OAAO,GAGpC,GAAC,CAAApB,IAAA,UAAA3V,MACD,WACC,IAAMuX,EAAOjX,KAAK83C,QAAQ5nC,UAC1B,GAAG+G,EAAKurC,WAAW,CAClB,IAAM96C,EAAOuP,EAAK4jB,UAAU,CAAC5E,QAAO,IACpCvuB,EAAKhI,MAAQM,KAAKoqD,eAAe1iD,EAAKhI,OACnCgI,EAAKogD,SACPpgD,EAAKhI,MAAQ,CAACgI,EAAKhI,MAAOM,KAAKoqD,eAAe1iD,EAAKogD,gBAC5CpgD,EAAKogD,QAGb,IAAMn7C,EAAO3M,KAAK2M,KAClBsF,GAAMnS,KAAI,WAAA,OACT6M,EAAKoV,kBAAiB,SAAA9X,GACL,OAAbvC,EAAK4M,MAAkB5M,EAAKoqC,aAG9BnlC,EAAKR,WAAWjN,IAAI+K,EAAKjE,IAAKiE,EAAKG,OAAQ1C,GAF3CiF,EAAKR,WAAWjF,OAAO+C,EAAKjE,IAAKiE,EAAKG,OAGxC,GAAE,IAGHuC,EAAK3K,UACLhC,KAAKyW,OACN,CACD,IAAC,EAzS6BkhC,ICMzB8S,GAAQ,CAAEC,GAAKC,GAAKC,GAAKC,GAAKC,GAAKvE,GAAKhhC,GAAKwlC,GAAKn6D,GAAKo6D,GAAKC,GAAKC,GAAKC,qDDRtD,yBEmItB,SAASC,GAAgBz+C,EAAMjF,EAAMmL,GAGpCsnC,IAAY,WACXxtC,EAAK+jB,iBAAmB,KACxB/jB,EAAKhK,MAAM+E,GAERmL,IACCA,EAAMpI,OACRkC,EAAKqmB,UAAUngB,EAAMpI,OACtBkC,EAAKgU,OAAOgR,SAAS9e,EAAMhtB,EAAGgtB,EAAMzwB,GAEtC,GACD,2CAjJO,SAAcuqB,GACpBA,EAAK+D,YAAY,aAAa,SAAC+E,EAAQtD,EAAOC,GAC7C,GAAiB,OAAbqD,EAAO5R,IAA4B,OAAb4R,EAAO5R,GAAY,CAC5C,IAAIga,EAAOlR,EAAKgU,OAAO3C,iBACpBH,GAAU1L,GAASC,IACrBD,EAAQ0L,EAAK1L,MACbC,EAAMyL,EAAKzL,KAGRD,GAASC,IACO,UAAhBqD,EAAOxD,OAAkC,OAAbwD,EAAO5R,IACrCyV,GAAgB3M,EAAKuB,OAAOwyB,aAAetuB,EAAIhI,OAAS+H,EAAM/H,QAAU,GAEzE6H,GAAMnS,KAAI,YA2Bd,SAAiB2V,EAAQtD,EAAOC,EAAKzF,GACpC,IAAIqC,EAASrC,EAAKgU,OAAO3C,gBACnBnL,EAAQlG,EAAKgU,OAAO2X,iBAEpB4d,EAAmB,OAAbzgC,EAAO5R,GACb4+C,EAAU91C,EAAKlH,UAAU,CAACyF,OAAQgrC,EAAKqI,SAAQ,IAC/CjO,EAAU1iC,MAAMvG,KAAKo7C,GACrB/6C,EAAO,CAAChI,MAAM+iD,EAAS3zB,SAASwhB,GAElC4F,GACHtoC,MAAMgH,OAAOlN,EAAI2jD,GAAAA,GACf51C,CAAAA,EAAAA,EAAOxD,MAAQE,EAAMsD,EAAOxD,QACtB,QAAA,CACNoL,MAAOjL,EAAIpM,IAAMmM,EAAMnM,IAAM,KAIhC,IAAMiJ,EAAMinC,EAAMn6C,GAAKu0C,GAAS,SAAA7lC,GAAK,OAAIA,EAAM5d,MAAQ8f,EAAKiM,oBAAkBjC,QAAU25B,EAElFnM,EAAW,GACX7nB,EAAQrN,EAAIqN,MAClB,IAAK,IAAI97B,KAAK87B,EAAM,CACnB,IAAM5Q,EAAOw4B,GAAW5nB,EAAM97B,GAAIi1B,EAAQtD,EAAOC,EAAKzF,EAAMsC,EAAIvH,KAAMy8B,IAClEz4B,EAAK,IAAM,GAAKA,EAAK,IAAM,IAC9B4Q,EAAM1X,OAAOpkB,EAAG,EAClB,CAEA,IAAM+e,EAgFP,SAA0BkW,EAAQtD,EAAOC,GACxC,IAAIvlB,EAAO4oB,EAAOxD,MACjB6I,EAAiB,OAAXrF,EAAO5R,GAAU,EAAc,OAAX4R,EAAO5R,IAAW,EAAE,EAE5CiX,IAEU,OAARjuB,IACHiuB,GAAOA,GAAO1I,EAAIpM,IAAMmM,EAAMnM,MACnB,UAARnZ,IACHiuB,GAAOA,GAAO1I,EAAIhI,OAAS+H,EAAM/H,UAEnC,MAAO,CAACvd,KAAMA,EAAMiuB,IAAKA,EAC1B,CA5FgBwwC,CAAgB71C,EAAQtD,EAAOC,GAC9Cub,IAAW,WACVhhB,EAAK6D,UAAU,WAAY,CAAC,qBAAsB,CACjD3jB,KAAM0S,EAAO1S,KACbiuB,IAAKvb,EAAOub,IACZpT,KAAMuH,EACNkD,MAAOA,IAER,GAACxF,GAEkB,UAAhB8I,EAAOxD,MACNikC,EA4FN,SAAoBzgC,EAAQtD,EAAOC,EAAKzF,GACvC,IAAI0Q,EAAQjL,EAAIhI,OAAS+H,EAAM/H,OAAS,EAExC,GAAIuC,EAAKuB,OAAOwyB,cAAgBrjB,EAAM,CACrC,GAAIlL,EAAM/H,QAAUgI,EAAIhI,OACvB,OAEDgI,EAAIhI,SACJiT,GACD,CAEA1Q,EAAK0S,OAAOna,aAAaiN,EAAM/H,OAAO,EAAGiT,GACzC1Q,EAAKuB,OAAOwyB,aAAerjB,EAE3B1Q,EAAK6D,UAAU,oBAAqB,CAACiF,EAAO5R,GAAIsO,EAAM/H,OAAQgI,EAAIhI,OAAQuC,EAAKiM,kBAChF,CA1GG2yC,CAAW91C,EAAQtD,EAAOC,EAAKzF,GAkFlC,SAAoB8I,EAAQtD,EAAOC,EAAKzF,GACvC,IAAI0Q,EAAQjL,EAAIhI,OAAS+H,EAAM/H,OAAS,EAExCuC,EAAK0S,OAAOpa,UAAUkN,EAAM/H,OAAO,EAAGiT,GACtC1Q,EAAKuB,OAAOwyB,aAAerjB,EAE3B1Q,EAAK6D,UAAU,oBAAqB,CAACiF,EAAO5R,GAAIsO,EAAM/H,OAAQgI,EAAIhI,OAAQuC,EAAKiM,kBAChF,CAvFG4yC,CAAW/1C,EAAQtD,EAAOC,EAAKzF,GAER,OAAhB8I,EAAOxD,QACXikC,EAgHN,SAAiBzgC,EAAQtD,EAAOC,EAAKzF,GACpC,IAAI0Q,EAAQjL,EAAIpM,IAAMmM,EAAMnM,IAAM,EAElC,GAAI2G,EAAKuB,OAAOkF,WAAaiK,EAAM,CAClC,GAAIlL,EAAMnM,KAAOoM,EAAIpM,IACpB,OAEDoM,EAAIpM,MACJqX,GACD,CAEA1Q,EAAK0S,OAAOra,UAAUmN,EAAMnM,IAAI,EAAGqX,GACnC1Q,EAAKuB,OAAOkF,UAAYiK,EAExB1Q,EAAK6D,UAAU,iBAAkB,CAACiF,EAAO5R,GAAIsO,EAAMnM,IAAKoM,EAAIpM,KAC7D,CA9HGylD,CAAQh2C,EAAQtD,EAAOC,EAAKzF,GAsG/B,SAAiB8I,EAAQtD,EAAOC,EAAKzF,GACpC,IAAM0Q,EAAQjL,EAAIpM,IAAMmM,EAAMnM,IAAM,EAEpC2G,EAAK0S,OAAO1a,OAAOwN,EAAMnM,IAAI,EAAGqX,GAChC1Q,EAAKuB,OAAOkF,UAAYiK,EAExB1Q,EAAK6D,UAAU,iBAAkB,CAACiF,EAAO5R,GAAIsO,EAAMnM,IAAKoM,EAAIpM,KAC7D,CA3GG0lD,CAAQj2C,EAAQtD,EAAOC,EAAKzF,IAI9B,IAAMg/C,EAAch/C,EAAKlH,YACzBwJ,EAAIvH,KAAOikD,EAAYjkD,KACvBuH,EAAI4K,OAAS8xC,EAAY9xC,OAEzBsqB,EAASj/C,SAAQ,SAAAk7B,GAChBnR,EAAIvH,KAAKviB,KAAKi7B,EACf,IAEAzT,EAAK6D,UAAU,WAAY,CAAC,cAAe9I,IAE3CimB,IAAW,WACVy9B,GAAgBz+C,EAAMsC,EAAK4D,EAC3B,GAAClG,GAEEqC,IACHA,EAMF,SAAuBA,EAAQrC,GAC9B,IAAMuB,EAASvB,EAAKuB,OAEdzB,EAAOyB,EAAOkF,SACdtE,EAAOZ,EAAOwyB,YAEC,EAAjB1xB,EAAOmD,MAAMnM,IAAQyG,IAAMuC,EAAOmD,MAAMnM,IAAMyG,GAC/B,EAAfuC,EAAOoD,IAAIpM,IAAQyG,IAAMuC,EAAOoD,IAAIpM,IAAMyG,GACtB,EAApBuC,EAAOmD,MAAM/H,OAAW0E,IAAME,EAAOmD,MAAM/H,OAAS0E,GAClC,EAAlBE,EAAOoD,IAAIhI,OAAW0E,IAAME,EAAOoD,IAAIhI,OAAS0E,GAEpD,GACCnC,EAAKi/C,aAAa58C,EAAOmD,MAAMnM,MAC/B2G,EAAKi/C,aAAa58C,EAAOoD,IAAIpM,MAC7B2G,EAAKk/C,gBAAgB78C,EAAOmD,MAAM/H,SAClCuC,EAAKk/C,gBAAgB78C,EAAOoD,IAAIhI,QAEhC,OAAO4E,CACT,CAxBW88C,CAAc98C,EAAQrC,GAC3BqC,GACHrC,EAAKiD,GAAG,SAASk/B,cAAc9/B,EAAOmD,MAAOnD,EAAOoD,KAEvD,CAhGK25C,CAAQt2C,EAAQtD,EAAOC,EAAKzF,EAC7B,IAEF,CACD,IAEAA,EAAK+D,YAAY,UAAU,SAAC+E,EAAQzP,EAAKoE,EAAQ1K,EAAO48C,EAAKv5B,GAC5D,GAAc,eAAVtN,EAAwB,CAC3B,IAAM5C,EAAQlG,EAAKgU,OAAO2X,iBAGvBvV,EACEu5B,EAGH3vC,EAAK0S,OAAOrZ,EAAM,SAAW,cAAcA,GAAOoE,GAAQ,EAAG2Y,EAAM1F,OAFnE1Q,EAAK0S,OAAOrZ,EAAM,YAAc,iBAAiBA,GAAOoE,GAAQ,EAAG2Y,EAAM1F,OAM1ExK,EAAMpI,MAAQkC,EAAKiM,iBAEpBwyC,GAAgBz+C,EAAMjN,EAAOmT,EAC9B,CACD,GACD,ICmCA,SAAS3O,GAAMyI,GACdA,EAAKgU,OAAOqrC,WAAa,EAC1B,CAsBO,SAASC,GAAat/C,EAAMhC,EAAO/d,GACzC+f,EAAKgU,OAAO8zB,WACZl6B,GAAU5P,EAAOgC,GAAM,SAASA,EAAM1C,GAClC0C,EAAKqhB,cAAc/jB,EAAKjE,IAAKiE,EAAKG,OAAQxd,IAC5C+f,EAAKuhB,cAAcjkB,EAAKjE,IAAKiE,EAAKG,OAAQ,KAAMxd,EAClD,GACD,CAqCO,SAASs/D,GAAcv/C,EAAMoW,EAAO/c,EAAK0T,EAAK6qB,GACpD,IAAMtY,EAASlJ,EAAMopC,SAErBx/C,EAAKuhB,cAAcloB,EAAK0T,EAAKuS,GACd,IAAXsY,GACH53B,EAAKuhB,cAAcnL,EAAM/c,IAAK+c,EAAMrJ,IAAK,CAAA,EAC3C,KCjJI0yC,GAAWC,GAAU3sC,GAAQ6kB,GAAQ+nB,GAAeC,GAAc3vB,yDDD/D,SAAcjwB,GACpB,IAAME,EAAQF,EAAKgU,OAEnBhU,EAAK+D,YAAY,WAAW,WAAA,OAAMxM,GAAMyI,MACxCzI,GAAMyI,GAENE,EAAM6D,YAAY,qBAAqB,SAAS7M,GAC/C,IAAI6V,EAAM1Z,KAAKghC,gBAAgBn9B,EAAGuG,QAClC,GAAIpK,KAAKgsD,WAAWnoD,EAAGmC,KAAK,CAC3B,IAAI4tC,EAAK5zC,KAAKgsD,WAAWnoD,EAAGmC,KAAKnC,EAAGuG,QAChCwpC,IACHhmC,MAAMgH,OAAO8E,EAAKk6B,GAAI,GACtBhmC,MAAMgH,OAAO8E,EAAK,CAAC1T,IAAK2G,EAAK6/C,OAAO3oD,EAAGmC,OAAO,GAC1C4tC,EAAGzlC,UACmB,iBAAdylC,EAAGzlC,QACbuL,EAAIvL,QAAU61C,GAAar3C,EAAMinC,EAAGzlC,QAAS,CAAEg2C,QAAO,EAAMh8B,OAAM,EAAMo7B,MAAM3P,EAAG2P,QACzE31C,MAAM1K,QAAQ0wC,EAAGzlC,WACzBuL,EAAIvL,QAAU61C,GAAar3C,EAAMinC,EAAGzlC,QAAS,CAAEo1C,MAAM3P,EAAG2P,SAEtD7pC,EAAIo2B,aACNp2B,EAAIo2B,WAAWlR,WACfllB,EAAIo2B,WAAWntC,MAAM+W,EAAIvL,WAI7B,CACD,IAGAtB,EAAM6D,YAAY,oBAAoB,SAASmC,EAAOoZ,EAAQwgC,GAC7D,IAAKA,GAAUxgC,EAAOzM,UAAU,CAC/B,IAAM9f,EAAQusB,EAAO5qB,WACjB8I,EAAS8hB,EAAOzM,UAAU9f,GAE9BuS,GAAMnS,KAAI,WACT6M,EAAK2G,aAAa2Y,EAAOjmB,IAAKimB,EAAO7hB,OAAQ1K,GACzCyK,EACHob,GAAc5Y,EAAMsf,EAAOjmB,IAAKimB,EAAO7hB,OAAQmb,GAAoBpb,IAEnEob,GAAiB5Y,EAAMsf,EAAOjmB,IAAKimB,EAAO7hB,OAC5C,IAEA,IAAMH,EAAO0C,EAAKsD,gBACdhG,GAAQA,EAAKjE,KAAOimB,EAAOjmB,KAAOiE,EAAKG,QAAU6hB,EAAO7hB,SAE3DD,EAASob,GADTpb,EAASA,GAAU,UACa,SAAWA,EAC3CwC,EAAK6D,UAAU,YAAa,CAAC,CAAC3M,GAAG,iBAAkBhX,KAAK,SAAU6S,MAAMyK,KAE1E,CACD,IAEA0C,EAAM6D,YAAY,mBAAmB,SAASmC,EAAOoZ,GACpD,IAAMvS,EAAM1Z,KAAKghC,gBAAgB/U,EAAO7hB,QAExCsP,EAAIuS,OAAS,cACNvS,EAAIhG,aAAcgG,EAAIgzC,cAAehzC,EAAI1T,GACjD,IAEA2G,EAAK+D,YAAY,UAAU,SAAC4D,EAAMtO,EAAKoE,EAAQ1K,GAClC,YAAR4U,GACH3H,EAAKuhB,cAAcloB,EAAKoE,EAAQ1K,EAClC,IAEAiN,EAAK+D,YAAY,YAAY,SAAC+E,EAAQ9zB,GACvB,YAAV8zB,EACA9zB,EAAEiL,MAAQ+f,EAAKiM,kBACjBorB,GAAWr3B,EAAMhrB,EAAEqkB,IAAKrkB,EAAEyoB,OAAQ,YAAazoB,EAAEmtC,UAEhC,sBAAVrZ,GA2CX,SAAwB9I,EAAM9f,EAAMiuB,EAAKpT,EAAMyK,GAC9C,IAAM2tB,EAAUp4B,EAAKo4B,QAErB,GAAIhlB,EAEH,IAAI,IAAIt6B,EAAEs/C,EAAQ/+C,OAAO,EAAGP,GAAG,EAAGA,IAAI,CACrC,IAAAmsE,EAAA15C,GAA0B6sB,EAAQt/C,GAAE,GAA/BwlB,EAAG2mD,EAAA,GAACviD,EAAMuiD,EAAA,GAAC1gC,EAAM0gC,EAAA,GACtB,GAAY,OAAR9/D,GAAiBmZ,GAAOmM,EAAMnM,KAAe,UAARnZ,GAAoBud,GAAU+H,EAAM/H,OAAO,CAEnF,GAAY,OAARvd,EAAc,CACjB,GAAImZ,EAAMmM,EAAMnM,IAAM8U,EAAI,CACzBglB,EAAQl7B,OAAOpkB,EAAE,GACjB,QACA,CACAs/C,EAAQt/C,GAAG,GAAS,EAAJwlB,EAAQ8U,CAC1B,MACK,GAAY,UAARjuB,EAAiB,CACzB,GAAIud,EAAS+H,EAAM/H,OAAS0Q,EAAI,CAC/BglB,EAAQl7B,OAAOpkB,EAAG,GAClB,QACD,CACCs/C,EAAQt/C,GAAG,GAAY,EAAP4pB,EAAW0Q,CAC7B,CACAmR,EAAO9d,QAAU0M,GAAYoR,EAAO9d,QAASthB,EAAMiuB,EAAK3I,EACzD,CACD,CAEF,CArEGkwB,CAAe11B,EAAMhrB,EAAEkL,KAAMlL,EAAEm5B,IAAKn5B,EAAE+lB,KAAM/lB,EAAEwwB,MAChD,GACD,WAkCO,SAAkBxF,EAAM3G,EAAKoE,GACnC,IAAM6hB,EAAStf,EAAKgU,OAAOqrC,WAC3B,OAAO//B,EAAOjmB,MAAUimB,EAAOjmB,GAAKoE,EACrC,OAnBO,SAAcuC,EAAKjF,GACzB,IAAMo4B,EAAUp4B,EAAKo4B,QAErB,GAAIA,EACH,IAAK,IAAIt/C,EAAE,EAAGA,EAAEs/C,EAAQ/+C,OAAQP,IAC/BmsB,EAAKuhB,cAAcrpB,MAAM8H,EAAMmzB,EAAQt/C,GAC1C,6BAlBO,SAAmBmsB,EAAKjF,GAC9B,IAAI1B,EAAKoE,EACRwiD,EAAajgD,EAAKgU,OAAOqrC,WACzBlsB,EAAU,GAEX,IAAK95B,KAAO4mD,EACX,IAAKxiD,KAAUwiD,EAAW5mD,GACzB85B,EAAQ36C,KAAK,CAAC6gB,EAAKoE,EAAQwiD,EAAW5mD,GAAKoE,KAE7C1C,EAAKo4B,QAAUA,CAChB,ICAA,SAAS+sB,GAAalgD,EAAMmgD,EAAQC,EAAkBjvB,GACrD,IAAMxoB,EAAO3I,EAAKiD,GAAG,SACrB8P,GAASpK,EAAK0I,gBAEdouC,GAwOD,SAAwBz/C,GACvB,IAAMjF,EAAO,GAEPq7B,EAAKp2B,EAAKoS,OAAO3V,iBACvB25B,EAAG17B,KACFsF,EAAK0S,OAAO7a,OAAOkb,GAAOvN,MAAMnM,IAAI,EAAG0Z,GAAOvN,MAAM/H,OAAO,GAC3DuC,EAAK0S,OAAO7a,OAAOkb,GAAOtN,IAAIpM,IAAI,EAAG0Z,GAAOtN,IAAIhI,OAAO,IAGxD,IAAI,IAAIrqB,EAAI2/B,GAAOvN,MAAMnM,IAAKjmB,GAAK2/B,GAAOtN,IAAIpM,IAAKjmB,IAAI,CAEtD,IADA,IAAMimB,EAAM,GACJ/kB,EAAIy+B,GAAOvN,MAAM/H,OAAQnpB,GAAKy+B,GAAOtN,IAAIhI,OAAQnpB,IAAI,CAC5D,IAAIwhB,EAAOkK,EAAKmG,aAAa/yB,EAAGkB,GAChCwhB,EAAOA,GAAmB,KAAXA,EAAK,IAAaA,EAAK1hB,OAAS,EAAI0hB,EAAO,KAE1D,IAAMwM,EAAM,CAAEjF,KAAM2C,EAAKmG,aAAa/yB,EAAGkB,GAAG,GAAQwhB,KAAAA,EAAMkP,MAAOhF,EAAKkS,SAAS9+B,EAAGkB,IAE5EypB,EAAYiC,EAAK6iC,WAAW3vC,IAAI9f,EAAGkB,GACnCgrC,EAAStf,EAAKqhB,cAAcjuC,EAAGkB,GAC/BgR,EAAS0a,EAAK80B,cAAc1hD,EAAGkB,GAC/ByqB,EAAOiB,EAAKgU,OAAOra,QAAQvmB,EAAGkB,GAC9BkrB,EAAaQ,EAAKR,WAAWtM,IAAI9f,EAAGkB,GAE1C,GAAIgrC,GAAUh6B,GAAUyY,GAAagB,GAAQS,EAAW,CACvD,IAAM4W,EAAQ,CAAE/c,IAAIjmB,EAAG25B,IAAIz4B,GACvBypB,IAAWqY,EAAMrY,UAAYA,GAC7BuhB,IAAQlJ,EAAMopC,SAAWlgC,GACzBh6B,IAAQ8wB,EAAM9wB,OAASA,GACvByZ,IAAMqX,EAAMrX,KAAOA,GACpBS,IAAY4W,EAAM5W,WAAaA,GAClC8C,EAAI8T,MAAQA,CACb,CAEA/c,EAAI7gB,KAAK8pB,EACV,CACAvH,EAAKviB,KAAK6gB,EACX,CAEA,OAAO0B,CACR,CA/QaslD,CAAergD,GAC3BiwB,GAAU,CAAEhwC,KAAM+f,EAAKiM,iBAAkBjM,KAAAA,GAEtCmxB,GAAQivB,GAAoBA,EAAiBE,WAC/CF,EAAiBE,UAAUH,EAAOptD,OAEnC2sD,GAAWS,EAAOptD,MAEf6kC,IAAkD,IAAxCthD,OAAO4b,KAAKyW,EAAKkvC,YAAYzjE,SACzCurE,GAwQF,SAA0BvpC,EAAO2d,GAOhC,IANA,IAAIikB,EAAU1hE,OAAO4b,KAAKkkB,GACtBmqC,EAAW5sE,KAAKsJ,IAAIib,MAAM,KAAM8/C,GAChCzW,EAAS5tD,KAAKsT,IAAIiR,MAAM,KAAM8/C,GAC9BwI,EAAWzsB,EACX0sB,EAAS,EAEJ5sE,EAAI0sE,EAAU1sE,GAAK0tD,EAAQ1tD,IACnC,GAAGuiC,EAAMviC,GAAG,CACX,IAAIgsB,EAAUvpB,OAAO4b,KAAKkkB,EAAMviC,IAChC2sE,EAAW7sE,KAAKsJ,IAAIujE,EAAU7sE,KAAKsJ,IAAIib,MAAM,KAAM2H,IACnD4gD,EAAS9sE,KAAKsT,IAAIw5D,EAAQ9sE,KAAKsT,IAAIiR,MAAM,KAAM2H,GAChD,CAGD,OAAGkT,GAAOvN,MAAMnM,KAAOknD,GAAYxtC,GAAOtN,IAAIpM,KAAOkoC,GAAUxuB,GAAOvN,MAAM/H,QAAU+iD,GAAYztC,GAAOtN,IAAIhI,QAAUgjD,CAIxH,CA3RkBC,CAAiB/3C,EAAKkvC,WAAY73C,EAAKuB,OAAOwyB,aAChE,CA6BA,SAAS4sB,GAAiB5tD,EAAOwO,GAChC,IAAM/D,EAASojD,GAAyBr/C,GAKxC,OAHGN,MAAM2a,MAAMC,SAAS9oB,IAAUyK,IACjCzK,EAAQkO,MAAMppB,OAAOgpE,SAASrjD,EAAtByD,CAA8BlO,IAEhCA,CACR,CAEA,SAAS+tD,GAAa9gD,EAAM2I,EAAMtL,GAC7BA,IACHA,EAAO,IAER,IAAM0jD,EAAUp4C,EAAK0I,gBACrB,GAAK0vC,EAAL,CACA,IAAMv7C,EAAQu7C,EAAQv7C,MAChBC,EAAMs7C,EAAQt7C,IAEdsZ,EAAY1hB,IAASqiD,GAEvB3kD,EAAOgkB,EAAY0gC,GAAYx+C,MAAM+/C,IAAIhrD,MAAMqH,EAAMsL,EAAKpH,OAAO0/C,WACjEliC,IACHhkB,EAsRF,SAA0BA,EAAMwG,GAC/B,IAAM/D,EAASojD,GAAyBr/C,GAExC,GAAG/D,EACF,IAAI,IAAI3pB,EAAI,EAAGA,EAAIknB,EAAK3mB,OAAQP,IAC/B,IAAI,IAAIgG,EAAI,EAAGA,EAAIkhB,EAAKlnB,GAAGO,OAAQyF,IAAI,CACtC,IAAMqnE,EAASjgD,MAAMppB,OAAOme,MAAM+E,EAAKlnB,GAAGgG,GAAI2jB,GAC3CyD,MAAM2a,MAAMC,SAASqlC,KACvBnmD,EAAKlnB,GAAGgG,GAAKqnE,EACf,CAEF,OAAOnmD,CACR,CAlSSomD,CAAiBpmD,EAAMiF,EAAKuB,SAEpC,IAAMs2B,EAAY,CAAE3gC,GAAG,OAAQuG,OAAO,EAAGpE,IAAK,EAAG4G,IAAI23B,IAC/CwpB,EAAWnxB,IAAWA,GAAQjwB,MAAQA,GAEzC4/C,IAAiB7gC,IACnB6Y,GAAS,EACT+nB,GAAgB,GAGjB,IAAM7J,EAAU91C,EAAKlH,YAErBkoB,IAAW,WACV,IAAMqgC,EAAetmD,EAAK3mB,OACpBktE,EAAevmD,EAAK,GAAG3mB,OAEvBsyB,EAAWjB,EAAIhI,OAAS+H,EAAM/H,OAAS,EACzCgJ,EAAWhB,EAAIpM,IAAMmM,EAAMnM,IAAM,EAIrC,GAoNF,SAAsB2G,EAAMwF,EAAOiB,EAAU1L,GAC5C,IACIwmD,EADAC,EAASh8C,EAAM/H,OAAS1C,EAAK,GAAG3mB,OAAS,EAG7C,GAAGqyB,EAAW1L,EAAK3mB,OAAO,CAGzB,IAFA,IAAIqtE,EAAgB,EACdC,EAAWj7C,EAAW1L,EAAK3mB,OACxBhB,EAAI,EAAGA,EAAIsuE,EAAUtuE,IAC7B,IAAI,IAAIkB,EAAI,EAAGA,EAAIymB,EAAK3nB,GAAGgB,OAAQE,IAClC,GAAGymB,EAAK3nB,GAAGkB,GAAG8hC,OAASrb,EAAK3nB,GAAGkB,GAAG8hC,MAAMrX,KAAK,CAC5C,IAAMA,EAAOhE,EAAK3nB,GAAGkB,GAAG8hC,MAAMrX,KAC9B,GAAGA,EAAK,IAAMgU,GAAOvN,MAAMnM,IAAMjmB,GAAK2rB,EAAK,IAAMgU,GAAOvN,MAAM/H,OAASnpB,EAAE,CACxE,IAAM8hC,EAAQhjC,EAAI2rB,EAAK,GAAK2iD,EACzBtrC,EAAQ,IACVqrC,EAAgB9tE,KAAKsT,IAAImvB,EAAOqrC,GAClC,CACD,CAGFF,EAAS/7C,EAAMnM,IAAMoN,EAAWg7C,EAAgB,OAGhDF,EAAS/7C,EAAMnM,IAAM0B,EAAK3mB,OAAS,EAEpC,GAAGmtE,EAASvhD,EAAKuB,OAAOkF,UAAY+6C,EAASxhD,EAAKuB,OAAOwyB,YAAY,CACpE,IAAIjrB,EAAS,CAAE5R,GAAG,OACdqqD,EAASvhD,EAAKuB,OAAOkF,WACxBqC,EAAOxD,MAAQ,MACftF,EAAK6D,UAAU,YAAa,CAC3BiF,EACA,CAAEzP,IAAK2G,EAAKuB,OAAOkF,SAAW,GAC9B,CAAEpN,IAAKkoD,MAGLC,EAASxhD,EAAKuB,OAAOwyB,cACxBjrB,EAAOxD,MAAQ,SACftF,EAAK6D,UAAU,YAAa,CAC3BiF,EACA,CAAErL,OAAQuC,EAAKuB,OAAOwyB,YAAc,GACpC,CAAEt2B,OAAQ+jD,KAGb,CACD,CAjQEG,CAAa3hD,EAAMwF,EAAOiB,EAAU1L,GAEjCgkB,EAAU,CAIZ,GAHA8Y,EAAUp6B,OAAS+H,EAAM/H,OAASsV,GAAOvN,MAAM/H,OAC/Co6B,EAAUx+B,IAAMmM,EAAMnM,IAAM0Z,GAAOvN,MAAMnM,IAErCsmD,GAAc,CACjB,IAAMnrC,EAAM7L,EAAK0I,gBACjBrR,EAAKo5C,gBACLzwC,EAAKw5B,cAAc3tB,EAAIhP,MAAOgP,EAAI/O,IACnC,CAEA,IAAM0L,EAASymB,IAAW+nB,MAAkBl5C,EAAW46C,GAAgB36C,EAAW46C,GAAqB,EAAJ,EAEnG,GAAmB,cAAhB1B,GACF,GAAc,GAAVhoB,GACAwpB,GACFphD,EAAKoS,OAAO3V,iBAAiBtB,KAC5B6E,EAAK0S,OAAO7a,OAAO2N,EAAMnM,IAAI,EAAGmM,EAAM/H,OAAO,GAC7CuC,EAAKoS,OAAO9V,WAAW3H,UAAUiG,YAGhCq1B,KAAYA,GAAQjwB,KAAKsxC,aAC3BrhB,GAAQjwB,KAAK4hD,WAAU,WACtB,IAAK,IAAIvoD,EAAM0Z,GAAOvN,MAAMnM,IAAKA,GAAO0Z,GAAOtN,IAAIpM,IAAKA,IACvD,IAAK,IAAIoE,EAASsV,GAAOvN,MAAM/H,OAAQA,GAAUsV,GAAOtN,IAAIhI,OAAQA,IACnEwyB,GAAQjwB,KAAK2G,aAAatN,EAAKoE,EAAQ,KAAMwyB,GAAQhwC,MACrDgwC,GAAQjwB,KAAK0T,SAASra,EAAKoE,EAAQ,KAAMwyB,GAAQhwC,KAGpD,SAEG,GAAGmhE,EAAS,CAChB,IAAIv6C,EACD+4C,KACF/4C,EAAU,SAAC5yB,EAAGkB,GACb,OAAOyqE,IACN,IAAK,WACJ,OAAO3+C,MAAMgH,OAAOh0B,EAAG,CAAE8e,MAAO5d,EAAEmmB,SAAWnmB,EAAE4d,QAAS,GACzD,IAAK,SACJ,OAAOkO,MAAMgH,OAAOh0B,EAAG,CAAC+wB,MAAO7vB,EAAE6vB,MAAOxH,OAAQroB,EAAEqoB,SAAU,GAC7D,IAAK,SACJ,OAAOyD,MAAMgH,OAAOh0B,EAAG,CAAC8e,MAAO5d,EAAE4d,QAAS,GAC3C,IAAK,aACJ,OAAOkO,MAAMgH,OAAOh0B,EAAG,CAACurB,WAAYrqB,EAAEqqB,aAAc,MAIxDQ,EAAKoS,OAAO3V,iBAAiB5B,MAC5BmF,EAAK0S,OAAO7a,OAAO2N,EAAMnM,IAAI,EAAGmM,EAAM/H,OAAO,GAC7CuC,EAAK0S,OAAO7a,OACXlkB,KAAKsT,IAAIue,EAAMnM,IAAM0Z,GAAOtN,IAAIpM,IAAM0Z,GAAOvN,MAAMnM,IAAKoM,EAAIpM,KAAK,EACjE1lB,KAAKsT,IAAIue,EAAM/H,OAASsV,GAAOtN,IAAIhI,OAASsV,GAAOvN,MAAM/H,OAAQgI,EAAIhI,QAAQ,GAE9EuC,EAAKoS,OAAO9V,WAAW3H,UAAUiG,WACjCuW,EACAtK,EAEF,CAGD,GAAY,GAARsK,EACH,IAAI,IAAI/9B,EAAI,EAAGyuE,EAAK,EAAGzuE,EAAIO,KAAKsT,IAAIwf,EAAU46C,GAAejuE,IAAKyuE,IAAK,CACnEA,GAAM9mD,EAAK3mB,SAAQytE,EAAK,GAC3B,IAAK,IAAIvtE,EAAI,EAAGwtE,EAAK,EAAGxtE,EAAIX,KAAKsT,IAAIyf,EAAU46C,GAAehtE,IAAKwtE,IAAK,CACpEA,GAAM/mD,EAAK,GAAG3mB,SAAQ0tE,EAAK,GAE9B,IAAMC,EAAW,CAChB7qD,GAAI,OACJuG,OAAQo6B,EAAUp6B,OAAS9pB,KAAKC,MAAMU,EAAEgtE,GAAgBA,EACxDjoD,IAAKw+B,EAAUx+B,IAAM1lB,KAAKC,MAAMR,EAAEiuE,GAAgBA,EAClDphD,IAAK23B,IAGNoqB,GAAkBhiD,EAAMwF,EAAMnM,IAAMjmB,EAAGoyB,EAAM/H,OAASnpB,EAAGymB,EAAK8mD,GAAIC,GAAKC,EACxE,CACD,MAEAp5C,EAAKmvB,SACJtyB,EAAMnM,IACNmM,EAAM/H,OACN4jD,EACA,MACA,SAAStuD,EAAOsG,EAAK0T,EAAKk1C,EAASC,GAClC,GAAInnD,EAAKknD,IAAYlnD,EAAKknD,GAAS7tE,OAAS8tE,EAAS,CACpD,IAAMC,EAAQpnD,EAAKknD,GAASC,GAC5BF,GAAkBhiD,EAAM3G,EAAK0T,EAAKo1C,EAAOtqB,EAC1C,CACA,IACD,GAGW,GAAVD,KAEFA,GAAS,EACT+nB,IAAgB,EAEjB,MAEA,IAAK,IAAIvsE,EAAI,EAAGyuE,EAAK,EAAGzuE,EAAIO,KAAKsT,IAAIwf,EAAU46C,GAAejuE,IAAKyuE,IAAM,CACpEA,GAAM9mD,EAAK3mB,SAAQytE,EAAK,GAC5B,IAAK,IAAIvtE,EAAI,EAAGwtE,EAAK,EAAGxtE,EAAIX,KAAKsT,IAAIyf,EAAU46C,GAAehtE,IAAKwtE,IAC9DA,GAAM/mD,EAAK,GAAG3mB,SAAQ0tE,EAAK,GAC/B9hD,EAAK2G,aAAanB,EAAMnM,IAAMjmB,EAAGoyB,EAAM/H,OAASnpB,EAAGymB,EAAK8mD,GAAIC,GAE9D,CACD,GAAE9hD,GAEHA,EAAK6D,UAAU,WAAY,CAAC,QAAS,CACpC9Q,MAAO+iD,EACP3zB,SAAUniB,EAAKlH,eAEhBkH,EAAK6D,UAAU,YAAa,CAAC,CAAC3M,GAAG,oBACjC8I,EAAK3K,SA5IS,CA6If,CAEA,SAAS2sD,GAAkBhiD,EAAM3G,EAAK0T,EAAKo1C,EAAOtqB,GACjD,GAAqB,WAAjBhtB,GAAOs3C,GAAmB,CAC7B,IAAMf,EAAWnxB,IAAWA,GAAQjwB,MAAQA,EAC5C,KAAKohD,GAAYnxB,GAAQhwC,MAAQ+f,EAAKiM,oBACjCm1C,GAAcxB,IAAgC,UAAhBA,IAA4C,YAAhBA,IAC7D5/C,EAAK2G,aACJtN,EACA0T,EACAo1C,EAAMrsD,MAAwB,UAAhB8pD,GAA2B5/C,EAAKoS,OAAO9V,WAAWnF,cAAcgrD,EAAMrsD,KAAM+hC,EAAUx+B,IAAKw+B,EAAUp6B,QAAU0kD,EAAM9kD,MAGlI8kD,EAAMn9C,OAASm9C,EAAMn9C,MAAMwN,SAAWotC,IAAgC,UAAhBA,KAA0B,CAClF,IAAM56C,EAAQhF,EAAK8S,SAASqvC,EAAMn9C,MAAMwN,OACxCxS,EAAK0T,SAASra,EAAK0T,EAAK/H,EACzB,CAGD,IAAMoR,EAAQ+rC,EAAM/rC,MACjBA,KACCA,EAAMrY,WAAe6hD,IAAgC,cAAhBA,IACvC3b,GAAejkC,EAAMoW,EAAO/c,EAAK0T,EAAK6qB,IACpCxhB,EAAMopC,WAAaI,IACrBL,GAAcv/C,EAAMoW,EAAO/c,EAAK0T,EAAK6qB,IACnCxhB,EAAM9wB,QAAUq6D,IAClB9G,GAAY74C,EAAMoW,EAAO/c,EAAK0T,EAAK6qB,EAAQC,IACzCzhB,EAAM5W,YAAgBogD,IAAgC,cAAhBA,IACxCxa,GAAgBplC,EAAMoW,EAAO/c,EAAK0T,EAAK6qB,KAGrCgoB,IACHjoB,GAAU33B,EAAMoW,EAAO/c,EAAK0T,EAAK6qB,GAAQC,GAE1C73B,EAAKuU,SAASlb,EAAK0T,EAAK/M,EAAKiM,iBAC9B,CACD,CA2HA,SAAS20C,GAAyBr/C,GACjC,IAAI/D,EAAS+D,EAAO6gD,sBAcpB,OAZI5kD,GAAU+D,EAAO8gD,4BACpB7kD,EAAS,CACR2Z,iBAAkB5V,EAAO8gD,0BACzBC,iBAAiB,IAGhB9kD,GACFyD,MAAMgH,OAAOzK,EAAQ,CACpB+kD,UAAWthD,MAAMC,KAAKqhD,UACtBC,cAAevhD,MAAMC,KAAKshD,gBAGrBhlD,CACR,2CAzcO,SAAcwC,GACpBA,EAAK+D,YAAY,iBAAiB,SAAC7jB,EAAM0rB,GACrCqkB,IAAWA,GAAQhwC,MAAQC,GAAQ+vC,GAAQjwB,MAAQA,IACrDiwB,GAAQhwC,KAAO2rB,EACjB,IAEA5L,EAAK+D,YAAY,iBAAiB,SAAC7jB,GAC/B+vC,IAAWA,GAAQhwC,MAAQC,GAAQ+vC,GAAQjwB,MAAQA,IACrDiwB,GAAU,KACZ,IAEA,IAAMwyB,EAAYziD,EAAKuB,OAAOkhD,UACxBrC,EAAmBsC,UAAUD,UAEnC,IAAiB,IAAdA,EAAH,CAGAxhD,MAAM0hD,WAAWlzB,OACjB,IAAM0wB,EAASn6B,SAASnB,cAAc,qBAIhClc,EAAO3I,EAAKiD,GAAG,SAErB0F,EAAK5E,YAAY,kBAAkB,WAAA,OA4EpC,SAAsB/D,EAAMmgD,GAC3B,GAAGngD,EAAK6L,cAAe,OACvB,IAAMlD,EAAO3I,EAAKiD,GAAG,SAClB0F,EAAKrF,iBACPrC,MAAMkL,OAAM,WAIX,IAHA,IAAMpR,EAAO,GAEPgY,EAASpK,EAAK0I,gBACZj+B,EAAI2/B,EAAOvN,MAAMnM,IAAKjmB,GAAK2/B,EAAOtN,IAAIpM,IAAKjmB,IAAI,CAEtD,IADA,IAAMimB,EAAM,GACJ/kB,EAAIy+B,EAAOvN,MAAM/H,OAAQnpB,GAAKy+B,EAAOtN,IAAIhI,OAAQnpB,IACxD+kB,EAAI7gB,KAAKmoE,GAAiB3gD,EAAKmG,aAAa/yB,EAAGkB,GAAG,GAAQ0rB,EAAKuB,SAChExG,EAAKviB,KAAK6gB,EACX,CAEA,IAAMqmD,EAAWz+C,MAAM+/C,IAAI4B,UAAU7nD,EAAM4N,EAAKpH,OAAO0/C,WAEnDt4C,EAAKw+B,YACRgZ,EAAOptD,MAAQ2sD,GAEfS,EAAOl7B,QACPhkB,MAAM0hD,WAAWxvD,IAAIusD,IAEtBz+C,MAAM+iB,UAAUC,SAAStb,EAC1B,GACF,CArG0Ck6C,CAAa7iD,EAAMmgD,MAE5Dx3C,EAAK5E,YAAY,cAAc,SAAChlB,EAAM7L,GANzB,KAOR6L,GANQ,KAMSA,IAAmB7L,EAAE4vE,UAAW5vE,EAAE6vE,UAAYp6C,EAAKrF,kBACvEs0B,GAAyB,GAPd,KAOD74C,GACVmhE,GAAalgD,EAAMmgD,GAErB,IAEAngD,EAAK+D,YAAY,aAAa,SAAA+E,IACK,GAA/BA,EAAO5R,GAAGphB,QAAQ,UACpB8pE,GAAe92C,EAAO5R,GAAG1hB,MAAM,KAAK,GAEjC4qE,GAAoBA,EAAiB4C,SACvC5C,EAAiB4C,WACf3zB,MAAK,SAAAhyB,GACL4D,MAAM0hD,WAAWxvD,IAAIkK,GACrByjD,GAAa9gD,EAAM2I,EAAMw3C,EAAOptD,UAE3B,OAAC,WACN+tD,GAAa9gD,EAAM2I,EAAM+2C,OAElB,SAAC,WACRE,GAAe,IAChB,KAGDkB,GAAa9gD,EAAM2I,EAAM+2C,IACzBE,GAAe,OAGI,QAAb92C,EAAO5R,IAA6B,OAAb4R,EAAO5R,KACrC0gC,GAA8B,GAAP,OAAb9uB,EAAO5R,IACjBgpD,GAAalgD,EAAMmgD,EAAQC,GAAkB,GAE/C,IAEApgD,EAAK+D,YAAY,UAAU,SAAC+E,EAAQzP,EAAKoE,EAAQ1C,GAChD,GAAc,SAAV+N,EAAkB,CACrB,IAAM5C,EAAQyC,EAAKgjB,iBACbnX,EAAM7L,EAAK0I,gBAGjBm8B,IAAY,WACXxtC,EAAK+jB,iBAAmB,KACxB/jB,EAAKhK,MAAM+E,GAEX4N,EAAKw5B,cAAc3tB,EAAIhP,MAAOgP,EAAI/O,KAClCkD,EAAKqc,SAAS9e,EAAMhtB,EAAGgtB,EAAMzwB,EAC9B,GACD,CACD,IAEKuqB,EAAKuB,OAAOwqB,UAChBpjB,EAAK5E,YAAY,WAAW,SAAA1G,GAC3ByjD,GAAa9gD,EAAM2I,EAAMtL,EAC1B,GAjEA,CAmEF,IC3DO,SAAS9F,GAAMyI,EAAMmR,GACxBA,EAAMnR,EAAK,WAAWmR,EAAK,SAAW,CAAA,GAExCnR,EAAKijD,kBAAoB,GACzBjjD,EAAKkjD,kBAAoB,GACzBljD,EAAKo4C,oBAEP,CAMO,SAAS8G,GAAgBl/C,EAAMvC,EAAQxd,GAC7C,IAAGA,GAAQA,GAAQ+f,EAAKiM,iBAUvB,OAAQjM,EAAKijD,kBAAkBxlD,GAT/B,IAAMK,EAAQ00B,GAASxyB,EAAM/f,GAC7B,GAAG6d,EAAM,CACR,IAAMoC,EAAQpC,EAAMkM,QAAQ9J,MAC5B,QAAGA,GAASA,EAAMopB,QAAUppB,EAAMopB,OAAO7rB,UAChCrO,GAAK8Q,EAAMopB,OAAO7rB,QAAQ,SAAAnpB,GAAC,OAAIA,GAAKmpB,IAE9C,CAIF,CAEO,SAAS+xB,GAASxvB,EAAMmjD,EAASj9C,EAAOyB,EAAM1nB,GACpD,KAAIkjE,GAAaljE,GAAQA,GAAQ+f,EAAKiM,kBAAkB,CACvD,IAAMuI,EAAMxU,EAAKsD,eAAc,GAC/B,IAAIkR,EAAIpgC,OAAQ,OAChB+uE,EAAU,CAAC3uC,EAAI,GAAG7M,GAAO6M,EAAIA,EAAIpgC,OAAO,GAAGuzB,GAE5C,CAEA,IA1BezQ,EA0BT+3B,GA1BS/3B,EA0BIisD,EAzBZliD,MAAM1K,QAAQW,GAAMA,EAAK,CAACA,EAAIA,IA2BjCgP,GACM,OAARyB,EAAgBy7C,GAAWC,IAAa,CAACnsD,GAAI,OAAQoO,MAAOqC,GAAK+2C,GAAI/2C,GAAAA,EAAOsnB,EAAI,IAAEyvB,GAAA,CAAA,EAAK/2C,EAAOsnB,EAAI,IAAKjvB,GAAM,EAAO/f,IAE5G,OAAR0nB,EAAgB27C,GAAWC,IAAa,CAACrsD,GAAI,OAAQoO,MAAOqC,GAAK+2C,GAAA,CAAA,EAAI/2C,EAAOsnB,EAAI,IAAEyvB,GAAA,CAAA,EAAK/2C,EAAOsnB,EAAI,IAAKjvB,GAAM,EAAO/f,EACvH,CAEO,SAASg/D,GAAaj/C,EAAM3G,EAAKpZ,GACvC,IAAGA,GAAQA,GAAQ+f,EAAKiM,iBAUvB,OAAQjM,EAAKkjD,kBAAkB7pD,GAT/B,IAAMyE,EAAQ00B,GAASxyB,EAAM/f,GAC7B,GAAG6d,EAAM,CACR,IAAMoC,EAAQpC,EAAMkM,QAAQ9J,MAC5B,QAAGA,GAASA,EAAMopB,QAAUppB,EAAMopB,OAAOjwB,OAChCjK,GAAK8Q,EAAMopB,OAAOjwB,KAAK,SAAAjmB,GAAC,OAAIA,GAAKimB,IAE3C,CAIF,CAiCA,SAAS+lD,GAAQt2C,GACI,UAAhBA,EAAOxD,MACO,QAAbwD,EAAO5R,GACVqsD,GAAYrrD,MAAM7E,KAAMgS,WACH,QAAbyD,EAAO5R,IACfmsD,GAAYnrD,MAAM7E,KAAMgS,WACC,OAAhByD,EAAOxD,QACA,QAAbwD,EAAO5R,GACVosD,GAASprD,MAAM7E,KAAMgS,WACA,QAAbyD,EAAO5R,IACfksD,GAASlrD,MAAM7E,KAAMgS,WAExB,CAEA,SAASk+C,GAAYz6C,EAAQtD,EAAOC,EAAKzF,EAAMyU,EAAQx0B,GAGtD,IAFAA,EAAOA,GAAQ+f,EAAKiM,mBAETjM,EAAKiM,iBAAiB,CAChC,IAAMtD,EAAO3I,EAAKiD,GAAG,SACfuR,EAAM7L,EAAK0I,gBAEXmyC,EAAOxjD,EAAKijD,kBAElB,GAAGn6C,EAAOy1B,UACT,GAAGilB,EAAMh+C,EAAM/H,OAAO,GACrB,KAAM+lD,EAAMh+C,EAAM/H,OAAO,IACxB+H,EAAM/H,cAEP,KAAM+lD,EAAM/9C,EAAIhI,OAAO,IACtBgI,EAAIhI,SAGP6H,GAAMnS,KAAI,WACT,IAAK,IAAItf,EAAI2xB,EAAM/H,OAAQ5pB,GAAK4xB,EAAIhI,OAAQ5pB,IAC3C,GAAG2vE,EAAK3vE,GAAG,QACH2vE,EAAK3vE,GACZ,IAAMypB,EAAOqL,EAAK0rB,gBAAgBxgD,EAAI,GAAK,SAAS64C,OAAO,GAC3DpvB,EAAKqF,IAAMrF,EAAKqF,IAAI1sB,QAAQ,2BAA4B,IACxD0yB,EAAK86C,WAAW5vE,EACjB,CAGD,IAAM2B,EAAQwqB,EAAK4uB,eAChBp5C,GAASA,GAASgwB,EAAM/H,SAC1BuC,EAAK8uB,cAAc,GACnB9uB,EAAK8uB,cAAct5C,IAGhBg/B,GACH7L,EAAKw5B,cAAc3tB,EAAIhP,MAAOgP,EAAI/O,IACnC,GAAEzF,EACJ,KACI,CACH,IAAMlC,EAAQ00B,GAASxyB,EAAM/f,GAC7B,IAAG6d,EASE,OARJ,IAAIoC,EAAQpC,EAAMkM,QAAQ9J,MAC1B,GAAGA,GAASA,EAAMopB,QAAUppB,EAAMopB,OAAO7rB,OACxC,IAD8C,IAAAkO,EAAA,SAAA93B,GAE7C,IAAM24B,EAAQjT,GAAU2G,EAAMopB,OAAO7rB,QAAQ,SAAAnpB,GAAC,OAAIA,GAAKT,MAC1C,GAAV24B,GACFtM,EAAMopB,OAAO7rB,OAAOxF,OAAOuU,EAAO,IAH5B34B,EAAI2xB,EAAM/H,OAAQ5pB,GAAK4xB,EAAIhI,OAAQ5pB,IAAG83B,EAAA93B,EAOjD,CAEK4gC,GACJzU,EAAK6D,UAAU,oBAAqB,CAACiF,EAAO5R,GAAIsO,EAAM/H,OAAQgI,EAAIhI,OAAQxd,GAC5E,CAEA,SAASqjE,GAASx6C,EAAQtD,EAAOC,EAAKzF,EAAMyU,EAAQx0B,GAGnD,IAFAA,EAAOA,GAAQ+f,EAAKiM,mBAETjM,EAAKiM,iBAAiB,CAChC,IAAMtD,EAAO3I,EAAKiD,GAAG,SACfuR,EAAM7L,EAAK0I,gBAEXmyC,EAAOxjD,EAAKkjD,kBAElB,GAAGp6C,EAAOy1B,UACT,GAAGilB,EAAMh+C,EAAMnM,IAAI,GAClB,KAAMmqD,EAAMh+C,EAAMnM,IAAI,IACrBmM,EAAMnM,WAEP,KAAMmqD,EAAM/9C,EAAIpM,IAAI,IACnBoM,EAAIpM,MAGPiM,GAAMnS,KAAI,WACT,IAAM3d,EAAQwqB,EAAK6uB,YAChBr5C,GAEFwqB,EAAK+uB,WAAW,GAGjB,IAAK,IAAIl7C,EAAI2xB,EAAMnM,IAAKxlB,GAAK4xB,EAAIpM,IAAKxlB,IACrC,GAAG2vE,EAAK3vE,GAGP,UAFO2vE,EAAK3vE,GAERA,EAAI,GAAM,EAAG,CAChB,IAAMypB,EAAOqL,EAAK0rB,gBAAgB,SAAS3H,OAAO,GAClDpvB,EAAKqF,IAAMrF,EAAKqF,IAAI1sB,QAAQ,wBAAyB,IACrD0yB,EAAKwgC,gBACN,MACCxgC,EAAKstB,cAAcpiD,EAAI,EAAG,QAAS,yBAItCmsB,EAAKo4C,oBAEF5iE,GACFwqB,EAAK+uB,WAAWv5C,GAEbg/B,GACH7L,EAAKw5B,cAAc3tB,EAAIhP,MAAOgP,EAAI/O,IACnC,GAAEzF,EACJ,KACI,CACH,IAAMlC,EAAQ00B,GAASxyB,EAAM/f,GAC7B,IAAG6d,EASE,OARJ,IAAIoC,EAAQpC,EAAMkM,QAAQ9J,MAC1B,GAAGA,GAASA,EAAMopB,QAAUppB,EAAMopB,OAAOjwB,IACxC,IAD2C,IAAAm8B,EAAA,SAAA3hD,GAE1C,IAAM24B,EAAQjT,GAAU2G,EAAMopB,OAAOjwB,KAAK,SAAA/kB,GAAC,OAAIA,GAAKT,MACvC,GAAV24B,GACFtM,EAAMopB,OAAOjwB,IAAIpB,OAAOuU,EAAO,IAHzB34B,EAAI2xB,EAAMnM,IAAKxlB,GAAK4xB,EAAIpM,IAAKxlB,IAAG2hD,EAAA3hD,EAO3C,CAEK4gC,GACJzU,EAAK6D,UAAU,iBAAkB,CAACiF,EAAO5R,GAAIsO,EAAMnM,IAAKoM,EAAIpM,IAAKpZ,GACnE,CAEA,SAASojE,GAAYv6C,EAAQtD,EAAOC,EAAKzF,EAAMyU,EAAQx0B,GAGtD,IAFAA,EAAOA,GAAQ+f,EAAKiM,mBAETjM,EAAKiM,iBAAiB,CAChC,IAAMtD,EAAO3I,EAAKiD,GAAG,SACjBpvB,EAAI4xB,EAAIhI,OAIZ,GAHAuC,EAAK+jB,iBAAmB,KACxBpb,EAAK4hC,WAED9kC,EAAIhI,OAAS,GAAK+H,EAAM/H,OAAS,EAEpC,mBADOuC,EAAKijD,kBAAkBz9C,EAAM/H,QAGrC,KAAO5pB,GAAK2xB,EAAM/H,QAAQ,CACzB,IAA8B,GAA3BkL,EAAK+6C,eAAe7vE,GAAS,CAC/BmsB,EAAKijD,kBAAkBpvE,GAAKA,EAE5B,IAAIypB,EAAOqL,EAAK0rB,gBAAgBxgD,EAAI,GAAK,SAAS64C,OAAO,GACzDpvB,EAAKqF,KAAOrF,EAAKqF,KAAO,IAAM,4BAE9BgG,EAAKg7C,WAAW9vE,EACjB,CACAA,GACD,CACD,KACI,CACH,IAAMiqB,EAAQ00B,GAASxyB,EAAM/f,GAC7B,GAAG6d,EAAM,CACR,IAAIoC,EAAQpC,EAAMkM,QAAQ9J,MACtBA,IAAOA,EAAQpC,EAAMkM,QAAQ9J,MAAQ,IACrCA,EAAMopB,SAAQppB,EAAMopB,OAAS,CAAA,GAC7BppB,EAAMopB,OAAOxpB,OAAMI,EAAMopB,OAAO7rB,OAAS,IAE7C,IAFgD,IAAAmmD,EAAAA,SAAAC,GAG3Cz0D,GAAK8Q,EAAMopB,OAAO7rB,QAAQ,SAAAnpB,GAAC,OAAIA,GAAKT,MACvCqsB,EAAMopB,OAAO7rB,OAAOjlB,KAAK3E,EAAG,EAFtBA,EAAI2xB,EAAM/H,OAAQ5pB,GAAK4xB,EAAIhI,OAAQ5pB,IAAG+vE,EAAAC,EAG/C,CACD,CAEKpvC,GACJzU,EAAK6D,UAAU,oBAAqB,CAACiF,EAAO5R,GAAIsO,EAAM/H,OAAQgI,EAAIhI,OAAQxd,GAC5E,CAEA,SAASmjE,GAASt6C,EAAQtD,EAAOC,EAAKzF,EAAMyU,EAAQx0B,GAGnD,IAFAA,EAAOA,GAAQ+f,EAAKiM,mBAETjM,EAAKiM,iBAAiB,CAChC,GAAIxG,EAAIpM,IAAM,GAAKmM,EAAMnM,IAAM,EAE9B,mBADO2G,EAAKkjD,kBAAkB19C,EAAMnM,KAIrC,IAAM7jB,EAAQwqB,EAAK6uB,YAChBr5C,GAEFwqB,EAAK+uB,WAAW,GAMjB,IAHA,IAAMpmB,EAAO3I,EAAKiD,GAAG,SACjBpvB,EAAI4xB,EAAIpM,IAELxlB,GAAK2xB,EAAMnM,KAAK,CAGtB,GAFA2G,EAAKkjD,kBAAkBrvE,GAAKA,EAExBA,EAAI,GAAM,EAAG,CAChB,IAAIypB,EAAOqL,EAAK0rB,gBAAgB,SAAS3H,OAAO,GAChDpvB,EAAKqF,KAAOrF,EAAKqF,KAAO,IAAM,yBAC9BgG,EAAKwgC,gBACN,MAECxgC,EAAKqtB,WAAWniD,EAAI,EAAG,QAAS,yBAEjCA,GACD,CAEAmsB,EAAKo4C,oBAEF5iE,GACFwqB,EAAK+uB,WAAWv5C,EAClB,KACI,CACH,IAAMsoB,EAAQ00B,GAASxyB,EAAM/f,GAC7B,GAAG6d,EAAM,CACR,IAAIoC,EAAQpC,EAAMkM,QAAQ9J,MACtBA,IAAOA,EAAQpC,EAAMkM,QAAQ9J,MAAQ,IACrCA,EAAMopB,SAAQppB,EAAMopB,OAAS,CAAA,GAC7BppB,EAAMopB,OAAOjwB,MAAK6G,EAAMopB,OAAOjwB,IAAM,IAEzC,IAF4C,IAAAyqD,EAAAA,SAAAC,GAGvC30D,GAAK8Q,EAAMopB,OAAOjwB,KAAK,SAAAjmB,GAAC,OAAIA,GAAKS,MACpCqsB,EAAMopB,OAAOjwB,IAAI7gB,KAAK3E,EAAG,EAFnBA,EAAI2xB,EAAMnM,IAAKxlB,GAAK4xB,EAAIpM,IAAKxlB,IAAGiwE,EAAAC,EAGzC,CACD,CAEKtvC,GACJzU,EAAK6D,UAAU,iBAAkB,CAACiF,EAAO5R,GAAIsO,EAAMnM,IAAKoM,EAAIpM,IAAKpZ,GACnE,2CA3VO,SAAc+f,GACpBA,EAAK+D,YAAY,aAAa,SAAC+E,GAC9B,GAAiB,QAAbA,EAAO5R,IAA6B,QAAb4R,EAAO5R,GAAa,CAC9C,IAAMsd,EAAMxU,EAAKgU,OAAO3C,gBACpBmD,GACH4qC,GAAQt2C,EAAQ7H,MAAMvG,KAAK8Z,EAAIhP,OAAQvE,MAAMvG,KAAK8Z,EAAI/O,KAAMzF,EAC9D,CACD,IACAzI,GAAMyI,GAENA,EAAK+D,YAAY,UAAU,SAAC+E,EAAQzP,EAAKoE,EAAQ1K,EAAO++B,GACvD,KAAkB,QAAbhpB,EAAO5R,IAA6B,QAAb4R,EAAO5R,IAAkC,UAAhB4R,EAAOxD,OAAqC,OAAhBwD,EAAOxD,OAAgB,CACvG,IAAIqC,EAAOmB,EAAO5R,GACb46B,IACJnqB,EAAe,QAARA,EAAiB,OAAS,QAClC,IAAMrF,EAAOjJ,GAAOoE,EACpB2hD,GAAQ,CAAEloD,GAAIyQ,EAAMrC,MAAOwD,EAAOxD,MAAOi5B,UAAWz1B,EAAOy1B,WAAaj8B,EAAIkD,MAAOlD,EAAImD,IAAKzF,GAAM,EACnG,CACD,IAEAA,EAAK+D,YAAY,eAAe,WAAA,OAAMxM,GAAMyI,MAE5CA,EAAK+D,YAAY,YAAY,SAAC+E,EAAQ9zB,GACxB,sBAAV8zB,GAsUL,SAAyB9I,EAAM9f,EAAMiuB,EAAKpT,EAAMyK,GAC/C,GAAGzK,EAAKmF,OAASnF,EAAKmF,MAAMopB,QAAUvuB,EAAKmF,MAAMopB,OAAOppC,IAAS6a,EAAKmF,MAAMopB,OAAOppC,GAAM9L,OAAO,CAC/FmjB,GAAMyI,EAAc,UAAR9f,EAAmB,OAAS,QAKxC,IAHA,IAAM/L,EAAIqxB,EAAMtlB,GACVopC,EAASvuB,EAAKmF,MAAMopB,OAAOppC,GAExBrM,EAAIy1C,EAAOl1C,OAAS,EAAGP,GAAK,EAAGA,IAAK,CAC5C,IAAMmwE,EAAwB,EAAV16B,EAAOz1C,GACxBs6B,EAAM,GAAK61C,GAAe7vE,EAC5Bm1C,EAAOz1C,GAAKs6B,EAAM61C,EACX71C,EAAM,GAAK61C,GAAe7vE,IAC9B6vE,EAAc7vE,EAAIg6B,EACpBmb,EAAOrxB,OAAOpkB,EAAG,GAEjBy1C,EAAOz1C,GAAKs6B,EAAM61C,EAErB,CACD,CACD,CAxVGC,CAAgBjkD,EAAMhrB,EAAEkL,KAAMlL,EAAEm5B,IAAKn5B,EAAE+lB,KAAM/lB,EAAEwwB,MACjD,GACD,0CAwEO,SAAcxF,EAAMjF,GAG1B,GAFAxD,GAAMyI,IAEFiB,MAAM6J,YAAY/P,EAAKmF,SAAWe,MAAM6J,YAAY/P,EAAKmF,MAAMopB,QAAQ,CAC1E,IAAMA,EAASvuB,EAAKmF,MAAMopB,OAE1B,GAAGA,EAAOjwB,KAAOiwB,EAAOjwB,IAAIjlB,OAC3B,IAAI,IAAIhB,EAAI,EAAGA,EAAIk2C,EAAOjwB,IAAIjlB,OAAQhB,IACrCgwE,GAAS,CAAClsD,GAAG,OAAQoO,MAAM,OAAQ,CAACjM,IAAIiwB,EAAOjwB,IAAIjmB,IAAK,CAACimB,IAAIiwB,EAAOjwB,IAAIjmB,IAAK4sB,GAAM,GAGrF,GAAGspB,EAAO7rB,QAAU6rB,EAAO7rB,OAAOrpB,OACjC,IAAI,IAAIE,EAAI,EAAGA,EAAIg1C,EAAO7rB,OAAOrpB,OAAQE,IACxC+uE,GAAY,CAACnsD,GAAG,OAAQoO,MAAM,UAAW,CAAC7H,OAAO6rB,EAAO7rB,OAAOnpB,IAAK,CAACmpB,OAAO6rB,EAAO7rB,OAAOnpB,IAAK0rB,GAAM,EAExG,CACD,qBA7BO,SAAmBA,EAAMjF,GAC/B,IAAImpD,EAAS,GAAQC,EAAQ,GAC7B,IAAI,IAAI/wE,KAAK4sB,EAAKkjD,kBAAmBgB,EAAM1rE,KAAKpF,GAChD,IAAI,IAAIkB,KAAK0rB,EAAKijD,kBAAmBkB,EAAM3rE,KAAKlE,IAE7C4vE,EAAM9vE,QAAU+vE,EAAM/vE,UACxB2mB,EAAKmF,MAAMopB,OAAS,IAClB46B,EAAM9vE,SACR2mB,EAAKmF,MAAMopB,OAAOjwB,IAAM6qD,GACtBC,EAAM/vE,SACR2mB,EAAKmF,MAAMopB,OAAO7rB,OAAS0mD,EAC7B,0DChGO,SAAcnkD,GACpB,IAAIE,EAAQF,EAAKgU,OAEbowC,EAAK,EACTlkD,EAAM6D,YAAY,cAAc,WAAA,OAAMqgD,EAAK,IAAI7wE,QAC/C2sB,EAAM6D,YAAY,sBAAsB,WAIvC,GAAI/D,EAAK+jB,kBAAqB,IAAIxwC,KAAS6wE,EAAI,IAAK,OAAO,CAC5D,IAEAlkD,EAAM6D,YAAY,mBAAmB,SAACmN,GAKrC,GAAyB,SAArBA,EAAK1L,MAAM/H,OAAmB,OAAO,EAIzC,IAAI6hB,EAASpf,EAAMinC,YAMnB,IALI7nB,GACHA,EAAOjmB,KAAO6X,EAAK1L,MAAMnM,KAAOimB,EAAO7hB,QAAUyT,EAAK1L,MAAM/H,QAC5D6hB,EAAOjmB,KAAO6X,EAAK1L,MAAMnM,KAAOimB,EAAO7hB,QAAUyT,EAAK1L,MAAM/H,QAC5DyC,EAAM4nC,YAEF9nC,EAAK+jB,iBAAkB,OAAO,EAGnC,IAAIsgC,EAAah4C,GAAO6E,EAAK1L,MAAM/H,QAAUyT,EAAK1L,MAAMnM,IACpDirD,EAAWj4C,GAAO6E,EAAKzL,IAAIhI,QAAUyT,EAAKzL,IAAIpM,IAE9CmhC,EAAMx6B,EAAK+jB,iBAAiB7S,EAAK1L,MAAO0L,EAAKzL,IAAK4+C,EAAYC,GAOlE,OALY,IAAR9pB,IACHx6B,EAAK+jB,iBAAmB,KACxB7jB,EAAMqkD,oBAGA/pB,CACR,IAEAt6B,EAAM6D,YAAY,uBAAuB,SAACyB,EAAOC,EAAK2hC,GACrD,IAAIpnC,EAAKuB,OAAOwqB,UAAYqb,GAAalnC,EAAMskD,aAAa,CAC3D,IAAMC,EAASvkD,EAAMmR,gBACfqzC,EAAWD,EAAOj/C,MAClBm/C,EAASF,EAAOh/C,IAEhBzT,EAAKwT,EAAMnM,IACXpJ,EAAKwV,EAAIpM,IACTqpC,EAAKl9B,EAAM/H,OACXklC,EAAKl9B,EAAIhI,OAEf,GAAGinD,EAASrrD,KAAOrH,GAAM2yD,EAAOtrD,IAAMpJ,EACrC+P,EAAK4kD,WAAW,CAACp/C,MAAM,CAACnM,IAAIpJ,EAAG,EAAEwN,OAAOilC,GAAKj9B,IAAI,CAACpM,IAAIsrD,EAAOtrD,IAAIoE,OAAOklC,IAAM,CAAC/vC,QAAO,SAClF,GAAG8xD,EAASjnD,QAAUilC,GAAMiiB,EAAOlnD,OAASklC,EAChD3iC,EAAK4kD,WAAW,CAACp/C,MAAM,CAACnM,IAAIrH,EAAGyL,OAAOklC,EAAG,GAAIl9B,IAAI,CAACpM,IAAIpJ,EAAGwN,OAAOknD,EAAOlnD,SAAU,CAAC7K,QAAO,QAEtF,CACH,IAAI+U,EAMJ,GALG3V,GAAM0yD,EAASrrD,KAAOpJ,GAAM00D,EAAOtrD,IACrCsO,EAAO,MACA+6B,GAAMgiB,EAASjnD,QAAUklC,GAAMgiB,EAAOlnD,SAC7CkK,EAAO,UAELA,EAAK,CACPrC,GAAME,QAEN,IADA,IAAMq/C,EAAgB,OAARl9C,EAET9zB,EAAKgxE,EAAQniB,EAAK1wC,EACtBne,IAAMgxE,EAAQliB,EAAK1yC,GACnBpc,IACA,CAGA,IAFA,IAAMixE,EAAO,GACTh0C,EAAS,GACJt2B,EAAIkqE,EAAS/8C,GAAOntB,GAAKmqE,EAAOh9C,GAAOntB,IAAK,CACpD,IAAkDm0B,EAAArI,GAAvB,OAARqB,EAAgB,CAACntB,EAAG3G,GAAK,CAACA,EAAG2G,GAAE,GAA3C6e,EAAGsV,EAAA,GAAE5B,EAAG4B,EAAA,GACT5b,EAAQiN,EAAKmG,aAAa9M,EAAK0T,GAClC9L,MAAM2a,MAAMC,SAAS9oB,IACnB+d,EAAO,IAKVA,EAAO,GAAKt2B,EACTymB,MAAM6J,YAAYgG,EAAO3C,OAC3B2C,EAAO3C,IAAMpb,EAAQ+d,EAAOi0C,cAN7Bj0C,EAAOi0C,WAAahyD,EACpB+d,EAAO,GAAKA,EAAO,GAAKt2B,GAOzBsqE,EAAKtqE,GAAKs2B,GAGVA,EAAS,EACX,CAMA,IAJA,IAAMk0C,EAAWN,EAAS/8C,KAAUk9C,EAAQ7yD,EAAK0wC,GAC3Cl9B,EAAQw/C,EAAWN,EAAS/8C,GAAQg9C,EAAOh9C,GAC3CgoC,EAAMqV,EAAW,GAAK,EAGvBxqE,EAAKwqE,EAAWL,EAAOh9C,GAAQ,EAAI+8C,EAAS/8C,GAAQ,EAAI6E,EAAQ,EAAGy4C,EAAY,EACnFD,EAAWxqE,IAAMqqE,EAAQ50D,EAAK0yC,GAAMnoD,IAAMqqE,EAAQ7yD,EAAK0wC,GACvDsiB,EAAWxqE,IAAMA,IAAKgyB,IACtB,CACGA,GAASm4C,EAAOh9C,GAAQ+8C,EAAS/8C,GAAQ,IAC3Cs9C,IACAz4C,EAAQ,GAGT,IAAM04C,EAAU1/C,EAAMgH,EAAMmjC,EACkCwV,EAAA7+C,GAAnCu+C,EAAQ,CAACK,EAASrxE,GAAK,CAACA,EAAGqxE,GAAQ,GAAvDE,EAAOD,EAAA,GAAEE,EAAOF,EAAA,GAEnBpyD,EAAQiN,EAAKmG,aAAai/C,EAASC,GAEjCn1B,EAAM40B,EAAKI,GACdh1B,EACFn9B,IAAUm9B,EAAI/hB,KAAO,IAAM+hB,EAAI,GAAKA,EAAI,GAAK,GAAK+0B,EAAYtV,EAEvC,iBAAT58C,GAAiC,KAAZA,EAAM,IAAaA,EAAM3e,OAAS,IAEpE2e,EADE8xD,EACM7kD,EAAKoS,OAAO9V,WAAWnF,cAAcpE,EAAOvY,EAAIgrB,EAAQgH,EAAQmjC,EAAK,GAErE3vC,EAAKoS,OAAO9V,WAAWnF,cAAcpE,EAAO,EAAGvY,EAAIgrB,EAAQgH,EAAQmjC,IAG7E,IAA0C2V,EAAAh/C,GAAvBu+C,EAAQ,CAACrqE,EAAG3G,GAAK,CAACA,EAAG2G,GAAE,GAAnC6e,EAAGisD,EAAA,GAAEv4C,EAAGu4C,EAAA,GACftlD,EAAK2G,aAAatN,EAAK0T,EAAKha,GAC5BiN,EAAK0T,SAASra,EAAK0T,EAAK/M,EAAKkS,SAASkzC,EAASC,IAE/C,IAAMtnD,EAAYiC,EAAK6iC,WAAW3vC,IAAIkyD,EAASC,GAC5CtnD,EACFkmC,GAAejkC,EAAM,CAACjC,UAAAA,GAAY1E,EAAK0T,GAEvC/M,EAAK6iC,WAAWvjC,MAAMjG,EAAK0T,EAC7B,CACD,CACAzH,GAAMG,KACP,CACD,CACD,CACD,IAEAxE,MAAMqjB,MAAMpkB,EAAMiE,MAAO,aAAa,SAASjxB,GAC9C,GAAI8sB,EAAK+jB,iBACR,OAAO9iB,MAAM6Q,KAAKgS,aAAa5wC,EACjC,GACD,IC3GA,SAASwhB,GAASthB,EAAEkB,EAAG4rB,GACtB,IAAInN,EAAQmN,EAAMmL,QAAQj4B,GAAGkB,GAC7B,YAAaulC,IAAV9mB,GAAiC,KAAVA,CAK3B,CCtCA,IAAM4kD,GAAU,CACfhhC,IAAM,SAASg5B,EAAKjnC,GACnB,OAAO,SAACz0B,EAAEkB,GACT,IAAKA,EAAEuzB,GAAM,OAAQ,EACrB,IAAKz0B,EAAEy0B,GAAM,OAAO,EAEpB,IAAIp0B,EAAIoO,WAAWzO,EAAEy0B,KAASinC,GAAIxyB,KAC9BzoC,EAAIgO,WAAWvN,EAAEuzB,KAASinC,GAAIxyB,KAClC,OAAQ7oC,EAAII,EAAI,EAAKJ,GAAKI,EAAI,GAAK,GAAIi7D,EAExC,EACD9iC,IAAM,SAAS8iC,EAAKjnC,GACnB,OAAO,SAACz0B,EAAEkB,GACT,IAAKA,EAAEuzB,GAAM,OAAQ,EACrB,IAAKz0B,EAAEy0B,GAAM,OAAO,EAEpB,IAAIp0B,EAAIL,EAAEy0B,GAAK/zB,WAAWU,cACtBX,EAAIS,EAAEuzB,GAAK/zB,WAAWU,cAC1B,OAAQf,EAAII,EAAI,EAAKJ,GAAKI,EAAI,GAAK,GAAIi7D,EAEzC,GAGM,SAAS4V,GAAUvlD,EAAMhC,EAAO2xC,GAGtC,GAFA3xC,EAAQA,GAASgC,EAAKgU,OAAO3C,gBAEnB,CAET,IAAIm0C,EADJxnD,EAAQ2P,GAAS3P,EAAOgC,GAEpBhC,EAAMwH,MAAMnM,MAAQ2E,EAAMyH,IAAIpM,MACjCmsD,ED1CI,SAAyBpyE,EAAG4sB,GAOlC,IANA,IAAIylD,EAAOzlD,EAAKuB,OAAOkF,SACnBi/C,EAAO1lD,EAAKuB,OAAOwyB,YACnB7zB,EAAQF,EAAKgU,OAEb2xC,EAAMvyE,EAAEoyB,MAAMnM,IAAKusD,EAAMxyE,EAAEqyB,IAAIpM,IAAKwsD,EAAMzyE,EAAEoyB,MAAM/H,OAAQqoD,EAAM1yE,EAAEqyB,IAAIhI,OAEjE5pB,EAAE8xE,EAAI,EAAG9xE,EAAE,GACf6gB,GAAS7gB,EAAGT,EAAEoyB,MAAM/H,OAAQyC,GADVrsB,IAErB8xE,EAAM9xE,EAKR,IAAK,IAAIA,EAAE+xE,EAAI,EAAG/xE,EAAE4xE,GACf/wD,GAAS7gB,EAAGT,EAAEqyB,IAAIhI,OAAQyC,GADLrsB,IAExB+xE,EAAM/xE,EAKR,IAAK,IAAIA,EAAEgyE,EAAI,EAAGhyE,EAAE,GACf6gB,GAASthB,EAAEoyB,MAAMnM,IAAKxlB,EAAGqsB,GADPrsB,IAErBgyE,EAAMhyE,EAKR,IAAK,IAAIA,EAAEiyE,EAAI,EAAGjyE,EAAE6xE,GACfhxD,GAASthB,EAAEqyB,IAAIpM,IAAKxlB,EAAGqsB,GADFrsB,IAExBiyE,EAAMjyE,EAKR,IAAIkyE,EAAW,CAAEvgD,MAAM,CAAEnM,IAAIssD,EAAKloD,OAAOooD,GAAQpgD,IAAI,CAAEpM,IAAKusD,EAAKnoD,OAAQqoD,IAKzE,OAJIH,GAAOvyE,EAAEoyB,MAAMnM,KAAOusD,GAAOxyE,EAAEqyB,IAAIpM,KAAOwsD,GAAOzyE,EAAEoyB,MAAM/H,QAAUqoD,GAAO1yE,EAAEqyB,IAAIhI,QACnFuC,EAAKgU,OAAOmuB,cAAc4jB,EAASvgD,MAAOugD,EAAStgD,KAG7CsgD,CACR,CCCeC,CAAgBhoD,EAAOgC,IAEpC,IAAM0I,EAAM1I,EAAKmG,aAAanI,EAAMwH,MAAMnM,IAAK2E,EAAMwH,MAAM/H,QAAQ,GAC7DkK,EAAOzzB,MAAMwO,WAAWgmB,IAAQ,MAAQ,MAE9CinC,EAAQA,GAAe,QAARA,GAAsB,EAAL,EAChCrqC,GAAMnS,KAAI,WAAA,OAMZ,SAAc6K,EAAOioD,EAAIt+C,EAAMgoC,EAAK3vC,GACnC,IAAK,IAAIvC,EAASO,EAAMwH,MAAM/H,OAAQA,GAAUO,EAAMyH,IAAIhI,OAAQA,IAAS,CAG1E,IADA,IAAM7K,EAAS,GACNyG,EAAM2E,EAAMwH,MAAMnM,IAAKA,GAAO2E,EAAMyH,IAAIpM,IAAKA,IACrD,GAAG2G,EAAKi/C,aAAa5lD,GAAK,CACzB,IAAMtG,EAAQiN,EAAKmG,aAAa9M,EAAKoE,GAAQ,GACvCuH,EAAQhF,EAAKkS,SAAS7Y,EAAKoE,GAE7B3H,EAAOkK,EAAKmG,aAAa9M,EAAKoE,GAClC3H,EAAOA,GAAmB,KAAXA,EAAK,GAAYA,EAAO,KAEvC,IAAM+sC,EAAa7iC,EAAK6iC,WAAW3vC,IAAImG,EAAIoE,GACxColC,GACFmB,GAAiB,SAAU3qC,EAAKoE,EAAQolC,EAAY,KAAM7iC,GAE3DpN,EAAOpa,KAAK,CACXua,MAAAA,EACAiS,MAAAA,EACAlP,KAAAA,EACAuD,IAAAA,EACAwpC,WAAAA,GAEF,CAIDjwC,EAAO3N,KAAK0yD,GAAQhwC,GAAMgoC,EAAK,UAG/B,IAAK,IAAIt2C,EAAM2E,EAAMwH,MAAMnM,IAAKA,GAAO2E,EAAMyH,IAAIpM,IAAKA,IACrD,GAAG2G,EAAKi/C,aAAa5lD,GAAK,CACzB,IAAM4mC,EAAUrtC,EAAO+pC,QAMvB,GAJA38B,EAAK0T,SAASra,EAAKoE,EAASwiC,EAAQj7B,OAAS,MAC1Ci7B,EAAQ4C,YACVmB,GAAiB,SAAU3qC,EAAKoE,EAAQ,KAAMwiC,EAAQ4C,WAAY7iC,GAE9DigC,EAAQnqC,KACR,CACJ,IAAMowD,EAAUlmD,EAAKoS,OAAO9V,WAAWnF,cAAc8oC,EAAQnqC,KAAMuD,EAAM4mC,EAAQ5mC,IAAK,GACtF2G,EAAK2G,aAAatN,EAAKoE,EAAQyoD,EAChC,MAJmBlmD,EAAK2G,aAAatN,EAAKoE,EAAQwiC,EAAQltC,MAK3D,CAEF,CAEAiN,EAAK3K,SACN,CArDGpQ,CAAKugE,EAAWxnD,EAAMwH,MAAM/H,OAAQkK,EAAMgoC,EAAK3vC,EAAK,GAEtD,CACD,2CA/CO,SAAcA,GACpBA,EAAK+D,YAAY,aAAa,SAACqyB,GAChB,aAAVA,EAAGl/B,IAA+B,cAAVk/B,EAAGl/B,IAC9BquD,GAAUvlD,EAAM,KAAMo2B,EAAGl/B,GAAGjhB,QAAQ,QAAQ,IAC9C,GACD,iBCRA,SAASkwE,GAAiBnmD,EAAM1E,EAAS8qD,EAASx6C,GACjD,IAA4B,GAAzBtQ,EAAQxlB,QAAQ,KAClB,OAAOwlB,EAGR,IADA,IAAM+qD,EAAQ7wE,GAAM8lB,EAAS0E,GAAM,GAC3BnsB,EAAI,EAAGA,EAAIwyE,EAAMjyE,OAAQP,IAChC,GAAGotB,MAAM1K,QAAQ8vD,EAAMxyE,IAAI,CAC1B,IACIiqB,EADcuoD,EAAMxyE,GAAG,KAAOuyE,EACVx6C,EAAUy6C,EAAMxyE,GAAG,IACjB,GAAvBiqB,EAAMhoB,QAAQ,OAChBgoB,EAAK,IAAAzpB,OAAOypB,EAAQ,MACrBuoD,EAAMxyE,GAAEQ,GAAAA,OAAMypB,EAAK,KAAAzpB,OAAIgyE,EAAMxyE,GAAG,GACjC,CAED,OAAOwyE,EAAMtxE,KAAK,GACnB,CAEA,SAASwrC,GAAU/G,GAClB,MAAqB,iBAAPA,GAA6B,KAAVA,EAAI,EACtC,2CAEO,SAAcxZ,GACpBA,EAAK+D,YAAY,iBAAiB,SAAC7jB,EAAM0rB,GACxC5L,EAAKsS,QAAQ/5B,SAAQ,SAAAulB,GACpB,IAAMkO,EAAclO,EAAM5d,MAAQ8f,EAAKiM,iBACpCD,IACFlO,EAAMkM,QAAUhK,EAAKlH,aAEnBgF,EAAMkM,QAAQmpB,SAChBr1B,EAAMkM,QAAQmpB,QAAQ56C,SAAQ,SAAAwa,GAC7B,IAAMyO,EAAUzO,EAAM,GAAGyO,QACzB,GAAGA,EACF,GAAqB,iBAAXA,EACTzO,EAAM,GAAGyO,QAAU2kD,GAAiBnmD,EAAMwB,EAASthB,EAAM0rB,QAEzD,IAAK,IAAI/3B,EAAI,EAAGA,EAAI2tB,EAAQptB,OAAQP,IAAI,CACvC,IAAMyyE,EAAS9kD,EAAQ3tB,GACH,iBAAVyyE,EACN/lC,GAAU+lC,KACZ9kD,EAAQ3tB,GAAKsyE,GAAiBnmD,EAAMsmD,EAAQpmE,EAAM0rB,IAE5C2U,GAAU+lC,EAAOpvD,MACxBovD,EAAOpvD,GAAKivD,GAAiBnmD,EAAMsmD,EAAOpvD,GAAIhX,EAAM0rB,GACtD,CAEH,IAGE9N,EAAMkM,QAAQ64B,aAChB/kC,EAAMkM,QAAQ64B,WAAWtqD,SAAQ,SAAAwa,GAC7BwtB,GAAUxtB,EAAM,MAClBA,EAAM,GAAKozD,GAAiBnmD,EAAMjN,EAAM,GAAI7S,EAAM0rB,GACpD,IACGI,IACFhM,EAAK6iC,WAAWvjC,QAChBU,EAAK6iC,WAAW7sC,MAAO8H,EAAMkM,QAAQ64B,aAGxC,GACD,GACD,ICrDO,SAAS5E,GAAcj+B,GAAyB,IAClDumD,EAD+BrgD,IAAKb,UAAAjxB,OAAA,QAAAylC,IAAAxU,UAAA,KAAAA,UAAA,GAASplB,EAAIolB,UAAAjxB,OAAAixB,EAAAA,kBAAAwU,EAIrD,IAFA55B,EAAOA,GAAQ+f,EAAKiM,mBAERjM,EAAKiM,iBAAkB,CAClC,IAAMtD,EAAO3I,EAAKiD,GAAG,SACrBsjD,GAAgE,GAArD59C,EAAKxE,MAAMC,UAAUtuB,QAAQ,oBAE3B,UAATowB,IACHA,GAASqgD,GAEPrgD,GAASqgD,IACRrgD,EACFjF,MAAM6Q,KAAKwnB,OAAO3wB,EAAKxE,MAAO,oBAAoB,GAElDlD,MAAM6Q,KAAKunB,UAAU1wB,EAAKxE,MAAO,oBAClCnE,EAAK6D,UAAU,YAAa,CAAC,CAAC3M,GAAG,iBAAkBhX,KAAK,iBAAkB6S,MAAOmT,KAEnF,KACI,CACH,IAAMpI,EAAQ00B,GAASxyB,EAAM/f,GAC7B,IAAG6d,EAWE,OAVAA,EAAMkM,QAAQ9J,QACjBpC,EAAMkM,QAAQ9J,MAAQ,CAACsmD,UAAW,IAEnCD,GAAYzoD,EAAMkM,QAAQ9J,MAAMsmD,UAElB,WAAVtgD,IACHA,GAASqgD,GAEVzoD,EAAMkM,QAAQ9J,MAAMsmD,UAAYtgD,EAAQ,EAAI,CAG9C,CAEGA,GAASqgD,GACXvmD,EAAK6D,UAAU,WAAY,CAAC,iBAAkB,CAACse,SAAUjc,EAAOnT,MAAOwzD,EAAUtmE,KAAAA,IACnF,4DA5CO,SAAc+f,GACpBA,EAAK+D,YAAY,UAAU,SAAC+E,EAAQzP,EAAKoE,EAAQ1K,GAClC,kBAAV+V,GACHm1B,GAAcj+B,EAAMjN,EACtB,GACD,OA6CO,SAAciN,EAAMjF,GAC1B,IAAIoW,GAAO,EACPlQ,MAAM6J,YAAY/P,EAAKmF,QAAWe,MAAM6J,YAAY/P,EAAKmF,MAAMsmD,aAClEr1C,GAAQpW,EAAKmF,MAAMsmD,WACpBvoB,GAAcj+B,EAAMmR,EACrB,YATO,SAAmBnR,EAAMjF,GAC/BA,EAAKmF,MAAMsmD,WAA4E,GAAhExmD,EAAKiD,GAAG,SAASkB,MAAMC,UAAUtuB,QAAQ,oBAAyB,EAAE,CAC5F,ICxCO,SAASooD,GAAYl+B,EAAMkG,EAAOjmB,GACxC,IAAIsmE,EAGJ,IAFAtmE,EAAOA,GAAQ+f,EAAKiM,mBAERjM,EAAKiM,iBAAkB,CAClC,IAAMtD,EAAO3I,EAAKiD,GAAG,SACfsjD,GAAY59C,EAAKpH,OAAOmrB,OAK9B,GAHa,UAATxmB,IACHA,GAASqgD,GAEPrgD,GAASqgD,EAAS,CACpB59C,EAAKpH,OAAOmrB,QAAUxmB,EACtBlG,EAAK6D,UAAU,YAAa,CAAC,CAAC3M,GAAG,iBAAkBhX,KAAK,eAAgB6S,MAAMmT,KAE9E,IAAMugD,EAAe99C,EAAKu2C,gBAAgB,UACtCuH,GAAgBvgD,IAAYugD,IAAiBvgD,IAChDyC,EAAKg7C,WAAW,QAAS,CAAE,GAAE,IAAQz9C,GAEtCyC,EAAKwgC,gBACN,CACD,KACI,CACH,IAAMrrC,EAAQ00B,GAASxyB,EAAM/f,GAC7B,IAAG6d,EAWE,OAVAA,EAAMkM,QAAQ9J,QACjBpC,EAAMkM,QAAQ9J,MAAQ,CAACsJ,QAAS,IAEjC+8C,GAAYzoD,EAAMkM,QAAQ9J,MAAMsJ,QAElB,WAAVtD,IACHA,GAASqgD,GAEVzoD,EAAMkM,QAAQ9J,MAAMsJ,QAAUtD,EAAQ,EAAI,CAG5C,CAEGA,GAASqgD,GACXvmD,EAAK6D,UAAU,WAAY,CAAC,cAAe,CAACse,SAAUjc,EAAOnT,MAAOwzD,EAAUtmE,KAAAA,IAChF,0DAhDO,SAAc+f,GACpBA,EAAK+D,YAAY,UAAU,SAAC+E,EAAQzP,EAAKoE,EAAQ1K,GAClC,eAAV+V,GACHo1B,GAAYl+B,EAAMjN,EAEpB,GACD,OAgDO,SAAciN,EAAMjF,GAC1B,IAAIoW,EACDpW,EAAKmF,QAAUe,MAAM6J,YAAY/P,EAAKmF,MAAMsJ,WAC9C2H,GAAQpW,EAAKmF,MAAMsJ,SACpB00B,GAAYl+B,EAAMmR,EACnB,YATO,SAAmBnR,EAAMjF,GAC/BA,EAAKmF,MAAMsJ,QAAUxJ,EAAKiD,GAAG,SAAS1B,OAAOmrB,OAAS,EAAI,CAC3D,ICXA,SAASg6B,GAAc1mD,EAAM3G,EAAKoE,EAAQgX,EAAQx0B,GACjDA,EAAOA,GAAQ+f,EAAKiM,iBAEpB,IAAMrI,EAAM+iD,GAAW3mD,EAAM3G,EAAKoE,EAAQxd,GAC1C,GAAG2jB,EAAI,CACN,GAAG3jB,GAAQ+f,EAAKiM,iBAAiB,CAChC,IAAMs6B,EAAW/T,GAASxyB,EAAM/f,GAAM+pB,QAAQu8B,SACxC/5B,EAAQjT,GAAUgtC,GAAU,SAAA5nC,GAAO,OAAIA,EAAQ,IAAMtF,GAAOsF,EAAQ,IAAMlB,KAChF8oC,EAAStuC,OAAOuU,EAAO,EACxB,aAEQxM,EAAKumC,SAAS9M,MAAMpgC,GAAKoE,GAChCuC,EAAKiD,GAAG,SAASyhC,WAAWrrC,EAAKoE,GAE7BgX,GACJzU,EAAK6D,UAAU,WAAY,CAAC,UAAW,CAACxK,IAAAA,EAAKoE,OAAAA,EAAQ0kB,SAAU,KAAMpvB,MAAO6Q,EAAK3jB,KAAAA,IAEnF,CACD,CAEO,SAAS2mE,GAAoB5mD,EAAMhC,EAAO/d,GAChDqlB,GAAMnS,KAAI,WACTya,GAAU5P,EAAOgC,GAAM,SAASA,EAAM1C,GAClCqpD,GAAW3mD,EAAM1C,EAAKjE,IAAKiE,EAAKG,OAAQxd,IAC1CymE,GAAc1mD,EAAM1C,EAAKjE,IAAKiE,EAAKG,QAAQ,EAAOxd,EACpD,IACA+f,EAAKiD,GAAG,SAAS5N,SAClB,GACD,CAEA,SAASwxD,GAAY7mD,EAAM3G,EAAKoE,EAAQkB,EAAS8V,EAAQx0B,GACxDA,EAAOA,GAAQ+f,EAAKiM,iBACpB,IAAMw4B,EAAWkiB,GAAW3mD,EAAM3G,EAAKoE,EAAQxd,IAAS,KAExD,GAAGA,GAAQ+f,EAAKiM,iBAAiB,CAChC,IAAMnO,EAAQ00B,GAASxyB,EAAM/f,GACzB6d,EAAMkM,QAAQu8B,WACjBzoC,EAAMkM,QAAQu8B,SAAW,IAEvB9B,EACFr1C,GAAK0O,EAAMkM,QAAQu8B,UAAU,SAAA5nC,GAAO,OAAIA,EAAQ,IAAMtF,GAAOsF,EAAQ,IAAMlB,CAAO,IAAC,GAAKkB,EAExFb,EAAMkM,QAAQu8B,SAAS/tD,KAAK,CAAC6gB,EAAKoE,EAAQkB,GAC5C,KAIsB,iBAAXA,IACTA,EAAUA,EAAQjpB,OAASipB,EAAU,IACtCqB,EAAKumC,SAAS9M,MAAMpgC,GAAO2G,EAAKumC,SAAS9M,MAAMpgC,GAAO2G,EAAKumC,SAAS9M,MAAMpgC,GAAO,CAAA,EACjF2G,EAAKumC,SAAS9M,MAAMpgC,GAAKoE,GAAUkB,EAEnCqB,EAAKiD,GAAG,SAAS+yB,WAAW38B,EAAKoE,EAAQ,yBAGrCgX,GACJzU,EAAK6D,UAAU,WAAY,CAAC,UAAW,CAACxK,IAAAA,EAAKoE,OAAAA,EAAQ0kB,SAASxjB,EAAS5L,MAAM0xC,EAAUxkD,KAAAA,IACzF,CA8CA,SAAS0mE,GAAW3mD,EAAM3G,EAAKoE,EAAQxd,GACtC,IAAI0e,EACJ,GAAG1e,GAAQA,GAAQ+f,EAAKiM,iBAAiB,CACxC,IAAMnO,EAAQ00B,GAASxyB,EAAM/f,GAC1B6d,GAASA,EAAMkM,QAAQu8B,WACzB5nC,EAAUvP,GAAK0O,EAAMkM,QAAQu8B,UAAU,SAAA5nC,GAAO,OAAIA,EAAQ,IAAMtF,GAAOsF,EAAQ,IAAMlB,QAEpFkB,EAAUA,EAAQ,GAErB,MACQqB,EAAKumC,SAAS9M,MAAMpgC,IAAQ2G,EAAKumC,SAAS9M,MAAMpgC,GAAKoE,KAC5DkB,EAAUqB,EAAKumC,SAAS9M,MAAMpgC,GAAKoE,IACpC,OAAOkB,GAAW,EACnB,2CA1JO,SAAcqB,GACpBA,EAAKumC,SAAW,CACfrzC,IAAK,SAASmG,EAAKoE,EAAQxd,GAC1B,OAAO0mE,GAAW3mD,EAAM3G,EAAKoE,EAAQxd,EACrC,EACDsS,IAAK,SAAS8G,EAAKoE,EAAQkB,EAAS1e,GACnC4mE,GAAY7mD,EAAM3G,EAAKoE,EAAQkB,GAAS,EAAO1e,EAC/C,EACDsa,OAAQ,SAASlB,EAAKoE,EAAQxd,GAC7BymE,GAAc1mD,EAAM3G,EAAKoE,GAAQ,EAAOxd,EACxC,EACDumD,eAAgB,CAAE,EAClB/M,MAAM,CAAC,GAGRz5B,EAAK+D,YAAY,WAAW,WAAA,OAmB7B,SAAe/D,GACdA,EAAKumC,SAAS9M,MAAQ,EACvB,CArBmCliC,CAAMyI,MACxCA,EAAK+D,YAAY,UAAU,SAAC4D,EAAMtO,EAAKoE,EAAQ1K,GACjC,YAAT4U,GAUN,SAAsB3H,EAAM3G,EAAKoE,EAAQ1K,GACrC4zD,GAAW3mD,EAAM3G,EAAKoE,IACxBipD,GAAc1mD,EAAM3G,EAAKoE,GAAQ,GAC/B1K,GACF8zD,GAAY7mD,EAAM3G,EAAKoE,EAAQ1K,GAAO,EACxC,CAdG+zD,CAAa9mD,EAAM3G,EAAKoE,EAAQ1K,EAClC,IAEAiN,EAAK+D,YAAY,YAAY,SAAC+E,EAAQ9zB,GACxB,sBAAV8zB,GA+FL,SAAwB9I,EAAM9f,EAAMiuB,EAAKpT,EAAMyK,GAC9C,IAAI+gC,EAAWxrC,EAAKwrC,SACnB1yD,EAAI0yD,EAASnyD,OAEd,GAAG+5B,EACF,KAAMt6B,KAAI,CACT,IAAAkzE,EAAAzgD,GAAmBigC,EAAS1yD,GAAE,GAAzBwlB,EAAG0tD,EAAA,GAACtpD,EAAMspD,EAAA,IACZ1tD,GAAe,OAARnZ,GAAiBmZ,GAAMmM,EAAMnM,KAAOoE,GAAkB,UAARvd,GAAoBud,GAAU+H,EAAM/H,UAC/E,OAARvd,EACCmZ,EAAMmM,EAAMnM,IAAM8U,EACrBo4B,EAAStuC,OAAOpkB,EAAE,GAElB0yD,EAAS1yD,GAAG,GAAS,EAAJwlB,EAAQ8U,EACR,UAARjuB,IACNud,EAAS+H,EAAM/H,OAAS0Q,EAC3Bo4B,EAAStuC,OAAOpkB,EAAG,GAEnB0yD,EAAS1yD,GAAG,GAAY,EAAP4pB,EAAW0Q,GAGhC,CAEF,CApHGunB,CAAe11B,EAAMhrB,EAAEkL,KAAKlL,EAAEm5B,IAAIn5B,EAAE+lB,KAAM/lB,EAAEwwB,MAC9C,GACD,OAmFO,SAAcxF,EAAKjF,GACzB,IAAIlnB,EACH0yD,EAAWxrC,EAAKwrC,SAEjB,GAAGA,EACF,IAAI1yD,EAAI,EAAGA,EAAI0yD,EAASnyD,OAAQP,IAC/BgzE,GAAY7mD,EAAMumC,EAAS1yD,GAAG,GAAI0yD,EAAS1yD,GAAG,GAAI0yD,EAAS1yD,GAAG,IAAI,EACrE,mCAlBO,SAAmBmsB,EAAKjF,GAC9B,IAAI1B,EAAKoE,EACR8oC,EAAW,GACZ,IAAIltC,KAAO2G,EAAKumC,SAAS9M,MACxB,IAAIh8B,KAAUuC,EAAKumC,SAAS9M,MAAMpgC,GAC9B2G,EAAKumC,SAAS9M,MAAMpgC,GAAKoE,IAC3B8oC,EAAS/tD,KAAK,CAAC6gB,EAAKoE,EAAQuC,EAAKumC,SAAS9M,MAAMpgC,GAAKoE,KAExD1C,EAAKwrC,SAAWA,CACjB,ICrGO,SAASpI,GAAan+B,EAAMjN,EAAO9S,GAEzC,IAAI2jB,EAEJ,IAHA3jB,EAAOA,GAAQ+f,EAAKiM,mBAGRjM,EAAKiM,iBAAkB,CAClC,IAAMtD,EAAO3I,EAAKiD,GAAG,SACrBW,EAAM+E,EAAKpH,OAAO48B,aAEN,UAATprC,IACFA,GAAS6Q,GAEP7Q,GAAS6Q,IACX+E,EAAKpH,OAAO48B,aAAeprC,EAE3BiN,EAAK6D,UAAU,YAAa,CAAC,CAAC3M,GAAG,iBAAkBhX,KAAK,gBAAiB6S,MAAAA,KACzE4V,EAAKtT,UAEP,KACI,CACH,IAAMyI,EAAQ00B,GAASxyB,EAAM/f,GAC7B,IAAG6d,EAWE,OAVAA,EAAMkM,QAAQ9J,QACjBpC,EAAMkM,QAAQ9J,MAAQ,CAACi+B,aAAc,IAEtCv6B,EAAM9F,EAAMkM,QAAQ9J,MAAMi+B,aAEb,UAATprC,IACHA,GAAS6Q,GAEV9F,EAAMkM,QAAQ9J,MAAMi+B,aAAeprC,EAAQ,EAAI,CAGjD,CAEGA,GAAS6Q,GACX5D,EAAK6D,UAAU,WAAY,CAAC,gBAAiB,CAACse,SAAUpvB,EAAOA,MAAO6Q,EAAK3jB,KAAAA,IAC7E,2CA5CO,SAAc+f,GACpBA,EAAK+D,YAAY,UAAU,SAAC+E,EAAQzP,EAAKoE,EAAQ1K,GAClC,iBAAV+V,GACHq1B,GAAan+B,EAAMjN,EAErB,GACD,OA4CO,SAAciN,EAAMjF,GAC1B,IAAIoW,GAAO,EACRpW,EAAKmF,OAASnF,EAAKmF,MAAMi+B,eAC3BhtB,EAAOpW,EAAKmF,MAAMi+B,cACnBA,GAAan+B,EAAMmR,EACpB,YATO,SAAmBnR,EAAMjF,GAC/BA,EAAKmF,MAAMi+B,aAAen+B,EAAKiD,GAAG,SAAS1B,OAAO48B,aAAe,EAAI,CACtE,8DCzCO,SAAcn+B,GACpB,IAAIgnD,EAAU,CAACC,GAAGC,GAAGC,GAAGC,GAAGC,GAAGC,GAAGC,GAAGC,IACpCxnD,EAAK+D,YAAY,mBAAmB,SAAShJ,GAC5C,IAAK,IAAIlnB,EAAI,EAAGA,EAAImzE,EAAQ5yE,OAAQP,IAChCmzE,EAAQnzE,GAAGilB,WACbkuD,EAAQnzE,GAAGilB,UAAUkH,EAAKjF,EAG7B,IACAiF,EAAK+D,YAAY,eAAe,SAAShJ,GACxC,IAAK,IAAIlnB,EAAI,EAAGA,EAAImzE,EAAQ5yE,OAAQP,IAChCmzE,EAAQnzE,GAAGoqC,MACb+oC,EAAQnzE,GAAGoqC,KAAKje,EAAKjF,EAExB,GACD,ICxBM0gB,GAAQ,CAAC,OAAO,OAAO,OAAO,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,mDAErE,SAAczb,GACpB,IAAIynD,EACA18C,OAAO28C,iBAAmB,IAAIA,gBAAkBzb,UACnDwb,EAAWxmD,MAAMa,GAAG,CACnB9B,KAAK,WACL2nD,SAAQ,EACRC,OAAQnsC,GAAM1mC,UAGNgvB,YAAY,kBAAkB9C,MAAMhF,MAAK,SAASgwC,GAU1D,OATGxwB,GAAM3lC,QAAQ,IAAIm2D,EAAOtkC,KAAKtyB,gBAAgB,IAChD2qB,EAAKzI,QAED00C,EAAOvsC,KAAK8B,UACfyqC,EAAOvsC,KAAK8B,QAAU,IACvBP,MAAMgH,OAAOgkC,EAAOvsC,KAAK8B,QAAS,CAACqmD,WAAW,EAAOC,WAAY9nD,EAAKuB,OAAOumD,aAE7E9nD,EAAKhK,MAAMi2C,EAAOvsC,KAAM,WAElB,IACNrM,OAEF2M,EAAK6iB,iBAAiBrqC,KAAKivE,IAG5BznD,EAAK+D,YAAY,aAAa,SAACzB,GACf,iBAAXA,EAAIpL,IAKV,SAAqB8I,EAAMynD,GACrBA,EAGJxmD,MAAMkL,OAAM,WAAA,OAAMs7C,EAASM,gBAF3B/nD,EAAKylC,MAAMxkC,MAAMC,KAAKC,YAAYxE,OAAO,sBAG3C,CATGqrD,CAAYhoD,EAAMynD,EACpB,GACD,ICiOA,SAASQ,GAAWp7C,GAGnB,OADkB,KADlBA,EAAMA,EAAI53B,UAAU,IACbb,SAAcy4B,GAAUA,GACxBA,CACR,CA4GA,SAASq7C,GAAc71C,EAAQ81C,EAAO3mD,GACrC,IAAIqL,EAAMwF,EAAO78B,MAAM,KACnB+8B,EAAM,CAAA,EACP41C,IACF51C,EAAM,CAAEnV,KAAK,CAAE,EAAEgrD,UAAU,CAAE,EAAEt3C,OAAO,CAAC,IAExC,IAAI,IAAI38B,EAAI,EAAGA,EAAE04B,EAAIz4B,OAAQD,IACzB04B,EAAI14B,KACHg0E,EACFE,GAAmB91C,EAAK1F,EAAK14B,GAE7Bm0E,GAAiB/1C,EAAK1F,EAAK14B,EAAGqtB,EAAQtB,QAIzC,OAAOqS,CACR,CAkCA,SAAS81C,GAAmB91C,EAAK1F,EAAK14B,GACrC,OAAQ47B,GAAY57B,IACnB,IAAK,QACJo+B,EAAInV,KAAKyB,MAAQ,CAAC0pD,IAAIN,GAAWp7C,EAAI14B,KACrC,MACD,IAAK,aACJ,IAAMq0E,EAAOP,GAAWp7C,EAAI14B,IACzBq0E,GAA+B,WAAvBA,EAAKnzE,gBACfk9B,EAAIi2C,KAAO,CAAEC,QAAQ,CAAEF,IAAIC,KAC5B,MAED,IAAK,aACJj2C,EAAI61C,UAAUjgD,WAAa0E,EAAI14B,GAC/B,MACD,IAAK,cACJo+B,EAAInV,KAAKld,KAAO2sB,EAAI14B,GAAG8B,QAAQ,UAAW,IAC1C,MACD,IAAK,YACJs8B,EAAInV,KAAKsrD,GAA8B,IAAzB77C,EAAI14B,GAAG8B,QAAQ,KAAM,IACnC,MACD,IAAK,aACJs8B,EAAInV,KAAKurD,OAAmB,UAAV97C,EAAI14B,GACtB,MACD,IAAK,YACJo+B,EAAInV,KAAK+B,UAAsB,aAAV0N,EAAI14B,GACzB,MACD,IAAK,SACJo+B,EAAInV,KAAKgC,OAAmB,UAAVyN,EAAI14B,GACtB,MACD,IAAK,cACJo+B,EAAInV,KAAKwrD,KAAiB,QAAV/7C,EAAI14B,GACpB,MACD,IAAK,iBACJo+B,EAAI61C,UAAU1T,SAAqB,UAAV7nC,EAAI14B,GAAe,SAAS04B,EAAI14B,GACzD,MACD,IAAK,OACJo+B,EAAI61C,UAAUS,SAAqB,QAAVh8C,EAAI14B,GAC7B,MACD,IAAK,UACJ,MACD,IAAK,SACJo+B,EAAI/U,OAAS4Z,GAAgBvK,EAAI14B,IAAI,IAAS,GAC9C,MACD,IAAK,eACL,IAAK,gBACL,IAAK,cACL,IAAK,aACJo+B,EAAIzB,OAAQf,GAAY57B,GAAGqB,MAAM,KAAK,IAAOszE,GAAgBj8C,EAAI14B,IAAI,GACrE,MACD,IAAK,SACJo+B,EAAI61C,UAAU33C,OAAS5D,EAAI14B,GAG9B,CAEA,SAASm0E,GAAiB/1C,EAAK1F,EAAK14B,EAAG+rB,GACtC,OAAQ6P,GAAY57B,IACnB,IAAK,QACJo+B,EAAI1T,MAAQopD,GAAWp7C,EAAI14B,IAC3B,MACD,IAAK,aACJo+B,EAAItN,gBAAkBgjD,GAAWp7C,EAAI14B,IACrC,MACD,IAAK,aACJo+B,EAAIw2C,UAAYl8C,EAAI14B,GACpB,MACD,IAAK,cAuBL,IAAK,UAEL,IAAK,SACJ,MAxBD,IAAK,YACJo+B,EAAI1B,SAAoC,IAAzBhE,EAAI14B,GAAG8B,QAAQ,KAAM,IACpC,MACD,IAAK,aACJs8B,EAAIo2C,OAAmB,UAAV97C,EAAI14B,GACjB,MACD,IAAK,YACJo+B,EAAIpT,UAAsB,aAAV0N,EAAI14B,GACpB,MACD,IAAK,SACJo+B,EAAIy2C,cAA0B,UAAVn8C,EAAI14B,GACxB,MACD,IAAK,cACJo+B,EAAIq2C,KAAiB,QAAV/7C,EAAI14B,GACf,MACD,IAAK,iBACJo+B,EAAI02C,UAAYp8C,EAAI14B,GACpB,MACD,IAAK,OACJo+B,EAAI22C,WAAwB,UAAVr8C,EAAI14B,GACtB,MAKD,IAAK,eACL,IAAK,gBACL,IAAK,cACL,IAAK,aACJ,IAAMw8B,EAAMZ,GAAY57B,GAAGqB,MAAM,KAAK,GACtC+8B,EAAG,SAAAl+B,OAAUs8B,EAAI,GAAG97B,cAAgB87B,EAAI17B,UAAU,GAAU,UAAG6zE,GAAgBj8C,EAAI14B,IACnF,MAED,IAAK,SACJ,GAAG04B,EAAI14B,GAAG,CACT,IAAM+L,EAAI,UAAA7L,OAAwB,SAAVw4B,EAAI,GAAgB,QAAU,QAChD1C,EAAUjK,GAASA,EAAMhgB,GAAQggB,EAAMhgB,GAAQ,GACrDqyB,EAAIryB,GAAQiqB,EAAmB,EAAT0C,EAAI14B,EAC3B,EAGH,CAEA,SAAS20E,GAAgBtvC,EAAK2uC,GAC7B,IAAoCgB,EAAA7iD,GAAdkT,EAAIhkC,MAAM,KAAI,GAA7BqpB,EAAKsqD,EAAA,GAAExhD,EAAIwhD,EAAA,GAElB,OAAGhB,EACK,CAAEtpD,MAAM,CAAE0pD,IAAIN,GAAWppD,IAASmG,MAAM2C,GAExCsgD,GAAWppD,EACpB,CAEA,SAASuqD,GAAazmD,GACrB,IAAIA,EAAK,MAAO,GAEhB,IADA,IAAMkK,EAAM,GACJh5B,EAAG,EAAGA,EAAEk8B,GAAY37B,OAAQP,IACnCg5B,EAAIr0B,KAAKmqB,EAAIoN,GAAYl8B,KAAK,IAC/B,OAAOq0E,GAAcr7C,EAAI93B,KAAK,MAAM,EACrC,2CAthBO,SAAcirB,GACpB,IAAME,EAAQF,EAAKgU,OACnBhU,EAAKqpD,YAAc,SAAS7nD,GAC3B,IAAM8nD,EAA6B,OAAvB9nD,EAAQ+nD,YACdpB,EAA+B,SAAvB3mD,EAAQ+nD,YAChBC,EAAiB,CACtBC,WAAW,EACX/8B,QAAQ,EACRg9B,QAAO,EACPC,SAAQ,EACRC,WAAYN,EACZO,YAAW,EACXl6C,OAAO,EACP0C,QAAO,EACPvc,MAAOwzD,EACPhgC,OAAQ6+B,EACR7vB,YAAap4B,EAAMqB,OAAOmrB,QAAUlrB,EAAQ8nB,OAAS,EAAI,EACzDw2B,OAAO,CAACxrB,OAAM,GACduO,YAAW,GAKZ,OAFA5hC,MAAMgH,OAAOzG,EAASgoD,GAEnBrB,GAASmB,EAsDd,SAAqBtpD,EAAMwB,GAAQ,IAAAsoD,EAAAzkD,UAAAwc,EAAAxuB,KAC5B80D,EAA+B,SAAvB3mD,EAAQ+nD,aAEA,IAAnB/nD,EAAQjD,OACViD,EAAQjD,OAASyB,EAAKsS,QAAQ35B,KAAI,SAASxE,GAAI,OAAOA,EAAE+L,IAAM,IACtDshB,EAAQjD,QAAWiD,EAAQjD,OAAOnqB,OAEV,iBAAlBotB,EAAQjD,SACtBiD,EAAQjD,OAAS,CAACiD,EAAQjD,SAF1BiD,EAAQjD,OAAS,CAACyB,EAAKsvB,cAIxB,GAAI64B,GAEC,GAAGnoD,EAAKsS,QAAQl+B,QAAUotB,EAAQjD,OAAOnqB,OAC7C,IAAI,IAAIP,EAAI,EAAGA,EAAImsB,EAAKsS,QAAQl+B,OAAQP,IAAI,CAE3C,IAAMiqB,EAAQkC,EAAKsS,QAAQz+B,GACT,cAAfiqB,EAAMoI,QAAgE,GAAvC1E,EAAQjD,OAAOzoB,QAAQgoB,EAAM5d,OAC9DshB,EAAQjD,OAAO/lB,KAAKslB,EAAM5d,KAC5B,OAPAshB,EAAQjD,OAASiD,EAAQjD,OAAOjZ,QAAO,SAAAwY,GAAK,OAAIokB,GAAUliB,EAAMlC,EAAM,IAUvE0D,EAAQuoD,UAAW,EAKnB,IAHA,IAAIhvD,EAAO,GACPyuB,EAASxpB,EAAKsvB,aAAa3jB,EAAA,SAAAk4C,GAG9B,IAAM/lD,EAAQ0D,EAAQjD,OAAO1qB,GACvBqjB,EAAK4G,EAAM5G,IAAM4G,EAEvBkC,EAAKqmB,UAAUnvB,GAEf,IAAMg9B,EAAUl0B,EAAK4U,MACrB5U,EAAKghB,YAAW,WAAA,OAAMhhB,EAAKuQ,KAAK,MAE7B/O,EAAQ8nB,SACV9nB,EAAQ82B,YAAc,GAEvB,IAAM0xB,EAAelsD,EAAM0D,QAAUP,MAAMgH,OAAOnK,EAAM0D,QAASA,GAAWP,MAAMvG,KAAK8G,GACpFtK,GAAMsyB,IACRwgC,EAAaC,SAAU,GACpBD,EAAa9pE,OAChB8pE,EAAa9pE,KAAOgX,GAErB,IAAMgzD,GAAY/B,GAAiC,SAAxB6B,EAAa3rD,QAElC2W,EAAahV,EAAKlH,YACkDqxD,EAAA7jD,GAArDoJ,GAAasF,EAAWja,KAAMia,EAAWrF,MAAO,EAAG,GAAE,GAAnE7P,EAAIqqD,EAAA,GAAEhoD,EAAIgoD,EAAA,GAEjB,IAAIhC,IACAlnD,MAAM6J,YAAYk/C,EAAaI,cACjCJ,EAAaI,WAAaJ,EAAa9pE,MACrCgqE,GAAS,CACXF,EAAalK,OAASkK,EAAalK,QAAU,CAAA,EAC7C,IAAI,IAAIjsE,EAAIsuB,EAAK,EAAGtuB,GAAKmsB,EAAKuB,OAAOwyB,YAAalgD,IACjDm2E,EAAalK,OAAOjsE,IAAK,EAG1B,IAAMyR,EAAS0kE,EAAa1kE,QAAW,WAAA,OAAI,GAC3C0kE,EAAa1kE,OAAS,SAAAgd,GACrB,OAAOA,EAAIpL,IAAM4I,GAAQxa,EAAO4S,MAAM2pB,EAAMxc,GAE9C,CAGD,IAAMglD,EAAYppD,MAAMknD,EAAQ,UAAY,SAASnoD,EAAKgU,OAAQg2C,GAKlE,GAHG7B,IACFkC,EAAU,GAAGnkD,MAAQssB,GAASxyB,EAAM9I,GAAIgP,OAAS,WAE/CgkD,GAA0C,GAA9BG,EAAU,GAAGC,OAAOl2E,OAAW,OAAA,EAG9C,IAAI+zE,GAAS+B,IAAaF,EAAa33C,OAAO,CAC7C,IAAMA,EAASg4C,EAAU,GAAGh4C,OA6H/B,SAAoBrS,EAAMwB,EAAS2mD,EAAOroD,EAAMqC,GAC/CnC,EAAK+U,gBAEL,IAAItF,EAAS,GACP86C,EAAS,CAAA,EACTC,EAAmB,CAAA,EACnBxoD,EA9BP,SAAsBR,GACrB,IAAI9sB,EAAIq6B,GACR,MAA0B,SAAvBvN,EAAQ+nD,YACH,CACNnsD,KAAK,CACJsrD,GAAkB,IAAfh0E,EAAE,aACLwL,KAAKxL,EAAE,eAAeuB,QAAQ,UAAW,KAG1CmyE,UAAU,CACTjgD,WAAWzzB,EAAE,cACbggE,SAA8B,UAArBhgE,EAAE,kBAA4B,SAASA,EAAE,kBAClDm0E,SAA2B,UAAlBn0E,EAAE,iBAIN,CACNm8B,SAAyB,IAAfn8B,EAAE,aAEZq0E,UAAWr0E,EAAE,cACbw0E,WAA+B,UAAlBx0E,EAAE,eAElB,CAQkB+1E,CAAajpD,GAE3B2mD,GAAS3mD,EAAQkpD,YAAWj7C,EAAUA,EAAOp7B,OAAO,CAAC,CAAC,EAAE+0E,GAAa5nD,EAAQkpD,UAAU/nD,MAAiB,CAAA,KACxGnB,EAAQkrB,QAAQjd,EAAOj3B,KAAK,CAAE,GAEjC,IAAMmyE,EAAQl7C,EAAOr7B,OAEfu0B,EAAO3I,EAAKiD,GAAG,SAEjB2nD,EAASD,EACbhiD,EAAK05B,SAAQ,SAAAhpC,GACZ,KAAGA,EAAMyG,GAAT,CAGA,IAAI+qD,EAAS,EACbliD,EAAK+rB,YAAW,SAAA3nB,GACf,KAAG89C,EAAS1oD,GAAZ,CAGA,GAAG0oD,GAAUrpD,EAAQ82B,YAAY,CAChC,IAKIjmB,EA6BA1K,EAlCEhF,EAAMuP,GAASlS,EAAM,CAAC3G,IAAAA,EAAKoE,OAAOsP,GAAM,MAAM,GAC9CP,EAAQq+C,EAASrpD,EAAQ82B,YAK/B,GAHA7oB,EAAOm7C,GAAUn7C,EAAOm7C,IAAW,CAAA,EAGhCjoD,EACF,GAAG4nD,EAAO5nD,EAAIzL,IACbmb,EAASpR,MAAMvG,KAAK6vD,EAAO5nD,EAAIzL,SAC5B,CAGH,IAAI,IAAIhX,KAFRmyB,EAAS61C,GAAcvlD,EAAItF,KAAM8qD,EAAO3mD,GAExBQ,EACZmmD,EACFlnD,MAAMgH,OAAOoK,EAAOnyB,GAAO8hB,EAAS9hB,IAC3BmyB,EAAOnyB,KAChBmyB,EAAOnyB,GAAQ8hB,EAAS9hB,IAG1BqqE,EAAO5nD,EAAIzL,IAAM+J,MAAMvG,KAAK2X,EAC7B,MAGAA,EAASpR,MAAMvG,KAAKsH,GAErB,GAAGR,EAAQqhC,WAAW,CAErB,IAAM9kC,EA+CX,SAA4BiC,EAAM5sB,EAAGkB,EAAGi2E,GACvC,IAAMruB,EAAWgN,GAAiBlpC,EAAM5sB,EAAGkB,GACrCquB,EAAMsgC,GAAgBjjC,EAAM5sB,EAAGkB,EAAG4nD,GACxC,GAAGv5B,EAAI,CACN,GAAG4nD,EAAO5nD,GACT,OAAO4nD,EAAO5nD,GACf,IAAMomC,EAAK9nC,MAAM6Q,KAAK4D,OAAO,MAAO,CAAC6W,MAAQ5pB,IAC7CqjB,SAASvkB,KAAKwS,YAAY80B,GAE1B,IAAM+hB,EAAW//C,OAAOggD,iBAAiBhiB,GACnCiiB,EAAKF,EAAS7lD,gBACdpG,EAAQisD,EAASjsD,MAKvB,OAHAmnB,SAASvkB,KAAK2S,YAAY20B,GAE1BwhB,EAAO5nD,GAAO,CAACqoD,EAAInsD,GACZ0rD,EAAO5nD,EACf,CACD,CAjEuBsoD,CAAmBjrD,EAAM3G,EAAK0T,EAAKy9C,GAClDzsD,GAkER,SAA+BwU,EAAKxU,EAAWoqD,GAC9C,IAAA+C,EAAkBntD,EAAUplB,KAAI,SAAA6gC,GAAG,OAAIvY,MAAMpC,MAAMssD,SAAS3xC,MAAK4xC,EAAA9kD,GAAA4kD,EAAA,GAA5DF,EAAEI,EAAA,GAAEvsD,EAAKusD,EAAA,GACXjD,GACF51C,EAAIi2C,KAAO,CAACC,QAAQ,CAACF,IAAIyC,IACzBz4C,EAAInV,KAAKyB,MAAQ,CAAC0pD,IAAI1pD,KAGtB0T,EAAItN,gBAAkB+lD,EACtBz4C,EAAI1T,MAAQA,EAEd,CA3EMwsD,CAAsBh5C,EAAQtU,EAAWoqD,EAC3C,CAKA,GAHA14C,EAAOm7C,GAAQp+C,GAAS6F,EAGrB7Q,EAAQ1L,KAAK,CACf,IAAMA,EAAOkK,EAAKmG,aAAa9M,EAAK0T,GACpC,GAAkB,iBAARjX,GAA+B,KAAXA,EAAK,IAAaA,EAAK1hB,OAAS,EAAE,CAC/D,IAAM2e,EAAQiN,EAAKmG,aAAa9M,EAAK0T,GAAK,GACvC74B,MAAM6e,KACR4U,EAAO,SACT,CACD,CAEA8H,EAAOm7C,GAAQp+C,GAAO7E,KAAOA,GAAQwY,GAAQngB,EAAM3G,EAAK0T,EACzD,CACA89C,GAjDC,CAkDF,GAAGrpD,EAAQ8nB,QACXshC,GAxDC,CAyDF,GAAGppD,EAAQ8nB,QAER6+B,GAAS3mD,EAAQm5B,YAAWlrB,EAAUA,EAAOp7B,OAAO,CAAC,GAAG,CAAC,EAAE+0E,GAAa5nD,EAAQm5B,UAAUh4B,SAE7F,OAAO8M,CACR,CA7MwC67C,CAAWtrD,EAAMgqD,EAAc7B,EAAOroD,EAAMqC,GAE9E+nD,GA+BN,SAAwB73C,EAAQg4C,EAAWL,EAAchqD,EAAMgV,GAC9D,IAAM0X,EAASs9B,EAAat9B,OAAS,EAAI,EAEzC,GAAIs9B,EAAar6C,MAEhB,IADA,IAAMA,EAAQqF,EAAWrF,MAAM1qB,MAAK,SAAChR,EAAEkB,GAAC,OAAKlB,EAAE,GAAGkB,EAAE,GAAG,EAAGlB,EAAE,GAAGkB,EAAE,IAAI,EAAE,KAC9DtB,EAAI,EAAGA,EAAI87B,EAAMv7B,OAAQP,IACjC,GAAI87B,EAAM97B,GAAG,GAAK,EAAG,CACpB,IAAIwlB,EAAMsW,EAAM97B,GAAG,GAAK,EAAI64C,EAC3B3f,EAAM4C,EAAM97B,GAAG,GAAK,EACpBsuB,EAAOwN,EAAM97B,GAAG,GACjB,GAAIw+B,EAAOhZ,IAAQgZ,EAAOhZ,GAAK0T,GAAM,CACpCsF,EAAOhZ,GAAK0T,GAAKw+C,QAAUppD,EAE3B,IAAMqpD,EAAUnB,EAAU,GAAGoB,WAAWpyD,EAAMqzB,GAC1C8+B,GAEHA,EAAQvzD,OAAO8U,EAAM,EAAG5K,EAAO,GAEhC,IAAI6C,EAAQ1uB,OAAOsc,OAAOyf,EAAOhZ,IACjC2L,EAAM/M,OAAO8U,EAAM,EAAG5K,EAAO,GAC7BkQ,EAAOhZ,GAAO2L,CACf,CACD,CAKF,IADA,IAAMjK,EAAOsvD,EAAU,GAAGoB,WAClBr4E,EAAI,EAAGA,EAAI2nB,EAAK3mB,OAAQhB,IAC/B,IAAK,IAAIkB,EAAI,EAAGA,EAAIymB,EAAK3nB,GAAGgB,OAAQE,IAAK,CACxC,IAAIolB,EAASsG,EAAKiD,GAAG,SAAS1B,OAAOgH,UAErC,GAAGyhD,EAAaL,SAAW30C,EAAWyK,MAAMrrC,OAC3C,IAAI,IAAID,EAAI,EAAGA,EAAI6gC,EAAWyK,MAAMrrC,OAAQD,IAAI,CAC/C,IAAMu3E,EAAU12C,EAAWyK,MAAMtrC,GAAG,GACpC,GAAGu3E,GAAWA,GAAWt4E,EAAE,EAAE,CAC5BsmB,EAASsb,EAAWyK,MAAMtrC,GAAG,GAC7B,KACD,CACD,CAGD,IAAM+sD,EAAY7uB,EAAOj/B,EAAIs5C,GAAQp4C,GAC/BipB,EAAQ2jC,EAAU+nB,UAClB0C,EAAa,IAAPjyD,EAAcwnC,EAAUrwB,SACpCqwB,EAAU0qB,WAAuB,OAATruD,EAAiB,EAAc,UAATA,EAAoBouD,EAAMA,EAAM,EAC9EzqB,EAAU2qB,cAA0B,UAATtuD,EAAoB,EAAc,OAATA,EAAiBouD,EAAMA,EAAM,CAClF,CAEF,CA9EIG,CAAez5C,EAAQg4C,EAAWL,EAAchqD,EAAMgV,EACxD,CAEAja,EAAOA,EAAK1mB,OAAOg2E,GAEhBlC,GACFptD,EAAKlnB,GAAGq5B,OAAS,GAEjBlN,EAAKkN,OAAOpU,UAAU5B,GAAI3e,SAAQ,SAAAylB,GACjC,IAAM2nC,EAAM3nC,EAAM,GAAGxoB,MAAM,KAC3BulB,EAAKlnB,GAAGq5B,OAAO10B,KAAK,CACnBuzE,MAAO/tD,EAAM,GAAK,KAAOnqB,EACzBm4E,KAAMhuD,EAAM,GACZiuD,IAAKtmB,EAAI,GAAG,IAAIA,EAAI,GAAG1vD,QAAQ,mBAAmB,SAAC8B,GAAK,MAAA1D,IAAAA,OAAO0D,OAEjE,KAGGypB,EAAQgJ,WA8Dd,SAAsBxK,EAAMwB,GAC3B,IACI/H,EADEyyD,EAAO1qD,EAAQ2qD,aAAsC,aAAvB3qD,EAAQ2qD,YAA6B,SAAW,QAInF1yD,EADEuG,EAAK3P,OACC2P,EAAK3P,OAEL2P,EAAKksD,GAEd1qD,EAAQ0qD,GAAQv4E,KAAKsT,IAAIua,EAAQ0qD,IAAS,EAAGzyD,GAAS,EACvD,CAvEI2yD,CAAapC,EAAcxoD,GAG7BxB,EAAKghB,YAAW,WAAA,OAAMhhB,EAAKuQ,KAAK2jB,OAzEzBrgD,EAAI,EAAGA,EAAE2tB,EAAQjD,OAAOnqB,OAAQP,IAAG83B,EAAAk4C,GA8E3C,OAFA7jD,EAAKqmB,UAAUmD,UACRhoB,EAAQuoD,SACRhvD,CACR,CA9JUsxD,CAAYrsD,EAAMwB,GAElBtB,GAGTA,EAAMosD,gBAAkB,SAASjzD,EAAKoE,EAAQ+D,GAC7C,IAAIzO,EAAQiN,EAAKmG,aAAa9M,EAAKoE,EAAQ+D,EAAQ1L,MAC7Cqb,EAAO3P,EAAQ+nD,YACfzzD,EAAO0L,EAAQ1L,MAAoB,KAAZ/C,EAAM,IAAaA,EAAM3e,OAAS,EAE/D,GAAY,OAAR+8B,GAAyB,OAARA,GAAmBrb,GAAS0L,EAAQooD,WAEpD,GAAW,SAARz4C,GAAmBrb,EAC1B,GAAG,yBAAyB1P,KAAK2M,GAChCA,EAAQ,OACL,CAKH,IAJA,IAEIw5D,EAAaC,EAAa7mB,EAFxBzuC,EAAK8I,EAAK0S,OAAO7a,OAAOwB,EAAM,EAAGoE,EAAS,GAIxCrqB,EAAIimB,EAAI,EAAGjmB,GAAK4sB,EAAKuB,OAAOkF,SAAUrzB,IAAI,CACjD,IAAMkqB,EAAO0C,EAAK0S,OAAOha,QAAQtlB,EAAI,EAAGqqB,EAAS,GACjD,IAAGH,GAAQA,EAAKte,SAAWkY,EAEtB,MADJq1D,EAAcn5E,CAEhB,CAEA,IAAI,IAAIkB,EAAImpB,EAAO,EAAGnpB,GAAK0rB,EAAKuB,OAAOwyB,YAAaz/C,IAAI,CACvD,IAAMgpB,EAAO0C,EAAK0S,OAAOha,QAAQW,EAAM,EAAG/kB,EAAI,GAC9C,IAAGgpB,GAAQA,EAAKte,SAAWkY,EAEtB,MADJs1D,EAAcl4E,CAEhB,EAEGk4E,GAAeD,KACjB5mB,EAAMn4B,GAAQnU,EAAKoE,EAAQ8uD,GAAelzD,EAAKmzD,GAAe/uD,IAE/D,IAAMgvD,EAAYzsD,EAAKmG,aAAa9M,EAAKoE,GAAQ,GAC9C,wBAAwBrX,KAAK2M,KAC/BA,EAAQ05D,EAAY,UAAY,YAEjC15D,EAAQ,CACPA,MAAO,iBAAiB3M,KAAK2M,GAASA,EAAMvd,MAAM,KAAM,GAAKi3E,EAC7DnxD,QAASvI,EACT4yC,IAAAA,EAEF,OAnCA5yC,EAAQm2C,GAAiBlpC,EAAM3G,EAAKoE,GAsCrC,OAAO1K,EAET,IC7CA,SAAS25D,GAAepqD,EAAK4K,EAAQV,EAAOoM,GAI3C,IAHA,IAAM+zC,EAAU1rD,MAAMvG,KAAK4H,EAAIvH,MACzBA,EAAQ,GAAG4Q,EAAA,SAAA93B,GAGhB,IADuC,IAAA2hD,EAAA,SAAAlhD,GAEtC,IAAM+kB,EAAMxlB,EAAE,EAAG4pB,EAASnpB,EAAE,EACxBklC,EAAMmzC,EAAQ94E,GAAGS,GACrB,GAAGguB,EAAIsqD,MAAMx4E,OAAO,CACnB,IAAIq/C,EAAOrkC,GAAKkT,EAAIsqD,OAAO,SAAAn5B,GAAI,OAAIA,EAAK,IAAM5/C,GAAK4/C,EAAK,IAAMn/C,KAC3Dm/C,IACFA,EAAyB,iBAAXA,EAAK,IAAgC,KAAdA,EAAK,GAAG,GAAYA,EAAK,GAAGnoC,MAAM,GAAE,IAAAjX,OAAOo/C,EAAK,GAAK,KAC1Fja,EAAoB,iBAAPA,GAA6B,KAAVA,EAAI,GAAYA,EAAIluB,MAAM,GAAEjX,IAAAA,OAAOmlC,EAAM,KACzEA,EAAG,cAAAnlC,OAAiBo/C,QAAIp/C,OAAKmlC,EAAM,KAErC,CACAze,EAAKviB,KAAK,CAAC6gB,EAAKoE,EAAQ+b,KAXjBllC,EAAI,EAAGA,EAAEq4E,EAAQ,GAAGv4E,OAAQE,IAAGkhD,EAAAlhD,IAD/BT,EAAI,EAAGA,EAAI84E,EAAQv4E,OAAQP,IAAG83B,EAAA93B,GAkBvC,GAHAyuB,EAAIvH,KAAOA,EAGRuH,EAAIqN,MACN,IAAI,IAAI97B,EAAI,EAAGA,EAAEyuB,EAAIqN,MAAMv7B,OAAQP,IAClCyuB,EAAIqN,MAAM97B,GAAG,KACbyuB,EAAIqN,MAAM97B,GAAG,KAKf,GAAGq5B,EACF,IAAI,IAAI95B,EAAI,EAAGA,EAAI85B,EAAO94B,OAAQhB,IAAI,CACrC,IAAMy5E,EAAa3/C,EAAO95B,GAAG24E,MACvBe,EAAO7rD,MAAM6J,YAAY+hD,IAC5BC,GAAQD,IAAergD,KACzBlK,EAAI4K,OAAS5K,EAAI4K,QAAU,GAC3B5K,EAAI4K,OAAO10B,KAAK,CAAC00B,EAAO95B,GAAG44E,KAAKn3E,cAAeq4B,EAAO95B,GAAG64E,IAAIh3E,UAAUi4B,EAAO95B,GAAG64E,IAAIn2E,QAAQ,KAAK,GAAGG,QAAQ,MAAO,IAAK62E,IAE3H,CAeD,GAXGxqD,EAAI+P,QAgFR,SAAoB/P,EAAKsW,GAIxB,IAHA,IAAIm0C,EAAc,EACZC,EAAa,CAAE,EAAE36C,EAAS,GAAI5R,EAAU,GAEtC5sB,EAAI,EAAGA,EAAEyuB,EAAI+P,OAAOj+B,OAAQP,IAAI,CAGvC,IAFA,IAAIg5B,EAAM,GAAI0F,EAAMjQ,EAAI+P,OAAOx+B,GAAG,GAAI8uB,OAAG,EAACihD,EAAAA,WAGzC,OAAQ7zC,GAAY57B,IACnB,IAAK,QACJ04B,EAAI14B,GAAKo+B,EAAInV,MAAQmV,EAAInV,KAAKyB,OAASopD,GAAW11C,EAAInV,KAAKyB,MAAM0pD,MAAc,GAC/E,MACD,IAAK,aACJ17C,EAAI14B,GAAKo+B,EAAIi2C,MAAQj2C,EAAIi2C,KAAKC,SAAWR,GAAW11C,EAAIi2C,KAAKC,QAAQF,MAAc,GACnF,MACD,IAAK,aACJ17C,EAAI14B,IAAMo+B,EAAI61C,UAAY71C,EAAI61C,UAAUjgD,WAAa,KAAO4G,GAAc,cAC1E,MACD,IAAK,cACJlC,EAAI14B,GAAKo+B,EAAInV,MAAQmV,EAAInV,KAAKld,KAAO+sE,GAAU16C,EAAInV,KAAKld,MAAQ,GAChE,MACD,IAAK,YACJ2sB,EAAI14B,GAAKo+B,EAAInV,MAAQmV,EAAInV,KAAKsrD,IAAOn2C,EAAInV,KAAKsrD,GAAG,IAAM,MAAc,GACrE,MACD,IAAK,aACJ77C,EAAI14B,GAAKo+B,EAAInV,MAAQmV,EAAInV,KAAKurD,OAAS,SAAW,GAClD,MACD,IAAK,YACJ97C,EAAI14B,GAAKo+B,EAAInV,MAAQmV,EAAInV,KAAK+B,UAAY,YAAc,GACxD,MACD,IAAK,SACJ0N,EAAI14B,GAAKo+B,EAAInV,MAAQmV,EAAInV,KAAKgC,OAAS,SAAW,GAClD,MACD,IAAK,cACJyN,EAAI14B,GAAKo+B,EAAInV,MAAQmV,EAAInV,KAAKwrD,KAAO,OAAS,GAC9C,MACD,IAAK,iBACJ,IAAMsE,EAAK36C,EAAI61C,WAAa71C,EAAI61C,UAAU1T,UAAkB,GAC5D7nC,EAAI14B,IAAY,UAAN+4E,EAAiB,SAAWA,IAAOn+C,GAAc,kBAC3D,MAED,IAAK,OACJlC,EAAI14B,GAAKo+B,EAAI61C,WAAa71C,EAAI61C,UAAUS,SAAW,OAAS,SAC5D,MACD,IAAK,UACJh8C,EAAI14B,GAAK,GACT,MACD,IAAK,SACJ,IAAIqpB,EAAS+U,EAAI46C,OACbjtE,EAAO,GACRsd,GAAoB,WAAVA,IACZA,EAASA,EAAOyoC,WAAW,KAAM,IAEhC/lD,EADE01B,GAAYpY,GACPoY,GAAYpY,GACZob,EAAI1F,MAAM1V,GACVob,EAAI1F,MAAM1V,GAEVob,EAAI1F,MAAM1V,GAAU,MAAOob,EAAIlI,QAEnCthB,GAAKqR,GAAS,SAAAiH,GAAG,OAAIA,EAAI,IAAMxnB,MAClCugB,EAAQjoB,KAAK,CAAC0H,EAAMsd,KAEtBqP,EAAI14B,GAAK+L,EACT,MAED,IAAK,eACL,IAAK,gBACL,IAAK,cACL,IAAK,aACJ2sB,EAAI14B,GAAKi5E,GAAiBr9C,GAAY57B,GAAIo+B,GAC1C,MACD,IAAK,SACJ1F,EAAI14B,GAAKo+B,EAAI61C,WAAa71C,EAAI61C,UAAU33C,OAAS8B,EAAI61C,UAAU33C,OAAS,KAjEnEt8B,EAAK,EAAGA,EAAE47B,GAAY37B,OAAQD,IAAGyvE,IAsEzCjhD,EAAMqqD,EADNngD,EAAMA,EAAI93B,KAAK,OACU,MAAMg4E,EAE/B,IAAI,IAAIr4E,EAAI,EAAGA,EAAE4tB,EAAIvH,KAAK3mB,OAAQM,IACjC,GAAG4tB,EAAIvH,KAAKrmB,GAAG,KAAO4tB,EAAI+P,OAAOx+B,GAAG,GAAG,GAAKyuB,EAAIvH,KAAKrmB,GAAG,KAAO4tB,EAAI+P,OAAOx+B,GAAG,GAAG,EAAE,CACjFyuB,EAAIvH,KAAKrmB,GAAG,GAAKiuB,EACjB,KACD,CAEGqqD,EAAWngD,KACdwF,EAAO75B,KAAK,CAACmqB,EAAKkK,IAClBmgD,EAAWngD,GAAOlK,EAClBoqD,IAEF,CAEAzqD,EAAI7B,QAAUA,EACd6B,EAAI+P,OAASA,CACd,CA7KEi5C,CAAWhpD,EAAKsW,GAEdtW,EAAImZ,OAoCR,SAAmBnZ,GAClBA,EAAImZ,MAAMljC,SAAQ,SAAAovB,GACjB,IAAI,IAAI9zB,EAAI,EAAGA,EAAIyuB,EAAIvH,KAAK3mB,OAAQP,IACnC,GAAGyuB,EAAIvH,KAAKlnB,GAAG,KAAO8zB,EAAK,GAAG,GAAKrF,EAAIvH,KAAKlnB,GAAG,KAAO8zB,EAAK,GAAG,EAAE,CAC/DrF,EAAIvH,KAAKlnB,GAAG,GAAK8zB,EAAK,GACtB,KACD,CAEF,GACD,CA5CE0lD,CAAU/qD,GAERA,EAAIgnB,QA4CR,SAAoBhnB,GAMnB,IALA,IAAMgnB,EAAS,CACdjwB,IAAI,GACJoE,OAAO,IAGA5pB,EAAI,EAAGA,EAAIyuB,EAAIgnB,OAAOl1C,OAAQP,IAAI,CACzC,IAAM4/B,EAAOnR,EAAIgnB,OAAOz1C,GACV,UAAX4/B,EAAK,GACP6V,EAAO7rB,OAAOjlB,KAAKi7B,EAAK,GAAG,GAE3B6V,EAAOjwB,IAAI7gB,KAAKi7B,EAAK,GAAG,EAC1B,CAEAnR,EAAIpC,MAAQ,CAACopB,OAAAA,EACd,CA1DEgkC,CAAWhrD,GAITA,EAAImd,MACN,IAAI,IAAI5rC,EAAI,EAAGA,EAAEyuB,EAAImd,MAAMrrC,OAAQP,IACZ,UAAnByuB,EAAImd,MAAM5rC,GAAG,GACfyuB,EAAImd,MAAM5rC,GAAK,CAAC,EAAGyuB,EAAImd,MAAM5rC,GAAG,GAAG,EAAGyuB,EAAImd,MAAM5rC,GAAG,IAEnDyuB,EAAImd,MAAM5rC,GAAK,CAACyuB,EAAImd,MAAM5rC,GAAG,GAAG,EAAG,EAAGyuB,EAAImd,MAAM5rC,GAAG,IAItD,OAAOyuB,CACR,CAGA,SAAS2lD,GAAWp7C,GAGnB,OADkB,KADlBA,EAAMA,GAAO,UACNz4B,SAAcy4B,EAAMA,EAAI53B,UAAU,IAClC,IAAI43B,CACZ,CAGA,SAASogD,GAAUpgD,GAElB,IADA,IAAI0gD,EAAOx+C,GAAc,eACjBl7B,EAAI,EAAGA,EAAEuqD,GAAWhqD,OAAQP,IACnC,GAAGuqD,GAAWvqD,GAAGkf,OAAS8Z,EAAK,CAAE0gD,EAAOnvB,GAAWvqD,GAAGqjB,GAAI,KAAO,CAElE,OAAOq2D,CACR,CA8BA,SAASH,GAAiBz8C,EAAK4B,GAE9B,GADA5B,EAAMA,EAAI16B,QAAQ,UAAW,IAC1Bs8B,EAAIzB,QAAUyB,EAAIzB,OAAOH,GAAK,CAChC,IAAMG,EAASyB,EAAIzB,OAAOH,GAC1B,GAAGG,EAAOjS,MAAM,CACf,IAAMA,EAAQopD,GAAWn3C,EAAOjS,MAAM0pD,MAAQ,GACxC5gD,EAAOmJ,EAAO9L,OAAS,GAC7B,MAAA,GAAA3wB,OAAUwqB,EAAKxqB,KAAAA,OAAIszB,EACpB,CACD,CACA,MAAO,EACR,2CA1JO,SAAc3H,GACpBA,EAAKwtD,YAAc,SAASlrD,EAAKmrD,GAChC,IAAMjsD,EAAUc,EAAId,SAAW,GAC/BA,EAAQ1L,KAAOkK,EAAKuB,OAAOzL,KAI3B,IAFA,IAAM43D,EAAO,CAAEnvD,OAAO,IAChBqa,EAAM,CAAClI,MAAOiF,GAAczC,MAAM,CAAC,GACjCr/B,EAAK,EAAGA,EAAGyuB,EAAIisC,MAAMn6D,OAAQP,IACpC2tB,EAAQthB,KAAOoiB,EAAIisC,MAAM16D,GACzB65E,EAAKnvD,OAAO/lB,KAAK,CAChB0H,KAAKshB,EAAQthB,KACbgmB,MAAM5D,EAAIqrD,OAAO95E,GACjBm2B,QAAQ0iD,GAAee,EAAOj7B,SAASlwB,EAAKd,GAAUc,EAAI4K,OAAQr5B,EAAG+kC,KAGvE,OAAO80C,GAER1tD,EAAK4tD,UAAY,SAAStrD,EAAKmrD,GAC9BnrD,EAAMmrD,EAAOI,WAAWvrD,GAKxB,IAHA,IAAMqqD,EAAU1rD,MAAMvG,KAAK4H,GACrBvH,EAAO,GAELlnB,EAAI,EAAGA,EAAI84E,EAAQv4E,OAAQP,IAElC,IADA,IAAI4/B,EAAOk5C,EAAQ94E,GAAG2B,MAAMi4E,EAAOnwD,MAC3BhpB,EAAK,EAAGA,EAAEm/B,EAAKr/B,OAAQE,IAAI,CAClC,IAAM+kB,EAAMxlB,EAAE,EAAG4pB,EAASnpB,EAAE,EAC5BymB,EAAKviB,KAAK,CAAC6gB,EAAKoE,EAAQgW,EAAKn/B,IAC9B,CAED,MAAO,CAAEymB,KAAAA,GAEX,8CCpCO,SAAciF,GACpBA,EAAK+D,YAAY,aAAa,SAAC+E,GAC9B,OAAQA,EAAO5R,IACd,IAAK,cACJ8I,EAAK4kD,WAAW,KAAK,CAAChyD,QAAQ,IAC9B,MACD,IAAK,cACJoN,EAAK4kD,WAAW,KAAK,CAACvyC,QAAQ,IAC9B,MACD,IAAK,4BACJrS,EAAK4kD,WAAW,KAAK,CAAC/hB,YAAY,IAClC,MACD,IAAK,yBACJ7iC,EAAK4kD,WAAW,KAAK,CAACzxB,SAAS,IAC/B,MACD,IAAK,gBACJnzB,EAAK4kD,WAAW,KAAK,CAAC5M,SAAS,IAC/B,MACD,IAAK,YACJ1yC,GAAMnS,KAAI,WACT6M,EAAK4kD,WAAW,KAAK,KACtB,IACA,MACD,IAAK,iBACJ5kD,EAAK4kD,WAAW,KAAK,CAACre,UAAU,IAGnC,GACD,ICIA,SAAS5qB,GAAS3b,EAAM9I,EAAIoO,EAAOrlB,GAClC,GAAIiX,EAOK+J,MAAM1K,QAAQW,KACtBA,EAAM,CAACA,EAAGA,QARJ,CACN,GAAGjX,GAAQA,GAAQ+f,EAAKiM,iBACvB,OACD,IAAMiF,EAAOlR,EAAKiD,GAAG,SAASoO,gBAC3BH,IACFha,EAAK,CAACga,EAAK1L,MAAMF,GAAQ4L,EAAKzL,IAAIH,IACnC,CAID,OAAOpO,CACR,CAEA,SAAS42D,GAAY9tD,EAAM9f,EAAMolB,EAAOpO,GACvC,IAAIsO,EAAQ,CAAE,EAAEC,EAAM,CAAA,GACtBvO,EAAKykB,GAAS3b,EAAM9I,EAAIoO,MAGxBE,EAAMF,GAASpO,EAAG,GAClBuO,EAAIH,GAASpO,EAAG,GAChB8I,EAAK6D,UAAU,YAAa,CAAC,CAAC3M,GAAGhX,EAAOolB,MAAMA,GAAQE,EAAOC,IAC9D,CAEA,SAASsoD,GAAQ/tD,EAAM2H,EAAMzQ,EAAIzB,EAAMxV,GAKtC,IAAI6d,EAHJ,IADA5G,EAAKykB,GAAS3b,EAAM9I,EAAIyQ,EAAM1nB,OAK3BA,GAAQA,GAAQ+f,EAAKiM,mBACvBnO,EAAQ1O,GAAK4Q,EAAKsS,SAAS,SAAAhQ,GAAG,OAAIA,EAAIpiB,MAAQD,OAD/C,CAKA,IAAM0oB,EAAO3I,EAAKiD,GAAG,SAErBqC,GAAMnS,KAAI,WACT,IADa,IAAAwY,EAAA,SAAA93B,GAEZ,GAAW,QAAR4hB,EACCqI,IAIO,OAAR6J,EAAgB46B,GAAYH,IAAcvuD,EAAGmsB,QAG/C,GAAGlC,EAAM,CACJA,EAAMkM,QAAQyV,QACjB3hB,EAAMkM,QAAQyV,MAAQ,IACvB,IAAMuuC,EAAU5+D,GAAK0O,EAAMkM,QAAQyV,OAAO,SAAA/X,GAAG,MAAY,OAARC,EAAgBD,EAAI,IAAM7zB,EAAI6zB,EAAI,IAAM7zB,KACzF,GAAGm6E,EAAQ,CACV,GAAGv4D,GAAQu4D,EAAQ,GAAE,OAAA,EAGpBA,EAAQ,GAAKv4D,CACf,KACI,CACH,GAAW,OAARkS,GACF,GAAGlS,GAAQkT,EAAKpH,OAAO0sD,WAAU,OAAA,OAG7B,GAAGx4D,GAAQkT,EAAKpH,OAAOgH,UAAS,OAAA,EAGrC,IAAM2lD,EAAU,CAAC,EAAG,EAAGz4D,GACvBy4D,EAAgB,OAARvmD,EAAgB,EAAI,GAAK9zB,EACjCiqB,EAAMkM,QAAQyV,MAAMjnC,KAAK01E,EAC1B,CACAluD,EAAK6D,UAAU,WAAY,CAAC8D,EAAK,UAAS+2C,GAAAA,GAAAA,GAAK/2C,CAAAA,EAAAA,EAAO9zB,WAAU4hB,GAAI,OAAExV,IACvE,MAECwV,GAAQuK,EAAK4U,MACbjM,EAAa,OAARhB,EAAgB,eAAiB,kBAAkB9zB,EAAG4hB,EAG7D,EAtCQ5hB,EAAIqjB,EAAG,GAAIrjB,GAAKqjB,EAAG,GAAIrjB,IAAG83B,EAAA93B,EAuCpC,GA5CA,CA6CD,mDAxFO,SAAsB4pB,GAC5BqwD,GAAYz6D,KAAM,MAAO,SAAUoK,EACpC,YAhBO,SAAmBpE,GACzBy0D,GAAYz6D,KAAM,MAAO,MAAOgG,EACjC,eAQO,SAAsBoE,GAC5BqwD,GAAYz6D,KAAM,MAAO,SAAUoK,EACpC,YAhBO,SAAmBpE,GACzBy0D,GAAYz6D,KAAM,MAAO,MAAOgG,EACjC,iBAoBO,SAAwBoE,EAAQhE,EAAOxZ,GAC7C8tE,GAAQ16D,KAAM,SAAUoK,EAAQhE,EAAOxZ,EACxC,eAhBO,SAAsBoZ,EAAKK,EAAQzZ,GACzC8tE,GAAQ16D,KAAM,MAAOgG,EAAKK,EAAQzZ,EACnC,sDCVO,SAAsBoZ,EAAKoE,EAAQxd,GACzC,OAAOq2C,GAAkBjjC,KAAMgG,EAAKoE,EAAQxd,EAC7C,WANO,SAAkBoZ,EAAKoE,EAAQyI,EAAOjmB,GAC5Cq2C,GAAcjjC,KAAMgG,EAAKoE,EAAQyI,GAAO,EAAOjmB,EAChD,IC+FA,SAASkuE,GAAWnuD,EAAM2H,EAAMuoB,EAAKvgB,GACpC,GAAGA,EACF,IAAK,IAAI97B,EAAI87B,EAAMv7B,OAAS,EAAGP,GAAK,EAAGA,IAAK,CAC3C,IAAMkrB,EAAO4Q,EAAM97B,GAEbu6E,EAAiB,OAARzmD,EAAgB,EAAI,EAC7B0mD,EAAiB,OAAR1mD,EAAgB,EAAI,EAEhC5I,EAAKqvD,IAAWl+B,GAAOnxB,EAAKqvD,GAAUrvD,EAAKsvD,GAAU,EAAIn+B,IAC3DnxB,EAAKsvD,GAAUn+B,EAAMnxB,EAAKqvD,GAAU,GAClCrvD,EAAK,GAAKA,EAAK,IAAM,GAAKA,EAAK,GAAKA,EAAK,IAAM,GACjD4Q,EAAM1X,OAAOpkB,EAAG,EAClB,KAEG,CACH,IAEIy6E,EADE3+C,EADO3P,EAAKiD,GAAG,SACFtJ,UAGnB,IAAI,IAAIN,KAAOsW,EACd,KAAW,OAARhI,GAAiBtO,EAAM62B,GAG1B,IAAK,IAAInjB,KAAO4C,EAAMtW,GACrB,KAAW,UAARsO,GAAoBoF,EAAMmjB,GAA7B,CAGA,IAAMnxB,EAAO4Q,EAAMtW,GAAK0T,GAClBwhD,EAAmB,OAAR5mD,EAAqB,EAAJtO,EAAS0F,EAAK,GAAK,EAAS,EAAJgO,EAAShO,EAAK,GAAK,EAE1EwvD,EAAWr+B,IACbo+B,GAAU,EACVE,GACCxuD,EACA,CAAC3G,EAAK0T,GACE,OAARpF,EAAgB5I,EAAK,GAAKA,EAAK,IAAMwvD,EAAWr+B,GACxC,OAARvoB,EAAgB5I,EAAK,IAAMwvD,EAAWr+B,GAAOnxB,EAAK,IAXnD,CAiBAuvD,GACFtuD,EAAK3K,SACP,CACD,CAEA,SAASm5D,GAAWxuD,EAAMjB,EAAM7lB,EAAGzD,GAClCuqB,EAAK+9B,UAAUh/B,EAAK,GAAIA,EAAK,GAAI,MAAM,GACvCiB,EAAKg+B,aACJ,CACC1gC,KAAK,CACJjE,IAAI0F,EAAK,GACTtB,OAAOsB,EAAK,IAEb7lB,EAAAA,EACAzD,EAAAA,GAED,MACA,EAEF,oDA7JO,SAAuBgoB,EAAQxd,GAAK,IACtCwkD,EADsC5iB,EAAAxuB,KAG1CiS,GAAMnS,KAAI,WACT,GAAGlT,GAAQA,GAAQ4hC,EAAK5V,iBAAiB,CACxC,IAAMnO,EAAQ00B,GAAS3Q,EAAM5hC,GAC1B6d,IACEA,EAAMkM,QAAQ9J,QACjBpC,EAAMkM,QAAQ9J,MAAQ,IACvBukC,EAAW3mC,EAAMkM,QAAQ9J,MAAMwuB,cAC/B5wB,EAAMkM,QAAQ9J,MAAMwuB,cAAgBjxB,EACjCK,EAAMkM,QAAQ2F,OAChBw+C,GAAWtsC,EAAM,SAAUpkB,EAAQK,EAAMkM,QAAQ2F,OAEpD,KACI,CACC1vB,IACHA,EAAO4hC,EAAK5V,kBACb,IAAMtD,EAAOkZ,EAAK5e,GAAG,SAErB,GAAIhC,MAAM6J,YAAYrN,GAAS,CAC9B,IAAM+W,EAAM7L,EAAK0I,gBACjB5T,EAAS+W,EAAMA,EAAI/O,IAAIhI,OAAS,CACjC,CAEA,IAAM4rB,EAAoC,SAA7B1gB,EAAKpH,OAAO1B,QAAQ,GAAG3I,GAAgB,EAAI,EACpDsV,EAAQ6c,EACRolC,GAAe,EACnB,GAAIhxD,GAAUA,GAAUokB,EAAK+M,eAAe,CAC3C,IAAK,IAAI/6C,EAAI4pB,EAAQ5pB,EAAI,KACxB24B,EAAQ7D,EAAK+6C,eAAe7vE,GAAG,GADJA,KAKvB24B,IAAOA,EAAQ6c,QAEhBolC,GAAe,EAEpBN,GAAWtsC,EAAM,SAAUpkB,GAC3BkL,EAAK4hC,WACL5hC,EAAKyd,OAAO,YAAa5Z,GACzB7D,EAAKwgC,iBACL1E,EAAW5iB,EAAK+M,eAChB/M,EAAK+M,eAAkB6/B,IAAiBhxD,EAAU,EAAIA,CACvD,CACAokB,EAAKhe,UAAU,WAAY,CAAE,gBAAiB,CAAE9Q,MAAQ0xC,GAAY,EAAItiB,SAAU1kB,EAAQxd,KAAAA,IAC3F,GACD,aAEO,SAAoBoZ,EAAKpZ,GAAK,IAChCwkD,EADgCjiB,EAAAnvB,KAGpCiS,GAAMnS,KAAI,WACT,GAAGlT,GAAQA,GAAQuiC,EAAKvW,iBAAiB,CACxC,IAAMnO,EAAQ00B,GAAShQ,EAAMviC,GAC1B6d,IACEA,EAAMkM,QAAQ9J,QACjBpC,EAAMkM,QAAQ9J,MAAQ,IACvBukC,EAAW3mC,EAAMkM,QAAQ9J,MAAMyuB,WAC/B7wB,EAAMkM,QAAQ9J,MAAMyuB,WAAat1B,EAC9ByE,EAAMkM,QAAQ2F,OAChBw+C,GAAW3rC,EAAM,MAAOnpB,EAAKyE,EAAMkM,QAAQ2F,OAE9C,KACI,CACC1vB,IACHA,EAAOuiC,EAAKvW,kBACb,IAAMtD,EAAO6Z,EAAKvf,GAAG,SAErB,GAAIhC,MAAM6J,YAAYzR,GAAM,CAC3B,IAAMmb,EAAM7L,EAAK0I,gBACjBhY,EAAMmb,EAAMA,EAAI/O,IAAIpM,IAAM,CAC3B,CAEA,IAAImT,EAAQ,EACRiiD,GAAe,EACnB,GAAIp1D,GAAOA,GAAOmpB,EAAKqM,YACtB,IAAK,IAAIh7C,EAAIwlB,EAAKxlB,EAAI,KACrB24B,EAAQ7D,EAAK+lD,aAAa76E,GAAG,GADLA,UAMrB46E,GAAe,EAEpBN,GAAW3rC,EAAM,MAAOnpB,GACxBsP,EAAK4hC,WACL5hC,EAAKyd,OAAO,WAAY5Z,GACxB7D,EAAKwgC,iBACL1E,EAAWjiB,EAAKqM,YAChBrM,EAAKqM,YAAe4/B,IAAiBp1D,EAAO,EAAIA,CACjD,CACAmpB,EAAK3e,UAAU,WAAY,CAAE,aAAc,CAAE9Q,MAAQ0xC,GAAY,EAAItiB,SAAU9oB,EAAKpZ,KAAAA,IACrF,GACD,uDC/FO,SAAuBimB,EAAOjmB,GACpCumE,GAAwBnzD,KAAM6S,EAAOjmB,EACtC,qDCFO,SAAqBimB,EAAOjmB,GAClCupB,GAAoBnW,KAAM6S,EAAOjmB,EAClC,oDCFO,SAAoBwd,EAAQyI,EAAOjmB,GACzCikE,GAAe7wD,KAAMoK,EAAQyI,EAAO,SAAUjmB,EAC/C,UAIO,SAAiBoZ,EAAK6M,EAAOjmB,GACnCikE,GAAe7wD,KAAMgG,EAAK6M,EAAO,MAAOjmB,EACzC,kBALO,SAAyBwd,EAAQxd,GACvC,OAAOikE,GAAsB7wD,KAAMoK,EAAQxd,EAC5C,eAIO,SAAsBoZ,EAAKpZ,GACjC,OAAOikE,GAAmB7wD,KAAMgG,EAAKpZ,EACtC,qDCkCO,SAAqB+d,EAAO/d,GAAK,IAAAuiC,EAAAnvB,KAGvC,GAFI2K,IACHA,EAAQ3K,KAAK4P,GAAG,SAASoO,iBACvBrT,EAAM,CACR,IAAMwH,EAAQxH,EAAMwH,MACdC,EAAMzH,EAAMyH,IAClBpS,KAAKuuD,WAAU,WACd,IAAI,IAAIxuE,EAAIoyB,EAAMnM,IAAKjmB,GAAKqyB,EAAIpM,IAAKjmB,IACpC,IAAI,IAAIkB,EAAIkxB,EAAM/H,OAAQnpB,GAAKmxB,EAAIhI,OAAQnpB,IAC1CkuC,EAAK7b,aAAavzB,EAAGkB,EAAG,cAAe2L,EAC1C,IACAoT,KAAKgC,SACN,CACD,WAzDO,SAAkBgE,EAAKoE,EAAQ8J,EAAKtnB,GAC1CoT,KAAKsT,aAAatN,EAAKoE,E5CJjB,SAAe8J,GACrB,MAAAlzB,WAAAA,OAAkBkzB,EAAG,KACtB,C4CEgCrJ,CAAMqJ,GAAMtnB,GACvCA,GAAQA,GAAQoT,KAAK4Y,kBACxB5Y,KAAKgC,SACP,WA8DO,SAAkB2I,EAAO/d,GAAK,IAAAkkC,EAAA9wB,KAGpC,GAFI2K,IACHA,EAAQ3K,KAAK4P,GAAG,SAASoO,iBACvBrT,EAAM,CACR,IAAMwH,EAAQxH,EAAMwH,MACdC,EAAMzH,EAAMyH,IAClBpS,KAAKuuD,WAAU,WACd,IAAI,IAAIxuE,EAAIoyB,EAAMnM,IAAKjmB,GAAKqyB,EAAIpM,IAAKjmB,IACpC,IAAI,IAAIkB,EAAIkxB,EAAM/H,OAAQnpB,GAAKmxB,EAAIhI,OAAQnpB,IAC1C6vC,EAAKxd,aAAavzB,EAAGkB,YAACD,OAAYjB,EAAIoyB,EAAMnM,IAAM,EAAC,MAAAhlB,OAAKC,EAAIkxB,EAAM/H,OAAS,EAACppB,MAAAA,OAAKoxB,EAAIpM,IAAMmM,EAAMnM,IAAM,EAAC,MAAAhlB,OAAKoxB,EAAIhI,OAAS+H,EAAM/H,OAAS,EAAC,KAAKxd,EAClJ,IACAoT,KAAKgC,SACN,CACD,eAzEO,SAAsBgE,EAAKoE,EAAQ8D,EAAQthB,GACjD,IAAI8S,E5CNE,SAAewO,GAGrB,IAAMk/B,EAAqB,QAF3Bl/B,EAASN,MAAMvG,KAAK6G,IAEDoG,KAChB84B,GAAOl/B,EAAO4G,aAChB5G,EAAOoG,KAAO,QAEf,IAAI8H,EAAM,cAAAp7B,OAAiBktB,EAAOvD,MAAK,MAAA3pB,OAAKktB,EAAOoG,KAAO,KAK1D,OAJI84B,EACHhxB,GAAM,KAAAp7B,OAASktB,EAAO1C,MAAK,OAAAxqB,OAAMktB,EAAOuG,cAAgB,KACjDvG,EAAO1C,QACd4Q,GAAM,KAAAp7B,OAASktB,EAAO1C,MAAQ,MACxB4Q,EAAO,GACf,C4CPa8hC,CAAMhwC,GAClBlO,KAAKsT,aAAatN,EAAKoE,EAAQ1K,EAAO9S,GAClCA,GAAQA,GAAQoT,KAAK4Y,kBACxB5Y,KAAKgC,SACP,eAGO,SAAsBnV,GAAK,IAAA2hC,EAAAxuB,KACjC,GAAGA,KAAK+e,OAAOpW,QAAQ9b,GACtB,MAAO,CACNwU,SAAU,SAACthB,EAAGkB,EAAGwhB,GAAI,OAAI+rB,EAAK1b,aAAa/yB,EAAGkB,EAAGwhB,EAAM5V,EAAK,EAC5DyuE,cAAe,SAAC3wD,GAAK,OAAI6jB,EAAK8sC,cAAc3wD,EAAO9d,EAAK,EAE3D,eAuCO,SAAsBmZ,EAAKoE,EAAQyI,EAAOjmB,GAC7C,kBAAkBmG,KAAKiN,KAAK8S,aAAa9M,EAAKoE,GAAQ,EAAMxd,MAC9DoT,KAAKsT,aAAatN,EAAKoE,EAAMppB,aAAAA,QAAyB,IAAV6xB,EAAkB,EAAI,QAClE7S,KAAKgC,UAEP,YAiBO,SAAmBgE,EAAKoE,EAAQyI,EAAOjmB,GAC7CgmB,GAAc5S,KAAMgG,EAAKoE,EAAQyI,EAAOjmB,EACzC,cAzDO,WACNoT,KAAK+e,OAAO9V,WAAWhG,cACvBjD,KAAKwQ,UAAU,gBAAgB,IAC/BxQ,KAAKgC,SACN,qBARO,SAA4BnV,EAAM2mB,GACxCD,GAAQvT,KAAMnT,EAAM2mB,GAAS,EAC9B,iBAQO,SAAwB3mB,EAAM6S,GAClB,UAAf8X,GAAO3qB,KACT6S,EAAQ7S,EACRA,EAAO,KAGRmT,KAAK+e,OAAO9V,WAAWxH,eAAe5U,EAAM6S,GAE5CM,KAAKgC,UACLhC,KAAKwQ,UAAU,gBAAgB,GAChC,kDCuFO,SAAkBmG,EAAS9pB,EAAM6hC,GACvC,OAAOxjB,GAAWlL,KAAM2W,EAAS9pB,EAAM6hC,EACxC,WAlFO,SAAkBmqC,EAAMn5C,EAAQ9yB,GACtC,OAAOsyB,GAAalf,KAAM64D,EAAMn5C,EAAQ9yB,EACzC,aAgBO,SAAoB2uE,EAAUjnD,EAAM1nB,IACrC2uE,IACA3uE,GAAQA,GAAQoT,KAAK4Y,mBACxB2iD,EAAWv7D,KAAK2gB,OAAO3C,iBACnBu9C,MAGDjnD,IAAMA,EAAO,CAAC0K,QAAQ,EAAMzf,QAAQ,EAAMugC,SAAQ,EAAM6kB,SAAQ,EAAMnV,YAAW,EAAM0D,UAAS,IAEjG5+B,EAAK0K,QACRE,GAAoBlf,KAAMu7D,EAAU3uE,GAEjC0nB,EAAKk7B,YACRkB,GAAwB1wC,KAAMu7D,EAAU3uE,GAErC0nB,EAAK/U,QACRS,KAAKw7D,cAAcD,EAAU,KAAM3uE,GAEhC0nB,EAAKwrB,SACRmsB,GAAajsD,KAAMu7D,EAAU3uE,GAE3B0nB,EAAKqwC,SACPC,GAAa5kD,KAAMu7D,EAAU3uE,GAE1B0nB,EAAK4+B,UACRqgB,GAAoBvzD,KAAMu7D,EAAU3uE,GAErCoT,KAAKgC,UACN,aAqCO,WACNhC,KAAKkE,OACN,eA5HO,SAAsByG,EAAO/d,EAAMw0B,GAAO,IAAAoN,EAAAxuB,KAC1Cy7D,GAAgB7uE,GAAQA,GAAQoT,KAAK4Y,iBAC3C,IAAIjO,EAAM,CACT,IAAI8wD,EACH,OACD,IAAMt6C,EAAMnhB,KAAKiQ,eAAc,GAC3BkR,EAAIpgC,OAAO,IACd4pB,EAAQ+wD,GAAav6C,GAEvB,CAEAlP,GAAMnS,KAAI,WACL6K,GACH+wD,GAAYltC,EAAM7jB,EAAMV,KAAMU,EAAM9kB,EAAG8kB,EAAMvoB,EAAG,KAAMwK,EACxD,KAEIw0B,GAAUq6C,GACbz7D,KAAKgC,SACP,gBAqEO,WACN,OAAOkd,GAAkBlf,KAC1B,YAuCO,SAAmBnT,GACzBqe,GAAYlL,KAAKnT,EAClB,iBAdO,WACN,OAAOmT,KAAKi8B,YACb,gBALO,SAAuBpvC,GAC7B,OAAOqe,GAAgBlL,KAAKnT,GAAMgmB,OAAS,SAC5C,WAxEO,SAAkB7M,EAAKoE,EAAQxd,GACrC,OAAOsyB,GAAalf,KAAM,CAACgG,IAAIA,EAAKoE,OAAOA,GAASxd,EACrD,OA8FO,WACN+uE,GAAS37D,KACV,cAVO,SAAqBnT,GAC3Bqe,GAAclL,KAAKnT,EACpB,cARO,SAAqBA,EAAK0rB,GAChCrN,GAAclL,KAAKnT,EAAK0rB,EACzB,YAnCO,SAAmBrK,GACzB,IAAMe,EAAM,CAAA,EAGZ,OAFAjP,KAAKwQ,UAAU,kBAAkB,CAACvB,EAAKf,IAEpCA,IACCA,EAAOwT,gBACTzS,EAAI+P,OAASE,GAAuBjQ,IAClCf,EAAOhD,QpEiUL,SAAmByB,EAAMsC,EAAKf,GACpC,IAAMioB,EAASgJ,GAASxyB,EAAMA,EAAKsvB,cACnC9F,EAAOxf,QAAU1H,EACjBknB,EAAOtjB,MAAQsjB,EAAOtjB,OAAS,UAE/B,IAAM3H,EAAS0C,MAAMvG,KAAKsF,EAAKsS,SAEzBxc,GAAQyL,IAAwB,IAAdA,EAAOzL,KACzBif,EAAgBxT,GAAUA,EAAOwT,cAYvC,OAVAxW,EAAOhmB,SAAQ,SAAAulB,GACXA,EAAM5d,MAAQ8f,EAAKsvB,eACrBxxB,EAAMkM,QAAQjP,KAAOwnB,GAAaviB,EAAMlK,EAAMgI,EAAM5d,MACpD4d,EAAMoI,MAAQpI,EAAMoI,OAAS,UAC1B6O,IACFjX,EAAMkM,QAAQqI,OAAS4C,GAAmBnX,EAAMkM,UACjDlM,EAAMkM,QAAQkD,OAASlN,EAAKkN,OAAOpU,UAAUgF,EAAM5d,MAErD,IAEOqe,CACR,CoErVUA,CAAiBlL,KAAMiP,EAAKf,GAG9Be,CACR,gBArDO,SAAuBssD,EAAU5pD,EAAO/kB,GAC9CqlB,GAAMnS,KAAI,WACTof,GAAkBlf,KAAMu7D,EAAU5pD,EAAO/kB,EACzC,GAACoT,KACH,gBAuDO,SAAuBnT,EAAKgmB,GAClC3H,GAAgBlL,KAAKnT,EAAKgmB,EAC3B,WAjEO,SAAkB7M,EAAKoE,EAAQuH,EAAO/kB,GAC5C,OAAOsyB,GAAalf,KAAM,CAACgG,IAAKA,EAAKoE,OAAQA,GAASuH,EAAO/kB,EAC9D,WAoGO,SAAkB0lD,EAAKlxB,GAC7BixB,GAAUryC,KAAMsyC,EAAKlxB,EACtB,YA5CO,SAAmBv0B,GACzBqe,GAAYlL,KAAKnT,EAClB,YAmCO,SAAmB8d,EAAO2xC,GAChCsf,GAAc57D,KAAM2K,EAAO2xC,EAC5B,YA9HO,SAAmBt2C,EAAKoE,EAAQxd,EAAMw0B,GAC5C,IAAMq6C,GAAgB7uE,GAAQA,GAAQoT,KAAK4Y,iBAEvC5S,GAAOoE,EACVsxD,GAAe17D,KAAM,CAACgG,IAAAA,EAAKoE,OAAAA,GAASxd,GAE7B6uE,GACPxpD,GAAMnS,KAAI,WACTE,KAAK+hB,kBAAiB,SAAS9X,GAC9ByxD,GAAe17D,KAAMiK,EACtB,GACA,GAACjK,OAGCohB,GAAUq6C,GACbz7D,KAAKgC,SACP,OAoGO,WACN25D,GAAS37D,KACV,ICkCA,SAASgpD,GAAar8C,EAAM3G,EAAKoE,EAAQ1C,EAAM9a,GAC9C+f,EAAKkvD,qBAAsB,EACxBjvE,GACF+f,EAAK0T,SAASra,EAAKoE,EAAQ1C,EAAKiK,MAAO/kB,GACvC+f,EAAKuhB,cAAcloB,EAAKoE,EAAQ1C,EAAKukB,OAAQr/B,GAC7C+f,EAAK2G,aAAatN,EAAKoE,EAAQ1C,EAAKhI,MAAO9S,KAG3C+f,EAAKf,OACLe,EAAKotC,eAAen1C,OAAO+H,EAAKqtC,cAAc,WAExCrtC,EAAKkvD,mBACb,CAEA,SAASC,GAAoBnvD,EAAMR,GAClC,IAAM89C,EAAc99C,EAAW89C,aAAe,cAExC31C,EAAsB,QAAf21C,EAAwB,eAAgC,WAAfA,EAA2B,WAAa,UAAYA,EACpG5/B,EAASzc,MAAMC,KAAKC,YAAYxE,OACtC,OAAOqD,EAAoB,WAAfs9C,EAA2B,UAAY,SAAS,CAC3D31C,KAAAA,EACA1J,GAAIyf,EAAO,qBAAsC,QAAf4/B,EAAwB,UAAY,SACtE1/C,OAAQ8f,EAAO,4BACf9a,MAAOpD,EAAW4vD,YAAc1xC,EAAO,+BACvCrgB,KAAMmC,EAAWgZ,cAAgBkF,EAAO,kCAE1C,CAEA,SAAS2xC,GAAW71C,GAGnB,MAFkB,kBAARA,IACTA,GAAO,GACDA,GAAe,IAARA,EAAYA,EAAM,EACjC,kDA4FO,WACNqf,GAAUxlC,KACX,mBAtSO,SAA0Bi8D,GAEhC,IADA,IAAIvhD,EAAQ1a,KAAKiQ,eAAc,GACtBzvB,EAAE,EAAGA,EAAEk6B,EAAM35B,OAAQP,IAC7By7E,EAAG9qD,KAAKnR,KAAM0a,EAAMl6B,GACtB,eA8BO,SAAsBwlB,EAAKoE,EAAQ3H,EAAM7V,GAG/C,GAFAA,EAAOA,EAAOoT,KAAK+e,OAAOpW,QAAQ/b,GAAQoT,KAAKqf,OAO/C,OAAO28C,GAFOpvE,EAAKyU,SAAS2E,EAAI,EAAGoE,EAAO,GAAY,IAAT3H,GAG9C,YAmOO,SAAmBoB,EAAIjX,GAC7B,IAAIA,GAAQA,GAAQoT,KAAK4Y,iBACxB,OAAO5Y,KAAK2gB,OAAOqgB,gBAAgBn9B,GAEpC,IAEKuC,EAFCqE,EAAQ00B,GAASn/B,KAAMpT,GAC7B,OAAG6d,GAECA,EAAMkM,QAAQyV,QAChBhmB,EAAQiO,GAAS5J,EAAMkM,QAAQyV,OAAO,SAAAhqB,GAAI,OAAIA,EAAK,IAAMyB,MAC1DuC,EAAQA,EAAQA,EAAM,GAAKpG,KAAK4P,GAAG,SAAS1B,OAAO+G,YAC5C,CAACpR,GAAAA,EAAIuC,MAAAA,SALb,CAOD,gBApEO,SAAuBuE,EAAO/d,GAChCA,IACHA,EAAOoT,KAAK4Y,kBAEb,IAAM0E,EAAMhY,GAASqF,EAAO3K,KAAMpT,GAC5BsvE,EAAWl8D,KAAK+e,OAAOpW,QAAQ2U,EAAI,IAEzC,OAAKA,GAAQ4+C,EAENA,EAAS52D,SAASgY,EAAI,GAAG,EAAGA,EAAI,GAAG,EAAGA,EAAI,GAAG,EAAGA,EAAI,GAAG,GAAGh4B,IAAI02E,IAFvC,EAG/B,SAEO,SAAgBn4D,EAAIjX,GAAK,IAC3BoZ,EAAKqN,EADsB8b,EAAAnvB,KAGzBmgB,GAAiBvzB,GAAQA,GAAQoT,KAAK4Y,iBAC5C,GAAGuH,EACFna,EAAM4H,MAAMvG,KAAKrH,KAAK2gB,OAAO3I,QAAQnU,IACrCwP,EAAWrT,KAAKkO,OAAOwyB,gBAEpB,CACH,IAEKr6B,EAFCoE,EAAQ00B,GAASn/B,KAAMpT,GAC7B,IAAG6d,EAQE,OANDA,EAAMkM,QAAQyV,QAChB/lB,EAASgO,GAAS5J,EAAMkM,QAAQyV,OAAO,SAAAhqB,GAAI,OAAIA,EAAK,IAAMyB,MAC3DwC,EAASA,EAASA,EAAO,GAAKrG,KAAK4P,GAAG,SAAS1B,OAAOgH,UACtDlP,EAAM,CAACnC,GAAAA,EAAI/C,QAASuF,GACpBgN,EAAWgB,GAAiB5J,EAAMkM,QAAQjP,KAAM+C,EAAMkM,QAAQ2F,MAAO,EAAG,GAAG,EAG7E,CAEA,IAFC,IAAAhE,EAAA,SAAA93B,GAGA,IAAMypB,GAAQkW,EAAgBgP,EAAK9P,OAAS8P,EAAKpQ,OAAOpW,QAAQ/b,IAAOyY,QAAQxB,EAAG,EAAGrjB,EAAE,GAEvF,GAAGypB,EAAK,CACPjE,EAAIxlB,GAAKypB,EAAKvK,MAEd,CAAC,CAAC,QAAS,YAAa,CAAC,OAAQ,aAAc,CAAC,SAAU,gBAAgBxa,SAAQ,SAAAqqC,GACjF,IAAMpJ,EAAMlc,EAAKslB,EAAM,IACpBpJ,IACEngB,EAAIupB,EAAM,MACbvpB,EAAIupB,EAAM,IAAM,IACjBvpB,EAAIupB,EAAM,IAAI/uC,GAAK2lC,EAErB,IAEA,IAAM1jB,EAAQ0sB,EAAKrc,aAAajP,EAAIrjB,GAAG,EAAMoM,GAC1C6V,GAAmB,KAAXA,EAAK,KACfuD,EAAI,IAAIxlB,GAAKiiB,EACf,GAlBOjiB,EAAI,EAAGA,GAAK6yB,EAAU7yB,IAAG83B,EAAA93B,GAqBjC,OAAOwlB,CACR,gBA/PO,SAAuB8P,GAC7B,IAAI+H,EAAO7d,KAAK2gB,OAAO3C,gBACvB,IAAIlI,EACH,OAAO+H,GAAQA,EAAK1L,MAAMnM,IAAM6X,EAAK1L,MAAQ,KAE9C,IAAIhH,EAAY,GAChB,GAAG0S,EAIF,IAHA,IAAI2sB,EAAK3sB,EAAK1L,MACV+I,EAAK2C,EAAKzL,IAEN5xB,EAAIgqD,EAAGxkC,IAAKxlB,GAAI06B,EAAGlV,IAAKxlB,IAC/B,IAAI,IAAI2G,EAAIqjD,EAAGpgC,OAAQjjB,GAAK+zB,EAAG9Q,OAAQjjB,IACtCgkB,EAAUhmB,KAAK,CAAC6gB,IAAKxlB,EAAE4pB,OAAOjjB,IAKjC,OAAOgkB,CAER,mBA5BO,SAA0BV,GAChC,IAAIoT,EAAO7d,KAAK2gB,OAAO3C,gBACvB,OAAIH,GACCpT,IACHA,EAAQzK,KAAK4Y,kBACPuB,GAAQ0D,EAAK1L,MAAMnM,IAAI6X,EAAK1L,MAAM/H,OAAOyT,EAAKzL,IAAIpM,IAAI6X,EAAKzL,IAAIhI,OAAOK,IAEvE,EACR,UAnBO,SAAiBqL,GACnBA,EACH9V,KAAK2gB,OAAOm1B,iBAEZ91C,KAAK2gB,OAAO3e,SACd,QA4RO,SAAe8b,GACrB,IAAI7O,EAAM,CAAEvH,KAAK,IACboW,GAAQA,EAAK5S,SAChB+D,EAAMqxB,GAASrxB,IAGhBjP,KAAK2C,MAAMsM,EACZ,eAtPO,SAAsBjJ,EAAKoE,EAAQ1K,EAAO9S,GAAK,IAAA4hC,EAAAxuB,KACjDpT,IACHA,EAAOoT,KAAK4Y,kBAEb,IAAMsjD,EAAWl8D,KAAK+e,OAAOpW,QAAQ/b,GACrC,GAAIsvE,EAAJ,CAGAx8D,EAAQs8D,GAAWt8D,GACnB,IAEIy8D,EAAUC,EAOVC,EATE9rD,EAAMvQ,KAAK8S,aAAa9M,EAAKoE,GAAQ,EAAMxd,GAC3C0vE,EAAUxvC,GAAQ9sB,KAAMgG,EAAKoE,EAAQxd,GAS3C,GANIoT,KAAKyY,cAAgB7rB,GAAQoT,KAAK4Y,mBACrCujD,EAAWn8D,KAAK6e,SAAS7Y,EAAKoE,EAAQxd,GACtCwvE,EAAYp8D,KAAKguB,cAAchoB,EAAKoE,EAAQxd,IAI/B,QAAX0vE,EAAkB,CACpB,IAAM5uC,EAAS9f,MAAM1tB,KAAKutC,UAAW7f,MAAMC,KAAKC,YAAYV,QAAQK,eAC9D8uD,EAAY17E,MAAM6e,GAASqU,GAAmB2Z,EAAOhuB,IAAUA,EACrE28D,EAAY9rD,GAAOgsD,CACnB,KACkB,UAAXD,GAAiC,KAAV58D,GAAiB7e,MAAM6e,IAAU6Q,GAAO7Q,GAAmB,IAAVA,IAC/E28D,GAAY,EACZ38D,GAAc,GAGV28D,GAAa9rD,IAAQ7Q,GACzBuS,GAAMnS,KAAI,WACT,GAAI0uB,EAAKhe,UAAU,sBAAsB,CAACxK,EAAKoE,EAAQ1K,EAAO6Q,EAAK3jB,IAAO,CACzE,GAAGA,GAAQ4hC,EAAK5V,iBAAiB,CAChC,IAAMnO,EAAQ00B,GAAS3Q,EAAM5hC,GAAM+pB,QAC/B1M,EAAOoK,GAAS5J,EAAM/C,MAAM,SAAAuC,GAAI,OAAIA,EAAK,IAAMjE,GAAOiE,EAAK,IAAMG,KAEjEH,IACHA,EAAO,CAACjE,EAAKoE,GACbK,EAAM/C,KAAKviB,KAAK8kB,IAEjBA,EAAK,GAAKvK,EAEV8uB,EAAK7B,iBAAkB,EACvB1iB,EAAK,GAAK,KACV,IAAMmW,EAAOoM,GAASgC,EAAM/jB,EAAOR,UAC5BukB,EAAK7B,gBAEZ,IAAM6vC,EAAWN,EAAS72D,QAAQW,EAAI,EAAGoE,EAAO,GAAG,GAenD,GAdAoyD,EAAS9zD,QAAUqhB,GAAY,CAAExE,IAAKiF,GAAkB/f,EAAOR,IAAS,UAAY,EAAI,EACxFiyD,EAASj7D,SAAS+E,EAAI,EAAGoE,EAAO,EAAGgW,EAAK1gB,OAExCuK,EAAK,GAAKmW,EAAK1gB,MACfuK,EAAK,GAAKuyD,EAASloD,KAAO8L,EAAK9L,KAE/Bka,EAAK/V,cAAe,EAEpBwnB,GAAYh2B,EAAMQ,GAAO,GACzB+xD,EAAS7qD,MAAQ1H,EAAK,UACfukB,EAAK/V,aAEZ+V,EAAKhe,UAAU,eAAgB,CAACxK,EAAKoE,EAAQ1K,EAAO9S,KAEhD4hC,EAAKqtC,sBAAwBrtC,EAAK/V,cAAgB64B,GAAU9iB,EAAMxoB,EAAKoE,EAAQ,KAAMxd,GAAM,CAC9F,IAAMuf,EAAaqiB,EAAKriB,WAAWtM,IAAImG,EAAKoE,EAAQxd,GAC9C61D,EAAU,CAAE/iD,MAAO6Q,EAAKoB,MAAOwqD,EAAUlwC,OAAQmwC,GAEvDN,GAAoBttC,EAAMriB,GACxB6vB,MAAK,WACwB,QAA1B7vB,EAAW89C,aACbjB,GAAax6B,EAAMxoB,EAAKoE,EAAQq4C,EAAS71D,EAC3C,IACC6vE,MAAK,WACLzT,GAAax6B,EAAMxoB,EAAKoE,EAAQq4C,EAAS71D,EAC1C,GACF,CACD,KACK,CACJ,IAAMu0B,EAAMqN,EAAKve,gBACjBwmC,GAAWjoB,EAAMrN,GAAK,GAEtBqN,EAAKnP,OAAOpe,SAAS+E,EAAI,EAAGoE,EAAO,EAAG1K,GAElC8uB,EAAK/V,eACR+V,EAAK/V,cAAe,EAEpB+V,EAAKhe,UAAU,eAAgB,CAACxK,EAAKoE,EAAQ1K,EAAO9S,WAC7C4hC,EAAK/V,cAGb,IAAMikD,EAAc5vC,GAAQ0B,EAAMxoB,EAAKoE,GAQvC,GALGkyD,GAAWI,GAA8B,UAAfA,GAAuC,KAAZh9D,EAAM,IAAaA,EAAM3e,OAAS,GACzFytC,EAAKnP,OAAOpe,SAAS+E,EAAI,EAAGoE,EAAO,EAAG1K,GAEvC+2C,GAAWjoB,EAAMrN,GAEd,iBAAiBpuB,KAAK2M,GAAO,CAC/B,IAAMi9D,EAAYnuC,EAAK3P,SAAS7Y,EAAKoE,GAC/BwyD,EAAWpuC,EAAK/O,SAAS,CAAEjU,MAAO,UAAWM,UAAW,aAAe6wD,GAC7EnuC,EAAKnO,SAASra,EAAKoE,EAAQwyD,EAC5B,CAEA,IAAIpuC,EAAKqtC,sBAAwBrtC,EAAK/V,cAAgB64B,GAAU9iB,EAAMxoB,EAAKoE,EAAQo7B,GAAqBhX,EAAMxoB,EAAKoE,IAAS,CAC3H,IAAM+B,EAAaqiB,EAAKriB,WAAWtM,IAAImG,EAAKoE,GAC5C0xD,GAAoBttC,EAAMriB,GACxB6vB,MAAK,WACwB,QAA1B7vB,EAAW89C,aACbjB,GAAax6B,EAEf,IACCiuC,MAAK,WACLzT,GAAax6B,EACd,GACF,CACD,CAEIA,EAAK/V,cACR+V,EAAKtN,SAASlb,EAAKoE,EAAQxd,EAC7B,CACD,GAlHA,CAoHF,gBAoCO,SAAuB+d,EAAOjL,EAAO9S,GAC3CqlB,GAAMnS,KAAI,WAGT,IAFA,IAAMwd,EAAMhD,GAAS3P,EAAO3K,MACxBxf,EAAI,EACCwlB,EAAMsX,EAAInL,MAAMnM,IAAKA,GAAOsX,EAAIlL,IAAIpM,IAAKA,IACjD,IAAK,IAAIoE,EAASkT,EAAInL,MAAM/H,OAAQA,GAAWkT,EAAIlL,IAAIhI,OAAQA,IAAU5pB,IACxEwf,KAAKsT,aAAatN,EAAKoE,EAAQwD,MAAM1K,QAAQxD,GAASA,EAAMlf,GAAKkf,EAAO9S,EAG1E,GAACoT,KACH,kDCnOO,SAAkBgG,EAAKoE,EAAQxd,GACrC,IAAMqd,GAAQrd,EAAOoT,KAAK+e,OAAOpW,QAAQ/b,GAAQoT,KAAKqf,QAAQha,QAAQW,EAAI,EAAGoE,EAAO,GAEpFI,GAAKxK,KAAM,OAAQ,CAClBgG,IAAAA,EACAoE,OAAAA,EACA1K,MAAOM,KAAK8S,aAAa9M,EAAKoE,EAAQ,KAAMxd,GAC5CA,KAAMA,GAAQoT,KAAK4Y,iBACnBjH,OAAQ1H,EAAOA,EAAK0H,MAAQ,KAAO,IAErC,uDC4BO,SAAuB3L,EAAKoE,EAAQxd,GAC1C,IAAGA,GAAQA,GAAQoT,KAAK4Y,iBASvB,OADW5Y,KAAK2gB,OAAOqrC,WAAWhmD,IAAQ,IAC9BoE,IAAW,KARvB,IAAMK,EAAQ00B,GAASn/B,KAAMpT,GAC7B,GAAG6d,GAASA,EAAMkM,QAAQmpB,QAAQ,CACjC,IAAM7T,EAASlwB,GAAK0O,EAAMkM,QAAQmpB,SAAS,SAAA7T,GAAM,OAAIA,EAAO,IAAMjmB,GAAOimB,EAAO,IAAM7hB,KACtF,OAAO6hB,EAASA,EAAO,GAAK,IAC7B,CAMF,gBAjDO,SAAuBjmB,EAAKoE,EAAQ6hB,EAAQr/B,GAElD,IAAI8S,EAEJ,IAHA9S,EAAOA,GAAQoT,KAAK4Y,mBAGT5Y,KAAK4Y,iBAAiB,CAChC,IAAM2D,EAAOvc,KAAK2gB,OAAOqrC,WAAWhmD,GAAOhG,KAAK2gB,OAAOqrC,WAAWhmD,IAAQ,CAAA,EAC1EtG,EAAQ6c,EAAKnS,IAAW,KACxBmS,EAAKnS,GAAU6hB,EAEXA,GAAUA,EAAOA,OACpBjsB,KAAK2gB,OAAOgiB,WAAW38B,EAAIoE,EAAQ,qBAE5BpK,KAAK2gB,OAAOqrC,WAAWhmD,GAAKoE,GACnCpK,KAAK2gB,OAAOiiB,cAAc58B,EAAIoE,EAAQ,aAExC,KACI,CACH,IAAMK,EAAQ00B,GAASn/B,KAAMpT,GAC7B,IAAI6d,EAAO,OAEPA,EAAMkM,QAAQmpB,UACjBr1B,EAAMkM,QAAQmpB,QAAU,IAEzB,IAAM3mB,EAAQjT,GAAUuE,EAAMkM,QAAQmpB,SAAS,SAAA7T,GAAM,OAAIA,EAAO,IAAMjmB,GAAOimB,EAAO,IAAM7hB,KAC1F,IAAa,GAAV+O,EACFzZ,EAAQ+K,EAAMkM,QAAQmpB,QAAQ3mB,GAAO,GACrC1O,EAAMkM,QAAQmpB,QAAQl7B,OAAOuU,EAAO,QAEhC,IAAI8S,EAAQ,OAEdA,GACFxhB,EAAMkM,QAAQmpB,QAAQ36C,KAAK,CAAC6gB,EAAKoE,EAAQ6hB,GAC3C,CAEAjsB,KAAKwQ,UAAU,WAAY,CAAC,WAAY,CAAExK,IAAAA,EAAKoE,OAAAA,EAAQ1K,MAAAA,EAAOovB,SAAS7C,EAAQr/B,KAAAA,IAChF,2DCkEO,WAA4B,IAAAuiC,EAAAnvB,KAC5BsV,EAAOtV,KAAK2gB,OAClBrL,EAAK5N,KAAK0Z,QAAO,WAEhB9L,EAAK5N,KAAKzV,QAAO,SAAAgd,GAAG,OAAIkgB,EAAKy8B,aAAa38C,EAAIpL,OAG9C,IADA,IAAM8gD,EAAU4B,GAAejxC,GAAMgD,EAAAA,WAEpC,IAAA4tC,EAAwCvB,EAAQnkE,GAAzCwlB,EAAGkgD,EAAHlgD,IAAKoE,EAAM87C,EAAN97C,OAAQoJ,EAAO0yC,EAAP1yC,QAAS80B,EAAO4d,EAAP5d,QAEzBu0B,GAAW,EACfvnD,EAAK5N,KAAKzV,QAAO,SAAAgd,GAChB,IAAIlvB,EAAIkvB,EAAIpL,GACZ,GAAG9jB,GAAKimB,GAAyB,mBAAXwN,EACrB,OAAO,EAER,IAAM9H,EAAO4J,EAAKhP,QAAQvmB,EAAGqqB,GAC7B,GAAGsB,EAAK,CACP,GAAGA,EAAK,IAAM1F,GAAO0F,EAAK,IAAMtB,EAC/B,OAAO,EAEPrqB,EAAI2rB,EAAK,EACX,CAEA,IAAMhM,EAAQ5b,OAAOqrC,EAAKrc,aAAa/yB,EAAGqqB,GAAQ,IAElD,GAAGk+B,GACF,GAAGvoD,EAAIuoD,EACN,OAAO,OAEJ,GAAGu0B,IAAan9D,EACpB,OAAOm9D,GAAW,EAEnB,OAAOrpD,EAAQ9T,EAChB,GAAG,GAAG,IA3BElf,EAAI,EAAGA,EAAImkE,EAAQ5jE,OAAQP,IAAG83B,GA6BxC,IAEAhD,EAAK9E,UAAU,gBAAiB,IAChC8E,EAAKtT,SACN,gBAhFO,SAAuBgE,EAAKoE,EAAQxd,GAC1C,IAAGA,GAAQA,GAAQoT,KAAK4Y,iBAOvB,OADW5Y,KAAK2gB,OAAO6jC,WAAWx+C,IAAQ,IAC9BoE,GANZ,IAAMK,EAAQ00B,GAASn/B,KAAMpT,GAC7B,OAAG6d,GAASA,EAAMkM,QAAQguC,SAClB5oD,GAAK0O,EAAMkM,QAAQguC,SAAS,SAAAtwC,GAAG,OAAIA,EAAI,IAAMrO,GAAOqO,EAAI,IAAMjK,CAAM,KAMtE,IACR,gBAEO,SAAuBxd,GAAK,IAAA4hC,EAAAxuB,KAClC,GAAGpT,GAAQA,GAAQoT,KAAK4Y,iBAAiB,CACxC,IAAMnO,EAAQ00B,GAASn/B,KAAMpT,GAC7B,GAAG6d,GAASA,EAAMkM,QAAQguC,QAAQ,CACjC,IAAI,IAAInkE,EAAI,EAAGA,EAAIiqB,EAAMkM,QAAQguC,QAAQ5jE,OAAQP,IAAI,CACpD,IAAMyR,EAASwY,EAAMkM,QAAQguC,QAAQnkE,GACrCwf,KAAKwQ,UAAU,WAAY,CAAC,SAAU,CAAExK,IAAK/T,EAAO,GAAImY,OAAQnY,EAAO,GAAIyN,MAAOzN,EAAO,GAAI68B,SAAU,KAAMliC,KAAKA,GAAMoT,KAAK4Y,mBAC9H,CACAnO,EAAMkM,QAAQguC,QAAU,EACzB,CACD,KACI,CAGH,IAFA,IAAMA,EAAU4B,GAAevmD,KAAK2gB,QAE3BngC,EAAE,EAAGA,EAAEmkE,EAAQ5jE,OAAQP,IAAI,CACnC,IAAAs8E,EAAsBnY,EAAQnkE,GAAvBwlB,EAAG82D,EAAH92D,IAAKoE,EAAM0yD,EAAN1yD,OACZpK,KAAK8kD,cAAc9+C,EAAKoE,EAAQ,KACjC,CAEApK,KAAK2gB,OAAO6jC,WAAa,GACzBxkD,KAAK2gB,OAAOjZ,KAAKzV,QAAO,SAACgd,GACxB,OAAOuf,EAAKo9B,aAAa38C,EAAIpL,GAC9B,GACD,CACD,gBAjGO,SAAuBmC,EAAKoE,EAAQnY,EAAQrF,GAGlD,IAAI6d,EACJ,IAHA7d,EAAOA,GAAQoT,KAAK4Y,mBAGT5Y,KAAK4Y,mBACfnO,EAAQ00B,GAASn/B,KAAMpT,IADxB,CAMA,IAAI8S,EAEJ,GAHAzN,EA0CD,SAAuB0a,EAAM3G,EAAKoE,EAAQnY,EAAQwY,GAC9CxY,KACE2b,MAAM1K,QAAQjR,IAA4B,iBAAVA,KACnCA,EAAS,CAACkc,QAASlc,IACpBA,EAAOkc,QAAUo4C,GAAmB55C,EAAM3G,EAAKoE,EAAQnY,EAAOkc,QAAS,KAAM1D,IAE9E,OAAOxY,CACR,CAjDU8qE,CAAc/8D,KAAMgG,EAAKoE,EAAQnY,EAAQwY,GAG/CA,EAAM,CACJA,EAAMkM,QAAQguC,UACjBl6C,EAAMkM,QAAQguC,QAAU,IAEzB,IAAMxrC,EAAQjT,GAAUuE,EAAMkM,QAAQguC,SAAS,SAAAtwC,GAAG,OAAIA,EAAI,IAAMrO,GAAOqO,EAAI,IAAMjK,KACjF,IAAa,GAAV+O,EACFzZ,EAAQ+K,EAAMkM,QAAQguC,QAAQxrC,GAAO,GACrC1O,EAAMkM,QAAQguC,QAAQ//C,OAAOuU,EAAO,QAEhC,IAAIlnB,EAAQ,OAEdA,GACFwY,EAAMkM,QAAQguC,QAAQx/D,KAAK,CAAC6gB,EAAKoE,EAAQnY,GAC3C,KACI,CACH,IAAMsqB,EAAOvc,KAAK2gB,OAAO6jC,WAAWx+C,GAAOhG,KAAK2gB,OAAO6jC,WAAWx+C,IAAQ,CAAA,EAI1E,GAHAtG,EAAQ6c,EAAKnS,IAAW,KACxBmS,EAAKnS,GAAUnY,EAEXA,GAA2B,UAAjBulB,GAAOvlB,IAOpB,GANA+N,KAAK2gB,OAAOgiB,WAAW38B,EAAKoE,EAAQ,aAChCnY,EAAOyN,OAAS6mD,GAAkBt0D,EAAOyN,QAC5CM,KAAK2gB,OAAOgiB,WAAW38B,EAAKoE,EAAQ,oBAErCwD,MAAMgH,OAAO3iB,EAAQ,CAAC+T,IAAAA,EAAKoE,OAAAA,IAAS,IAE/BnY,EAAOuhB,SAAWvhB,EAAOyN,OAASzN,EAAOyN,MAAMgL,UAAU,CAC7D,IAAMoT,EAAO7rB,EAAO6rB,MAAQyoC,GAAkBvmD,KAAMgG,EAAKoE,GACzDnY,EAAOuhB,QAAU+yC,GAAsBzoC,EAAM7rB,EAAOyN,MACrD,cAEOM,KAAK2gB,OAAO6jC,WAAWx+C,GAAKoE,GACnCpK,KAAK2gB,OAAOiiB,cAAc58B,EAAIoE,EAAQ,aACtCpK,KAAK2gB,OAAOiiB,cAAc58B,EAAIoE,EAAQ,mBAExC,CACApK,KAAKwQ,UAAU,WAAY,CAAC,SAAU,CAAExK,IAAAA,EAAKoE,OAAAA,EAAQ1K,MAAAA,EAAOovB,SAAS78B,EAAQrF,KAAAA,IAzC7E,CA0CD,+CCtCO,SAAeshB,GACrB,OAAON,MAAMwkC,MACZxkC,MAAMgH,OACL,CACCoyB,UAAWhnC,KAAK8Q,MAChBxB,IAAK,qBACL1E,GAAIgD,MAAMC,KAAKC,YAAYxE,OAAOsB,IAEnCsD,GACA,GAGH,UA3BO,SAAiBA,GACvB,OAAON,MAAMmuB,QACZnuB,MAAMgH,OACL,CACCoyB,UAAWhnC,KAAK8Q,MAChBxB,IAAI,uBACJ1E,GAAIgD,MAAMC,KAAKC,YAAYxE,OAAOsB,GAClCL,OAAQqD,MAAMC,KAAKC,YAAYxE,OAAOiB,QAEvC2D,GACA,GAGH,mDCNO,SAAmBiO,GACzBlK,GAAMnS,IAAIqc,EAAMnc,KACjB,aAEO,SAAoBmc,GAC1BvQ,GAAgBuQ,EAAMnc,KACvB,YAVO,WACN4L,GAAW5L,KACZ,wDCCO,SAAwBgG,EAAKoE,EAAQ0Q,EAAKluB,GAEhD24B,GAAuBvlB,KAAM8a,EAAK9U,EAAKoE,EAAQxd,EAChD,YAPO,SAAmBoZ,EAAKoE,EAAQD,EAAQvd,GAC9C24B,GAAcvlB,KAAMgG,EAAKoE,EAAQD,EAAQ,KAAMvd,EAChD,sDCFO,SAAsBimB,EAAOjmB,GACnCowE,GAAsBh9D,KAAM6S,EAAOjmB,EACpC,0DCFO,SAA0B8S,GAChC,IAAM6Q,IAAQvQ,KAAK+nC,cAAcC,QAErB,UAATtoC,IACFA,GAAS6Q,GAEP7Q,GAAS6Q,IACR7Q,EACFmoC,GAAY7nC,cAELA,KAAK+nC,cAAcC,QAC1BhoC,KAAKgC,WAGNhC,KAAKwQ,UAAU,YAAa,CAAC,CAAC3M,GAAG,iBAAkBhX,KAAK,gBAAiB6S,MAAAA,KACzEM,KAAKwQ,UAAU,WAAY,CAAC,gBAAiB,CAACse,SAAUpvB,EAAOA,MAAO6Q,KAExE,8CCjBO,SAAc7Q,EAAO9S,GAC3BqwE,GAASj9D,KAAMN,GAAO,EAAO9S,EAC9B,ICJA,IAAMswE,GAAc,CACnB,CAAEr5D,GAAG,OAAQ40B,QAAQ,CACpB,CAAC50B,GAAI,QAAS40B,QAAS,CACtB,CAAC50B,GAAI,aACL,CAACA,GAAI,cACL,CAACA,GAAI,gBACL,CAACA,GAAI,gBAEN,CAACA,GAAI,gBACL,CAACA,GAAI,gBACL,CAACA,GAAI,SACL,CAACA,GAAI,mBAEN,CAAEA,GAAG,OAAQ40B,QAAQ,CACpB,CAAC50B,GAAI,aACL,CAACA,GAAI,gBACL,CAACA,GAAI,YACL,CAACA,GAAI,aACL,CAACA,GAAI,sBACL,CAACA,GAAI,QAAS40B,QAAQ,CACrB,CAAC50B,GAAI,eACL,CAACA,GAAI,eACL,CAACA,GAAI,6BACL,CAACA,GAAI,0BACL,CAACA,GAAI,iBACL,CAACA,GAAI,kBACL,CAAE0nC,UAAU,aACZ,CAAC1nC,GAAI,eAEN,CAACA,GAAI,aAAc40B,QAAQ,CAC1B,CAAC50B,GAAG,uBACJ,CAACA,GAAG,0BACJ,CAACA,GAAG,0BACJ,CAACA,GAAG,qCAGN,CAAEA,GAAG,SAAU40B,QAAQ,CACtB,CAAC50B,GAAI,QAAS40B,QAAQ,CACrB,CAAE50B,GAAI,kBACN,CAAEA,GAAI,mBAEP,CAACA,GAAI,QAAS40B,QAAQ,CACrB,CAAE50B,GAAI,iBACN,CAAEA,GAAI,eAEP,CACCA,GAAI,WAAY40B,QAAS,CACxB,CAAC50B,GAAI,gBACL,CAACA,GAAI,eAGP,CAACA,GAAI,iBAEN,CAAEA,GAAG,OAAQ40B,QAAQ,CACpB,CAAC50B,GAAI,OAAQ40B,QAAS,CACrB,CAAC50B,GAAI,YACL,CAACA,GAAI,eAEN,CAACA,GAAI,mBAEN,CAAEA,GAAI,OAAQ40B,QAAQ,CACrB,CAAC50B,GAAI,UAAW40B,QAAS,CACxB,CAAC50B,GAAI,iBACL,CAACA,GAAI,iBACL,CAACA,GAAI,eACL,CAACA,GAAI,eACL,CAACA,GAAI,mBAEN,CAACA,GAAI,OAAQ40B,QAAS,CACrB,CAAC50B,GAAI,cACL,CAACA,GAAI,cACL,CAACA,GAAI,YACL,CAACA,GAAI,YACL,CAACA,GAAI,gBAEN,CAAE0nC,UAAU,aACZ,CAAC1nC,GAAI,kBACL,CAACA,GAAI,eACL,CAACA,GAAI,kBACL,CAACA,GAAI,gBACL,CAACA,GAAI,oBAIDs5D,GAAe,CACpB,CAAEt5D,GAAG,OAAQ40B,QAAQ,CACpB,CAAC50B,GAAI,gBACL,CAACA,GAAI,SACL,CAACA,GAAI,mBAEN,CAAEA,GAAI,OAAQ40B,QAAQ,CACrB,CAAC50B,GAAI,kBACL,CAACA,GAAI,gBACL,CAACA,GAAI,oBAID4K,GAAK,CACV2uD,YAAa,SAASt/B,EAAM5vB,GAC3B,IAAI1tB,EACJ,IAAIA,EAAE,EAAGA,EAAIs9C,EAAK/8C,OAAQP,IACJ,iBAAXs9C,EAAKt9C,KACds9C,EAAKt9C,GAAK,CAACqjB,GAAIi6B,EAAKt9C,KACH,iBAAds9C,EAAKt9C,GAAGqjB,IAAuC,cAAdi6B,EAAKt9C,GAAGqjB,IAAwBqK,EAAOyzB,YAKxE7D,EAAKt9C,GAAGkf,QACXo+B,EAAKt9C,GAAGkf,MAAQkO,MAAMC,KAAKC,YAAY1B,MAAM0xB,EAAKt9C,GAAGqjB,KACnDi6B,EAAKt9C,GAAGi4C,UACVqF,EAAKt9C,GAAGi4C,QAAUz4B,KAAKo9D,YAAYt/B,EAAKt9C,GAAGi4C,QAASvqB,MAPpD4vB,EAAKl5B,OAAOpkB,EAAE,GACdA,KASF,OAAOs9C,CACR,GAGM,SAAS1B,GAAKzvB,GACpBA,EAAK+D,YAAY,mBAAmB,WAAA,OAuBrC,SAAe/D,GACXA,EAAKiD,GAAG,SACVjD,EAAKiD,GAAG,QAAQc,YAAY,mBAAkB,SAAC7M,GAAE,OA0BnD,SAAoB8I,EAAK9I,GACrB8I,EAAK6D,UAAU,kBAAkB,CAAC3M,MACjCi4B,GAAUj4B,GACZi4B,GAAUj4B,GAAI8I,GAEdA,EAAK6D,UAAU,YAAY,CAAC,CAAC3M,GAAIA,KAEpC,CAjCwDo6B,CAAWtxB,EAAK9I,KACxE,CA1B2Cm5B,CAAMrwB,MAEhD,IAAMuB,EAASvB,EAAKuB,OACd4vB,EAAO,CACZnxB,KAAM,OACNvB,YAAY,EACZkE,IAAK,oBACLzL,GAAI,OACJsT,WAAW,EACX7C,KAAK,CACJjO,OAAQ,IAETqB,KAAM+G,GAAG2uD,YACRxvD,MAAM1K,QAAQgL,EAAO4vB,MAAQ5vB,EAAO4vB,KAAOlwB,MAAMvG,KAAK6G,EAAOwqB,SAAWykC,GAAeD,IACvFhvD,IAKF,OADAvB,EAAK6D,UAAU,aAAc,CAAC,OAAQstB,IAC/BA,CACR,CAQA,IAAMhC,GAAY,CACjBlwB,KAAQ,SAAAe,GAAI,OAAIA,EAAKf,MAAM,EAC3BC,KAAQ,SAAAc,GAAI,OAAIA,EAAKd,MAAM,EAC3B,gBAAiB,SAAAc,GAAI,OAAIA,EAAK0wD,cAAc,EAC5C,gBAAiB,SAAA1wD,GAAI,OAAIA,EAAK2wD,cAAc,EAC5C,cAAe,SAAA3wD,GAAI,OAAIA,EAAK6D,UAAU,YAAY,CAAC,CAAC3M,GAAI,OAAQoO,MAAO,SAAUi5B,WAAU,IAAO,EAClG,cAAe,SAAAv+B,GAAI,OAAIA,EAAK2jD,WAAW,MAAK,EAAK,EACjD,gBAAiB,SAAA3jD,GAAI,OAAIA,EAAK6D,UAAU,YAAY,CAAC,CACpD3M,GAAI,SAAUoO,MAAO,SAAUvS,MAAOkO,MAAMC,KAAKC,YAAY1B,MAAM,mBACjE,EACH,aAAc,SAAAO,GAAI,OAAIA,EAAK4wD,WAAW,EACtC,aAAc,SAAA5wD,GAAI,OAAIA,EAAK6wD,WAAW,EACtC,WAAY,SAAA7wD,GAAI,OAAIA,EAAK6D,UAAU,YAAY,CAAC,CAAC3M,GAAI,OAAQoO,MAAO,MAAOi5B,WAAU,IAAO,EAC5F,WAAY,SAAAv+B,GAAI,OAAIA,EAAK8wD,QAAQ,MAAK,EAAK,EAC3C,aAAc,SAAA9wD,GAAI,OAAIA,EAAK6D,UAAU,YAAY,CAAC,CAAC3M,GAAI,SAAUoO,MAAO,MAAOvS,MAAOkO,MAAMC,KAAKC,YAAY1B,MAAM,gBAAgB,EACnI,iBAAkB,SAAAO,GAAI,OAAIA,EAAK8uB,eAAe,EAC9C,cAAe,SAAA9uB,GAAI,OAAIA,EAAK+uB,YAAY,EACxC,iBAAkB,SAAA/uB,GAAI,OAAIA,EAAKi+B,cAAc,SAAS,EACtD,eAAgB,SAAAj+B,GAAI,OAAIA,EAAKk+B,YAAY,SAAS,EAClD,gBAAiB,SAAAl+B,GAAI,OAAIA,EAAKm+B,aAAa,SAAS,EACpD,gBAAiB,SAAAn+B,GAAI,OAAIA,EAAKq8B,iBAAiB,SAAS,GCzIzD,IAAI00B,GAAY,CACf7wE,KAAK,cACL8wE,YAAY,CAAEtgD,MAAM,GACpB1O,SAAS,CACR2N,OAAO,EACPxP,YAAY,EACZsG,SAAS,GACT3Q,MAAK,EACLi+B,YAAY,GACZiB,YAAY,EACZvE,cAAe,GACfyrB,ejElCM,CACN,CAACh8D,KAAM00C,GAAQ,UAAWjyB,IAAK,kCAC/B,CAACziB,KAAM00C,GAAQ,WAAYjyB,IAAK,kCAChC,CAACziB,KAAM00C,GAAQ,OAAQjyB,IAAK,8BAC5B,CAACziB,KAAM00C,GAAQ,QAASjyB,IAAK,iCiEgC9BrB,MAAM,WAAU,IAAAugB,EAAAxuB,KACfA,KAAKwe,OAAUxe,KAAK29D,YAAYtgD,QAChCrd,KAAK8Q,MAAMC,WAAa,gBAExBuB,KAEAtS,KAAKqQ,OAAOkyC,QAAQviD,KAAK49D,WACzB59D,KAAKqQ,OAAOkyC,QAAQ5/B,IACpB3iB,KAAKqQ,OAAOlrB,KAAK6a,KAAK69D,eAEtB79D,KAAKwvB,iBAAmB,GACxBxvB,KAAK0Q,YAAY,cAAc,WAC9B8d,EAAKgB,iBAAiBtqC,SAAQ,SAAAynB,GAAI,OAAIA,EAAK6qB,eAC5C,GACA,EACDsmC,MAAM,YpG7BA,WACN,IAAMlvD,EAAOhB,MAAMgB,KAAKC,MAIxB,GAHA0M,GAAanV,MAAQwH,MAAMgB,KAAKmI,QAAQsf,YAAc,EACtD9a,GAAa0wB,YAAuB,QAARr9B,GAA0B,WAARA,EAAqB,GAAK,GAErEhB,MAAMgB,KAAKmI,QAAQjJ,YACrB,OAAO4N,GAAgB9N,MAAMgB,KAAKmI,QAAQjJ,YAE3C4N,GAAc,eAAiBC,GAAM/M,GAEzB,YAARA,GACH8M,GAAcjQ,WAAa,UAC3BiQ,GAAclQ,MAAQ,WACJ,YAARoD,GAA8B,QAARA,EAChC8M,GAAclQ,MAAQ,UACJ,UAARoD,EACV8M,GAAclQ,MAAQ,UACJ,QAARoD,IACV8M,GAAcjQ,WAAa,UAC3BiQ,GAAclQ,MAAQ,UAExB,CoGSEuyD,EACA,EACDH,UAAU,WACT,IAAM3uD,EAAMjP,KAAKkO,OACXwqB,EAAWzpB,EAAIypB,SACfjsB,EAAO,GAGVwC,EAAI6uB,MACNrxB,EAAKtnB,KAAK24C,GAAU99B,QACjB04B,IAAazpB,EAAIquB,SAAWruB,EAAIuH,WAAekiB,IAA4B,IAAhBzpB,EAAIquB,UAClE7wB,EAAKtnB,KAAKioD,GAASptC,OAChBiP,EAAI+uD,QACPvxD,EAAKtnB,KAAK8pB,EAAI+uD,SACXtlC,GAAYzpB,EAAInC,YACnBL,EAAKtnB,KAAK8mC,GAAYjsB,OAGvB,IAAMi+D,EAAS,CACdxgC,UAAY/E,EACZ5rB,WAAYmC,EAAInC,YAEdmC,EAAIiG,YACN+oD,EAAO/oD,UAAYjG,EAAIiG,WACrBjG,EAAIgG,cACNgpD,EAAOhpD,YAAchG,EAAIgG,aAEvByjB,EACFjsB,EAAKtnB,KAAKqgD,GAASxlC,KAAMi+D,IAEzBxxD,EAAKtnB,KAAK,CAAC2pB,KAAK,CAAC02B,GAASxlC,KAAMi+D,GAAS/f,GAAWl+C,SAErD,IAAMid,GAA2B,IAAlBhO,EAAI2xB,UAAqB11B,GAAqBlL,MAAQiP,EAAI2xB,UACrE3jB,GACHxQ,EAAKtnB,KAAK83B,GAEX/R,GAAYlL,MAER04B,GC9FC,SAAc/rB,GACpBA,EAAK+D,YAAY,mBAAmB,WAAA,OAAM/D,EAAKiD,GAAG,WAAWsuD,SAASvxD,EAAKgU,OAAO7P,UAElF,IAAMuZ,EAASzc,MAAMC,KAAKC,YAAY1B,MAElCgjD,EAAY,IACa,IAA1BziD,EAAKuB,OAAOkhD,YACdA,EAAY,CACX,CAAEvrD,GAAG,MAAOnE,MAAO2qB,EAAOzd,KAC1B,CAAE/I,GAAG,OAAQnE,MAAO2qB,EAAOhjB,MAC3B,CAAExD,GAAG,QAASnE,MAAO2qB,EAAO7iB,OAC5B,CAAE3D,GAAG,gBAAiBnE,MAAO2qB,EAAO,iBAAkBoO,QAAQ,CAC7D,CAAC50B,GAAI,eAAgBnE,MAAO2qB,EAAO,iBACnC,CAACxmB,GAAI,iBAAkBnE,MAAO2qB,EAAO,mBACrC,CAACxmB,GAAI,eAAgBnE,MAAO2qB,EAAO,iBACnC,CAACxmB,GAAI,mBAAoBnE,MAAO2qB,EAAO,qBACvC,CAACxmB,GAAI,mBAAoBnE,MAAO2qB,EAAO,yBAI1C,IAAM8zC,EAAQ,CACbz2D,KAAM0nD,EAAUpuE,OAAO,CACtB,CAAE6iB,GAAG,QAAUnE,MAAO2qB,EAAc,MAAGoO,QAAS4S,MAChD,CAACxnC,GAAI,aAAcnE,MAAO2qB,EAAmB,WAAGoO,QAAQ,CACvD,CAAC50B,GAAG,sBAAuBnE,MAAO2qB,EAAO,wBACzC,CAACxmB,GAAG,yBAA0BnE,MAAO2qB,EAAO,2BAC5C,CAACxmB,GAAG,yBAA0BnE,MAAO2qB,EAAO,2BAC5C,CAACxmB,GAAG,gCAAiCnE,MAAO2qB,EAAO,oCAEpD,CAAExmB,GAAG,YAAcnE,MAAO2qB,EAAO,cACjC,CAAEkhB,UAAW,aACb,CAAE1nC,GAAG,OAAQnE,MAAO2qB,EAAOz4B,KAAM6mC,QAAQ,CACxC,CAAC50B,GAAI,WAAYnE,MAAO2qB,EAAO,aAC/B,CAACxmB,GAAI,YAAanE,MAAO2qB,EAAO,gBAEjC,CAACxmB,GAAG,gBAAkBnE,MAAO2qB,EAAO,kBACpC,CAAEkhB,UAAW,aACb,CAAE1nC,GAAG,YAAcnE,MAAO2qB,EAAO,cACjC,CAAExmB,GAAG,WAAanE,MAAO2qB,EAAO,aAChC,CAAExmB,GAAG,cAAgBnE,MAAO2qB,EAAO,kBAEpCjgB,OAAQ4gC,GAAmBr+B,GAC3B3G,IAAKmlC,GAAgBx+B,IAIlBiwB,EAAU,CACbjwB,KAAM,cACN9I,GAAI,UACJiT,QAAQ,EACR8hB,cAAc,CACb9hB,QAAQ,EACR5H,GAAG,CACFwgB,aAAa,WACZ1vB,KAAKo+D,eACN,IAGF12D,KAAK,GACLwH,GAAG,CACF4pB,gBAAe,SAACj1B,GACf8I,EAAK6D,UAAU,YAAa,CAACxQ,KAAKq+D,YAAYx6D,IAC9C,EACD86B,OAAM,kBACEhyB,EAAK9L,QACZ,EACD6uB,aAAY,SAACpS,GAGZ,IAAIQ,EAAMia,EAGV,GALAprB,EAAK9L,UAAW,EAChB+M,MAAM4C,UAAU,UAAW,MAG3BunB,EAAMprB,EAAKgU,OAAO0yB,OAAO/1B,IACf,OAAO,EAmBjB,GAjBAQ,EAAO,GACHia,EAAIsB,QAAyB,UAAftB,EAAI3tB,QAChBqkC,GAAc1W,EAAI3tB,OAAQuC,IAC9B4hC,GAAaxW,EAAI3tB,OAAQuC,GAC1BmR,EAAO,UACGia,EAAI/xB,MACK,UAAf+xB,EAAI3tB,QACFwkC,GAAc7W,EAAI/xB,IAAK2G,IAC3BshC,GAAUlW,EAAI/xB,IAAK2G,GACpBmR,EAAO,QAEF6wB,GAAe5W,EAAI/xB,IAAK+xB,EAAI3tB,OAAQuC,IACxCA,EAAKgU,OAAOmuB,cAAc/W,EAAKA,GAChCja,EAAO,SAILA,EAAK,CACR,IAAIpW,EAoBF,SAAqBiF,EAAM9f,EAAM6a,GACvC,IAAI8N,EAAK,CAAEqI,KAAKhxB,EAAM6a,KAAKA,GAC3B,OAAIiF,EAAK6D,UAAU,sBAAuB,CAACgF,IACnCA,GAAMA,EAAG9N,KACV,IACR,CAzBgB01D,CAAYzwD,EAAMmR,EAAMqgD,EAAMrgD,IACzC,GAAIpW,EAKH,OAJA1H,KAAK4+B,WACL5+B,KAAK2C,MAAM+E,GACX1H,KAAKo+D,gBACLxwD,MAAM6Q,KAAKgS,aAAanT,IACjB,CAET,CACA,OAAO,CACR,IAIF3Q,EAAK6D,UAAU,aAAc,CAAC,UAAWosB,IACzC,IAAM0hC,EAAc3xD,EAAK8B,GAAGmuB,GAE5BjwB,EAAK6iB,iBAAiBrqC,KAAKm5E,EAC5B,CDfG1hC,CAAa58B,MrCjFT,SAAc2M,GAIpB,IAHA,IAAM4xD,EAAU,CAAA,EACVC,EAAY7xD,EAAKuB,OAAOwqB,SAAW,CAACwyB,GAAKt6D,GAAKq6D,GAAK1E,IAAOkE,GAEvDjqE,EAAI,EAAGA,EAAIg+E,EAAUz9E,OAAQP,IACrC+9E,EAAQC,EAAUh+E,GAAGi1B,QAAU,IAAI+oD,EAAUh+E,GAAG03D,UAAUvrC,GAE3DA,EAAK+D,YAAY,aAAa,SAAS+E,GACtC,IAAM6iC,EAAMimB,EAAQ9oD,EAAO5R,IACvBy0C,GAAKA,EAAIsB,KAAKnkC,EACnB,IAEA9I,EAAK+D,YAAY,YAAY,SAAS7M,EAAItE,GAEzC,GAAS,YAANsE,IAAqBtE,EAAOuvB,SAAS,CACvC,IAAMwpB,EAAMimB,EAAQ,iBACjBjmB,GAAOA,EAAIqB,QAAUp6C,EAAOyG,KAC9BsyC,EAAI7hC,OAEN,CACD,GACD,CqC8DE8nD,CAAav+D,MAEbA,KAAKy+D,YAAYhyD,EACjB,EACDoxD,cAAc,WAAU,IAAA1uC,EAAAnvB,KAEnBA,KAAK2gB,SACT3gB,KAAK2gB,OAAS3gB,KAAK4P,GAAG,SEvEjB,SAAoBjD,GAK1B,IADA,IAAImJ,EAAM,CAAC4oD,GAAI9K,GAAGC,GAAGG,GAAGC,GAAGC,GAAGyK,GAAGC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAInL,GAAGK,GAAG+K,GAAIC,GAAKC,GAAKC,GAAKC,GAAIC,GAAIxL,GAAGyL,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,IACpI5/E,EAAI,EAAGA,EAAIs1B,EAAI/0B,OAAQP,IAC3Bs1B,EAAIt1B,GAAG47C,MACVtmB,EAAIt1B,GAAG47C,KAAKzvB,EAEf,CFiEE0zD,CAAWrgE,MAGXwlC,GAAUxlC,KAAMA,KAAKkO,OAAOwyB,YAAa1gC,KAAKkO,OAAOkF,UACrDiC,GAASrV,MAETA,KAAK2gB,OAAOjQ,YAAY,kBAAkB,WAAA,OACzCye,EAAK3e,UAAU,gBAAiB,CAAE2e,EAAKlf,eAAc,QAEtDjQ,KAAKwQ,UAAU,kBAAmB,IAClC,EACD8vD,QAAQ,SAASrxD,EAAKmrD,GAErBp6D,KAAK69D,gBAEL,IAAM/I,EAAQ7lD,EAAI6lD,MAEdA,EACH7lD,EAAMjP,KAAKm6D,YAAYlrD,EAAKmrD,GACpBnrD,EAAIvH,MAAsB,iBAAPuH,IAAoBmrD,EAAOnwD,OAAQmwD,EAAOp0D,MACrEiJ,EAAMjP,KAAKu6D,UAAUtrD,EAAKmrD,IhFgatB,SAAcztD,EAAMsC,EAAK6lD,GAC/BnoD,EAAK6L,eAAgB,EACrBvJ,EAAMrB,MAAM1K,QAAQ+L,GAAK,CAAC/D,OAAO+D,GAAKA,EACtC,IAAM0wB,EAAchzB,EAAKuB,OAAOyxB,aAAem1B,EAE/C,IAAI7lD,EAAI/D,QAAUyB,EAAKsvB,aAAa,CAEnC,IAAMpvC,EAAO8f,EAAKsvB,aAClBkD,GAASxyB,EAAM9f,GAAM8pB,QAAU1H,EAC/B8d,GAAapgB,EAAM9f,EAAMoiB,EAAK0wB,GAC9B39B,GAAQ2K,EAAMsC,EACf,MAECotB,GAAQ1vB,EAAMsC,EAAK0wB,GAEpBhzB,EAAK6L,eAAgB,CACtB,CgF9aEtN,CAAYlL,KAAMiP,EAAK6lD,EACxB,IGlHM,SAAanoD,GAEnB,IADA,IAAImJ,EAAM,CAACyqD,GAAKC,GAAKC,GAAKC,GAAKC,GAAKC,GAAKC,GAAKC,GAAKC,GAAKC,GAAKlW,GAAKvE,GAAK0a,GAAKtF,GAAKp2C,GAAK27C,GAAKC,GAAKjkD,IACvF18B,EAAI,EAAGA,EAAIs1B,EAAI/0B,OAAQP,IAC/BotB,MAAMgH,OAAOjI,EAAMmJ,EAAIt1B,GACzB,CHgHA4gF,CAAI1D,IACJ9vD,MAAMG,QAAQ2vD,GAAW9vD,MAAMyzD,eAAgBzzD,MAAMiK,QAASjK,MAAMa,GAAG8lB","x_google_ignoreList":[0]}